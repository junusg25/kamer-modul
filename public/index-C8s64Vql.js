function G8(t,r){for(var n=0;n<r.length;n++){const s=r[n];if(typeof s!="string"&&!Array.isArray(s)){for(const a in s)if(a!=="default"&&!(a in t)){const l=Object.getOwnPropertyDescriptor(s,a);l&&Object.defineProperty(t,a,l.get?l:{enumerable:!0,get:()=>s[a]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function n(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(a){if(a.ep)return;a.ep=!0;const l=n(a);fetch(a.href,l)}})();function Di(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Kv={exports:{}},nm={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ck;function Q8(){if(Ck)return nm;Ck=1;var t=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function n(s,a,l){var c=null;if(l!==void 0&&(c=""+l),a.key!==void 0&&(c=""+a.key),"key"in a){l={};for(var u in a)u!=="key"&&(l[u]=a[u])}else l=a;return a=l.ref,{$$typeof:t,type:s,key:c,ref:a!==void 0?a:null,props:l}}return nm.Fragment=r,nm.jsx=n,nm.jsxs=n,nm}var Sk;function X8(){return Sk||(Sk=1,Kv.exports=Q8()),Kv.exports}var e=X8(),Gv={exports:{}},rr={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kk;function Z8(){if(kk)return rr;kk=1;var t=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),p=Symbol.iterator;function y(F){return F===null||typeof F!="object"?null:(F=p&&F[p]||F["@@iterator"],typeof F=="function"?F:null)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,b={};function N(F,I,Q){this.props=F,this.context=I,this.refs=b,this.updater=Q||v}N.prototype.isReactComponent={},N.prototype.setState=function(F,I){if(typeof F!="object"&&typeof F!="function"&&F!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,F,I,"setState")},N.prototype.forceUpdate=function(F){this.updater.enqueueForceUpdate(this,F,"forceUpdate")};function _(){}_.prototype=N.prototype;function S(F,I,Q){this.props=F,this.context=I,this.refs=b,this.updater=Q||v}var k=S.prototype=new _;k.constructor=S,w(k,N.prototype),k.isPureReactComponent=!0;var E=Array.isArray,A={H:null,A:null,T:null,S:null,V:null},O=Object.prototype.hasOwnProperty;function z(F,I,Q,W,ee,ye){return Q=ye.ref,{$$typeof:t,type:F,key:I,ref:Q!==void 0?Q:null,props:ye}}function R(F,I){return z(F.type,I,void 0,void 0,void 0,F.props)}function G(F){return typeof F=="object"&&F!==null&&F.$$typeof===t}function J(F){var I={"=":"=0",":":"=2"};return"$"+F.replace(/[=:]/g,function(Q){return I[Q]})}var ie=/\/+/g;function V(F,I){return typeof F=="object"&&F!==null&&F.key!=null?J(""+F.key):I.toString(36)}function xe(){}function pe(F){switch(F.status){case"fulfilled":return F.value;case"rejected":throw F.reason;default:switch(typeof F.status=="string"?F.then(xe,xe):(F.status="pending",F.then(function(I){F.status==="pending"&&(F.status="fulfilled",F.value=I)},function(I){F.status==="pending"&&(F.status="rejected",F.reason=I)})),F.status){case"fulfilled":return F.value;case"rejected":throw F.reason}}throw F}function re(F,I,Q,W,ee){var ye=typeof F;(ye==="undefined"||ye==="boolean")&&(F=null);var he=!1;if(F===null)he=!0;else switch(ye){case"bigint":case"string":case"number":he=!0;break;case"object":switch(F.$$typeof){case t:case r:he=!0;break;case x:return he=F._init,re(he(F._payload),I,Q,W,ee)}}if(he)return ee=ee(F),he=W===""?"."+V(F,0):W,E(ee)?(Q="",he!=null&&(Q=he.replace(ie,"$&/")+"/"),re(ee,I,Q,"",function(ne){return ne})):ee!=null&&(G(ee)&&(ee=R(ee,Q+(ee.key==null||F&&F.key===ee.key?"":(""+ee.key).replace(ie,"$&/")+"/")+he)),I.push(ee)),1;he=0;var te=W===""?".":W+":";if(E(F))for(var De=0;De<F.length;De++)W=F[De],ye=te+V(W,De),he+=re(W,I,Q,ye,ee);else if(De=y(F),typeof De=="function")for(F=De.call(F),De=0;!(W=F.next()).done;)W=W.value,ye=te+V(W,De++),he+=re(W,I,Q,ye,ee);else if(ye==="object"){if(typeof F.then=="function")return re(pe(F),I,Q,W,ee);throw I=String(F),Error("Objects are not valid as a React child (found: "+(I==="[object Object]"?"object with keys {"+Object.keys(F).join(", ")+"}":I)+"). If you meant to render a collection of children, use an array instead.")}return he}function M(F,I,Q){if(F==null)return F;var W=[],ee=0;return re(F,W,"","",function(ye){return I.call(Q,ye,ee++)}),W}function B(F){if(F._status===-1){var I=F._result;I=I(),I.then(function(Q){(F._status===0||F._status===-1)&&(F._status=1,F._result=Q)},function(Q){(F._status===0||F._status===-1)&&(F._status=2,F._result=Q)}),F._status===-1&&(F._status=0,F._result=I)}if(F._status===1)return F._result.default;throw F._result}var L=typeof reportError=="function"?reportError:function(F){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var I=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof F=="object"&&F!==null&&typeof F.message=="string"?String(F.message):String(F),error:F});if(!window.dispatchEvent(I))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",F);return}console.error(F)};function T(){}return rr.Children={map:M,forEach:function(F,I,Q){M(F,function(){I.apply(this,arguments)},Q)},count:function(F){var I=0;return M(F,function(){I++}),I},toArray:function(F){return M(F,function(I){return I})||[]},only:function(F){if(!G(F))throw Error("React.Children.only expected to receive a single React element child.");return F}},rr.Component=N,rr.Fragment=n,rr.Profiler=a,rr.PureComponent=S,rr.StrictMode=s,rr.Suspense=d,rr.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=A,rr.__COMPILER_RUNTIME={__proto__:null,c:function(F){return A.H.useMemoCache(F)}},rr.cache=function(F){return function(){return F.apply(null,arguments)}},rr.cloneElement=function(F,I,Q){if(F==null)throw Error("The argument must be a React element, but you passed "+F+".");var W=w({},F.props),ee=F.key,ye=void 0;if(I!=null)for(he in I.ref!==void 0&&(ye=void 0),I.key!==void 0&&(ee=""+I.key),I)!O.call(I,he)||he==="key"||he==="__self"||he==="__source"||he==="ref"&&I.ref===void 0||(W[he]=I[he]);var he=arguments.length-2;if(he===1)W.children=Q;else if(1<he){for(var te=Array(he),De=0;De<he;De++)te[De]=arguments[De+2];W.children=te}return z(F.type,ee,void 0,void 0,ye,W)},rr.createContext=function(F){return F={$$typeof:c,_currentValue:F,_currentValue2:F,_threadCount:0,Provider:null,Consumer:null},F.Provider=F,F.Consumer={$$typeof:l,_context:F},F},rr.createElement=function(F,I,Q){var W,ee={},ye=null;if(I!=null)for(W in I.key!==void 0&&(ye=""+I.key),I)O.call(I,W)&&W!=="key"&&W!=="__self"&&W!=="__source"&&(ee[W]=I[W]);var he=arguments.length-2;if(he===1)ee.children=Q;else if(1<he){for(var te=Array(he),De=0;De<he;De++)te[De]=arguments[De+2];ee.children=te}if(F&&F.defaultProps)for(W in he=F.defaultProps,he)ee[W]===void 0&&(ee[W]=he[W]);return z(F,ye,void 0,void 0,null,ee)},rr.createRef=function(){return{current:null}},rr.forwardRef=function(F){return{$$typeof:u,render:F}},rr.isValidElement=G,rr.lazy=function(F){return{$$typeof:x,_payload:{_status:-1,_result:F},_init:B}},rr.memo=function(F,I){return{$$typeof:h,type:F,compare:I===void 0?null:I}},rr.startTransition=function(F){var I=A.T,Q={};A.T=Q;try{var W=F(),ee=A.S;ee!==null&&ee(Q,W),typeof W=="object"&&W!==null&&typeof W.then=="function"&&W.then(T,L)}catch(ye){L(ye)}finally{A.T=I}},rr.unstable_useCacheRefresh=function(){return A.H.useCacheRefresh()},rr.use=function(F){return A.H.use(F)},rr.useActionState=function(F,I,Q){return A.H.useActionState(F,I,Q)},rr.useCallback=function(F,I){return A.H.useCallback(F,I)},rr.useContext=function(F){return A.H.useContext(F)},rr.useDebugValue=function(){},rr.useDeferredValue=function(F,I){return A.H.useDeferredValue(F,I)},rr.useEffect=function(F,I,Q){var W=A.H;if(typeof Q=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return W.useEffect(F,I)},rr.useId=function(){return A.H.useId()},rr.useImperativeHandle=function(F,I,Q){return A.H.useImperativeHandle(F,I,Q)},rr.useInsertionEffect=function(F,I){return A.H.useInsertionEffect(F,I)},rr.useLayoutEffect=function(F,I){return A.H.useLayoutEffect(F,I)},rr.useMemo=function(F,I){return A.H.useMemo(F,I)},rr.useOptimistic=function(F,I){return A.H.useOptimistic(F,I)},rr.useReducer=function(F,I,Q){return A.H.useReducer(F,I,Q)},rr.useRef=function(F){return A.H.useRef(F)},rr.useState=function(F){return A.H.useState(F)},rr.useSyncExternalStore=function(F,I,Q){return A.H.useSyncExternalStore(F,I,Q)},rr.useTransition=function(){return A.H.useTransition()},rr.version="19.1.1",rr}var Ak;function Hd(){return Ak||(Ak=1,Gv.exports=Z8()),Gv.exports}var f=Hd();const ut=Di(f),$w=G8({__proto__:null,default:ut},[f]);var Qv={exports:{}},sm={},Xv={exports:{}},Zv={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ek;function J8(){return Ek||(Ek=1,(function(t){function r(M,B){var L=M.length;M.push(B);e:for(;0<L;){var T=L-1>>>1,F=M[T];if(0<a(F,B))M[T]=B,M[L]=F,L=T;else break e}}function n(M){return M.length===0?null:M[0]}function s(M){if(M.length===0)return null;var B=M[0],L=M.pop();if(L!==B){M[0]=L;e:for(var T=0,F=M.length,I=F>>>1;T<I;){var Q=2*(T+1)-1,W=M[Q],ee=Q+1,ye=M[ee];if(0>a(W,L))ee<F&&0>a(ye,W)?(M[T]=ye,M[ee]=L,T=ee):(M[T]=W,M[Q]=L,T=Q);else if(ee<F&&0>a(ye,L))M[T]=ye,M[ee]=L,T=ee;else break e}}return B}function a(M,B){var L=M.sortIndex-B.sortIndex;return L!==0?L:M.id-B.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;t.unstable_now=function(){return l.now()}}else{var c=Date,u=c.now();t.unstable_now=function(){return c.now()-u}}var d=[],h=[],x=1,p=null,y=3,v=!1,w=!1,b=!1,N=!1,_=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;function E(M){for(var B=n(h);B!==null;){if(B.callback===null)s(h);else if(B.startTime<=M)s(h),B.sortIndex=B.expirationTime,r(d,B);else break;B=n(h)}}function A(M){if(b=!1,E(M),!w)if(n(d)!==null)w=!0,O||(O=!0,V());else{var B=n(h);B!==null&&re(A,B.startTime-M)}}var O=!1,z=-1,R=5,G=-1;function J(){return N?!0:!(t.unstable_now()-G<R)}function ie(){if(N=!1,O){var M=t.unstable_now();G=M;var B=!0;try{e:{w=!1,b&&(b=!1,S(z),z=-1),v=!0;var L=y;try{t:{for(E(M),p=n(d);p!==null&&!(p.expirationTime>M&&J());){var T=p.callback;if(typeof T=="function"){p.callback=null,y=p.priorityLevel;var F=T(p.expirationTime<=M);if(M=t.unstable_now(),typeof F=="function"){p.callback=F,E(M),B=!0;break t}p===n(d)&&s(d),E(M)}else s(d);p=n(d)}if(p!==null)B=!0;else{var I=n(h);I!==null&&re(A,I.startTime-M),B=!1}}break e}finally{p=null,y=L,v=!1}B=void 0}}finally{B?V():O=!1}}}var V;if(typeof k=="function")V=function(){k(ie)};else if(typeof MessageChannel<"u"){var xe=new MessageChannel,pe=xe.port2;xe.port1.onmessage=ie,V=function(){pe.postMessage(null)}}else V=function(){_(ie,0)};function re(M,B){z=_(function(){M(t.unstable_now())},B)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(M){M.callback=null},t.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<M?Math.floor(1e3/M):5},t.unstable_getCurrentPriorityLevel=function(){return y},t.unstable_next=function(M){switch(y){case 1:case 2:case 3:var B=3;break;default:B=y}var L=y;y=B;try{return M()}finally{y=L}},t.unstable_requestPaint=function(){N=!0},t.unstable_runWithPriority=function(M,B){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var L=y;y=M;try{return B()}finally{y=L}},t.unstable_scheduleCallback=function(M,B,L){var T=t.unstable_now();switch(typeof L=="object"&&L!==null?(L=L.delay,L=typeof L=="number"&&0<L?T+L:T):L=T,M){case 1:var F=-1;break;case 2:F=250;break;case 5:F=1073741823;break;case 4:F=1e4;break;default:F=5e3}return F=L+F,M={id:x++,callback:B,priorityLevel:M,startTime:L,expirationTime:F,sortIndex:-1},L>T?(M.sortIndex=L,r(h,M),n(d)===null&&M===n(h)&&(b?(S(z),z=-1):b=!0,re(A,L-T))):(M.sortIndex=F,r(d,M),w||v||(w=!0,O||(O=!0,V()))),M},t.unstable_shouldYield=J,t.unstable_wrapCallback=function(M){var B=y;return function(){var L=y;y=B;try{return M.apply(this,arguments)}finally{y=L}}}})(Zv)),Zv}var Mk;function eU(){return Mk||(Mk=1,Xv.exports=J8()),Xv.exports}var Jv={exports:{}},Ns={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tk;function tU(){if(Tk)return Ns;Tk=1;var t=Hd();function r(d){var h="https://react.dev/errors/"+d;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var x=2;x<arguments.length;x++)h+="&args[]="+encodeURIComponent(arguments[x])}return"Minified React error #"+d+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(r(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(d,h,x){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:p==null?null:""+p,children:d,containerInfo:h,implementation:x}}var c=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(d,h){if(d==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return Ns.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Ns.createPortal=function(d,h){var x=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(r(299));return l(d,h,null,x)},Ns.flushSync=function(d){var h=c.T,x=s.p;try{if(c.T=null,s.p=2,d)return d()}finally{c.T=h,s.p=x,s.d.f()}},Ns.preconnect=function(d,h){typeof d=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,s.d.C(d,h))},Ns.prefetchDNS=function(d){typeof d=="string"&&s.d.D(d)},Ns.preinit=function(d,h){if(typeof d=="string"&&h&&typeof h.as=="string"){var x=h.as,p=u(x,h.crossOrigin),y=typeof h.integrity=="string"?h.integrity:void 0,v=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;x==="style"?s.d.S(d,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:p,integrity:y,fetchPriority:v}):x==="script"&&s.d.X(d,{crossOrigin:p,integrity:y,fetchPriority:v,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},Ns.preinitModule=function(d,h){if(typeof d=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var x=u(h.as,h.crossOrigin);s.d.M(d,{crossOrigin:x,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&s.d.M(d)},Ns.preload=function(d,h){if(typeof d=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var x=h.as,p=u(x,h.crossOrigin);s.d.L(d,x,{crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},Ns.preloadModule=function(d,h){if(typeof d=="string")if(h){var x=u(h.as,h.crossOrigin);s.d.m(d,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:x,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else s.d.m(d)},Ns.requestFormReset=function(d){s.d.r(d)},Ns.unstable_batchedUpdates=function(d,h){return d(h)},Ns.useFormState=function(d,h,x){return c.H.useFormState(d,h,x)},Ns.useFormStatus=function(){return c.H.useHostTransitionStatus()},Ns.version="19.1.1",Ns}var Ok;function hO(){if(Ok)return Jv.exports;Ok=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(r){console.error(r)}}return t(),Jv.exports=tU(),Jv.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pk;function rU(){if(Pk)return sm;Pk=1;var t=eU(),r=Hd(),n=hO();function s(i){var o="https://react.dev/errors/"+i;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)o+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+i+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function l(i){var o=i,m=i;if(i.alternate)for(;o.return;)o=o.return;else{i=o;do o=i,(o.flags&4098)!==0&&(m=o.return),i=o.return;while(i)}return o.tag===3?m:null}function c(i){if(i.tag===13){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function u(i){if(l(i)!==i)throw Error(s(188))}function d(i){var o=i.alternate;if(!o){if(o=l(i),o===null)throw Error(s(188));return o!==i?null:i}for(var m=i,g=o;;){var j=m.return;if(j===null)break;var C=j.alternate;if(C===null){if(g=j.return,g!==null){m=g;continue}break}if(j.child===C.child){for(C=j.child;C;){if(C===m)return u(j),i;if(C===g)return u(j),o;C=C.sibling}throw Error(s(188))}if(m.return!==g.return)m=j,g=C;else{for(var D=!1,X=j.child;X;){if(X===m){D=!0,m=j,g=C;break}if(X===g){D=!0,g=j,m=C;break}X=X.sibling}if(!D){for(X=C.child;X;){if(X===m){D=!0,m=C,g=j;break}if(X===g){D=!0,g=C,m=j;break}X=X.sibling}if(!D)throw Error(s(189))}}if(m.alternate!==g)throw Error(s(190))}if(m.tag!==3)throw Error(s(188));return m.stateNode.current===m?i:o}function h(i){var o=i.tag;if(o===5||o===26||o===27||o===6)return i;for(i=i.child;i!==null;){if(o=h(i),o!==null)return o;i=i.sibling}return null}var x=Object.assign,p=Symbol.for("react.element"),y=Symbol.for("react.transitional.element"),v=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),b=Symbol.for("react.strict_mode"),N=Symbol.for("react.profiler"),_=Symbol.for("react.provider"),S=Symbol.for("react.consumer"),k=Symbol.for("react.context"),E=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),O=Symbol.for("react.suspense_list"),z=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),G=Symbol.for("react.activity"),J=Symbol.for("react.memo_cache_sentinel"),ie=Symbol.iterator;function V(i){return i===null||typeof i!="object"?null:(i=ie&&i[ie]||i["@@iterator"],typeof i=="function"?i:null)}var xe=Symbol.for("react.client.reference");function pe(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===xe?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case w:return"Fragment";case N:return"Profiler";case b:return"StrictMode";case A:return"Suspense";case O:return"SuspenseList";case G:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case v:return"Portal";case k:return(i.displayName||"Context")+".Provider";case S:return(i._context.displayName||"Context")+".Consumer";case E:var o=i.render;return i=i.displayName,i||(i=o.displayName||o.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case z:return o=i.displayName||null,o!==null?o:pe(i.type)||"Memo";case R:o=i._payload,i=i._init;try{return pe(i(o))}catch{}}return null}var re=Array.isArray,M=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,B=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,L={pending:!1,data:null,method:null,action:null},T=[],F=-1;function I(i){return{current:i}}function Q(i){0>F||(i.current=T[F],T[F]=null,F--)}function W(i,o){F++,T[F]=i.current,i.current=o}var ee=I(null),ye=I(null),he=I(null),te=I(null);function De(i,o){switch(W(he,o),W(ye,i),W(ee,null),o.nodeType){case 9:case 11:i=(i=o.documentElement)&&(i=i.namespaceURI)?J2(i):0;break;default:if(i=o.tagName,o=o.namespaceURI)o=J2(o),i=ek(o,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}Q(ee),W(ee,i)}function ne(){Q(ee),Q(ye),Q(he)}function $e(i){i.memoizedState!==null&&W(te,i);var o=ee.current,m=ek(o,i.type);o!==m&&(W(ye,i),W(ee,m))}function ge(i){ye.current===i&&(Q(ee),Q(ye)),te.current===i&&(Q(te),Zu._currentValue=L)}var we=Object.prototype.hasOwnProperty,_e=t.unstable_scheduleCallback,Ye=t.unstable_cancelCallback,ht=t.unstable_shouldYield,Ve=t.unstable_requestPaint,lt=t.unstable_now,yt=t.unstable_getCurrentPriorityLevel,Re=t.unstable_ImmediatePriority,H=t.unstable_UserBlockingPriority,Be=t.unstable_NormalPriority,st=t.unstable_LowPriority,K=t.unstable_IdlePriority,Z=t.log,ke=t.unstable_setDisableYieldValue,Ae=null,je=null;function He(i){if(typeof Z=="function"&&ke(i),je&&typeof je.setStrictMode=="function")try{je.setStrictMode(Ae,i)}catch{}}var Se=Math.clz32?Math.clz32:Tt,it=Math.log,Me=Math.LN2;function Tt(i){return i>>>=0,i===0?32:31-(it(i)/Me|0)|0}var Pe=256,Ee=4194304;function xt(i){var o=i&42;if(o!==0)return o;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function wt(i,o,m){var g=i.pendingLanes;if(g===0)return 0;var j=0,C=i.suspendedLanes,D=i.pingedLanes;i=i.warmLanes;var X=g&134217727;return X!==0?(g=X&~C,g!==0?j=xt(g):(D&=X,D!==0?j=xt(D):m||(m=X&~i,m!==0&&(j=xt(m))))):(X=g&~C,X!==0?j=xt(X):D!==0?j=xt(D):m||(m=g&~i,m!==0&&(j=xt(m)))),j===0?0:o!==0&&o!==j&&(o&C)===0&&(C=j&-j,m=o&-o,C>=m||C===32&&(m&4194048)!==0)?o:j}function Le(i,o){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&o)===0}function ot(i,o){switch(i){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function It(){var i=Pe;return Pe<<=1,(Pe&4194048)===0&&(Pe=256),i}function Er(){var i=Ee;return Ee<<=1,(Ee&62914560)===0&&(Ee=4194304),i}function Yr(i){for(var o=[],m=0;31>m;m++)o.push(i);return o}function Gn(i,o){i.pendingLanes|=o,o!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function Qn(i,o,m,g,j,C){var D=i.pendingLanes;i.pendingLanes=m,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=m,i.entangledLanes&=m,i.errorRecoveryDisabledLanes&=m,i.shellSuspendCounter=0;var X=i.entanglements,ve=i.expirationTimes,Fe=i.hiddenUpdates;for(m=D&~m;0<m;){var Ge=31-Se(m),nt=1<<Ge;X[Ge]=0,ve[Ge]=-1;var qe=Fe[Ge];if(qe!==null)for(Fe[Ge]=null,Ge=0;Ge<qe.length;Ge++){var Ue=qe[Ge];Ue!==null&&(Ue.lane&=-536870913)}m&=~nt}g!==0&&$t(i,g,0),C!==0&&j===0&&i.tag!==0&&(i.suspendedLanes|=C&~(D&~o))}function $t(i,o,m){i.pendingLanes|=o,i.suspendedLanes&=~o;var g=31-Se(o);i.entangledLanes|=o,i.entanglements[g]=i.entanglements[g]|1073741824|m&4194090}function sr(i,o){var m=i.entangledLanes|=o;for(i=i.entanglements;m;){var g=31-Se(m),j=1<<g;j&o|i[g]&o&&(i[g]|=o),m&=~j}}function le(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function Qe(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function P(){var i=B.p;return i!==0?i:(i=window.event,i===void 0?32:vk(i.type))}function $(i,o){var m=B.p;try{return B.p=i,o()}finally{B.p=m}}var We=Math.random().toString(36).slice(2),vt="__reactFiber$"+We,dt="__reactProps$"+We,zt="__reactContainer$"+We,kn="__reactEvents$"+We,ce="__reactListeners$"+We,Ze="__reactHandles$"+We,pt="__reactResources$"+We,Dt="__reactMarker$"+We;function Nr(i){delete i[vt],delete i[dt],delete i[kn],delete i[ce],delete i[Ze]}function pr(i){var o=i[vt];if(o)return o;for(var m=i.parentNode;m;){if(o=m[zt]||m[vt]){if(m=o.alternate,o.child!==null||m!==null&&m.child!==null)for(i=sk(i);i!==null;){if(m=i[vt])return m;i=sk(i)}return o}i=m,m=i.parentNode}return null}function In(i){if(i=i[vt]||i[zt]){var o=i.tag;if(o===5||o===6||o===13||o===26||o===27||o===3)return i}return null}function ui(i){var o=i.tag;if(o===5||o===26||o===27||o===6)return i.stateNode;throw Error(s(33))}function Oc(i){var o=i[pt];return o||(o=i[pt]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function Xn(i){i[Dt]=!0}var z1=new Set,B1={};function Eo(i,o){Pc(i,o),Pc(i+"Capture",o)}function Pc(i,o){for(B1[i]=o,i=0;i<o.length;i++)z1.add(o[i])}var U6=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),W1={},H1={};function z6(i){return we.call(H1,i)?!0:we.call(W1,i)?!1:U6.test(i)?H1[i]=!0:(W1[i]=!0,!1)}function Mh(i,o,m){if(z6(o))if(m===null)i.removeAttribute(o);else{switch(typeof m){case"undefined":case"function":case"symbol":i.removeAttribute(o);return;case"boolean":var g=o.toLowerCase().slice(0,5);if(g!=="data-"&&g!=="aria-"){i.removeAttribute(o);return}}i.setAttribute(o,""+m)}}function Th(i,o,m){if(m===null)i.removeAttribute(o);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(o);return}i.setAttribute(o,""+m)}}function Ii(i,o,m,g){if(g===null)i.removeAttribute(m);else{switch(typeof g){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(m);return}i.setAttributeNS(o,m,""+g)}}var zg,V1;function Dc(i){if(zg===void 0)try{throw Error()}catch(m){var o=m.stack.trim().match(/\n( *(at )?)/);zg=o&&o[1]||"",V1=-1<m.stack.indexOf(`
    at`)?" (<anonymous>)":-1<m.stack.indexOf("@")?"@unknown:0:0":""}return`
`+zg+i+V1}var Bg=!1;function Wg(i,o){if(!i||Bg)return"";Bg=!0;var m=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var g={DetermineComponentFrameRoot:function(){try{if(o){var nt=function(){throw Error()};if(Object.defineProperty(nt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(nt,[])}catch(Ue){var qe=Ue}Reflect.construct(i,[],nt)}else{try{nt.call()}catch(Ue){qe=Ue}i.call(nt.prototype)}}else{try{throw Error()}catch(Ue){qe=Ue}(nt=i())&&typeof nt.catch=="function"&&nt.catch(function(){})}}catch(Ue){if(Ue&&qe&&typeof Ue.stack=="string")return[Ue.stack,qe.stack]}return[null,null]}};g.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var j=Object.getOwnPropertyDescriptor(g.DetermineComponentFrameRoot,"name");j&&j.configurable&&Object.defineProperty(g.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var C=g.DetermineComponentFrameRoot(),D=C[0],X=C[1];if(D&&X){var ve=D.split(`
`),Fe=X.split(`
`);for(j=g=0;g<ve.length&&!ve[g].includes("DetermineComponentFrameRoot");)g++;for(;j<Fe.length&&!Fe[j].includes("DetermineComponentFrameRoot");)j++;if(g===ve.length||j===Fe.length)for(g=ve.length-1,j=Fe.length-1;1<=g&&0<=j&&ve[g]!==Fe[j];)j--;for(;1<=g&&0<=j;g--,j--)if(ve[g]!==Fe[j]){if(g!==1||j!==1)do if(g--,j--,0>j||ve[g]!==Fe[j]){var Ge=`
`+ve[g].replace(" at new "," at ");return i.displayName&&Ge.includes("<anonymous>")&&(Ge=Ge.replace("<anonymous>",i.displayName)),Ge}while(1<=g&&0<=j);break}}}finally{Bg=!1,Error.prepareStackTrace=m}return(m=i?i.displayName||i.name:"")?Dc(m):""}function B6(i){switch(i.tag){case 26:case 27:case 5:return Dc(i.type);case 16:return Dc("Lazy");case 13:return Dc("Suspense");case 19:return Dc("SuspenseList");case 0:case 15:return Wg(i.type,!1);case 11:return Wg(i.type.render,!1);case 1:return Wg(i.type,!0);case 31:return Dc("Activity");default:return""}}function Y1(i){try{var o="";do o+=B6(i),i=i.return;while(i);return o}catch(m){return`
Error generating stack: `+m.message+`
`+m.stack}}function ya(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function K1(i){var o=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function W6(i){var o=K1(i)?"checked":"value",m=Object.getOwnPropertyDescriptor(i.constructor.prototype,o),g=""+i[o];if(!i.hasOwnProperty(o)&&typeof m<"u"&&typeof m.get=="function"&&typeof m.set=="function"){var j=m.get,C=m.set;return Object.defineProperty(i,o,{configurable:!0,get:function(){return j.call(this)},set:function(D){g=""+D,C.call(this,D)}}),Object.defineProperty(i,o,{enumerable:m.enumerable}),{getValue:function(){return g},setValue:function(D){g=""+D},stopTracking:function(){i._valueTracker=null,delete i[o]}}}}function Oh(i){i._valueTracker||(i._valueTracker=W6(i))}function G1(i){if(!i)return!1;var o=i._valueTracker;if(!o)return!0;var m=o.getValue(),g="";return i&&(g=K1(i)?i.checked?"true":"false":i.value),i=g,i!==m?(o.setValue(i),!0):!1}function Ph(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var H6=/[\n"\\]/g;function va(i){return i.replace(H6,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function Hg(i,o,m,g,j,C,D,X){i.name="",D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"?i.type=D:i.removeAttribute("type"),o!=null?D==="number"?(o===0&&i.value===""||i.value!=o)&&(i.value=""+ya(o)):i.value!==""+ya(o)&&(i.value=""+ya(o)):D!=="submit"&&D!=="reset"||i.removeAttribute("value"),o!=null?Vg(i,D,ya(o)):m!=null?Vg(i,D,ya(m)):g!=null&&i.removeAttribute("value"),j==null&&C!=null&&(i.defaultChecked=!!C),j!=null&&(i.checked=j&&typeof j!="function"&&typeof j!="symbol"),X!=null&&typeof X!="function"&&typeof X!="symbol"&&typeof X!="boolean"?i.name=""+ya(X):i.removeAttribute("name")}function Q1(i,o,m,g,j,C,D,X){if(C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"&&(i.type=C),o!=null||m!=null){if(!(C!=="submit"&&C!=="reset"||o!=null))return;m=m!=null?""+ya(m):"",o=o!=null?""+ya(o):m,X||o===i.value||(i.value=o),i.defaultValue=o}g=g??j,g=typeof g!="function"&&typeof g!="symbol"&&!!g,i.checked=X?i.checked:!!g,i.defaultChecked=!!g,D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"&&(i.name=D)}function Vg(i,o,m){o==="number"&&Ph(i.ownerDocument)===i||i.defaultValue===""+m||(i.defaultValue=""+m)}function Rc(i,o,m,g){if(i=i.options,o){o={};for(var j=0;j<m.length;j++)o["$"+m[j]]=!0;for(m=0;m<i.length;m++)j=o.hasOwnProperty("$"+i[m].value),i[m].selected!==j&&(i[m].selected=j),j&&g&&(i[m].defaultSelected=!0)}else{for(m=""+ya(m),o=null,j=0;j<i.length;j++){if(i[j].value===m){i[j].selected=!0,g&&(i[j].defaultSelected=!0);return}o!==null||i[j].disabled||(o=i[j])}o!==null&&(o.selected=!0)}}function X1(i,o,m){if(o!=null&&(o=""+ya(o),o!==i.value&&(i.value=o),m==null)){i.defaultValue!==o&&(i.defaultValue=o);return}i.defaultValue=m!=null?""+ya(m):""}function Z1(i,o,m,g){if(o==null){if(g!=null){if(m!=null)throw Error(s(92));if(re(g)){if(1<g.length)throw Error(s(93));g=g[0]}m=g}m==null&&(m=""),o=m}m=ya(o),i.defaultValue=m,g=i.textContent,g===m&&g!==""&&g!==null&&(i.value=g)}function Lc(i,o){if(o){var m=i.firstChild;if(m&&m===i.lastChild&&m.nodeType===3){m.nodeValue=o;return}}i.textContent=o}var V6=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function J1(i,o,m){var g=o.indexOf("--")===0;m==null||typeof m=="boolean"||m===""?g?i.setProperty(o,""):o==="float"?i.cssFloat="":i[o]="":g?i.setProperty(o,m):typeof m!="number"||m===0||V6.has(o)?o==="float"?i.cssFloat=m:i[o]=(""+m).trim():i[o]=m+"px"}function eC(i,o,m){if(o!=null&&typeof o!="object")throw Error(s(62));if(i=i.style,m!=null){for(var g in m)!m.hasOwnProperty(g)||o!=null&&o.hasOwnProperty(g)||(g.indexOf("--")===0?i.setProperty(g,""):g==="float"?i.cssFloat="":i[g]="");for(var j in o)g=o[j],o.hasOwnProperty(j)&&m[j]!==g&&J1(i,j,g)}else for(var C in o)o.hasOwnProperty(C)&&J1(i,C,o[C])}function Yg(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Y6=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),K6=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Dh(i){return K6.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}var Kg=null;function Gg(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Ic=null,$c=null;function tC(i){var o=In(i);if(o&&(i=o.stateNode)){var m=i[dt]||null;e:switch(i=o.stateNode,o.type){case"input":if(Hg(i,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name),o=m.name,m.type==="radio"&&o!=null){for(m=i;m.parentNode;)m=m.parentNode;for(m=m.querySelectorAll('input[name="'+va(""+o)+'"][type="radio"]'),o=0;o<m.length;o++){var g=m[o];if(g!==i&&g.form===i.form){var j=g[dt]||null;if(!j)throw Error(s(90));Hg(g,j.value,j.defaultValue,j.defaultValue,j.checked,j.defaultChecked,j.type,j.name)}}for(o=0;o<m.length;o++)g=m[o],g.form===i.form&&G1(g)}break e;case"textarea":X1(i,m.value,m.defaultValue);break e;case"select":o=m.value,o!=null&&Rc(i,!!m.multiple,o,!1)}}}var Qg=!1;function rC(i,o,m){if(Qg)return i(o,m);Qg=!0;try{var g=i(o);return g}finally{if(Qg=!1,(Ic!==null||$c!==null)&&(jf(),Ic&&(o=Ic,i=$c,$c=Ic=null,tC(o),i)))for(o=0;o<i.length;o++)tC(i[o])}}function uu(i,o){var m=i.stateNode;if(m===null)return null;var g=m[dt]||null;if(g===null)return null;m=g[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(i=i.type,g=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!g;break e;default:i=!1}if(i)return null;if(m&&typeof m!="function")throw Error(s(231,o,typeof m));return m}var $i=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Xg=!1;if($i)try{var mu={};Object.defineProperty(mu,"passive",{get:function(){Xg=!0}}),window.addEventListener("test",mu,mu),window.removeEventListener("test",mu,mu)}catch{Xg=!1}var El=null,Zg=null,Rh=null;function nC(){if(Rh)return Rh;var i,o=Zg,m=o.length,g,j="value"in El?El.value:El.textContent,C=j.length;for(i=0;i<m&&o[i]===j[i];i++);var D=m-i;for(g=1;g<=D&&o[m-g]===j[C-g];g++);return Rh=j.slice(i,1<g?1-g:void 0)}function Lh(i){var o=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&o===13&&(i=13)):i=o,i===10&&(i=13),32<=i||i===13?i:0}function Ih(){return!0}function sC(){return!1}function Ls(i){function o(m,g,j,C,D){this._reactName=m,this._targetInst=j,this.type=g,this.nativeEvent=C,this.target=D,this.currentTarget=null;for(var X in i)i.hasOwnProperty(X)&&(m=i[X],this[X]=m?m(C):C[X]);return this.isDefaultPrevented=(C.defaultPrevented!=null?C.defaultPrevented:C.returnValue===!1)?Ih:sC,this.isPropagationStopped=sC,this}return x(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var m=this.nativeEvent;m&&(m.preventDefault?m.preventDefault():typeof m.returnValue!="unknown"&&(m.returnValue=!1),this.isDefaultPrevented=Ih)},stopPropagation:function(){var m=this.nativeEvent;m&&(m.stopPropagation?m.stopPropagation():typeof m.cancelBubble!="unknown"&&(m.cancelBubble=!0),this.isPropagationStopped=Ih)},persist:function(){},isPersistent:Ih}),o}var Mo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},$h=Ls(Mo),hu=x({},Mo,{view:0,detail:0}),G6=Ls(hu),Jg,ey,fu,Fh=x({},hu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ry,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==fu&&(fu&&i.type==="mousemove"?(Jg=i.screenX-fu.screenX,ey=i.screenY-fu.screenY):ey=Jg=0,fu=i),Jg)},movementY:function(i){return"movementY"in i?i.movementY:ey}}),aC=Ls(Fh),Q6=x({},Fh,{dataTransfer:0}),X6=Ls(Q6),Z6=x({},hu,{relatedTarget:0}),ty=Ls(Z6),J6=x({},Mo,{animationName:0,elapsedTime:0,pseudoElement:0}),eq=Ls(J6),tq=x({},Mo,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),rq=Ls(tq),nq=x({},Mo,{data:0}),iC=Ls(nq),sq={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},aq={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},iq={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function lq(i){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(i):(i=iq[i])?!!o[i]:!1}function ry(){return lq}var oq=x({},hu,{key:function(i){if(i.key){var o=sq[i.key]||i.key;if(o!=="Unidentified")return o}return i.type==="keypress"?(i=Lh(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?aq[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ry,charCode:function(i){return i.type==="keypress"?Lh(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Lh(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),cq=Ls(oq),dq=x({},Fh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),lC=Ls(dq),uq=x({},hu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ry}),mq=Ls(uq),hq=x({},Mo,{propertyName:0,elapsedTime:0,pseudoElement:0}),fq=Ls(hq),xq=x({},Fh,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),pq=Ls(xq),gq=x({},Mo,{newState:0,oldState:0}),yq=Ls(gq),vq=[9,13,27,32],ny=$i&&"CompositionEvent"in window,xu=null;$i&&"documentMode"in document&&(xu=document.documentMode);var jq=$i&&"TextEvent"in window&&!xu,oC=$i&&(!ny||xu&&8<xu&&11>=xu),cC=" ",dC=!1;function uC(i,o){switch(i){case"keyup":return vq.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function mC(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Fc=!1;function bq(i,o){switch(i){case"compositionend":return mC(o);case"keypress":return o.which!==32?null:(dC=!0,cC);case"textInput":return i=o.data,i===cC&&dC?null:i;default:return null}}function wq(i,o){if(Fc)return i==="compositionend"||!ny&&uC(i,o)?(i=nC(),Rh=Zg=El=null,Fc=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return oC&&o.locale!=="ko"?null:o.data;default:return null}}var Nq={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function hC(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o==="input"?!!Nq[i.type]:o==="textarea"}function fC(i,o,m,g){Ic?$c?$c.push(g):$c=[g]:Ic=g,o=Sf(o,"onChange"),0<o.length&&(m=new $h("onChange","change",null,m,g),i.push({event:m,listeners:o}))}var pu=null,gu=null;function _q(i){K2(i,0)}function qh(i){var o=ui(i);if(G1(o))return i}function xC(i,o){if(i==="change")return o}var pC=!1;if($i){var sy;if($i){var ay="oninput"in document;if(!ay){var gC=document.createElement("div");gC.setAttribute("oninput","return;"),ay=typeof gC.oninput=="function"}sy=ay}else sy=!1;pC=sy&&(!document.documentMode||9<document.documentMode)}function yC(){pu&&(pu.detachEvent("onpropertychange",vC),gu=pu=null)}function vC(i){if(i.propertyName==="value"&&qh(gu)){var o=[];fC(o,gu,i,Gg(i)),rC(_q,o)}}function Cq(i,o,m){i==="focusin"?(yC(),pu=o,gu=m,pu.attachEvent("onpropertychange",vC)):i==="focusout"&&yC()}function Sq(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return qh(gu)}function kq(i,o){if(i==="click")return qh(o)}function Aq(i,o){if(i==="input"||i==="change")return qh(o)}function Eq(i,o){return i===o&&(i!==0||1/i===1/o)||i!==i&&o!==o}var Js=typeof Object.is=="function"?Object.is:Eq;function yu(i,o){if(Js(i,o))return!0;if(typeof i!="object"||i===null||typeof o!="object"||o===null)return!1;var m=Object.keys(i),g=Object.keys(o);if(m.length!==g.length)return!1;for(g=0;g<m.length;g++){var j=m[g];if(!we.call(o,j)||!Js(i[j],o[j]))return!1}return!0}function jC(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function bC(i,o){var m=jC(i);i=0;for(var g;m;){if(m.nodeType===3){if(g=i+m.textContent.length,i<=o&&g>=o)return{node:m,offset:o-i};i=g}e:{for(;m;){if(m.nextSibling){m=m.nextSibling;break e}m=m.parentNode}m=void 0}m=jC(m)}}function wC(i,o){return i&&o?i===o?!0:i&&i.nodeType===3?!1:o&&o.nodeType===3?wC(i,o.parentNode):"contains"in i?i.contains(o):i.compareDocumentPosition?!!(i.compareDocumentPosition(o)&16):!1:!1}function NC(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var o=Ph(i.document);o instanceof i.HTMLIFrameElement;){try{var m=typeof o.contentWindow.location.href=="string"}catch{m=!1}if(m)i=o.contentWindow;else break;o=Ph(i.document)}return o}function iy(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o&&(o==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||o==="textarea"||i.contentEditable==="true")}var Mq=$i&&"documentMode"in document&&11>=document.documentMode,qc=null,ly=null,vu=null,oy=!1;function _C(i,o,m){var g=m.window===m?m.document:m.nodeType===9?m:m.ownerDocument;oy||qc==null||qc!==Ph(g)||(g=qc,"selectionStart"in g&&iy(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),vu&&yu(vu,g)||(vu=g,g=Sf(ly,"onSelect"),0<g.length&&(o=new $h("onSelect","select",null,o,m),i.push({event:o,listeners:g}),o.target=qc)))}function To(i,o){var m={};return m[i.toLowerCase()]=o.toLowerCase(),m["Webkit"+i]="webkit"+o,m["Moz"+i]="moz"+o,m}var Uc={animationend:To("Animation","AnimationEnd"),animationiteration:To("Animation","AnimationIteration"),animationstart:To("Animation","AnimationStart"),transitionrun:To("Transition","TransitionRun"),transitionstart:To("Transition","TransitionStart"),transitioncancel:To("Transition","TransitionCancel"),transitionend:To("Transition","TransitionEnd")},cy={},CC={};$i&&(CC=document.createElement("div").style,"AnimationEvent"in window||(delete Uc.animationend.animation,delete Uc.animationiteration.animation,delete Uc.animationstart.animation),"TransitionEvent"in window||delete Uc.transitionend.transition);function Oo(i){if(cy[i])return cy[i];if(!Uc[i])return i;var o=Uc[i],m;for(m in o)if(o.hasOwnProperty(m)&&m in CC)return cy[i]=o[m];return i}var SC=Oo("animationend"),kC=Oo("animationiteration"),AC=Oo("animationstart"),Tq=Oo("transitionrun"),Oq=Oo("transitionstart"),Pq=Oo("transitioncancel"),EC=Oo("transitionend"),MC=new Map,dy="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");dy.push("scrollEnd");function Ha(i,o){MC.set(i,o),Eo(o,[i])}var TC=new WeakMap;function ja(i,o){if(typeof i=="object"&&i!==null){var m=TC.get(i);return m!==void 0?m:(o={value:i,source:o,stack:Y1(o)},TC.set(i,o),o)}return{value:i,source:o,stack:Y1(o)}}var ba=[],zc=0,uy=0;function Uh(){for(var i=zc,o=uy=zc=0;o<i;){var m=ba[o];ba[o++]=null;var g=ba[o];ba[o++]=null;var j=ba[o];ba[o++]=null;var C=ba[o];if(ba[o++]=null,g!==null&&j!==null){var D=g.pending;D===null?j.next=j:(j.next=D.next,D.next=j),g.pending=j}C!==0&&OC(m,j,C)}}function zh(i,o,m,g){ba[zc++]=i,ba[zc++]=o,ba[zc++]=m,ba[zc++]=g,uy|=g,i.lanes|=g,i=i.alternate,i!==null&&(i.lanes|=g)}function my(i,o,m,g){return zh(i,o,m,g),Bh(i)}function Bc(i,o){return zh(i,null,null,o),Bh(i)}function OC(i,o,m){i.lanes|=m;var g=i.alternate;g!==null&&(g.lanes|=m);for(var j=!1,C=i.return;C!==null;)C.childLanes|=m,g=C.alternate,g!==null&&(g.childLanes|=m),C.tag===22&&(i=C.stateNode,i===null||i._visibility&1||(j=!0)),i=C,C=C.return;return i.tag===3?(C=i.stateNode,j&&o!==null&&(j=31-Se(m),i=C.hiddenUpdates,g=i[j],g===null?i[j]=[o]:g.push(o),o.lane=m|536870912),C):null}function Bh(i){if(50<Wu)throw Wu=0,yv=null,Error(s(185));for(var o=i.return;o!==null;)i=o,o=i.return;return i.tag===3?i.stateNode:null}var Wc={};function Dq(i,o,m,g){this.tag=i,this.key=m,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ea(i,o,m,g){return new Dq(i,o,m,g)}function hy(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Fi(i,o){var m=i.alternate;return m===null?(m=ea(i.tag,o,i.key,i.mode),m.elementType=i.elementType,m.type=i.type,m.stateNode=i.stateNode,m.alternate=i,i.alternate=m):(m.pendingProps=o,m.type=i.type,m.flags=0,m.subtreeFlags=0,m.deletions=null),m.flags=i.flags&65011712,m.childLanes=i.childLanes,m.lanes=i.lanes,m.child=i.child,m.memoizedProps=i.memoizedProps,m.memoizedState=i.memoizedState,m.updateQueue=i.updateQueue,o=i.dependencies,m.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},m.sibling=i.sibling,m.index=i.index,m.ref=i.ref,m.refCleanup=i.refCleanup,m}function PC(i,o){i.flags&=65011714;var m=i.alternate;return m===null?(i.childLanes=0,i.lanes=o,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=m.childLanes,i.lanes=m.lanes,i.child=m.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=m.memoizedProps,i.memoizedState=m.memoizedState,i.updateQueue=m.updateQueue,i.type=m.type,o=m.dependencies,i.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),i}function Wh(i,o,m,g,j,C){var D=0;if(g=i,typeof i=="function")hy(i)&&(D=1);else if(typeof i=="string")D=L8(i,m,ee.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case G:return i=ea(31,m,o,j),i.elementType=G,i.lanes=C,i;case w:return Po(m.children,j,C,o);case b:D=8,j|=24;break;case N:return i=ea(12,m,o,j|2),i.elementType=N,i.lanes=C,i;case A:return i=ea(13,m,o,j),i.elementType=A,i.lanes=C,i;case O:return i=ea(19,m,o,j),i.elementType=O,i.lanes=C,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case _:case k:D=10;break e;case S:D=9;break e;case E:D=11;break e;case z:D=14;break e;case R:D=16,g=null;break e}D=29,m=Error(s(130,i===null?"null":typeof i,"")),g=null}return o=ea(D,m,o,j),o.elementType=i,o.type=g,o.lanes=C,o}function Po(i,o,m,g){return i=ea(7,i,g,o),i.lanes=m,i}function fy(i,o,m){return i=ea(6,i,null,o),i.lanes=m,i}function xy(i,o,m){return o=ea(4,i.children!==null?i.children:[],i.key,o),o.lanes=m,o.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},o}var Hc=[],Vc=0,Hh=null,Vh=0,wa=[],Na=0,Do=null,qi=1,Ui="";function Ro(i,o){Hc[Vc++]=Vh,Hc[Vc++]=Hh,Hh=i,Vh=o}function DC(i,o,m){wa[Na++]=qi,wa[Na++]=Ui,wa[Na++]=Do,Do=i;var g=qi;i=Ui;var j=32-Se(g)-1;g&=~(1<<j),m+=1;var C=32-Se(o)+j;if(30<C){var D=j-j%5;C=(g&(1<<D)-1).toString(32),g>>=D,j-=D,qi=1<<32-Se(o)+j|m<<j|g,Ui=C+i}else qi=1<<C|m<<j|g,Ui=i}function py(i){i.return!==null&&(Ro(i,1),DC(i,1,0))}function gy(i){for(;i===Hh;)Hh=Hc[--Vc],Hc[Vc]=null,Vh=Hc[--Vc],Hc[Vc]=null;for(;i===Do;)Do=wa[--Na],wa[Na]=null,Ui=wa[--Na],wa[Na]=null,qi=wa[--Na],wa[Na]=null}var As=null,fn=null,Pr=!1,Lo=null,mi=!1,yy=Error(s(519));function Io(i){var o=Error(s(418,""));throw wu(ja(o,i)),yy}function RC(i){var o=i.stateNode,m=i.type,g=i.memoizedProps;switch(o[vt]=i,o[dt]=g,m){case"dialog":yr("cancel",o),yr("close",o);break;case"iframe":case"object":case"embed":yr("load",o);break;case"video":case"audio":for(m=0;m<Vu.length;m++)yr(Vu[m],o);break;case"source":yr("error",o);break;case"img":case"image":case"link":yr("error",o),yr("load",o);break;case"details":yr("toggle",o);break;case"input":yr("invalid",o),Q1(o,g.value,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name,!0),Oh(o);break;case"select":yr("invalid",o);break;case"textarea":yr("invalid",o),Z1(o,g.value,g.defaultValue,g.children),Oh(o)}m=g.children,typeof m!="string"&&typeof m!="number"&&typeof m!="bigint"||o.textContent===""+m||g.suppressHydrationWarning===!0||Z2(o.textContent,m)?(g.popover!=null&&(yr("beforetoggle",o),yr("toggle",o)),g.onScroll!=null&&yr("scroll",o),g.onScrollEnd!=null&&yr("scrollend",o),g.onClick!=null&&(o.onclick=kf),o=!0):o=!1,o||Io(i)}function LC(i){for(As=i.return;As;)switch(As.tag){case 5:case 13:mi=!1;return;case 27:case 3:mi=!0;return;default:As=As.return}}function ju(i){if(i!==As)return!1;if(!Pr)return LC(i),Pr=!0,!1;var o=i.tag,m;if((m=o!==3&&o!==27)&&((m=o===5)&&(m=i.type,m=!(m!=="form"&&m!=="button")||Dv(i.type,i.memoizedProps)),m=!m),m&&fn&&Io(i),LC(i),o===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));e:{for(i=i.nextSibling,o=0;i;){if(i.nodeType===8)if(m=i.data,m==="/$"){if(o===0){fn=Ya(i.nextSibling);break e}o--}else m!=="$"&&m!=="$!"&&m!=="$?"||o++;i=i.nextSibling}fn=null}}else o===27?(o=fn,Hl(i.type)?(i=$v,$v=null,fn=i):fn=o):fn=As?Ya(i.stateNode.nextSibling):null;return!0}function bu(){fn=As=null,Pr=!1}function IC(){var i=Lo;return i!==null&&(Fs===null?Fs=i:Fs.push.apply(Fs,i),Lo=null),i}function wu(i){Lo===null?Lo=[i]:Lo.push(i)}var vy=I(null),$o=null,zi=null;function Ml(i,o,m){W(vy,o._currentValue),o._currentValue=m}function Bi(i){i._currentValue=vy.current,Q(vy)}function jy(i,o,m){for(;i!==null;){var g=i.alternate;if((i.childLanes&o)!==o?(i.childLanes|=o,g!==null&&(g.childLanes|=o)):g!==null&&(g.childLanes&o)!==o&&(g.childLanes|=o),i===m)break;i=i.return}}function by(i,o,m,g){var j=i.child;for(j!==null&&(j.return=i);j!==null;){var C=j.dependencies;if(C!==null){var D=j.child;C=C.firstContext;e:for(;C!==null;){var X=C;C=j;for(var ve=0;ve<o.length;ve++)if(X.context===o[ve]){C.lanes|=m,X=C.alternate,X!==null&&(X.lanes|=m),jy(C.return,m,i),g||(D=null);break e}C=X.next}}else if(j.tag===18){if(D=j.return,D===null)throw Error(s(341));D.lanes|=m,C=D.alternate,C!==null&&(C.lanes|=m),jy(D,m,i),D=null}else D=j.child;if(D!==null)D.return=j;else for(D=j;D!==null;){if(D===i){D=null;break}if(j=D.sibling,j!==null){j.return=D.return,D=j;break}D=D.return}j=D}}function Nu(i,o,m,g){i=null;for(var j=o,C=!1;j!==null;){if(!C){if((j.flags&524288)!==0)C=!0;else if((j.flags&262144)!==0)break}if(j.tag===10){var D=j.alternate;if(D===null)throw Error(s(387));if(D=D.memoizedProps,D!==null){var X=j.type;Js(j.pendingProps.value,D.value)||(i!==null?i.push(X):i=[X])}}else if(j===te.current){if(D=j.alternate,D===null)throw Error(s(387));D.memoizedState.memoizedState!==j.memoizedState.memoizedState&&(i!==null?i.push(Zu):i=[Zu])}j=j.return}i!==null&&by(o,i,m,g),o.flags|=262144}function Yh(i){for(i=i.firstContext;i!==null;){if(!Js(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function Fo(i){$o=i,zi=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function ws(i){return $C($o,i)}function Kh(i,o){return $o===null&&Fo(i),$C(i,o)}function $C(i,o){var m=o._currentValue;if(o={context:o,memoizedValue:m,next:null},zi===null){if(i===null)throw Error(s(308));zi=o,i.dependencies={lanes:0,firstContext:o},i.flags|=524288}else zi=zi.next=o;return m}var Rq=typeof AbortController<"u"?AbortController:function(){var i=[],o=this.signal={aborted:!1,addEventListener:function(m,g){i.push(g)}};this.abort=function(){o.aborted=!0,i.forEach(function(m){return m()})}},Lq=t.unstable_scheduleCallback,Iq=t.unstable_NormalPriority,$n={$$typeof:k,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function wy(){return{controller:new Rq,data:new Map,refCount:0}}function _u(i){i.refCount--,i.refCount===0&&Lq(Iq,function(){i.controller.abort()})}var Cu=null,Ny=0,Yc=0,Kc=null;function $q(i,o){if(Cu===null){var m=Cu=[];Ny=0,Yc=Cv(),Kc={status:"pending",value:void 0,then:function(g){m.push(g)}}}return Ny++,o.then(FC,FC),o}function FC(){if(--Ny===0&&Cu!==null){Kc!==null&&(Kc.status="fulfilled");var i=Cu;Cu=null,Yc=0,Kc=null;for(var o=0;o<i.length;o++)(0,i[o])()}}function Fq(i,o){var m=[],g={status:"pending",value:null,reason:null,then:function(j){m.push(j)}};return i.then(function(){g.status="fulfilled",g.value=o;for(var j=0;j<m.length;j++)(0,m[j])(o)},function(j){for(g.status="rejected",g.reason=j,j=0;j<m.length;j++)(0,m[j])(void 0)}),g}var qC=M.S;M.S=function(i,o){typeof o=="object"&&o!==null&&typeof o.then=="function"&&$q(i,o),qC!==null&&qC(i,o)};var qo=I(null);function _y(){var i=qo.current;return i!==null?i:Zr.pooledCache}function Gh(i,o){o===null?W(qo,qo.current):W(qo,o.pool)}function UC(){var i=_y();return i===null?null:{parent:$n._currentValue,pool:i}}var Su=Error(s(460)),zC=Error(s(474)),Qh=Error(s(542)),Cy={then:function(){}};function BC(i){return i=i.status,i==="fulfilled"||i==="rejected"}function Xh(){}function WC(i,o,m){switch(m=i[m],m===void 0?i.push(o):m!==o&&(o.then(Xh,Xh),o=m),o.status){case"fulfilled":return o.value;case"rejected":throw i=o.reason,VC(i),i;default:if(typeof o.status=="string")o.then(Xh,Xh);else{if(i=Zr,i!==null&&100<i.shellSuspendCounter)throw Error(s(482));i=o,i.status="pending",i.then(function(g){if(o.status==="pending"){var j=o;j.status="fulfilled",j.value=g}},function(g){if(o.status==="pending"){var j=o;j.status="rejected",j.reason=g}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw i=o.reason,VC(i),i}throw ku=o,Su}}var ku=null;function HC(){if(ku===null)throw Error(s(459));var i=ku;return ku=null,i}function VC(i){if(i===Su||i===Qh)throw Error(s(483))}var Tl=!1;function Sy(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ky(i,o){i=i.updateQueue,o.updateQueue===i&&(o.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function Ol(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function Pl(i,o,m){var g=i.updateQueue;if(g===null)return null;if(g=g.shared,(Ir&2)!==0){var j=g.pending;return j===null?o.next=o:(o.next=j.next,j.next=o),g.pending=o,o=Bh(i),OC(i,null,m),o}return zh(i,g,o,m),Bh(i)}function Au(i,o,m){if(o=o.updateQueue,o!==null&&(o=o.shared,(m&4194048)!==0)){var g=o.lanes;g&=i.pendingLanes,m|=g,o.lanes=m,sr(i,m)}}function Ay(i,o){var m=i.updateQueue,g=i.alternate;if(g!==null&&(g=g.updateQueue,m===g)){var j=null,C=null;if(m=m.firstBaseUpdate,m!==null){do{var D={lane:m.lane,tag:m.tag,payload:m.payload,callback:null,next:null};C===null?j=C=D:C=C.next=D,m=m.next}while(m!==null);C===null?j=C=o:C=C.next=o}else j=C=o;m={baseState:g.baseState,firstBaseUpdate:j,lastBaseUpdate:C,shared:g.shared,callbacks:g.callbacks},i.updateQueue=m;return}i=m.lastBaseUpdate,i===null?m.firstBaseUpdate=o:i.next=o,m.lastBaseUpdate=o}var Ey=!1;function Eu(){if(Ey){var i=Kc;if(i!==null)throw i}}function Mu(i,o,m,g){Ey=!1;var j=i.updateQueue;Tl=!1;var C=j.firstBaseUpdate,D=j.lastBaseUpdate,X=j.shared.pending;if(X!==null){j.shared.pending=null;var ve=X,Fe=ve.next;ve.next=null,D===null?C=Fe:D.next=Fe,D=ve;var Ge=i.alternate;Ge!==null&&(Ge=Ge.updateQueue,X=Ge.lastBaseUpdate,X!==D&&(X===null?Ge.firstBaseUpdate=Fe:X.next=Fe,Ge.lastBaseUpdate=ve))}if(C!==null){var nt=j.baseState;D=0,Ge=Fe=ve=null,X=C;do{var qe=X.lane&-536870913,Ue=qe!==X.lane;if(Ue?(kr&qe)===qe:(g&qe)===qe){qe!==0&&qe===Yc&&(Ey=!0),Ge!==null&&(Ge=Ge.next={lane:0,tag:X.tag,payload:X.payload,callback:null,next:null});e:{var Yt=i,Wt=X;qe=o;var Wr=m;switch(Wt.tag){case 1:if(Yt=Wt.payload,typeof Yt=="function"){nt=Yt.call(Wr,nt,qe);break e}nt=Yt;break e;case 3:Yt.flags=Yt.flags&-65537|128;case 0:if(Yt=Wt.payload,qe=typeof Yt=="function"?Yt.call(Wr,nt,qe):Yt,qe==null)break e;nt=x({},nt,qe);break e;case 2:Tl=!0}}qe=X.callback,qe!==null&&(i.flags|=64,Ue&&(i.flags|=8192),Ue=j.callbacks,Ue===null?j.callbacks=[qe]:Ue.push(qe))}else Ue={lane:qe,tag:X.tag,payload:X.payload,callback:X.callback,next:null},Ge===null?(Fe=Ge=Ue,ve=nt):Ge=Ge.next=Ue,D|=qe;if(X=X.next,X===null){if(X=j.shared.pending,X===null)break;Ue=X,X=Ue.next,Ue.next=null,j.lastBaseUpdate=Ue,j.shared.pending=null}}while(!0);Ge===null&&(ve=nt),j.baseState=ve,j.firstBaseUpdate=Fe,j.lastBaseUpdate=Ge,C===null&&(j.shared.lanes=0),Ul|=D,i.lanes=D,i.memoizedState=nt}}function YC(i,o){if(typeof i!="function")throw Error(s(191,i));i.call(o)}function KC(i,o){var m=i.callbacks;if(m!==null)for(i.callbacks=null,i=0;i<m.length;i++)YC(m[i],o)}var Gc=I(null),Zh=I(0);function GC(i,o){i=Qi,W(Zh,i),W(Gc,o),Qi=i|o.baseLanes}function My(){W(Zh,Qi),W(Gc,Gc.current)}function Ty(){Qi=Zh.current,Q(Gc),Q(Zh)}var Dl=0,dr=null,zr=null,An=null,Jh=!1,Qc=!1,Uo=!1,ef=0,Tu=0,Xc=null,qq=0;function vn(){throw Error(s(321))}function Oy(i,o){if(o===null)return!1;for(var m=0;m<o.length&&m<i.length;m++)if(!Js(i[m],o[m]))return!1;return!0}function Py(i,o,m,g,j,C){return Dl=C,dr=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,M.H=i===null||i.memoizedState===null?OS:PS,Uo=!1,C=m(g,j),Uo=!1,Qc&&(C=XC(o,m,g,j)),QC(i),C}function QC(i){M.H=lf;var o=zr!==null&&zr.next!==null;if(Dl=0,An=zr=dr=null,Jh=!1,Tu=0,Xc=null,o)throw Error(s(300));i===null||Zn||(i=i.dependencies,i!==null&&Yh(i)&&(Zn=!0))}function XC(i,o,m,g){dr=i;var j=0;do{if(Qc&&(Xc=null),Tu=0,Qc=!1,25<=j)throw Error(s(301));if(j+=1,An=zr=null,i.updateQueue!=null){var C=i.updateQueue;C.lastEffect=null,C.events=null,C.stores=null,C.memoCache!=null&&(C.memoCache.index=0)}M.H=Yq,C=o(m,g)}while(Qc);return C}function Uq(){var i=M.H,o=i.useState()[0];return o=typeof o.then=="function"?Ou(o):o,i=i.useState()[0],(zr!==null?zr.memoizedState:null)!==i&&(dr.flags|=1024),o}function Dy(){var i=ef!==0;return ef=0,i}function Ry(i,o,m){o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~m}function Ly(i){if(Jh){for(i=i.memoizedState;i!==null;){var o=i.queue;o!==null&&(o.pending=null),i=i.next}Jh=!1}Dl=0,An=zr=dr=null,Qc=!1,Tu=ef=0,Xc=null}function Is(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return An===null?dr.memoizedState=An=i:An=An.next=i,An}function En(){if(zr===null){var i=dr.alternate;i=i!==null?i.memoizedState:null}else i=zr.next;var o=An===null?dr.memoizedState:An.next;if(o!==null)An=o,zr=i;else{if(i===null)throw dr.alternate===null?Error(s(467)):Error(s(310));zr=i,i={memoizedState:zr.memoizedState,baseState:zr.baseState,baseQueue:zr.baseQueue,queue:zr.queue,next:null},An===null?dr.memoizedState=An=i:An=An.next=i}return An}function Iy(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ou(i){var o=Tu;return Tu+=1,Xc===null&&(Xc=[]),i=WC(Xc,i,o),o=dr,(An===null?o.memoizedState:An.next)===null&&(o=o.alternate,M.H=o===null||o.memoizedState===null?OS:PS),i}function tf(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return Ou(i);if(i.$$typeof===k)return ws(i)}throw Error(s(438,String(i)))}function $y(i){var o=null,m=dr.updateQueue;if(m!==null&&(o=m.memoCache),o==null){var g=dr.alternate;g!==null&&(g=g.updateQueue,g!==null&&(g=g.memoCache,g!=null&&(o={data:g.data.map(function(j){return j.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),m===null&&(m=Iy(),dr.updateQueue=m),m.memoCache=o,m=o.data[o.index],m===void 0)for(m=o.data[o.index]=Array(i),g=0;g<i;g++)m[g]=J;return o.index++,m}function Wi(i,o){return typeof o=="function"?o(i):o}function rf(i){var o=En();return Fy(o,zr,i)}function Fy(i,o,m){var g=i.queue;if(g===null)throw Error(s(311));g.lastRenderedReducer=m;var j=i.baseQueue,C=g.pending;if(C!==null){if(j!==null){var D=j.next;j.next=C.next,C.next=D}o.baseQueue=j=C,g.pending=null}if(C=i.baseState,j===null)i.memoizedState=C;else{o=j.next;var X=D=null,ve=null,Fe=o,Ge=!1;do{var nt=Fe.lane&-536870913;if(nt!==Fe.lane?(kr&nt)===nt:(Dl&nt)===nt){var qe=Fe.revertLane;if(qe===0)ve!==null&&(ve=ve.next={lane:0,revertLane:0,action:Fe.action,hasEagerState:Fe.hasEagerState,eagerState:Fe.eagerState,next:null}),nt===Yc&&(Ge=!0);else if((Dl&qe)===qe){Fe=Fe.next,qe===Yc&&(Ge=!0);continue}else nt={lane:0,revertLane:Fe.revertLane,action:Fe.action,hasEagerState:Fe.hasEagerState,eagerState:Fe.eagerState,next:null},ve===null?(X=ve=nt,D=C):ve=ve.next=nt,dr.lanes|=qe,Ul|=qe;nt=Fe.action,Uo&&m(C,nt),C=Fe.hasEagerState?Fe.eagerState:m(C,nt)}else qe={lane:nt,revertLane:Fe.revertLane,action:Fe.action,hasEagerState:Fe.hasEagerState,eagerState:Fe.eagerState,next:null},ve===null?(X=ve=qe,D=C):ve=ve.next=qe,dr.lanes|=nt,Ul|=nt;Fe=Fe.next}while(Fe!==null&&Fe!==o);if(ve===null?D=C:ve.next=X,!Js(C,i.memoizedState)&&(Zn=!0,Ge&&(m=Kc,m!==null)))throw m;i.memoizedState=C,i.baseState=D,i.baseQueue=ve,g.lastRenderedState=C}return j===null&&(g.lanes=0),[i.memoizedState,g.dispatch]}function qy(i){var o=En(),m=o.queue;if(m===null)throw Error(s(311));m.lastRenderedReducer=i;var g=m.dispatch,j=m.pending,C=o.memoizedState;if(j!==null){m.pending=null;var D=j=j.next;do C=i(C,D.action),D=D.next;while(D!==j);Js(C,o.memoizedState)||(Zn=!0),o.memoizedState=C,o.baseQueue===null&&(o.baseState=C),m.lastRenderedState=C}return[C,g]}function ZC(i,o,m){var g=dr,j=En(),C=Pr;if(C){if(m===void 0)throw Error(s(407));m=m()}else m=o();var D=!Js((zr||j).memoizedState,m);D&&(j.memoizedState=m,Zn=!0),j=j.queue;var X=tS.bind(null,g,j,i);if(Pu(2048,8,X,[i]),j.getSnapshot!==o||D||An!==null&&An.memoizedState.tag&1){if(g.flags|=2048,Zc(9,nf(),eS.bind(null,g,j,m,o),null),Zr===null)throw Error(s(349));C||(Dl&124)!==0||JC(g,o,m)}return m}function JC(i,o,m){i.flags|=16384,i={getSnapshot:o,value:m},o=dr.updateQueue,o===null?(o=Iy(),dr.updateQueue=o,o.stores=[i]):(m=o.stores,m===null?o.stores=[i]:m.push(i))}function eS(i,o,m,g){o.value=m,o.getSnapshot=g,rS(o)&&nS(i)}function tS(i,o,m){return m(function(){rS(o)&&nS(i)})}function rS(i){var o=i.getSnapshot;i=i.value;try{var m=o();return!Js(i,m)}catch{return!0}}function nS(i){var o=Bc(i,2);o!==null&&aa(o,i,2)}function Uy(i){var o=Is();if(typeof i=="function"){var m=i;if(i=m(),Uo){He(!0);try{m()}finally{He(!1)}}}return o.memoizedState=o.baseState=i,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wi,lastRenderedState:i},o}function sS(i,o,m,g){return i.baseState=m,Fy(i,zr,typeof g=="function"?g:Wi)}function zq(i,o,m,g,j){if(af(i))throw Error(s(485));if(i=o.action,i!==null){var C={payload:j,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(D){C.listeners.push(D)}};M.T!==null?m(!0):C.isTransition=!1,g(C),m=o.pending,m===null?(C.next=o.pending=C,aS(o,C)):(C.next=m.next,o.pending=m.next=C)}}function aS(i,o){var m=o.action,g=o.payload,j=i.state;if(o.isTransition){var C=M.T,D={};M.T=D;try{var X=m(j,g),ve=M.S;ve!==null&&ve(D,X),iS(i,o,X)}catch(Fe){zy(i,o,Fe)}finally{M.T=C}}else try{C=m(j,g),iS(i,o,C)}catch(Fe){zy(i,o,Fe)}}function iS(i,o,m){m!==null&&typeof m=="object"&&typeof m.then=="function"?m.then(function(g){lS(i,o,g)},function(g){return zy(i,o,g)}):lS(i,o,m)}function lS(i,o,m){o.status="fulfilled",o.value=m,oS(o),i.state=m,o=i.pending,o!==null&&(m=o.next,m===o?i.pending=null:(m=m.next,o.next=m,aS(i,m)))}function zy(i,o,m){var g=i.pending;if(i.pending=null,g!==null){g=g.next;do o.status="rejected",o.reason=m,oS(o),o=o.next;while(o!==g)}i.action=null}function oS(i){i=i.listeners;for(var o=0;o<i.length;o++)(0,i[o])()}function cS(i,o){return o}function dS(i,o){if(Pr){var m=Zr.formState;if(m!==null){e:{var g=dr;if(Pr){if(fn){t:{for(var j=fn,C=mi;j.nodeType!==8;){if(!C){j=null;break t}if(j=Ya(j.nextSibling),j===null){j=null;break t}}C=j.data,j=C==="F!"||C==="F"?j:null}if(j){fn=Ya(j.nextSibling),g=j.data==="F!";break e}}Io(g)}g=!1}g&&(o=m[0])}}return m=Is(),m.memoizedState=m.baseState=o,g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:cS,lastRenderedState:o},m.queue=g,m=ES.bind(null,dr,g),g.dispatch=m,g=Uy(!1),C=Yy.bind(null,dr,!1,g.queue),g=Is(),j={state:o,dispatch:null,action:i,pending:null},g.queue=j,m=zq.bind(null,dr,j,C,m),j.dispatch=m,g.memoizedState=i,[o,m,!1]}function uS(i){var o=En();return mS(o,zr,i)}function mS(i,o,m){if(o=Fy(i,o,cS)[0],i=rf(Wi)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var g=Ou(o)}catch(D){throw D===Su?Qh:D}else g=o;o=En();var j=o.queue,C=j.dispatch;return m!==o.memoizedState&&(dr.flags|=2048,Zc(9,nf(),Bq.bind(null,j,m),null)),[g,C,i]}function Bq(i,o){i.action=o}function hS(i){var o=En(),m=zr;if(m!==null)return mS(o,m,i);En(),o=o.memoizedState,m=En();var g=m.queue.dispatch;return m.memoizedState=i,[o,g,!1]}function Zc(i,o,m,g){return i={tag:i,create:m,deps:g,inst:o,next:null},o=dr.updateQueue,o===null&&(o=Iy(),dr.updateQueue=o),m=o.lastEffect,m===null?o.lastEffect=i.next=i:(g=m.next,m.next=i,i.next=g,o.lastEffect=i),i}function nf(){return{destroy:void 0,resource:void 0}}function fS(){return En().memoizedState}function sf(i,o,m,g){var j=Is();g=g===void 0?null:g,dr.flags|=i,j.memoizedState=Zc(1|o,nf(),m,g)}function Pu(i,o,m,g){var j=En();g=g===void 0?null:g;var C=j.memoizedState.inst;zr!==null&&g!==null&&Oy(g,zr.memoizedState.deps)?j.memoizedState=Zc(o,C,m,g):(dr.flags|=i,j.memoizedState=Zc(1|o,C,m,g))}function xS(i,o){sf(8390656,8,i,o)}function pS(i,o){Pu(2048,8,i,o)}function gS(i,o){return Pu(4,2,i,o)}function yS(i,o){return Pu(4,4,i,o)}function vS(i,o){if(typeof o=="function"){i=i();var m=o(i);return function(){typeof m=="function"?m():o(null)}}if(o!=null)return i=i(),o.current=i,function(){o.current=null}}function jS(i,o,m){m=m!=null?m.concat([i]):null,Pu(4,4,vS.bind(null,o,i),m)}function By(){}function bS(i,o){var m=En();o=o===void 0?null:o;var g=m.memoizedState;return o!==null&&Oy(o,g[1])?g[0]:(m.memoizedState=[i,o],i)}function wS(i,o){var m=En();o=o===void 0?null:o;var g=m.memoizedState;if(o!==null&&Oy(o,g[1]))return g[0];if(g=i(),Uo){He(!0);try{i()}finally{He(!1)}}return m.memoizedState=[g,o],g}function Wy(i,o,m){return m===void 0||(Dl&1073741824)!==0?i.memoizedState=o:(i.memoizedState=m,i=C2(),dr.lanes|=i,Ul|=i,m)}function NS(i,o,m,g){return Js(m,o)?m:Gc.current!==null?(i=Wy(i,m,g),Js(i,o)||(Zn=!0),i):(Dl&42)===0?(Zn=!0,i.memoizedState=m):(i=C2(),dr.lanes|=i,Ul|=i,o)}function _S(i,o,m,g,j){var C=B.p;B.p=C!==0&&8>C?C:8;var D=M.T,X={};M.T=X,Yy(i,!1,o,m);try{var ve=j(),Fe=M.S;if(Fe!==null&&Fe(X,ve),ve!==null&&typeof ve=="object"&&typeof ve.then=="function"){var Ge=Fq(ve,g);Du(i,o,Ge,sa(i))}else Du(i,o,g,sa(i))}catch(nt){Du(i,o,{then:function(){},status:"rejected",reason:nt},sa())}finally{B.p=C,M.T=D}}function Wq(){}function Hy(i,o,m,g){if(i.tag!==5)throw Error(s(476));var j=CS(i).queue;_S(i,j,o,L,m===null?Wq:function(){return SS(i),m(g)})}function CS(i){var o=i.memoizedState;if(o!==null)return o;o={memoizedState:L,baseState:L,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wi,lastRenderedState:L},next:null};var m={};return o.next={memoizedState:m,baseState:m,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wi,lastRenderedState:m},next:null},i.memoizedState=o,i=i.alternate,i!==null&&(i.memoizedState=o),o}function SS(i){var o=CS(i).next.queue;Du(i,o,{},sa())}function Vy(){return ws(Zu)}function kS(){return En().memoizedState}function AS(){return En().memoizedState}function Hq(i){for(var o=i.return;o!==null;){switch(o.tag){case 24:case 3:var m=sa();i=Ol(m);var g=Pl(o,i,m);g!==null&&(aa(g,o,m),Au(g,o,m)),o={cache:wy()},i.payload=o;return}o=o.return}}function Vq(i,o,m){var g=sa();m={lane:g,revertLane:0,action:m,hasEagerState:!1,eagerState:null,next:null},af(i)?MS(o,m):(m=my(i,o,m,g),m!==null&&(aa(m,i,g),TS(m,o,g)))}function ES(i,o,m){var g=sa();Du(i,o,m,g)}function Du(i,o,m,g){var j={lane:g,revertLane:0,action:m,hasEagerState:!1,eagerState:null,next:null};if(af(i))MS(o,j);else{var C=i.alternate;if(i.lanes===0&&(C===null||C.lanes===0)&&(C=o.lastRenderedReducer,C!==null))try{var D=o.lastRenderedState,X=C(D,m);if(j.hasEagerState=!0,j.eagerState=X,Js(X,D))return zh(i,o,j,0),Zr===null&&Uh(),!1}catch{}finally{}if(m=my(i,o,j,g),m!==null)return aa(m,i,g),TS(m,o,g),!0}return!1}function Yy(i,o,m,g){if(g={lane:2,revertLane:Cv(),action:g,hasEagerState:!1,eagerState:null,next:null},af(i)){if(o)throw Error(s(479))}else o=my(i,m,g,2),o!==null&&aa(o,i,2)}function af(i){var o=i.alternate;return i===dr||o!==null&&o===dr}function MS(i,o){Qc=Jh=!0;var m=i.pending;m===null?o.next=o:(o.next=m.next,m.next=o),i.pending=o}function TS(i,o,m){if((m&4194048)!==0){var g=o.lanes;g&=i.pendingLanes,m|=g,o.lanes=m,sr(i,m)}}var lf={readContext:ws,use:tf,useCallback:vn,useContext:vn,useEffect:vn,useImperativeHandle:vn,useLayoutEffect:vn,useInsertionEffect:vn,useMemo:vn,useReducer:vn,useRef:vn,useState:vn,useDebugValue:vn,useDeferredValue:vn,useTransition:vn,useSyncExternalStore:vn,useId:vn,useHostTransitionStatus:vn,useFormState:vn,useActionState:vn,useOptimistic:vn,useMemoCache:vn,useCacheRefresh:vn},OS={readContext:ws,use:tf,useCallback:function(i,o){return Is().memoizedState=[i,o===void 0?null:o],i},useContext:ws,useEffect:xS,useImperativeHandle:function(i,o,m){m=m!=null?m.concat([i]):null,sf(4194308,4,vS.bind(null,o,i),m)},useLayoutEffect:function(i,o){return sf(4194308,4,i,o)},useInsertionEffect:function(i,o){sf(4,2,i,o)},useMemo:function(i,o){var m=Is();o=o===void 0?null:o;var g=i();if(Uo){He(!0);try{i()}finally{He(!1)}}return m.memoizedState=[g,o],g},useReducer:function(i,o,m){var g=Is();if(m!==void 0){var j=m(o);if(Uo){He(!0);try{m(o)}finally{He(!1)}}}else j=o;return g.memoizedState=g.baseState=j,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:j},g.queue=i,i=i.dispatch=Vq.bind(null,dr,i),[g.memoizedState,i]},useRef:function(i){var o=Is();return i={current:i},o.memoizedState=i},useState:function(i){i=Uy(i);var o=i.queue,m=ES.bind(null,dr,o);return o.dispatch=m,[i.memoizedState,m]},useDebugValue:By,useDeferredValue:function(i,o){var m=Is();return Wy(m,i,o)},useTransition:function(){var i=Uy(!1);return i=_S.bind(null,dr,i.queue,!0,!1),Is().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,o,m){var g=dr,j=Is();if(Pr){if(m===void 0)throw Error(s(407));m=m()}else{if(m=o(),Zr===null)throw Error(s(349));(kr&124)!==0||JC(g,o,m)}j.memoizedState=m;var C={value:m,getSnapshot:o};return j.queue=C,xS(tS.bind(null,g,C,i),[i]),g.flags|=2048,Zc(9,nf(),eS.bind(null,g,C,m,o),null),m},useId:function(){var i=Is(),o=Zr.identifierPrefix;if(Pr){var m=Ui,g=qi;m=(g&~(1<<32-Se(g)-1)).toString(32)+m,o="«"+o+"R"+m,m=ef++,0<m&&(o+="H"+m.toString(32)),o+="»"}else m=qq++,o="«"+o+"r"+m.toString(32)+"»";return i.memoizedState=o},useHostTransitionStatus:Vy,useFormState:dS,useActionState:dS,useOptimistic:function(i){var o=Is();o.memoizedState=o.baseState=i;var m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=m,o=Yy.bind(null,dr,!0,m),m.dispatch=o,[i,o]},useMemoCache:$y,useCacheRefresh:function(){return Is().memoizedState=Hq.bind(null,dr)}},PS={readContext:ws,use:tf,useCallback:bS,useContext:ws,useEffect:pS,useImperativeHandle:jS,useInsertionEffect:gS,useLayoutEffect:yS,useMemo:wS,useReducer:rf,useRef:fS,useState:function(){return rf(Wi)},useDebugValue:By,useDeferredValue:function(i,o){var m=En();return NS(m,zr.memoizedState,i,o)},useTransition:function(){var i=rf(Wi)[0],o=En().memoizedState;return[typeof i=="boolean"?i:Ou(i),o]},useSyncExternalStore:ZC,useId:kS,useHostTransitionStatus:Vy,useFormState:uS,useActionState:uS,useOptimistic:function(i,o){var m=En();return sS(m,zr,i,o)},useMemoCache:$y,useCacheRefresh:AS},Yq={readContext:ws,use:tf,useCallback:bS,useContext:ws,useEffect:pS,useImperativeHandle:jS,useInsertionEffect:gS,useLayoutEffect:yS,useMemo:wS,useReducer:qy,useRef:fS,useState:function(){return qy(Wi)},useDebugValue:By,useDeferredValue:function(i,o){var m=En();return zr===null?Wy(m,i,o):NS(m,zr.memoizedState,i,o)},useTransition:function(){var i=qy(Wi)[0],o=En().memoizedState;return[typeof i=="boolean"?i:Ou(i),o]},useSyncExternalStore:ZC,useId:kS,useHostTransitionStatus:Vy,useFormState:hS,useActionState:hS,useOptimistic:function(i,o){var m=En();return zr!==null?sS(m,zr,i,o):(m.baseState=i,[i,m.queue.dispatch])},useMemoCache:$y,useCacheRefresh:AS},Jc=null,Ru=0;function of(i){var o=Ru;return Ru+=1,Jc===null&&(Jc=[]),WC(Jc,i,o)}function Lu(i,o){o=o.props.ref,i.ref=o!==void 0?o:null}function cf(i,o){throw o.$$typeof===p?Error(s(525)):(i=Object.prototype.toString.call(o),Error(s(31,i==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":i)))}function DS(i){var o=i._init;return o(i._payload)}function RS(i){function o(Te,Ce){if(i){var Ie=Te.deletions;Ie===null?(Te.deletions=[Ce],Te.flags|=16):Ie.push(Ce)}}function m(Te,Ce){if(!i)return null;for(;Ce!==null;)o(Te,Ce),Ce=Ce.sibling;return null}function g(Te){for(var Ce=new Map;Te!==null;)Te.key!==null?Ce.set(Te.key,Te):Ce.set(Te.index,Te),Te=Te.sibling;return Ce}function j(Te,Ce){return Te=Fi(Te,Ce),Te.index=0,Te.sibling=null,Te}function C(Te,Ce,Ie){return Te.index=Ie,i?(Ie=Te.alternate,Ie!==null?(Ie=Ie.index,Ie<Ce?(Te.flags|=67108866,Ce):Ie):(Te.flags|=67108866,Ce)):(Te.flags|=1048576,Ce)}function D(Te){return i&&Te.alternate===null&&(Te.flags|=67108866),Te}function X(Te,Ce,Ie,Xe){return Ce===null||Ce.tag!==6?(Ce=fy(Ie,Te.mode,Xe),Ce.return=Te,Ce):(Ce=j(Ce,Ie),Ce.return=Te,Ce)}function ve(Te,Ce,Ie,Xe){var St=Ie.type;return St===w?Ge(Te,Ce,Ie.props.children,Xe,Ie.key):Ce!==null&&(Ce.elementType===St||typeof St=="object"&&St!==null&&St.$$typeof===R&&DS(St)===Ce.type)?(Ce=j(Ce,Ie.props),Lu(Ce,Ie),Ce.return=Te,Ce):(Ce=Wh(Ie.type,Ie.key,Ie.props,null,Te.mode,Xe),Lu(Ce,Ie),Ce.return=Te,Ce)}function Fe(Te,Ce,Ie,Xe){return Ce===null||Ce.tag!==4||Ce.stateNode.containerInfo!==Ie.containerInfo||Ce.stateNode.implementation!==Ie.implementation?(Ce=xy(Ie,Te.mode,Xe),Ce.return=Te,Ce):(Ce=j(Ce,Ie.children||[]),Ce.return=Te,Ce)}function Ge(Te,Ce,Ie,Xe,St){return Ce===null||Ce.tag!==7?(Ce=Po(Ie,Te.mode,Xe,St),Ce.return=Te,Ce):(Ce=j(Ce,Ie),Ce.return=Te,Ce)}function nt(Te,Ce,Ie){if(typeof Ce=="string"&&Ce!==""||typeof Ce=="number"||typeof Ce=="bigint")return Ce=fy(""+Ce,Te.mode,Ie),Ce.return=Te,Ce;if(typeof Ce=="object"&&Ce!==null){switch(Ce.$$typeof){case y:return Ie=Wh(Ce.type,Ce.key,Ce.props,null,Te.mode,Ie),Lu(Ie,Ce),Ie.return=Te,Ie;case v:return Ce=xy(Ce,Te.mode,Ie),Ce.return=Te,Ce;case R:var Xe=Ce._init;return Ce=Xe(Ce._payload),nt(Te,Ce,Ie)}if(re(Ce)||V(Ce))return Ce=Po(Ce,Te.mode,Ie,null),Ce.return=Te,Ce;if(typeof Ce.then=="function")return nt(Te,of(Ce),Ie);if(Ce.$$typeof===k)return nt(Te,Kh(Te,Ce),Ie);cf(Te,Ce)}return null}function qe(Te,Ce,Ie,Xe){var St=Ce!==null?Ce.key:null;if(typeof Ie=="string"&&Ie!==""||typeof Ie=="number"||typeof Ie=="bigint")return St!==null?null:X(Te,Ce,""+Ie,Xe);if(typeof Ie=="object"&&Ie!==null){switch(Ie.$$typeof){case y:return Ie.key===St?ve(Te,Ce,Ie,Xe):null;case v:return Ie.key===St?Fe(Te,Ce,Ie,Xe):null;case R:return St=Ie._init,Ie=St(Ie._payload),qe(Te,Ce,Ie,Xe)}if(re(Ie)||V(Ie))return St!==null?null:Ge(Te,Ce,Ie,Xe,null);if(typeof Ie.then=="function")return qe(Te,Ce,of(Ie),Xe);if(Ie.$$typeof===k)return qe(Te,Ce,Kh(Te,Ie),Xe);cf(Te,Ie)}return null}function Ue(Te,Ce,Ie,Xe,St){if(typeof Xe=="string"&&Xe!==""||typeof Xe=="number"||typeof Xe=="bigint")return Te=Te.get(Ie)||null,X(Ce,Te,""+Xe,St);if(typeof Xe=="object"&&Xe!==null){switch(Xe.$$typeof){case y:return Te=Te.get(Xe.key===null?Ie:Xe.key)||null,ve(Ce,Te,Xe,St);case v:return Te=Te.get(Xe.key===null?Ie:Xe.key)||null,Fe(Ce,Te,Xe,St);case R:var fr=Xe._init;return Xe=fr(Xe._payload),Ue(Te,Ce,Ie,Xe,St)}if(re(Xe)||V(Xe))return Te=Te.get(Ie)||null,Ge(Ce,Te,Xe,St,null);if(typeof Xe.then=="function")return Ue(Te,Ce,Ie,of(Xe),St);if(Xe.$$typeof===k)return Ue(Te,Ce,Ie,Kh(Ce,Xe),St);cf(Ce,Xe)}return null}function Yt(Te,Ce,Ie,Xe){for(var St=null,fr=null,Pt=Ce,Ht=Ce=0,es=null;Pt!==null&&Ht<Ie.length;Ht++){Pt.index>Ht?(es=Pt,Pt=null):es=Pt.sibling;var Mr=qe(Te,Pt,Ie[Ht],Xe);if(Mr===null){Pt===null&&(Pt=es);break}i&&Pt&&Mr.alternate===null&&o(Te,Pt),Ce=C(Mr,Ce,Ht),fr===null?St=Mr:fr.sibling=Mr,fr=Mr,Pt=es}if(Ht===Ie.length)return m(Te,Pt),Pr&&Ro(Te,Ht),St;if(Pt===null){for(;Ht<Ie.length;Ht++)Pt=nt(Te,Ie[Ht],Xe),Pt!==null&&(Ce=C(Pt,Ce,Ht),fr===null?St=Pt:fr.sibling=Pt,fr=Pt);return Pr&&Ro(Te,Ht),St}for(Pt=g(Pt);Ht<Ie.length;Ht++)es=Ue(Pt,Te,Ht,Ie[Ht],Xe),es!==null&&(i&&es.alternate!==null&&Pt.delete(es.key===null?Ht:es.key),Ce=C(es,Ce,Ht),fr===null?St=es:fr.sibling=es,fr=es);return i&&Pt.forEach(function(Ql){return o(Te,Ql)}),Pr&&Ro(Te,Ht),St}function Wt(Te,Ce,Ie,Xe){if(Ie==null)throw Error(s(151));for(var St=null,fr=null,Pt=Ce,Ht=Ce=0,es=null,Mr=Ie.next();Pt!==null&&!Mr.done;Ht++,Mr=Ie.next()){Pt.index>Ht?(es=Pt,Pt=null):es=Pt.sibling;var Ql=qe(Te,Pt,Mr.value,Xe);if(Ql===null){Pt===null&&(Pt=es);break}i&&Pt&&Ql.alternate===null&&o(Te,Pt),Ce=C(Ql,Ce,Ht),fr===null?St=Ql:fr.sibling=Ql,fr=Ql,Pt=es}if(Mr.done)return m(Te,Pt),Pr&&Ro(Te,Ht),St;if(Pt===null){for(;!Mr.done;Ht++,Mr=Ie.next())Mr=nt(Te,Mr.value,Xe),Mr!==null&&(Ce=C(Mr,Ce,Ht),fr===null?St=Mr:fr.sibling=Mr,fr=Mr);return Pr&&Ro(Te,Ht),St}for(Pt=g(Pt);!Mr.done;Ht++,Mr=Ie.next())Mr=Ue(Pt,Te,Ht,Mr.value,Xe),Mr!==null&&(i&&Mr.alternate!==null&&Pt.delete(Mr.key===null?Ht:Mr.key),Ce=C(Mr,Ce,Ht),fr===null?St=Mr:fr.sibling=Mr,fr=Mr);return i&&Pt.forEach(function(K8){return o(Te,K8)}),Pr&&Ro(Te,Ht),St}function Wr(Te,Ce,Ie,Xe){if(typeof Ie=="object"&&Ie!==null&&Ie.type===w&&Ie.key===null&&(Ie=Ie.props.children),typeof Ie=="object"&&Ie!==null){switch(Ie.$$typeof){case y:e:{for(var St=Ie.key;Ce!==null;){if(Ce.key===St){if(St=Ie.type,St===w){if(Ce.tag===7){m(Te,Ce.sibling),Xe=j(Ce,Ie.props.children),Xe.return=Te,Te=Xe;break e}}else if(Ce.elementType===St||typeof St=="object"&&St!==null&&St.$$typeof===R&&DS(St)===Ce.type){m(Te,Ce.sibling),Xe=j(Ce,Ie.props),Lu(Xe,Ie),Xe.return=Te,Te=Xe;break e}m(Te,Ce);break}else o(Te,Ce);Ce=Ce.sibling}Ie.type===w?(Xe=Po(Ie.props.children,Te.mode,Xe,Ie.key),Xe.return=Te,Te=Xe):(Xe=Wh(Ie.type,Ie.key,Ie.props,null,Te.mode,Xe),Lu(Xe,Ie),Xe.return=Te,Te=Xe)}return D(Te);case v:e:{for(St=Ie.key;Ce!==null;){if(Ce.key===St)if(Ce.tag===4&&Ce.stateNode.containerInfo===Ie.containerInfo&&Ce.stateNode.implementation===Ie.implementation){m(Te,Ce.sibling),Xe=j(Ce,Ie.children||[]),Xe.return=Te,Te=Xe;break e}else{m(Te,Ce);break}else o(Te,Ce);Ce=Ce.sibling}Xe=xy(Ie,Te.mode,Xe),Xe.return=Te,Te=Xe}return D(Te);case R:return St=Ie._init,Ie=St(Ie._payload),Wr(Te,Ce,Ie,Xe)}if(re(Ie))return Yt(Te,Ce,Ie,Xe);if(V(Ie)){if(St=V(Ie),typeof St!="function")throw Error(s(150));return Ie=St.call(Ie),Wt(Te,Ce,Ie,Xe)}if(typeof Ie.then=="function")return Wr(Te,Ce,of(Ie),Xe);if(Ie.$$typeof===k)return Wr(Te,Ce,Kh(Te,Ie),Xe);cf(Te,Ie)}return typeof Ie=="string"&&Ie!==""||typeof Ie=="number"||typeof Ie=="bigint"?(Ie=""+Ie,Ce!==null&&Ce.tag===6?(m(Te,Ce.sibling),Xe=j(Ce,Ie),Xe.return=Te,Te=Xe):(m(Te,Ce),Xe=fy(Ie,Te.mode,Xe),Xe.return=Te,Te=Xe),D(Te)):m(Te,Ce)}return function(Te,Ce,Ie,Xe){try{Ru=0;var St=Wr(Te,Ce,Ie,Xe);return Jc=null,St}catch(Pt){if(Pt===Su||Pt===Qh)throw Pt;var fr=ea(29,Pt,null,Te.mode);return fr.lanes=Xe,fr.return=Te,fr}finally{}}}var ed=RS(!0),LS=RS(!1),_a=I(null),hi=null;function Rl(i){var o=i.alternate;W(Fn,Fn.current&1),W(_a,i),hi===null&&(o===null||Gc.current!==null||o.memoizedState!==null)&&(hi=i)}function IS(i){if(i.tag===22){if(W(Fn,Fn.current),W(_a,i),hi===null){var o=i.alternate;o!==null&&o.memoizedState!==null&&(hi=i)}}else Ll()}function Ll(){W(Fn,Fn.current),W(_a,_a.current)}function Hi(i){Q(_a),hi===i&&(hi=null),Q(Fn)}var Fn=I(0);function df(i){for(var o=i;o!==null;){if(o.tag===13){var m=o.memoizedState;if(m!==null&&(m=m.dehydrated,m===null||m.data==="$?"||Iv(m)))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}function Ky(i,o,m,g){o=i.memoizedState,m=m(g,o),m=m==null?o:x({},o,m),i.memoizedState=m,i.lanes===0&&(i.updateQueue.baseState=m)}var Gy={enqueueSetState:function(i,o,m){i=i._reactInternals;var g=sa(),j=Ol(g);j.payload=o,m!=null&&(j.callback=m),o=Pl(i,j,g),o!==null&&(aa(o,i,g),Au(o,i,g))},enqueueReplaceState:function(i,o,m){i=i._reactInternals;var g=sa(),j=Ol(g);j.tag=1,j.payload=o,m!=null&&(j.callback=m),o=Pl(i,j,g),o!==null&&(aa(o,i,g),Au(o,i,g))},enqueueForceUpdate:function(i,o){i=i._reactInternals;var m=sa(),g=Ol(m);g.tag=2,o!=null&&(g.callback=o),o=Pl(i,g,m),o!==null&&(aa(o,i,m),Au(o,i,m))}};function $S(i,o,m,g,j,C,D){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(g,C,D):o.prototype&&o.prototype.isPureReactComponent?!yu(m,g)||!yu(j,C):!0}function FS(i,o,m,g){i=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(m,g),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(m,g),o.state!==i&&Gy.enqueueReplaceState(o,o.state,null)}function zo(i,o){var m=o;if("ref"in o){m={};for(var g in o)g!=="ref"&&(m[g]=o[g])}if(i=i.defaultProps){m===o&&(m=x({},m));for(var j in i)m[j]===void 0&&(m[j]=i[j])}return m}var uf=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)};function qS(i){uf(i)}function US(i){console.error(i)}function zS(i){uf(i)}function mf(i,o){try{var m=i.onUncaughtError;m(o.value,{componentStack:o.stack})}catch(g){setTimeout(function(){throw g})}}function BS(i,o,m){try{var g=i.onCaughtError;g(m.value,{componentStack:m.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(j){setTimeout(function(){throw j})}}function Qy(i,o,m){return m=Ol(m),m.tag=3,m.payload={element:null},m.callback=function(){mf(i,o)},m}function WS(i){return i=Ol(i),i.tag=3,i}function HS(i,o,m,g){var j=m.type.getDerivedStateFromError;if(typeof j=="function"){var C=g.value;i.payload=function(){return j(C)},i.callback=function(){BS(o,m,g)}}var D=m.stateNode;D!==null&&typeof D.componentDidCatch=="function"&&(i.callback=function(){BS(o,m,g),typeof j!="function"&&(zl===null?zl=new Set([this]):zl.add(this));var X=g.stack;this.componentDidCatch(g.value,{componentStack:X!==null?X:""})})}function Kq(i,o,m,g,j){if(m.flags|=32768,g!==null&&typeof g=="object"&&typeof g.then=="function"){if(o=m.alternate,o!==null&&Nu(o,m,j,!0),m=_a.current,m!==null){switch(m.tag){case 13:return hi===null?jv():m.alternate===null&&xn===0&&(xn=3),m.flags&=-257,m.flags|=65536,m.lanes=j,g===Cy?m.flags|=16384:(o=m.updateQueue,o===null?m.updateQueue=new Set([g]):o.add(g),wv(i,g,j)),!1;case 22:return m.flags|=65536,g===Cy?m.flags|=16384:(o=m.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([g])},m.updateQueue=o):(m=o.retryQueue,m===null?o.retryQueue=new Set([g]):m.add(g)),wv(i,g,j)),!1}throw Error(s(435,m.tag))}return wv(i,g,j),jv(),!1}if(Pr)return o=_a.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=j,g!==yy&&(i=Error(s(422),{cause:g}),wu(ja(i,m)))):(g!==yy&&(o=Error(s(423),{cause:g}),wu(ja(o,m))),i=i.current.alternate,i.flags|=65536,j&=-j,i.lanes|=j,g=ja(g,m),j=Qy(i.stateNode,g,j),Ay(i,j),xn!==4&&(xn=2)),!1;var C=Error(s(520),{cause:g});if(C=ja(C,m),Bu===null?Bu=[C]:Bu.push(C),xn!==4&&(xn=2),o===null)return!0;g=ja(g,m),m=o;do{switch(m.tag){case 3:return m.flags|=65536,i=j&-j,m.lanes|=i,i=Qy(m.stateNode,g,i),Ay(m,i),!1;case 1:if(o=m.type,C=m.stateNode,(m.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(zl===null||!zl.has(C))))return m.flags|=65536,j&=-j,m.lanes|=j,j=WS(j),HS(j,i,m,g),Ay(m,j),!1}m=m.return}while(m!==null);return!1}var VS=Error(s(461)),Zn=!1;function os(i,o,m,g){o.child=i===null?LS(o,null,m,g):ed(o,i.child,m,g)}function YS(i,o,m,g,j){m=m.render;var C=o.ref;if("ref"in g){var D={};for(var X in g)X!=="ref"&&(D[X]=g[X])}else D=g;return Fo(o),g=Py(i,o,m,D,C,j),X=Dy(),i!==null&&!Zn?(Ry(i,o,j),Vi(i,o,j)):(Pr&&X&&py(o),o.flags|=1,os(i,o,g,j),o.child)}function KS(i,o,m,g,j){if(i===null){var C=m.type;return typeof C=="function"&&!hy(C)&&C.defaultProps===void 0&&m.compare===null?(o.tag=15,o.type=C,GS(i,o,C,g,j)):(i=Wh(m.type,null,g,o,o.mode,j),i.ref=o.ref,i.return=o,o.child=i)}if(C=i.child,!sv(i,j)){var D=C.memoizedProps;if(m=m.compare,m=m!==null?m:yu,m(D,g)&&i.ref===o.ref)return Vi(i,o,j)}return o.flags|=1,i=Fi(C,g),i.ref=o.ref,i.return=o,o.child=i}function GS(i,o,m,g,j){if(i!==null){var C=i.memoizedProps;if(yu(C,g)&&i.ref===o.ref)if(Zn=!1,o.pendingProps=g=C,sv(i,j))(i.flags&131072)!==0&&(Zn=!0);else return o.lanes=i.lanes,Vi(i,o,j)}return Xy(i,o,m,g,j)}function QS(i,o,m){var g=o.pendingProps,j=g.children,C=i!==null?i.memoizedState:null;if(g.mode==="hidden"){if((o.flags&128)!==0){if(g=C!==null?C.baseLanes|m:m,i!==null){for(j=o.child=i.child,C=0;j!==null;)C=C|j.lanes|j.childLanes,j=j.sibling;o.childLanes=C&~g}else o.childLanes=0,o.child=null;return XS(i,o,g,m)}if((m&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},i!==null&&Gh(o,C!==null?C.cachePool:null),C!==null?GC(o,C):My(),IS(o);else return o.lanes=o.childLanes=536870912,XS(i,o,C!==null?C.baseLanes|m:m,m)}else C!==null?(Gh(o,C.cachePool),GC(o,C),Ll(),o.memoizedState=null):(i!==null&&Gh(o,null),My(),Ll());return os(i,o,j,m),o.child}function XS(i,o,m,g){var j=_y();return j=j===null?null:{parent:$n._currentValue,pool:j},o.memoizedState={baseLanes:m,cachePool:j},i!==null&&Gh(o,null),My(),IS(o),i!==null&&Nu(i,o,g,!0),null}function hf(i,o){var m=o.ref;if(m===null)i!==null&&i.ref!==null&&(o.flags|=4194816);else{if(typeof m!="function"&&typeof m!="object")throw Error(s(284));(i===null||i.ref!==m)&&(o.flags|=4194816)}}function Xy(i,o,m,g,j){return Fo(o),m=Py(i,o,m,g,void 0,j),g=Dy(),i!==null&&!Zn?(Ry(i,o,j),Vi(i,o,j)):(Pr&&g&&py(o),o.flags|=1,os(i,o,m,j),o.child)}function ZS(i,o,m,g,j,C){return Fo(o),o.updateQueue=null,m=XC(o,g,m,j),QC(i),g=Dy(),i!==null&&!Zn?(Ry(i,o,C),Vi(i,o,C)):(Pr&&g&&py(o),o.flags|=1,os(i,o,m,C),o.child)}function JS(i,o,m,g,j){if(Fo(o),o.stateNode===null){var C=Wc,D=m.contextType;typeof D=="object"&&D!==null&&(C=ws(D)),C=new m(g,C),o.memoizedState=C.state!==null&&C.state!==void 0?C.state:null,C.updater=Gy,o.stateNode=C,C._reactInternals=o,C=o.stateNode,C.props=g,C.state=o.memoizedState,C.refs={},Sy(o),D=m.contextType,C.context=typeof D=="object"&&D!==null?ws(D):Wc,C.state=o.memoizedState,D=m.getDerivedStateFromProps,typeof D=="function"&&(Ky(o,m,D,g),C.state=o.memoizedState),typeof m.getDerivedStateFromProps=="function"||typeof C.getSnapshotBeforeUpdate=="function"||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(D=C.state,typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount(),D!==C.state&&Gy.enqueueReplaceState(C,C.state,null),Mu(o,g,C,j),Eu(),C.state=o.memoizedState),typeof C.componentDidMount=="function"&&(o.flags|=4194308),g=!0}else if(i===null){C=o.stateNode;var X=o.memoizedProps,ve=zo(m,X);C.props=ve;var Fe=C.context,Ge=m.contextType;D=Wc,typeof Ge=="object"&&Ge!==null&&(D=ws(Ge));var nt=m.getDerivedStateFromProps;Ge=typeof nt=="function"||typeof C.getSnapshotBeforeUpdate=="function",X=o.pendingProps!==X,Ge||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(X||Fe!==D)&&FS(o,C,g,D),Tl=!1;var qe=o.memoizedState;C.state=qe,Mu(o,g,C,j),Eu(),Fe=o.memoizedState,X||qe!==Fe||Tl?(typeof nt=="function"&&(Ky(o,m,nt,g),Fe=o.memoizedState),(ve=Tl||$S(o,m,ve,g,qe,Fe,D))?(Ge||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount()),typeof C.componentDidMount=="function"&&(o.flags|=4194308)):(typeof C.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=g,o.memoizedState=Fe),C.props=g,C.state=Fe,C.context=D,g=ve):(typeof C.componentDidMount=="function"&&(o.flags|=4194308),g=!1)}else{C=o.stateNode,ky(i,o),D=o.memoizedProps,Ge=zo(m,D),C.props=Ge,nt=o.pendingProps,qe=C.context,Fe=m.contextType,ve=Wc,typeof Fe=="object"&&Fe!==null&&(ve=ws(Fe)),X=m.getDerivedStateFromProps,(Fe=typeof X=="function"||typeof C.getSnapshotBeforeUpdate=="function")||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(D!==nt||qe!==ve)&&FS(o,C,g,ve),Tl=!1,qe=o.memoizedState,C.state=qe,Mu(o,g,C,j),Eu();var Ue=o.memoizedState;D!==nt||qe!==Ue||Tl||i!==null&&i.dependencies!==null&&Yh(i.dependencies)?(typeof X=="function"&&(Ky(o,m,X,g),Ue=o.memoizedState),(Ge=Tl||$S(o,m,Ge,g,qe,Ue,ve)||i!==null&&i.dependencies!==null&&Yh(i.dependencies))?(Fe||typeof C.UNSAFE_componentWillUpdate!="function"&&typeof C.componentWillUpdate!="function"||(typeof C.componentWillUpdate=="function"&&C.componentWillUpdate(g,Ue,ve),typeof C.UNSAFE_componentWillUpdate=="function"&&C.UNSAFE_componentWillUpdate(g,Ue,ve)),typeof C.componentDidUpdate=="function"&&(o.flags|=4),typeof C.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof C.componentDidUpdate!="function"||D===i.memoizedProps&&qe===i.memoizedState||(o.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||D===i.memoizedProps&&qe===i.memoizedState||(o.flags|=1024),o.memoizedProps=g,o.memoizedState=Ue),C.props=g,C.state=Ue,C.context=ve,g=Ge):(typeof C.componentDidUpdate!="function"||D===i.memoizedProps&&qe===i.memoizedState||(o.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||D===i.memoizedProps&&qe===i.memoizedState||(o.flags|=1024),g=!1)}return C=g,hf(i,o),g=(o.flags&128)!==0,C||g?(C=o.stateNode,m=g&&typeof m.getDerivedStateFromError!="function"?null:C.render(),o.flags|=1,i!==null&&g?(o.child=ed(o,i.child,null,j),o.child=ed(o,null,m,j)):os(i,o,m,j),o.memoizedState=C.state,i=o.child):i=Vi(i,o,j),i}function e2(i,o,m,g){return bu(),o.flags|=256,os(i,o,m,g),o.child}var Zy={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Jy(i){return{baseLanes:i,cachePool:UC()}}function ev(i,o,m){return i=i!==null?i.childLanes&~m:0,o&&(i|=Ca),i}function t2(i,o,m){var g=o.pendingProps,j=!1,C=(o.flags&128)!==0,D;if((D=C)||(D=i!==null&&i.memoizedState===null?!1:(Fn.current&2)!==0),D&&(j=!0,o.flags&=-129),D=(o.flags&32)!==0,o.flags&=-33,i===null){if(Pr){if(j?Rl(o):Ll(),Pr){var X=fn,ve;if(ve=X){e:{for(ve=X,X=mi;ve.nodeType!==8;){if(!X){X=null;break e}if(ve=Ya(ve.nextSibling),ve===null){X=null;break e}}X=ve}X!==null?(o.memoizedState={dehydrated:X,treeContext:Do!==null?{id:qi,overflow:Ui}:null,retryLane:536870912,hydrationErrors:null},ve=ea(18,null,null,0),ve.stateNode=X,ve.return=o,o.child=ve,As=o,fn=null,ve=!0):ve=!1}ve||Io(o)}if(X=o.memoizedState,X!==null&&(X=X.dehydrated,X!==null))return Iv(X)?o.lanes=32:o.lanes=536870912,null;Hi(o)}return X=g.children,g=g.fallback,j?(Ll(),j=o.mode,X=ff({mode:"hidden",children:X},j),g=Po(g,j,m,null),X.return=o,g.return=o,X.sibling=g,o.child=X,j=o.child,j.memoizedState=Jy(m),j.childLanes=ev(i,D,m),o.memoizedState=Zy,g):(Rl(o),tv(o,X))}if(ve=i.memoizedState,ve!==null&&(X=ve.dehydrated,X!==null)){if(C)o.flags&256?(Rl(o),o.flags&=-257,o=rv(i,o,m)):o.memoizedState!==null?(Ll(),o.child=i.child,o.flags|=128,o=null):(Ll(),j=g.fallback,X=o.mode,g=ff({mode:"visible",children:g.children},X),j=Po(j,X,m,null),j.flags|=2,g.return=o,j.return=o,g.sibling=j,o.child=g,ed(o,i.child,null,m),g=o.child,g.memoizedState=Jy(m),g.childLanes=ev(i,D,m),o.memoizedState=Zy,o=j);else if(Rl(o),Iv(X)){if(D=X.nextSibling&&X.nextSibling.dataset,D)var Fe=D.dgst;D=Fe,g=Error(s(419)),g.stack="",g.digest=D,wu({value:g,source:null,stack:null}),o=rv(i,o,m)}else if(Zn||Nu(i,o,m,!1),D=(m&i.childLanes)!==0,Zn||D){if(D=Zr,D!==null&&(g=m&-m,g=(g&42)!==0?1:le(g),g=(g&(D.suspendedLanes|m))!==0?0:g,g!==0&&g!==ve.retryLane))throw ve.retryLane=g,Bc(i,g),aa(D,i,g),VS;X.data==="$?"||jv(),o=rv(i,o,m)}else X.data==="$?"?(o.flags|=192,o.child=i.child,o=null):(i=ve.treeContext,fn=Ya(X.nextSibling),As=o,Pr=!0,Lo=null,mi=!1,i!==null&&(wa[Na++]=qi,wa[Na++]=Ui,wa[Na++]=Do,qi=i.id,Ui=i.overflow,Do=o),o=tv(o,g.children),o.flags|=4096);return o}return j?(Ll(),j=g.fallback,X=o.mode,ve=i.child,Fe=ve.sibling,g=Fi(ve,{mode:"hidden",children:g.children}),g.subtreeFlags=ve.subtreeFlags&65011712,Fe!==null?j=Fi(Fe,j):(j=Po(j,X,m,null),j.flags|=2),j.return=o,g.return=o,g.sibling=j,o.child=g,g=j,j=o.child,X=i.child.memoizedState,X===null?X=Jy(m):(ve=X.cachePool,ve!==null?(Fe=$n._currentValue,ve=ve.parent!==Fe?{parent:Fe,pool:Fe}:ve):ve=UC(),X={baseLanes:X.baseLanes|m,cachePool:ve}),j.memoizedState=X,j.childLanes=ev(i,D,m),o.memoizedState=Zy,g):(Rl(o),m=i.child,i=m.sibling,m=Fi(m,{mode:"visible",children:g.children}),m.return=o,m.sibling=null,i!==null&&(D=o.deletions,D===null?(o.deletions=[i],o.flags|=16):D.push(i)),o.child=m,o.memoizedState=null,m)}function tv(i,o){return o=ff({mode:"visible",children:o},i.mode),o.return=i,i.child=o}function ff(i,o){return i=ea(22,i,null,o),i.lanes=0,i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},i}function rv(i,o,m){return ed(o,i.child,null,m),i=tv(o,o.pendingProps.children),i.flags|=2,o.memoizedState=null,i}function r2(i,o,m){i.lanes|=o;var g=i.alternate;g!==null&&(g.lanes|=o),jy(i.return,o,m)}function nv(i,o,m,g,j){var C=i.memoizedState;C===null?i.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:g,tail:m,tailMode:j}:(C.isBackwards=o,C.rendering=null,C.renderingStartTime=0,C.last=g,C.tail=m,C.tailMode=j)}function n2(i,o,m){var g=o.pendingProps,j=g.revealOrder,C=g.tail;if(os(i,o,g.children,m),g=Fn.current,(g&2)!==0)g=g&1|2,o.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=o.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&r2(i,m,o);else if(i.tag===19)r2(i,m,o);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===o)break e;for(;i.sibling===null;){if(i.return===null||i.return===o)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}g&=1}switch(W(Fn,g),j){case"forwards":for(m=o.child,j=null;m!==null;)i=m.alternate,i!==null&&df(i)===null&&(j=m),m=m.sibling;m=j,m===null?(j=o.child,o.child=null):(j=m.sibling,m.sibling=null),nv(o,!1,j,m,C);break;case"backwards":for(m=null,j=o.child,o.child=null;j!==null;){if(i=j.alternate,i!==null&&df(i)===null){o.child=j;break}i=j.sibling,j.sibling=m,m=j,j=i}nv(o,!0,m,null,C);break;case"together":nv(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function Vi(i,o,m){if(i!==null&&(o.dependencies=i.dependencies),Ul|=o.lanes,(m&o.childLanes)===0)if(i!==null){if(Nu(i,o,m,!1),(m&o.childLanes)===0)return null}else return null;if(i!==null&&o.child!==i.child)throw Error(s(153));if(o.child!==null){for(i=o.child,m=Fi(i,i.pendingProps),o.child=m,m.return=o;i.sibling!==null;)i=i.sibling,m=m.sibling=Fi(i,i.pendingProps),m.return=o;m.sibling=null}return o.child}function sv(i,o){return(i.lanes&o)!==0?!0:(i=i.dependencies,!!(i!==null&&Yh(i)))}function Gq(i,o,m){switch(o.tag){case 3:De(o,o.stateNode.containerInfo),Ml(o,$n,i.memoizedState.cache),bu();break;case 27:case 5:$e(o);break;case 4:De(o,o.stateNode.containerInfo);break;case 10:Ml(o,o.type,o.memoizedProps.value);break;case 13:var g=o.memoizedState;if(g!==null)return g.dehydrated!==null?(Rl(o),o.flags|=128,null):(m&o.child.childLanes)!==0?t2(i,o,m):(Rl(o),i=Vi(i,o,m),i!==null?i.sibling:null);Rl(o);break;case 19:var j=(i.flags&128)!==0;if(g=(m&o.childLanes)!==0,g||(Nu(i,o,m,!1),g=(m&o.childLanes)!==0),j){if(g)return n2(i,o,m);o.flags|=128}if(j=o.memoizedState,j!==null&&(j.rendering=null,j.tail=null,j.lastEffect=null),W(Fn,Fn.current),g)break;return null;case 22:case 23:return o.lanes=0,QS(i,o,m);case 24:Ml(o,$n,i.memoizedState.cache)}return Vi(i,o,m)}function s2(i,o,m){if(i!==null)if(i.memoizedProps!==o.pendingProps)Zn=!0;else{if(!sv(i,m)&&(o.flags&128)===0)return Zn=!1,Gq(i,o,m);Zn=(i.flags&131072)!==0}else Zn=!1,Pr&&(o.flags&1048576)!==0&&DC(o,Vh,o.index);switch(o.lanes=0,o.tag){case 16:e:{i=o.pendingProps;var g=o.elementType,j=g._init;if(g=j(g._payload),o.type=g,typeof g=="function")hy(g)?(i=zo(g,i),o.tag=1,o=JS(null,o,g,i,m)):(o.tag=0,o=Xy(null,o,g,i,m));else{if(g!=null){if(j=g.$$typeof,j===E){o.tag=11,o=YS(null,o,g,i,m);break e}else if(j===z){o.tag=14,o=KS(null,o,g,i,m);break e}}throw o=pe(g)||g,Error(s(306,o,""))}}return o;case 0:return Xy(i,o,o.type,o.pendingProps,m);case 1:return g=o.type,j=zo(g,o.pendingProps),JS(i,o,g,j,m);case 3:e:{if(De(o,o.stateNode.containerInfo),i===null)throw Error(s(387));g=o.pendingProps;var C=o.memoizedState;j=C.element,ky(i,o),Mu(o,g,null,m);var D=o.memoizedState;if(g=D.cache,Ml(o,$n,g),g!==C.cache&&by(o,[$n],m,!0),Eu(),g=D.element,C.isDehydrated)if(C={element:g,isDehydrated:!1,cache:D.cache},o.updateQueue.baseState=C,o.memoizedState=C,o.flags&256){o=e2(i,o,g,m);break e}else if(g!==j){j=ja(Error(s(424)),o),wu(j),o=e2(i,o,g,m);break e}else{switch(i=o.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(fn=Ya(i.firstChild),As=o,Pr=!0,Lo=null,mi=!0,m=LS(o,null,g,m),o.child=m;m;)m.flags=m.flags&-3|4096,m=m.sibling}else{if(bu(),g===j){o=Vi(i,o,m);break e}os(i,o,g,m)}o=o.child}return o;case 26:return hf(i,o),i===null?(m=ok(o.type,null,o.pendingProps,null))?o.memoizedState=m:Pr||(m=o.type,i=o.pendingProps,g=Af(he.current).createElement(m),g[vt]=o,g[dt]=i,ds(g,m,i),Xn(g),o.stateNode=g):o.memoizedState=ok(o.type,i.memoizedProps,o.pendingProps,i.memoizedState),null;case 27:return $e(o),i===null&&Pr&&(g=o.stateNode=ak(o.type,o.pendingProps,he.current),As=o,mi=!0,j=fn,Hl(o.type)?($v=j,fn=Ya(g.firstChild)):fn=j),os(i,o,o.pendingProps.children,m),hf(i,o),i===null&&(o.flags|=4194304),o.child;case 5:return i===null&&Pr&&((j=g=fn)&&(g=N8(g,o.type,o.pendingProps,mi),g!==null?(o.stateNode=g,As=o,fn=Ya(g.firstChild),mi=!1,j=!0):j=!1),j||Io(o)),$e(o),j=o.type,C=o.pendingProps,D=i!==null?i.memoizedProps:null,g=C.children,Dv(j,C)?g=null:D!==null&&Dv(j,D)&&(o.flags|=32),o.memoizedState!==null&&(j=Py(i,o,Uq,null,null,m),Zu._currentValue=j),hf(i,o),os(i,o,g,m),o.child;case 6:return i===null&&Pr&&((i=m=fn)&&(m=_8(m,o.pendingProps,mi),m!==null?(o.stateNode=m,As=o,fn=null,i=!0):i=!1),i||Io(o)),null;case 13:return t2(i,o,m);case 4:return De(o,o.stateNode.containerInfo),g=o.pendingProps,i===null?o.child=ed(o,null,g,m):os(i,o,g,m),o.child;case 11:return YS(i,o,o.type,o.pendingProps,m);case 7:return os(i,o,o.pendingProps,m),o.child;case 8:return os(i,o,o.pendingProps.children,m),o.child;case 12:return os(i,o,o.pendingProps.children,m),o.child;case 10:return g=o.pendingProps,Ml(o,o.type,g.value),os(i,o,g.children,m),o.child;case 9:return j=o.type._context,g=o.pendingProps.children,Fo(o),j=ws(j),g=g(j),o.flags|=1,os(i,o,g,m),o.child;case 14:return KS(i,o,o.type,o.pendingProps,m);case 15:return GS(i,o,o.type,o.pendingProps,m);case 19:return n2(i,o,m);case 31:return g=o.pendingProps,m=o.mode,g={mode:g.mode,children:g.children},i===null?(m=ff(g,m),m.ref=o.ref,o.child=m,m.return=o,o=m):(m=Fi(i.child,g),m.ref=o.ref,o.child=m,m.return=o,o=m),o;case 22:return QS(i,o,m);case 24:return Fo(o),g=ws($n),i===null?(j=_y(),j===null&&(j=Zr,C=wy(),j.pooledCache=C,C.refCount++,C!==null&&(j.pooledCacheLanes|=m),j=C),o.memoizedState={parent:g,cache:j},Sy(o),Ml(o,$n,j)):((i.lanes&m)!==0&&(ky(i,o),Mu(o,null,null,m),Eu()),j=i.memoizedState,C=o.memoizedState,j.parent!==g?(j={parent:g,cache:g},o.memoizedState=j,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=j),Ml(o,$n,g)):(g=C.cache,Ml(o,$n,g),g!==j.cache&&by(o,[$n],m,!0))),os(i,o,o.pendingProps.children,m),o.child;case 29:throw o.pendingProps}throw Error(s(156,o.tag))}function Yi(i){i.flags|=4}function a2(i,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!hk(o)){if(o=_a.current,o!==null&&((kr&4194048)===kr?hi!==null:(kr&62914560)!==kr&&(kr&536870912)===0||o!==hi))throw ku=Cy,zC;i.flags|=8192}}function xf(i,o){o!==null&&(i.flags|=4),i.flags&16384&&(o=i.tag!==22?Er():536870912,i.lanes|=o,sd|=o)}function Iu(i,o){if(!Pr)switch(i.tailMode){case"hidden":o=i.tail;for(var m=null;o!==null;)o.alternate!==null&&(m=o),o=o.sibling;m===null?i.tail=null:m.sibling=null;break;case"collapsed":m=i.tail;for(var g=null;m!==null;)m.alternate!==null&&(g=m),m=m.sibling;g===null?o||i.tail===null?i.tail=null:i.tail.sibling=null:g.sibling=null}}function on(i){var o=i.alternate!==null&&i.alternate.child===i.child,m=0,g=0;if(o)for(var j=i.child;j!==null;)m|=j.lanes|j.childLanes,g|=j.subtreeFlags&65011712,g|=j.flags&65011712,j.return=i,j=j.sibling;else for(j=i.child;j!==null;)m|=j.lanes|j.childLanes,g|=j.subtreeFlags,g|=j.flags,j.return=i,j=j.sibling;return i.subtreeFlags|=g,i.childLanes=m,o}function Qq(i,o,m){var g=o.pendingProps;switch(gy(o),o.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return on(o),null;case 1:return on(o),null;case 3:return m=o.stateNode,g=null,i!==null&&(g=i.memoizedState.cache),o.memoizedState.cache!==g&&(o.flags|=2048),Bi($n),ne(),m.pendingContext&&(m.context=m.pendingContext,m.pendingContext=null),(i===null||i.child===null)&&(ju(o)?Yi(o):i===null||i.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,IC())),on(o),null;case 26:return m=o.memoizedState,i===null?(Yi(o),m!==null?(on(o),a2(o,m)):(on(o),o.flags&=-16777217)):m?m!==i.memoizedState?(Yi(o),on(o),a2(o,m)):(on(o),o.flags&=-16777217):(i.memoizedProps!==g&&Yi(o),on(o),o.flags&=-16777217),null;case 27:ge(o),m=he.current;var j=o.type;if(i!==null&&o.stateNode!=null)i.memoizedProps!==g&&Yi(o);else{if(!g){if(o.stateNode===null)throw Error(s(166));return on(o),null}i=ee.current,ju(o)?RC(o):(i=ak(j,g,m),o.stateNode=i,Yi(o))}return on(o),null;case 5:if(ge(o),m=o.type,i!==null&&o.stateNode!=null)i.memoizedProps!==g&&Yi(o);else{if(!g){if(o.stateNode===null)throw Error(s(166));return on(o),null}if(i=ee.current,ju(o))RC(o);else{switch(j=Af(he.current),i){case 1:i=j.createElementNS("http://www.w3.org/2000/svg",m);break;case 2:i=j.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;default:switch(m){case"svg":i=j.createElementNS("http://www.w3.org/2000/svg",m);break;case"math":i=j.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;case"script":i=j.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild);break;case"select":i=typeof g.is=="string"?j.createElement("select",{is:g.is}):j.createElement("select"),g.multiple?i.multiple=!0:g.size&&(i.size=g.size);break;default:i=typeof g.is=="string"?j.createElement(m,{is:g.is}):j.createElement(m)}}i[vt]=o,i[dt]=g;e:for(j=o.child;j!==null;){if(j.tag===5||j.tag===6)i.appendChild(j.stateNode);else if(j.tag!==4&&j.tag!==27&&j.child!==null){j.child.return=j,j=j.child;continue}if(j===o)break e;for(;j.sibling===null;){if(j.return===null||j.return===o)break e;j=j.return}j.sibling.return=j.return,j=j.sibling}o.stateNode=i;e:switch(ds(i,m,g),m){case"button":case"input":case"select":case"textarea":i=!!g.autoFocus;break e;case"img":i=!0;break e;default:i=!1}i&&Yi(o)}}return on(o),o.flags&=-16777217,null;case 6:if(i&&o.stateNode!=null)i.memoizedProps!==g&&Yi(o);else{if(typeof g!="string"&&o.stateNode===null)throw Error(s(166));if(i=he.current,ju(o)){if(i=o.stateNode,m=o.memoizedProps,g=null,j=As,j!==null)switch(j.tag){case 27:case 5:g=j.memoizedProps}i[vt]=o,i=!!(i.nodeValue===m||g!==null&&g.suppressHydrationWarning===!0||Z2(i.nodeValue,m)),i||Io(o)}else i=Af(i).createTextNode(g),i[vt]=o,o.stateNode=i}return on(o),null;case 13:if(g=o.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(j=ju(o),g!==null&&g.dehydrated!==null){if(i===null){if(!j)throw Error(s(318));if(j=o.memoizedState,j=j!==null?j.dehydrated:null,!j)throw Error(s(317));j[vt]=o}else bu(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;on(o),j=!1}else j=IC(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=j),j=!0;if(!j)return o.flags&256?(Hi(o),o):(Hi(o),null)}if(Hi(o),(o.flags&128)!==0)return o.lanes=m,o;if(m=g!==null,i=i!==null&&i.memoizedState!==null,m){g=o.child,j=null,g.alternate!==null&&g.alternate.memoizedState!==null&&g.alternate.memoizedState.cachePool!==null&&(j=g.alternate.memoizedState.cachePool.pool);var C=null;g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(C=g.memoizedState.cachePool.pool),C!==j&&(g.flags|=2048)}return m!==i&&m&&(o.child.flags|=8192),xf(o,o.updateQueue),on(o),null;case 4:return ne(),i===null&&Ev(o.stateNode.containerInfo),on(o),null;case 10:return Bi(o.type),on(o),null;case 19:if(Q(Fn),j=o.memoizedState,j===null)return on(o),null;if(g=(o.flags&128)!==0,C=j.rendering,C===null)if(g)Iu(j,!1);else{if(xn!==0||i!==null&&(i.flags&128)!==0)for(i=o.child;i!==null;){if(C=df(i),C!==null){for(o.flags|=128,Iu(j,!1),i=C.updateQueue,o.updateQueue=i,xf(o,i),o.subtreeFlags=0,i=m,m=o.child;m!==null;)PC(m,i),m=m.sibling;return W(Fn,Fn.current&1|2),o.child}i=i.sibling}j.tail!==null&&lt()>yf&&(o.flags|=128,g=!0,Iu(j,!1),o.lanes=4194304)}else{if(!g)if(i=df(C),i!==null){if(o.flags|=128,g=!0,i=i.updateQueue,o.updateQueue=i,xf(o,i),Iu(j,!0),j.tail===null&&j.tailMode==="hidden"&&!C.alternate&&!Pr)return on(o),null}else 2*lt()-j.renderingStartTime>yf&&m!==536870912&&(o.flags|=128,g=!0,Iu(j,!1),o.lanes=4194304);j.isBackwards?(C.sibling=o.child,o.child=C):(i=j.last,i!==null?i.sibling=C:o.child=C,j.last=C)}return j.tail!==null?(o=j.tail,j.rendering=o,j.tail=o.sibling,j.renderingStartTime=lt(),o.sibling=null,i=Fn.current,W(Fn,g?i&1|2:i&1),o):(on(o),null);case 22:case 23:return Hi(o),Ty(),g=o.memoizedState!==null,i!==null?i.memoizedState!==null!==g&&(o.flags|=8192):g&&(o.flags|=8192),g?(m&536870912)!==0&&(o.flags&128)===0&&(on(o),o.subtreeFlags&6&&(o.flags|=8192)):on(o),m=o.updateQueue,m!==null&&xf(o,m.retryQueue),m=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(m=i.memoizedState.cachePool.pool),g=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(g=o.memoizedState.cachePool.pool),g!==m&&(o.flags|=2048),i!==null&&Q(qo),null;case 24:return m=null,i!==null&&(m=i.memoizedState.cache),o.memoizedState.cache!==m&&(o.flags|=2048),Bi($n),on(o),null;case 25:return null;case 30:return null}throw Error(s(156,o.tag))}function Xq(i,o){switch(gy(o),o.tag){case 1:return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 3:return Bi($n),ne(),i=o.flags,(i&65536)!==0&&(i&128)===0?(o.flags=i&-65537|128,o):null;case 26:case 27:case 5:return ge(o),null;case 13:if(Hi(o),i=o.memoizedState,i!==null&&i.dehydrated!==null){if(o.alternate===null)throw Error(s(340));bu()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 19:return Q(Fn),null;case 4:return ne(),null;case 10:return Bi(o.type),null;case 22:case 23:return Hi(o),Ty(),i!==null&&Q(qo),i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 24:return Bi($n),null;case 25:return null;default:return null}}function i2(i,o){switch(gy(o),o.tag){case 3:Bi($n),ne();break;case 26:case 27:case 5:ge(o);break;case 4:ne();break;case 13:Hi(o);break;case 19:Q(Fn);break;case 10:Bi(o.type);break;case 22:case 23:Hi(o),Ty(),i!==null&&Q(qo);break;case 24:Bi($n)}}function $u(i,o){try{var m=o.updateQueue,g=m!==null?m.lastEffect:null;if(g!==null){var j=g.next;m=j;do{if((m.tag&i)===i){g=void 0;var C=m.create,D=m.inst;g=C(),D.destroy=g}m=m.next}while(m!==j)}}catch(X){Kr(o,o.return,X)}}function Il(i,o,m){try{var g=o.updateQueue,j=g!==null?g.lastEffect:null;if(j!==null){var C=j.next;g=C;do{if((g.tag&i)===i){var D=g.inst,X=D.destroy;if(X!==void 0){D.destroy=void 0,j=o;var ve=m,Fe=X;try{Fe()}catch(Ge){Kr(j,ve,Ge)}}}g=g.next}while(g!==C)}}catch(Ge){Kr(o,o.return,Ge)}}function l2(i){var o=i.updateQueue;if(o!==null){var m=i.stateNode;try{KC(o,m)}catch(g){Kr(i,i.return,g)}}}function o2(i,o,m){m.props=zo(i.type,i.memoizedProps),m.state=i.memoizedState;try{m.componentWillUnmount()}catch(g){Kr(i,o,g)}}function Fu(i,o){try{var m=i.ref;if(m!==null){switch(i.tag){case 26:case 27:case 5:var g=i.stateNode;break;case 30:g=i.stateNode;break;default:g=i.stateNode}typeof m=="function"?i.refCleanup=m(g):m.current=g}}catch(j){Kr(i,o,j)}}function fi(i,o){var m=i.ref,g=i.refCleanup;if(m!==null)if(typeof g=="function")try{g()}catch(j){Kr(i,o,j)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof m=="function")try{m(null)}catch(j){Kr(i,o,j)}else m.current=null}function c2(i){var o=i.type,m=i.memoizedProps,g=i.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":m.autoFocus&&g.focus();break e;case"img":m.src?g.src=m.src:m.srcSet&&(g.srcset=m.srcSet)}}catch(j){Kr(i,i.return,j)}}function av(i,o,m){try{var g=i.stateNode;y8(g,i.type,m,o),g[dt]=o}catch(j){Kr(i,i.return,j)}}function d2(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&Hl(i.type)||i.tag===4}function iv(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||d2(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&Hl(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function lv(i,o,m){var g=i.tag;if(g===5||g===6)i=i.stateNode,o?(m.nodeType===9?m.body:m.nodeName==="HTML"?m.ownerDocument.body:m).insertBefore(i,o):(o=m.nodeType===9?m.body:m.nodeName==="HTML"?m.ownerDocument.body:m,o.appendChild(i),m=m._reactRootContainer,m!=null||o.onclick!==null||(o.onclick=kf));else if(g!==4&&(g===27&&Hl(i.type)&&(m=i.stateNode,o=null),i=i.child,i!==null))for(lv(i,o,m),i=i.sibling;i!==null;)lv(i,o,m),i=i.sibling}function pf(i,o,m){var g=i.tag;if(g===5||g===6)i=i.stateNode,o?m.insertBefore(i,o):m.appendChild(i);else if(g!==4&&(g===27&&Hl(i.type)&&(m=i.stateNode),i=i.child,i!==null))for(pf(i,o,m),i=i.sibling;i!==null;)pf(i,o,m),i=i.sibling}function u2(i){var o=i.stateNode,m=i.memoizedProps;try{for(var g=i.type,j=o.attributes;j.length;)o.removeAttributeNode(j[0]);ds(o,g,m),o[vt]=i,o[dt]=m}catch(C){Kr(i,i.return,C)}}var Ki=!1,jn=!1,ov=!1,m2=typeof WeakSet=="function"?WeakSet:Set,Jn=null;function Zq(i,o){if(i=i.containerInfo,Ov=Df,i=NC(i),iy(i)){if("selectionStart"in i)var m={start:i.selectionStart,end:i.selectionEnd};else e:{m=(m=i.ownerDocument)&&m.defaultView||window;var g=m.getSelection&&m.getSelection();if(g&&g.rangeCount!==0){m=g.anchorNode;var j=g.anchorOffset,C=g.focusNode;g=g.focusOffset;try{m.nodeType,C.nodeType}catch{m=null;break e}var D=0,X=-1,ve=-1,Fe=0,Ge=0,nt=i,qe=null;t:for(;;){for(var Ue;nt!==m||j!==0&&nt.nodeType!==3||(X=D+j),nt!==C||g!==0&&nt.nodeType!==3||(ve=D+g),nt.nodeType===3&&(D+=nt.nodeValue.length),(Ue=nt.firstChild)!==null;)qe=nt,nt=Ue;for(;;){if(nt===i)break t;if(qe===m&&++Fe===j&&(X=D),qe===C&&++Ge===g&&(ve=D),(Ue=nt.nextSibling)!==null)break;nt=qe,qe=nt.parentNode}nt=Ue}m=X===-1||ve===-1?null:{start:X,end:ve}}else m=null}m=m||{start:0,end:0}}else m=null;for(Pv={focusedElem:i,selectionRange:m},Df=!1,Jn=o;Jn!==null;)if(o=Jn,i=o.child,(o.subtreeFlags&1024)!==0&&i!==null)i.return=o,Jn=i;else for(;Jn!==null;){switch(o=Jn,C=o.alternate,i=o.flags,o.tag){case 0:break;case 11:case 15:break;case 1:if((i&1024)!==0&&C!==null){i=void 0,m=o,j=C.memoizedProps,C=C.memoizedState,g=m.stateNode;try{var Yt=zo(m.type,j,m.elementType===m.type);i=g.getSnapshotBeforeUpdate(Yt,C),g.__reactInternalSnapshotBeforeUpdate=i}catch(Wt){Kr(m,m.return,Wt)}}break;case 3:if((i&1024)!==0){if(i=o.stateNode.containerInfo,m=i.nodeType,m===9)Lv(i);else if(m===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":Lv(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(s(163))}if(i=o.sibling,i!==null){i.return=o.return,Jn=i;break}Jn=o.return}}function h2(i,o,m){var g=m.flags;switch(m.tag){case 0:case 11:case 15:$l(i,m),g&4&&$u(5,m);break;case 1:if($l(i,m),g&4)if(i=m.stateNode,o===null)try{i.componentDidMount()}catch(D){Kr(m,m.return,D)}else{var j=zo(m.type,o.memoizedProps);o=o.memoizedState;try{i.componentDidUpdate(j,o,i.__reactInternalSnapshotBeforeUpdate)}catch(D){Kr(m,m.return,D)}}g&64&&l2(m),g&512&&Fu(m,m.return);break;case 3:if($l(i,m),g&64&&(i=m.updateQueue,i!==null)){if(o=null,m.child!==null)switch(m.child.tag){case 27:case 5:o=m.child.stateNode;break;case 1:o=m.child.stateNode}try{KC(i,o)}catch(D){Kr(m,m.return,D)}}break;case 27:o===null&&g&4&&u2(m);case 26:case 5:$l(i,m),o===null&&g&4&&c2(m),g&512&&Fu(m,m.return);break;case 12:$l(i,m);break;case 13:$l(i,m),g&4&&p2(i,m),g&64&&(i=m.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(m=l8.bind(null,m),C8(i,m))));break;case 22:if(g=m.memoizedState!==null||Ki,!g){o=o!==null&&o.memoizedState!==null||jn,j=Ki;var C=jn;Ki=g,(jn=o)&&!C?Fl(i,m,(m.subtreeFlags&8772)!==0):$l(i,m),Ki=j,jn=C}break;case 30:break;default:$l(i,m)}}function f2(i){var o=i.alternate;o!==null&&(i.alternate=null,f2(o)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(o=i.stateNode,o!==null&&Nr(o)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var nn=null,$s=!1;function Gi(i,o,m){for(m=m.child;m!==null;)x2(i,o,m),m=m.sibling}function x2(i,o,m){if(je&&typeof je.onCommitFiberUnmount=="function")try{je.onCommitFiberUnmount(Ae,m)}catch{}switch(m.tag){case 26:jn||fi(m,o),Gi(i,o,m),m.memoizedState?m.memoizedState.count--:m.stateNode&&(m=m.stateNode,m.parentNode.removeChild(m));break;case 27:jn||fi(m,o);var g=nn,j=$s;Hl(m.type)&&(nn=m.stateNode,$s=!1),Gi(i,o,m),Ku(m.stateNode),nn=g,$s=j;break;case 5:jn||fi(m,o);case 6:if(g=nn,j=$s,nn=null,Gi(i,o,m),nn=g,$s=j,nn!==null)if($s)try{(nn.nodeType===9?nn.body:nn.nodeName==="HTML"?nn.ownerDocument.body:nn).removeChild(m.stateNode)}catch(C){Kr(m,o,C)}else try{nn.removeChild(m.stateNode)}catch(C){Kr(m,o,C)}break;case 18:nn!==null&&($s?(i=nn,nk(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,m.stateNode),rm(i)):nk(nn,m.stateNode));break;case 4:g=nn,j=$s,nn=m.stateNode.containerInfo,$s=!0,Gi(i,o,m),nn=g,$s=j;break;case 0:case 11:case 14:case 15:jn||Il(2,m,o),jn||Il(4,m,o),Gi(i,o,m);break;case 1:jn||(fi(m,o),g=m.stateNode,typeof g.componentWillUnmount=="function"&&o2(m,o,g)),Gi(i,o,m);break;case 21:Gi(i,o,m);break;case 22:jn=(g=jn)||m.memoizedState!==null,Gi(i,o,m),jn=g;break;default:Gi(i,o,m)}}function p2(i,o){if(o.memoizedState===null&&(i=o.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{rm(i)}catch(m){Kr(o,o.return,m)}}function Jq(i){switch(i.tag){case 13:case 19:var o=i.stateNode;return o===null&&(o=i.stateNode=new m2),o;case 22:return i=i.stateNode,o=i._retryCache,o===null&&(o=i._retryCache=new m2),o;default:throw Error(s(435,i.tag))}}function cv(i,o){var m=Jq(i);o.forEach(function(g){var j=o8.bind(null,i,g);m.has(g)||(m.add(g),g.then(j,j))})}function ta(i,o){var m=o.deletions;if(m!==null)for(var g=0;g<m.length;g++){var j=m[g],C=i,D=o,X=D;e:for(;X!==null;){switch(X.tag){case 27:if(Hl(X.type)){nn=X.stateNode,$s=!1;break e}break;case 5:nn=X.stateNode,$s=!1;break e;case 3:case 4:nn=X.stateNode.containerInfo,$s=!0;break e}X=X.return}if(nn===null)throw Error(s(160));x2(C,D,j),nn=null,$s=!1,C=j.alternate,C!==null&&(C.return=null),j.return=null}if(o.subtreeFlags&13878)for(o=o.child;o!==null;)g2(o,i),o=o.sibling}var Va=null;function g2(i,o){var m=i.alternate,g=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:ta(o,i),ra(i),g&4&&(Il(3,i,i.return),$u(3,i),Il(5,i,i.return));break;case 1:ta(o,i),ra(i),g&512&&(jn||m===null||fi(m,m.return)),g&64&&Ki&&(i=i.updateQueue,i!==null&&(g=i.callbacks,g!==null&&(m=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=m===null?g:m.concat(g))));break;case 26:var j=Va;if(ta(o,i),ra(i),g&512&&(jn||m===null||fi(m,m.return)),g&4){var C=m!==null?m.memoizedState:null;if(g=i.memoizedState,m===null)if(g===null)if(i.stateNode===null){e:{g=i.type,m=i.memoizedProps,j=j.ownerDocument||j;t:switch(g){case"title":C=j.getElementsByTagName("title")[0],(!C||C[Dt]||C[vt]||C.namespaceURI==="http://www.w3.org/2000/svg"||C.hasAttribute("itemprop"))&&(C=j.createElement(g),j.head.insertBefore(C,j.querySelector("head > title"))),ds(C,g,m),C[vt]=i,Xn(C),g=C;break e;case"link":var D=uk("link","href",j).get(g+(m.href||""));if(D){for(var X=0;X<D.length;X++)if(C=D[X],C.getAttribute("href")===(m.href==null||m.href===""?null:m.href)&&C.getAttribute("rel")===(m.rel==null?null:m.rel)&&C.getAttribute("title")===(m.title==null?null:m.title)&&C.getAttribute("crossorigin")===(m.crossOrigin==null?null:m.crossOrigin)){D.splice(X,1);break t}}C=j.createElement(g),ds(C,g,m),j.head.appendChild(C);break;case"meta":if(D=uk("meta","content",j).get(g+(m.content||""))){for(X=0;X<D.length;X++)if(C=D[X],C.getAttribute("content")===(m.content==null?null:""+m.content)&&C.getAttribute("name")===(m.name==null?null:m.name)&&C.getAttribute("property")===(m.property==null?null:m.property)&&C.getAttribute("http-equiv")===(m.httpEquiv==null?null:m.httpEquiv)&&C.getAttribute("charset")===(m.charSet==null?null:m.charSet)){D.splice(X,1);break t}}C=j.createElement(g),ds(C,g,m),j.head.appendChild(C);break;default:throw Error(s(468,g))}C[vt]=i,Xn(C),g=C}i.stateNode=g}else mk(j,i.type,i.stateNode);else i.stateNode=dk(j,g,i.memoizedProps);else C!==g?(C===null?m.stateNode!==null&&(m=m.stateNode,m.parentNode.removeChild(m)):C.count--,g===null?mk(j,i.type,i.stateNode):dk(j,g,i.memoizedProps)):g===null&&i.stateNode!==null&&av(i,i.memoizedProps,m.memoizedProps)}break;case 27:ta(o,i),ra(i),g&512&&(jn||m===null||fi(m,m.return)),m!==null&&g&4&&av(i,i.memoizedProps,m.memoizedProps);break;case 5:if(ta(o,i),ra(i),g&512&&(jn||m===null||fi(m,m.return)),i.flags&32){j=i.stateNode;try{Lc(j,"")}catch(Ue){Kr(i,i.return,Ue)}}g&4&&i.stateNode!=null&&(j=i.memoizedProps,av(i,j,m!==null?m.memoizedProps:j)),g&1024&&(ov=!0);break;case 6:if(ta(o,i),ra(i),g&4){if(i.stateNode===null)throw Error(s(162));g=i.memoizedProps,m=i.stateNode;try{m.nodeValue=g}catch(Ue){Kr(i,i.return,Ue)}}break;case 3:if(Tf=null,j=Va,Va=Ef(o.containerInfo),ta(o,i),Va=j,ra(i),g&4&&m!==null&&m.memoizedState.isDehydrated)try{rm(o.containerInfo)}catch(Ue){Kr(i,i.return,Ue)}ov&&(ov=!1,y2(i));break;case 4:g=Va,Va=Ef(i.stateNode.containerInfo),ta(o,i),ra(i),Va=g;break;case 12:ta(o,i),ra(i);break;case 13:ta(o,i),ra(i),i.child.flags&8192&&i.memoizedState!==null!=(m!==null&&m.memoizedState!==null)&&(xv=lt()),g&4&&(g=i.updateQueue,g!==null&&(i.updateQueue=null,cv(i,g)));break;case 22:j=i.memoizedState!==null;var ve=m!==null&&m.memoizedState!==null,Fe=Ki,Ge=jn;if(Ki=Fe||j,jn=Ge||ve,ta(o,i),jn=Ge,Ki=Fe,ra(i),g&8192)e:for(o=i.stateNode,o._visibility=j?o._visibility&-2:o._visibility|1,j&&(m===null||ve||Ki||jn||Bo(i)),m=null,o=i;;){if(o.tag===5||o.tag===26){if(m===null){ve=m=o;try{if(C=ve.stateNode,j)D=C.style,typeof D.setProperty=="function"?D.setProperty("display","none","important"):D.display="none";else{X=ve.stateNode;var nt=ve.memoizedProps.style,qe=nt!=null&&nt.hasOwnProperty("display")?nt.display:null;X.style.display=qe==null||typeof qe=="boolean"?"":(""+qe).trim()}}catch(Ue){Kr(ve,ve.return,Ue)}}}else if(o.tag===6){if(m===null){ve=o;try{ve.stateNode.nodeValue=j?"":ve.memoizedProps}catch(Ue){Kr(ve,ve.return,Ue)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===i)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break e;for(;o.sibling===null;){if(o.return===null||o.return===i)break e;m===o&&(m=null),o=o.return}m===o&&(m=null),o.sibling.return=o.return,o=o.sibling}g&4&&(g=i.updateQueue,g!==null&&(m=g.retryQueue,m!==null&&(g.retryQueue=null,cv(i,m))));break;case 19:ta(o,i),ra(i),g&4&&(g=i.updateQueue,g!==null&&(i.updateQueue=null,cv(i,g)));break;case 30:break;case 21:break;default:ta(o,i),ra(i)}}function ra(i){var o=i.flags;if(o&2){try{for(var m,g=i.return;g!==null;){if(d2(g)){m=g;break}g=g.return}if(m==null)throw Error(s(160));switch(m.tag){case 27:var j=m.stateNode,C=iv(i);pf(i,C,j);break;case 5:var D=m.stateNode;m.flags&32&&(Lc(D,""),m.flags&=-33);var X=iv(i);pf(i,X,D);break;case 3:case 4:var ve=m.stateNode.containerInfo,Fe=iv(i);lv(i,Fe,ve);break;default:throw Error(s(161))}}catch(Ge){Kr(i,i.return,Ge)}i.flags&=-3}o&4096&&(i.flags&=-4097)}function y2(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var o=i;y2(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),i=i.sibling}}function $l(i,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)h2(i,o.alternate,o),o=o.sibling}function Bo(i){for(i=i.child;i!==null;){var o=i;switch(o.tag){case 0:case 11:case 14:case 15:Il(4,o,o.return),Bo(o);break;case 1:fi(o,o.return);var m=o.stateNode;typeof m.componentWillUnmount=="function"&&o2(o,o.return,m),Bo(o);break;case 27:Ku(o.stateNode);case 26:case 5:fi(o,o.return),Bo(o);break;case 22:o.memoizedState===null&&Bo(o);break;case 30:Bo(o);break;default:Bo(o)}i=i.sibling}}function Fl(i,o,m){for(m=m&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var g=o.alternate,j=i,C=o,D=C.flags;switch(C.tag){case 0:case 11:case 15:Fl(j,C,m),$u(4,C);break;case 1:if(Fl(j,C,m),g=C,j=g.stateNode,typeof j.componentDidMount=="function")try{j.componentDidMount()}catch(Fe){Kr(g,g.return,Fe)}if(g=C,j=g.updateQueue,j!==null){var X=g.stateNode;try{var ve=j.shared.hiddenCallbacks;if(ve!==null)for(j.shared.hiddenCallbacks=null,j=0;j<ve.length;j++)YC(ve[j],X)}catch(Fe){Kr(g,g.return,Fe)}}m&&D&64&&l2(C),Fu(C,C.return);break;case 27:u2(C);case 26:case 5:Fl(j,C,m),m&&g===null&&D&4&&c2(C),Fu(C,C.return);break;case 12:Fl(j,C,m);break;case 13:Fl(j,C,m),m&&D&4&&p2(j,C);break;case 22:C.memoizedState===null&&Fl(j,C,m),Fu(C,C.return);break;case 30:break;default:Fl(j,C,m)}o=o.sibling}}function dv(i,o){var m=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(m=i.memoizedState.cachePool.pool),i=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(i=o.memoizedState.cachePool.pool),i!==m&&(i!=null&&i.refCount++,m!=null&&_u(m))}function uv(i,o){i=null,o.alternate!==null&&(i=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==i&&(o.refCount++,i!=null&&_u(i))}function xi(i,o,m,g){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)v2(i,o,m,g),o=o.sibling}function v2(i,o,m,g){var j=o.flags;switch(o.tag){case 0:case 11:case 15:xi(i,o,m,g),j&2048&&$u(9,o);break;case 1:xi(i,o,m,g);break;case 3:xi(i,o,m,g),j&2048&&(i=null,o.alternate!==null&&(i=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==i&&(o.refCount++,i!=null&&_u(i)));break;case 12:if(j&2048){xi(i,o,m,g),i=o.stateNode;try{var C=o.memoizedProps,D=C.id,X=C.onPostCommit;typeof X=="function"&&X(D,o.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(ve){Kr(o,o.return,ve)}}else xi(i,o,m,g);break;case 13:xi(i,o,m,g);break;case 23:break;case 22:C=o.stateNode,D=o.alternate,o.memoizedState!==null?C._visibility&2?xi(i,o,m,g):qu(i,o):C._visibility&2?xi(i,o,m,g):(C._visibility|=2,td(i,o,m,g,(o.subtreeFlags&10256)!==0)),j&2048&&dv(D,o);break;case 24:xi(i,o,m,g),j&2048&&uv(o.alternate,o);break;default:xi(i,o,m,g)}}function td(i,o,m,g,j){for(j=j&&(o.subtreeFlags&10256)!==0,o=o.child;o!==null;){var C=i,D=o,X=m,ve=g,Fe=D.flags;switch(D.tag){case 0:case 11:case 15:td(C,D,X,ve,j),$u(8,D);break;case 23:break;case 22:var Ge=D.stateNode;D.memoizedState!==null?Ge._visibility&2?td(C,D,X,ve,j):qu(C,D):(Ge._visibility|=2,td(C,D,X,ve,j)),j&&Fe&2048&&dv(D.alternate,D);break;case 24:td(C,D,X,ve,j),j&&Fe&2048&&uv(D.alternate,D);break;default:td(C,D,X,ve,j)}o=o.sibling}}function qu(i,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var m=i,g=o,j=g.flags;switch(g.tag){case 22:qu(m,g),j&2048&&dv(g.alternate,g);break;case 24:qu(m,g),j&2048&&uv(g.alternate,g);break;default:qu(m,g)}o=o.sibling}}var Uu=8192;function rd(i){if(i.subtreeFlags&Uu)for(i=i.child;i!==null;)j2(i),i=i.sibling}function j2(i){switch(i.tag){case 26:rd(i),i.flags&Uu&&i.memoizedState!==null&&$8(Va,i.memoizedState,i.memoizedProps);break;case 5:rd(i);break;case 3:case 4:var o=Va;Va=Ef(i.stateNode.containerInfo),rd(i),Va=o;break;case 22:i.memoizedState===null&&(o=i.alternate,o!==null&&o.memoizedState!==null?(o=Uu,Uu=16777216,rd(i),Uu=o):rd(i));break;default:rd(i)}}function b2(i){var o=i.alternate;if(o!==null&&(i=o.child,i!==null)){o.child=null;do o=i.sibling,i.sibling=null,i=o;while(i!==null)}}function zu(i){var o=i.deletions;if((i.flags&16)!==0){if(o!==null)for(var m=0;m<o.length;m++){var g=o[m];Jn=g,N2(g,i)}b2(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)w2(i),i=i.sibling}function w2(i){switch(i.tag){case 0:case 11:case 15:zu(i),i.flags&2048&&Il(9,i,i.return);break;case 3:zu(i);break;case 12:zu(i);break;case 22:var o=i.stateNode;i.memoizedState!==null&&o._visibility&2&&(i.return===null||i.return.tag!==13)?(o._visibility&=-3,gf(i)):zu(i);break;default:zu(i)}}function gf(i){var o=i.deletions;if((i.flags&16)!==0){if(o!==null)for(var m=0;m<o.length;m++){var g=o[m];Jn=g,N2(g,i)}b2(i)}for(i=i.child;i!==null;){switch(o=i,o.tag){case 0:case 11:case 15:Il(8,o,o.return),gf(o);break;case 22:m=o.stateNode,m._visibility&2&&(m._visibility&=-3,gf(o));break;default:gf(o)}i=i.sibling}}function N2(i,o){for(;Jn!==null;){var m=Jn;switch(m.tag){case 0:case 11:case 15:Il(8,m,o);break;case 23:case 22:if(m.memoizedState!==null&&m.memoizedState.cachePool!==null){var g=m.memoizedState.cachePool.pool;g!=null&&g.refCount++}break;case 24:_u(m.memoizedState.cache)}if(g=m.child,g!==null)g.return=m,Jn=g;else e:for(m=i;Jn!==null;){g=Jn;var j=g.sibling,C=g.return;if(f2(g),g===m){Jn=null;break e}if(j!==null){j.return=C,Jn=j;break e}Jn=C}}}var e8={getCacheForType:function(i){var o=ws($n),m=o.data.get(i);return m===void 0&&(m=i(),o.data.set(i,m)),m}},t8=typeof WeakMap=="function"?WeakMap:Map,Ir=0,Zr=null,gr=null,kr=0,$r=0,na=null,ql=!1,nd=!1,mv=!1,Qi=0,xn=0,Ul=0,Wo=0,hv=0,Ca=0,sd=0,Bu=null,Fs=null,fv=!1,xv=0,yf=1/0,vf=null,zl=null,cs=0,Bl=null,ad=null,id=0,pv=0,gv=null,_2=null,Wu=0,yv=null;function sa(){if((Ir&2)!==0&&kr!==0)return kr&-kr;if(M.T!==null){var i=Yc;return i!==0?i:Cv()}return P()}function C2(){Ca===0&&(Ca=(kr&536870912)===0||Pr?It():536870912);var i=_a.current;return i!==null&&(i.flags|=32),Ca}function aa(i,o,m){(i===Zr&&($r===2||$r===9)||i.cancelPendingCommit!==null)&&(ld(i,0),Wl(i,kr,Ca,!1)),Gn(i,m),((Ir&2)===0||i!==Zr)&&(i===Zr&&((Ir&2)===0&&(Wo|=m),xn===4&&Wl(i,kr,Ca,!1)),pi(i))}function S2(i,o,m){if((Ir&6)!==0)throw Error(s(327));var g=!m&&(o&124)===0&&(o&i.expiredLanes)===0||Le(i,o),j=g?s8(i,o):bv(i,o,!0),C=g;do{if(j===0){nd&&!g&&Wl(i,o,0,!1);break}else{if(m=i.current.alternate,C&&!r8(m)){j=bv(i,o,!1),C=!1;continue}if(j===2){if(C=o,i.errorRecoveryDisabledLanes&C)var D=0;else D=i.pendingLanes&-536870913,D=D!==0?D:D&536870912?536870912:0;if(D!==0){o=D;e:{var X=i;j=Bu;var ve=X.current.memoizedState.isDehydrated;if(ve&&(ld(X,D).flags|=256),D=bv(X,D,!1),D!==2){if(mv&&!ve){X.errorRecoveryDisabledLanes|=C,Wo|=C,j=4;break e}C=Fs,Fs=j,C!==null&&(Fs===null?Fs=C:Fs.push.apply(Fs,C))}j=D}if(C=!1,j!==2)continue}}if(j===1){ld(i,0),Wl(i,o,0,!0);break}e:{switch(g=i,C=j,C){case 0:case 1:throw Error(s(345));case 4:if((o&4194048)!==o)break;case 6:Wl(g,o,Ca,!ql);break e;case 2:Fs=null;break;case 3:case 5:break;default:throw Error(s(329))}if((o&62914560)===o&&(j=xv+300-lt(),10<j)){if(Wl(g,o,Ca,!ql),wt(g,0,!0)!==0)break e;g.timeoutHandle=tk(k2.bind(null,g,m,Fs,vf,fv,o,Ca,Wo,sd,ql,C,2,-0,0),j);break e}k2(g,m,Fs,vf,fv,o,Ca,Wo,sd,ql,C,0,-0,0)}}break}while(!0);pi(i)}function k2(i,o,m,g,j,C,D,X,ve,Fe,Ge,nt,qe,Ue){if(i.timeoutHandle=-1,nt=o.subtreeFlags,(nt&8192||(nt&16785408)===16785408)&&(Xu={stylesheets:null,count:0,unsuspend:I8},j2(o),nt=F8(),nt!==null)){i.cancelPendingCommit=nt(D2.bind(null,i,o,C,m,g,j,D,X,ve,Ge,1,qe,Ue)),Wl(i,C,D,!Fe);return}D2(i,o,C,m,g,j,D,X,ve)}function r8(i){for(var o=i;;){var m=o.tag;if((m===0||m===11||m===15)&&o.flags&16384&&(m=o.updateQueue,m!==null&&(m=m.stores,m!==null)))for(var g=0;g<m.length;g++){var j=m[g],C=j.getSnapshot;j=j.value;try{if(!Js(C(),j))return!1}catch{return!1}}if(m=o.child,o.subtreeFlags&16384&&m!==null)m.return=o,o=m;else{if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Wl(i,o,m,g){o&=~hv,o&=~Wo,i.suspendedLanes|=o,i.pingedLanes&=~o,g&&(i.warmLanes|=o),g=i.expirationTimes;for(var j=o;0<j;){var C=31-Se(j),D=1<<C;g[C]=-1,j&=~D}m!==0&&$t(i,m,o)}function jf(){return(Ir&6)===0?(Hu(0),!1):!0}function vv(){if(gr!==null){if($r===0)var i=gr.return;else i=gr,zi=$o=null,Ly(i),Jc=null,Ru=0,i=gr;for(;i!==null;)i2(i.alternate,i),i=i.return;gr=null}}function ld(i,o){var m=i.timeoutHandle;m!==-1&&(i.timeoutHandle=-1,j8(m)),m=i.cancelPendingCommit,m!==null&&(i.cancelPendingCommit=null,m()),vv(),Zr=i,gr=m=Fi(i.current,null),kr=o,$r=0,na=null,ql=!1,nd=Le(i,o),mv=!1,sd=Ca=hv=Wo=Ul=xn=0,Fs=Bu=null,fv=!1,(o&8)!==0&&(o|=o&32);var g=i.entangledLanes;if(g!==0)for(i=i.entanglements,g&=o;0<g;){var j=31-Se(g),C=1<<j;o|=i[j],g&=~C}return Qi=o,Uh(),m}function A2(i,o){dr=null,M.H=lf,o===Su||o===Qh?(o=HC(),$r=3):o===zC?(o=HC(),$r=4):$r=o===VS?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,na=o,gr===null&&(xn=1,mf(i,ja(o,i.current)))}function E2(){var i=M.H;return M.H=lf,i===null?lf:i}function M2(){var i=M.A;return M.A=e8,i}function jv(){xn=4,ql||(kr&4194048)!==kr&&_a.current!==null||(nd=!0),(Ul&134217727)===0&&(Wo&134217727)===0||Zr===null||Wl(Zr,kr,Ca,!1)}function bv(i,o,m){var g=Ir;Ir|=2;var j=E2(),C=M2();(Zr!==i||kr!==o)&&(vf=null,ld(i,o)),o=!1;var D=xn;e:do try{if($r!==0&&gr!==null){var X=gr,ve=na;switch($r){case 8:vv(),D=6;break e;case 3:case 2:case 9:case 6:_a.current===null&&(o=!0);var Fe=$r;if($r=0,na=null,od(i,X,ve,Fe),m&&nd){D=0;break e}break;default:Fe=$r,$r=0,na=null,od(i,X,ve,Fe)}}n8(),D=xn;break}catch(Ge){A2(i,Ge)}while(!0);return o&&i.shellSuspendCounter++,zi=$o=null,Ir=g,M.H=j,M.A=C,gr===null&&(Zr=null,kr=0,Uh()),D}function n8(){for(;gr!==null;)T2(gr)}function s8(i,o){var m=Ir;Ir|=2;var g=E2(),j=M2();Zr!==i||kr!==o?(vf=null,yf=lt()+500,ld(i,o)):nd=Le(i,o);e:do try{if($r!==0&&gr!==null){o=gr;var C=na;t:switch($r){case 1:$r=0,na=null,od(i,o,C,1);break;case 2:case 9:if(BC(C)){$r=0,na=null,O2(o);break}o=function(){$r!==2&&$r!==9||Zr!==i||($r=7),pi(i)},C.then(o,o);break e;case 3:$r=7;break e;case 4:$r=5;break e;case 7:BC(C)?($r=0,na=null,O2(o)):($r=0,na=null,od(i,o,C,7));break;case 5:var D=null;switch(gr.tag){case 26:D=gr.memoizedState;case 5:case 27:var X=gr;if(!D||hk(D)){$r=0,na=null;var ve=X.sibling;if(ve!==null)gr=ve;else{var Fe=X.return;Fe!==null?(gr=Fe,bf(Fe)):gr=null}break t}}$r=0,na=null,od(i,o,C,5);break;case 6:$r=0,na=null,od(i,o,C,6);break;case 8:vv(),xn=6;break e;default:throw Error(s(462))}}a8();break}catch(Ge){A2(i,Ge)}while(!0);return zi=$o=null,M.H=g,M.A=j,Ir=m,gr!==null?0:(Zr=null,kr=0,Uh(),xn)}function a8(){for(;gr!==null&&!ht();)T2(gr)}function T2(i){var o=s2(i.alternate,i,Qi);i.memoizedProps=i.pendingProps,o===null?bf(i):gr=o}function O2(i){var o=i,m=o.alternate;switch(o.tag){case 15:case 0:o=ZS(m,o,o.pendingProps,o.type,void 0,kr);break;case 11:o=ZS(m,o,o.pendingProps,o.type.render,o.ref,kr);break;case 5:Ly(o);default:i2(m,o),o=gr=PC(o,Qi),o=s2(m,o,Qi)}i.memoizedProps=i.pendingProps,o===null?bf(i):gr=o}function od(i,o,m,g){zi=$o=null,Ly(o),Jc=null,Ru=0;var j=o.return;try{if(Kq(i,j,o,m,kr)){xn=1,mf(i,ja(m,i.current)),gr=null;return}}catch(C){if(j!==null)throw gr=j,C;xn=1,mf(i,ja(m,i.current)),gr=null;return}o.flags&32768?(Pr||g===1?i=!0:nd||(kr&536870912)!==0?i=!1:(ql=i=!0,(g===2||g===9||g===3||g===6)&&(g=_a.current,g!==null&&g.tag===13&&(g.flags|=16384))),P2(o,i)):bf(o)}function bf(i){var o=i;do{if((o.flags&32768)!==0){P2(o,ql);return}i=o.return;var m=Qq(o.alternate,o,Qi);if(m!==null){gr=m;return}if(o=o.sibling,o!==null){gr=o;return}gr=o=i}while(o!==null);xn===0&&(xn=5)}function P2(i,o){do{var m=Xq(i.alternate,i);if(m!==null){m.flags&=32767,gr=m;return}if(m=i.return,m!==null&&(m.flags|=32768,m.subtreeFlags=0,m.deletions=null),!o&&(i=i.sibling,i!==null)){gr=i;return}gr=i=m}while(i!==null);xn=6,gr=null}function D2(i,o,m,g,j,C,D,X,ve){i.cancelPendingCommit=null;do wf();while(cs!==0);if((Ir&6)!==0)throw Error(s(327));if(o!==null){if(o===i.current)throw Error(s(177));if(C=o.lanes|o.childLanes,C|=uy,Qn(i,m,C,D,X,ve),i===Zr&&(gr=Zr=null,kr=0),ad=o,Bl=i,id=m,pv=C,gv=j,_2=g,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,c8(Be,function(){return F2(),null})):(i.callbackNode=null,i.callbackPriority=0),g=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||g){g=M.T,M.T=null,j=B.p,B.p=2,D=Ir,Ir|=4;try{Zq(i,o,m)}finally{Ir=D,B.p=j,M.T=g}}cs=1,R2(),L2(),I2()}}function R2(){if(cs===1){cs=0;var i=Bl,o=ad,m=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||m){m=M.T,M.T=null;var g=B.p;B.p=2;var j=Ir;Ir|=4;try{g2(o,i);var C=Pv,D=NC(i.containerInfo),X=C.focusedElem,ve=C.selectionRange;if(D!==X&&X&&X.ownerDocument&&wC(X.ownerDocument.documentElement,X)){if(ve!==null&&iy(X)){var Fe=ve.start,Ge=ve.end;if(Ge===void 0&&(Ge=Fe),"selectionStart"in X)X.selectionStart=Fe,X.selectionEnd=Math.min(Ge,X.value.length);else{var nt=X.ownerDocument||document,qe=nt&&nt.defaultView||window;if(qe.getSelection){var Ue=qe.getSelection(),Yt=X.textContent.length,Wt=Math.min(ve.start,Yt),Wr=ve.end===void 0?Wt:Math.min(ve.end,Yt);!Ue.extend&&Wt>Wr&&(D=Wr,Wr=Wt,Wt=D);var Te=bC(X,Wt),Ce=bC(X,Wr);if(Te&&Ce&&(Ue.rangeCount!==1||Ue.anchorNode!==Te.node||Ue.anchorOffset!==Te.offset||Ue.focusNode!==Ce.node||Ue.focusOffset!==Ce.offset)){var Ie=nt.createRange();Ie.setStart(Te.node,Te.offset),Ue.removeAllRanges(),Wt>Wr?(Ue.addRange(Ie),Ue.extend(Ce.node,Ce.offset)):(Ie.setEnd(Ce.node,Ce.offset),Ue.addRange(Ie))}}}}for(nt=[],Ue=X;Ue=Ue.parentNode;)Ue.nodeType===1&&nt.push({element:Ue,left:Ue.scrollLeft,top:Ue.scrollTop});for(typeof X.focus=="function"&&X.focus(),X=0;X<nt.length;X++){var Xe=nt[X];Xe.element.scrollLeft=Xe.left,Xe.element.scrollTop=Xe.top}}Df=!!Ov,Pv=Ov=null}finally{Ir=j,B.p=g,M.T=m}}i.current=o,cs=2}}function L2(){if(cs===2){cs=0;var i=Bl,o=ad,m=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||m){m=M.T,M.T=null;var g=B.p;B.p=2;var j=Ir;Ir|=4;try{h2(i,o.alternate,o)}finally{Ir=j,B.p=g,M.T=m}}cs=3}}function I2(){if(cs===4||cs===3){cs=0,Ve();var i=Bl,o=ad,m=id,g=_2;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?cs=5:(cs=0,ad=Bl=null,$2(i,i.pendingLanes));var j=i.pendingLanes;if(j===0&&(zl=null),Qe(m),o=o.stateNode,je&&typeof je.onCommitFiberRoot=="function")try{je.onCommitFiberRoot(Ae,o,void 0,(o.current.flags&128)===128)}catch{}if(g!==null){o=M.T,j=B.p,B.p=2,M.T=null;try{for(var C=i.onRecoverableError,D=0;D<g.length;D++){var X=g[D];C(X.value,{componentStack:X.stack})}}finally{M.T=o,B.p=j}}(id&3)!==0&&wf(),pi(i),j=i.pendingLanes,(m&4194090)!==0&&(j&42)!==0?i===yv?Wu++:(Wu=0,yv=i):Wu=0,Hu(0)}}function $2(i,o){(i.pooledCacheLanes&=o)===0&&(o=i.pooledCache,o!=null&&(i.pooledCache=null,_u(o)))}function wf(i){return R2(),L2(),I2(),F2()}function F2(){if(cs!==5)return!1;var i=Bl,o=pv;pv=0;var m=Qe(id),g=M.T,j=B.p;try{B.p=32>m?32:m,M.T=null,m=gv,gv=null;var C=Bl,D=id;if(cs=0,ad=Bl=null,id=0,(Ir&6)!==0)throw Error(s(331));var X=Ir;if(Ir|=4,w2(C.current),v2(C,C.current,D,m),Ir=X,Hu(0,!1),je&&typeof je.onPostCommitFiberRoot=="function")try{je.onPostCommitFiberRoot(Ae,C)}catch{}return!0}finally{B.p=j,M.T=g,$2(i,o)}}function q2(i,o,m){o=ja(m,o),o=Qy(i.stateNode,o,2),i=Pl(i,o,2),i!==null&&(Gn(i,2),pi(i))}function Kr(i,o,m){if(i.tag===3)q2(i,i,m);else for(;o!==null;){if(o.tag===3){q2(o,i,m);break}else if(o.tag===1){var g=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(zl===null||!zl.has(g))){i=ja(m,i),m=WS(2),g=Pl(o,m,2),g!==null&&(HS(m,g,o,i),Gn(g,2),pi(g));break}}o=o.return}}function wv(i,o,m){var g=i.pingCache;if(g===null){g=i.pingCache=new t8;var j=new Set;g.set(o,j)}else j=g.get(o),j===void 0&&(j=new Set,g.set(o,j));j.has(m)||(mv=!0,j.add(m),i=i8.bind(null,i,o,m),o.then(i,i))}function i8(i,o,m){var g=i.pingCache;g!==null&&g.delete(o),i.pingedLanes|=i.suspendedLanes&m,i.warmLanes&=~m,Zr===i&&(kr&m)===m&&(xn===4||xn===3&&(kr&62914560)===kr&&300>lt()-xv?(Ir&2)===0&&ld(i,0):hv|=m,sd===kr&&(sd=0)),pi(i)}function U2(i,o){o===0&&(o=Er()),i=Bc(i,o),i!==null&&(Gn(i,o),pi(i))}function l8(i){var o=i.memoizedState,m=0;o!==null&&(m=o.retryLane),U2(i,m)}function o8(i,o){var m=0;switch(i.tag){case 13:var g=i.stateNode,j=i.memoizedState;j!==null&&(m=j.retryLane);break;case 19:g=i.stateNode;break;case 22:g=i.stateNode._retryCache;break;default:throw Error(s(314))}g!==null&&g.delete(o),U2(i,m)}function c8(i,o){return _e(i,o)}var Nf=null,cd=null,Nv=!1,_f=!1,_v=!1,Ho=0;function pi(i){i!==cd&&i.next===null&&(cd===null?Nf=cd=i:cd=cd.next=i),_f=!0,Nv||(Nv=!0,u8())}function Hu(i,o){if(!_v&&_f){_v=!0;do for(var m=!1,g=Nf;g!==null;){if(i!==0){var j=g.pendingLanes;if(j===0)var C=0;else{var D=g.suspendedLanes,X=g.pingedLanes;C=(1<<31-Se(42|i)+1)-1,C&=j&~(D&~X),C=C&201326741?C&201326741|1:C?C|2:0}C!==0&&(m=!0,H2(g,C))}else C=kr,C=wt(g,g===Zr?C:0,g.cancelPendingCommit!==null||g.timeoutHandle!==-1),(C&3)===0||Le(g,C)||(m=!0,H2(g,C));g=g.next}while(m);_v=!1}}function d8(){z2()}function z2(){_f=Nv=!1;var i=0;Ho!==0&&(v8()&&(i=Ho),Ho=0);for(var o=lt(),m=null,g=Nf;g!==null;){var j=g.next,C=B2(g,o);C===0?(g.next=null,m===null?Nf=j:m.next=j,j===null&&(cd=m)):(m=g,(i!==0||(C&3)!==0)&&(_f=!0)),g=j}Hu(i)}function B2(i,o){for(var m=i.suspendedLanes,g=i.pingedLanes,j=i.expirationTimes,C=i.pendingLanes&-62914561;0<C;){var D=31-Se(C),X=1<<D,ve=j[D];ve===-1?((X&m)===0||(X&g)!==0)&&(j[D]=ot(X,o)):ve<=o&&(i.expiredLanes|=X),C&=~X}if(o=Zr,m=kr,m=wt(i,i===o?m:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),g=i.callbackNode,m===0||i===o&&($r===2||$r===9)||i.cancelPendingCommit!==null)return g!==null&&g!==null&&Ye(g),i.callbackNode=null,i.callbackPriority=0;if((m&3)===0||Le(i,m)){if(o=m&-m,o===i.callbackPriority)return o;switch(g!==null&&Ye(g),Qe(m)){case 2:case 8:m=H;break;case 32:m=Be;break;case 268435456:m=K;break;default:m=Be}return g=W2.bind(null,i),m=_e(m,g),i.callbackPriority=o,i.callbackNode=m,o}return g!==null&&g!==null&&Ye(g),i.callbackPriority=2,i.callbackNode=null,2}function W2(i,o){if(cs!==0&&cs!==5)return i.callbackNode=null,i.callbackPriority=0,null;var m=i.callbackNode;if(wf()&&i.callbackNode!==m)return null;var g=kr;return g=wt(i,i===Zr?g:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),g===0?null:(S2(i,g,o),B2(i,lt()),i.callbackNode!=null&&i.callbackNode===m?W2.bind(null,i):null)}function H2(i,o){if(wf())return null;S2(i,o,!0)}function u8(){b8(function(){(Ir&6)!==0?_e(Re,d8):z2()})}function Cv(){return Ho===0&&(Ho=It()),Ho}function V2(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:Dh(""+i)}function Y2(i,o){var m=o.ownerDocument.createElement("input");return m.name=o.name,m.value=o.value,i.id&&m.setAttribute("form",i.id),o.parentNode.insertBefore(m,o),i=new FormData(i),m.parentNode.removeChild(m),i}function m8(i,o,m,g,j){if(o==="submit"&&m&&m.stateNode===j){var C=V2((j[dt]||null).action),D=g.submitter;D&&(o=(o=D[dt]||null)?V2(o.formAction):D.getAttribute("formAction"),o!==null&&(C=o,D=null));var X=new $h("action","action",null,g,j);i.push({event:X,listeners:[{instance:null,listener:function(){if(g.defaultPrevented){if(Ho!==0){var ve=D?Y2(j,D):new FormData(j);Hy(m,{pending:!0,data:ve,method:j.method,action:C},null,ve)}}else typeof C=="function"&&(X.preventDefault(),ve=D?Y2(j,D):new FormData(j),Hy(m,{pending:!0,data:ve,method:j.method,action:C},C,ve))},currentTarget:j}]})}}for(var Sv=0;Sv<dy.length;Sv++){var kv=dy[Sv],h8=kv.toLowerCase(),f8=kv[0].toUpperCase()+kv.slice(1);Ha(h8,"on"+f8)}Ha(SC,"onAnimationEnd"),Ha(kC,"onAnimationIteration"),Ha(AC,"onAnimationStart"),Ha("dblclick","onDoubleClick"),Ha("focusin","onFocus"),Ha("focusout","onBlur"),Ha(Tq,"onTransitionRun"),Ha(Oq,"onTransitionStart"),Ha(Pq,"onTransitionCancel"),Ha(EC,"onTransitionEnd"),Pc("onMouseEnter",["mouseout","mouseover"]),Pc("onMouseLeave",["mouseout","mouseover"]),Pc("onPointerEnter",["pointerout","pointerover"]),Pc("onPointerLeave",["pointerout","pointerover"]),Eo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Eo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Eo("onBeforeInput",["compositionend","keypress","textInput","paste"]),Eo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Eo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Eo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Vu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),x8=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Vu));function K2(i,o){o=(o&4)!==0;for(var m=0;m<i.length;m++){var g=i[m],j=g.event;g=g.listeners;e:{var C=void 0;if(o)for(var D=g.length-1;0<=D;D--){var X=g[D],ve=X.instance,Fe=X.currentTarget;if(X=X.listener,ve!==C&&j.isPropagationStopped())break e;C=X,j.currentTarget=Fe;try{C(j)}catch(Ge){uf(Ge)}j.currentTarget=null,C=ve}else for(D=0;D<g.length;D++){if(X=g[D],ve=X.instance,Fe=X.currentTarget,X=X.listener,ve!==C&&j.isPropagationStopped())break e;C=X,j.currentTarget=Fe;try{C(j)}catch(Ge){uf(Ge)}j.currentTarget=null,C=ve}}}}function yr(i,o){var m=o[kn];m===void 0&&(m=o[kn]=new Set);var g=i+"__bubble";m.has(g)||(G2(o,i,2,!1),m.add(g))}function Av(i,o,m){var g=0;o&&(g|=4),G2(m,i,g,o)}var Cf="_reactListening"+Math.random().toString(36).slice(2);function Ev(i){if(!i[Cf]){i[Cf]=!0,z1.forEach(function(m){m!=="selectionchange"&&(x8.has(m)||Av(m,!1,i),Av(m,!0,i))});var o=i.nodeType===9?i:i.ownerDocument;o===null||o[Cf]||(o[Cf]=!0,Av("selectionchange",!1,o))}}function G2(i,o,m,g){switch(vk(o)){case 2:var j=z8;break;case 8:j=B8;break;default:j=Bv}m=j.bind(null,o,m,i),j=void 0,!Xg||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(j=!0),g?j!==void 0?i.addEventListener(o,m,{capture:!0,passive:j}):i.addEventListener(o,m,!0):j!==void 0?i.addEventListener(o,m,{passive:j}):i.addEventListener(o,m,!1)}function Mv(i,o,m,g,j){var C=g;if((o&1)===0&&(o&2)===0&&g!==null)e:for(;;){if(g===null)return;var D=g.tag;if(D===3||D===4){var X=g.stateNode.containerInfo;if(X===j)break;if(D===4)for(D=g.return;D!==null;){var ve=D.tag;if((ve===3||ve===4)&&D.stateNode.containerInfo===j)return;D=D.return}for(;X!==null;){if(D=pr(X),D===null)return;if(ve=D.tag,ve===5||ve===6||ve===26||ve===27){g=C=D;continue e}X=X.parentNode}}g=g.return}rC(function(){var Fe=C,Ge=Gg(m),nt=[];e:{var qe=MC.get(i);if(qe!==void 0){var Ue=$h,Yt=i;switch(i){case"keypress":if(Lh(m)===0)break e;case"keydown":case"keyup":Ue=cq;break;case"focusin":Yt="focus",Ue=ty;break;case"focusout":Yt="blur",Ue=ty;break;case"beforeblur":case"afterblur":Ue=ty;break;case"click":if(m.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ue=aC;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ue=X6;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ue=mq;break;case SC:case kC:case AC:Ue=eq;break;case EC:Ue=fq;break;case"scroll":case"scrollend":Ue=G6;break;case"wheel":Ue=pq;break;case"copy":case"cut":case"paste":Ue=rq;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ue=lC;break;case"toggle":case"beforetoggle":Ue=yq}var Wt=(o&4)!==0,Wr=!Wt&&(i==="scroll"||i==="scrollend"),Te=Wt?qe!==null?qe+"Capture":null:qe;Wt=[];for(var Ce=Fe,Ie;Ce!==null;){var Xe=Ce;if(Ie=Xe.stateNode,Xe=Xe.tag,Xe!==5&&Xe!==26&&Xe!==27||Ie===null||Te===null||(Xe=uu(Ce,Te),Xe!=null&&Wt.push(Yu(Ce,Xe,Ie))),Wr)break;Ce=Ce.return}0<Wt.length&&(qe=new Ue(qe,Yt,null,m,Ge),nt.push({event:qe,listeners:Wt}))}}if((o&7)===0){e:{if(qe=i==="mouseover"||i==="pointerover",Ue=i==="mouseout"||i==="pointerout",qe&&m!==Kg&&(Yt=m.relatedTarget||m.fromElement)&&(pr(Yt)||Yt[zt]))break e;if((Ue||qe)&&(qe=Ge.window===Ge?Ge:(qe=Ge.ownerDocument)?qe.defaultView||qe.parentWindow:window,Ue?(Yt=m.relatedTarget||m.toElement,Ue=Fe,Yt=Yt?pr(Yt):null,Yt!==null&&(Wr=l(Yt),Wt=Yt.tag,Yt!==Wr||Wt!==5&&Wt!==27&&Wt!==6)&&(Yt=null)):(Ue=null,Yt=Fe),Ue!==Yt)){if(Wt=aC,Xe="onMouseLeave",Te="onMouseEnter",Ce="mouse",(i==="pointerout"||i==="pointerover")&&(Wt=lC,Xe="onPointerLeave",Te="onPointerEnter",Ce="pointer"),Wr=Ue==null?qe:ui(Ue),Ie=Yt==null?qe:ui(Yt),qe=new Wt(Xe,Ce+"leave",Ue,m,Ge),qe.target=Wr,qe.relatedTarget=Ie,Xe=null,pr(Ge)===Fe&&(Wt=new Wt(Te,Ce+"enter",Yt,m,Ge),Wt.target=Ie,Wt.relatedTarget=Wr,Xe=Wt),Wr=Xe,Ue&&Yt)t:{for(Wt=Ue,Te=Yt,Ce=0,Ie=Wt;Ie;Ie=dd(Ie))Ce++;for(Ie=0,Xe=Te;Xe;Xe=dd(Xe))Ie++;for(;0<Ce-Ie;)Wt=dd(Wt),Ce--;for(;0<Ie-Ce;)Te=dd(Te),Ie--;for(;Ce--;){if(Wt===Te||Te!==null&&Wt===Te.alternate)break t;Wt=dd(Wt),Te=dd(Te)}Wt=null}else Wt=null;Ue!==null&&Q2(nt,qe,Ue,Wt,!1),Yt!==null&&Wr!==null&&Q2(nt,Wr,Yt,Wt,!0)}}e:{if(qe=Fe?ui(Fe):window,Ue=qe.nodeName&&qe.nodeName.toLowerCase(),Ue==="select"||Ue==="input"&&qe.type==="file")var St=xC;else if(hC(qe))if(pC)St=Aq;else{St=Sq;var fr=Cq}else Ue=qe.nodeName,!Ue||Ue.toLowerCase()!=="input"||qe.type!=="checkbox"&&qe.type!=="radio"?Fe&&Yg(Fe.elementType)&&(St=xC):St=kq;if(St&&(St=St(i,Fe))){fC(nt,St,m,Ge);break e}fr&&fr(i,qe,Fe),i==="focusout"&&Fe&&qe.type==="number"&&Fe.memoizedProps.value!=null&&Vg(qe,"number",qe.value)}switch(fr=Fe?ui(Fe):window,i){case"focusin":(hC(fr)||fr.contentEditable==="true")&&(qc=fr,ly=Fe,vu=null);break;case"focusout":vu=ly=qc=null;break;case"mousedown":oy=!0;break;case"contextmenu":case"mouseup":case"dragend":oy=!1,_C(nt,m,Ge);break;case"selectionchange":if(Mq)break;case"keydown":case"keyup":_C(nt,m,Ge)}var Pt;if(ny)e:{switch(i){case"compositionstart":var Ht="onCompositionStart";break e;case"compositionend":Ht="onCompositionEnd";break e;case"compositionupdate":Ht="onCompositionUpdate";break e}Ht=void 0}else Fc?uC(i,m)&&(Ht="onCompositionEnd"):i==="keydown"&&m.keyCode===229&&(Ht="onCompositionStart");Ht&&(oC&&m.locale!=="ko"&&(Fc||Ht!=="onCompositionStart"?Ht==="onCompositionEnd"&&Fc&&(Pt=nC()):(El=Ge,Zg="value"in El?El.value:El.textContent,Fc=!0)),fr=Sf(Fe,Ht),0<fr.length&&(Ht=new iC(Ht,i,null,m,Ge),nt.push({event:Ht,listeners:fr}),Pt?Ht.data=Pt:(Pt=mC(m),Pt!==null&&(Ht.data=Pt)))),(Pt=jq?bq(i,m):wq(i,m))&&(Ht=Sf(Fe,"onBeforeInput"),0<Ht.length&&(fr=new iC("onBeforeInput","beforeinput",null,m,Ge),nt.push({event:fr,listeners:Ht}),fr.data=Pt)),m8(nt,i,Fe,m,Ge)}K2(nt,o)})}function Yu(i,o,m){return{instance:i,listener:o,currentTarget:m}}function Sf(i,o){for(var m=o+"Capture",g=[];i!==null;){var j=i,C=j.stateNode;if(j=j.tag,j!==5&&j!==26&&j!==27||C===null||(j=uu(i,m),j!=null&&g.unshift(Yu(i,j,C)),j=uu(i,o),j!=null&&g.push(Yu(i,j,C))),i.tag===3)return g;i=i.return}return[]}function dd(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function Q2(i,o,m,g,j){for(var C=o._reactName,D=[];m!==null&&m!==g;){var X=m,ve=X.alternate,Fe=X.stateNode;if(X=X.tag,ve!==null&&ve===g)break;X!==5&&X!==26&&X!==27||Fe===null||(ve=Fe,j?(Fe=uu(m,C),Fe!=null&&D.unshift(Yu(m,Fe,ve))):j||(Fe=uu(m,C),Fe!=null&&D.push(Yu(m,Fe,ve)))),m=m.return}D.length!==0&&i.push({event:o,listeners:D})}var p8=/\r\n?/g,g8=/\u0000|\uFFFD/g;function X2(i){return(typeof i=="string"?i:""+i).replace(p8,`
`).replace(g8,"")}function Z2(i,o){return o=X2(o),X2(i)===o}function kf(){}function Br(i,o,m,g,j,C){switch(m){case"children":typeof g=="string"?o==="body"||o==="textarea"&&g===""||Lc(i,g):(typeof g=="number"||typeof g=="bigint")&&o!=="body"&&Lc(i,""+g);break;case"className":Th(i,"class",g);break;case"tabIndex":Th(i,"tabindex",g);break;case"dir":case"role":case"viewBox":case"width":case"height":Th(i,m,g);break;case"style":eC(i,g,C);break;case"data":if(o!=="object"){Th(i,"data",g);break}case"src":case"href":if(g===""&&(o!=="a"||m!=="href")){i.removeAttribute(m);break}if(g==null||typeof g=="function"||typeof g=="symbol"||typeof g=="boolean"){i.removeAttribute(m);break}g=Dh(""+g),i.setAttribute(m,g);break;case"action":case"formAction":if(typeof g=="function"){i.setAttribute(m,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof C=="function"&&(m==="formAction"?(o!=="input"&&Br(i,o,"name",j.name,j,null),Br(i,o,"formEncType",j.formEncType,j,null),Br(i,o,"formMethod",j.formMethod,j,null),Br(i,o,"formTarget",j.formTarget,j,null)):(Br(i,o,"encType",j.encType,j,null),Br(i,o,"method",j.method,j,null),Br(i,o,"target",j.target,j,null)));if(g==null||typeof g=="symbol"||typeof g=="boolean"){i.removeAttribute(m);break}g=Dh(""+g),i.setAttribute(m,g);break;case"onClick":g!=null&&(i.onclick=kf);break;case"onScroll":g!=null&&yr("scroll",i);break;case"onScrollEnd":g!=null&&yr("scrollend",i);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(s(61));if(m=g.__html,m!=null){if(j.children!=null)throw Error(s(60));i.innerHTML=m}}break;case"multiple":i.multiple=g&&typeof g!="function"&&typeof g!="symbol";break;case"muted":i.muted=g&&typeof g!="function"&&typeof g!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(g==null||typeof g=="function"||typeof g=="boolean"||typeof g=="symbol"){i.removeAttribute("xlink:href");break}m=Dh(""+g),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",m);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":g!=null&&typeof g!="function"&&typeof g!="symbol"?i.setAttribute(m,""+g):i.removeAttribute(m);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":g&&typeof g!="function"&&typeof g!="symbol"?i.setAttribute(m,""):i.removeAttribute(m);break;case"capture":case"download":g===!0?i.setAttribute(m,""):g!==!1&&g!=null&&typeof g!="function"&&typeof g!="symbol"?i.setAttribute(m,g):i.removeAttribute(m);break;case"cols":case"rows":case"size":case"span":g!=null&&typeof g!="function"&&typeof g!="symbol"&&!isNaN(g)&&1<=g?i.setAttribute(m,g):i.removeAttribute(m);break;case"rowSpan":case"start":g==null||typeof g=="function"||typeof g=="symbol"||isNaN(g)?i.removeAttribute(m):i.setAttribute(m,g);break;case"popover":yr("beforetoggle",i),yr("toggle",i),Mh(i,"popover",g);break;case"xlinkActuate":Ii(i,"http://www.w3.org/1999/xlink","xlink:actuate",g);break;case"xlinkArcrole":Ii(i,"http://www.w3.org/1999/xlink","xlink:arcrole",g);break;case"xlinkRole":Ii(i,"http://www.w3.org/1999/xlink","xlink:role",g);break;case"xlinkShow":Ii(i,"http://www.w3.org/1999/xlink","xlink:show",g);break;case"xlinkTitle":Ii(i,"http://www.w3.org/1999/xlink","xlink:title",g);break;case"xlinkType":Ii(i,"http://www.w3.org/1999/xlink","xlink:type",g);break;case"xmlBase":Ii(i,"http://www.w3.org/XML/1998/namespace","xml:base",g);break;case"xmlLang":Ii(i,"http://www.w3.org/XML/1998/namespace","xml:lang",g);break;case"xmlSpace":Ii(i,"http://www.w3.org/XML/1998/namespace","xml:space",g);break;case"is":Mh(i,"is",g);break;case"innerText":case"textContent":break;default:(!(2<m.length)||m[0]!=="o"&&m[0]!=="O"||m[1]!=="n"&&m[1]!=="N")&&(m=Y6.get(m)||m,Mh(i,m,g))}}function Tv(i,o,m,g,j,C){switch(m){case"style":eC(i,g,C);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(s(61));if(m=g.__html,m!=null){if(j.children!=null)throw Error(s(60));i.innerHTML=m}}break;case"children":typeof g=="string"?Lc(i,g):(typeof g=="number"||typeof g=="bigint")&&Lc(i,""+g);break;case"onScroll":g!=null&&yr("scroll",i);break;case"onScrollEnd":g!=null&&yr("scrollend",i);break;case"onClick":g!=null&&(i.onclick=kf);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!B1.hasOwnProperty(m))e:{if(m[0]==="o"&&m[1]==="n"&&(j=m.endsWith("Capture"),o=m.slice(2,j?m.length-7:void 0),C=i[dt]||null,C=C!=null?C[m]:null,typeof C=="function"&&i.removeEventListener(o,C,j),typeof g=="function")){typeof C!="function"&&C!==null&&(m in i?i[m]=null:i.hasAttribute(m)&&i.removeAttribute(m)),i.addEventListener(o,g,j);break e}m in i?i[m]=g:g===!0?i.setAttribute(m,""):Mh(i,m,g)}}}function ds(i,o,m){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":yr("error",i),yr("load",i);var g=!1,j=!1,C;for(C in m)if(m.hasOwnProperty(C)){var D=m[C];if(D!=null)switch(C){case"src":g=!0;break;case"srcSet":j=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,o));default:Br(i,o,C,D,m,null)}}j&&Br(i,o,"srcSet",m.srcSet,m,null),g&&Br(i,o,"src",m.src,m,null);return;case"input":yr("invalid",i);var X=C=D=j=null,ve=null,Fe=null;for(g in m)if(m.hasOwnProperty(g)){var Ge=m[g];if(Ge!=null)switch(g){case"name":j=Ge;break;case"type":D=Ge;break;case"checked":ve=Ge;break;case"defaultChecked":Fe=Ge;break;case"value":C=Ge;break;case"defaultValue":X=Ge;break;case"children":case"dangerouslySetInnerHTML":if(Ge!=null)throw Error(s(137,o));break;default:Br(i,o,g,Ge,m,null)}}Q1(i,C,X,ve,Fe,D,j,!1),Oh(i);return;case"select":yr("invalid",i),g=D=C=null;for(j in m)if(m.hasOwnProperty(j)&&(X=m[j],X!=null))switch(j){case"value":C=X;break;case"defaultValue":D=X;break;case"multiple":g=X;default:Br(i,o,j,X,m,null)}o=C,m=D,i.multiple=!!g,o!=null?Rc(i,!!g,o,!1):m!=null&&Rc(i,!!g,m,!0);return;case"textarea":yr("invalid",i),C=j=g=null;for(D in m)if(m.hasOwnProperty(D)&&(X=m[D],X!=null))switch(D){case"value":g=X;break;case"defaultValue":j=X;break;case"children":C=X;break;case"dangerouslySetInnerHTML":if(X!=null)throw Error(s(91));break;default:Br(i,o,D,X,m,null)}Z1(i,g,j,C),Oh(i);return;case"option":for(ve in m)if(m.hasOwnProperty(ve)&&(g=m[ve],g!=null))switch(ve){case"selected":i.selected=g&&typeof g!="function"&&typeof g!="symbol";break;default:Br(i,o,ve,g,m,null)}return;case"dialog":yr("beforetoggle",i),yr("toggle",i),yr("cancel",i),yr("close",i);break;case"iframe":case"object":yr("load",i);break;case"video":case"audio":for(g=0;g<Vu.length;g++)yr(Vu[g],i);break;case"image":yr("error",i),yr("load",i);break;case"details":yr("toggle",i);break;case"embed":case"source":case"link":yr("error",i),yr("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Fe in m)if(m.hasOwnProperty(Fe)&&(g=m[Fe],g!=null))switch(Fe){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,o));default:Br(i,o,Fe,g,m,null)}return;default:if(Yg(o)){for(Ge in m)m.hasOwnProperty(Ge)&&(g=m[Ge],g!==void 0&&Tv(i,o,Ge,g,m,void 0));return}}for(X in m)m.hasOwnProperty(X)&&(g=m[X],g!=null&&Br(i,o,X,g,m,null))}function y8(i,o,m,g){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var j=null,C=null,D=null,X=null,ve=null,Fe=null,Ge=null;for(Ue in m){var nt=m[Ue];if(m.hasOwnProperty(Ue)&&nt!=null)switch(Ue){case"checked":break;case"value":break;case"defaultValue":ve=nt;default:g.hasOwnProperty(Ue)||Br(i,o,Ue,null,g,nt)}}for(var qe in g){var Ue=g[qe];if(nt=m[qe],g.hasOwnProperty(qe)&&(Ue!=null||nt!=null))switch(qe){case"type":C=Ue;break;case"name":j=Ue;break;case"checked":Fe=Ue;break;case"defaultChecked":Ge=Ue;break;case"value":D=Ue;break;case"defaultValue":X=Ue;break;case"children":case"dangerouslySetInnerHTML":if(Ue!=null)throw Error(s(137,o));break;default:Ue!==nt&&Br(i,o,qe,Ue,g,nt)}}Hg(i,D,X,ve,Fe,Ge,C,j);return;case"select":Ue=D=X=qe=null;for(C in m)if(ve=m[C],m.hasOwnProperty(C)&&ve!=null)switch(C){case"value":break;case"multiple":Ue=ve;default:g.hasOwnProperty(C)||Br(i,o,C,null,g,ve)}for(j in g)if(C=g[j],ve=m[j],g.hasOwnProperty(j)&&(C!=null||ve!=null))switch(j){case"value":qe=C;break;case"defaultValue":X=C;break;case"multiple":D=C;default:C!==ve&&Br(i,o,j,C,g,ve)}o=X,m=D,g=Ue,qe!=null?Rc(i,!!m,qe,!1):!!g!=!!m&&(o!=null?Rc(i,!!m,o,!0):Rc(i,!!m,m?[]:"",!1));return;case"textarea":Ue=qe=null;for(X in m)if(j=m[X],m.hasOwnProperty(X)&&j!=null&&!g.hasOwnProperty(X))switch(X){case"value":break;case"children":break;default:Br(i,o,X,null,g,j)}for(D in g)if(j=g[D],C=m[D],g.hasOwnProperty(D)&&(j!=null||C!=null))switch(D){case"value":qe=j;break;case"defaultValue":Ue=j;break;case"children":break;case"dangerouslySetInnerHTML":if(j!=null)throw Error(s(91));break;default:j!==C&&Br(i,o,D,j,g,C)}X1(i,qe,Ue);return;case"option":for(var Yt in m)if(qe=m[Yt],m.hasOwnProperty(Yt)&&qe!=null&&!g.hasOwnProperty(Yt))switch(Yt){case"selected":i.selected=!1;break;default:Br(i,o,Yt,null,g,qe)}for(ve in g)if(qe=g[ve],Ue=m[ve],g.hasOwnProperty(ve)&&qe!==Ue&&(qe!=null||Ue!=null))switch(ve){case"selected":i.selected=qe&&typeof qe!="function"&&typeof qe!="symbol";break;default:Br(i,o,ve,qe,g,Ue)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Wt in m)qe=m[Wt],m.hasOwnProperty(Wt)&&qe!=null&&!g.hasOwnProperty(Wt)&&Br(i,o,Wt,null,g,qe);for(Fe in g)if(qe=g[Fe],Ue=m[Fe],g.hasOwnProperty(Fe)&&qe!==Ue&&(qe!=null||Ue!=null))switch(Fe){case"children":case"dangerouslySetInnerHTML":if(qe!=null)throw Error(s(137,o));break;default:Br(i,o,Fe,qe,g,Ue)}return;default:if(Yg(o)){for(var Wr in m)qe=m[Wr],m.hasOwnProperty(Wr)&&qe!==void 0&&!g.hasOwnProperty(Wr)&&Tv(i,o,Wr,void 0,g,qe);for(Ge in g)qe=g[Ge],Ue=m[Ge],!g.hasOwnProperty(Ge)||qe===Ue||qe===void 0&&Ue===void 0||Tv(i,o,Ge,qe,g,Ue);return}}for(var Te in m)qe=m[Te],m.hasOwnProperty(Te)&&qe!=null&&!g.hasOwnProperty(Te)&&Br(i,o,Te,null,g,qe);for(nt in g)qe=g[nt],Ue=m[nt],!g.hasOwnProperty(nt)||qe===Ue||qe==null&&Ue==null||Br(i,o,nt,qe,g,Ue)}var Ov=null,Pv=null;function Af(i){return i.nodeType===9?i:i.ownerDocument}function J2(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ek(i,o){if(i===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&o==="foreignObject"?0:i}function Dv(i,o){return i==="textarea"||i==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var Rv=null;function v8(){var i=window.event;return i&&i.type==="popstate"?i===Rv?!1:(Rv=i,!0):(Rv=null,!1)}var tk=typeof setTimeout=="function"?setTimeout:void 0,j8=typeof clearTimeout=="function"?clearTimeout:void 0,rk=typeof Promise=="function"?Promise:void 0,b8=typeof queueMicrotask=="function"?queueMicrotask:typeof rk<"u"?function(i){return rk.resolve(null).then(i).catch(w8)}:tk;function w8(i){setTimeout(function(){throw i})}function Hl(i){return i==="head"}function nk(i,o){var m=o,g=0,j=0;do{var C=m.nextSibling;if(i.removeChild(m),C&&C.nodeType===8)if(m=C.data,m==="/$"){if(0<g&&8>g){m=g;var D=i.ownerDocument;if(m&1&&Ku(D.documentElement),m&2&&Ku(D.body),m&4)for(m=D.head,Ku(m),D=m.firstChild;D;){var X=D.nextSibling,ve=D.nodeName;D[Dt]||ve==="SCRIPT"||ve==="STYLE"||ve==="LINK"&&D.rel.toLowerCase()==="stylesheet"||m.removeChild(D),D=X}}if(j===0){i.removeChild(C),rm(o);return}j--}else m==="$"||m==="$?"||m==="$!"?j++:g=m.charCodeAt(0)-48;else g=0;m=C}while(m);rm(o)}function Lv(i){var o=i.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var m=o;switch(o=o.nextSibling,m.nodeName){case"HTML":case"HEAD":case"BODY":Lv(m),Nr(m);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(m.rel.toLowerCase()==="stylesheet")continue}i.removeChild(m)}}function N8(i,o,m,g){for(;i.nodeType===1;){var j=m;if(i.nodeName.toLowerCase()!==o.toLowerCase()){if(!g&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(g){if(!i[Dt])switch(o){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(C=i.getAttribute("rel"),C==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(C!==j.rel||i.getAttribute("href")!==(j.href==null||j.href===""?null:j.href)||i.getAttribute("crossorigin")!==(j.crossOrigin==null?null:j.crossOrigin)||i.getAttribute("title")!==(j.title==null?null:j.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(C=i.getAttribute("src"),(C!==(j.src==null?null:j.src)||i.getAttribute("type")!==(j.type==null?null:j.type)||i.getAttribute("crossorigin")!==(j.crossOrigin==null?null:j.crossOrigin))&&C&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(o==="input"&&i.type==="hidden"){var C=j.name==null?null:""+j.name;if(j.type==="hidden"&&i.getAttribute("name")===C)return i}else return i;if(i=Ya(i.nextSibling),i===null)break}return null}function _8(i,o,m){if(o==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!m||(i=Ya(i.nextSibling),i===null))return null;return i}function Iv(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState==="complete"}function C8(i,o){var m=i.ownerDocument;if(i.data!=="$?"||m.readyState==="complete")o();else{var g=function(){o(),m.removeEventListener("DOMContentLoaded",g)};m.addEventListener("DOMContentLoaded",g),i._reactRetry=g}}function Ya(i){for(;i!=null;i=i.nextSibling){var o=i.nodeType;if(o===1||o===3)break;if(o===8){if(o=i.data,o==="$"||o==="$!"||o==="$?"||o==="F!"||o==="F")break;if(o==="/$")return null}}return i}var $v=null;function sk(i){i=i.previousSibling;for(var o=0;i;){if(i.nodeType===8){var m=i.data;if(m==="$"||m==="$!"||m==="$?"){if(o===0)return i;o--}else m==="/$"&&o++}i=i.previousSibling}return null}function ak(i,o,m){switch(o=Af(m),i){case"html":if(i=o.documentElement,!i)throw Error(s(452));return i;case"head":if(i=o.head,!i)throw Error(s(453));return i;case"body":if(i=o.body,!i)throw Error(s(454));return i;default:throw Error(s(451))}}function Ku(i){for(var o=i.attributes;o.length;)i.removeAttributeNode(o[0]);Nr(i)}var Sa=new Map,ik=new Set;function Ef(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var Xi=B.d;B.d={f:S8,r:k8,D:A8,C:E8,L:M8,m:T8,X:P8,S:O8,M:D8};function S8(){var i=Xi.f(),o=jf();return i||o}function k8(i){var o=In(i);o!==null&&o.tag===5&&o.type==="form"?SS(o):Xi.r(i)}var ud=typeof document>"u"?null:document;function lk(i,o,m){var g=ud;if(g&&typeof o=="string"&&o){var j=va(o);j='link[rel="'+i+'"][href="'+j+'"]',typeof m=="string"&&(j+='[crossorigin="'+m+'"]'),ik.has(j)||(ik.add(j),i={rel:i,crossOrigin:m,href:o},g.querySelector(j)===null&&(o=g.createElement("link"),ds(o,"link",i),Xn(o),g.head.appendChild(o)))}}function A8(i){Xi.D(i),lk("dns-prefetch",i,null)}function E8(i,o){Xi.C(i,o),lk("preconnect",i,o)}function M8(i,o,m){Xi.L(i,o,m);var g=ud;if(g&&i&&o){var j='link[rel="preload"][as="'+va(o)+'"]';o==="image"&&m&&m.imageSrcSet?(j+='[imagesrcset="'+va(m.imageSrcSet)+'"]',typeof m.imageSizes=="string"&&(j+='[imagesizes="'+va(m.imageSizes)+'"]')):j+='[href="'+va(i)+'"]';var C=j;switch(o){case"style":C=md(i);break;case"script":C=hd(i)}Sa.has(C)||(i=x({rel:"preload",href:o==="image"&&m&&m.imageSrcSet?void 0:i,as:o},m),Sa.set(C,i),g.querySelector(j)!==null||o==="style"&&g.querySelector(Gu(C))||o==="script"&&g.querySelector(Qu(C))||(o=g.createElement("link"),ds(o,"link",i),Xn(o),g.head.appendChild(o)))}}function T8(i,o){Xi.m(i,o);var m=ud;if(m&&i){var g=o&&typeof o.as=="string"?o.as:"script",j='link[rel="modulepreload"][as="'+va(g)+'"][href="'+va(i)+'"]',C=j;switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":C=hd(i)}if(!Sa.has(C)&&(i=x({rel:"modulepreload",href:i},o),Sa.set(C,i),m.querySelector(j)===null)){switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(m.querySelector(Qu(C)))return}g=m.createElement("link"),ds(g,"link",i),Xn(g),m.head.appendChild(g)}}}function O8(i,o,m){Xi.S(i,o,m);var g=ud;if(g&&i){var j=Oc(g).hoistableStyles,C=md(i);o=o||"default";var D=j.get(C);if(!D){var X={loading:0,preload:null};if(D=g.querySelector(Gu(C)))X.loading=5;else{i=x({rel:"stylesheet",href:i,"data-precedence":o},m),(m=Sa.get(C))&&Fv(i,m);var ve=D=g.createElement("link");Xn(ve),ds(ve,"link",i),ve._p=new Promise(function(Fe,Ge){ve.onload=Fe,ve.onerror=Ge}),ve.addEventListener("load",function(){X.loading|=1}),ve.addEventListener("error",function(){X.loading|=2}),X.loading|=4,Mf(D,o,g)}D={type:"stylesheet",instance:D,count:1,state:X},j.set(C,D)}}}function P8(i,o){Xi.X(i,o);var m=ud;if(m&&i){var g=Oc(m).hoistableScripts,j=hd(i),C=g.get(j);C||(C=m.querySelector(Qu(j)),C||(i=x({src:i,async:!0},o),(o=Sa.get(j))&&qv(i,o),C=m.createElement("script"),Xn(C),ds(C,"link",i),m.head.appendChild(C)),C={type:"script",instance:C,count:1,state:null},g.set(j,C))}}function D8(i,o){Xi.M(i,o);var m=ud;if(m&&i){var g=Oc(m).hoistableScripts,j=hd(i),C=g.get(j);C||(C=m.querySelector(Qu(j)),C||(i=x({src:i,async:!0,type:"module"},o),(o=Sa.get(j))&&qv(i,o),C=m.createElement("script"),Xn(C),ds(C,"link",i),m.head.appendChild(C)),C={type:"script",instance:C,count:1,state:null},g.set(j,C))}}function ok(i,o,m,g){var j=(j=he.current)?Ef(j):null;if(!j)throw Error(s(446));switch(i){case"meta":case"title":return null;case"style":return typeof m.precedence=="string"&&typeof m.href=="string"?(o=md(m.href),m=Oc(j).hoistableStyles,g=m.get(o),g||(g={type:"style",instance:null,count:0,state:null},m.set(o,g)),g):{type:"void",instance:null,count:0,state:null};case"link":if(m.rel==="stylesheet"&&typeof m.href=="string"&&typeof m.precedence=="string"){i=md(m.href);var C=Oc(j).hoistableStyles,D=C.get(i);if(D||(j=j.ownerDocument||j,D={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},C.set(i,D),(C=j.querySelector(Gu(i)))&&!C._p&&(D.instance=C,D.state.loading=5),Sa.has(i)||(m={rel:"preload",as:"style",href:m.href,crossOrigin:m.crossOrigin,integrity:m.integrity,media:m.media,hrefLang:m.hrefLang,referrerPolicy:m.referrerPolicy},Sa.set(i,m),C||R8(j,i,m,D.state))),o&&g===null)throw Error(s(528,""));return D}if(o&&g!==null)throw Error(s(529,""));return null;case"script":return o=m.async,m=m.src,typeof m=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=hd(m),m=Oc(j).hoistableScripts,g=m.get(o),g||(g={type:"script",instance:null,count:0,state:null},m.set(o,g)),g):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,i))}}function md(i){return'href="'+va(i)+'"'}function Gu(i){return'link[rel="stylesheet"]['+i+"]"}function ck(i){return x({},i,{"data-precedence":i.precedence,precedence:null})}function R8(i,o,m,g){i.querySelector('link[rel="preload"][as="style"]['+o+"]")?g.loading=1:(o=i.createElement("link"),g.preload=o,o.addEventListener("load",function(){return g.loading|=1}),o.addEventListener("error",function(){return g.loading|=2}),ds(o,"link",m),Xn(o),i.head.appendChild(o))}function hd(i){return'[src="'+va(i)+'"]'}function Qu(i){return"script[async]"+i}function dk(i,o,m){if(o.count++,o.instance===null)switch(o.type){case"style":var g=i.querySelector('style[data-href~="'+va(m.href)+'"]');if(g)return o.instance=g,Xn(g),g;var j=x({},m,{"data-href":m.href,"data-precedence":m.precedence,href:null,precedence:null});return g=(i.ownerDocument||i).createElement("style"),Xn(g),ds(g,"style",j),Mf(g,m.precedence,i),o.instance=g;case"stylesheet":j=md(m.href);var C=i.querySelector(Gu(j));if(C)return o.state.loading|=4,o.instance=C,Xn(C),C;g=ck(m),(j=Sa.get(j))&&Fv(g,j),C=(i.ownerDocument||i).createElement("link"),Xn(C);var D=C;return D._p=new Promise(function(X,ve){D.onload=X,D.onerror=ve}),ds(C,"link",g),o.state.loading|=4,Mf(C,m.precedence,i),o.instance=C;case"script":return C=hd(m.src),(j=i.querySelector(Qu(C)))?(o.instance=j,Xn(j),j):(g=m,(j=Sa.get(C))&&(g=x({},m),qv(g,j)),i=i.ownerDocument||i,j=i.createElement("script"),Xn(j),ds(j,"link",g),i.head.appendChild(j),o.instance=j);case"void":return null;default:throw Error(s(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(g=o.instance,o.state.loading|=4,Mf(g,m.precedence,i));return o.instance}function Mf(i,o,m){for(var g=m.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),j=g.length?g[g.length-1]:null,C=j,D=0;D<g.length;D++){var X=g[D];if(X.dataset.precedence===o)C=X;else if(C!==j)break}C?C.parentNode.insertBefore(i,C.nextSibling):(o=m.nodeType===9?m.head:m,o.insertBefore(i,o.firstChild))}function Fv(i,o){i.crossOrigin==null&&(i.crossOrigin=o.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=o.referrerPolicy),i.title==null&&(i.title=o.title)}function qv(i,o){i.crossOrigin==null&&(i.crossOrigin=o.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=o.referrerPolicy),i.integrity==null&&(i.integrity=o.integrity)}var Tf=null;function uk(i,o,m){if(Tf===null){var g=new Map,j=Tf=new Map;j.set(m,g)}else j=Tf,g=j.get(m),g||(g=new Map,j.set(m,g));if(g.has(i))return g;for(g.set(i,null),m=m.getElementsByTagName(i),j=0;j<m.length;j++){var C=m[j];if(!(C[Dt]||C[vt]||i==="link"&&C.getAttribute("rel")==="stylesheet")&&C.namespaceURI!=="http://www.w3.org/2000/svg"){var D=C.getAttribute(o)||"";D=i+D;var X=g.get(D);X?X.push(C):g.set(D,[C])}}return g}function mk(i,o,m){i=i.ownerDocument||i,i.head.insertBefore(m,o==="title"?i.querySelector("head > title"):null)}function L8(i,o,m){if(m===1||o.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return i=o.disabled,typeof o.precedence=="string"&&i==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function hk(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}var Xu=null;function I8(){}function $8(i,o,m){if(Xu===null)throw Error(s(475));var g=Xu;if(o.type==="stylesheet"&&(typeof m.media!="string"||matchMedia(m.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var j=md(m.href),C=i.querySelector(Gu(j));if(C){i=C._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(g.count++,g=Of.bind(g),i.then(g,g)),o.state.loading|=4,o.instance=C,Xn(C);return}C=i.ownerDocument||i,m=ck(m),(j=Sa.get(j))&&Fv(m,j),C=C.createElement("link"),Xn(C);var D=C;D._p=new Promise(function(X,ve){D.onload=X,D.onerror=ve}),ds(C,"link",m),o.instance=C}g.stylesheets===null&&(g.stylesheets=new Map),g.stylesheets.set(o,i),(i=o.state.preload)&&(o.state.loading&3)===0&&(g.count++,o=Of.bind(g),i.addEventListener("load",o),i.addEventListener("error",o))}}function F8(){if(Xu===null)throw Error(s(475));var i=Xu;return i.stylesheets&&i.count===0&&Uv(i,i.stylesheets),0<i.count?function(o){var m=setTimeout(function(){if(i.stylesheets&&Uv(i,i.stylesheets),i.unsuspend){var g=i.unsuspend;i.unsuspend=null,g()}},6e4);return i.unsuspend=o,function(){i.unsuspend=null,clearTimeout(m)}}:null}function Of(){if(this.count--,this.count===0){if(this.stylesheets)Uv(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var Pf=null;function Uv(i,o){i.stylesheets=null,i.unsuspend!==null&&(i.count++,Pf=new Map,o.forEach(q8,i),Pf=null,Of.call(i))}function q8(i,o){if(!(o.state.loading&4)){var m=Pf.get(i);if(m)var g=m.get(null);else{m=new Map,Pf.set(i,m);for(var j=i.querySelectorAll("link[data-precedence],style[data-precedence]"),C=0;C<j.length;C++){var D=j[C];(D.nodeName==="LINK"||D.getAttribute("media")!=="not all")&&(m.set(D.dataset.precedence,D),g=D)}g&&m.set(null,g)}j=o.instance,D=j.getAttribute("data-precedence"),C=m.get(D)||g,C===g&&m.set(null,j),m.set(D,j),this.count++,g=Of.bind(this),j.addEventListener("load",g),j.addEventListener("error",g),C?C.parentNode.insertBefore(j,C.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(j,i.firstChild)),o.state.loading|=4}}var Zu={$$typeof:k,Provider:null,Consumer:null,_currentValue:L,_currentValue2:L,_threadCount:0};function U8(i,o,m,g,j,C,D,X){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Yr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Yr(0),this.hiddenUpdates=Yr(null),this.identifierPrefix=g,this.onUncaughtError=j,this.onCaughtError=C,this.onRecoverableError=D,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=X,this.incompleteTransitions=new Map}function fk(i,o,m,g,j,C,D,X,ve,Fe,Ge,nt){return i=new U8(i,o,m,D,X,ve,Fe,nt),o=1,C===!0&&(o|=24),C=ea(3,null,null,o),i.current=C,C.stateNode=i,o=wy(),o.refCount++,i.pooledCache=o,o.refCount++,C.memoizedState={element:g,isDehydrated:m,cache:o},Sy(C),i}function xk(i){return i?(i=Wc,i):Wc}function pk(i,o,m,g,j,C){j=xk(j),g.context===null?g.context=j:g.pendingContext=j,g=Ol(o),g.payload={element:m},C=C===void 0?null:C,C!==null&&(g.callback=C),m=Pl(i,g,o),m!==null&&(aa(m,i,o),Au(m,i,o))}function gk(i,o){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var m=i.retryLane;i.retryLane=m!==0&&m<o?m:o}}function zv(i,o){gk(i,o),(i=i.alternate)&&gk(i,o)}function yk(i){if(i.tag===13){var o=Bc(i,67108864);o!==null&&aa(o,i,67108864),zv(i,67108864)}}var Df=!0;function z8(i,o,m,g){var j=M.T;M.T=null;var C=B.p;try{B.p=2,Bv(i,o,m,g)}finally{B.p=C,M.T=j}}function B8(i,o,m,g){var j=M.T;M.T=null;var C=B.p;try{B.p=8,Bv(i,o,m,g)}finally{B.p=C,M.T=j}}function Bv(i,o,m,g){if(Df){var j=Wv(g);if(j===null)Mv(i,o,g,Rf,m),jk(i,g);else if(H8(j,i,o,m,g))g.stopPropagation();else if(jk(i,g),o&4&&-1<W8.indexOf(i)){for(;j!==null;){var C=In(j);if(C!==null)switch(C.tag){case 3:if(C=C.stateNode,C.current.memoizedState.isDehydrated){var D=xt(C.pendingLanes);if(D!==0){var X=C;for(X.pendingLanes|=2,X.entangledLanes|=2;D;){var ve=1<<31-Se(D);X.entanglements[1]|=ve,D&=~ve}pi(C),(Ir&6)===0&&(yf=lt()+500,Hu(0))}}break;case 13:X=Bc(C,2),X!==null&&aa(X,C,2),jf(),zv(C,2)}if(C=Wv(g),C===null&&Mv(i,o,g,Rf,m),C===j)break;j=C}j!==null&&g.stopPropagation()}else Mv(i,o,g,null,m)}}function Wv(i){return i=Gg(i),Hv(i)}var Rf=null;function Hv(i){if(Rf=null,i=pr(i),i!==null){var o=l(i);if(o===null)i=null;else{var m=o.tag;if(m===13){if(i=c(o),i!==null)return i;i=null}else if(m===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null)}}return Rf=i,null}function vk(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(yt()){case Re:return 2;case H:return 8;case Be:case st:return 32;case K:return 268435456;default:return 32}default:return 32}}var Vv=!1,Vl=null,Yl=null,Kl=null,Ju=new Map,em=new Map,Gl=[],W8="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function jk(i,o){switch(i){case"focusin":case"focusout":Vl=null;break;case"dragenter":case"dragleave":Yl=null;break;case"mouseover":case"mouseout":Kl=null;break;case"pointerover":case"pointerout":Ju.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":em.delete(o.pointerId)}}function tm(i,o,m,g,j,C){return i===null||i.nativeEvent!==C?(i={blockedOn:o,domEventName:m,eventSystemFlags:g,nativeEvent:C,targetContainers:[j]},o!==null&&(o=In(o),o!==null&&yk(o)),i):(i.eventSystemFlags|=g,o=i.targetContainers,j!==null&&o.indexOf(j)===-1&&o.push(j),i)}function H8(i,o,m,g,j){switch(o){case"focusin":return Vl=tm(Vl,i,o,m,g,j),!0;case"dragenter":return Yl=tm(Yl,i,o,m,g,j),!0;case"mouseover":return Kl=tm(Kl,i,o,m,g,j),!0;case"pointerover":var C=j.pointerId;return Ju.set(C,tm(Ju.get(C)||null,i,o,m,g,j)),!0;case"gotpointercapture":return C=j.pointerId,em.set(C,tm(em.get(C)||null,i,o,m,g,j)),!0}return!1}function bk(i){var o=pr(i.target);if(o!==null){var m=l(o);if(m!==null){if(o=m.tag,o===13){if(o=c(m),o!==null){i.blockedOn=o,$(i.priority,function(){if(m.tag===13){var g=sa();g=le(g);var j=Bc(m,g);j!==null&&aa(j,m,g),zv(m,g)}});return}}else if(o===3&&m.stateNode.current.memoizedState.isDehydrated){i.blockedOn=m.tag===3?m.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Lf(i){if(i.blockedOn!==null)return!1;for(var o=i.targetContainers;0<o.length;){var m=Wv(i.nativeEvent);if(m===null){m=i.nativeEvent;var g=new m.constructor(m.type,m);Kg=g,m.target.dispatchEvent(g),Kg=null}else return o=In(m),o!==null&&yk(o),i.blockedOn=m,!1;o.shift()}return!0}function wk(i,o,m){Lf(i)&&m.delete(o)}function V8(){Vv=!1,Vl!==null&&Lf(Vl)&&(Vl=null),Yl!==null&&Lf(Yl)&&(Yl=null),Kl!==null&&Lf(Kl)&&(Kl=null),Ju.forEach(wk),em.forEach(wk)}function If(i,o){i.blockedOn===o&&(i.blockedOn=null,Vv||(Vv=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,V8)))}var $f=null;function Nk(i){$f!==i&&($f=i,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){$f===i&&($f=null);for(var o=0;o<i.length;o+=3){var m=i[o],g=i[o+1],j=i[o+2];if(typeof g!="function"){if(Hv(g||m)===null)continue;break}var C=In(m);C!==null&&(i.splice(o,3),o-=3,Hy(C,{pending:!0,data:j,method:m.method,action:g},g,j))}}))}function rm(i){function o(ve){return If(ve,i)}Vl!==null&&If(Vl,i),Yl!==null&&If(Yl,i),Kl!==null&&If(Kl,i),Ju.forEach(o),em.forEach(o);for(var m=0;m<Gl.length;m++){var g=Gl[m];g.blockedOn===i&&(g.blockedOn=null)}for(;0<Gl.length&&(m=Gl[0],m.blockedOn===null);)bk(m),m.blockedOn===null&&Gl.shift();if(m=(i.ownerDocument||i).$$reactFormReplay,m!=null)for(g=0;g<m.length;g+=3){var j=m[g],C=m[g+1],D=j[dt]||null;if(typeof C=="function")D||Nk(m);else if(D){var X=null;if(C&&C.hasAttribute("formAction")){if(j=C,D=C[dt]||null)X=D.formAction;else if(Hv(j)!==null)continue}else X=D.action;typeof X=="function"?m[g+1]=X:(m.splice(g,3),g-=3),Nk(m)}}}function Yv(i){this._internalRoot=i}Ff.prototype.render=Yv.prototype.render=function(i){var o=this._internalRoot;if(o===null)throw Error(s(409));var m=o.current,g=sa();pk(m,g,i,o,null,null)},Ff.prototype.unmount=Yv.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var o=i.containerInfo;pk(i.current,2,null,i,null,null),jf(),o[zt]=null}};function Ff(i){this._internalRoot=i}Ff.prototype.unstable_scheduleHydration=function(i){if(i){var o=P();i={blockedOn:null,target:i,priority:o};for(var m=0;m<Gl.length&&o!==0&&o<Gl[m].priority;m++);Gl.splice(m,0,i),m===0&&bk(i)}};var _k=r.version;if(_k!=="19.1.1")throw Error(s(527,_k,"19.1.1"));B.findDOMNode=function(i){var o=i._reactInternals;if(o===void 0)throw typeof i.render=="function"?Error(s(188)):(i=Object.keys(i).join(","),Error(s(268,i)));return i=d(o),i=i!==null?h(i):null,i=i===null?null:i.stateNode,i};var Y8={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:M,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var qf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!qf.isDisabled&&qf.supportsFiber)try{Ae=qf.inject(Y8),je=qf}catch{}}return sm.createRoot=function(i,o){if(!a(i))throw Error(s(299));var m=!1,g="",j=qS,C=US,D=zS,X=null;return o!=null&&(o.unstable_strictMode===!0&&(m=!0),o.identifierPrefix!==void 0&&(g=o.identifierPrefix),o.onUncaughtError!==void 0&&(j=o.onUncaughtError),o.onCaughtError!==void 0&&(C=o.onCaughtError),o.onRecoverableError!==void 0&&(D=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(X=o.unstable_transitionCallbacks)),o=fk(i,1,!1,null,null,m,g,j,C,D,X,null),i[zt]=o.current,Ev(i),new Yv(o)},sm.hydrateRoot=function(i,o,m){if(!a(i))throw Error(s(299));var g=!1,j="",C=qS,D=US,X=zS,ve=null,Fe=null;return m!=null&&(m.unstable_strictMode===!0&&(g=!0),m.identifierPrefix!==void 0&&(j=m.identifierPrefix),m.onUncaughtError!==void 0&&(C=m.onUncaughtError),m.onCaughtError!==void 0&&(D=m.onCaughtError),m.onRecoverableError!==void 0&&(X=m.onRecoverableError),m.unstable_transitionCallbacks!==void 0&&(ve=m.unstable_transitionCallbacks),m.formState!==void 0&&(Fe=m.formState)),o=fk(i,1,!0,o,m??null,g,j,C,D,X,ve,Fe),o.context=xk(null),m=o.current,g=sa(),g=le(g),j=Ol(g),j.callback=null,Pl(m,j,g),m=g,o.current.lanes=m,Gn(o,m),pi(o),i[zt]=o.current,Ev(i),new Ff(o)},sm.version="19.1.1",sm}var Dk;function nU(){if(Dk)return Qv.exports;Dk=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(r){console.error(r)}}return t(),Qv.exports=rU(),Qv.exports}var sU=nU(),Vd=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},aU={setTimeout:(t,r)=>setTimeout(t,r),clearTimeout:t=>clearTimeout(t),setInterval:(t,r)=>setInterval(t,r),clearInterval:t=>clearInterval(t)},iU=class{#e=aU;#t=!1;setTimeoutProvider(t){this.#e=t}setTimeout(t,r){return this.#e.setTimeout(t,r)}clearTimeout(t){this.#e.clearTimeout(t)}setInterval(t,r){return this.#e.setInterval(t,r)}clearInterval(t){this.#e.clearInterval(t)}},Zo=new iU;function lU(t){setTimeout(t,0)}var uc=typeof window>"u"||"Deno"in globalThis;function Es(){}function oU(t,r){return typeof t=="function"?t(r):t}function s0(t){return typeof t=="number"&&t>=0&&t!==1/0}function fO(t,r){return Math.max(t+(r||0)-Date.now(),0)}function io(t,r){return typeof t=="function"?t(r):t}function Ta(t,r){return typeof t=="function"?t(r):t}function Rk(t,r){const{type:n="all",exact:s,fetchStatus:a,predicate:l,queryKey:c,stale:u}=t;if(c){if(s){if(r.queryHash!==Fw(c,r.options))return!1}else if(!Tm(r.queryKey,c))return!1}if(n!=="all"){const d=r.isActive();if(n==="active"&&!d||n==="inactive"&&d)return!1}return!(typeof u=="boolean"&&r.isStale()!==u||a&&a!==r.state.fetchStatus||l&&!l(r))}function Lk(t,r){const{exact:n,status:s,predicate:a,mutationKey:l}=t;if(l){if(!r.options.mutationKey)return!1;if(n){if(mc(r.options.mutationKey)!==mc(l))return!1}else if(!Tm(r.options.mutationKey,l))return!1}return!(s&&r.state.status!==s||a&&!a(r))}function Fw(t,r){return(r?.queryKeyHashFn||mc)(t)}function mc(t){return JSON.stringify(t,(r,n)=>a0(n)?Object.keys(n).sort().reduce((s,a)=>(s[a]=n[a],s),{}):n)}function Tm(t,r){return t===r?!0:typeof t!=typeof r?!1:t&&r&&typeof t=="object"&&typeof r=="object"?Object.keys(r).every(n=>Tm(t[n],r[n])):!1}var cU=Object.prototype.hasOwnProperty;function xO(t,r){if(t===r)return t;const n=Ik(t)&&Ik(r);if(!n&&!(a0(t)&&a0(r)))return r;const a=(n?t:Object.keys(t)).length,l=n?r:Object.keys(r),c=l.length,u=n?new Array(c):{};let d=0;for(let h=0;h<c;h++){const x=n?h:l[h],p=t[x],y=r[x];if(p===y){u[x]=p,(n?h<a:cU.call(t,x))&&d++;continue}if(p===null||y===null||typeof p!="object"||typeof y!="object"){u[x]=y;continue}const v=xO(p,y);u[x]=v,v===p&&d++}return a===c&&d===a?t:u}function Px(t,r){if(!r||Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}function Ik(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function a0(t){if(!$k(t))return!1;const r=t.constructor;if(r===void 0)return!0;const n=r.prototype;return!(!$k(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function $k(t){return Object.prototype.toString.call(t)==="[object Object]"}function dU(t){return new Promise(r=>{Zo.setTimeout(r,t)})}function i0(t,r,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,r):n.structuralSharing!==!1?xO(t,r):r}function uU(t,r,n=0){const s=[...t,r];return n&&s.length>n?s.slice(1):s}function mU(t,r,n=0){const s=[r,...t];return n&&s.length>n?s.slice(0,-1):s}var qw=Symbol();function pO(t,r){return!t.queryFn&&r?.initialPromise?()=>r.initialPromise:!t.queryFn||t.queryFn===qw?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function gO(t,r){return typeof t=="function"?t(...r):!!t}var hU=class extends Vd{#e;#t;#r;constructor(){super(),this.#r=t=>{if(!uc&&window.addEventListener){const r=()=>t();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}}}onSubscribe(){this.#t||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(t){this.#r=t,this.#t?.(),this.#t=t(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()})}setFocused(t){this.#e!==t&&(this.#e=t,this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(r=>{r(t)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},Uw=new hU;function l0(){let t,r;const n=new Promise((a,l)=>{t=a,r=l});n.status="pending",n.catch(()=>{});function s(a){Object.assign(n,a),delete n.resolve,delete n.reject}return n.resolve=a=>{s({status:"fulfilled",value:a}),t(a)},n.reject=a=>{s({status:"rejected",reason:a}),r(a)},n}var fU=lU;function xU(){let t=[],r=0,n=u=>{u()},s=u=>{u()},a=fU;const l=u=>{r?t.push(u):a(()=>{n(u)})},c=()=>{const u=t;t=[],u.length&&a(()=>{s(()=>{u.forEach(d=>{n(d)})})})};return{batch:u=>{let d;r++;try{d=u()}finally{r--,r||c()}return d},batchCalls:u=>(...d)=>{l(()=>{u(...d)})},schedule:l,setNotifyFunction:u=>{n=u},setBatchNotifyFunction:u=>{s=u},setScheduler:u=>{a=u}}}var zn=xU(),pU=class extends Vd{#e=!0;#t;#r;constructor(){super(),this.#r=t=>{if(!uc&&window.addEventListener){const r=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",n)}}}}onSubscribe(){this.#t||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(t){this.#r=t,this.#t?.(),this.#t=t(this.setOnline.bind(this))}setOnline(t){this.#e!==t&&(this.#e=t,this.listeners.forEach(n=>{n(t)}))}isOnline(){return this.#e}},Dx=new pU;function gU(t){return Math.min(1e3*2**t,3e4)}function yO(t){return(t??"online")==="online"?Dx.isOnline():!0}var o0=class extends Error{constructor(t){super("CancelledError"),this.revert=t?.revert,this.silent=t?.silent}};function vO(t){let r=!1,n=0,s;const a=l0(),l=()=>a.status!=="pending",c=b=>{if(!l()){const N=new o0(b);y(N),t.onCancel?.(N)}},u=()=>{r=!0},d=()=>{r=!1},h=()=>Uw.isFocused()&&(t.networkMode==="always"||Dx.isOnline())&&t.canRun(),x=()=>yO(t.networkMode)&&t.canRun(),p=b=>{l()||(s?.(),a.resolve(b))},y=b=>{l()||(s?.(),a.reject(b))},v=()=>new Promise(b=>{s=N=>{(l()||h())&&b(N)},t.onPause?.()}).then(()=>{s=void 0,l()||t.onContinue?.()}),w=()=>{if(l())return;let b;const N=n===0?t.initialPromise:void 0;try{b=N??t.fn()}catch(_){b=Promise.reject(_)}Promise.resolve(b).then(p).catch(_=>{if(l())return;const S=t.retry??(uc?0:3),k=t.retryDelay??gU,E=typeof k=="function"?k(n,_):k,A=S===!0||typeof S=="number"&&n<S||typeof S=="function"&&S(n,_);if(r||!A){y(_);return}n++,t.onFail?.(n,_),dU(E).then(()=>h()?void 0:v()).then(()=>{r?y(_):w()})})};return{promise:a,status:()=>a.status,cancel:c,continue:()=>(s?.(),a),cancelRetry:u,continueRetry:d,canStart:x,start:()=>(x()?w():v().then(w),a)}}var jO=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),s0(this.gcTime)&&(this.#e=Zo.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(uc?1/0:300*1e3))}clearGcTimeout(){this.#e&&(Zo.clearTimeout(this.#e),this.#e=void 0)}},yU=class extends jO{#e;#t;#r;#n;#s;#i;#l;constructor(t){super(),this.#l=!1,this.#i=t.defaultOptions,this.setOptions(t.options),this.observers=[],this.#n=t.client,this.#r=this.#n.getQueryCache(),this.queryKey=t.queryKey,this.queryHash=t.queryHash,this.#e=Fk(this.options),this.state=t.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#s?.promise}setOptions(t){if(this.options={...this.#i,...t},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const r=Fk(this.options);r.data!==void 0&&(this.setData(r.data,{updatedAt:r.dataUpdatedAt,manual:!0}),this.#e=r)}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#r.remove(this)}setData(t,r){const n=i0(this.state.data,t,this.options);return this.#a({data:n,type:"success",dataUpdatedAt:r?.updatedAt,manual:r?.manual}),n}setState(t,r){this.#a({type:"setState",state:t,setStateOptions:r})}cancel(t){const r=this.#s?.promise;return this.#s?.cancel(t),r?r.then(Es).catch(Es):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(t=>Ta(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===qw||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>io(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!fO(this.state.dataUpdatedAt,t)}onFocus(){this.observers.find(r=>r.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#s?.continue()}onOnline(){this.observers.find(r=>r.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#s?.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),this.#r.notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(r=>r!==t),this.observers.length||(this.#s&&(this.#l?this.#s.cancel({revert:!0}):this.#s.cancelRetry()),this.scheduleGc()),this.#r.notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#a({type:"invalidate"})}async fetch(t,r){if(this.state.fetchStatus!=="idle"&&this.#s?.status()!=="rejected"){if(this.state.data!==void 0&&r?.cancelRefetch)this.cancel({silent:!0});else if(this.#s)return this.#s.continueRetry(),this.#s.promise}if(t&&this.setOptions(t),!this.options.queryFn){const u=this.observers.find(d=>d.options.queryFn);u&&this.setOptions(u.options)}const n=new AbortController,s=u=>{Object.defineProperty(u,"signal",{enumerable:!0,get:()=>(this.#l=!0,n.signal)})},a=()=>{const u=pO(this.options,r),h=(()=>{const x={client:this.#n,queryKey:this.queryKey,meta:this.meta};return s(x),x})();return this.#l=!1,this.options.persister?this.options.persister(u,h,this):u(h)},c=(()=>{const u={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:this.#n,state:this.state,fetchFn:a};return s(u),u})();this.options.behavior?.onFetch(c,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==c.fetchOptions?.meta)&&this.#a({type:"fetch",meta:c.fetchOptions?.meta}),this.#s=vO({initialPromise:r?.initialPromise,fn:c.fetchFn,onCancel:u=>{u instanceof o0&&u.revert&&this.setState({...this.#t,fetchStatus:"idle"}),n.abort()},onFail:(u,d)=>{this.#a({type:"failed",failureCount:u,error:d})},onPause:()=>{this.#a({type:"pause"})},onContinue:()=>{this.#a({type:"continue"})},retry:c.options.retry,retryDelay:c.options.retryDelay,networkMode:c.options.networkMode,canRun:()=>!0});try{const u=await this.#s.start();if(u===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(u),this.#r.config.onSuccess?.(u,this),this.#r.config.onSettled?.(u,this.state.error,this),u}catch(u){if(u instanceof o0){if(u.silent)return this.#s.promise;if(u.revert){if(this.state.data===void 0)throw u;return this.state.data}}throw this.#a({type:"error",error:u}),this.#r.config.onError?.(u,this),this.#r.config.onSettled?.(this.state.data,u,this),u}finally{this.scheduleGc()}}#a(t){const r=n=>{switch(t.type){case"failed":return{...n,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...bO(n.data,this.options),fetchMeta:t.meta??null};case"success":const s={...n,data:t.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#t=t.manual?s:void 0,s;case"error":const a=t.error;return{...n,error:a,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:a,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...t.state}}};this.state=r(this.state),zn.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),this.#r.notify({query:this,type:"updated",action:t})})}};function bO(t,r){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:yO(r.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function Fk(t){const r=typeof t.initialData=="function"?t.initialData():t.initialData,n=r!==void 0,s=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:r,dataUpdateCount:0,dataUpdatedAt:n?s??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var vU=class extends Vd{constructor(t,r){super(),this.options=r,this.#e=t,this.#a=null,this.#l=l0(),this.bindMethods(),this.setOptions(r)}#e;#t=void 0;#r=void 0;#n=void 0;#s;#i;#l;#a;#x;#m;#h;#c;#d;#o;#f=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#t.addObserver(this),qk(this.#t,this.options)?this.#u():this.updateResult(),this.#v())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return c0(this.#t,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return c0(this.#t,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#j(),this.#b(),this.#t.removeObserver(this)}setOptions(t){const r=this.options,n=this.#t;if(this.options=this.#e.defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Ta(this.options.enabled,this.#t)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#w(),this.#t.setOptions(this.options),r._defaulted&&!Px(this.options,r)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#t,observer:this});const s=this.hasListeners();s&&Uk(this.#t,n,this.options,r)&&this.#u(),this.updateResult(),s&&(this.#t!==n||Ta(this.options.enabled,this.#t)!==Ta(r.enabled,this.#t)||io(this.options.staleTime,this.#t)!==io(r.staleTime,this.#t))&&this.#p();const a=this.#g();s&&(this.#t!==n||Ta(this.options.enabled,this.#t)!==Ta(r.enabled,this.#t)||a!==this.#o)&&this.#y(a)}getOptimisticResult(t){const r=this.#e.getQueryCache().build(this.#e,t),n=this.createResult(r,t);return bU(this,n)&&(this.#n=n,this.#i=this.options,this.#s=this.#t.state),n}getCurrentResult(){return this.#n}trackResult(t,r){return new Proxy(t,{get:(n,s)=>(this.trackProp(s),r?.(s),s==="promise"&&!this.options.experimental_prefetchInRender&&this.#l.status==="pending"&&this.#l.reject(new Error("experimental_prefetchInRender feature flag is not enabled")),Reflect.get(n,s))})}trackProp(t){this.#f.add(t)}getCurrentQuery(){return this.#t}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const r=this.#e.defaultQueryOptions(t),n=this.#e.getQueryCache().build(this.#e,r);return n.fetch().then(()=>this.createResult(n,r))}fetch(t){return this.#u({...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#n))}#u(t){this.#w();let r=this.#t.fetch(this.options,t);return t?.throwOnError||(r=r.catch(Es)),r}#p(){this.#j();const t=io(this.options.staleTime,this.#t);if(uc||this.#n.isStale||!s0(t))return;const n=fO(this.#n.dataUpdatedAt,t)+1;this.#c=Zo.setTimeout(()=>{this.#n.isStale||this.updateResult()},n)}#g(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#t):this.options.refetchInterval)??!1}#y(t){this.#b(),this.#o=t,!(uc||Ta(this.options.enabled,this.#t)===!1||!s0(this.#o)||this.#o===0)&&(this.#d=Zo.setInterval(()=>{(this.options.refetchIntervalInBackground||Uw.isFocused())&&this.#u()},this.#o))}#v(){this.#p(),this.#y(this.#g())}#j(){this.#c&&(Zo.clearTimeout(this.#c),this.#c=void 0)}#b(){this.#d&&(Zo.clearInterval(this.#d),this.#d=void 0)}createResult(t,r){const n=this.#t,s=this.options,a=this.#n,l=this.#s,c=this.#i,d=t!==n?t.state:this.#r,{state:h}=t;let x={...h},p=!1,y;if(r._optimisticResults){const R=this.hasListeners(),G=!R&&qk(t,r),J=R&&Uk(t,n,r,s);(G||J)&&(x={...x,...bO(h.data,t.options)}),r._optimisticResults==="isRestoring"&&(x.fetchStatus="idle")}let{error:v,errorUpdatedAt:w,status:b}=x;y=x.data;let N=!1;if(r.placeholderData!==void 0&&y===void 0&&b==="pending"){let R;a?.isPlaceholderData&&r.placeholderData===c?.placeholderData?(R=a.data,N=!0):R=typeof r.placeholderData=="function"?r.placeholderData(this.#h?.state.data,this.#h):r.placeholderData,R!==void 0&&(b="success",y=i0(a?.data,R,r),p=!0)}if(r.select&&y!==void 0&&!N)if(a&&y===l?.data&&r.select===this.#x)y=this.#m;else try{this.#x=r.select,y=r.select(y),y=i0(a?.data,y,r),this.#m=y,this.#a=null}catch(R){this.#a=R}this.#a&&(v=this.#a,y=this.#m,w=Date.now(),b="error");const _=x.fetchStatus==="fetching",S=b==="pending",k=b==="error",E=S&&_,A=y!==void 0,z={status:b,fetchStatus:x.fetchStatus,isPending:S,isSuccess:b==="success",isError:k,isInitialLoading:E,isLoading:E,data:y,dataUpdatedAt:x.dataUpdatedAt,error:v,errorUpdatedAt:w,failureCount:x.fetchFailureCount,failureReason:x.fetchFailureReason,errorUpdateCount:x.errorUpdateCount,isFetched:x.dataUpdateCount>0||x.errorUpdateCount>0,isFetchedAfterMount:x.dataUpdateCount>d.dataUpdateCount||x.errorUpdateCount>d.errorUpdateCount,isFetching:_,isRefetching:_&&!S,isLoadingError:k&&!A,isPaused:x.fetchStatus==="paused",isPlaceholderData:p,isRefetchError:k&&A,isStale:zw(t,r),refetch:this.refetch,promise:this.#l,isEnabled:Ta(r.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const R=ie=>{z.status==="error"?ie.reject(z.error):z.data!==void 0&&ie.resolve(z.data)},G=()=>{const ie=this.#l=z.promise=l0();R(ie)},J=this.#l;switch(J.status){case"pending":t.queryHash===n.queryHash&&R(J);break;case"fulfilled":(z.status==="error"||z.data!==J.value)&&G();break;case"rejected":(z.status!=="error"||z.error!==J.reason)&&G();break}}return z}updateResult(){const t=this.#n,r=this.createResult(this.#t,this.options);if(this.#s=this.#t.state,this.#i=this.options,this.#s.data!==void 0&&(this.#h=this.#t),Px(r,t))return;this.#n=r;const n=()=>{if(!t)return!0;const{notifyOnChangeProps:s}=this.options,a=typeof s=="function"?s():s;if(a==="all"||!a&&!this.#f.size)return!0;const l=new Set(a??this.#f);return this.options.throwOnError&&l.add("error"),Object.keys(this.#n).some(c=>{const u=c;return this.#n[u]!==t[u]&&l.has(u)})};this.#N({listeners:n()})}#w(){const t=this.#e.getQueryCache().build(this.#e,this.options);if(t===this.#t)return;const r=this.#t;this.#t=t,this.#r=t.state,this.hasListeners()&&(r?.removeObserver(this),t.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#v()}#N(t){zn.batch(()=>{t.listeners&&this.listeners.forEach(r=>{r(this.#n)}),this.#e.getQueryCache().notify({query:this.#t,type:"observerResultsUpdated"})})}};function jU(t,r){return Ta(r.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&r.retryOnMount===!1)}function qk(t,r){return jU(t,r)||t.state.data!==void 0&&c0(t,r,r.refetchOnMount)}function c0(t,r,n){if(Ta(r.enabled,t)!==!1&&io(r.staleTime,t)!=="static"){const s=typeof n=="function"?n(t):n;return s==="always"||s!==!1&&zw(t,r)}return!1}function Uk(t,r,n,s){return(t!==r||Ta(s.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&zw(t,n)}function zw(t,r){return Ta(r.enabled,t)!==!1&&t.isStaleByTime(io(r.staleTime,t))}function bU(t,r){return!Px(t.getCurrentResult(),r)}function zk(t){return{onFetch:(r,n)=>{const s=r.options,a=r.fetchOptions?.meta?.fetchMore?.direction,l=r.state.data?.pages||[],c=r.state.data?.pageParams||[];let u={pages:[],pageParams:[]},d=0;const h=async()=>{let x=!1;const p=w=>{Object.defineProperty(w,"signal",{enumerable:!0,get:()=>(r.signal.aborted?x=!0:r.signal.addEventListener("abort",()=>{x=!0}),r.signal)})},y=pO(r.options,r.fetchOptions),v=async(w,b,N)=>{if(x)return Promise.reject();if(b==null&&w.pages.length)return Promise.resolve(w);const S=(()=>{const O={client:r.client,queryKey:r.queryKey,pageParam:b,direction:N?"backward":"forward",meta:r.options.meta};return p(O),O})(),k=await y(S),{maxPages:E}=r.options,A=N?mU:uU;return{pages:A(w.pages,k,E),pageParams:A(w.pageParams,b,E)}};if(a&&l.length){const w=a==="backward",b=w?wU:Bk,N={pages:l,pageParams:c},_=b(s,N);u=await v(N,_,w)}else{const w=t??l.length;do{const b=d===0?c[0]??s.initialPageParam:Bk(s,u);if(d>0&&b==null)break;u=await v(u,b),d++}while(d<w)}return u};r.options.persister?r.fetchFn=()=>r.options.persister?.(h,{client:r.client,queryKey:r.queryKey,meta:r.options.meta,signal:r.signal},n):r.fetchFn=h}}}function Bk(t,{pages:r,pageParams:n}){const s=r.length-1;return r.length>0?t.getNextPageParam(r[s],r,n[s],n):void 0}function wU(t,{pages:r,pageParams:n}){return r.length>0?t.getPreviousPageParam?.(r[0],r,n[0],n):void 0}var NU=class extends jO{#e;#t;#r;constructor(t){super(),this.mutationId=t.mutationId,this.#t=t.mutationCache,this.#e=[],this.state=t.state||wO(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){this.#e.includes(t)||(this.#e.push(t),this.clearGcTimeout(),this.#t.notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){this.#e=this.#e.filter(r=>r!==t),this.scheduleGc(),this.#t.notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){this.#e.length||(this.state.status==="pending"?this.scheduleGc():this.#t.remove(this))}continue(){return this.#r?.continue()??this.execute(this.state.variables)}async execute(t){const r=()=>{this.#n({type:"continue"})};this.#r=vO({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(a,l)=>{this.#n({type:"failed",failureCount:a,error:l})},onPause:()=>{this.#n({type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#t.canRun(this)});const n=this.state.status==="pending",s=!this.#r.canStart();try{if(n)r();else{this.#n({type:"pending",variables:t,isPaused:s}),await this.#t.config.onMutate?.(t,this);const l=await this.options.onMutate?.(t);l!==this.state.context&&this.#n({type:"pending",context:l,variables:t,isPaused:s})}const a=await this.#r.start();return await this.#t.config.onSuccess?.(a,t,this.state.context,this),await this.options.onSuccess?.(a,t,this.state.context),await this.#t.config.onSettled?.(a,null,this.state.variables,this.state.context,this),await this.options.onSettled?.(a,null,t,this.state.context),this.#n({type:"success",data:a}),a}catch(a){try{throw await this.#t.config.onError?.(a,t,this.state.context,this),await this.options.onError?.(a,t,this.state.context),await this.#t.config.onSettled?.(void 0,a,this.state.variables,this.state.context,this),await this.options.onSettled?.(void 0,a,t,this.state.context),a}finally{this.#n({type:"error",error:a})}}finally{this.#t.runNext(this)}}#n(t){const r=n=>{switch(t.type){case"failed":return{...n,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...n,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:t.error,failureCount:n.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=r(this.state),zn.batch(()=>{this.#e.forEach(n=>{n.onMutationUpdate(t)}),this.#t.notify({mutation:this,type:"updated",action:t})})}};function wO(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var _U=class extends Vd{constructor(t={}){super(),this.config=t,this.#e=new Set,this.#t=new Map,this.#r=0}#e;#t;#r;build(t,r,n){const s=new NU({mutationCache:this,mutationId:++this.#r,options:t.defaultMutationOptions(r),state:n});return this.add(s),s}add(t){this.#e.add(t);const r=Uf(t);if(typeof r=="string"){const n=this.#t.get(r);n?n.push(t):this.#t.set(r,[t])}this.notify({type:"added",mutation:t})}remove(t){if(this.#e.delete(t)){const r=Uf(t);if(typeof r=="string"){const n=this.#t.get(r);if(n)if(n.length>1){const s=n.indexOf(t);s!==-1&&n.splice(s,1)}else n[0]===t&&this.#t.delete(r)}}this.notify({type:"removed",mutation:t})}canRun(t){const r=Uf(t);if(typeof r=="string"){const s=this.#t.get(r)?.find(a=>a.state.status==="pending");return!s||s===t}else return!0}runNext(t){const r=Uf(t);return typeof r=="string"?this.#t.get(r)?.find(s=>s!==t&&s.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){zn.batch(()=>{this.#e.forEach(t=>{this.notify({type:"removed",mutation:t})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(t){const r={exact:!0,...t};return this.getAll().find(n=>Lk(r,n))}findAll(t={}){return this.getAll().filter(r=>Lk(t,r))}notify(t){zn.batch(()=>{this.listeners.forEach(r=>{r(t)})})}resumePausedMutations(){const t=this.getAll().filter(r=>r.state.isPaused);return zn.batch(()=>Promise.all(t.map(r=>r.continue().catch(Es))))}};function Uf(t){return t.options.scope?.id}var CU=class extends Vd{#e;#t=void 0;#r;#n;constructor(r,n){super(),this.#e=r,this.setOptions(n),this.bindMethods(),this.#s()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(r){const n=this.options;this.options=this.#e.defaultMutationOptions(r),Px(this.options,n)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#r,observer:this}),n?.mutationKey&&this.options.mutationKey&&mc(n.mutationKey)!==mc(this.options.mutationKey)?this.reset():this.#r?.state.status==="pending"&&this.#r.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#r?.removeObserver(this)}onMutationUpdate(r){this.#s(),this.#i(r)}getCurrentResult(){return this.#t}reset(){this.#r?.removeObserver(this),this.#r=void 0,this.#s(),this.#i()}mutate(r,n){return this.#n=n,this.#r?.removeObserver(this),this.#r=this.#e.getMutationCache().build(this.#e,this.options),this.#r.addObserver(this),this.#r.execute(r)}#s(){const r=this.#r?.state??wO();this.#t={...r,isPending:r.status==="pending",isSuccess:r.status==="success",isError:r.status==="error",isIdle:r.status==="idle",mutate:this.mutate,reset:this.reset}}#i(r){zn.batch(()=>{if(this.#n&&this.hasListeners()){const n=this.#t.variables,s=this.#t.context;r?.type==="success"?(this.#n.onSuccess?.(r.data,n,s),this.#n.onSettled?.(r.data,null,n,s)):r?.type==="error"&&(this.#n.onError?.(r.error,n,s),this.#n.onSettled?.(void 0,r.error,n,s))}this.listeners.forEach(n=>{n(this.#t)})})}},SU=class extends Vd{constructor(t={}){super(),this.config=t,this.#e=new Map}#e;build(t,r,n){const s=r.queryKey,a=r.queryHash??Fw(s,r);let l=this.get(a);return l||(l=new yU({client:t,queryKey:s,queryHash:a,options:t.defaultQueryOptions(r),state:n,defaultOptions:t.getQueryDefaults(s)}),this.add(l)),l}add(t){this.#e.has(t.queryHash)||(this.#e.set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const r=this.#e.get(t.queryHash);r&&(t.destroy(),r===t&&this.#e.delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){zn.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return this.#e.get(t)}getAll(){return[...this.#e.values()]}find(t){const r={exact:!0,...t};return this.getAll().find(n=>Rk(r,n))}findAll(t={}){const r=this.getAll();return Object.keys(t).length>0?r.filter(n=>Rk(t,n)):r}notify(t){zn.batch(()=>{this.listeners.forEach(r=>{r(t)})})}onFocus(){zn.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){zn.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},kU=class{#e;#t;#r;#n;#s;#i;#l;#a;constructor(t={}){this.#e=t.queryCache||new SU,this.#t=t.mutationCache||new _U,this.#r=t.defaultOptions||{},this.#n=new Map,this.#s=new Map,this.#i=0}mount(){this.#i++,this.#i===1&&(this.#l=Uw.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#a=Dx.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#i--,this.#i===0&&(this.#l?.(),this.#l=void 0,this.#a?.(),this.#a=void 0)}isFetching(t){return this.#e.findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return this.#t.findAll({...t,status:"pending"}).length}getQueryData(t){const r=this.defaultQueryOptions({queryKey:t});return this.#e.get(r.queryHash)?.state.data}ensureQueryData(t){const r=this.defaultQueryOptions(t),n=this.#e.build(this,r),s=n.state.data;return s===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(io(r.staleTime,n))&&this.prefetchQuery(r),Promise.resolve(s))}getQueriesData(t){return this.#e.findAll(t).map(({queryKey:r,state:n})=>{const s=n.data;return[r,s]})}setQueryData(t,r,n){const s=this.defaultQueryOptions({queryKey:t}),l=this.#e.get(s.queryHash)?.state.data,c=oU(r,l);if(c!==void 0)return this.#e.build(this,s).setData(c,{...n,manual:!0})}setQueriesData(t,r,n){return zn.batch(()=>this.#e.findAll(t).map(({queryKey:s})=>[s,this.setQueryData(s,r,n)]))}getQueryState(t){const r=this.defaultQueryOptions({queryKey:t});return this.#e.get(r.queryHash)?.state}removeQueries(t){const r=this.#e;zn.batch(()=>{r.findAll(t).forEach(n=>{r.remove(n)})})}resetQueries(t,r){const n=this.#e;return zn.batch(()=>(n.findAll(t).forEach(s=>{s.reset()}),this.refetchQueries({type:"active",...t},r)))}cancelQueries(t,r={}){const n={revert:!0,...r},s=zn.batch(()=>this.#e.findAll(t).map(a=>a.cancel(n)));return Promise.all(s).then(Es).catch(Es)}invalidateQueries(t,r={}){return zn.batch(()=>(this.#e.findAll(t).forEach(n=>{n.invalidate()}),t?.refetchType==="none"?Promise.resolve():this.refetchQueries({...t,type:t?.refetchType??t?.type??"active"},r)))}refetchQueries(t,r={}){const n={...r,cancelRefetch:r.cancelRefetch??!0},s=zn.batch(()=>this.#e.findAll(t).filter(a=>!a.isDisabled()&&!a.isStatic()).map(a=>{let l=a.fetch(void 0,n);return n.throwOnError||(l=l.catch(Es)),a.state.fetchStatus==="paused"?Promise.resolve():l}));return Promise.all(s).then(Es)}fetchQuery(t){const r=this.defaultQueryOptions(t);r.retry===void 0&&(r.retry=!1);const n=this.#e.build(this,r);return n.isStaleByTime(io(r.staleTime,n))?n.fetch(r):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Es).catch(Es)}fetchInfiniteQuery(t){return t.behavior=zk(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Es).catch(Es)}ensureInfiniteQueryData(t){return t.behavior=zk(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return Dx.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#r}setDefaultOptions(t){this.#r=t}setQueryDefaults(t,r){this.#n.set(mc(t),{queryKey:t,defaultOptions:r})}getQueryDefaults(t){const r=[...this.#n.values()],n={};return r.forEach(s=>{Tm(t,s.queryKey)&&Object.assign(n,s.defaultOptions)}),n}setMutationDefaults(t,r){this.#s.set(mc(t),{mutationKey:t,defaultOptions:r})}getMutationDefaults(t){const r=[...this.#s.values()],n={};return r.forEach(s=>{Tm(t,s.mutationKey)&&Object.assign(n,s.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const r={...this.#r.queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return r.queryHash||(r.queryHash=Fw(r.queryKey,r)),r.refetchOnReconnect===void 0&&(r.refetchOnReconnect=r.networkMode!=="always"),r.throwOnError===void 0&&(r.throwOnError=!!r.suspense),!r.networkMode&&r.persister&&(r.networkMode="offlineFirst"),r.queryFn===qw&&(r.enabled=!1),r}defaultMutationOptions(t){return t?._defaulted?t:{...this.#r.mutations,...t?.mutationKey&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},NO=f.createContext(void 0),Bw=t=>{const r=f.useContext(NO);if(!r)throw new Error("No QueryClient set, use QueryClientProvider to set one");return r},AU=({client:t,children:r})=>(f.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),e.jsx(NO.Provider,{value:t,children:r})),_O=f.createContext(!1),EU=()=>f.useContext(_O);_O.Provider;function MU(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var TU=f.createContext(MU()),OU=()=>f.useContext(TU),PU=(t,r)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(r.isReset()||(t.retryOnMount=!1))},DU=t=>{f.useEffect(()=>{t.clearReset()},[t])},RU=({result:t,errorResetBoundary:r,throwOnError:n,query:s,suspense:a})=>t.isError&&!r.isReset()&&!t.isFetching&&s&&(a&&t.data===void 0||gO(n,[t.error,s])),LU=t=>{if(t.suspense){const n=a=>a==="static"?a:Math.max(a??1e3,1e3),s=t.staleTime;t.staleTime=typeof s=="function"?(...a)=>n(s(...a)):n(s),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},IU=(t,r)=>t.isLoading&&t.isFetching&&!r,$U=(t,r)=>t?.suspense&&r.isPending,Wk=(t,r,n)=>r.fetchOptimistic(t).catch(()=>{n.clearReset()});function FU(t,r,n){const s=EU(),a=OU(),l=Bw(),c=l.defaultQueryOptions(t);l.getDefaultOptions().queries?._experimental_beforeQuery?.(c),c._optimisticResults=s?"isRestoring":"optimistic",LU(c),PU(c,a),DU(a);const u=!l.getQueryCache().get(c.queryHash),[d]=f.useState(()=>new r(l,c)),h=d.getOptimisticResult(c),x=!s&&t.subscribed!==!1;if(f.useSyncExternalStore(f.useCallback(p=>{const y=x?d.subscribe(zn.batchCalls(p)):Es;return d.updateResult(),y},[d,x]),()=>d.getCurrentResult(),()=>d.getCurrentResult()),f.useEffect(()=>{d.setOptions(c)},[c,d]),$U(c,h))throw Wk(c,d,a);if(RU({result:h,errorResetBoundary:a,throwOnError:c.throwOnError,query:l.getQueryCache().get(c.queryHash),suspense:c.suspense}))throw h.error;return l.getDefaultOptions().queries?._experimental_afterQuery?.(c,h),c.experimental_prefetchInRender&&!uc&&IU(h,s)&&(u?Wk(c,d,a):l.getQueryCache().get(c.queryHash)?.promise)?.catch(Es).finally(()=>{d.updateResult()}),c.notifyOnChangeProps?h:d.trackResult(h)}function jr(t,r){return FU(t,vU)}function fd(t,r){const n=Bw(),[s]=f.useState(()=>new CU(n,t));f.useEffect(()=>{s.setOptions(t)},[s,t]);const a=f.useSyncExternalStore(f.useCallback(c=>s.subscribe(zn.batchCalls(c)),[s]),()=>s.getCurrentResult(),()=>s.getCurrentResult()),l=f.useCallback((c,u)=>{s.mutate(c,u).catch(Es)},[s]);if(a.error&&gO(s.options.throwOnError,[a.error]))throw a.error;return{...a,mutate:l,mutateAsync:a.mutate}}/**
 * react-router v7.8.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Hk="popstate";function qU(t={}){function r(s,a){let{pathname:l,search:c,hash:u}=s.location;return d0("",{pathname:l,search:c,hash:u},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(s,a){return typeof a=="string"?a:Om(a)}return zU(r,n,null,t)}function ln(t,r){if(t===!1||t===null||typeof t>"u")throw new Error(r)}function Ia(t,r){if(!t){typeof console<"u"&&console.warn(r);try{throw new Error(r)}catch{}}}function UU(){return Math.random().toString(36).substring(2,10)}function Vk(t,r){return{usr:t.state,key:t.key,idx:r}}function d0(t,r,n=null,s){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof r=="string"?Yd(r):r,state:n,key:r&&r.key||s||UU()}}function Om({pathname:t="/",search:r="",hash:n=""}){return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Yd(t){let r={};if(t){let n=t.indexOf("#");n>=0&&(r.hash=t.substring(n),t=t.substring(0,n));let s=t.indexOf("?");s>=0&&(r.search=t.substring(s),t=t.substring(0,s)),t&&(r.pathname=t)}return r}function zU(t,r,n,s={}){let{window:a=document.defaultView,v5Compat:l=!1}=s,c=a.history,u="POP",d=null,h=x();h==null&&(h=0,c.replaceState({...c.state,idx:h},""));function x(){return(c.state||{idx:null}).idx}function p(){u="POP";let N=x(),_=N==null?null:N-h;h=N,d&&d({action:u,location:b.location,delta:_})}function y(N,_){u="PUSH";let S=d0(b.location,N,_);h=x()+1;let k=Vk(S,h),E=b.createHref(S);try{c.pushState(k,"",E)}catch(A){if(A instanceof DOMException&&A.name==="DataCloneError")throw A;a.location.assign(E)}l&&d&&d({action:u,location:b.location,delta:1})}function v(N,_){u="REPLACE";let S=d0(b.location,N,_);h=x();let k=Vk(S,h),E=b.createHref(S);c.replaceState(k,"",E),l&&d&&d({action:u,location:b.location,delta:0})}function w(N){return BU(N)}let b={get action(){return u},get location(){return t(a,c)},listen(N){if(d)throw new Error("A history only accepts one active listener");return a.addEventListener(Hk,p),d=N,()=>{a.removeEventListener(Hk,p),d=null}},createHref(N){return r(a,N)},createURL:w,encodeLocation(N){let _=w(N);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:y,replace:v,go(N){return c.go(N)}};return b}function BU(t,r=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),ln(n,"No window.location.(origin|href) available to create URL");let s=typeof t=="string"?t:Om(t);return s=s.replace(/ $/,"%20"),!r&&s.startsWith("//")&&(s=n+s),new URL(s,n)}function CO(t,r,n="/"){return WU(t,r,n,!1)}function WU(t,r,n,s){let a=typeof r=="string"?Yd(r):r,l=ol(a.pathname||"/",n);if(l==null)return null;let c=SO(t);HU(c);let u=null;for(let d=0;u==null&&d<c.length;++d){let h=rz(l);u=ez(c[d],h,s)}return u}function SO(t,r=[],n=[],s="",a=!1){let l=(c,u,d=a,h)=>{let x={relativePath:h===void 0?c.path||"":h,caseSensitive:c.caseSensitive===!0,childrenIndex:u,route:c};if(x.relativePath.startsWith("/")){if(!x.relativePath.startsWith(s)&&d)return;ln(x.relativePath.startsWith(s),`Absolute route path "${x.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),x.relativePath=x.relativePath.slice(s.length)}let p=nl([s,x.relativePath]),y=n.concat(x);c.children&&c.children.length>0&&(ln(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),SO(c.children,r,y,p,d)),!(c.path==null&&!c.index)&&r.push({path:p,score:ZU(p,c.index),routesMeta:y})};return t.forEach((c,u)=>{if(c.path===""||!c.path?.includes("?"))l(c,u);else for(let d of kO(c.path))l(c,u,!0,d)}),r}function kO(t){let r=t.split("/");if(r.length===0)return[];let[n,...s]=r,a=n.endsWith("?"),l=n.replace(/\?$/,"");if(s.length===0)return a?[l,""]:[l];let c=kO(s.join("/")),u=[];return u.push(...c.map(d=>d===""?l:[l,d].join("/"))),a&&u.push(...c),u.map(d=>t.startsWith("/")&&d===""?"/":d)}function HU(t){t.sort((r,n)=>r.score!==n.score?n.score-r.score:JU(r.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}var VU=/^:[\w-]+$/,YU=3,KU=2,GU=1,QU=10,XU=-2,Yk=t=>t==="*";function ZU(t,r){let n=t.split("/"),s=n.length;return n.some(Yk)&&(s+=XU),r&&(s+=KU),n.filter(a=>!Yk(a)).reduce((a,l)=>a+(VU.test(l)?YU:l===""?GU:QU),s)}function JU(t,r){return t.length===r.length&&t.slice(0,-1).every((s,a)=>s===r[a])?t[t.length-1]-r[r.length-1]:0}function ez(t,r,n=!1){let{routesMeta:s}=t,a={},l="/",c=[];for(let u=0;u<s.length;++u){let d=s[u],h=u===s.length-1,x=l==="/"?r:r.slice(l.length)||"/",p=Rx({path:d.relativePath,caseSensitive:d.caseSensitive,end:h},x),y=d.route;if(!p&&h&&n&&!s[s.length-1].route.index&&(p=Rx({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},x)),!p)return null;Object.assign(a,p.params),c.push({params:a,pathname:nl([l,p.pathname]),pathnameBase:iz(nl([l,p.pathnameBase])),route:y}),p.pathnameBase!=="/"&&(l=nl([l,p.pathnameBase]))}return c}function Rx(t,r){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,s]=tz(t.path,t.caseSensitive,t.end),a=r.match(n);if(!a)return null;let l=a[0],c=l.replace(/(.)\/+$/,"$1"),u=a.slice(1);return{params:s.reduce((h,{paramName:x,isOptional:p},y)=>{if(x==="*"){let w=u[y]||"";c=l.slice(0,l.length-w.length).replace(/(.)\/+$/,"$1")}const v=u[y];return p&&!v?h[x]=void 0:h[x]=(v||"").replace(/%2F/g,"/"),h},{}),pathname:l,pathnameBase:c,pattern:t}}function tz(t,r=!1,n=!0){Ia(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let s=[],a="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,u,d)=>(s.push({paramName:u,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(s.push({paramName:"*"}),a+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":t!==""&&t!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,r?void 0:"i"),s]}function rz(t){try{return t.split("/").map(r=>decodeURIComponent(r).replace(/\//g,"%2F")).join("/")}catch(r){return Ia(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${r}).`),t}}function ol(t,r){if(r==="/")return t;if(!t.toLowerCase().startsWith(r.toLowerCase()))return null;let n=r.endsWith("/")?r.length-1:r.length,s=t.charAt(n);return s&&s!=="/"?null:t.slice(n)||"/"}function nz(t,r="/"){let{pathname:n,search:s="",hash:a=""}=typeof t=="string"?Yd(t):t;return{pathname:n?n.startsWith("/")?n:sz(n,r):r,search:lz(s),hash:oz(a)}}function sz(t,r){let n=r.replace(/\/+$/,"").split("/");return t.split("/").forEach(a=>{a===".."?n.length>1&&n.pop():a!=="."&&n.push(a)}),n.length>1?n.join("/"):"/"}function ej(t,r,n,s){return`Cannot include a '${t}' character in a manually specified \`to.${r}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function az(t){return t.filter((r,n)=>n===0||r.route.path&&r.route.path.length>0)}function Ww(t){let r=az(t);return r.map((n,s)=>s===r.length-1?n.pathname:n.pathnameBase)}function Hw(t,r,n,s=!1){let a;typeof t=="string"?a=Yd(t):(a={...t},ln(!a.pathname||!a.pathname.includes("?"),ej("?","pathname","search",a)),ln(!a.pathname||!a.pathname.includes("#"),ej("#","pathname","hash",a)),ln(!a.search||!a.search.includes("#"),ej("#","search","hash",a)));let l=t===""||a.pathname==="",c=l?"/":a.pathname,u;if(c==null)u=n;else{let p=r.length-1;if(!s&&c.startsWith("..")){let y=c.split("/");for(;y[0]==="..";)y.shift(),p-=1;a.pathname=y.join("/")}u=p>=0?r[p]:"/"}let d=nz(a,u),h=c&&c!=="/"&&c.endsWith("/"),x=(l||c===".")&&n.endsWith("/");return!d.pathname.endsWith("/")&&(h||x)&&(d.pathname+="/"),d}var nl=t=>t.join("/").replace(/\/\/+/g,"/"),iz=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),lz=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,oz=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function cz(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var AO=["POST","PUT","PATCH","DELETE"];new Set(AO);var dz=["GET",...AO];new Set(dz);var Kd=f.createContext(null);Kd.displayName="DataRouter";var Mp=f.createContext(null);Mp.displayName="DataRouterState";f.createContext(!1);var EO=f.createContext({isTransitioning:!1});EO.displayName="ViewTransition";var uz=f.createContext(new Map);uz.displayName="Fetchers";var mz=f.createContext(null);mz.displayName="Await";var ai=f.createContext(null);ai.displayName="Navigation";var Gm=f.createContext(null);Gm.displayName="Location";var ii=f.createContext({outlet:null,matches:[],isDataRoute:!1});ii.displayName="Route";var Vw=f.createContext(null);Vw.displayName="RouteError";function hz(t,{relative:r}={}){ln(Gd(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:s}=f.useContext(ai),{hash:a,pathname:l,search:c}=Qm(t,{relative:r}),u=l;return n!=="/"&&(u=l==="/"?n:nl([n,l])),s.createHref({pathname:u,search:c,hash:a})}function Gd(){return f.useContext(Gm)!=null}function li(){return ln(Gd(),"useLocation() may be used only in the context of a <Router> component."),f.useContext(Gm).location}var MO="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function TO(t){f.useContext(ai).static||f.useLayoutEffect(t)}function er(){let{isDataRoute:t}=f.useContext(ii);return t?Sz():fz()}function fz(){ln(Gd(),"useNavigate() may be used only in the context of a <Router> component.");let t=f.useContext(Kd),{basename:r,navigator:n}=f.useContext(ai),{matches:s}=f.useContext(ii),{pathname:a}=li(),l=JSON.stringify(Ww(s)),c=f.useRef(!1);return TO(()=>{c.current=!0}),f.useCallback((d,h={})=>{if(Ia(c.current,MO),!c.current)return;if(typeof d=="number"){n.go(d);return}let x=Hw(d,JSON.parse(l),a,h.relative==="path");t==null&&r!=="/"&&(x.pathname=x.pathname==="/"?r:nl([r,x.pathname])),(h.replace?n.replace:n.push)(x,h.state,h)},[r,n,l,a,t])}f.createContext(null);function oi(){let{matches:t}=f.useContext(ii),r=t[t.length-1];return r?r.params:{}}function Qm(t,{relative:r}={}){let{matches:n}=f.useContext(ii),{pathname:s}=li(),a=JSON.stringify(Ww(n));return f.useMemo(()=>Hw(t,JSON.parse(a),s,r==="path"),[t,a,s,r])}function xz(t,r){return OO(t,r)}function OO(t,r,n,s,a){ln(Gd(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=f.useContext(ai),{matches:c}=f.useContext(ii),u=c[c.length-1],d=u?u.params:{},h=u?u.pathname:"/",x=u?u.pathnameBase:"/",p=u&&u.route;{let S=p&&p.path||"";PO(h,!p||S.endsWith("*")||S.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${S}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${S}"> to <Route path="${S==="/"?"*":`${S}/*`}">.`)}let y=li(),v;if(r){let S=typeof r=="string"?Yd(r):r;ln(x==="/"||S.pathname?.startsWith(x),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${x}" but pathname "${S.pathname}" was given in the \`location\` prop.`),v=S}else v=y;let w=v.pathname||"/",b=w;if(x!=="/"){let S=x.replace(/^\//,"").split("/");b="/"+w.replace(/^\//,"").split("/").slice(S.length).join("/")}let N=CO(t,{pathname:b});Ia(p||N!=null,`No routes matched location "${v.pathname}${v.search}${v.hash}" `),Ia(N==null||N[N.length-1].route.element!==void 0||N[N.length-1].route.Component!==void 0||N[N.length-1].route.lazy!==void 0,`Matched leaf route at location "${v.pathname}${v.search}${v.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let _=jz(N&&N.map(S=>Object.assign({},S,{params:Object.assign({},d,S.params),pathname:nl([x,l.encodeLocation?l.encodeLocation(S.pathname).pathname:S.pathname]),pathnameBase:S.pathnameBase==="/"?x:nl([x,l.encodeLocation?l.encodeLocation(S.pathnameBase).pathname:S.pathnameBase])})),c,n,s,a);return r&&_?f.createElement(Gm.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...v},navigationType:"POP"}},_):_}function pz(){let t=Cz(),r=cz(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:s},l={padding:"2px 4px",backgroundColor:s},c=null;return console.error("Error handled by React Router default ErrorBoundary:",t),c=f.createElement(f.Fragment,null,f.createElement("p",null,"💿 Hey developer 👋"),f.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",f.createElement("code",{style:l},"ErrorBoundary")," or"," ",f.createElement("code",{style:l},"errorElement")," prop on your route.")),f.createElement(f.Fragment,null,f.createElement("h2",null,"Unexpected Application Error!"),f.createElement("h3",{style:{fontStyle:"italic"}},r),n?f.createElement("pre",{style:a},n):null,c)}var gz=f.createElement(pz,null),yz=class extends f.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){this.props.unstable_onError?this.props.unstable_onError(t,r):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?f.createElement(ii.Provider,{value:this.props.routeContext},f.createElement(Vw.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function vz({routeContext:t,match:r,children:n}){let s=f.useContext(Kd);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),f.createElement(ii.Provider,{value:t},n)}function jz(t,r=[],n=null,s=null,a=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(r.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let l=t,c=n?.errors;if(c!=null){let h=l.findIndex(x=>x.route.id&&c?.[x.route.id]!==void 0);ln(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),l=l.slice(0,Math.min(l.length,h+1))}let u=!1,d=-1;if(n)for(let h=0;h<l.length;h++){let x=l[h];if((x.route.HydrateFallback||x.route.hydrateFallbackElement)&&(d=h),x.route.id){let{loaderData:p,errors:y}=n,v=x.route.loader&&!p.hasOwnProperty(x.route.id)&&(!y||y[x.route.id]===void 0);if(x.route.lazy||v){u=!0,d>=0?l=l.slice(0,d+1):l=[l[0]];break}}}return l.reduceRight((h,x,p)=>{let y,v=!1,w=null,b=null;n&&(y=c&&x.route.id?c[x.route.id]:void 0,w=x.route.errorElement||gz,u&&(d<0&&p===0?(PO("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),v=!0,b=null):d===p&&(v=!0,b=x.route.hydrateFallbackElement||null)));let N=r.concat(l.slice(0,p+1)),_=()=>{let S;return y?S=w:v?S=b:x.route.Component?S=f.createElement(x.route.Component,null):x.route.element?S=x.route.element:S=h,f.createElement(vz,{match:x,routeContext:{outlet:h,matches:N,isDataRoute:n!=null},children:S})};return n&&(x.route.ErrorBoundary||x.route.errorElement||p===0)?f.createElement(yz,{location:n.location,revalidation:n.revalidation,component:w,error:y,children:_(),routeContext:{outlet:null,matches:N,isDataRoute:!0},unstable_onError:s}):_()},null)}function Yw(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function bz(t){let r=f.useContext(Kd);return ln(r,Yw(t)),r}function wz(t){let r=f.useContext(Mp);return ln(r,Yw(t)),r}function Nz(t){let r=f.useContext(ii);return ln(r,Yw(t)),r}function Kw(t){let r=Nz(t),n=r.matches[r.matches.length-1];return ln(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function _z(){return Kw("useRouteId")}function Cz(){let t=f.useContext(Vw),r=wz("useRouteError"),n=Kw("useRouteError");return t!==void 0?t:r.errors?.[n]}function Sz(){let{router:t}=bz("useNavigate"),r=Kw("useNavigate"),n=f.useRef(!1);return TO(()=>{n.current=!0}),f.useCallback(async(a,l={})=>{Ia(n.current,MO),n.current&&(typeof a=="number"?t.navigate(a):await t.navigate(a,{fromRouteId:r,...l}))},[t,r])}var Kk={};function PO(t,r,n){!r&&!Kk[t]&&(Kk[t]=!0,Ia(!1,n))}f.memo(kz);function kz({routes:t,future:r,state:n,unstable_onError:s}){return OO(t,void 0,n,s,r)}function Gw({to:t,replace:r,state:n,relative:s}){ln(Gd(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=f.useContext(ai);Ia(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:l}=f.useContext(ii),{pathname:c}=li(),u=er(),d=Hw(t,Ww(l),c,s==="path"),h=JSON.stringify(d);return f.useEffect(()=>{u(JSON.parse(h),{replace:r,state:n,relative:s})},[u,h,s,r,n]),null}function tr(t){ln(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Az({basename:t="/",children:r=null,location:n,navigationType:s="POP",navigator:a,static:l=!1}){ln(!Gd(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=t.replace(/^\/*/,"/"),u=f.useMemo(()=>({basename:c,navigator:a,static:l,future:{}}),[c,a,l]);typeof n=="string"&&(n=Yd(n));let{pathname:d="/",search:h="",hash:x="",state:p=null,key:y="default"}=n,v=f.useMemo(()=>{let w=ol(d,c);return w==null?null:{location:{pathname:w,search:h,hash:x,state:p,key:y},navigationType:s}},[c,d,h,x,p,y,s]);return Ia(v!=null,`<Router basename="${c}"> is not able to match the URL "${d}${h}${x}" because it does not start with the basename, so the <Router> won't render anything.`),v==null?null:f.createElement(ai.Provider,{value:u},f.createElement(Gm.Provider,{children:r,value:v}))}function Ez({children:t,location:r}){return xz(u0(t),r)}function u0(t,r=[]){let n=[];return f.Children.forEach(t,(s,a)=>{if(!f.isValidElement(s))return;let l=[...r,a];if(s.type===f.Fragment){n.push.apply(n,u0(s.props.children,l));return}ln(s.type===tr,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ln(!s.props.index||!s.props.children,"An index route cannot have child routes.");let c={id:s.props.id||l.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(c.children=u0(s.props.children,l)),n.push(c)}),n}var vx="get",jx="application/x-www-form-urlencoded";function Tp(t){return t!=null&&typeof t.tagName=="string"}function Mz(t){return Tp(t)&&t.tagName.toLowerCase()==="button"}function Tz(t){return Tp(t)&&t.tagName.toLowerCase()==="form"}function Oz(t){return Tp(t)&&t.tagName.toLowerCase()==="input"}function Pz(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Dz(t,r){return t.button===0&&(!r||r==="_self")&&!Pz(t)}function m0(t=""){return new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((r,n)=>{let s=t[n];return r.concat(Array.isArray(s)?s.map(a=>[n,a]):[[n,s]])},[]))}function Rz(t,r){let n=m0(t);return r&&r.forEach((s,a)=>{n.has(a)||r.getAll(a).forEach(l=>{n.append(a,l)})}),n}var zf=null;function Lz(){if(zf===null)try{new FormData(document.createElement("form"),0),zf=!1}catch{zf=!0}return zf}var Iz=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function tj(t){return t!=null&&!Iz.has(t)?(Ia(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${jx}"`),null):t}function $z(t,r){let n,s,a,l,c;if(Tz(t)){let u=t.getAttribute("action");s=u?ol(u,r):null,n=t.getAttribute("method")||vx,a=tj(t.getAttribute("enctype"))||jx,l=new FormData(t)}else if(Mz(t)||Oz(t)&&(t.type==="submit"||t.type==="image")){let u=t.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=t.getAttribute("formaction")||u.getAttribute("action");if(s=d?ol(d,r):null,n=t.getAttribute("formmethod")||u.getAttribute("method")||vx,a=tj(t.getAttribute("formenctype"))||tj(u.getAttribute("enctype"))||jx,l=new FormData(u,t),!Lz()){let{name:h,type:x,value:p}=t;if(x==="image"){let y=h?`${h}.`:"";l.append(`${y}x`,"0"),l.append(`${y}y`,"0")}else h&&l.append(h,p)}}else{if(Tp(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=vx,s=null,a=jx,c=t}return l&&a==="text/plain"&&(c=l,l=void 0),{action:s,method:n.toLowerCase(),encType:a,formData:l,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Qw(t,r){if(t===!1||t===null||typeof t>"u")throw new Error(r)}function Fz(t,r,n){let s=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return s.pathname==="/"?s.pathname=`_root.${n}`:r&&ol(s.pathname,r)==="/"?s.pathname=`${r.replace(/\/$/,"")}/_root.${n}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${n}`,s}async function qz(t,r){if(t.id in r)return r[t.id];try{let n=await import(t.module);return r[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Uz(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function zz(t,r,n){let s=await Promise.all(t.map(async a=>{let l=r.routes[a.route.id];if(l){let c=await qz(l,n);return c.links?c.links():[]}return[]}));return Vz(s.flat(1).filter(Uz).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function Gk(t,r,n,s,a,l){let c=(d,h)=>n[h]?d.route.id!==n[h].route.id:!0,u=(d,h)=>n[h].pathname!==d.pathname||n[h].route.path?.endsWith("*")&&n[h].params["*"]!==d.params["*"];return l==="assets"?r.filter((d,h)=>c(d,h)||u(d,h)):l==="data"?r.filter((d,h)=>{let x=s.routes[d.route.id];if(!x||!x.hasLoader)return!1;if(c(d,h)||u(d,h))return!0;if(d.route.shouldRevalidate){let p=d.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(t,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof p=="boolean")return p}return!0}):[]}function Bz(t,r,{includeHydrateFallback:n}={}){return Wz(t.map(s=>{let a=r.routes[s.route.id];if(!a)return[];let l=[a.module];return a.clientActionModule&&(l=l.concat(a.clientActionModule)),a.clientLoaderModule&&(l=l.concat(a.clientLoaderModule)),n&&a.hydrateFallbackModule&&(l=l.concat(a.hydrateFallbackModule)),a.imports&&(l=l.concat(a.imports)),l}).flat(1))}function Wz(t){return[...new Set(t)]}function Hz(t){let r={},n=Object.keys(t).sort();for(let s of n)r[s]=t[s];return r}function Vz(t,r){let n=new Set;return new Set(r),t.reduce((s,a)=>{let l=JSON.stringify(Hz(a));return n.has(l)||(n.add(l),s.push({key:l,link:a})),s},[])}function DO(){let t=f.useContext(Kd);return Qw(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function Yz(){let t=f.useContext(Mp);return Qw(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var Xw=f.createContext(void 0);Xw.displayName="FrameworkContext";function RO(){let t=f.useContext(Xw);return Qw(t,"You must render this element inside a <HydratedRouter> element"),t}function Kz(t,r){let n=f.useContext(Xw),[s,a]=f.useState(!1),[l,c]=f.useState(!1),{onFocus:u,onBlur:d,onMouseEnter:h,onMouseLeave:x,onTouchStart:p}=r,y=f.useRef(null);f.useEffect(()=>{if(t==="render"&&c(!0),t==="viewport"){let b=_=>{_.forEach(S=>{c(S.isIntersecting)})},N=new IntersectionObserver(b,{threshold:.5});return y.current&&N.observe(y.current),()=>{N.disconnect()}}},[t]),f.useEffect(()=>{if(s){let b=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(b)}}},[s]);let v=()=>{a(!0)},w=()=>{a(!1),c(!1)};return n?t!=="intent"?[l,y,{}]:[l,y,{onFocus:am(u,v),onBlur:am(d,w),onMouseEnter:am(h,v),onMouseLeave:am(x,w),onTouchStart:am(p,v)}]:[!1,y,{}]}function am(t,r){return n=>{t&&t(n),n.defaultPrevented||r(n)}}function Gz({page:t,...r}){let{router:n}=DO(),s=f.useMemo(()=>CO(n.routes,t,n.basename),[n.routes,t,n.basename]);return s?f.createElement(Xz,{page:t,matches:s,...r}):null}function Qz(t){let{manifest:r,routeModules:n}=RO(),[s,a]=f.useState([]);return f.useEffect(()=>{let l=!1;return zz(t,r,n).then(c=>{l||a(c)}),()=>{l=!0}},[t,r,n]),s}function Xz({page:t,matches:r,...n}){let s=li(),{manifest:a,routeModules:l}=RO(),{basename:c}=DO(),{loaderData:u,matches:d}=Yz(),h=f.useMemo(()=>Gk(t,r,d,a,s,"data"),[t,r,d,a,s]),x=f.useMemo(()=>Gk(t,r,d,a,s,"assets"),[t,r,d,a,s]),p=f.useMemo(()=>{if(t===s.pathname+s.search+s.hash)return[];let w=new Set,b=!1;if(r.forEach(_=>{let S=a.routes[_.route.id];!S||!S.hasLoader||(!h.some(k=>k.route.id===_.route.id)&&_.route.id in u&&l[_.route.id]?.shouldRevalidate||S.hasClientLoader?b=!0:w.add(_.route.id))}),w.size===0)return[];let N=Fz(t,c,"data");return b&&w.size>0&&N.searchParams.set("_routes",r.filter(_=>w.has(_.route.id)).map(_=>_.route.id).join(",")),[N.pathname+N.search]},[c,u,s,a,h,r,t,l]),y=f.useMemo(()=>Bz(x,a),[x,a]),v=Qz(x);return f.createElement(f.Fragment,null,p.map(w=>f.createElement("link",{key:w,rel:"prefetch",as:"fetch",href:w,...n})),y.map(w=>f.createElement("link",{key:w,rel:"modulepreload",href:w,...n})),v.map(({key:w,link:b})=>f.createElement("link",{key:w,nonce:n.nonce,...b})))}function Zz(...t){return r=>{t.forEach(n=>{typeof n=="function"?n(r):n!=null&&(n.current=r)})}}var LO=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{LO&&(window.__reactRouterVersion="7.8.2")}catch{}function Jz({basename:t,children:r,window:n}){let s=f.useRef();s.current==null&&(s.current=qU({window:n,v5Compat:!0}));let a=s.current,[l,c]=f.useState({action:a.action,location:a.location}),u=f.useCallback(d=>{f.startTransition(()=>c(d))},[c]);return f.useLayoutEffect(()=>a.listen(u),[a,u]),f.createElement(Az,{basename:t,children:r,location:l.location,navigationType:l.action,navigator:a})}var IO=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,$O=f.forwardRef(function({onClick:r,discover:n="render",prefetch:s="none",relative:a,reloadDocument:l,replace:c,state:u,target:d,to:h,preventScrollReset:x,viewTransition:p,...y},v){let{basename:w}=f.useContext(ai),b=typeof h=="string"&&IO.test(h),N,_=!1;if(typeof h=="string"&&b&&(N=h,LO))try{let G=new URL(window.location.href),J=h.startsWith("//")?new URL(G.protocol+h):new URL(h),ie=ol(J.pathname,w);J.origin===G.origin&&ie!=null?h=ie+J.search+J.hash:_=!0}catch{Ia(!1,`<Link to="${h}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let S=hz(h,{relative:a}),[k,E,A]=Kz(s,y),O=nB(h,{replace:c,state:u,target:d,preventScrollReset:x,relative:a,viewTransition:p});function z(G){r&&r(G),G.defaultPrevented||O(G)}let R=f.createElement("a",{...y,...A,href:N||S,onClick:_||l?r:z,ref:Zz(v,E),target:d,"data-discover":!b&&n==="render"?"true":void 0});return k&&!b?f.createElement(f.Fragment,null,R,f.createElement(Gz,{page:S})):R});$O.displayName="Link";var eB=f.forwardRef(function({"aria-current":r="page",caseSensitive:n=!1,className:s="",end:a=!1,style:l,to:c,viewTransition:u,children:d,...h},x){let p=Qm(c,{relative:h.relative}),y=li(),v=f.useContext(Mp),{navigator:w,basename:b}=f.useContext(ai),N=v!=null&&oB(p)&&u===!0,_=w.encodeLocation?w.encodeLocation(p).pathname:p.pathname,S=y.pathname,k=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;n||(S=S.toLowerCase(),k=k?k.toLowerCase():null,_=_.toLowerCase()),k&&b&&(k=ol(k,b)||k);const E=_!=="/"&&_.endsWith("/")?_.length-1:_.length;let A=S===_||!a&&S.startsWith(_)&&S.charAt(E)==="/",O=k!=null&&(k===_||!a&&k.startsWith(_)&&k.charAt(_.length)==="/"),z={isActive:A,isPending:O,isTransitioning:N},R=A?r:void 0,G;typeof s=="function"?G=s(z):G=[s,A?"active":null,O?"pending":null,N?"transitioning":null].filter(Boolean).join(" ");let J=typeof l=="function"?l(z):l;return f.createElement($O,{...h,"aria-current":R,className:G,ref:x,style:J,to:c,viewTransition:u},typeof d=="function"?d(z):d)});eB.displayName="NavLink";var tB=f.forwardRef(({discover:t="render",fetcherKey:r,navigate:n,reloadDocument:s,replace:a,state:l,method:c=vx,action:u,onSubmit:d,relative:h,preventScrollReset:x,viewTransition:p,...y},v)=>{let w=iB(),b=lB(u,{relative:h}),N=c.toLowerCase()==="get"?"get":"post",_=typeof u=="string"&&IO.test(u),S=k=>{if(d&&d(k),k.defaultPrevented)return;k.preventDefault();let E=k.nativeEvent.submitter,A=E?.getAttribute("formmethod")||c;w(E||k.currentTarget,{fetcherKey:r,method:A,navigate:n,replace:a,state:l,relative:h,preventScrollReset:x,viewTransition:p})};return f.createElement("form",{ref:v,method:N,action:b,onSubmit:s?d:S,...y,"data-discover":!_&&t==="render"?"true":void 0})});tB.displayName="Form";function rB(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function FO(t){let r=f.useContext(Kd);return ln(r,rB(t)),r}function nB(t,{target:r,replace:n,state:s,preventScrollReset:a,relative:l,viewTransition:c}={}){let u=er(),d=li(),h=Qm(t,{relative:l});return f.useCallback(x=>{if(Dz(x,r)){x.preventDefault();let p=n!==void 0?n:Om(d)===Om(h);u(t,{replace:p,state:s,preventScrollReset:a,relative:l,viewTransition:c})}},[d,u,h,n,s,r,t,a,l,c])}function qO(t){Ia(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let r=f.useRef(m0(t)),n=f.useRef(!1),s=li(),a=f.useMemo(()=>Rz(s.search,n.current?null:r.current),[s.search]),l=er(),c=f.useCallback((u,d)=>{const h=m0(typeof u=="function"?u(new URLSearchParams(a)):u);n.current=!0,l("?"+h,d)},[l,a]);return[a,c]}var sB=0,aB=()=>`__${String(++sB)}__`;function iB(){let{router:t}=FO("useSubmit"),{basename:r}=f.useContext(ai),n=_z();return f.useCallback(async(s,a={})=>{let{action:l,method:c,encType:u,formData:d,body:h}=$z(s,r);if(a.navigate===!1){let x=a.fetcherKey||aB();await t.fetch(x,n,a.action||l,{preventScrollReset:a.preventScrollReset,formData:d,body:h,formMethod:a.method||c,formEncType:a.encType||u,flushSync:a.flushSync})}else await t.navigate(a.action||l,{preventScrollReset:a.preventScrollReset,formData:d,body:h,formMethod:a.method||c,formEncType:a.encType||u,replace:a.replace,state:a.state,fromRouteId:n,flushSync:a.flushSync,viewTransition:a.viewTransition})},[t,r,n])}function lB(t,{relative:r}={}){let{basename:n}=f.useContext(ai),s=f.useContext(ii);ln(s,"useFormAction must be used inside a RouteContext");let[a]=s.matches.slice(-1),l={...Qm(t||".",{relative:r})},c=li();if(t==null){l.search=c.search;let u=new URLSearchParams(l.search),d=u.getAll("index");if(d.some(x=>x==="")){u.delete("index"),d.filter(p=>p).forEach(p=>u.append("index",p));let x=u.toString();l.search=x?`?${x}`:""}}return(!t||t===".")&&a.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(l.pathname=l.pathname==="/"?n:nl([n,l.pathname])),Om(l)}function oB(t,{relative:r}={}){let n=f.useContext(EO);ln(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=FO("useViewTransitionState"),a=Qm(t,{relative:r});if(!n.isTransitioning)return!1;let l=ol(n.currentLocation.pathname,s)||n.currentLocation.pathname,c=ol(n.nextLocation.pathname,s)||n.nextLocation.pathname;return Rx(a.pathname,c)!=null||Rx(a.pathname,l)!=null}var Nc=hO();const UO=Di(Nc);function cB(t){if(typeof document>"u")return;let r=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",r.appendChild(n),n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t))}const dB=t=>{switch(t){case"success":return hB;case"info":return xB;case"warning":return fB;case"error":return pB;default:return null}},uB=Array(12).fill(0),mB=({visible:t,className:r})=>ut.createElement("div",{className:["sonner-loading-wrapper",r].filter(Boolean).join(" "),"data-visible":t},ut.createElement("div",{className:"sonner-spinner"},uB.map((n,s)=>ut.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${s}`})))),hB=ut.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ut.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),fB=ut.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},ut.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),xB=ut.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ut.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),pB=ut.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ut.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),gB=ut.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},ut.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),ut.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),yB=()=>{const[t,r]=ut.useState(document.hidden);return ut.useEffect(()=>{const n=()=>{r(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),t};let h0=1;class vB{constructor(){this.subscribe=r=>(this.subscribers.push(r),()=>{const n=this.subscribers.indexOf(r);this.subscribers.splice(n,1)}),this.publish=r=>{this.subscribers.forEach(n=>n(r))},this.addToast=r=>{this.publish(r),this.toasts=[...this.toasts,r]},this.create=r=>{var n;const{message:s,...a}=r,l=typeof r?.id=="number"||((n=r.id)==null?void 0:n.length)>0?r.id:h0++,c=this.toasts.find(d=>d.id===l),u=r.dismissible===void 0?!0:r.dismissible;return this.dismissedToasts.has(l)&&this.dismissedToasts.delete(l),c?this.toasts=this.toasts.map(d=>d.id===l?(this.publish({...d,...r,id:l,title:s}),{...d,...r,id:l,dismissible:u,title:s}):d):this.addToast({title:s,...a,dismissible:u,id:l}),l},this.dismiss=r=>(r?(this.dismissedToasts.add(r),requestAnimationFrame(()=>this.subscribers.forEach(n=>n({id:r,dismiss:!0})))):this.toasts.forEach(n=>{this.subscribers.forEach(s=>s({id:n.id,dismiss:!0}))}),r),this.message=(r,n)=>this.create({...n,message:r}),this.error=(r,n)=>this.create({...n,message:r,type:"error"}),this.success=(r,n)=>this.create({...n,type:"success",message:r}),this.info=(r,n)=>this.create({...n,type:"info",message:r}),this.warning=(r,n)=>this.create({...n,type:"warning",message:r}),this.loading=(r,n)=>this.create({...n,type:"loading",message:r}),this.promise=(r,n)=>{if(!n)return;let s;n.loading!==void 0&&(s=this.create({...n,promise:r,type:"loading",message:n.loading,description:typeof n.description!="function"?n.description:void 0}));const a=Promise.resolve(r instanceof Function?r():r);let l=s!==void 0,c;const u=a.then(async h=>{if(c=["resolve",h],ut.isValidElement(h))l=!1,this.create({id:s,type:"default",message:h});else if(bB(h)&&!h.ok){l=!1;const p=typeof n.error=="function"?await n.error(`HTTP error! status: ${h.status}`):n.error,y=typeof n.description=="function"?await n.description(`HTTP error! status: ${h.status}`):n.description,w=typeof p=="object"&&!ut.isValidElement(p)?p:{message:p};this.create({id:s,type:"error",description:y,...w})}else if(h instanceof Error){l=!1;const p=typeof n.error=="function"?await n.error(h):n.error,y=typeof n.description=="function"?await n.description(h):n.description,w=typeof p=="object"&&!ut.isValidElement(p)?p:{message:p};this.create({id:s,type:"error",description:y,...w})}else if(n.success!==void 0){l=!1;const p=typeof n.success=="function"?await n.success(h):n.success,y=typeof n.description=="function"?await n.description(h):n.description,w=typeof p=="object"&&!ut.isValidElement(p)?p:{message:p};this.create({id:s,type:"success",description:y,...w})}}).catch(async h=>{if(c=["reject",h],n.error!==void 0){l=!1;const x=typeof n.error=="function"?await n.error(h):n.error,p=typeof n.description=="function"?await n.description(h):n.description,v=typeof x=="object"&&!ut.isValidElement(x)?x:{message:x};this.create({id:s,type:"error",description:p,...v})}}).finally(()=>{l&&(this.dismiss(s),s=void 0),n.finally==null||n.finally.call(n)}),d=()=>new Promise((h,x)=>u.then(()=>c[0]==="reject"?x(c[1]):h(c[1])).catch(x));return typeof s!="string"&&typeof s!="number"?{unwrap:d}:Object.assign(s,{unwrap:d})},this.custom=(r,n)=>{const s=n?.id||h0++;return this.create({jsx:r(s),id:s,...n}),s},this.getActiveToasts=()=>this.toasts.filter(r=>!this.dismissedToasts.has(r.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const Us=new vB,jB=(t,r)=>{const n=r?.id||h0++;return Us.addToast({title:t,...r,id:n}),n},bB=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",wB=jB,NB=()=>Us.toasts,_B=()=>Us.getActiveToasts(),Ne=Object.assign(wB,{success:Us.success,info:Us.info,warning:Us.warning,error:Us.error,custom:Us.custom,message:Us.message,promise:Us.promise,dismiss:Us.dismiss,loading:Us.loading},{getHistory:NB,getToasts:_B});cB("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function Bf(t){return t.label!==void 0}const CB=3,SB="24px",kB="16px",Qk=4e3,AB=356,EB=14,MB=45,TB=200;function gi(...t){return t.filter(Boolean).join(" ")}function OB(t){const[r,n]=t.split("-"),s=[];return r&&s.push(r),n&&s.push(n),s}const PB=t=>{var r,n,s,a,l,c,u,d,h;const{invert:x,toast:p,unstyled:y,interacting:v,setHeights:w,visibleToasts:b,heights:N,index:_,toasts:S,expanded:k,removeToast:E,defaultRichColors:A,closeButton:O,style:z,cancelButtonStyle:R,actionButtonStyle:G,className:J="",descriptionClassName:ie="",duration:V,position:xe,gap:pe,expandByDefault:re,classNames:M,icons:B,closeButtonAriaLabel:L="Close toast"}=t,[T,F]=ut.useState(null),[I,Q]=ut.useState(null),[W,ee]=ut.useState(!1),[ye,he]=ut.useState(!1),[te,De]=ut.useState(!1),[ne,$e]=ut.useState(!1),[ge,we]=ut.useState(!1),[_e,Ye]=ut.useState(0),[ht,Ve]=ut.useState(0),lt=ut.useRef(p.duration||V||Qk),yt=ut.useRef(null),Re=ut.useRef(null),H=_===0,Be=_+1<=b,st=p.type,K=p.dismissible!==!1,Z=p.className||"",ke=p.descriptionClassName||"",Ae=ut.useMemo(()=>N.findIndex($t=>$t.toastId===p.id)||0,[N,p.id]),je=ut.useMemo(()=>{var $t;return($t=p.closeButton)!=null?$t:O},[p.closeButton,O]),He=ut.useMemo(()=>p.duration||V||Qk,[p.duration,V]),Se=ut.useRef(0),it=ut.useRef(0),Me=ut.useRef(0),Tt=ut.useRef(null),[Pe,Ee]=xe.split("-"),xt=ut.useMemo(()=>N.reduce(($t,sr,le)=>le>=Ae?$t:$t+sr.height,0),[N,Ae]),wt=yB(),Le=p.invert||x,ot=st==="loading";it.current=ut.useMemo(()=>Ae*pe+xt,[Ae,xt]),ut.useEffect(()=>{lt.current=He},[He]),ut.useEffect(()=>{ee(!0)},[]),ut.useEffect(()=>{const $t=Re.current;if($t){const sr=$t.getBoundingClientRect().height;return Ve(sr),w(le=>[{toastId:p.id,height:sr,position:p.position},...le]),()=>w(le=>le.filter(Qe=>Qe.toastId!==p.id))}},[w,p.id]),ut.useLayoutEffect(()=>{if(!W)return;const $t=Re.current,sr=$t.style.height;$t.style.height="auto";const le=$t.getBoundingClientRect().height;$t.style.height=sr,Ve(le),w(Qe=>Qe.find($=>$.toastId===p.id)?Qe.map($=>$.toastId===p.id?{...$,height:le}:$):[{toastId:p.id,height:le,position:p.position},...Qe])},[W,p.title,p.description,w,p.id,p.jsx,p.action,p.cancel]);const It=ut.useCallback(()=>{he(!0),Ye(it.current),w($t=>$t.filter(sr=>sr.toastId!==p.id)),setTimeout(()=>{E(p)},TB)},[p,E,w,it]);ut.useEffect(()=>{if(p.promise&&st==="loading"||p.duration===1/0||p.type==="loading")return;let $t;return k||v||wt?(()=>{if(Me.current<Se.current){const Qe=new Date().getTime()-Se.current;lt.current=lt.current-Qe}Me.current=new Date().getTime()})():(()=>{lt.current!==1/0&&(Se.current=new Date().getTime(),$t=setTimeout(()=>{p.onAutoClose==null||p.onAutoClose.call(p,p),It()},lt.current))})(),()=>clearTimeout($t)},[k,v,p,st,wt,It]),ut.useEffect(()=>{p.delete&&(It(),p.onDismiss==null||p.onDismiss.call(p,p))},[It,p.delete]);function Er(){var $t;if(B?.loading){var sr;return ut.createElement("div",{className:gi(M?.loader,p==null||(sr=p.classNames)==null?void 0:sr.loader,"sonner-loader"),"data-visible":st==="loading"},B.loading)}return ut.createElement(mB,{className:gi(M?.loader,p==null||($t=p.classNames)==null?void 0:$t.loader),visible:st==="loading"})}const Yr=p.icon||B?.[st]||dB(st);var Gn,Qn;return ut.createElement("li",{tabIndex:0,ref:Re,className:gi(J,Z,M?.toast,p==null||(r=p.classNames)==null?void 0:r.toast,M?.default,M?.[st],p==null||(n=p.classNames)==null?void 0:n[st]),"data-sonner-toast":"","data-rich-colors":(Gn=p.richColors)!=null?Gn:A,"data-styled":!(p.jsx||p.unstyled||y),"data-mounted":W,"data-promise":!!p.promise,"data-swiped":ge,"data-removed":ye,"data-visible":Be,"data-y-position":Pe,"data-x-position":Ee,"data-index":_,"data-front":H,"data-swiping":te,"data-dismissible":K,"data-type":st,"data-invert":Le,"data-swipe-out":ne,"data-swipe-direction":I,"data-expanded":!!(k||re&&W),"data-testid":p.testId,style:{"--index":_,"--toasts-before":_,"--z-index":S.length-_,"--offset":`${ye?_e:it.current}px`,"--initial-height":re?"auto":`${ht}px`,...z,...p.style},onDragEnd:()=>{De(!1),F(null),Tt.current=null},onPointerDown:$t=>{$t.button!==2&&(ot||!K||(yt.current=new Date,Ye(it.current),$t.target.setPointerCapture($t.pointerId),$t.target.tagName!=="BUTTON"&&(De(!0),Tt.current={x:$t.clientX,y:$t.clientY})))},onPointerUp:()=>{var $t,sr,le;if(ne||!K)return;Tt.current=null;const Qe=Number((($t=Re.current)==null?void 0:$t.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),P=Number(((sr=Re.current)==null?void 0:sr.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),$=new Date().getTime()-((le=yt.current)==null?void 0:le.getTime()),We=T==="x"?Qe:P,vt=Math.abs(We)/$;if(Math.abs(We)>=MB||vt>.11){Ye(it.current),p.onDismiss==null||p.onDismiss.call(p,p),Q(T==="x"?Qe>0?"right":"left":P>0?"down":"up"),It(),$e(!0);return}else{var dt,zt;(dt=Re.current)==null||dt.style.setProperty("--swipe-amount-x","0px"),(zt=Re.current)==null||zt.style.setProperty("--swipe-amount-y","0px")}we(!1),De(!1),F(null)},onPointerMove:$t=>{var sr,le,Qe;if(!Tt.current||!K||((sr=window.getSelection())==null?void 0:sr.toString().length)>0)return;const $=$t.clientY-Tt.current.y,We=$t.clientX-Tt.current.x;var vt;const dt=(vt=t.swipeDirections)!=null?vt:OB(xe);!T&&(Math.abs(We)>1||Math.abs($)>1)&&F(Math.abs(We)>Math.abs($)?"x":"y");let zt={x:0,y:0};const kn=ce=>1/(1.5+Math.abs(ce)/20);if(T==="y"){if(dt.includes("top")||dt.includes("bottom"))if(dt.includes("top")&&$<0||dt.includes("bottom")&&$>0)zt.y=$;else{const ce=$*kn($);zt.y=Math.abs(ce)<Math.abs($)?ce:$}}else if(T==="x"&&(dt.includes("left")||dt.includes("right")))if(dt.includes("left")&&We<0||dt.includes("right")&&We>0)zt.x=We;else{const ce=We*kn(We);zt.x=Math.abs(ce)<Math.abs(We)?ce:We}(Math.abs(zt.x)>0||Math.abs(zt.y)>0)&&we(!0),(le=Re.current)==null||le.style.setProperty("--swipe-amount-x",`${zt.x}px`),(Qe=Re.current)==null||Qe.style.setProperty("--swipe-amount-y",`${zt.y}px`)}},je&&!p.jsx&&st!=="loading"?ut.createElement("button",{"aria-label":L,"data-disabled":ot,"data-close-button":!0,onClick:ot||!K?()=>{}:()=>{It(),p.onDismiss==null||p.onDismiss.call(p,p)},className:gi(M?.closeButton,p==null||(s=p.classNames)==null?void 0:s.closeButton)},(Qn=B?.close)!=null?Qn:gB):null,(st||p.icon||p.promise)&&p.icon!==null&&(B?.[st]!==null||p.icon)?ut.createElement("div",{"data-icon":"",className:gi(M?.icon,p==null||(a=p.classNames)==null?void 0:a.icon)},p.promise||p.type==="loading"&&!p.icon?p.icon||Er():null,p.type!=="loading"?Yr:null):null,ut.createElement("div",{"data-content":"",className:gi(M?.content,p==null||(l=p.classNames)==null?void 0:l.content)},ut.createElement("div",{"data-title":"",className:gi(M?.title,p==null||(c=p.classNames)==null?void 0:c.title)},p.jsx?p.jsx:typeof p.title=="function"?p.title():p.title),p.description?ut.createElement("div",{"data-description":"",className:gi(ie,ke,M?.description,p==null||(u=p.classNames)==null?void 0:u.description)},typeof p.description=="function"?p.description():p.description):null),ut.isValidElement(p.cancel)?p.cancel:p.cancel&&Bf(p.cancel)?ut.createElement("button",{"data-button":!0,"data-cancel":!0,style:p.cancelButtonStyle||R,onClick:$t=>{Bf(p.cancel)&&K&&(p.cancel.onClick==null||p.cancel.onClick.call(p.cancel,$t),It())},className:gi(M?.cancelButton,p==null||(d=p.classNames)==null?void 0:d.cancelButton)},p.cancel.label):null,ut.isValidElement(p.action)?p.action:p.action&&Bf(p.action)?ut.createElement("button",{"data-button":!0,"data-action":!0,style:p.actionButtonStyle||G,onClick:$t=>{Bf(p.action)&&(p.action.onClick==null||p.action.onClick.call(p.action,$t),!$t.defaultPrevented&&It())},className:gi(M?.actionButton,p==null||(h=p.classNames)==null?void 0:h.actionButton)},p.action.label):null)};function Xk(){if(typeof window>"u"||typeof document>"u")return"ltr";const t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}function DB(t,r){const n={};return[t,r].forEach((s,a)=>{const l=a===1,c=l?"--mobile-offset":"--offset",u=l?kB:SB;function d(h){["top","right","bottom","left"].forEach(x=>{n[`${c}-${x}`]=typeof h=="number"?`${h}px`:h})}typeof s=="number"||typeof s=="string"?d(s):typeof s=="object"?["top","right","bottom","left"].forEach(h=>{s[h]===void 0?n[`${c}-${h}`]=u:n[`${c}-${h}`]=typeof s[h]=="number"?`${s[h]}px`:s[h]}):d(u)}),n}const RB=ut.forwardRef(function(r,n){const{id:s,invert:a,position:l="bottom-right",hotkey:c=["altKey","KeyT"],expand:u,closeButton:d,className:h,offset:x,mobileOffset:p,theme:y="light",richColors:v,duration:w,style:b,visibleToasts:N=CB,toastOptions:_,dir:S=Xk(),gap:k=EB,icons:E,containerAriaLabel:A="Notifications"}=r,[O,z]=ut.useState([]),R=ut.useMemo(()=>s?O.filter(W=>W.toasterId===s):O.filter(W=>!W.toasterId),[O,s]),G=ut.useMemo(()=>Array.from(new Set([l].concat(R.filter(W=>W.position).map(W=>W.position)))),[R,l]),[J,ie]=ut.useState([]),[V,xe]=ut.useState(!1),[pe,re]=ut.useState(!1),[M,B]=ut.useState(y!=="system"?y:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),L=ut.useRef(null),T=c.join("+").replace(/Key/g,"").replace(/Digit/g,""),F=ut.useRef(null),I=ut.useRef(!1),Q=ut.useCallback(W=>{z(ee=>{var ye;return(ye=ee.find(he=>he.id===W.id))!=null&&ye.delete||Us.dismiss(W.id),ee.filter(({id:he})=>he!==W.id)})},[]);return ut.useEffect(()=>Us.subscribe(W=>{if(W.dismiss){requestAnimationFrame(()=>{z(ee=>ee.map(ye=>ye.id===W.id?{...ye,delete:!0}:ye))});return}setTimeout(()=>{UO.flushSync(()=>{z(ee=>{const ye=ee.findIndex(he=>he.id===W.id);return ye!==-1?[...ee.slice(0,ye),{...ee[ye],...W},...ee.slice(ye+1)]:[W,...ee]})})})}),[O]),ut.useEffect(()=>{if(y!=="system"){B(y);return}if(y==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?B("dark"):B("light")),typeof window>"u")return;const W=window.matchMedia("(prefers-color-scheme: dark)");try{W.addEventListener("change",({matches:ee})=>{B(ee?"dark":"light")})}catch{W.addListener(({matches:ye})=>{try{B(ye?"dark":"light")}catch(he){console.error(he)}})}},[y]),ut.useEffect(()=>{O.length<=1&&xe(!1)},[O]),ut.useEffect(()=>{const W=ee=>{var ye;if(c.every(De=>ee[De]||ee.code===De)){var te;xe(!0),(te=L.current)==null||te.focus()}ee.code==="Escape"&&(document.activeElement===L.current||(ye=L.current)!=null&&ye.contains(document.activeElement))&&xe(!1)};return document.addEventListener("keydown",W),()=>document.removeEventListener("keydown",W)},[c]),ut.useEffect(()=>{if(L.current)return()=>{F.current&&(F.current.focus({preventScroll:!0}),F.current=null,I.current=!1)}},[L.current]),ut.createElement("section",{ref:n,"aria-label":`${A} ${T}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},G.map((W,ee)=>{var ye;const[he,te]=W.split("-");return R.length?ut.createElement("ol",{key:W,dir:S==="auto"?Xk():S,tabIndex:-1,ref:L,className:h,"data-sonner-toaster":!0,"data-sonner-theme":M,"data-y-position":he,"data-x-position":te,style:{"--front-toast-height":`${((ye=J[0])==null?void 0:ye.height)||0}px`,"--width":`${AB}px`,"--gap":`${k}px`,...b,...DB(x,p)},onBlur:De=>{I.current&&!De.currentTarget.contains(De.relatedTarget)&&(I.current=!1,F.current&&(F.current.focus({preventScroll:!0}),F.current=null))},onFocus:De=>{De.target instanceof HTMLElement&&De.target.dataset.dismissible==="false"||I.current||(I.current=!0,F.current=De.relatedTarget)},onMouseEnter:()=>xe(!0),onMouseMove:()=>xe(!0),onMouseLeave:()=>{pe||xe(!1)},onDragEnd:()=>xe(!1),onPointerDown:De=>{De.target instanceof HTMLElement&&De.target.dataset.dismissible==="false"||re(!0)},onPointerUp:()=>re(!1)},R.filter(De=>!De.position&&ee===0||De.position===W).map((De,ne)=>{var $e,ge;return ut.createElement(PB,{key:De.id,icons:E,index:ne,toast:De,defaultRichColors:v,duration:($e=_?.duration)!=null?$e:w,className:_?.className,descriptionClassName:_?.descriptionClassName,invert:a,visibleToasts:N,closeButton:(ge=_?.closeButton)!=null?ge:d,interacting:pe,position:W,style:_?.style,unstyled:_?.unstyled,classNames:_?.classNames,cancelButtonStyle:_?.cancelButtonStyle,actionButtonStyle:_?.actionButtonStyle,closeButtonAriaLabel:_?.closeButtonAriaLabel,removeToast:Q,toasts:R.filter(we=>we.position==De.position),heights:J.filter(we=>we.position==De.position),setHeights:ie,expandByDefault:u,gap:k,expanded:V,swipeDirections:r.swipeDirections})})):null}))}),zO=f.createContext(void 0);function LB({children:t}){const[r,n]=f.useState("system"),[s,a]=f.useState("light");f.useEffect(()=>{const c=localStorage.getItem("theme");c&&["light","dark","system"].includes(c)&&n(c)},[]),f.useEffect(()=>{const c=window.document.documentElement,u=()=>{let x;r==="system"?x=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":x=r,a(x),x==="dark"?c.classList.add("dark"):c.classList.remove("dark")};u();const d=window.matchMedia("(prefers-color-scheme: dark)"),h=()=>{r==="system"&&u()};return d.addEventListener("change",h),()=>d.removeEventListener("change",h)},[r]);const l=c=>{n(c),localStorage.setItem("theme",c)};return e.jsx(zO.Provider,{value:{theme:r,setTheme:l,actualTheme:s},children:t})}function IB(){const t=f.useContext(zO);if(t===void 0)throw new Error("useTheme must be used within a ThemeProvider");return t}const $B=()=>{if(typeof window<"u"){const t=window.location.protocol,r=window.location.hostname;return`${t}//${r}/api`}return"http://localhost:3000/api"},f0=$B(),rn=f0.replace("/api",""),BO={"work_orders:read":["admin","manager","technician","sales"],"work_orders:write":["admin","manager","technician"],"work_orders:delete":["admin","manager","technician"],"repair_tickets:read":["admin","manager","technician","sales"],"repair_tickets:write":["admin","manager","technician"],"repair_tickets:delete":["admin","manager","technician"],"inventory:read":["admin","manager","technician","sales"],"inventory:write":["admin","manager","technician","sales"],"inventory:delete":["admin","manager","technician","sales"],"customers:read":["admin","manager","technician","sales"],"customers:write":["admin","manager","technician","sales"],"customers:delete":["admin","manager","technician","sales"],"machines:read":["admin","manager","technician","sales"],"machines:write":["admin","manager","sales"],"machines:assign":["admin","manager","sales"],"reports:read":["admin","manager","technician","sales"],"analytics:read":["admin","manager","technician","sales"],"pipeline:read":["admin","manager","sales"],"pipeline:write":["admin","manager","sales"],"pipeline:delete":["admin","manager","sales"],"quotes:read":["admin","manager","sales"],"quotes:write":["admin","manager","sales"],"quotes:delete":["admin","manager","sales"],"sales_reports:read":["admin","manager","sales"],"sales_reports:write":["admin","manager","sales"],"sales_reports:delete":["admin","manager","sales"],"sales_targets:read":["admin","manager"],"sales_targets:write":["admin","manager"],"dynamic_pricing:read":["admin","manager","sales"],"dynamic_pricing:write":["admin","manager"],"rental_analytics:read":["admin","manager","sales"],"users:read":["admin","manager"],"users:write":["admin"],"users:delete":["admin"],"settings:read":["admin","manager"],"settings:write":["admin"]},FB=["admin","manager","technician","sales"],qB=Object.keys(BO);function bx(t){return FB.includes(t)}function UB(t){return qB.includes(t)}function Lx(t,r){return!bx(t)||!UB(r)?!1:(BO[r]||[]).includes(t)}function zB(t,r){return r.some(n=>Lx(t,n))}function BB(t,r){return r.every(n=>Lx(t,n))}class WB{logoutCallback=null;setLogoutCallback(r){this.logoutCallback=r}showSessionExpiredNotification(){Ne.error("Session Expired",{description:"Your session has expired. Please log in again.",duration:5e3})}getAuthHeaders(){const r=localStorage.getItem("token");return{"Content-Type":"application/json",...r&&{Authorization:`Bearer ${r}`}}}async request(r,n={}){const s=`${f0}${r}`,a={headers:this.getAuthHeaders(),...n};try{const l=await fetch(s,a);if(!l.ok){if(l.status===401||l.status===403)throw this.showSessionExpiredNotification(),this.logoutCallback&&this.logoutCallback(),window.location.href="/login",new Error("Session expired. Please log in again.");const u=await l.text();let d=`HTTP error! status: ${l.status}`;try{d=JSON.parse(u).message||d}catch{d=u||d}throw new Error(d)}const c=await l.text();return c.trim()?JSON.parse(c):{}}catch(l){if(console.error("API request failed:",l),l instanceof TypeError&&l.message.includes("fetch"))return this.getMockData(r);throw l instanceof Error&&l.message.includes("Session expired"),l}}getMockData(r){return r.includes("/customers")?{customers:[{id:"1",name:"John Doe",email:"john.doe@example.com",phone:"123-456-7890",address:"123 Main St, Anytown, USA",status:"active",company:"ABC Corp",location:"New York",machines:3,lastService:"2024-01-15"},{id:"2",name:"Jane Smith",email:"jane.smith@example.com",phone:"098-765-4321",address:"456 Oak Ave, Anytown, USA",status:"lead",company:"Tech Solutions",location:"California",machines:1,lastService:"2024-01-10"}]}:r.includes("/sales/metrics")?{totalRevenue:125e3,totalLeads:45,conversionRate:23.5,averageDealSize:5500,monthlyGrowth:12.3,quarterlyTarget:15e4,quarterlyProgress:83.3}:r.includes("/sales/opportunities")?{opportunities:[{id:"1",customer_name:"ABC Manufacturing",potential_value:15e3,stage:"proposal",probability:75,expected_close_date:"2024-02-15",assigned_to:"John Sales"},{id:"2",customer_name:"TechCorp Solutions",potential_value:8500,stage:"negotiation",probability:60,expected_close_date:"2024-02-28",assigned_to:"Jane Manager"}]}:r.includes("/sales/team")?{team:[{id:"1",name:"John Sales",email:"john.sales@company.com",role:"Sales Representative",performance:95,deals_closed:12,revenue_generated:75e3},{id:"2",name:"Jane Manager",email:"jane.manager@company.com",role:"Sales Manager",performance:88,deals_closed:8,revenue_generated:5e4}]}:r.includes("/leads")?{leads:[{id:"1",customer_name:"New Company Inc",company_name:"New Company Inc",email:"contact@newcompany.com",phone:"555-0123",source:"Website",lead_quality:"high",sales_stage:"qualification",potential_value:12e3,assigned_to:"John Sales",next_follow_up:"2024-01-20",created_at:"2024-01-15"},{id:"2",customer_name:"Prospect Corp",company_name:"Prospect Corp",email:"info@prospect.com",phone:"555-0456",source:"Referral",lead_quality:"medium",sales_stage:"proposal",potential_value:8e3,assigned_to:"Jane Manager",next_follow_up:"2024-01-18",created_at:"2024-01-10"}]}:r.includes("/quotes")?{quotes:[{id:"1",quote_number:"Q-2024-001",customer_id:"1",customer_name:"ABC Manufacturing",status:"sent",total_amount:15e3,valid_until:"2024-02-15",created_by:"John Sales",created_at:"2024-01-15"},{id:"2",quote_number:"Q-2024-002",customer_id:"2",customer_name:"TechCorp Solutions",status:"pending",total_amount:8500,valid_until:"2024-02-28",created_by:"Jane Manager",created_at:"2024-01-10"}]}:[]}async login(r,n){return this.request("/users/login",{method:"POST",body:JSON.stringify({email:r,password:n})})}async getUsers(r={}){const n=new URLSearchParams;r.limit&&n.append("limit",r.limit.toString()),r.offset&&n.append("offset",r.offset.toString());const s=n.toString(),a=s?`/users?${s}`:"/users";return this.request(a)}async logout(){return this.request("/auth/logout",{method:"POST"})}async getCustomers(r){const n=new URLSearchParams;r?.page&&n.append("page",r.page.toString()),r?.limit&&n.append("limit",r.limit.toString()),r?.search&&n.append("search",r.search),r?.status&&n.append("status",r.status),r?.owner_assigned&&n.append("owner_assigned",r.owner_assigned),r?.owner_name&&n.append("owner_name",r.owner_name),r?.customer_type&&n.append("customer_type",r.customer_type);const s=n.toString();return this.request(`/customers${s?`?${s}`:""}`)}async getCustomer(r){return this.request(`/customers/${r}`)}async getCustomerMachines(r){return this.request(`/machines/by-customer/${r}`)}async getCustomerWorkOrders(r,n){const s=new URLSearchParams;n?.page&&s.append("page",n.page.toString()),n?.limit&&s.append("limit",n.limit.toString());const a=s.toString();return this.request(`/workOrders${a?`?${a}&customer_id=${r}`:`?customer_id=${r}`}`)}async getCustomerWarrantyWorkOrders(r,n){const s=new URLSearchParams;n?.page&&s.append("page",n.page.toString()),n?.limit&&s.append("limit",n.limit.toString());const a=s.toString();return this.request(`/warrantyWorkOrders${a?`?${a}&customer_id=${r}`:`?customer_id=${r}`}`)}async createCustomer(r){return this.request("/customers",{method:"POST",body:JSON.stringify(r)})}async updateCustomer(r,n){return this.request(`/customers/${r}`,{method:"PATCH",body:JSON.stringify(n)})}async deleteCustomer(r){return this.request(`/customers/${r}`,{method:"DELETE"})}async getMachines(r){const n=new URLSearchParams;r?.page&&n.append("page",r.page.toString()),r?.limit&&n.append("limit",r.limit.toString()),r?.search&&n.append("search",r.search);const s=n.toString();return this.request(`/machines${s?`?${s}`:""}`)}async getMachineModels(r){const n=new URLSearchParams;r?.page&&n.append("page",r.page.toString()),r?.limit&&n.append("limit",r.limit.toString()),r?.search&&n.append("search",r.search),r?.category&&n.append("category",r.category),r?.manufacturer&&n.append("manufacturer",r.manufacturer);const s=n.toString();return this.request(`/machines/models${s?`?${s}`:""}`)}async getMachineModel(r,n){const s=new URLSearchParams;n?.warranty_status&&s.append("warranty_status",n.warranty_status);const a=s.toString();return this.request(`/machines/models/${r}${a?`?${a}`:""}`)}async getMachine(r){return this.request(`/machines/${r}`)}async getMachineWorkOrders(r,n){const s=new URLSearchParams;n?.page&&s.append("page",n.page.toString()),n?.limit&&s.append("limit",n.limit.toString());const a=s.toString();return this.request(`/workOrders${a?`?${a}&machine_id=${r}`:`?machine_id=${r}`}`)}async getMachineWarrantyWorkOrders(r,n){const s=new URLSearchParams;n?.page&&s.append("page",n.page.toString()),n?.limit&&s.append("limit",n.limit.toString());const a=s.toString();return this.request(`/warrantyWorkOrders${a?`?${a}&machine_id=${r}`:`?machine_id=${r}`}`)}async createMachine(r){return this.request("/machines",{method:"POST",body:JSON.stringify(r)})}async updateMachine(r,n){return this.request(`/assigned-machines/${r}`,{method:"PUT",body:JSON.stringify(n)})}async deleteMachine(r){return this.request(`/assigned-machines/${r}`,{method:"DELETE"})}async getInventory(r){const n=new URLSearchParams;r?.page&&n.append("page",r.page.toString()),r?.limit&&n.append("limit",r.limit.toString()),r?.search&&n.append("search",r.search),r?.category&&n.append("category",r.category),r?.supplier&&n.append("supplier",r.supplier),r?.stock_status&&n.append("stock_status",r.stock_status);const s=n.toString();return this.request(`/inventory${s?`?${s}`:""}`)}async getInventoryItem(r){return this.request(`/inventory/${r}`)}async createInventoryItem(r){return this.request("/inventory",{method:"POST",body:JSON.stringify(r)})}async getInventoryCategories(){return this.request("/inventory-categories")}async createInventoryCategory(r){return this.request("/inventory-categories",{method:"POST",body:JSON.stringify(r)})}async updateInventoryItem(r,n){return this.request(`/inventory/${r}`,{method:"PATCH",body:JSON.stringify(n)})}async deleteInventoryItem(r){return this.request(`/inventory/${r}`,{method:"DELETE"})}async getInventoryWorkOrders(r,n){const s=new URLSearchParams;n?.page&&s.append("page",n.page.toString()),n?.limit&&s.append("limit",n.limit.toString());const a=s.toString();return this.request(`/workOrders/by-inventory/${r}${a?`?${a}`:""}`)}async getInventoryWarrantyWorkOrders(r,n){const s=new URLSearchParams;n?.page&&s.append("page",n.page.toString()),n?.limit&&s.append("limit",n.limit.toString());const a=s.toString();return this.request(`/warrantyWorkOrders/by-inventory/${r}${a?`?${a}`:""}`)}async getRepairTickets(r){const n=new URLSearchParams;r?.page&&n.append("page",r.page.toString()),r?.limit&&n.append("limit",r.limit.toString()),r?.search&&n.append("search",r.search),r?.status&&n.append("status",r.status),r?.priority&&n.append("priority",r.priority),r?.technician_id&&n.append("technician_id",r.technician_id);const s=n.toString();return this.request(`/repairTickets${s?`?${s}`:""}`)}async getRepairTicket(r){return this.request(`/repairTickets/${r}`)}async createRepairTicket(r){return this.request("/repairTickets",{method:"POST",body:JSON.stringify(r)})}async updateRepairTicket(r,n){return this.request(`/repairTickets/${r}`,{method:"PUT",body:JSON.stringify(n)})}async deleteRepairTicket(r){return this.request(`/repairTickets/${r}`,{method:"DELETE"})}async convertRepairTicketToWorkOrder(r,n){return this.request(`/repairTickets/${r}/convert`,{method:"POST",body:JSON.stringify(n)})}async getWorkOrders(r){const n=new URLSearchParams;r?.page&&n.append("page",r.page.toString()),r?.limit&&n.append("limit",r.limit.toString()),r?.search&&n.append("search",r.search),r?.status&&n.append("status",r.status),r?.priority&&n.append("priority",r.priority),r?.technician_id&&n.append("technician_id",r.technician_id);const s=n.toString();return this.request(`/workOrders${s?`?${s}`:""}`)}async getWorkOrder(r){return this.request(`/workOrders/${r}`)}async createWorkOrder(r){return this.request("/workOrders",{method:"POST",body:JSON.stringify(r)})}async updateWorkOrder(r,n){return this.request(`/workOrders/${r}`,{method:"PATCH",body:JSON.stringify(n)})}async deleteWorkOrder(r){return this.request(`/workOrders/${r}`,{method:"DELETE"})}async getWorkOrderNotes(r){return this.request(`/workOrderNotes/${r}`)}async createWorkOrderNote(r){return this.request("/workOrderNotes",{method:"POST",body:JSON.stringify(r)})}async getWorkOrderInventory(r){return this.request(`/workOrderInventory/${r}`)}async createWorkOrderInventory(r){return this.request("/workOrderInventory",{method:"POST",body:JSON.stringify(r)})}async updateWorkOrderInventory(r,n){return this.request(`/workOrderInventory/${r}`,{method:"PATCH",body:JSON.stringify(n)})}async deleteWorkOrderInventory(r){return this.request(`/workOrderInventory/${r}`,{method:"DELETE"})}async getQuote(r){return this.request(`/quotes/${r}`)}async createQuote(r){return this.request("/quotes",{method:"POST",body:JSON.stringify(r)})}async updateQuote(r,n){return this.request(`/quotes/${r}`,{method:"PATCH",body:JSON.stringify(n)})}async deleteQuote(r){return this.request(`/quotes/${r}`,{method:"DELETE"})}async getDashboardStats(){return this.request("/dashboard")}async getRecentActivity(){return this.request("/dashboard")}async getSidebarCounts(){return this.request("/dashboard/sidebar-counts")}async getWarrantyRepairTickets(r){const n=new URLSearchParams;r?.page&&n.append("page",r.page.toString()),r?.limit&&n.append("limit",r.limit.toString()),r?.search&&n.append("search",r.search),r?.status&&n.append("status",r.status),r?.priority&&n.append("priority",r.priority),r?.technician_id&&n.append("technician_id",r.technician_id);const s=n.toString();return this.request(`/warrantyRepairTickets${s?`?${s}`:""}`)}async getWarrantyRepairTicket(r){return this.request(`/warrantyRepairTickets/${r}`)}async createWarrantyRepairTicket(r){return this.request("/warrantyRepairTickets",{method:"POST",body:JSON.stringify(r)})}async updateWarrantyRepairTicket(r,n){return this.request(`/warrantyRepairTickets/${r}`,{method:"PUT",body:JSON.stringify(n)})}async deleteWarrantyRepairTicket(r){return this.request(`/warrantyRepairTickets/${r}`,{method:"DELETE"})}async convertWarrantyRepairTicketToWorkOrder(r,n){return this.request(`/warrantyRepairTickets/${r}/convert`,{method:"POST",body:JSON.stringify(n)})}async getWarrantyWorkOrders(r){const n=new URLSearchParams;r?.page&&n.append("page",r.page.toString()),r?.limit&&n.append("limit",r.limit.toString()),r?.search&&n.append("search",r.search),r?.status&&n.append("status",r.status),r?.priority&&n.append("priority",r.priority),r?.technician_id&&n.append("technician_id",r.technician_id);const s=n.toString();return this.request(`/warrantyWorkOrders${s?`?${s}`:""}`)}async getWarrantyWorkOrder(r){return this.request(`/warrantyWorkOrders/${r}`)}async updateWarrantyWorkOrder(r,n){return this.request(`/warrantyWorkOrders/${r}`,{method:"PATCH",body:JSON.stringify(n)})}async deleteWarrantyWorkOrder(r){return this.request(`/warrantyWorkOrders/${r}`,{method:"DELETE"})}async getWarrantyWorkOrderNotes(r){return{data:(await this.request(`/warrantyWorkOrders/${r}/notes`)).data||[]}}async createWarrantyWorkOrderNote(r,n){return this.request(`/warrantyWorkOrders/${r}/notes`,{method:"POST",body:JSON.stringify(n)})}async getWarrantyWorkOrderInventory(r){return this.request(`/warrantyWorkOrders/${r}/inventory`)}async createWarrantyWorkOrderInventory(r,n){return this.request(`/warrantyWorkOrders/${r}/inventory`,{method:"POST",body:JSON.stringify(n)})}async deleteWarrantyWorkOrderInventory(r,n){return this.request(`/warrantyWorkOrders/${r}/inventory/${n}`,{method:"DELETE"})}async createMachineModel(r){return this.request("/machines/models",{method:"POST",body:JSON.stringify(r)})}async updateMachineModel(r,n){return this.request(`/machines/models/${r}`,{method:"PUT",body:JSON.stringify(n)})}async deleteMachineModel(r){return this.request(`/machines/models/${r}`,{method:"DELETE"})}async getMachineCategories(){return this.request("/machine-categories")}async createMachineCategory(r){return this.request("/machine-categories",{method:"POST",body:JSON.stringify(r)})}async createMachineSerial(r,n){return this.request(`/machine-serials/model/${r}`,{method:"POST",body:JSON.stringify({serial_numbers:[n]})})}async createAssignedMachine(r){return this.request("/assigned-machines",{method:"POST",body:JSON.stringify(r)})}async getUnassignedSerials(r){return this.request(`/machine-serials/unassigned/${r}`)}async getSuppliers(r){const n=new URLSearchParams;r?.page&&n.append("page",r.page.toString()),r?.limit&&n.append("limit",r.limit.toString()),r?.search&&n.append("search",r.search);const s=n.toString();return this.request(`/suppliers${s?`?${s}`:""}`)}async getSalesMetrics(r){const n=new URLSearchParams;r?.time_period&&n.append("time_period",r.time_period),r?.sales_person&&n.append("sales_person",r.sales_person);const s=n.toString();return this.request(`/sales/metrics${s?`?${s}`:""}`)}async getSalesOpportunities(r){const n=new URLSearchParams;r?.page&&n.append("page",r.page.toString()),r?.limit&&n.append("limit",r.limit.toString()),r?.search&&n.append("search",r.search),r?.stage&&n.append("stage",r.stage),r?.assigned_to&&n.append("assigned_to",r.assigned_to);const s=n.toString();return this.request(`/sales/opportunities${s?`?${s}`:""}`)}async getSalesTeam(r="monthly"){return this.request(`/sales/team?target_type=${r}`)}async getRecentSales(r){const n=new URLSearchParams;r?.limit&&n.append("limit",r.limit.toString());const s=n.toString();return this.request(`/sales/recent${s?`?${s}`:""}`)}async getLeads(r){const n=new URLSearchParams;r?.page&&n.append("page",r.page.toString()),r?.limit&&n.append("limit",r.limit.toString()),r?.search&&n.append("search",r.search),r?.stage&&n.append("status",r.stage),r?.quality&&n.append("quality",r.quality),r?.assigned_to&&n.append("assigned_to",r.assigned_to),r?.source&&n.append("source",r.source),r?.created_by&&n.append("created_by",r.created_by);const s=n.toString();return this.request(`/leads${s?`?${s}`:""}`)}async getLeadFilterOptions(){return this.request("/leads/filter-options")}async getLead(r){return this.request(`/leads/${r}`)}async createLead(r){return this.request("/leads",{method:"POST",body:JSON.stringify(r)})}async updateLead(r,n){return this.request(`/leads/${r}`,{method:"PATCH",body:JSON.stringify(n)})}async deleteLead(r){return this.request(`/leads/${r}`,{method:"DELETE"})}async getLeadStats(){return this.request("/leads/stats")}async getLeadsByStage(r){return this.request(`/leads/stage/${r}`)}async getPipelineStats(){return this.request("/leads/pipeline-stats")}async updateLeadStage(r,n,s){return this.request(`/leads/${r}/stage`,{method:"PATCH",body:JSON.stringify({stage:n,position:s})})}async getLeadFollowUps(r){return this.request(`/leads/${r}/follow-ups`)}async addLeadFollowUp(r,n){return this.request(`/leads/${r}/follow-ups`,{method:"POST",body:JSON.stringify(n)})}async updateFollowUpCompletion(r,n,s){return this.request(`/leads/${r}/follow-ups/${n}`,{method:"PATCH",body:JSON.stringify({completed:s})})}async getAllFollowUps(){return this.request("/leads/follow-ups/all")}async deleteFollowUp(r,n){return this.request(`/leads/${r}/follow-ups/${n}`,{method:"DELETE"})}async updateLeadFollowUp(r,n,s){return this.request(`/leads/${r}/follow-ups/${n}`,{method:"PUT",body:JSON.stringify(s)})}async deleteLeadFollowUp(r,n){return this.request(`/leads/${r}/follow-ups/${n}`,{method:"DELETE"})}async getQuotes(r){const n=new URLSearchParams;r?.page&&n.append("page",r.page.toString()),r?.limit&&n.append("limit",r.limit.toString()),r?.search&&n.append("search",r.search),r?.status&&n.append("status",r.status),r?.customer_id&&n.append("customer_id",r.customer_id),r?.created_by&&n.append("created_by",r.created_by);const s=n.toString();return this.request(`/quotes${s?`?${s}`:""}`)}async getQuoteStats(){return this.request("/quotes/stats")}async updateQuoteStatus(r,n){return this.request(`/quotes/${r}/status`,{method:"PATCH",body:JSON.stringify({status:n})})}async convertQuoteToOrder(r,n){return this.request(`/quotes/${r}/convert`,{method:"POST",body:JSON.stringify(n)})}async getQuoteItems(r){return this.request(`/quotes/${r}/items`)}async addQuoteItem(r,n){return this.request(`/quotes/${r}/items`,{method:"POST",body:JSON.stringify(n)})}async updateQuoteItem(r,n,s){return this.request(`/quotes/${r}/items/${n}`,{method:"PATCH",body:JSON.stringify(s)})}async deleteQuoteItem(r,n){return this.request(`/quotes/${r}/items/${n}`,{method:"DELETE"})}async getQuoteTemplates(r){const n=new URLSearchParams;r?.template_type&&n.append("template_type",r.template_type),r?.is_active!==void 0&&n.append("is_active",r.is_active.toString());const s=n.toString();return this.request(`/quotes/templates${s?`?${s}`:""}`)}async getQuoteTemplate(r){return this.request(`/quotes/templates/${r}`)}async createQuoteTemplate(r){return this.request("/quotes/templates",{method:"POST",body:JSON.stringify(r)})}async updateQuoteTemplate(r,n){return this.request(`/quotes/templates/${r}`,{method:"PATCH",body:JSON.stringify(n)})}async deleteQuoteTemplate(r){return this.request(`/quotes/templates/${r}`,{method:"DELETE"})}async createQuoteFromTemplate(r,n){return this.request(`/quotes/from-template/${r}`,{method:"POST",body:JSON.stringify(n)})}async getQuoteCatalogMachines(r){const n=new URLSearchParams;r?.search&&n.append("search",r.search),r?.category&&n.append("category",r.category),r?.manufacturer&&n.append("manufacturer",r.manufacturer);const s=n.toString();return this.request(`/quotes/catalog/machines${s?`?${s}`:""}`)}async getQuoteCatalogParts(r){const n=new URLSearchParams;r?.search&&n.append("search",r.search),r?.category&&n.append("category",r.category),r?.in_stock_only!==void 0&&n.append("in_stock_only",r.in_stock_only.toString());const s=n.toString();return this.request(`/quotes/catalog/parts${s?`?${s}`:""}`)}async getQuoteCatalogServices(){return this.request("/quotes/catalog/services")}async duplicateQuote(r){return this.request(`/quotes/${r}/duplicate`,{method:"POST"})}async downloadQuotePDF(r){const n=await fetch(`${f0}/quotes/${r}/pdf`,{method:"GET",headers:this.getAuthHeaders()});if(!n.ok)throw new Error("Failed to download PDF");const s=await n.blob(),a=new Blob([s],{type:"application/pdf"}),l=window.URL.createObjectURL(a),c=document.createElement("a");c.href=l,c.download=`quote-${r}.pdf`,c.style.display="none",document.body.appendChild(c),c.click(),setTimeout(()=>{window.URL.revokeObjectURL(l),document.body.removeChild(c)},100)}async getSalesReports(r){const n=new URLSearchParams;r?.time_period&&n.append("time_period",r.time_period),r?.report_type&&n.append("report_type",r.report_type),r?.sales_person&&n.append("sales_person",r.sales_person);const s=n.toString();return this.request(`/sales/reports${s?`?${s}`:""}`)}async getSalesTrends(r){const n=new URLSearchParams;r?.time_period&&n.append("time_period",r.time_period),r?.sales_person&&n.append("sales_person",r.sales_person),r?.start_date&&n.append("start_date",r.start_date),r?.end_date&&n.append("end_date",r.end_date),r?.group_by&&n.append("group_by",r.group_by);const s=n.toString();return this.request(`/sales/trends${s?`?${s}`:""}`)}async getTopCustomers(r){const n=new URLSearchParams;r?.limit&&n.append("limit",r.limit.toString()),r?.time_period&&n.append("time_period",r.time_period);const s=n.toString();return this.request(`/sales/top-customers${s?`?${s}`:""}`)}async getSalesForecast(r){const n=new URLSearchParams;r?.months&&n.append("months",r.months.toString());const s=n.toString();return this.request(`/sales/forecast${s?`?${s}`:""}`)}async getSalesUsers(){return this.request("/users/sales")}async getMyRepairs(r){const n=r?`?submitted_by=${r}`:"";return this.request(`/repairTickets${n}`)}async getMySales(r){const n=r?`?sales_person=${r}`:"";return this.request(`/sales/recent${n}`)}async getMyLeads(r){const n=r?`?assigned_to=${r}`:"";return this.request(`/leads${n}`)}async getMostUsedParts(r){const n=new URLSearchParams;r?.limit&&n.append("limit",r.limit.toString()),r?.start_date&&n.append("start_date",r.start_date),r?.end_date&&n.append("end_date",r.end_date);const s=n.toString();return this.request(`/analytics/most-used-parts${s?`?${s}`:""}`)}async getLeadSources(r){const n=new URLSearchParams;r?.time_period&&n.append("time_period",r.time_period);const s=n.toString();return this.request(`/sales/lead-sources${s?`?${s}`:""}`)}async getRentalMachines(r){const n=new URLSearchParams;r?.page&&n.append("page",r.page.toString()),r?.limit&&n.append("limit",r.limit.toString()),r?.search&&n.append("search",r.search),r?.status&&n.append("status",r.status),r?.condition&&n.append("condition",r.condition),r?.model_id&&n.append("model_id",r.model_id),r?.manufacturer&&n.append("manufacturer",r.manufacturer);const s=n.toString();return this.request(`/rental-machines${s?`?${s}`:""}`)}async getRentalMachine(r){return this.request(`/rental-machines/${r}`)}async createRentalMachine(r){return this.request("/rental-machines",{method:"POST",body:JSON.stringify(r)})}async updateRentalMachine(r,n){return this.request(`/rental-machines/${r}`,{method:"PUT",body:JSON.stringify(n)})}async deleteRentalMachine(r){return this.request(`/rental-machines/${r}`,{method:"DELETE"})}async getAvailableRentalMachines(r){const n=new URLSearchParams;r&&n.append("model_id",r);const s=n.toString();return this.request(`/rental-machines/available/list${s?`?${s}`:""}`)}async getRentalMachineStats(){return this.request("/rental-machines/stats/overview")}async getMachineRentals(r){const n=new URLSearchParams;r?.page&&n.append("page",r.page.toString()),r?.limit&&n.append("limit",r.limit.toString()),r?.search&&n.append("search",r.search),r?.status&&n.append("status",r.status),r?.customer_id&&n.append("customer_id",r.customer_id),r?.rental_machine_id&&n.append("rental_machine_id",r.rental_machine_id),r?.start_date&&n.append("start_date",r.start_date),r?.end_date&&n.append("end_date",r.end_date);const s=n.toString();return this.request(`/machine-rentals${s?`?${s}`:""}`)}async getMachineRental(r){return this.request(`/machine-rentals/${r}`)}async createMachineRental(r){return this.request("/machine-rentals",{method:"POST",body:JSON.stringify(r)})}async updateMachineRental(r,n){return this.request(`/machine-rentals/${r}`,{method:"PUT",body:JSON.stringify(n)})}async deleteMachineRental(r){return this.request(`/machine-rentals/${r}`,{method:"DELETE"})}async getMachineRentalStats(){return this.request("/machine-rentals/stats/overview")}async getOverdueRentals(){return this.request("/machine-rentals/overdue/list")}async getRentalMachineStatuses(){return this.request("/rental-machines/statuses")}async getRentalMachineTransitionRules(){return this.request("/rental-machines/transition-rules")}async updateRentalMachineStatus(r,n,s,a){return this.request(`/rental-machines/${r}/status`,{method:"PUT",body:JSON.stringify({status:n,reason:s,notes:a})})}async getRentalMachineStatusHistory(r,n){const s=new URLSearchParams;n&&s.append("limit",n.toString());const a=s.toString();return this.request(`/rental-machines/${r}/status-history${a?`?${a}`:""}`)}async getRentalMachineStatusStatistics(){return this.request("/rental-machines/status-statistics")}async processAutoTransitions(){return this.request("/rental-machines/process-auto-transitions",{method:"POST"})}async getRentalAnalyticsOverview(r="30d"){return this.request(`/rental-analytics/overview?dateRange=${r}`)}async getRentalFleetStats(){return this.request("/rental-analytics/fleet")}async getRentalRevenueStats(r="30d"){return this.request(`/rental-analytics/revenue?dateRange=${r}`)}async getRentalUtilizationStats(r="30d"){return this.request(`/rental-analytics/utilization?dateRange=${r}`)}async getRentalCustomerStats(r="30d"){return this.request(`/rental-analytics/customers?dateRange=${r}`)}async getRentalStatusStats(){return this.request("/rental-analytics/status")}async getRentalOverdueStats(){return this.request("/rental-analytics/overdue")}async getRentalTrends(r="30d",n="day"){return this.request(`/rental-analytics/trends?dateRange=${r}&groupBy=${n}`)}async getRentalMachinePerformance(r="30d"){return this.request(`/rental-analytics/machine-performance?dateRange=${r}`)}async getRentalDurationAnalytics(r="30d"){return this.request(`/rental-analytics/duration?dateRange=${r}`)}async getRentalBillingAnalytics(r="30d"){return this.request(`/rental-analytics/billing?dateRange=${r}`)}async getRentalRealTimeDashboard(){return this.request("/rental-analytics/realtime")}async calculateDynamicPricing(r,n,s,a){return this.request("/dynamic-pricing/calculate",{method:"POST",body:JSON.stringify({rental_machine_id:r,start_date:n,end_date:s,customer_id:a})})}async getAllBasePricing(){return this.request("/dynamic-pricing/base")}async getBasePricing(r){return this.request(`/dynamic-pricing/base/${r}`)}async setBasePricing(r,n){return this.request(`/dynamic-pricing/base/${r}`,{method:"PUT",body:JSON.stringify(n)})}async getPricingRules(){return this.request("/dynamic-pricing/rules")}async createPricingRule(r){return this.request("/dynamic-pricing/rules",{method:"POST",body:JSON.stringify(r)})}async updatePricingRule(r,n){return this.request(`/dynamic-pricing/rules/${r}`,{method:"PUT",body:JSON.stringify(n)})}async deletePricingRule(r){return this.request(`/dynamic-pricing/rules/${r}`,{method:"DELETE"})}async getCustomerTiers(){return this.request("/dynamic-pricing/customer-tiers")}async createCustomerTier(r){return this.request("/dynamic-pricing/customer-tiers",{method:"POST",body:JSON.stringify(r)})}async updateCustomerTier(r,n){return this.request(`/dynamic-pricing/customer-tiers/${r}`,{method:"PUT",body:JSON.stringify(n)})}async deleteCustomerTier(r){return this.request(`/dynamic-pricing/customer-tiers/${r}`,{method:"DELETE"})}async assignCustomerTier(r,n,s){return this.request("/dynamic-pricing/customer-tiers/assign",{method:"POST",body:JSON.stringify({customer_id:r,tier_id:n,expires_at:s})})}async getCustomerTier(r){return this.request(`/dynamic-pricing/customer-tiers/${r}`)}async updateDemandTracking(r){return this.request("/dynamic-pricing/demand-tracking",{method:"POST",body:JSON.stringify(r)})}async getDemandAnalytics(r="30d"){return this.request(`/dynamic-pricing/demand-analytics?dateRange=${r}`)}async getPricingHistory(r,n=50){return this.request(`/dynamic-pricing/history/${r}?limit=${n}`)}async runPricingSimulation(r,n){return this.request("/dynamic-pricing/simulation",{method:"POST",body:JSON.stringify({rental_machine_id:r,scenarios:n})})}async autoAssignCustomerTiers(){return this.request("/dynamic-pricing/auto-assign-tiers",{method:"POST"})}async getSalesTargets(r){const n=new URLSearchParams;r?.user_id&&n.append("user_id",r.user_id),r?.target_type&&n.append("target_type",r.target_type),r?.is_active!==void 0&&n.append("is_active",r.is_active.toString());const s=n.toString();return this.request(`/sales/targets${s?`?${s}`:""}`)}async getMyPerformance(){return this.request("/sales/my-performance")}async getUserTargets(r,n){const s=new URLSearchParams;n?.target_type&&s.append("target_type",n.target_type),n?.is_active!==void 0&&s.append("is_active",n.is_active.toString());const a=s.toString();return this.request(`/sales/targets/user/${r}${a?`?${a}`:""}`)}async createSalesTarget(r){return this.request("/sales/targets",{method:"POST",body:JSON.stringify(r)})}async updateSalesTarget(r,n){return this.request(`/sales/targets/${r}`,{method:"PUT",body:JSON.stringify(n)})}async deleteSalesTarget(r){return this.request(`/sales/targets/${r}`,{method:"DELETE"})}async getCurrentTargets(r){const n=new URLSearchParams;r&&n.append("user_id",r);const s=n.toString();return this.request(`/sales/targets/current${s?`?${s}`:""}`)}async getAvailablePermissions(){return this.request("/permissions/available")}async getUserPermissions(r){return this.request(`/permissions/user/${r}`)}async getUserPermissionAudit(r,n){const s=new URLSearchParams;n?.limit&&s.append("limit",n.limit.toString()),n?.offset&&s.append("offset",n.offset.toString());const a=s.toString();return this.request(`/permissions/audit/${r}${a?`?${a}`:""}`)}async grantPermission(r){return this.request("/permissions/grant",{method:"POST",body:JSON.stringify(r)})}async revokePermission(r){return this.request("/permissions/revoke",{method:"POST",body:JSON.stringify(r)})}async getUsersWithOverrides(){return this.request("/permissions/users-with-overrides")}async deletePermissionOverride(r){return this.request(`/permissions/${r}`,{method:"DELETE"})}async getAllTablePreferences(){return this.request("/table-preferences")}async getTablePreference(r){return this.request(`/table-preferences/${r}`)}async saveTablePreference(r,n){return this.request(`/table-preferences/${r}`,{method:"PUT",body:JSON.stringify({visible_columns:n})})}async deleteTablePreference(r){return this.request(`/table-preferences/${r}`,{method:"DELETE"})}async saveBulkTablePreferences(r){return this.request("/table-preferences/bulk",{method:"POST",body:JSON.stringify({preferences:r})})}async getAllActionLogs(r){const n=new URLSearchParams;return r&&Object.entries(r).forEach(([s,a])=>{a!=null&&a!==""&&n.append(s,a.toString())}),this.request(`/action-logs?${n.toString()}`)}async getUserActionLogs(r,n){const s=new URLSearchParams;return n&&Object.entries(n).forEach(([a,l])=>{l!=null&&l!==""&&s.append(a,l.toString())}),this.request(`/action-logs/user/${r}?${s.toString()}`)}async getActionLogStats(r){const n=new URLSearchParams;return r&&Object.entries(r).forEach(([s,a])=>{a!=null&&a!==""&&n.append(s,a.toString())}),this.request(`/action-logs/stats?${n.toString()}`)}async getEntityActionLogs(r,n,s){const a=new URLSearchParams;return s&&Object.entries(s).forEach(([l,c])=>{c!=null&&c!==""&&a.append(l,c.toString())}),this.request(`/action-logs/entity/${r}/${n}?${a.toString()}`)}async getManagerOverview(r){const n=new URLSearchParams;r?.time_period&&n.append("time_period",r.time_period),r?.start_date&&n.append("start_date",r.start_date),r?.end_date&&n.append("end_date",r.end_date);const s=n.toString();return this.request(`/manager-dashboard/overview${s?`?${s}`:""}`)}async getManagerTeamWorkload(r){const n=new URLSearchParams;r?.time_period&&n.append("time_period",r.time_period),r?.start_date&&n.append("start_date",r.start_date),r?.end_date&&n.append("end_date",r.end_date);const s=n.toString();return this.request(`/manager-dashboard/team-workload${s?`?${s}`:""}`)}async getManagerPriorityWorkOrders(){return this.request("/manager-dashboard/priority-work-orders")}async getManagerRecentActivity(){return this.request("/manager-dashboard/recent-activity")}async getManagerSalesOverview(r){const n=new URLSearchParams;r?.time_period&&n.append("time_period",r.time_period),r?.start_date&&n.append("start_date",r.start_date),r?.end_date&&n.append("end_date",r.end_date);const s=n.toString();return this.request(`/manager-dashboard/sales-overview${s?`?${s}`:""}`)}async getManagerSalesTeam(r){const n=new URLSearchParams;r?.time_period&&n.append("time_period",r.time_period),r?.start_date&&n.append("start_date",r.start_date),r?.end_date&&n.append("end_date",r.end_date);const s=n.toString();return this.request(`/manager-dashboard/sales-team${s?`?${s}`:""}`)}async getManagerRevenueTrends(r="month"){return this.request(`/manager-dashboard/revenue-trends?period=${r}`)}async getManagerTopOpportunities(){return this.request("/manager-dashboard/top-opportunities")}async getManagerInventoryAlerts(){return this.request("/manager-dashboard/inventory-alerts")}async updateUser(r,n){return this.request(`/users/${r}`,{method:"PATCH",body:JSON.stringify(n)})}async getRepairTicketYears(){return this.request("/repairTickets/filter/years")}async getWorkOrderYears(){return this.request("/workOrders/filter/years")}async getWarrantyRepairTicketYears(){return this.request("/warrantyRepairTickets/filter/years")}async getWarrantyWorkOrderYears(){return this.request("/warrantyWorkOrders/filter/years")}}const de=new WB,WO=f.createContext(void 0);function HB({children:t}){const[r,n]=f.useState(null),[s,a]=f.useState(null),[l,c]=f.useState([]),[u,d]=f.useState(!0);f.useEffect(()=>{(async()=>{const A=localStorage.getItem("token"),O=localStorage.getItem("user");if(A&&O)try{a(A),n(JSON.parse(O)),await new Promise(z=>setTimeout(z,100));try{if(!(await fetch(`${rn}/api/users/me`,{method:"GET",headers:{Authorization:`Bearer ${A}`,"Content-Type":"application/json"}})).ok)localStorage.removeItem("token"),localStorage.removeItem("user"),a(null),n(null);else{const R=JSON.parse(O);try{const G=await de.getUserPermissions(R.id);G.data?.overrides&&c(G.data.overrides)}catch(G){console.error("Error fetching user permissions on init:",G)}}}catch{}}catch{localStorage.removeItem("token"),localStorage.removeItem("user"),a(null),n(null)}d(!1)})()},[]);const h=async(E,A)=>{try{const O={"admin@repairshop.com":{id:"1",name:"Admin User",role:"admin",avatar:""},"john@repairshop.com":{id:"3",name:"Tech John",role:"technician",avatar:""},"manager@repairshop.com":{id:"2",name:"Manager User",role:"manager",avatar:""},"test@repairshop.com":{id:"9",name:"Test User",role:"admin",avatar:""}},z={"admin@repairshop.com":"admin","john@repairshop.com":"admin","manager@repairshop.com":"admin","test@repairshop.com":"test123"};if(O[E]&&z[E]===A){const J=O[E];try{const V=await fetch(`${rn}/api/users/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:E,password:A})});if(V.ok){const xe=await V.json();a(xe.accessToken),localStorage.setItem("token",xe.accessToken),localStorage.setItem("user",JSON.stringify(xe.user));try{const pe=await de.getUserPermissions(xe.user.id);pe.data?.overrides&&c(pe.data.overrides)}catch(pe){console.error("Error fetching user permissions:",pe),c([])}n(xe.user);return}}catch{}const ie=`demo-token-${J.id}`;a(ie),n(J),localStorage.setItem("token",ie),localStorage.setItem("user",JSON.stringify(J));return}const R=await fetch(`${rn}/api/users/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:E,password:A})});if(!R.ok){const J=await R.text();let ie="Login failed";try{ie=JSON.parse(J).message||ie}catch{ie=`Server error: ${R.status}`}throw new Error(ie)}const G=await R.json();a(G.accessToken),localStorage.setItem("token",G.accessToken),localStorage.setItem("user",JSON.stringify(G.user));try{const J=await de.getUserPermissions(G.user.id);J.data?.overrides&&c(J.data.overrides)}catch(J){console.error("Error fetching user permissions during login:",J),c([])}n(G.user)}catch(O){throw O instanceof Error?O:new Error("Network error. Please check if the backend is running.")}},x=async()=>{try{s&&(await fetch(`${rn}/api/auth/logout`,{method:"POST",headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"}})).ok}catch{}finally{localStorage.removeItem("redirectAfterLogin"),sessionStorage.clear(),a(null),n(null),c([]),localStorage.removeItem("token"),localStorage.removeItem("user"),Ne.info("Logged out",{description:"You have been logged out successfully."})}},p=async()=>{const E=s||localStorage.getItem("token");if(!E)return!1;try{return(await fetch(`${rn}/api/users/me`,{method:"GET",headers:{Authorization:`Bearer ${E}`,"Content-Type":"application/json"}})).ok}catch{return!1}},y=()=>{Ne.error("Session Expired",{description:"Your session has expired. Please log in again.",duration:5e3})},v=!!r&&!!s;f.useEffect(()=>{de.setLogoutCallback(x)},[x]),f.useEffect(()=>{if(!v)return;const E=setInterval(async()=>{try{await p()||(y(),await x(),window.location.href="/login")}catch{}},300*1e3);return()=>clearInterval(E)},[v,p,x]);const w=E=>r?.role===E,b=async()=>{if(r?.id)try{const E=await de.getUserPermissions(r.id);E.data?.overrides&&c(E.data.overrides)}catch(E){console.error("Error fetching user permissions:",E)}},N=E=>{if(!r?.role||!bx(r.role))return!1;const A=l.find(z=>z.permission_key===E);return A?A.expires_at&&new Date(A.expires_at)<new Date?Lx(r.role,E):A.granted:Lx(r.role,E)},_=E=>r?.role?E.includes(r.role):!1,S=E=>!r?.role||!bx(r.role)?!1:zB(r.role,E),k=E=>!r?.role||!bx(r.role)?!1:BB(r.role,E);return e.jsx(WO.Provider,{value:{user:r,token:s,userPermissions:l,login:h,logout:x,isLoading:u,isAuthenticated:v,hasRole:w,hasPermission:N,hasAnyRole:_,hasAnyPermission:S,hasAllPermissions:k,validateToken:p,refreshPermissions:b},children:t})}function hr(){const t=f.useContext(WO);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t}const Ei=Object.create(null);Ei.open="0";Ei.close="1";Ei.ping="2";Ei.pong="3";Ei.message="4";Ei.upgrade="5";Ei.noop="6";const wx=Object.create(null);Object.keys(Ei).forEach(t=>{wx[Ei[t]]=t});const x0={type:"error",data:"parser error"},HO=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",VO=typeof ArrayBuffer=="function",YO=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer,Zw=({type:t,data:r},n,s)=>HO&&r instanceof Blob?n?s(r):Zk(r,s):VO&&(r instanceof ArrayBuffer||YO(r))?n?s(r):Zk(new Blob([r]),s):s(Ei[t]+(r||"")),Zk=(t,r)=>{const n=new FileReader;return n.onload=function(){const s=n.result.split(",")[1];r("b"+(s||""))},n.readAsDataURL(t)};function Jk(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}let rj;function VB(t,r){if(HO&&t.data instanceof Blob)return t.data.arrayBuffer().then(Jk).then(r);if(VO&&(t.data instanceof ArrayBuffer||YO(t.data)))return r(Jk(t.data));Zw(t,!1,n=>{rj||(rj=new TextEncoder),r(rj.encode(n))})}const eA="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bm=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let t=0;t<eA.length;t++)bm[eA.charCodeAt(t)]=t;const YB=t=>{let r=t.length*.75,n=t.length,s,a=0,l,c,u,d;t[t.length-1]==="="&&(r--,t[t.length-2]==="="&&r--);const h=new ArrayBuffer(r),x=new Uint8Array(h);for(s=0;s<n;s+=4)l=bm[t.charCodeAt(s)],c=bm[t.charCodeAt(s+1)],u=bm[t.charCodeAt(s+2)],d=bm[t.charCodeAt(s+3)],x[a++]=l<<2|c>>4,x[a++]=(c&15)<<4|u>>2,x[a++]=(u&3)<<6|d&63;return h},KB=typeof ArrayBuffer=="function",Jw=(t,r)=>{if(typeof t!="string")return{type:"message",data:KO(t,r)};const n=t.charAt(0);return n==="b"?{type:"message",data:GB(t.substring(1),r)}:wx[n]?t.length>1?{type:wx[n],data:t.substring(1)}:{type:wx[n]}:x0},GB=(t,r)=>{if(KB){const n=YB(t);return KO(n,r)}else return{base64:!0,data:t}},KO=(t,r)=>{switch(r){case"blob":return t instanceof Blob?t:new Blob([t]);case"arraybuffer":default:return t instanceof ArrayBuffer?t:t.buffer}},GO="",QB=(t,r)=>{const n=t.length,s=new Array(n);let a=0;t.forEach((l,c)=>{Zw(l,!1,u=>{s[c]=u,++a===n&&r(s.join(GO))})})},XB=(t,r)=>{const n=t.split(GO),s=[];for(let a=0;a<n.length;a++){const l=Jw(n[a],r);if(s.push(l),l.type==="error")break}return s};function ZB(){return new TransformStream({transform(t,r){VB(t,n=>{const s=n.length;let a;if(s<126)a=new Uint8Array(1),new DataView(a.buffer).setUint8(0,s);else if(s<65536){a=new Uint8Array(3);const l=new DataView(a.buffer);l.setUint8(0,126),l.setUint16(1,s)}else{a=new Uint8Array(9);const l=new DataView(a.buffer);l.setUint8(0,127),l.setBigUint64(1,BigInt(s))}t.data&&typeof t.data!="string"&&(a[0]|=128),r.enqueue(a),r.enqueue(n)})}})}let nj;function Wf(t){return t.reduce((r,n)=>r+n.length,0)}function Hf(t,r){if(t[0].length===r)return t.shift();const n=new Uint8Array(r);let s=0;for(let a=0;a<r;a++)n[a]=t[0][s++],s===t[0].length&&(t.shift(),s=0);return t.length&&s<t[0].length&&(t[0]=t[0].slice(s)),n}function JB(t,r){nj||(nj=new TextDecoder);const n=[];let s=0,a=-1,l=!1;return new TransformStream({transform(c,u){for(n.push(c);;){if(s===0){if(Wf(n)<1)break;const d=Hf(n,1);l=(d[0]&128)===128,a=d[0]&127,a<126?s=3:a===126?s=1:s=2}else if(s===1){if(Wf(n)<2)break;const d=Hf(n,2);a=new DataView(d.buffer,d.byteOffset,d.length).getUint16(0),s=3}else if(s===2){if(Wf(n)<8)break;const d=Hf(n,8),h=new DataView(d.buffer,d.byteOffset,d.length),x=h.getUint32(0);if(x>Math.pow(2,21)-1){u.enqueue(x0);break}a=x*Math.pow(2,32)+h.getUint32(4),s=3}else{if(Wf(n)<a)break;const d=Hf(n,a);u.enqueue(Jw(l?d:nj.decode(d),r)),s=0}if(a===0||a>t){u.enqueue(x0);break}}}})}const QO=4;function Mn(t){if(t)return eW(t)}function eW(t){for(var r in Mn.prototype)t[r]=Mn.prototype[r];return t}Mn.prototype.on=Mn.prototype.addEventListener=function(t,r){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(r),this};Mn.prototype.once=function(t,r){function n(){this.off(t,n),r.apply(this,arguments)}return n.fn=r,this.on(t,n),this};Mn.prototype.off=Mn.prototype.removeListener=Mn.prototype.removeAllListeners=Mn.prototype.removeEventListener=function(t,r){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var n=this._callbacks["$"+t];if(!n)return this;if(arguments.length==1)return delete this._callbacks["$"+t],this;for(var s,a=0;a<n.length;a++)if(s=n[a],s===r||s.fn===r){n.splice(a,1);break}return n.length===0&&delete this._callbacks["$"+t],this};Mn.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var r=new Array(arguments.length-1),n=this._callbacks["$"+t],s=1;s<arguments.length;s++)r[s-1]=arguments[s];if(n){n=n.slice(0);for(var s=0,a=n.length;s<a;++s)n[s].apply(this,r)}return this};Mn.prototype.emitReserved=Mn.prototype.emit;Mn.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]};Mn.prototype.hasListeners=function(t){return!!this.listeners(t).length};const Op=typeof Promise=="function"&&typeof Promise.resolve=="function"?r=>Promise.resolve().then(r):(r,n)=>n(r,0),Oa=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),tW="arraybuffer";function XO(t,...r){return r.reduce((n,s)=>(t.hasOwnProperty(s)&&(n[s]=t[s]),n),{})}const rW=Oa.setTimeout,nW=Oa.clearTimeout;function Pp(t,r){r.useNativeTimers?(t.setTimeoutFn=rW.bind(Oa),t.clearTimeoutFn=nW.bind(Oa)):(t.setTimeoutFn=Oa.setTimeout.bind(Oa),t.clearTimeoutFn=Oa.clearTimeout.bind(Oa))}const sW=1.33;function aW(t){return typeof t=="string"?iW(t):Math.ceil((t.byteLength||t.size)*sW)}function iW(t){let r=0,n=0;for(let s=0,a=t.length;s<a;s++)r=t.charCodeAt(s),r<128?n+=1:r<2048?n+=2:r<55296||r>=57344?n+=3:(s++,n+=4);return n}function ZO(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function lW(t){let r="";for(let n in t)t.hasOwnProperty(n)&&(r.length&&(r+="&"),r+=encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return r}function oW(t){let r={},n=t.split("&");for(let s=0,a=n.length;s<a;s++){let l=n[s].split("=");r[decodeURIComponent(l[0])]=decodeURIComponent(l[1])}return r}class cW extends Error{constructor(r,n,s){super(r),this.description=n,this.context=s,this.type="TransportError"}}class eN extends Mn{constructor(r){super(),this.writable=!1,Pp(this,r),this.opts=r,this.query=r.query,this.socket=r.socket,this.supportsBinary=!r.forceBase64}onError(r,n,s){return super.emitReserved("error",new cW(r,n,s)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(r){this.readyState==="open"&&this.write(r)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(r){const n=Jw(r,this.socket.binaryType);this.onPacket(n)}onPacket(r){super.emitReserved("packet",r)}onClose(r){this.readyState="closed",super.emitReserved("close",r)}pause(r){}createUri(r,n={}){return r+"://"+this._hostname()+this._port()+this.opts.path+this._query(n)}_hostname(){const r=this.opts.hostname;return r.indexOf(":")===-1?r:"["+r+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(r){const n=lW(r);return n.length?"?"+n:""}}class dW extends eN{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(r){this.readyState="pausing";const n=()=>{this.readyState="paused",r()};if(this._polling||!this.writable){let s=0;this._polling&&(s++,this.once("pollComplete",function(){--s||n()})),this.writable||(s++,this.once("drain",function(){--s||n()}))}else n()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(r){const n=s=>{if(this.readyState==="opening"&&s.type==="open"&&this.onOpen(),s.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(s)};XB(r,this.socket.binaryType).forEach(n),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const r=()=>{this.write([{type:"close"}])};this.readyState==="open"?r():this.once("open",r)}write(r){this.writable=!1,QB(r,n=>{this.doWrite(n,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const r=this.opts.secure?"https":"http",n=this.query||{};return this.opts.timestampRequests!==!1&&(n[this.opts.timestampParam]=ZO()),!this.supportsBinary&&!n.sid&&(n.b64=1),this.createUri(r,n)}}let JO=!1;try{JO=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const uW=JO;function mW(){}class hW extends dW{constructor(r){if(super(r),typeof location<"u"){const n=location.protocol==="https:";let s=location.port;s||(s=n?"443":"80"),this.xd=typeof location<"u"&&r.hostname!==location.hostname||s!==r.port}}doWrite(r,n){const s=this.request({method:"POST",data:r});s.on("success",n),s.on("error",(a,l)=>{this.onError("xhr post error",a,l)})}doPoll(){const r=this.request();r.on("data",this.onData.bind(this)),r.on("error",(n,s)=>{this.onError("xhr poll error",n,s)}),this.pollXhr=r}}class Ni extends Mn{constructor(r,n,s){super(),this.createRequest=r,Pp(this,s),this._opts=s,this._method=s.method||"GET",this._uri=n,this._data=s.data!==void 0?s.data:null,this._create()}_create(){var r;const n=XO(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");n.xdomain=!!this._opts.xd;const s=this._xhr=this.createRequest(n);try{s.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){s.setDisableHeaderCheck&&s.setDisableHeaderCheck(!0);for(let a in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(a)&&s.setRequestHeader(a,this._opts.extraHeaders[a])}}catch{}if(this._method==="POST")try{s.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{s.setRequestHeader("Accept","*/*")}catch{}(r=this._opts.cookieJar)===null||r===void 0||r.addCookies(s),"withCredentials"in s&&(s.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(s.timeout=this._opts.requestTimeout),s.onreadystatechange=()=>{var a;s.readyState===3&&((a=this._opts.cookieJar)===null||a===void 0||a.parseCookies(s.getResponseHeader("set-cookie"))),s.readyState===4&&(s.status===200||s.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof s.status=="number"?s.status:0)},0))},s.send(this._data)}catch(a){this.setTimeoutFn(()=>{this._onError(a)},0);return}typeof document<"u"&&(this._index=Ni.requestsCount++,Ni.requests[this._index]=this)}_onError(r){this.emitReserved("error",r,this._xhr),this._cleanup(!0)}_cleanup(r){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=mW,r)try{this._xhr.abort()}catch{}typeof document<"u"&&delete Ni.requests[this._index],this._xhr=null}}_onLoad(){const r=this._xhr.responseText;r!==null&&(this.emitReserved("data",r),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}Ni.requestsCount=0;Ni.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",tA);else if(typeof addEventListener=="function"){const t="onpagehide"in Oa?"pagehide":"unload";addEventListener(t,tA,!1)}}function tA(){for(let t in Ni.requests)Ni.requests.hasOwnProperty(t)&&Ni.requests[t].abort()}const fW=(function(){const t=eP({xdomain:!1});return t&&t.responseType!==null})();class xW extends hW{constructor(r){super(r);const n=r&&r.forceBase64;this.supportsBinary=fW&&!n}request(r={}){return Object.assign(r,{xd:this.xd},this.opts),new Ni(eP,this.uri(),r)}}function eP(t){const r=t.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!r||uW))return new XMLHttpRequest}catch{}if(!r)try{return new Oa[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const tP=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class pW extends eN{get name(){return"websocket"}doOpen(){const r=this.uri(),n=this.opts.protocols,s=tP?{}:XO(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(s.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(r,n,s)}catch(a){return this.emitReserved("error",a)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=r=>this.onClose({description:"websocket connection closed",context:r}),this.ws.onmessage=r=>this.onData(r.data),this.ws.onerror=r=>this.onError("websocket error",r)}write(r){this.writable=!1;for(let n=0;n<r.length;n++){const s=r[n],a=n===r.length-1;Zw(s,this.supportsBinary,l=>{try{this.doWrite(s,l)}catch{}a&&Op(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const r=this.opts.secure?"wss":"ws",n=this.query||{};return this.opts.timestampRequests&&(n[this.opts.timestampParam]=ZO()),this.supportsBinary||(n.b64=1),this.createUri(r,n)}}const sj=Oa.WebSocket||Oa.MozWebSocket;class gW extends pW{createSocket(r,n,s){return tP?new sj(r,n,s):n?new sj(r,n):new sj(r)}doWrite(r,n){this.ws.send(n)}}class yW extends eN{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(r){return this.emitReserved("error",r)}this._transport.closed.then(()=>{this.onClose()}).catch(r=>{this.onError("webtransport error",r)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(r=>{const n=JB(Number.MAX_SAFE_INTEGER,this.socket.binaryType),s=r.readable.pipeThrough(n).getReader(),a=ZB();a.readable.pipeTo(r.writable),this._writer=a.writable.getWriter();const l=()=>{s.read().then(({done:u,value:d})=>{u||(this.onPacket(d),l())}).catch(u=>{})};l();const c={type:"open"};this.query.sid&&(c.data=`{"sid":"${this.query.sid}"}`),this._writer.write(c).then(()=>this.onOpen())})})}write(r){this.writable=!1;for(let n=0;n<r.length;n++){const s=r[n],a=n===r.length-1;this._writer.write(s).then(()=>{a&&Op(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var r;(r=this._transport)===null||r===void 0||r.close()}}const vW={websocket:gW,webtransport:yW,polling:xW},jW=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,bW=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function p0(t){if(t.length>8e3)throw"URI too long";const r=t,n=t.indexOf("["),s=t.indexOf("]");n!=-1&&s!=-1&&(t=t.substring(0,n)+t.substring(n,s).replace(/:/g,";")+t.substring(s,t.length));let a=jW.exec(t||""),l={},c=14;for(;c--;)l[bW[c]]=a[c]||"";return n!=-1&&s!=-1&&(l.source=r,l.host=l.host.substring(1,l.host.length-1).replace(/;/g,":"),l.authority=l.authority.replace("[","").replace("]","").replace(/;/g,":"),l.ipv6uri=!0),l.pathNames=wW(l,l.path),l.queryKey=NW(l,l.query),l}function wW(t,r){const n=/\/{2,9}/g,s=r.replace(n,"/").split("/");return(r.slice(0,1)=="/"||r.length===0)&&s.splice(0,1),r.slice(-1)=="/"&&s.splice(s.length-1,1),s}function NW(t,r){const n={};return r.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(s,a,l){a&&(n[a]=l)}),n}const g0=typeof addEventListener=="function"&&typeof removeEventListener=="function",Nx=[];g0&&addEventListener("offline",()=>{Nx.forEach(t=>t())},!1);class lo extends Mn{constructor(r,n){if(super(),this.binaryType=tW,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,r&&typeof r=="object"&&(n=r,r=null),r){const s=p0(r);n.hostname=s.host,n.secure=s.protocol==="https"||s.protocol==="wss",n.port=s.port,s.query&&(n.query=s.query)}else n.host&&(n.hostname=p0(n.host).host);Pp(this,n),this.secure=n.secure!=null?n.secure:typeof location<"u"&&location.protocol==="https:",n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.hostname=n.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=n.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},n.transports.forEach(s=>{const a=s.prototype.name;this.transports.push(a),this._transportsByName[a]=s}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},n),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=oW(this.opts.query)),g0&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},Nx.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(r){const n=Object.assign({},this.opts.query);n.EIO=QO,n.transport=r,this.id&&(n.sid=this.id);const s=Object.assign({},this.opts,{query:n,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[r]);return new this._transportsByName[r](s)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const r=this.opts.rememberUpgrade&&lo.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const n=this.createTransport(r);n.open(),this.setTransport(n)}setTransport(r){this.transport&&this.transport.removeAllListeners(),this.transport=r,r.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",n=>this._onClose("transport close",n))}onOpen(){this.readyState="open",lo.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(r){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",r),this.emitReserved("heartbeat"),r.type){case"open":this.onHandshake(JSON.parse(r.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const n=new Error("server error");n.code=r.data,this._onError(n);break;case"message":this.emitReserved("data",r.data),this.emitReserved("message",r.data);break}}onHandshake(r){this.emitReserved("handshake",r),this.id=r.sid,this.transport.query.sid=r.sid,this._pingInterval=r.pingInterval,this._pingTimeout=r.pingTimeout,this._maxPayload=r.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const r=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+r,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},r),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const r=this._getWritablePackets();this.transport.send(r),this._prevBufferLen=r.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let n=1;for(let s=0;s<this.writeBuffer.length;s++){const a=this.writeBuffer[s].data;if(a&&(n+=aW(a)),s>0&&n>this._maxPayload)return this.writeBuffer.slice(0,s);n+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const r=Date.now()>this._pingTimeoutTime;return r&&(this._pingTimeoutTime=0,Op(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),r}write(r,n,s){return this._sendPacket("message",r,n,s),this}send(r,n,s){return this._sendPacket("message",r,n,s),this}_sendPacket(r,n,s,a){if(typeof n=="function"&&(a=n,n=void 0),typeof s=="function"&&(a=s,s=null),this.readyState==="closing"||this.readyState==="closed")return;s=s||{},s.compress=s.compress!==!1;const l={type:r,data:n,options:s};this.emitReserved("packetCreate",l),this.writeBuffer.push(l),a&&this.once("flush",a),this.flush()}close(){const r=()=>{this._onClose("forced close"),this.transport.close()},n=()=>{this.off("upgrade",n),this.off("upgradeError",n),r()},s=()=>{this.once("upgrade",n),this.once("upgradeError",n)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?s():r()}):this.upgrading?s():r()),this}_onError(r){if(lo.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",r),this._onClose("transport error",r)}_onClose(r,n){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),g0&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const s=Nx.indexOf(this._offlineEventListener);s!==-1&&Nx.splice(s,1)}this.readyState="closed",this.id=null,this.emitReserved("close",r,n),this.writeBuffer=[],this._prevBufferLen=0}}}lo.protocol=QO;class _W extends lo{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let r=0;r<this._upgrades.length;r++)this._probe(this._upgrades[r])}_probe(r){let n=this.createTransport(r),s=!1;lo.priorWebsocketSuccess=!1;const a=()=>{s||(n.send([{type:"ping",data:"probe"}]),n.once("packet",p=>{if(!s)if(p.type==="pong"&&p.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",n),!n)return;lo.priorWebsocketSuccess=n.name==="websocket",this.transport.pause(()=>{s||this.readyState!=="closed"&&(x(),this.setTransport(n),n.send([{type:"upgrade"}]),this.emitReserved("upgrade",n),n=null,this.upgrading=!1,this.flush())})}else{const y=new Error("probe error");y.transport=n.name,this.emitReserved("upgradeError",y)}}))};function l(){s||(s=!0,x(),n.close(),n=null)}const c=p=>{const y=new Error("probe error: "+p);y.transport=n.name,l(),this.emitReserved("upgradeError",y)};function u(){c("transport closed")}function d(){c("socket closed")}function h(p){n&&p.name!==n.name&&l()}const x=()=>{n.removeListener("open",a),n.removeListener("error",c),n.removeListener("close",u),this.off("close",d),this.off("upgrading",h)};n.once("open",a),n.once("error",c),n.once("close",u),this.once("close",d),this.once("upgrading",h),this._upgrades.indexOf("webtransport")!==-1&&r!=="webtransport"?this.setTimeoutFn(()=>{s||n.open()},200):n.open()}onHandshake(r){this._upgrades=this._filterUpgrades(r.upgrades),super.onHandshake(r)}_filterUpgrades(r){const n=[];for(let s=0;s<r.length;s++)~this.transports.indexOf(r[s])&&n.push(r[s]);return n}}let CW=class extends _W{constructor(r,n={}){const s=typeof r=="object"?r:n;(!s.transports||s.transports&&typeof s.transports[0]=="string")&&(s.transports=(s.transports||["polling","websocket","webtransport"]).map(a=>vW[a]).filter(a=>!!a)),super(r,s)}};function SW(t,r="",n){let s=t;n=n||typeof location<"u"&&location,t==null&&(t=n.protocol+"//"+n.host),typeof t=="string"&&(t.charAt(0)==="/"&&(t.charAt(1)==="/"?t=n.protocol+t:t=n.host+t),/^(https?|wss?):\/\//.test(t)||(typeof n<"u"?t=n.protocol+"//"+t:t="https://"+t),s=p0(t)),s.port||(/^(http|ws)$/.test(s.protocol)?s.port="80":/^(http|ws)s$/.test(s.protocol)&&(s.port="443")),s.path=s.path||"/";const l=s.host.indexOf(":")!==-1?"["+s.host+"]":s.host;return s.id=s.protocol+"://"+l+":"+s.port+r,s.href=s.protocol+"://"+l+(n&&n.port===s.port?"":":"+s.port),s}const kW=typeof ArrayBuffer=="function",AW=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,rP=Object.prototype.toString,EW=typeof Blob=="function"||typeof Blob<"u"&&rP.call(Blob)==="[object BlobConstructor]",MW=typeof File=="function"||typeof File<"u"&&rP.call(File)==="[object FileConstructor]";function tN(t){return kW&&(t instanceof ArrayBuffer||AW(t))||EW&&t instanceof Blob||MW&&t instanceof File}function _x(t,r){if(!t||typeof t!="object")return!1;if(Array.isArray(t)){for(let n=0,s=t.length;n<s;n++)if(_x(t[n]))return!0;return!1}if(tN(t))return!0;if(t.toJSON&&typeof t.toJSON=="function"&&arguments.length===1)return _x(t.toJSON(),!0);for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&_x(t[n]))return!0;return!1}function TW(t){const r=[],n=t.data,s=t;return s.data=y0(n,r),s.attachments=r.length,{packet:s,buffers:r}}function y0(t,r){if(!t)return t;if(tN(t)){const n={_placeholder:!0,num:r.length};return r.push(t),n}else if(Array.isArray(t)){const n=new Array(t.length);for(let s=0;s<t.length;s++)n[s]=y0(t[s],r);return n}else if(typeof t=="object"&&!(t instanceof Date)){const n={};for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(n[s]=y0(t[s],r));return n}return t}function OW(t,r){return t.data=v0(t.data,r),delete t.attachments,t}function v0(t,r){if(!t)return t;if(t&&t._placeholder===!0){if(typeof t.num=="number"&&t.num>=0&&t.num<r.length)return r[t.num];throw new Error("illegal attachments")}else if(Array.isArray(t))for(let n=0;n<t.length;n++)t[n]=v0(t[n],r);else if(typeof t=="object")for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(t[n]=v0(t[n],r));return t}const PW=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],DW=5;var _r;(function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"})(_r||(_r={}));class RW{constructor(r){this.replacer=r}encode(r){return(r.type===_r.EVENT||r.type===_r.ACK)&&_x(r)?this.encodeAsBinary({type:r.type===_r.EVENT?_r.BINARY_EVENT:_r.BINARY_ACK,nsp:r.nsp,data:r.data,id:r.id}):[this.encodeAsString(r)]}encodeAsString(r){let n=""+r.type;return(r.type===_r.BINARY_EVENT||r.type===_r.BINARY_ACK)&&(n+=r.attachments+"-"),r.nsp&&r.nsp!=="/"&&(n+=r.nsp+","),r.id!=null&&(n+=r.id),r.data!=null&&(n+=JSON.stringify(r.data,this.replacer)),n}encodeAsBinary(r){const n=TW(r),s=this.encodeAsString(n.packet),a=n.buffers;return a.unshift(s),a}}function rA(t){return Object.prototype.toString.call(t)==="[object Object]"}class rN extends Mn{constructor(r){super(),this.reviver=r}add(r){let n;if(typeof r=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");n=this.decodeString(r);const s=n.type===_r.BINARY_EVENT;s||n.type===_r.BINARY_ACK?(n.type=s?_r.EVENT:_r.ACK,this.reconstructor=new LW(n),n.attachments===0&&super.emitReserved("decoded",n)):super.emitReserved("decoded",n)}else if(tN(r)||r.base64)if(this.reconstructor)n=this.reconstructor.takeBinaryData(r),n&&(this.reconstructor=null,super.emitReserved("decoded",n));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+r)}decodeString(r){let n=0;const s={type:Number(r.charAt(0))};if(_r[s.type]===void 0)throw new Error("unknown packet type "+s.type);if(s.type===_r.BINARY_EVENT||s.type===_r.BINARY_ACK){const l=n+1;for(;r.charAt(++n)!=="-"&&n!=r.length;);const c=r.substring(l,n);if(c!=Number(c)||r.charAt(n)!=="-")throw new Error("Illegal attachments");s.attachments=Number(c)}if(r.charAt(n+1)==="/"){const l=n+1;for(;++n&&!(r.charAt(n)===","||n===r.length););s.nsp=r.substring(l,n)}else s.nsp="/";const a=r.charAt(n+1);if(a!==""&&Number(a)==a){const l=n+1;for(;++n;){const c=r.charAt(n);if(c==null||Number(c)!=c){--n;break}if(n===r.length)break}s.id=Number(r.substring(l,n+1))}if(r.charAt(++n)){const l=this.tryParse(r.substr(n));if(rN.isPayloadValid(s.type,l))s.data=l;else throw new Error("invalid payload")}return s}tryParse(r){try{return JSON.parse(r,this.reviver)}catch{return!1}}static isPayloadValid(r,n){switch(r){case _r.CONNECT:return rA(n);case _r.DISCONNECT:return n===void 0;case _r.CONNECT_ERROR:return typeof n=="string"||rA(n);case _r.EVENT:case _r.BINARY_EVENT:return Array.isArray(n)&&(typeof n[0]=="number"||typeof n[0]=="string"&&PW.indexOf(n[0])===-1);case _r.ACK:case _r.BINARY_ACK:return Array.isArray(n)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class LW{constructor(r){this.packet=r,this.buffers=[],this.reconPack=r}takeBinaryData(r){if(this.buffers.push(r),this.buffers.length===this.reconPack.attachments){const n=OW(this.reconPack,this.buffers);return this.finishedReconstruction(),n}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const IW=Object.freeze(Object.defineProperty({__proto__:null,Decoder:rN,Encoder:RW,get PacketType(){return _r},protocol:DW},Symbol.toStringTag,{value:"Module"}));function Ga(t,r,n){return t.on(r,n),function(){t.off(r,n)}}const $W=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class nP extends Mn{constructor(r,n,s){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=r,this.nsp=n,s&&s.auth&&(this.auth=s.auth),this._opts=Object.assign({},s),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const r=this.io;this.subs=[Ga(r,"open",this.onopen.bind(this)),Ga(r,"packet",this.onpacket.bind(this)),Ga(r,"error",this.onerror.bind(this)),Ga(r,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...r){return r.unshift("message"),this.emit.apply(this,r),this}emit(r,...n){var s,a,l;if($W.hasOwnProperty(r))throw new Error('"'+r.toString()+'" is a reserved event name');if(n.unshift(r),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;const c={type:_r.EVENT,data:n};if(c.options={},c.options.compress=this.flags.compress!==!1,typeof n[n.length-1]=="function"){const x=this.ids++,p=n.pop();this._registerAckCallback(x,p),c.id=x}const u=(a=(s=this.io.engine)===null||s===void 0?void 0:s.transport)===null||a===void 0?void 0:a.writable,d=this.connected&&!(!((l=this.io.engine)===null||l===void 0)&&l._hasPingExpired());return this.flags.volatile&&!u||(d?(this.notifyOutgoingListeners(c),this.packet(c)):this.sendBuffer.push(c)),this.flags={},this}_registerAckCallback(r,n){var s;const a=(s=this.flags.timeout)!==null&&s!==void 0?s:this._opts.ackTimeout;if(a===void 0){this.acks[r]=n;return}const l=this.io.setTimeoutFn(()=>{delete this.acks[r];for(let u=0;u<this.sendBuffer.length;u++)this.sendBuffer[u].id===r&&this.sendBuffer.splice(u,1);n.call(this,new Error("operation has timed out"))},a),c=(...u)=>{this.io.clearTimeoutFn(l),n.apply(this,u)};c.withError=!0,this.acks[r]=c}emitWithAck(r,...n){return new Promise((s,a)=>{const l=(c,u)=>c?a(c):s(u);l.withError=!0,n.push(l),this.emit(r,...n)})}_addToQueue(r){let n;typeof r[r.length-1]=="function"&&(n=r.pop());const s={id:this._queueSeq++,tryCount:0,pending:!1,args:r,flags:Object.assign({fromQueue:!0},this.flags)};r.push((a,...l)=>s!==this._queue[0]?void 0:(a!==null?s.tryCount>this._opts.retries&&(this._queue.shift(),n&&n(a)):(this._queue.shift(),n&&n(null,...l)),s.pending=!1,this._drainQueue())),this._queue.push(s),this._drainQueue()}_drainQueue(r=!1){if(!this.connected||this._queue.length===0)return;const n=this._queue[0];n.pending&&!r||(n.pending=!0,n.tryCount++,this.flags=n.flags,this.emit.apply(this,n.args))}packet(r){r.nsp=this.nsp,this.io._packet(r)}onopen(){typeof this.auth=="function"?this.auth(r=>{this._sendConnectPacket(r)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(r){this.packet({type:_r.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},r):r})}onerror(r){this.connected||this.emitReserved("connect_error",r)}onclose(r,n){this.connected=!1,delete this.id,this.emitReserved("disconnect",r,n),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(r=>{if(!this.sendBuffer.some(s=>String(s.id)===r)){const s=this.acks[r];delete this.acks[r],s.withError&&s.call(this,new Error("socket has been disconnected"))}})}onpacket(r){if(r.nsp===this.nsp)switch(r.type){case _r.CONNECT:r.data&&r.data.sid?this.onconnect(r.data.sid,r.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case _r.EVENT:case _r.BINARY_EVENT:this.onevent(r);break;case _r.ACK:case _r.BINARY_ACK:this.onack(r);break;case _r.DISCONNECT:this.ondisconnect();break;case _r.CONNECT_ERROR:this.destroy();const s=new Error(r.data.message);s.data=r.data.data,this.emitReserved("connect_error",s);break}}onevent(r){const n=r.data||[];r.id!=null&&n.push(this.ack(r.id)),this.connected?this.emitEvent(n):this.receiveBuffer.push(Object.freeze(n))}emitEvent(r){if(this._anyListeners&&this._anyListeners.length){const n=this._anyListeners.slice();for(const s of n)s.apply(this,r)}super.emit.apply(this,r),this._pid&&r.length&&typeof r[r.length-1]=="string"&&(this._lastOffset=r[r.length-1])}ack(r){const n=this;let s=!1;return function(...a){s||(s=!0,n.packet({type:_r.ACK,id:r,data:a}))}}onack(r){const n=this.acks[r.id];typeof n=="function"&&(delete this.acks[r.id],n.withError&&r.data.unshift(null),n.apply(this,r.data))}onconnect(r,n){this.id=r,this.recovered=n&&this._pid===n,this._pid=n,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(r=>this.emitEvent(r)),this.receiveBuffer=[],this.sendBuffer.forEach(r=>{this.notifyOutgoingListeners(r),this.packet(r)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(r=>r()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:_r.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(r){return this.flags.compress=r,this}get volatile(){return this.flags.volatile=!0,this}timeout(r){return this.flags.timeout=r,this}onAny(r){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(r),this}prependAny(r){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(r),this}offAny(r){if(!this._anyListeners)return this;if(r){const n=this._anyListeners;for(let s=0;s<n.length;s++)if(r===n[s])return n.splice(s,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(r){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(r),this}prependAnyOutgoing(r){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(r),this}offAnyOutgoing(r){if(!this._anyOutgoingListeners)return this;if(r){const n=this._anyOutgoingListeners;for(let s=0;s<n.length;s++)if(r===n[s])return n.splice(s,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(r){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const n=this._anyOutgoingListeners.slice();for(const s of n)s.apply(this,r.data)}}}function Qd(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}Qd.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var r=Math.random(),n=Math.floor(r*this.jitter*t);t=(Math.floor(r*10)&1)==0?t-n:t+n}return Math.min(t,this.max)|0};Qd.prototype.reset=function(){this.attempts=0};Qd.prototype.setMin=function(t){this.ms=t};Qd.prototype.setMax=function(t){this.max=t};Qd.prototype.setJitter=function(t){this.jitter=t};class j0 extends Mn{constructor(r,n){var s;super(),this.nsps={},this.subs=[],r&&typeof r=="object"&&(n=r,r=void 0),n=n||{},n.path=n.path||"/socket.io",this.opts=n,Pp(this,n),this.reconnection(n.reconnection!==!1),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor((s=n.randomizationFactor)!==null&&s!==void 0?s:.5),this.backoff=new Qd({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(n.timeout==null?2e4:n.timeout),this._readyState="closed",this.uri=r;const a=n.parser||IW;this.encoder=new a.Encoder,this.decoder=new a.Decoder,this._autoConnect=n.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(r){return arguments.length?(this._reconnection=!!r,r||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(r){return r===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=r,this)}reconnectionDelay(r){var n;return r===void 0?this._reconnectionDelay:(this._reconnectionDelay=r,(n=this.backoff)===null||n===void 0||n.setMin(r),this)}randomizationFactor(r){var n;return r===void 0?this._randomizationFactor:(this._randomizationFactor=r,(n=this.backoff)===null||n===void 0||n.setJitter(r),this)}reconnectionDelayMax(r){var n;return r===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=r,(n=this.backoff)===null||n===void 0||n.setMax(r),this)}timeout(r){return arguments.length?(this._timeout=r,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(r){if(~this._readyState.indexOf("open"))return this;this.engine=new CW(this.uri,this.opts);const n=this.engine,s=this;this._readyState="opening",this.skipReconnect=!1;const a=Ga(n,"open",function(){s.onopen(),r&&r()}),l=u=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",u),r?r(u):this.maybeReconnectOnOpen()},c=Ga(n,"error",l);if(this._timeout!==!1){const u=this._timeout,d=this.setTimeoutFn(()=>{a(),l(new Error("timeout")),n.close()},u);this.opts.autoUnref&&d.unref(),this.subs.push(()=>{this.clearTimeoutFn(d)})}return this.subs.push(a),this.subs.push(c),this}connect(r){return this.open(r)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const r=this.engine;this.subs.push(Ga(r,"ping",this.onping.bind(this)),Ga(r,"data",this.ondata.bind(this)),Ga(r,"error",this.onerror.bind(this)),Ga(r,"close",this.onclose.bind(this)),Ga(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(r){try{this.decoder.add(r)}catch(n){this.onclose("parse error",n)}}ondecoded(r){Op(()=>{this.emitReserved("packet",r)},this.setTimeoutFn)}onerror(r){this.emitReserved("error",r)}socket(r,n){let s=this.nsps[r];return s?this._autoConnect&&!s.active&&s.connect():(s=new nP(this,r,n),this.nsps[r]=s),s}_destroy(r){const n=Object.keys(this.nsps);for(const s of n)if(this.nsps[s].active)return;this._close()}_packet(r){const n=this.encoder.encode(r);for(let s=0;s<n.length;s++)this.engine.write(n[s],r.options)}cleanup(){this.subs.forEach(r=>r()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(r,n){var s;this.cleanup(),(s=this.engine)===null||s===void 0||s.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",r,n),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const r=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const n=this.backoff.duration();this._reconnecting=!0;const s=this.setTimeoutFn(()=>{r.skipReconnect||(this.emitReserved("reconnect_attempt",r.backoff.attempts),!r.skipReconnect&&r.open(a=>{a?(r._reconnecting=!1,r.reconnect(),this.emitReserved("reconnect_error",a)):r.onreconnect()}))},n);this.opts.autoUnref&&s.unref(),this.subs.push(()=>{this.clearTimeoutFn(s)})}}onreconnect(){const r=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",r)}}const im={};function Cx(t,r){typeof t=="object"&&(r=t,t=void 0),r=r||{};const n=SW(t,r.path||"/socket.io"),s=n.source,a=n.id,l=n.path,c=im[a]&&l in im[a].nsps,u=r.forceNew||r["force new connection"]||r.multiplex===!1||c;let d;return u?d=new j0(s,r):(im[a]||(im[a]=new j0(s,r)),d=im[a]),n.query&&!r.query&&(r.query=n.queryKey),d.socket(n.path,r)}Object.assign(Cx,{Manager:j0,Socket:nP,io:Cx,connect:Cx});const sP=f.createContext(void 0);function FW({children:t}){const[r,n]=f.useState(null),[s,a]=f.useState(!1),[l,c]=f.useState(new Set),{user:u,token:d,isAuthenticated:h}=hr(),x=f.useRef(),p=f.useRef();f.useEffect(()=>{if(!h||!d||!u){x.current&&(clearTimeout(x.current),x.current=void 0),p.current&&(clearInterval(p.current),p.current=void 0),r&&(r.disconnect(),n(null),a(!1),c(new Set));return}const w=Cx(rn,{auth:{token:d},transports:["websocket","polling"]});return w.on("connect",()=>{a(!0),x.current&&clearTimeout(x.current),p.current&&clearInterval(p.current),p.current=setInterval(()=>{w.emit("heartbeat")},6e4)}),w.on("disconnect",()=>{a(!1),p.current&&(clearInterval(p.current),p.current=void 0),x.current&&(clearTimeout(x.current),x.current=void 0),h&&d&&u&&(x.current=setTimeout(()=>{h&&d&&u&&w.connect()},3e3))}),w.on("connect_error",b=>{console.error("WebSocket connection error:",b),a(!1)}),w.on("user_online",b=>{c(N=>new Set([...N,b.userId]))}),w.on("user_offline",b=>{c(N=>{const _=new Set(N);return _.delete(b.userId),_})}),w.on("user_activity_update",b=>{}),n(w),()=>{x.current&&clearTimeout(x.current),p.current&&clearInterval(p.current),w.disconnect()}},[h,d,u]);const y=w=>{r&&s&&r.emit("user_status_update",{status:w})},v=()=>{r&&(r.disconnect(),n(null),a(!1),c(new Set))};return e.jsx(sP.Provider,{value:{socket:r,isConnected:s,onlineUsers:l,emitUserStatus:y,forceDisconnect:v},children:t})}function nN(){const t=f.useContext(sP);if(t===void 0)throw new Error("useWebSocket must be used within a WebSocketProvider");return t}const aP=f.createContext(void 0);function qW({children:t}){const[r,n]=f.useState([]),[s,a]=f.useState(0),[l,c]=f.useState(!1),{user:u,isAuthenticated:d}=hr(),{socket:h,isConnected:x}=nN(),p=f.useCallback(async(E=1,A=20)=>{if(d)try{c(!0);const O=await de.request(`/notifications?page=${E}&limit=${A}`);n(O.notifications||[]);const z=await de.request("/notifications/unread-count");a(z.unreadCount||0)}catch(O){console.error("Error fetching notifications:",O),Ne.error("Failed to load notifications")}finally{c(!1)}},[d]),y=f.useCallback(async E=>{try{r.find(z=>z.id===E)&&E>1e12||await de.request(`/notifications/${E}/mark-read`,{method:"PATCH"}),n(z=>z.map(R=>R.id===E?{...R,is_read:!0}:R)),a(z=>Math.max(0,z-1))}catch(A){console.error("Error marking notification as read:",A),n(O=>O.map(z=>z.id===E?{...z,is_read:!0}:z)),a(O=>Math.max(0,O-1))}},[r]),v=f.useCallback(async()=>{try{await de.request("/notifications/mark-all-read",{method:"PATCH"}),n(E=>E.map(A=>({...A,is_read:!0}))),a(0),Ne.success("All notifications marked as read")}catch(E){console.error("Error marking all notifications as read:",E),Ne.error("Failed to mark all notifications as read")}},[]),w=f.useCallback(async E=>{try{r.find(R=>R.id===E)&&E>1e12||await de.request(`/notifications/${E}`,{method:"DELETE"}),n(R=>R.filter(G=>G.id!==E));const z=r.find(R=>R.id===E);z&&!z.is_read&&a(R=>Math.max(0,R-1)),window.dispatchEvent(new CustomEvent("notificationsChanged"))}catch(A){console.error("Error deleting notification:",A),n(z=>z.filter(R=>R.id!==E));const O=r.find(z=>z.id===E);O&&!O.is_read&&a(z=>Math.max(0,z-1))}},[r]),b=f.useCallback(async()=>{try{await de.request("/notifications/delete-read",{method:"DELETE"}),n(E=>E.filter(A=>!A.is_read)),window.dispatchEvent(new CustomEvent("notificationsChanged")),Ne.success("All read notifications deleted")}catch(E){console.error("Error deleting read notifications:",E),Ne.error("Failed to delete read notifications")}},[]),N=f.useCallback(async E=>{try{await de.request("/notifications/delete-multiple",{method:"POST",body:JSON.stringify({ids:E})}),n(O=>O.filter(z=>!E.includes(z.id)));const A=r.filter(O=>E.includes(O.id)&&!O.is_read).length;a(O=>Math.max(0,O-A)),window.dispatchEvent(new CustomEvent("notificationsChanged")),Ne.success(`${E.length} notifications deleted`)}catch(A){console.error("Error deleting multiple notifications:",A),Ne.error("Failed to delete notifications")}},[r]),_=f.useCallback(E=>{n(A=>[E,...A]),E.is_read||a(A=>A+1)},[]),S=f.useCallback(E=>{a(E)},[]),k=f.useCallback(E=>{Ne[(O=>{switch(O){case"success":return"success";case"error":return"error";case"warning":return"warning";default:return"info"}})(E.type)](E.title,{description:E.message})},[]);return f.useEffect(()=>{if(!h||!x)return;const E=O=>{_(O.notification)},A=O=>{O.userId===u?.id&&p()};return h.on("notification_received",E),h.on("notification_count_updated",A),()=>{h.off("notification_received",E),h.off("notification_count_updated",A)}},[h,x,u?.id,_,p]),f.useEffect(()=>{d&&p()},[d,p]),e.jsx(aP.Provider,{value:{notifications:r,unreadCount:s,isLoading:l,fetchNotifications:p,markAsRead:y,markAllAsRead:v,deleteNotification:w,deleteAllRead:b,deleteMultiple:N,addNotification:_,updateUnreadCount:S,addToastNotification:k},children:t})}function sN(){const t=f.useContext(aP);if(t===void 0)throw new Error("useNotifications must be used within a NotificationsProvider");return t}const iP=f.createContext(void 0);function UW({children:t}){const[r,n]=f.useState([]),[s,a]=f.useState(!1),[l,c]=f.useState(null),[u,d]=f.useState(0),{user:h,isAuthenticated:x}=hr(),{socket:p,isConnected:y}=nN(),{addNotification:v}=sN(),w=f.useCallback(async()=>{if(x){a(!0),c(null);try{const _=await fetch(`${rn}/api/feedback`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"}});if(!_.ok)throw new Error("Failed to fetch feedback");const S=await _.json();n(S.data||[]);const k=(S.data||[]).filter(E=>E.status==="open"||E.status==="in_progress").length;d(k)}catch(_){c(_ instanceof Error?_.message:"Unknown error"),console.error("Error fetching feedback:",_)}finally{a(!1)}}},[x]),b=async _=>{try{if(!(await fetch(`${rn}/api/feedback`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"},body:JSON.stringify(_)})).ok)throw new Error("Failed to submit feedback");h?.role==="admin"&&await w()}catch(S){throw console.error("Error submitting feedback:",S),S}},N=async(_,S,k)=>{try{if(!(await fetch(`${rn}/api/feedback/${_}`,{method:"PATCH",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"},body:JSON.stringify({status:S,admin_notes:k})})).ok)throw new Error("Failed to update feedback");await w()}catch(E){throw console.error("Error updating feedback:",E),E}};return f.useEffect(()=>{if(h?.role==="admin"){w();const _=setInterval(w,3e4);return()=>clearInterval(_)}},[h?.role,w]),f.useEffect(()=>{if(!p||!y||h?.role!=="admin")return;const _=S=>{w();const k={bug:"Bug Report",feature:"Feature Request",improvement:"Improvement",complaint:"Complaint",other:"Other"},E={urgent:"Urgent",high:"High",medium:"Medium",low:"Low"};v({id:Date.now(),title:`New ${k[S.type]||"Feedback"} - ${E[S.priority]||S.priority} Priority`,message:`${S.user.name} submitted feedback from ${S.page_url}: "${S.message}"`,type:"info",is_read:!1,related_entity_type:"feedback",related_entity_id:S.id,created_at:new Date().toISOString()})};return p.on("feedback_submitted",_),()=>{p.off("feedback_submitted",_)}},[p,y,h?.role,w]),e.jsx(iP.Provider,{value:{feedbackItems:r,isLoading:s,error:l,unreadFeedbackCount:u,refreshFeedback:w,submitFeedback:b,updateFeedbackStatus:N},children:t})}function aN(){const t=f.useContext(iP);if(t===void 0)throw new Error("useFeedback must be used within a FeedbackProvider");return t}/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zW=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),BW=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(r,n,s)=>s?s.toUpperCase():n.toLowerCase()),nA=t=>{const r=BW(t);return r.charAt(0).toUpperCase()+r.slice(1)},lP=(...t)=>t.filter((r,n,s)=>!!r&&r.trim()!==""&&s.indexOf(r)===n).join(" ").trim(),WW=t=>{for(const r in t)if(r.startsWith("aria-")||r==="role"||r==="title")return!0};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var HW={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VW=f.forwardRef(({color:t="currentColor",size:r=24,strokeWidth:n=2,absoluteStrokeWidth:s,className:a="",children:l,iconNode:c,...u},d)=>f.createElement("svg",{ref:d,...HW,width:r,height:r,stroke:t,strokeWidth:s?Number(n)*24/Number(r):n,className:lP("lucide",a),...!l&&!WW(u)&&{"aria-hidden":"true"},...u},[...c.map(([h,x])=>f.createElement(h,x)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mt=(t,r)=>{const n=f.forwardRef(({className:s,...a},l)=>f.createElement(VW,{ref:l,iconNode:r,className:lP(`lucide-${zW(nA(t))}`,`lucide-${t}`,s),...a}));return n.displayName=nA(t),n};/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YW=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],ks=mt("activity",YW);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KW=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Cn=mt("arrow-left",KW);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GW=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Am=mt("arrow-right",GW);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QW=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],ei=mt("award",QW);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XW=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],_i=mt("bell",XW);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZW=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],oP=mt("briefcase",ZW);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JW=[["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M9 7.13v-1a3.003 3.003 0 1 1 6 0v1",key:"d7y7pr"}],["path",{d:"M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6",key:"xs1cw7"}],["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M6.53 9C4.6 8.8 3 7.1 3 5",key:"32zzws"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"M3 21c0-2.1 1.7-3.9 3.8-4",key:"4p0ekp"}],["path",{d:"M20.97 5c0 2.1-1.6 3.8-3.5 4",key:"18gb23"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M17.2 17c2.1.1 3.8 1.9 3.8 4",key:"k3fwyw"}]],b0=mt("bug",JW);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e7=[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]],Cs=mt("building-2",e7);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t7=[["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M9 22v-3a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v3",key:"cabbwy"}],["rect",{x:"4",y:"2",width:"16",height:"20",rx:"2",key:"1uxh74"}]],cl=mt("building",t7);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r7=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]],w0=mt("calculator",r7);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n7=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],is=mt("calendar",n7);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s7=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],sl=mt("chart-column",s7);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a7=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]],i7=mt("chart-line",a7);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l7=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],o7=mt("chart-pie",l7);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c7=[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]],sA=mt("check-check",c7);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d7=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Gr=mt("check",d7);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u7=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],cn=mt("chevron-down",u7);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m7=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],_c=mt("chevron-left",m7);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h7=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],ri=mt("chevron-right",h7);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f7=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],x7=mt("chevron-up",f7);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p7=[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]],aA=mt("chevrons-up-down",p7);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g7=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],fs=mt("circle-alert",g7);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y7=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Ar=mt("circle-check-big",y7);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v7=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],wn=mt("circle-x",v7);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j7=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],b7=mt("circle",j7);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w7=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],Pm=mt("clipboard-list",w7);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N7=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Zt=mt("clock",N7);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _7=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],C7=mt("columns-3",_7);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S7=[["path",{d:"M15 6v12a3 3 0 1 0 3-3H6a3 3 0 1 0 3 3V6a3 3 0 1 0-3 3h12a3 3 0 1 0-3-3",key:"11bfej"}]],k7=mt("command",S7);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A7=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],iA=mt("copy",A7);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E7=[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]],M7=mt("cpu",E7);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T7=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],O7=mt("database",T7);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P7=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],Tn=mt("dollar-sign",P7);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D7=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],oa=mt("download",D7);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R7=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],ss=mt("ellipsis",R7);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L7=[["path",{d:"M4 10h12",key:"1y6xl8"}],["path",{d:"M4 14h9",key:"1loblj"}],["path",{d:"M19 6a7.7 7.7 0 0 0-5.2-2A7.9 7.9 0 0 0 6 12c0 4.4 3.5 8 7.8 8 2 0 3.8-.8 5.2-2",key:"1j6lzo"}]],Xm=mt("euro",L7);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I7=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],cP=mt("external-link",I7);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $7=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],dP=mt("eye-off",$7);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F7=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],mr=mt("eye",F7);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q7=[["path",{d:"M11 21a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1v-8a1 1 0 0 1 1-1",key:"likhh7"}],["path",{d:"M16 16a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1V8a1 1 0 0 1 1-1",key:"17ky3x"}],["path",{d:"M21 6a2 2 0 0 0-.586-1.414l-2-2A2 2 0 0 0 17 2h-3a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1z",key:"1hyeo0"}]],N0=mt("file-stack",q7);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U7=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Qt=mt("file-text",U7);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z7=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],Ua=mt("funnel",z7);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B7=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],Qa=mt("hash",B7);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W7=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],H7=mt("history",W7);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V7=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],iN=mt("house",V7);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y7=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],lA=mt("info",Y7);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K7=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],oA=mt("key",K7);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G7=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],aj=mt("layout-dashboard",G7);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q7=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],uP=mt("lightbulb",Q7);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X7=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Nt=mt("loader-circle",X7);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z7=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],mP=mt("log-out",Z7);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J7=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],Ci=mt("mail",J7);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e9=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],dl=mt("map-pin",e9);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t9=[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]],r9=mt("menu",t9);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n9=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],Ja=mt("message-square",n9);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s9=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],a9=mt("moon",s9);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i9=[["path",{d:"M12 3v6",key:"1holv5"}],["path",{d:"M16.76 3a2 2 0 0 1 1.8 1.1l2.23 4.479a2 2 0 0 1 .21.891V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V9.472a2 2 0 0 1 .211-.894L5.45 4.1A2 2 0 0 1 7.24 3z",key:"187q7i"}],["path",{d:"M3.054 9.013h17.893",key:"grwhos"}]],l9=mt("package-2",i9);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o9=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],Jt=mt("package",o9);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c9=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],d9=mt("pen",c9);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u9=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],Mi=mt("phone",u9);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m9=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Vt=mt("plus",m9);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h9=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],$a=mt("printer",h9);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f9=[["path",{d:"M16 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"rib7q0"}],["path",{d:"M5 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"1ymkrd"}]],x9=mt("quote",f9);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p9=[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]],hP=mt("receipt",p9);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g9=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Ws=mt("refresh-cw",g9);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y9=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],v9=mt("rotate-ccw",y9);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j9=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],ul=mt("save",j9);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b9=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],nr=mt("search",b9);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w9=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],N9=mt("send",w9);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _9=[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]],C9=mt("server",_9);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S9=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],bl=mt("settings",S9);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k9=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]],Vf=mt("shield-alert",k9);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A9=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Hs=mt("shield",A9);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E9=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],lN=mt("shopping-cart",E9);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M9=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],xr=mt("square-pen",M9);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T9=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],O9=mt("star",T9);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P9=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],D9=mt("sun",P9);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R9=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],ti=mt("target",R9);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L9=[["path",{d:"M17 14V2",key:"8ymqnk"}],["path",{d:"M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22a3.13 3.13 0 0 1-3-3.88Z",key:"m61m77"}]],fP=mt("thumbs-down",L9);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I9=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],br=mt("trash-2",I9);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $9=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],Zm=mt("trending-down",$9);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F9=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],Os=mt("trending-up",F9);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q9=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],vr=mt("triangle-alert",q9);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U9=[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]],Dp=mt("truck",U9);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z9=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Rp=mt("user-check",z9);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B9=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Ot=mt("user",B9);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W9=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],xs=mt("users",W9);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H9=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],V9=mt("wifi",H9);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y9=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]],Ct=mt("wrench",Y9);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K9=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],hn=mt("x",K9);/**
 * @license lucide-react v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G9=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Q9=mt("zap",G9);function qs({children:t}){const{isAuthenticated:r,isLoading:n}=hr(),s=li();return n?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Nt,{className:"h-6 w-6 animate-spin"}),e.jsx("span",{children:"Loading..."})]})}):r?e.jsx(e.Fragment,{children:t}):e.jsx(Gw,{to:"/login",state:{from:s},replace:!0})}function cA(t,r){if(typeof t=="function")return t(r);t!=null&&(t.current=r)}function ml(...t){return r=>{let n=!1;const s=t.map(a=>{const l=cA(a,r);return!n&&typeof l=="function"&&(n=!0),l});if(n)return()=>{for(let a=0;a<s.length;a++){const l=s[a];typeof l=="function"?l():cA(t[a],null)}}}}function cr(...t){return f.useCallback(ml(...t),t)}function ho(t){const r=Z9(t),n=f.forwardRef((s,a)=>{const{children:l,...c}=s,u=f.Children.toArray(l),d=u.find(eH);if(d){const h=d.props.children,x=u.map(p=>p===d?f.Children.count(h)>1?f.Children.only(null):f.isValidElement(h)?h.props.children:null:p);return e.jsx(r,{...c,ref:a,children:f.isValidElement(h)?f.cloneElement(h,void 0,x):null})}return e.jsx(r,{...c,ref:a,children:l})});return n.displayName=`${t}.Slot`,n}var X9=ho("Slot");function Z9(t){const r=f.forwardRef((n,s)=>{const{children:a,...l}=n;if(f.isValidElement(a)){const c=rH(a),u=tH(l,a.props);return a.type!==f.Fragment&&(u.ref=s?ml(s,c):c),f.cloneElement(a,u)}return f.Children.count(a)>1?f.Children.only(null):null});return r.displayName=`${t}.SlotClone`,r}var xP=Symbol("radix.slottable");function J9(t){const r=({children:n})=>e.jsx(e.Fragment,{children:n});return r.displayName=`${t}.Slottable`,r.__radixId=xP,r}function eH(t){return f.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===xP}function tH(t,r){const n={...r};for(const s in r){const a=t[s],l=r[s];/^on[A-Z]/.test(s)?a&&l?n[s]=(...u)=>{const d=l(...u);return a(...u),d}:a&&(n[s]=a):s==="style"?n[s]={...a,...l}:s==="className"&&(n[s]=[a,l].filter(Boolean).join(" "))}return{...t,...n}}function rH(t){let r=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=r&&"isReactWarning"in r&&r.isReactWarning;return n?t.ref:(r=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=r&&"isReactWarning"in r&&r.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function pP(t){var r,n,s="";if(typeof t=="string"||typeof t=="number")s+=t;else if(typeof t=="object")if(Array.isArray(t)){var a=t.length;for(r=0;r<a;r++)t[r]&&(n=pP(t[r]))&&(s&&(s+=" "),s+=n)}else for(n in t)t[n]&&(s&&(s+=" "),s+=n);return s}function Ur(){for(var t,r,n=0,s="",a=arguments.length;n<a;n++)(t=arguments[n])&&(r=pP(t))&&(s&&(s+=" "),s+=r);return s}const dA=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,uA=Ur,Lp=(t,r)=>n=>{var s;if(r?.variants==null)return uA(t,n?.class,n?.className);const{variants:a,defaultVariants:l}=r,c=Object.keys(a).map(h=>{const x=n?.[h],p=l?.[h];if(x===null)return null;const y=dA(x)||dA(p);return a[h][y]}),u=n&&Object.entries(n).reduce((h,x)=>{let[p,y]=x;return y===void 0||(h[p]=y),h},{}),d=r==null||(s=r.compoundVariants)===null||s===void 0?void 0:s.reduce((h,x)=>{let{class:p,className:y,...v}=x;return Object.entries(v).every(w=>{let[b,N]=w;return Array.isArray(N)?N.includes({...l,...u}[b]):{...l,...u}[b]===N})?[...h,p,y]:h},[]);return uA(t,c,d,n?.class,n?.className)},oN="-",nH=t=>{const r=aH(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:s}=t;return{getClassGroupId:c=>{const u=c.split(oN);return u[0]===""&&u.length!==1&&u.shift(),gP(u,r)||sH(c)},getConflictingClassGroupIds:(c,u)=>{const d=n[c]||[];return u&&s[c]?[...d,...s[c]]:d}}},gP=(t,r)=>{if(t.length===0)return r.classGroupId;const n=t[0],s=r.nextPart.get(n),a=s?gP(t.slice(1),s):void 0;if(a)return a;if(r.validators.length===0)return;const l=t.join(oN);return r.validators.find(({validator:c})=>c(l))?.classGroupId},mA=/^\[(.+)\]$/,sH=t=>{if(mA.test(t)){const r=mA.exec(t)[1],n=r?.substring(0,r.indexOf(":"));if(n)return"arbitrary.."+n}},aH=t=>{const{theme:r,classGroups:n}=t,s={nextPart:new Map,validators:[]};for(const a in n)_0(n[a],s,a,r);return s},_0=(t,r,n,s)=>{t.forEach(a=>{if(typeof a=="string"){const l=a===""?r:hA(r,a);l.classGroupId=n;return}if(typeof a=="function"){if(iH(a)){_0(a(s),r,n,s);return}r.validators.push({validator:a,classGroupId:n});return}Object.entries(a).forEach(([l,c])=>{_0(c,hA(r,l),n,s)})})},hA=(t,r)=>{let n=t;return r.split(oN).forEach(s=>{n.nextPart.has(s)||n.nextPart.set(s,{nextPart:new Map,validators:[]}),n=n.nextPart.get(s)}),n},iH=t=>t.isThemeGetter,lH=t=>{if(t<1)return{get:()=>{},set:()=>{}};let r=0,n=new Map,s=new Map;const a=(l,c)=>{n.set(l,c),r++,r>t&&(r=0,s=n,n=new Map)};return{get(l){let c=n.get(l);if(c!==void 0)return c;if((c=s.get(l))!==void 0)return a(l,c),c},set(l,c){n.has(l)?n.set(l,c):a(l,c)}}},C0="!",S0=":",oH=S0.length,cH=t=>{const{prefix:r,experimentalParseClassName:n}=t;let s=a=>{const l=[];let c=0,u=0,d=0,h;for(let w=0;w<a.length;w++){let b=a[w];if(c===0&&u===0){if(b===S0){l.push(a.slice(d,w)),d=w+oH;continue}if(b==="/"){h=w;continue}}b==="["?c++:b==="]"?c--:b==="("?u++:b===")"&&u--}const x=l.length===0?a:a.substring(d),p=dH(x),y=p!==x,v=h&&h>d?h-d:void 0;return{modifiers:l,hasImportantModifier:y,baseClassName:p,maybePostfixModifierPosition:v}};if(r){const a=r+S0,l=s;s=c=>c.startsWith(a)?l(c.substring(a.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:c,maybePostfixModifierPosition:void 0}}if(n){const a=s;s=l=>n({className:l,parseClassName:a})}return s},dH=t=>t.endsWith(C0)?t.substring(0,t.length-1):t.startsWith(C0)?t.substring(1):t,uH=t=>{const r=Object.fromEntries(t.orderSensitiveModifiers.map(s=>[s,!0]));return s=>{if(s.length<=1)return s;const a=[];let l=[];return s.forEach(c=>{c[0]==="["||r[c]?(a.push(...l.sort(),c),l=[]):l.push(c)}),a.push(...l.sort()),a}},mH=t=>({cache:lH(t.cacheSize),parseClassName:cH(t),sortModifiers:uH(t),...nH(t)}),hH=/\s+/,fH=(t,r)=>{const{parseClassName:n,getClassGroupId:s,getConflictingClassGroupIds:a,sortModifiers:l}=r,c=[],u=t.trim().split(hH);let d="";for(let h=u.length-1;h>=0;h-=1){const x=u[h],{isExternal:p,modifiers:y,hasImportantModifier:v,baseClassName:w,maybePostfixModifierPosition:b}=n(x);if(p){d=x+(d.length>0?" "+d:d);continue}let N=!!b,_=s(N?w.substring(0,b):w);if(!_){if(!N){d=x+(d.length>0?" "+d:d);continue}if(_=s(w),!_){d=x+(d.length>0?" "+d:d);continue}N=!1}const S=l(y).join(":"),k=v?S+C0:S,E=k+_;if(c.includes(E))continue;c.push(E);const A=a(_,N);for(let O=0;O<A.length;++O){const z=A[O];c.push(k+z)}d=x+(d.length>0?" "+d:d)}return d};function xH(){let t=0,r,n,s="";for(;t<arguments.length;)(r=arguments[t++])&&(n=yP(r))&&(s&&(s+=" "),s+=n);return s}const yP=t=>{if(typeof t=="string")return t;let r,n="";for(let s=0;s<t.length;s++)t[s]&&(r=yP(t[s]))&&(n&&(n+=" "),n+=r);return n};function pH(t,...r){let n,s,a,l=c;function c(d){const h=r.reduce((x,p)=>p(x),t());return n=mH(h),s=n.cache.get,a=n.cache.set,l=u,u(d)}function u(d){const h=s(d);if(h)return h;const x=fH(d,n);return a(d,x),x}return function(){return l(xH.apply(null,arguments))}}const qn=t=>{const r=n=>n[t]||[];return r.isThemeGetter=!0,r},vP=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,jP=/^\((?:(\w[\w-]*):)?(.+)\)$/i,gH=/^\d+\/\d+$/,yH=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,vH=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,jH=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,bH=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,wH=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,xd=t=>gH.test(t),ur=t=>!!t&&!Number.isNaN(Number(t)),Xl=t=>!!t&&Number.isInteger(Number(t)),ij=t=>t.endsWith("%")&&ur(t.slice(0,-1)),Zi=t=>yH.test(t),NH=()=>!0,_H=t=>vH.test(t)&&!jH.test(t),bP=()=>!1,CH=t=>bH.test(t),SH=t=>wH.test(t),kH=t=>!kt(t)&&!At(t),AH=t=>Xd(t,_P,bP),kt=t=>vP.test(t),Vo=t=>Xd(t,CP,_H),lj=t=>Xd(t,PH,ur),fA=t=>Xd(t,wP,bP),EH=t=>Xd(t,NP,SH),Yf=t=>Xd(t,SP,CH),At=t=>jP.test(t),lm=t=>Zd(t,CP),MH=t=>Zd(t,DH),xA=t=>Zd(t,wP),TH=t=>Zd(t,_P),OH=t=>Zd(t,NP),Kf=t=>Zd(t,SP,!0),Xd=(t,r,n)=>{const s=vP.exec(t);return s?s[1]?r(s[1]):n(s[2]):!1},Zd=(t,r,n=!1)=>{const s=jP.exec(t);return s?s[1]?r(s[1]):n:!1},wP=t=>t==="position"||t==="percentage",NP=t=>t==="image"||t==="url",_P=t=>t==="length"||t==="size"||t==="bg-size",CP=t=>t==="length",PH=t=>t==="number",DH=t=>t==="family-name",SP=t=>t==="shadow",RH=()=>{const t=qn("color"),r=qn("font"),n=qn("text"),s=qn("font-weight"),a=qn("tracking"),l=qn("leading"),c=qn("breakpoint"),u=qn("container"),d=qn("spacing"),h=qn("radius"),x=qn("shadow"),p=qn("inset-shadow"),y=qn("text-shadow"),v=qn("drop-shadow"),w=qn("blur"),b=qn("perspective"),N=qn("aspect"),_=qn("ease"),S=qn("animate"),k=()=>["auto","avoid","all","avoid-page","page","left","right","column"],E=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],A=()=>[...E(),At,kt],O=()=>["auto","hidden","clip","visible","scroll"],z=()=>["auto","contain","none"],R=()=>[At,kt,d],G=()=>[xd,"full","auto",...R()],J=()=>[Xl,"none","subgrid",At,kt],ie=()=>["auto",{span:["full",Xl,At,kt]},Xl,At,kt],V=()=>[Xl,"auto",At,kt],xe=()=>["auto","min","max","fr",At,kt],pe=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],re=()=>["start","end","center","stretch","center-safe","end-safe"],M=()=>["auto",...R()],B=()=>[xd,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...R()],L=()=>[t,At,kt],T=()=>[...E(),xA,fA,{position:[At,kt]}],F=()=>["no-repeat",{repeat:["","x","y","space","round"]}],I=()=>["auto","cover","contain",TH,AH,{size:[At,kt]}],Q=()=>[ij,lm,Vo],W=()=>["","none","full",h,At,kt],ee=()=>["",ur,lm,Vo],ye=()=>["solid","dashed","dotted","double"],he=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],te=()=>[ur,ij,xA,fA],De=()=>["","none",w,At,kt],ne=()=>["none",ur,At,kt],$e=()=>["none",ur,At,kt],ge=()=>[ur,At,kt],we=()=>[xd,"full",...R()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Zi],breakpoint:[Zi],color:[NH],container:[Zi],"drop-shadow":[Zi],ease:["in","out","in-out"],font:[kH],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Zi],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Zi],shadow:[Zi],spacing:["px",ur],text:[Zi],"text-shadow":[Zi],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",xd,kt,At,N]}],container:["container"],columns:[{columns:[ur,kt,At,u]}],"break-after":[{"break-after":k()}],"break-before":[{"break-before":k()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:A()}],overflow:[{overflow:O()}],"overflow-x":[{"overflow-x":O()}],"overflow-y":[{"overflow-y":O()}],overscroll:[{overscroll:z()}],"overscroll-x":[{"overscroll-x":z()}],"overscroll-y":[{"overscroll-y":z()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:G()}],"inset-x":[{"inset-x":G()}],"inset-y":[{"inset-y":G()}],start:[{start:G()}],end:[{end:G()}],top:[{top:G()}],right:[{right:G()}],bottom:[{bottom:G()}],left:[{left:G()}],visibility:["visible","invisible","collapse"],z:[{z:[Xl,"auto",At,kt]}],basis:[{basis:[xd,"full","auto",u,...R()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[ur,xd,"auto","initial","none",kt]}],grow:[{grow:["",ur,At,kt]}],shrink:[{shrink:["",ur,At,kt]}],order:[{order:[Xl,"first","last","none",At,kt]}],"grid-cols":[{"grid-cols":J()}],"col-start-end":[{col:ie()}],"col-start":[{"col-start":V()}],"col-end":[{"col-end":V()}],"grid-rows":[{"grid-rows":J()}],"row-start-end":[{row:ie()}],"row-start":[{"row-start":V()}],"row-end":[{"row-end":V()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":xe()}],"auto-rows":[{"auto-rows":xe()}],gap:[{gap:R()}],"gap-x":[{"gap-x":R()}],"gap-y":[{"gap-y":R()}],"justify-content":[{justify:[...pe(),"normal"]}],"justify-items":[{"justify-items":[...re(),"normal"]}],"justify-self":[{"justify-self":["auto",...re()]}],"align-content":[{content:["normal",...pe()]}],"align-items":[{items:[...re(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...re(),{baseline:["","last"]}]}],"place-content":[{"place-content":pe()}],"place-items":[{"place-items":[...re(),"baseline"]}],"place-self":[{"place-self":["auto",...re()]}],p:[{p:R()}],px:[{px:R()}],py:[{py:R()}],ps:[{ps:R()}],pe:[{pe:R()}],pt:[{pt:R()}],pr:[{pr:R()}],pb:[{pb:R()}],pl:[{pl:R()}],m:[{m:M()}],mx:[{mx:M()}],my:[{my:M()}],ms:[{ms:M()}],me:[{me:M()}],mt:[{mt:M()}],mr:[{mr:M()}],mb:[{mb:M()}],ml:[{ml:M()}],"space-x":[{"space-x":R()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":R()}],"space-y-reverse":["space-y-reverse"],size:[{size:B()}],w:[{w:[u,"screen",...B()]}],"min-w":[{"min-w":[u,"screen","none",...B()]}],"max-w":[{"max-w":[u,"screen","none","prose",{screen:[c]},...B()]}],h:[{h:["screen","lh",...B()]}],"min-h":[{"min-h":["screen","lh","none",...B()]}],"max-h":[{"max-h":["screen","lh",...B()]}],"font-size":[{text:["base",n,lm,Vo]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[s,At,lj]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",ij,kt]}],"font-family":[{font:[MH,kt,r]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[a,At,kt]}],"line-clamp":[{"line-clamp":[ur,"none",At,lj]}],leading:[{leading:[l,...R()]}],"list-image":[{"list-image":["none",At,kt]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",At,kt]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:L()}],"text-color":[{text:L()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ye(),"wavy"]}],"text-decoration-thickness":[{decoration:[ur,"from-font","auto",At,Vo]}],"text-decoration-color":[{decoration:L()}],"underline-offset":[{"underline-offset":[ur,"auto",At,kt]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:R()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",At,kt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",At,kt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:T()}],"bg-repeat":[{bg:F()}],"bg-size":[{bg:I()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Xl,At,kt],radial:["",At,kt],conic:[Xl,At,kt]},OH,EH]}],"bg-color":[{bg:L()}],"gradient-from-pos":[{from:Q()}],"gradient-via-pos":[{via:Q()}],"gradient-to-pos":[{to:Q()}],"gradient-from":[{from:L()}],"gradient-via":[{via:L()}],"gradient-to":[{to:L()}],rounded:[{rounded:W()}],"rounded-s":[{"rounded-s":W()}],"rounded-e":[{"rounded-e":W()}],"rounded-t":[{"rounded-t":W()}],"rounded-r":[{"rounded-r":W()}],"rounded-b":[{"rounded-b":W()}],"rounded-l":[{"rounded-l":W()}],"rounded-ss":[{"rounded-ss":W()}],"rounded-se":[{"rounded-se":W()}],"rounded-ee":[{"rounded-ee":W()}],"rounded-es":[{"rounded-es":W()}],"rounded-tl":[{"rounded-tl":W()}],"rounded-tr":[{"rounded-tr":W()}],"rounded-br":[{"rounded-br":W()}],"rounded-bl":[{"rounded-bl":W()}],"border-w":[{border:ee()}],"border-w-x":[{"border-x":ee()}],"border-w-y":[{"border-y":ee()}],"border-w-s":[{"border-s":ee()}],"border-w-e":[{"border-e":ee()}],"border-w-t":[{"border-t":ee()}],"border-w-r":[{"border-r":ee()}],"border-w-b":[{"border-b":ee()}],"border-w-l":[{"border-l":ee()}],"divide-x":[{"divide-x":ee()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":ee()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...ye(),"hidden","none"]}],"divide-style":[{divide:[...ye(),"hidden","none"]}],"border-color":[{border:L()}],"border-color-x":[{"border-x":L()}],"border-color-y":[{"border-y":L()}],"border-color-s":[{"border-s":L()}],"border-color-e":[{"border-e":L()}],"border-color-t":[{"border-t":L()}],"border-color-r":[{"border-r":L()}],"border-color-b":[{"border-b":L()}],"border-color-l":[{"border-l":L()}],"divide-color":[{divide:L()}],"outline-style":[{outline:[...ye(),"none","hidden"]}],"outline-offset":[{"outline-offset":[ur,At,kt]}],"outline-w":[{outline:["",ur,lm,Vo]}],"outline-color":[{outline:L()}],shadow:[{shadow:["","none",x,Kf,Yf]}],"shadow-color":[{shadow:L()}],"inset-shadow":[{"inset-shadow":["none",p,Kf,Yf]}],"inset-shadow-color":[{"inset-shadow":L()}],"ring-w":[{ring:ee()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:L()}],"ring-offset-w":[{"ring-offset":[ur,Vo]}],"ring-offset-color":[{"ring-offset":L()}],"inset-ring-w":[{"inset-ring":ee()}],"inset-ring-color":[{"inset-ring":L()}],"text-shadow":[{"text-shadow":["none",y,Kf,Yf]}],"text-shadow-color":[{"text-shadow":L()}],opacity:[{opacity:[ur,At,kt]}],"mix-blend":[{"mix-blend":[...he(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":he()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[ur]}],"mask-image-linear-from-pos":[{"mask-linear-from":te()}],"mask-image-linear-to-pos":[{"mask-linear-to":te()}],"mask-image-linear-from-color":[{"mask-linear-from":L()}],"mask-image-linear-to-color":[{"mask-linear-to":L()}],"mask-image-t-from-pos":[{"mask-t-from":te()}],"mask-image-t-to-pos":[{"mask-t-to":te()}],"mask-image-t-from-color":[{"mask-t-from":L()}],"mask-image-t-to-color":[{"mask-t-to":L()}],"mask-image-r-from-pos":[{"mask-r-from":te()}],"mask-image-r-to-pos":[{"mask-r-to":te()}],"mask-image-r-from-color":[{"mask-r-from":L()}],"mask-image-r-to-color":[{"mask-r-to":L()}],"mask-image-b-from-pos":[{"mask-b-from":te()}],"mask-image-b-to-pos":[{"mask-b-to":te()}],"mask-image-b-from-color":[{"mask-b-from":L()}],"mask-image-b-to-color":[{"mask-b-to":L()}],"mask-image-l-from-pos":[{"mask-l-from":te()}],"mask-image-l-to-pos":[{"mask-l-to":te()}],"mask-image-l-from-color":[{"mask-l-from":L()}],"mask-image-l-to-color":[{"mask-l-to":L()}],"mask-image-x-from-pos":[{"mask-x-from":te()}],"mask-image-x-to-pos":[{"mask-x-to":te()}],"mask-image-x-from-color":[{"mask-x-from":L()}],"mask-image-x-to-color":[{"mask-x-to":L()}],"mask-image-y-from-pos":[{"mask-y-from":te()}],"mask-image-y-to-pos":[{"mask-y-to":te()}],"mask-image-y-from-color":[{"mask-y-from":L()}],"mask-image-y-to-color":[{"mask-y-to":L()}],"mask-image-radial":[{"mask-radial":[At,kt]}],"mask-image-radial-from-pos":[{"mask-radial-from":te()}],"mask-image-radial-to-pos":[{"mask-radial-to":te()}],"mask-image-radial-from-color":[{"mask-radial-from":L()}],"mask-image-radial-to-color":[{"mask-radial-to":L()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":E()}],"mask-image-conic-pos":[{"mask-conic":[ur]}],"mask-image-conic-from-pos":[{"mask-conic-from":te()}],"mask-image-conic-to-pos":[{"mask-conic-to":te()}],"mask-image-conic-from-color":[{"mask-conic-from":L()}],"mask-image-conic-to-color":[{"mask-conic-to":L()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:T()}],"mask-repeat":[{mask:F()}],"mask-size":[{mask:I()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",At,kt]}],filter:[{filter:["","none",At,kt]}],blur:[{blur:De()}],brightness:[{brightness:[ur,At,kt]}],contrast:[{contrast:[ur,At,kt]}],"drop-shadow":[{"drop-shadow":["","none",v,Kf,Yf]}],"drop-shadow-color":[{"drop-shadow":L()}],grayscale:[{grayscale:["",ur,At,kt]}],"hue-rotate":[{"hue-rotate":[ur,At,kt]}],invert:[{invert:["",ur,At,kt]}],saturate:[{saturate:[ur,At,kt]}],sepia:[{sepia:["",ur,At,kt]}],"backdrop-filter":[{"backdrop-filter":["","none",At,kt]}],"backdrop-blur":[{"backdrop-blur":De()}],"backdrop-brightness":[{"backdrop-brightness":[ur,At,kt]}],"backdrop-contrast":[{"backdrop-contrast":[ur,At,kt]}],"backdrop-grayscale":[{"backdrop-grayscale":["",ur,At,kt]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[ur,At,kt]}],"backdrop-invert":[{"backdrop-invert":["",ur,At,kt]}],"backdrop-opacity":[{"backdrop-opacity":[ur,At,kt]}],"backdrop-saturate":[{"backdrop-saturate":[ur,At,kt]}],"backdrop-sepia":[{"backdrop-sepia":["",ur,At,kt]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":R()}],"border-spacing-x":[{"border-spacing-x":R()}],"border-spacing-y":[{"border-spacing-y":R()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",At,kt]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[ur,"initial",At,kt]}],ease:[{ease:["linear","initial",_,At,kt]}],delay:[{delay:[ur,At,kt]}],animate:[{animate:["none",S,At,kt]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[b,At,kt]}],"perspective-origin":[{"perspective-origin":A()}],rotate:[{rotate:ne()}],"rotate-x":[{"rotate-x":ne()}],"rotate-y":[{"rotate-y":ne()}],"rotate-z":[{"rotate-z":ne()}],scale:[{scale:$e()}],"scale-x":[{"scale-x":$e()}],"scale-y":[{"scale-y":$e()}],"scale-z":[{"scale-z":$e()}],"scale-3d":["scale-3d"],skew:[{skew:ge()}],"skew-x":[{"skew-x":ge()}],"skew-y":[{"skew-y":ge()}],transform:[{transform:[At,kt,"","none","gpu","cpu"]}],"transform-origin":[{origin:A()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:we()}],"translate-x":[{"translate-x":we()}],"translate-y":[{"translate-y":we()}],"translate-z":[{"translate-z":we()}],"translate-none":["translate-none"],accent:[{accent:L()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:L()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",At,kt]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":R()}],"scroll-mx":[{"scroll-mx":R()}],"scroll-my":[{"scroll-my":R()}],"scroll-ms":[{"scroll-ms":R()}],"scroll-me":[{"scroll-me":R()}],"scroll-mt":[{"scroll-mt":R()}],"scroll-mr":[{"scroll-mr":R()}],"scroll-mb":[{"scroll-mb":R()}],"scroll-ml":[{"scroll-ml":R()}],"scroll-p":[{"scroll-p":R()}],"scroll-px":[{"scroll-px":R()}],"scroll-py":[{"scroll-py":R()}],"scroll-ps":[{"scroll-ps":R()}],"scroll-pe":[{"scroll-pe":R()}],"scroll-pt":[{"scroll-pt":R()}],"scroll-pr":[{"scroll-pr":R()}],"scroll-pb":[{"scroll-pb":R()}],"scroll-pl":[{"scroll-pl":R()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",At,kt]}],fill:[{fill:["none",...L()]}],"stroke-w":[{stroke:[ur,lm,Vo,lj]}],stroke:[{stroke:["none",...L()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},LH=pH(RH);function ze(...t){return LH(Ur(t))}const cN=Lp("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),q=f.forwardRef(({className:t,variant:r,size:n,asChild:s=!1,...a},l)=>{const c=s?X9:"button";return e.jsx(c,{className:ze(cN({variant:r,size:n,className:t})),ref:l,...a})});q.displayName="Button";const se=f.forwardRef(({className:t,...r},n)=>e.jsx("div",{ref:n,className:ze("rounded-lg border bg-card text-card-foreground shadow-sm card",t),...r}));se.displayName="Card";const ue=f.forwardRef(({className:t,...r},n)=>e.jsx("div",{ref:n,className:ze("flex flex-col space-y-1.5 p-6",t),...r}));ue.displayName="CardHeader";const fe=f.forwardRef(({className:t,...r},n)=>e.jsx("h3",{ref:n,className:ze("text-2xl font-semibold leading-none tracking-tight",t),...r}));fe.displayName="CardTitle";const Xt=f.forwardRef(({className:t,...r},n)=>e.jsx("p",{ref:n,className:ze("text-sm text-muted-foreground",t),...r}));Xt.displayName="CardDescription";const ae=f.forwardRef(({className:t,...r},n)=>e.jsx("div",{ref:n,className:ze("p-6 pt-0",t),...r}));ae.displayName="CardContent";const IH=f.forwardRef(({className:t,...r},n)=>e.jsx("div",{ref:n,className:ze("flex items-center p-6 pt-0",t),...r}));IH.displayName="CardFooter";const $H=Lp("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Oe({className:t,variant:r,...n}){return e.jsx("div",{className:ze($H({variant:r}),t),...n})}function bt(t,r,{checkForDefaultPrevented:n=!0}={}){return function(a){if(t?.(a),n===!1||!a.defaultPrevented)return r?.(a)}}function FH(t,r){const n=f.createContext(r),s=l=>{const{children:c,...u}=l,d=f.useMemo(()=>u,Object.values(u));return e.jsx(n.Provider,{value:d,children:c})};s.displayName=t+"Provider";function a(l){const c=f.useContext(n);if(c)return c;if(r!==void 0)return r;throw new Error(`\`${l}\` must be used within \`${t}\``)}return[s,a]}function Ks(t,r=[]){let n=[];function s(l,c){const u=f.createContext(c),d=n.length;n=[...n,c];const h=p=>{const{scope:y,children:v,...w}=p,b=y?.[t]?.[d]||u,N=f.useMemo(()=>w,Object.values(w));return e.jsx(b.Provider,{value:N,children:v})};h.displayName=l+"Provider";function x(p,y){const v=y?.[t]?.[d]||u,w=f.useContext(v);if(w)return w;if(c!==void 0)return c;throw new Error(`\`${p}\` must be used within \`${l}\``)}return[h,x]}const a=()=>{const l=n.map(c=>f.createContext(c));return function(u){const d=u?.[t]||l;return f.useMemo(()=>({[`__scope${t}`]:{...u,[t]:d}}),[u,d])}};return a.scopeName=t,[s,qH(a,...r)]}function qH(...t){const r=t[0];if(t.length===1)return r;const n=()=>{const s=t.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(l){const c=s.reduce((u,{useScope:d,scopeName:h})=>{const p=d(l)[`__scope${h}`];return{...u,...p}},{});return f.useMemo(()=>({[`__scope${r.scopeName}`]:c}),[c])}};return n.scopeName=r.scopeName,n}var Sn=globalThis?.document?f.useLayoutEffect:()=>{},UH=$w[" useInsertionEffect ".trim().toString()]||Sn;function hl({prop:t,defaultProp:r,onChange:n=()=>{},caller:s}){const[a,l,c]=zH({defaultProp:r,onChange:n}),u=t!==void 0,d=u?t:a;{const x=f.useRef(t!==void 0);f.useEffect(()=>{const p=x.current;p!==u&&console.warn(`${s} is changing from ${p?"controlled":"uncontrolled"} to ${u?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),x.current=u},[u,s])}const h=f.useCallback(x=>{if(u){const p=BH(x)?x(t):x;p!==t&&c.current?.(p)}else l(x)},[u,t,l,c]);return[d,h]}function zH({defaultProp:t,onChange:r}){const[n,s]=f.useState(t),a=f.useRef(n),l=f.useRef(r);return UH(()=>{l.current=r},[r]),f.useEffect(()=>{a.current!==n&&(l.current?.(n),a.current=n)},[n,a]),[n,s,l]}function BH(t){return typeof t=="function"}var WH=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Mt=WH.reduce((t,r)=>{const n=ho(`Primitive.${r}`),s=f.forwardRef((a,l)=>{const{asChild:c,...u}=a,d=c?n:r;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(d,{...u,ref:l})});return s.displayName=`Primitive.${r}`,{...t,[r]:s}},{});function kP(t,r){t&&Nc.flushSync(()=>t.dispatchEvent(r))}function HH(t,r){return f.useReducer((n,s)=>r[n][s]??n,t)}var vs=t=>{const{present:r,children:n}=t,s=VH(r),a=typeof n=="function"?n({present:s.isPresent}):f.Children.only(n),l=cr(s.ref,YH(a));return typeof n=="function"||s.isPresent?f.cloneElement(a,{ref:l}):null};vs.displayName="Presence";function VH(t){const[r,n]=f.useState(),s=f.useRef(null),a=f.useRef(t),l=f.useRef("none"),c=t?"mounted":"unmounted",[u,d]=HH(c,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return f.useEffect(()=>{const h=Gf(s.current);l.current=u==="mounted"?h:"none"},[u]),Sn(()=>{const h=s.current,x=a.current;if(x!==t){const y=l.current,v=Gf(h);t?d("MOUNT"):v==="none"||h?.display==="none"?d("UNMOUNT"):d(x&&y!==v?"ANIMATION_OUT":"UNMOUNT"),a.current=t}},[t,d]),Sn(()=>{if(r){let h;const x=r.ownerDocument.defaultView??window,p=v=>{const b=Gf(s.current).includes(CSS.escape(v.animationName));if(v.target===r&&b&&(d("ANIMATION_END"),!a.current)){const N=r.style.animationFillMode;r.style.animationFillMode="forwards",h=x.setTimeout(()=>{r.style.animationFillMode==="forwards"&&(r.style.animationFillMode=N)})}},y=v=>{v.target===r&&(l.current=Gf(s.current))};return r.addEventListener("animationstart",y),r.addEventListener("animationcancel",p),r.addEventListener("animationend",p),()=>{x.clearTimeout(h),r.removeEventListener("animationstart",y),r.removeEventListener("animationcancel",p),r.removeEventListener("animationend",p)}}else d("ANIMATION_END")},[r,d]),{isPresent:["mounted","unmountSuspended"].includes(u),ref:f.useCallback(h=>{s.current=h?getComputedStyle(h):null,n(h)},[])}}function Gf(t){return t?.animationName||"none"}function YH(t){let r=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=r&&"isReactWarning"in r&&r.isReactWarning;return n?t.ref:(r=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=r&&"isReactWarning"in r&&r.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var KH=$w[" useId ".trim().toString()]||(()=>{}),GH=0;function as(t){const[r,n]=f.useState(KH());return Sn(()=>{n(s=>s??String(GH++))},[t]),r?`radix-${r}`:""}var Ip="Collapsible",[QH,Ype]=Ks(Ip),[XH,dN]=QH(Ip),AP=f.forwardRef((t,r)=>{const{__scopeCollapsible:n,open:s,defaultOpen:a,disabled:l,onOpenChange:c,...u}=t,[d,h]=hl({prop:s,defaultProp:a??!1,onChange:c,caller:Ip});return e.jsx(XH,{scope:n,disabled:l,contentId:as(),open:d,onOpenToggle:f.useCallback(()=>h(x=>!x),[h]),children:e.jsx(Mt.div,{"data-state":mN(d),"data-disabled":l?"":void 0,...u,ref:r})})});AP.displayName=Ip;var EP="CollapsibleTrigger",MP=f.forwardRef((t,r)=>{const{__scopeCollapsible:n,...s}=t,a=dN(EP,n);return e.jsx(Mt.button,{type:"button","aria-controls":a.contentId,"aria-expanded":a.open||!1,"data-state":mN(a.open),"data-disabled":a.disabled?"":void 0,disabled:a.disabled,...s,ref:r,onClick:bt(t.onClick,a.onOpenToggle)})});MP.displayName=EP;var uN="CollapsibleContent",TP=f.forwardRef((t,r)=>{const{forceMount:n,...s}=t,a=dN(uN,t.__scopeCollapsible);return e.jsx(vs,{present:n||a.open,children:({present:l})=>e.jsx(ZH,{...s,ref:r,present:l})})});TP.displayName=uN;var ZH=f.forwardRef((t,r)=>{const{__scopeCollapsible:n,present:s,children:a,...l}=t,c=dN(uN,n),[u,d]=f.useState(s),h=f.useRef(null),x=cr(r,h),p=f.useRef(0),y=p.current,v=f.useRef(0),w=v.current,b=c.open||u,N=f.useRef(b),_=f.useRef(void 0);return f.useEffect(()=>{const S=requestAnimationFrame(()=>N.current=!1);return()=>cancelAnimationFrame(S)},[]),Sn(()=>{const S=h.current;if(S){_.current=_.current||{transitionDuration:S.style.transitionDuration,animationName:S.style.animationName},S.style.transitionDuration="0s",S.style.animationName="none";const k=S.getBoundingClientRect();p.current=k.height,v.current=k.width,N.current||(S.style.transitionDuration=_.current.transitionDuration,S.style.animationName=_.current.animationName),d(s)}},[c.open,s]),e.jsx(Mt.div,{"data-state":mN(c.open),"data-disabled":c.disabled?"":void 0,id:c.contentId,hidden:!b,...l,ref:x,style:{"--radix-collapsible-content-height":y?`${y}px`:void 0,"--radix-collapsible-content-width":w?`${w}px`:void 0,...t.style},children:b&&a})});function mN(t){return t?"open":"closed"}var JH=AP;const eV=JH,tV=MP,rV=TP,pA=(t,r,n=0)=>{const s=[{name:"General",href:"#",icon:null,badge:null,type:"label"},{name:r==="admin"?"Admin Dashboard":r==="manager"?"Dashboard":"My Work",href:r==="admin"?"/dashboard/admin":r==="manager"?"/dashboard/manager":"/dashboard/my-work",icon:iN,badge:null,type:"single"},{name:"Overview",href:"/dashboard/overview",icon:sl,badge:null,type:"single"},{name:"Customers",href:"/customers",icon:xs,badge:null,type:"single"},{name:"Machines",href:"/machines",icon:Ct,badge:null,type:"single"},{name:"Inventory",href:"/inventory",icon:Jt,badge:null,type:"single"},{name:"Repairs Management",href:"#",icon:null,badge:null,type:"label"},{name:"Non-Warranty",icon:vr,badge:t?.non_warranty_total?t.non_warranty_total.toString():null,type:"dropdown",children:[{name:"Repair Tickets",href:"/repair-tickets",icon:Qt,badge:t?.repair_tickets?t.repair_tickets.toString():null},{name:"Work Orders",href:"/work-orders",icon:Pm,badge:null}]},{name:"Warranty",icon:ei,badge:t?.warranty_total?t.warranty_total.toString():null,type:"dropdown",children:[{name:"Warranty Repair Tickets",href:"/warranty-repair-tickets",icon:Qt,badge:t?.warranty_repair_tickets?t.warranty_repair_tickets.toString():null},{name:"Warranty Work Orders",href:"/warranty-work-orders",icon:Pm,badge:null}]},{name:"Sales Management",href:"#",icon:null,badge:null,type:"label"},{name:"Pipeline & Leads",href:"/pipeline-leads",icon:Os,badge:null,type:"single"},{name:"Quote Management",href:"/quote-management",icon:Qt,badge:null,type:"single"},{name:"Sales Reports",href:"/sales-reports",icon:sl,badge:null,type:"single"},{name:"Sales Targets",href:"/sales-targets",icon:ti,badge:null,type:"single"},{name:"Rental Management",href:"#",icon:null,badge:null,type:"label"},{name:"Rental Fleet",href:"/rental-machines",icon:Dp,badge:null,type:"single"},{name:"Active Rentals",href:"/machine-rentals",icon:is,badge:null,type:"single"},{name:"Rental Analytics",href:"/rental-analytics",icon:sl,badge:null,type:"single"},{name:"Dynamic Pricing",href:"/dynamic-pricing",icon:Tn,badge:null,type:"single"},...r==="admin"?[{name:"Admin",href:"#",icon:null,badge:null,type:"label"},{name:"User Feedback",href:"/admin-feedback",icon:Ja,badge:n>0?n.toString():null,type:"single"}]:[]];return r==="technician"?s.filter(a=>!["Pipeline & Leads","Quote Management","Sales Reports","Sales Management"].includes(a.name)):s};function gA({className:t}){const r=er(),n=li(),{user:s,hasPermission:a}=hr(),{unreadFeedbackCount:l}=aN(),[c,u]=f.useState([]),[d,h]=f.useState(null),x=f.useCallback(async()=>{try{const b=await de.getSidebarCounts();h(b.data)}catch(b){console.error("Failed to fetch sidebar counts:",b),h({repair_tickets:0,warranty_repair_tickets:0,non_warranty_total:0,warranty_total:0})}},[]);f.useEffect(()=>{x()},[x]),ut.useEffect(()=>{const b=pA(d,s?.role,l),N=[];b.forEach(_=>{_.type==="dropdown"&&_.children&&_.children.some(k=>n.pathname===k.href)&&N.push(_.name)}),u(_=>[...new Set([..._,...N])])},[n.pathname,d,s?.role,l]);const p=b=>{u(N=>N.includes(b)?N.filter(_=>_!==b):[...N,b])},y=b=>c.includes(b),v=b=>n.pathname===b,w=b=>b.some(N=>v(N.href));return e.jsxs("div",{className:ze("flex h-full w-64 flex-col bg-card border-r sidebar",t),children:[e.jsx("div",{className:"flex h-12 items-center border-b px-4 py-2",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"h-8 w-8 rounded-lg overflow-hidden bg-white flex items-center justify-center border",children:e.jsx("img",{src:"/kamer-ba-logo-v1.jpg",alt:"Kamer.ba Logo",className:"h-6 w-6 object-contain"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-sm font-semibold",children:"Kamer.ba"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Repair Management"})]})]})}),e.jsx("div",{className:"h-2"}),e.jsx("nav",{className:"flex-1 space-y-1 px-2 py-1",children:pA(d,s?.role,l).filter(b=>b.name==="Sales Targets"?a("sales_targets:read"):!0).map(b=>{if(b.type==="label")return e.jsx("div",{className:"px-2 py-1",children:e.jsx("h3",{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wider",children:b.name})},b.name);if(b.type==="single")return e.jsxs(q,{variant:v(b.href)?"secondary":"ghost",className:"w-full justify-start h-8 px-2 text-sm",onClick:()=>r(b.href),children:[e.jsx(b.icon,{className:"mr-2 h-4 w-4"}),e.jsx("span",{className:"flex-1 text-left",children:b.name}),b.badge&&e.jsx(Oe,{variant:"secondary",className:"ml-auto text-xs",children:b.badge})]},b.name);if(b.type==="dropdown"){const N=y(b.name),_=w(b.children);return e.jsxs(eV,{open:N,onOpenChange:()=>p(b.name),children:[e.jsx(tV,{asChild:!0,children:e.jsxs(q,{variant:_?"secondary":"ghost",className:"w-full justify-start h-8 px-2 text-sm",children:[e.jsx(b.icon,{className:"mr-2 h-4 w-4"}),e.jsx("span",{className:"flex-1 text-left",children:b.name}),b.badge&&e.jsx(Oe,{variant:"secondary",className:"ml-auto mr-2 text-xs",children:b.badge}),N?e.jsx(cn,{className:"h-4 w-4"}):e.jsx(ri,{className:"h-4 w-4"})]})}),e.jsx(rV,{className:"space-y-1 ml-3 mt-1",children:b.children.map(S=>e.jsxs(q,{variant:v(S.href)?"secondary":"ghost",className:"w-full justify-start h-7 px-2 text-xs",onClick:()=>{r(S.href),y(b.name)||u(k=>[...k,b.name])},children:[e.jsx(S.icon,{className:"mr-2 h-3 w-3"}),e.jsx("span",{className:"flex-1 text-left",children:S.name}),S.badge&&e.jsx(Oe,{variant:"secondary",className:"ml-auto text-xs",children:S.badge})]},S.name))})]},b.name)}return null})})]})}function rs(t){const r=f.useRef(t);return f.useEffect(()=>{r.current=t}),f.useMemo(()=>(...n)=>r.current?.(...n),[])}var oj={exports:{}},cj={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yA;function nV(){if(yA)return cj;yA=1;var t=Hd();function r(p,y){return p===y&&(p!==0||1/p===1/y)||p!==p&&y!==y}var n=typeof Object.is=="function"?Object.is:r,s=t.useState,a=t.useEffect,l=t.useLayoutEffect,c=t.useDebugValue;function u(p,y){var v=y(),w=s({inst:{value:v,getSnapshot:y}}),b=w[0].inst,N=w[1];return l(function(){b.value=v,b.getSnapshot=y,d(b)&&N({inst:b})},[p,v,y]),a(function(){return d(b)&&N({inst:b}),p(function(){d(b)&&N({inst:b})})},[p]),c(v),v}function d(p){var y=p.getSnapshot;p=p.value;try{var v=y();return!n(p,v)}catch{return!0}}function h(p,y){return y()}var x=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?h:u;return cj.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:x,cj}var vA;function OP(){return vA||(vA=1,oj.exports=nV()),oj.exports}var sV=OP();function aV(){return sV.useSyncExternalStore(iV,()=>!0,()=>!1)}function iV(){return()=>{}}var hN="Avatar",[lV,Kpe]=Ks(hN),[oV,PP]=lV(hN),DP=f.forwardRef((t,r)=>{const{__scopeAvatar:n,...s}=t,[a,l]=f.useState("idle");return e.jsx(oV,{scope:n,imageLoadingStatus:a,onImageLoadingStatusChange:l,children:e.jsx(Mt.span,{...s,ref:r})})});DP.displayName=hN;var RP="AvatarImage",LP=f.forwardRef((t,r)=>{const{__scopeAvatar:n,src:s,onLoadingStatusChange:a=()=>{},...l}=t,c=PP(RP,n),u=cV(s,l),d=rs(h=>{a(h),c.onImageLoadingStatusChange(h)});return Sn(()=>{u!=="idle"&&d(u)},[u,d]),u==="loaded"?e.jsx(Mt.img,{...l,ref:r,src:s}):null});LP.displayName=RP;var IP="AvatarFallback",$P=f.forwardRef((t,r)=>{const{__scopeAvatar:n,delayMs:s,...a}=t,l=PP(IP,n),[c,u]=f.useState(s===void 0);return f.useEffect(()=>{if(s!==void 0){const d=window.setTimeout(()=>u(!0),s);return()=>window.clearTimeout(d)}},[s]),c&&l.imageLoadingStatus!=="loaded"?e.jsx(Mt.span,{...a,ref:r}):null});$P.displayName=IP;function jA(t,r){return t?r?(t.src!==r&&(t.src=r),t.complete&&t.naturalWidth>0?"loaded":"loading"):"error":"idle"}function cV(t,{referrerPolicy:r,crossOrigin:n}){const s=aV(),a=f.useRef(null),l=s?(a.current||(a.current=new window.Image),a.current):null,[c,u]=f.useState(()=>jA(l,t));return Sn(()=>{u(jA(l,t))},[l,t]),Sn(()=>{const d=p=>()=>{u(p)};if(!l)return;const h=d("loaded"),x=d("error");return l.addEventListener("load",h),l.addEventListener("error",x),r&&(l.referrerPolicy=r),typeof n=="string"&&(l.crossOrigin=n),()=>{l.removeEventListener("load",h),l.removeEventListener("error",x)}},[l,n,r]),c}var FP=DP,qP=LP,UP=$P;const oo=f.forwardRef(({className:t,...r},n)=>e.jsx(FP,{ref:n,className:ze("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...r}));oo.displayName=FP.displayName;const zP=f.forwardRef(({className:t,...r},n)=>e.jsx(qP,{ref:n,className:ze("aspect-square h-full w-full",t),...r}));zP.displayName=qP.displayName;const co=f.forwardRef(({className:t,...r},n)=>e.jsx(UP,{ref:n,className:ze("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...r}));co.displayName=UP.displayName;const dV=t=>{switch(t){case"work_order":case"warranty_work_order":return e.jsx(Ar,{className:"h-4 w-4 text-blue-500"});case"repair_ticket":case"warranty_repair_ticket":return e.jsx(fs,{className:"h-4 w-4 text-orange-500"});case"customer":return e.jsx(lA,{className:"h-4 w-4 text-green-500"});case"machine":return e.jsx(vr,{className:"h-4 w-4 text-purple-500"});case"inventory":return e.jsx(vr,{className:"h-4 w-4 text-red-500"});case"system":return e.jsx(lA,{className:"h-4 w-4 text-muted-foreground"});case"feedback":return e.jsx(_i,{className:"h-4 w-4 text-blue-500"});default:return e.jsx(_i,{className:"h-4 w-4 text-muted-foreground"})}},uV=t=>{switch(t){case"work_order":case"warranty_work_order":return"border-l-blue-500 bg-blue-50 dark:bg-blue-950 dark:border-l-blue-400";case"repair_ticket":case"warranty_repair_ticket":return"border-l-orange-500 bg-orange-50 dark:bg-orange-950 dark:border-l-orange-400";case"customer":return"border-l-green-500 bg-green-50 dark:bg-green-950 dark:border-l-green-400";case"machine":return"border-l-purple-500 bg-purple-50 dark:bg-purple-950 dark:border-l-purple-400";case"inventory":return"border-l-red-500 bg-red-50 dark:bg-red-950 dark:border-l-red-400";case"system":return"border-l-muted-foreground bg-muted/50 dark:bg-muted/20";case"feedback":return"border-l-blue-500 bg-blue-50 dark:bg-blue-950 dark:border-l-blue-400";default:return"border-l-muted-foreground bg-muted/50 dark:bg-muted/20"}},mV=t=>{const r=new Date,n=new Date(t),s=Math.floor((r.getTime()-n.getTime())/1e3);return s<60?"Just now":s<3600?`${Math.floor(s/60)}m ago`:s<86400?`${Math.floor(s/3600)}h ago`:s<604800?`${Math.floor(s/86400)}d ago`:n.toLocaleDateString()};function hV(){const t=er(),[r,n]=f.useState(!1),s=f.useRef(null),{notifications:a,unreadCount:l,isLoading:c,markAsRead:u,deleteNotification:d}=sN();f.useEffect(()=>{const v=w=>{s.current&&!s.current.contains(w.target)&&n(!1)};return r&&document.addEventListener("mousedown",v),()=>{document.removeEventListener("mousedown",v)}},[r]);const h=()=>{t("/notifications"),n(!1)},x=v=>{try{if(v.is_read||u(v.id),v.related_entity_type&&v.related_entity_id)switch(v.related_entity_type){case"warranty_repair_ticket":t(`/warranty-repair-tickets/${v.related_entity_id}`);break;case"repair_ticket":t(`/repair-tickets/${v.related_entity_id}`);break;case"work_order":t(`/work-orders/${v.related_entity_id}`);break;case"warranty_work_order":t(`/warranty-work-orders/${v.related_entity_id}`);break;case"customer":t(`/customers/${v.related_entity_id}`);break;case"machine":t(`/machines/${v.related_entity_id}`);break;case"feedback":t("/admin-feedback");break;default:t("/notifications")}else t("/notifications");n(!1)}catch(w){console.error("Navigation error:",w),t("/notifications")}},p=(v,w)=>{v.stopPropagation(),u(w)},y=(v,w)=>{v.stopPropagation(),d(w)};return e.jsxs("div",{className:"relative",ref:s,children:[e.jsxs(q,{variant:"ghost",size:"icon",className:ze("relative",r&&"bg-accent"),onClick:()=>n(!r),children:[e.jsx(_i,{className:"h-5 w-5"}),l>0&&e.jsx(Oe,{variant:"destructive",className:"absolute -top-1 -right-1 h-5 w-5 rounded-full p-0 flex items-center justify-center text-xs animate-pulse",children:l>99?"99+":l})]}),r&&e.jsxs("div",{className:"absolute right-0 top-full mt-2 w-96 bg-background border border-border rounded-xl shadow-xl z-50 animate-in slide-in-from-top-2 duration-200",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-border",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_i,{className:"h-5 w-5 text-muted-foreground"}),e.jsx("h3",{className:"font-semibold text-sm text-foreground",children:"Notifications"})]}),l>0&&e.jsxs(Oe,{variant:"secondary",className:"text-xs bg-blue-100 text-blue-700",children:[l," new"]})]}),e.jsx("div",{className:"max-h-96 overflow-y-auto",children:c?e.jsxs("div",{className:"flex items-center justify-center p-8",children:[e.jsx(Nt,{className:"h-6 w-6 animate-spin text-muted-foreground"}),e.jsx("span",{className:"ml-2 text-sm text-muted-foreground",children:"Loading notifications..."})]}):a.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center p-8 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-muted rounded-full flex items-center justify-center mb-4",children:e.jsx(_i,{className:"h-8 w-8 text-muted-foreground"})}),e.jsx("p",{className:"text-sm font-medium text-foreground mb-1",children:"No notifications yet"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"You'll see updates about your work here"})]}):e.jsx("div",{className:"divide-y divide-border",children:a.slice(0,5).map(v=>e.jsx("div",{className:ze("p-4 hover:bg-muted/50 cursor-pointer transition-all duration-150 border-l-4",uV(v.type),!v.is_read&&"bg-blue-50/50 dark:bg-blue-950/50"),onClick:()=>x(v),children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0 mt-0.5",children:dV(v.type)}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:ze("text-sm font-medium",v.is_read?"text-muted-foreground":"text-foreground"),children:v.title}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1 line-clamp-2",children:v.message}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx(Zt,{className:"h-3 w-3 text-muted-foreground"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:mV(v.created_at)}),!v.is_read&&e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"})]})]}),e.jsxs("div",{className:"flex items-center gap-1 ml-2",children:[!v.is_read&&e.jsx(q,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 hover:bg-blue-100",onClick:w=>p(w,v.id),title:"Mark as read",children:e.jsx(Gr,{className:"h-3 w-3 text-blue-600"})}),e.jsx(q,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 hover:bg-red-100",onClick:w=>y(w,v.id),title:"Delete notification",children:e.jsx(br,{className:"h-3 w-3 text-red-600"})})]})]})})]})},v.id))})}),e.jsx("div",{className:"border-t border-border p-3 bg-muted/30 space-y-1",children:e.jsxs(q,{variant:"ghost",size:"sm",className:"w-full justify-center text-xs",onClick:h,children:[e.jsx(cP,{className:"h-3 w-3 mr-2"}),"Check all notifications"]})})]})]})}function fV({className:t,onMenuClick:r}){const{theme:n,setTheme:s,actualTheme:a}=IB(),{user:l,logout:c}=hr(),u=er(),d=()=>{s(n==="light"?"dark":"light")},h=()=>n==="dark"?e.jsx(a9,{className:"h-5 w-5"}):e.jsx(D9,{className:"h-5 w-5"}),x=()=>{c(),u("/login")},p=()=>{const y=new KeyboardEvent("keydown",{key:"k",ctrlKey:!0,bubbles:!0});document.dispatchEvent(y)};return e.jsxs("header",{className:ze("sticky top-0 z-50 flex h-16 items-center justify-between border-b bg-background px-6",t),children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(q,{variant:"ghost",size:"icon",className:"md:hidden",onClick:r,children:e.jsx(r9,{className:"h-5 w-5"})}),e.jsx("div",{className:"hidden md:block",children:e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Welcome back, ",l?.name||"User"]})})]}),e.jsx("div",{className:"flex-1 max-w-md mx-4",children:e.jsxs("button",{onClick:p,className:"w-full flex items-center gap-3 rounded-md border border-input bg-background px-3 py-2 text-sm text-muted-foreground hover:bg-accent transition-colors",children:[e.jsx(nr,{className:"h-4 w-4"}),e.jsx("span",{className:"flex-1 text-left",children:"Search or jump to..."}),e.jsxs("kbd",{className:"hidden sm:inline-flex h-5 select-none items-center gap-1 rounded border bg-muted px-1.5 font-mono text-[10px] font-medium text-muted-foreground",children:[e.jsx(k7,{className:"h-3 w-3"}),e.jsx("span",{children:"K"})]})]})}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(q,{variant:"ghost",size:"icon",onClick:d,title:`Switch to ${n==="light"?"dark":"light"} theme`,children:h()}),e.jsx(hV,{}),e.jsx(q,{variant:"ghost",size:"icon",onClick:()=>u("/settings"),title:"Settings",children:e.jsx(bl,{className:"h-5 w-5"})}),e.jsxs("div",{className:"flex items-center space-x-2 pl-2 border-l",children:[e.jsxs(oo,{className:"h-8 w-8",children:[e.jsx(zP,{src:l?.avatar,alt:l?.name}),e.jsx(co,{children:l?.name?.split(" ").map(y=>y[0]).join("")||"U"})]}),e.jsxs("div",{className:"hidden md:block",children:[e.jsx("p",{className:"text-sm font-medium",children:l?.name||"User"}),e.jsx("p",{className:"text-xs text-muted-foreground capitalize",children:l?.role||"User"})]}),e.jsx(q,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:x,children:e.jsx(mP,{className:"h-4 w-4"})})]})]})]})}const ar=f.forwardRef(({className:t,...r},n)=>e.jsx("textarea",{className:ze("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:n,...r}));ar.displayName="Textarea";function k0(t,[r,n]){return Math.min(n,Math.max(r,t))}function fN(t){const r=t+"CollectionProvider",[n,s]=Ks(r),[a,l]=n(r,{collectionRef:{current:null},itemMap:new Map}),c=b=>{const{scope:N,children:_}=b,S=ut.useRef(null),k=ut.useRef(new Map).current;return e.jsx(a,{scope:N,itemMap:k,collectionRef:S,children:_})};c.displayName=r;const u=t+"CollectionSlot",d=ho(u),h=ut.forwardRef((b,N)=>{const{scope:_,children:S}=b,k=l(u,_),E=cr(N,k.collectionRef);return e.jsx(d,{ref:E,children:S})});h.displayName=u;const x=t+"CollectionItemSlot",p="data-radix-collection-item",y=ho(x),v=ut.forwardRef((b,N)=>{const{scope:_,children:S,...k}=b,E=ut.useRef(null),A=cr(N,E),O=l(x,_);return ut.useEffect(()=>(O.itemMap.set(E,{ref:E,...k}),()=>void O.itemMap.delete(E))),e.jsx(y,{[p]:"",ref:A,children:S})});v.displayName=x;function w(b){const N=l(t+"CollectionConsumer",b);return ut.useCallback(()=>{const S=N.collectionRef.current;if(!S)return[];const k=Array.from(S.querySelectorAll(`[${p}]`));return Array.from(N.itemMap.values()).sort((O,z)=>k.indexOf(O.ref.current)-k.indexOf(z.ref.current))},[N.collectionRef,N.itemMap])}return[{Provider:c,Slot:h,ItemSlot:v},w,s]}var xV=f.createContext(void 0);function Jm(t){const r=f.useContext(xV);return t||r||"ltr"}function pV(t,r=globalThis?.document){const n=rs(t);f.useEffect(()=>{const s=a=>{a.key==="Escape"&&n(a)};return r.addEventListener("keydown",s,{capture:!0}),()=>r.removeEventListener("keydown",s,{capture:!0})},[n,r])}var gV="DismissableLayer",A0="dismissableLayer.update",yV="dismissableLayer.pointerDownOutside",vV="dismissableLayer.focusOutside",bA,BP=f.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),eh=f.forwardRef((t,r)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:s,onPointerDownOutside:a,onFocusOutside:l,onInteractOutside:c,onDismiss:u,...d}=t,h=f.useContext(BP),[x,p]=f.useState(null),y=x?.ownerDocument??globalThis?.document,[,v]=f.useState({}),w=cr(r,z=>p(z)),b=Array.from(h.layers),[N]=[...h.layersWithOutsidePointerEventsDisabled].slice(-1),_=b.indexOf(N),S=x?b.indexOf(x):-1,k=h.layersWithOutsidePointerEventsDisabled.size>0,E=S>=_,A=wV(z=>{const R=z.target,G=[...h.branches].some(J=>J.contains(R));!E||G||(a?.(z),c?.(z),z.defaultPrevented||u?.())},y),O=NV(z=>{const R=z.target;[...h.branches].some(J=>J.contains(R))||(l?.(z),c?.(z),z.defaultPrevented||u?.())},y);return pV(z=>{S===h.layers.size-1&&(s?.(z),!z.defaultPrevented&&u&&(z.preventDefault(),u()))},y),f.useEffect(()=>{if(x)return n&&(h.layersWithOutsidePointerEventsDisabled.size===0&&(bA=y.body.style.pointerEvents,y.body.style.pointerEvents="none"),h.layersWithOutsidePointerEventsDisabled.add(x)),h.layers.add(x),wA(),()=>{n&&h.layersWithOutsidePointerEventsDisabled.size===1&&(y.body.style.pointerEvents=bA)}},[x,y,n,h]),f.useEffect(()=>()=>{x&&(h.layers.delete(x),h.layersWithOutsidePointerEventsDisabled.delete(x),wA())},[x,h]),f.useEffect(()=>{const z=()=>v({});return document.addEventListener(A0,z),()=>document.removeEventListener(A0,z)},[]),e.jsx(Mt.div,{...d,ref:w,style:{pointerEvents:k?E?"auto":"none":void 0,...t.style},onFocusCapture:bt(t.onFocusCapture,O.onFocusCapture),onBlurCapture:bt(t.onBlurCapture,O.onBlurCapture),onPointerDownCapture:bt(t.onPointerDownCapture,A.onPointerDownCapture)})});eh.displayName=gV;var jV="DismissableLayerBranch",bV=f.forwardRef((t,r)=>{const n=f.useContext(BP),s=f.useRef(null),a=cr(r,s);return f.useEffect(()=>{const l=s.current;if(l)return n.branches.add(l),()=>{n.branches.delete(l)}},[n.branches]),e.jsx(Mt.div,{...t,ref:a})});bV.displayName=jV;function wV(t,r=globalThis?.document){const n=rs(t),s=f.useRef(!1),a=f.useRef(()=>{});return f.useEffect(()=>{const l=u=>{if(u.target&&!s.current){let d=function(){WP(yV,n,h,{discrete:!0})};const h={originalEvent:u};u.pointerType==="touch"?(r.removeEventListener("click",a.current),a.current=d,r.addEventListener("click",a.current,{once:!0})):d()}else r.removeEventListener("click",a.current);s.current=!1},c=window.setTimeout(()=>{r.addEventListener("pointerdown",l)},0);return()=>{window.clearTimeout(c),r.removeEventListener("pointerdown",l),r.removeEventListener("click",a.current)}},[r,n]),{onPointerDownCapture:()=>s.current=!0}}function NV(t,r=globalThis?.document){const n=rs(t),s=f.useRef(!1);return f.useEffect(()=>{const a=l=>{l.target&&!s.current&&WP(vV,n,{originalEvent:l},{discrete:!1})};return r.addEventListener("focusin",a),()=>r.removeEventListener("focusin",a)},[r,n]),{onFocusCapture:()=>s.current=!0,onBlurCapture:()=>s.current=!1}}function wA(){const t=new CustomEvent(A0);document.dispatchEvent(t)}function WP(t,r,n,{discrete:s}){const a=n.originalEvent.target,l=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});r&&a.addEventListener(t,r,{once:!0}),s?kP(a,l):a.dispatchEvent(l)}var dj=0;function $p(){f.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??NA()),document.body.insertAdjacentElement("beforeend",t[1]??NA()),dj++,()=>{dj===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(r=>r.remove()),dj--}},[])}function NA(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var uj="focusScope.autoFocusOnMount",mj="focusScope.autoFocusOnUnmount",_A={bubbles:!1,cancelable:!0},_V="FocusScope",th=f.forwardRef((t,r)=>{const{loop:n=!1,trapped:s=!1,onMountAutoFocus:a,onUnmountAutoFocus:l,...c}=t,[u,d]=f.useState(null),h=rs(a),x=rs(l),p=f.useRef(null),y=cr(r,b=>d(b)),v=f.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;f.useEffect(()=>{if(s){let b=function(k){if(v.paused||!u)return;const E=k.target;u.contains(E)?p.current=E:ro(p.current,{select:!0})},N=function(k){if(v.paused||!u)return;const E=k.relatedTarget;E!==null&&(u.contains(E)||ro(p.current,{select:!0}))},_=function(k){if(document.activeElement===document.body)for(const A of k)A.removedNodes.length>0&&ro(u)};document.addEventListener("focusin",b),document.addEventListener("focusout",N);const S=new MutationObserver(_);return u&&S.observe(u,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",b),document.removeEventListener("focusout",N),S.disconnect()}}},[s,u,v.paused]),f.useEffect(()=>{if(u){SA.add(v);const b=document.activeElement;if(!u.contains(b)){const _=new CustomEvent(uj,_A);u.addEventListener(uj,h),u.dispatchEvent(_),_.defaultPrevented||(CV(MV(HP(u)),{select:!0}),document.activeElement===b&&ro(u))}return()=>{u.removeEventListener(uj,h),setTimeout(()=>{const _=new CustomEvent(mj,_A);u.addEventListener(mj,x),u.dispatchEvent(_),_.defaultPrevented||ro(b??document.body,{select:!0}),u.removeEventListener(mj,x),SA.remove(v)},0)}}},[u,h,x,v]);const w=f.useCallback(b=>{if(!n&&!s||v.paused)return;const N=b.key==="Tab"&&!b.altKey&&!b.ctrlKey&&!b.metaKey,_=document.activeElement;if(N&&_){const S=b.currentTarget,[k,E]=SV(S);k&&E?!b.shiftKey&&_===E?(b.preventDefault(),n&&ro(k,{select:!0})):b.shiftKey&&_===k&&(b.preventDefault(),n&&ro(E,{select:!0})):_===S&&b.preventDefault()}},[n,s,v.paused]);return e.jsx(Mt.div,{tabIndex:-1,...c,ref:y,onKeyDown:w})});th.displayName=_V;function CV(t,{select:r=!1}={}){const n=document.activeElement;for(const s of t)if(ro(s,{select:r}),document.activeElement!==n)return}function SV(t){const r=HP(t),n=CA(r,t),s=CA(r.reverse(),t);return[n,s]}function HP(t){const r=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const a=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||a?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)r.push(n.currentNode);return r}function CA(t,r){for(const n of t)if(!kV(n,{upTo:r}))return n}function kV(t,{upTo:r}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(r!==void 0&&t===r)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function AV(t){return t instanceof HTMLInputElement&&"select"in t}function ro(t,{select:r=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&AV(t)&&r&&t.select()}}var SA=EV();function EV(){let t=[];return{add(r){const n=t[0];r!==n&&n?.pause(),t=kA(t,r),t.unshift(r)},remove(r){t=kA(t,r),t[0]?.resume()}}}function kA(t,r){const n=[...t],s=n.indexOf(r);return s!==-1&&n.splice(s,1),n}function MV(t){return t.filter(r=>r.tagName!=="A")}const TV=["top","right","bottom","left"],fo=Math.min,da=Math.max,Ix=Math.round,Qf=Math.floor,Si=t=>({x:t,y:t}),OV={left:"right",right:"left",bottom:"top",top:"bottom"},PV={start:"end",end:"start"};function E0(t,r,n){return da(t,fo(r,n))}function fl(t,r){return typeof t=="function"?t(r):t}function xl(t){return t.split("-")[0]}function Jd(t){return t.split("-")[1]}function xN(t){return t==="x"?"y":"x"}function pN(t){return t==="y"?"height":"width"}const DV=new Set(["top","bottom"]);function bi(t){return DV.has(xl(t))?"y":"x"}function gN(t){return xN(bi(t))}function RV(t,r,n){n===void 0&&(n=!1);const s=Jd(t),a=gN(t),l=pN(a);let c=a==="x"?s===(n?"end":"start")?"right":"left":s==="start"?"bottom":"top";return r.reference[l]>r.floating[l]&&(c=$x(c)),[c,$x(c)]}function LV(t){const r=$x(t);return[M0(t),r,M0(r)]}function M0(t){return t.replace(/start|end/g,r=>PV[r])}const AA=["left","right"],EA=["right","left"],IV=["top","bottom"],$V=["bottom","top"];function FV(t,r,n){switch(t){case"top":case"bottom":return n?r?EA:AA:r?AA:EA;case"left":case"right":return r?IV:$V;default:return[]}}function qV(t,r,n,s){const a=Jd(t);let l=FV(xl(t),n==="start",s);return a&&(l=l.map(c=>c+"-"+a),r&&(l=l.concat(l.map(M0)))),l}function $x(t){return t.replace(/left|right|bottom|top/g,r=>OV[r])}function UV(t){return{top:0,right:0,bottom:0,left:0,...t}}function VP(t){return typeof t!="number"?UV(t):{top:t,right:t,bottom:t,left:t}}function Fx(t){const{x:r,y:n,width:s,height:a}=t;return{width:s,height:a,top:n,left:r,right:r+s,bottom:n+a,x:r,y:n}}function MA(t,r,n){let{reference:s,floating:a}=t;const l=bi(r),c=gN(r),u=pN(c),d=xl(r),h=l==="y",x=s.x+s.width/2-a.width/2,p=s.y+s.height/2-a.height/2,y=s[u]/2-a[u]/2;let v;switch(d){case"top":v={x,y:s.y-a.height};break;case"bottom":v={x,y:s.y+s.height};break;case"right":v={x:s.x+s.width,y:p};break;case"left":v={x:s.x-a.width,y:p};break;default:v={x:s.x,y:s.y}}switch(Jd(r)){case"start":v[c]-=y*(n&&h?-1:1);break;case"end":v[c]+=y*(n&&h?-1:1);break}return v}const zV=async(t,r,n)=>{const{placement:s="bottom",strategy:a="absolute",middleware:l=[],platform:c}=n,u=l.filter(Boolean),d=await(c.isRTL==null?void 0:c.isRTL(r));let h=await c.getElementRects({reference:t,floating:r,strategy:a}),{x,y:p}=MA(h,s,d),y=s,v={},w=0;for(let b=0;b<u.length;b++){const{name:N,fn:_}=u[b],{x:S,y:k,data:E,reset:A}=await _({x,y:p,initialPlacement:s,placement:y,strategy:a,middlewareData:v,rects:h,platform:c,elements:{reference:t,floating:r}});x=S??x,p=k??p,v={...v,[N]:{...v[N],...E}},A&&w<=50&&(w++,typeof A=="object"&&(A.placement&&(y=A.placement),A.rects&&(h=A.rects===!0?await c.getElementRects({reference:t,floating:r,strategy:a}):A.rects),{x,y:p}=MA(h,y,d)),b=-1)}return{x,y:p,placement:y,strategy:a,middlewareData:v}};async function Dm(t,r){var n;r===void 0&&(r={});const{x:s,y:a,platform:l,rects:c,elements:u,strategy:d}=t,{boundary:h="clippingAncestors",rootBoundary:x="viewport",elementContext:p="floating",altBoundary:y=!1,padding:v=0}=fl(r,t),w=VP(v),N=u[y?p==="floating"?"reference":"floating":p],_=Fx(await l.getClippingRect({element:(n=await(l.isElement==null?void 0:l.isElement(N)))==null||n?N:N.contextElement||await(l.getDocumentElement==null?void 0:l.getDocumentElement(u.floating)),boundary:h,rootBoundary:x,strategy:d})),S=p==="floating"?{x:s,y:a,width:c.floating.width,height:c.floating.height}:c.reference,k=await(l.getOffsetParent==null?void 0:l.getOffsetParent(u.floating)),E=await(l.isElement==null?void 0:l.isElement(k))?await(l.getScale==null?void 0:l.getScale(k))||{x:1,y:1}:{x:1,y:1},A=Fx(l.convertOffsetParentRelativeRectToViewportRelativeRect?await l.convertOffsetParentRelativeRectToViewportRelativeRect({elements:u,rect:S,offsetParent:k,strategy:d}):S);return{top:(_.top-A.top+w.top)/E.y,bottom:(A.bottom-_.bottom+w.bottom)/E.y,left:(_.left-A.left+w.left)/E.x,right:(A.right-_.right+w.right)/E.x}}const BV=t=>({name:"arrow",options:t,async fn(r){const{x:n,y:s,placement:a,rects:l,platform:c,elements:u,middlewareData:d}=r,{element:h,padding:x=0}=fl(t,r)||{};if(h==null)return{};const p=VP(x),y={x:n,y:s},v=gN(a),w=pN(v),b=await c.getDimensions(h),N=v==="y",_=N?"top":"left",S=N?"bottom":"right",k=N?"clientHeight":"clientWidth",E=l.reference[w]+l.reference[v]-y[v]-l.floating[w],A=y[v]-l.reference[v],O=await(c.getOffsetParent==null?void 0:c.getOffsetParent(h));let z=O?O[k]:0;(!z||!await(c.isElement==null?void 0:c.isElement(O)))&&(z=u.floating[k]||l.floating[w]);const R=E/2-A/2,G=z/2-b[w]/2-1,J=fo(p[_],G),ie=fo(p[S],G),V=J,xe=z-b[w]-ie,pe=z/2-b[w]/2+R,re=E0(V,pe,xe),M=!d.arrow&&Jd(a)!=null&&pe!==re&&l.reference[w]/2-(pe<V?J:ie)-b[w]/2<0,B=M?pe<V?pe-V:pe-xe:0;return{[v]:y[v]+B,data:{[v]:re,centerOffset:pe-re-B,...M&&{alignmentOffset:B}},reset:M}}}),WV=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(r){var n,s;const{placement:a,middlewareData:l,rects:c,initialPlacement:u,platform:d,elements:h}=r,{mainAxis:x=!0,crossAxis:p=!0,fallbackPlacements:y,fallbackStrategy:v="bestFit",fallbackAxisSideDirection:w="none",flipAlignment:b=!0,...N}=fl(t,r);if((n=l.arrow)!=null&&n.alignmentOffset)return{};const _=xl(a),S=bi(u),k=xl(u)===u,E=await(d.isRTL==null?void 0:d.isRTL(h.floating)),A=y||(k||!b?[$x(u)]:LV(u)),O=w!=="none";!y&&O&&A.push(...qV(u,b,w,E));const z=[u,...A],R=await Dm(r,N),G=[];let J=((s=l.flip)==null?void 0:s.overflows)||[];if(x&&G.push(R[_]),p){const pe=RV(a,c,E);G.push(R[pe[0]],R[pe[1]])}if(J=[...J,{placement:a,overflows:G}],!G.every(pe=>pe<=0)){var ie,V;const pe=(((ie=l.flip)==null?void 0:ie.index)||0)+1,re=z[pe];if(re&&(!(p==="alignment"?S!==bi(re):!1)||J.every(L=>bi(L.placement)===S?L.overflows[0]>0:!0)))return{data:{index:pe,overflows:J},reset:{placement:re}};let M=(V=J.filter(B=>B.overflows[0]<=0).sort((B,L)=>B.overflows[1]-L.overflows[1])[0])==null?void 0:V.placement;if(!M)switch(v){case"bestFit":{var xe;const B=(xe=J.filter(L=>{if(O){const T=bi(L.placement);return T===S||T==="y"}return!0}).map(L=>[L.placement,L.overflows.filter(T=>T>0).reduce((T,F)=>T+F,0)]).sort((L,T)=>L[1]-T[1])[0])==null?void 0:xe[0];B&&(M=B);break}case"initialPlacement":M=u;break}if(a!==M)return{reset:{placement:M}}}return{}}}};function TA(t,r){return{top:t.top-r.height,right:t.right-r.width,bottom:t.bottom-r.height,left:t.left-r.width}}function OA(t){return TV.some(r=>t[r]>=0)}const HV=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(r){const{rects:n}=r,{strategy:s="referenceHidden",...a}=fl(t,r);switch(s){case"referenceHidden":{const l=await Dm(r,{...a,elementContext:"reference"}),c=TA(l,n.reference);return{data:{referenceHiddenOffsets:c,referenceHidden:OA(c)}}}case"escaped":{const l=await Dm(r,{...a,altBoundary:!0}),c=TA(l,n.floating);return{data:{escapedOffsets:c,escaped:OA(c)}}}default:return{}}}}},YP=new Set(["left","top"]);async function VV(t,r){const{placement:n,platform:s,elements:a}=t,l=await(s.isRTL==null?void 0:s.isRTL(a.floating)),c=xl(n),u=Jd(n),d=bi(n)==="y",h=YP.has(c)?-1:1,x=l&&d?-1:1,p=fl(r,t);let{mainAxis:y,crossAxis:v,alignmentAxis:w}=typeof p=="number"?{mainAxis:p,crossAxis:0,alignmentAxis:null}:{mainAxis:p.mainAxis||0,crossAxis:p.crossAxis||0,alignmentAxis:p.alignmentAxis};return u&&typeof w=="number"&&(v=u==="end"?w*-1:w),d?{x:v*x,y:y*h}:{x:y*h,y:v*x}}const YV=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(r){var n,s;const{x:a,y:l,placement:c,middlewareData:u}=r,d=await VV(r,t);return c===((n=u.offset)==null?void 0:n.placement)&&(s=u.arrow)!=null&&s.alignmentOffset?{}:{x:a+d.x,y:l+d.y,data:{...d,placement:c}}}}},KV=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(r){const{x:n,y:s,placement:a}=r,{mainAxis:l=!0,crossAxis:c=!1,limiter:u={fn:N=>{let{x:_,y:S}=N;return{x:_,y:S}}},...d}=fl(t,r),h={x:n,y:s},x=await Dm(r,d),p=bi(xl(a)),y=xN(p);let v=h[y],w=h[p];if(l){const N=y==="y"?"top":"left",_=y==="y"?"bottom":"right",S=v+x[N],k=v-x[_];v=E0(S,v,k)}if(c){const N=p==="y"?"top":"left",_=p==="y"?"bottom":"right",S=w+x[N],k=w-x[_];w=E0(S,w,k)}const b=u.fn({...r,[y]:v,[p]:w});return{...b,data:{x:b.x-n,y:b.y-s,enabled:{[y]:l,[p]:c}}}}}},GV=function(t){return t===void 0&&(t={}),{options:t,fn(r){const{x:n,y:s,placement:a,rects:l,middlewareData:c}=r,{offset:u=0,mainAxis:d=!0,crossAxis:h=!0}=fl(t,r),x={x:n,y:s},p=bi(a),y=xN(p);let v=x[y],w=x[p];const b=fl(u,r),N=typeof b=="number"?{mainAxis:b,crossAxis:0}:{mainAxis:0,crossAxis:0,...b};if(d){const k=y==="y"?"height":"width",E=l.reference[y]-l.floating[k]+N.mainAxis,A=l.reference[y]+l.reference[k]-N.mainAxis;v<E?v=E:v>A&&(v=A)}if(h){var _,S;const k=y==="y"?"width":"height",E=YP.has(xl(a)),A=l.reference[p]-l.floating[k]+(E&&((_=c.offset)==null?void 0:_[p])||0)+(E?0:N.crossAxis),O=l.reference[p]+l.reference[k]+(E?0:((S=c.offset)==null?void 0:S[p])||0)-(E?N.crossAxis:0);w<A?w=A:w>O&&(w=O)}return{[y]:v,[p]:w}}}},QV=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(r){var n,s;const{placement:a,rects:l,platform:c,elements:u}=r,{apply:d=()=>{},...h}=fl(t,r),x=await Dm(r,h),p=xl(a),y=Jd(a),v=bi(a)==="y",{width:w,height:b}=l.floating;let N,_;p==="top"||p==="bottom"?(N=p,_=y===(await(c.isRTL==null?void 0:c.isRTL(u.floating))?"start":"end")?"left":"right"):(_=p,N=y==="end"?"top":"bottom");const S=b-x.top-x.bottom,k=w-x.left-x.right,E=fo(b-x[N],S),A=fo(w-x[_],k),O=!r.middlewareData.shift;let z=E,R=A;if((n=r.middlewareData.shift)!=null&&n.enabled.x&&(R=k),(s=r.middlewareData.shift)!=null&&s.enabled.y&&(z=S),O&&!y){const J=da(x.left,0),ie=da(x.right,0),V=da(x.top,0),xe=da(x.bottom,0);v?R=w-2*(J!==0||ie!==0?J+ie:da(x.left,x.right)):z=b-2*(V!==0||xe!==0?V+xe:da(x.top,x.bottom))}await d({...r,availableWidth:R,availableHeight:z});const G=await c.getDimensions(u.floating);return w!==G.width||b!==G.height?{reset:{rects:!0}}:{}}}};function Fp(){return typeof window<"u"}function eu(t){return KP(t)?(t.nodeName||"").toLowerCase():"#document"}function ha(t){var r;return(t==null||(r=t.ownerDocument)==null?void 0:r.defaultView)||window}function Ri(t){var r;return(r=(KP(t)?t.ownerDocument:t.document)||window.document)==null?void 0:r.documentElement}function KP(t){return Fp()?t instanceof Node||t instanceof ha(t).Node:!1}function ni(t){return Fp()?t instanceof Element||t instanceof ha(t).Element:!1}function Ti(t){return Fp()?t instanceof HTMLElement||t instanceof ha(t).HTMLElement:!1}function PA(t){return!Fp()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof ha(t).ShadowRoot}const XV=new Set(["inline","contents"]);function rh(t){const{overflow:r,overflowX:n,overflowY:s,display:a}=si(t);return/auto|scroll|overlay|hidden|clip/.test(r+s+n)&&!XV.has(a)}const ZV=new Set(["table","td","th"]);function JV(t){return ZV.has(eu(t))}const eY=[":popover-open",":modal"];function qp(t){return eY.some(r=>{try{return t.matches(r)}catch{return!1}})}const tY=["transform","translate","scale","rotate","perspective"],rY=["transform","translate","scale","rotate","perspective","filter"],nY=["paint","layout","strict","content"];function yN(t){const r=vN(),n=ni(t)?si(t):t;return tY.some(s=>n[s]?n[s]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!r&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!r&&(n.filter?n.filter!=="none":!1)||rY.some(s=>(n.willChange||"").includes(s))||nY.some(s=>(n.contain||"").includes(s))}function sY(t){let r=xo(t);for(;Ti(r)&&!Od(r);){if(yN(r))return r;if(qp(r))return null;r=xo(r)}return null}function vN(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const aY=new Set(["html","body","#document"]);function Od(t){return aY.has(eu(t))}function si(t){return ha(t).getComputedStyle(t)}function Up(t){return ni(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function xo(t){if(eu(t)==="html")return t;const r=t.assignedSlot||t.parentNode||PA(t)&&t.host||Ri(t);return PA(r)?r.host:r}function GP(t){const r=xo(t);return Od(r)?t.ownerDocument?t.ownerDocument.body:t.body:Ti(r)&&rh(r)?r:GP(r)}function Rm(t,r,n){var s;r===void 0&&(r=[]),n===void 0&&(n=!0);const a=GP(t),l=a===((s=t.ownerDocument)==null?void 0:s.body),c=ha(a);if(l){const u=T0(c);return r.concat(c,c.visualViewport||[],rh(a)?a:[],u&&n?Rm(u):[])}return r.concat(a,Rm(a,[],n))}function T0(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function QP(t){const r=si(t);let n=parseFloat(r.width)||0,s=parseFloat(r.height)||0;const a=Ti(t),l=a?t.offsetWidth:n,c=a?t.offsetHeight:s,u=Ix(n)!==l||Ix(s)!==c;return u&&(n=l,s=c),{width:n,height:s,$:u}}function jN(t){return ni(t)?t:t.contextElement}function Sd(t){const r=jN(t);if(!Ti(r))return Si(1);const n=r.getBoundingClientRect(),{width:s,height:a,$:l}=QP(r);let c=(l?Ix(n.width):n.width)/s,u=(l?Ix(n.height):n.height)/a;return(!c||!Number.isFinite(c))&&(c=1),(!u||!Number.isFinite(u))&&(u=1),{x:c,y:u}}const iY=Si(0);function XP(t){const r=ha(t);return!vN()||!r.visualViewport?iY:{x:r.visualViewport.offsetLeft,y:r.visualViewport.offsetTop}}function lY(t,r,n){return r===void 0&&(r=!1),!n||r&&n!==ha(t)?!1:r}function hc(t,r,n,s){r===void 0&&(r=!1),n===void 0&&(n=!1);const a=t.getBoundingClientRect(),l=jN(t);let c=Si(1);r&&(s?ni(s)&&(c=Sd(s)):c=Sd(t));const u=lY(l,n,s)?XP(l):Si(0);let d=(a.left+u.x)/c.x,h=(a.top+u.y)/c.y,x=a.width/c.x,p=a.height/c.y;if(l){const y=ha(l),v=s&&ni(s)?ha(s):s;let w=y,b=T0(w);for(;b&&s&&v!==w;){const N=Sd(b),_=b.getBoundingClientRect(),S=si(b),k=_.left+(b.clientLeft+parseFloat(S.paddingLeft))*N.x,E=_.top+(b.clientTop+parseFloat(S.paddingTop))*N.y;d*=N.x,h*=N.y,x*=N.x,p*=N.y,d+=k,h+=E,w=ha(b),b=T0(w)}}return Fx({width:x,height:p,x:d,y:h})}function zp(t,r){const n=Up(t).scrollLeft;return r?r.left+n:hc(Ri(t)).left+n}function ZP(t,r){const n=t.getBoundingClientRect(),s=n.left+r.scrollLeft-zp(t,n),a=n.top+r.scrollTop;return{x:s,y:a}}function oY(t){let{elements:r,rect:n,offsetParent:s,strategy:a}=t;const l=a==="fixed",c=Ri(s),u=r?qp(r.floating):!1;if(s===c||u&&l)return n;let d={scrollLeft:0,scrollTop:0},h=Si(1);const x=Si(0),p=Ti(s);if((p||!p&&!l)&&((eu(s)!=="body"||rh(c))&&(d=Up(s)),Ti(s))){const v=hc(s);h=Sd(s),x.x=v.x+s.clientLeft,x.y=v.y+s.clientTop}const y=c&&!p&&!l?ZP(c,d):Si(0);return{width:n.width*h.x,height:n.height*h.y,x:n.x*h.x-d.scrollLeft*h.x+x.x+y.x,y:n.y*h.y-d.scrollTop*h.y+x.y+y.y}}function cY(t){return Array.from(t.getClientRects())}function dY(t){const r=Ri(t),n=Up(t),s=t.ownerDocument.body,a=da(r.scrollWidth,r.clientWidth,s.scrollWidth,s.clientWidth),l=da(r.scrollHeight,r.clientHeight,s.scrollHeight,s.clientHeight);let c=-n.scrollLeft+zp(t);const u=-n.scrollTop;return si(s).direction==="rtl"&&(c+=da(r.clientWidth,s.clientWidth)-a),{width:a,height:l,x:c,y:u}}const DA=25;function uY(t,r){const n=ha(t),s=Ri(t),a=n.visualViewport;let l=s.clientWidth,c=s.clientHeight,u=0,d=0;if(a){l=a.width,c=a.height;const x=vN();(!x||x&&r==="fixed")&&(u=a.offsetLeft,d=a.offsetTop)}const h=zp(s);if(h<=0){const x=s.ownerDocument,p=x.body,y=getComputedStyle(p),v=x.compatMode==="CSS1Compat"&&parseFloat(y.marginLeft)+parseFloat(y.marginRight)||0,w=Math.abs(s.clientWidth-p.clientWidth-v);w<=DA&&(l-=w)}else h<=DA&&(l+=h);return{width:l,height:c,x:u,y:d}}const mY=new Set(["absolute","fixed"]);function hY(t,r){const n=hc(t,!0,r==="fixed"),s=n.top+t.clientTop,a=n.left+t.clientLeft,l=Ti(t)?Sd(t):Si(1),c=t.clientWidth*l.x,u=t.clientHeight*l.y,d=a*l.x,h=s*l.y;return{width:c,height:u,x:d,y:h}}function RA(t,r,n){let s;if(r==="viewport")s=uY(t,n);else if(r==="document")s=dY(Ri(t));else if(ni(r))s=hY(r,n);else{const a=XP(t);s={x:r.x-a.x,y:r.y-a.y,width:r.width,height:r.height}}return Fx(s)}function JP(t,r){const n=xo(t);return n===r||!ni(n)||Od(n)?!1:si(n).position==="fixed"||JP(n,r)}function fY(t,r){const n=r.get(t);if(n)return n;let s=Rm(t,[],!1).filter(u=>ni(u)&&eu(u)!=="body"),a=null;const l=si(t).position==="fixed";let c=l?xo(t):t;for(;ni(c)&&!Od(c);){const u=si(c),d=yN(c);!d&&u.position==="fixed"&&(a=null),(l?!d&&!a:!d&&u.position==="static"&&!!a&&mY.has(a.position)||rh(c)&&!d&&JP(t,c))?s=s.filter(x=>x!==c):a=u,c=xo(c)}return r.set(t,s),s}function xY(t){let{element:r,boundary:n,rootBoundary:s,strategy:a}=t;const c=[...n==="clippingAncestors"?qp(r)?[]:fY(r,this._c):[].concat(n),s],u=c[0],d=c.reduce((h,x)=>{const p=RA(r,x,a);return h.top=da(p.top,h.top),h.right=fo(p.right,h.right),h.bottom=fo(p.bottom,h.bottom),h.left=da(p.left,h.left),h},RA(r,u,a));return{width:d.right-d.left,height:d.bottom-d.top,x:d.left,y:d.top}}function pY(t){const{width:r,height:n}=QP(t);return{width:r,height:n}}function gY(t,r,n){const s=Ti(r),a=Ri(r),l=n==="fixed",c=hc(t,!0,l,r);let u={scrollLeft:0,scrollTop:0};const d=Si(0);function h(){d.x=zp(a)}if(s||!s&&!l)if((eu(r)!=="body"||rh(a))&&(u=Up(r)),s){const v=hc(r,!0,l,r);d.x=v.x+r.clientLeft,d.y=v.y+r.clientTop}else a&&h();l&&!s&&a&&h();const x=a&&!s&&!l?ZP(a,u):Si(0),p=c.left+u.scrollLeft-d.x-x.x,y=c.top+u.scrollTop-d.y-x.y;return{x:p,y,width:c.width,height:c.height}}function hj(t){return si(t).position==="static"}function LA(t,r){if(!Ti(t)||si(t).position==="fixed")return null;if(r)return r(t);let n=t.offsetParent;return Ri(t)===n&&(n=n.ownerDocument.body),n}function eD(t,r){const n=ha(t);if(qp(t))return n;if(!Ti(t)){let a=xo(t);for(;a&&!Od(a);){if(ni(a)&&!hj(a))return a;a=xo(a)}return n}let s=LA(t,r);for(;s&&JV(s)&&hj(s);)s=LA(s,r);return s&&Od(s)&&hj(s)&&!yN(s)?n:s||sY(t)||n}const yY=async function(t){const r=this.getOffsetParent||eD,n=this.getDimensions,s=await n(t.floating);return{reference:gY(t.reference,await r(t.floating),t.strategy),floating:{x:0,y:0,width:s.width,height:s.height}}};function vY(t){return si(t).direction==="rtl"}const jY={convertOffsetParentRelativeRectToViewportRelativeRect:oY,getDocumentElement:Ri,getClippingRect:xY,getOffsetParent:eD,getElementRects:yY,getClientRects:cY,getDimensions:pY,getScale:Sd,isElement:ni,isRTL:vY};function tD(t,r){return t.x===r.x&&t.y===r.y&&t.width===r.width&&t.height===r.height}function bY(t,r){let n=null,s;const a=Ri(t);function l(){var u;clearTimeout(s),(u=n)==null||u.disconnect(),n=null}function c(u,d){u===void 0&&(u=!1),d===void 0&&(d=1),l();const h=t.getBoundingClientRect(),{left:x,top:p,width:y,height:v}=h;if(u||r(),!y||!v)return;const w=Qf(p),b=Qf(a.clientWidth-(x+y)),N=Qf(a.clientHeight-(p+v)),_=Qf(x),k={rootMargin:-w+"px "+-b+"px "+-N+"px "+-_+"px",threshold:da(0,fo(1,d))||1};let E=!0;function A(O){const z=O[0].intersectionRatio;if(z!==d){if(!E)return c();z?c(!1,z):s=setTimeout(()=>{c(!1,1e-7)},1e3)}z===1&&!tD(h,t.getBoundingClientRect())&&c(),E=!1}try{n=new IntersectionObserver(A,{...k,root:a.ownerDocument})}catch{n=new IntersectionObserver(A,k)}n.observe(t)}return c(!0),l}function wY(t,r,n,s){s===void 0&&(s={});const{ancestorScroll:a=!0,ancestorResize:l=!0,elementResize:c=typeof ResizeObserver=="function",layoutShift:u=typeof IntersectionObserver=="function",animationFrame:d=!1}=s,h=jN(t),x=a||l?[...h?Rm(h):[],...Rm(r)]:[];x.forEach(_=>{a&&_.addEventListener("scroll",n,{passive:!0}),l&&_.addEventListener("resize",n)});const p=h&&u?bY(h,n):null;let y=-1,v=null;c&&(v=new ResizeObserver(_=>{let[S]=_;S&&S.target===h&&v&&(v.unobserve(r),cancelAnimationFrame(y),y=requestAnimationFrame(()=>{var k;(k=v)==null||k.observe(r)})),n()}),h&&!d&&v.observe(h),v.observe(r));let w,b=d?hc(t):null;d&&N();function N(){const _=hc(t);b&&!tD(b,_)&&n(),b=_,w=requestAnimationFrame(N)}return n(),()=>{var _;x.forEach(S=>{a&&S.removeEventListener("scroll",n),l&&S.removeEventListener("resize",n)}),p?.(),(_=v)==null||_.disconnect(),v=null,d&&cancelAnimationFrame(w)}}const NY=YV,_Y=KV,CY=WV,SY=QV,kY=HV,IA=BV,AY=GV,EY=(t,r,n)=>{const s=new Map,a={platform:jY,...n},l={...a.platform,_c:s};return zV(t,r,{...a,platform:l})};var MY=typeof document<"u",TY=function(){},Sx=MY?f.useLayoutEffect:TY;function qx(t,r){if(t===r)return!0;if(typeof t!=typeof r)return!1;if(typeof t=="function"&&t.toString()===r.toString())return!0;let n,s,a;if(t&&r&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==r.length)return!1;for(s=n;s--!==0;)if(!qx(t[s],r[s]))return!1;return!0}if(a=Object.keys(t),n=a.length,n!==Object.keys(r).length)return!1;for(s=n;s--!==0;)if(!{}.hasOwnProperty.call(r,a[s]))return!1;for(s=n;s--!==0;){const l=a[s];if(!(l==="_owner"&&t.$$typeof)&&!qx(t[l],r[l]))return!1}return!0}return t!==t&&r!==r}function rD(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function $A(t,r){const n=rD(t);return Math.round(r*n)/n}function fj(t){const r=f.useRef(t);return Sx(()=>{r.current=t}),r}function OY(t){t===void 0&&(t={});const{placement:r="bottom",strategy:n="absolute",middleware:s=[],platform:a,elements:{reference:l,floating:c}={},transform:u=!0,whileElementsMounted:d,open:h}=t,[x,p]=f.useState({x:0,y:0,strategy:n,placement:r,middlewareData:{},isPositioned:!1}),[y,v]=f.useState(s);qx(y,s)||v(s);const[w,b]=f.useState(null),[N,_]=f.useState(null),S=f.useCallback(L=>{L!==O.current&&(O.current=L,b(L))},[]),k=f.useCallback(L=>{L!==z.current&&(z.current=L,_(L))},[]),E=l||w,A=c||N,O=f.useRef(null),z=f.useRef(null),R=f.useRef(x),G=d!=null,J=fj(d),ie=fj(a),V=fj(h),xe=f.useCallback(()=>{if(!O.current||!z.current)return;const L={placement:r,strategy:n,middleware:y};ie.current&&(L.platform=ie.current),EY(O.current,z.current,L).then(T=>{const F={...T,isPositioned:V.current!==!1};pe.current&&!qx(R.current,F)&&(R.current=F,Nc.flushSync(()=>{p(F)}))})},[y,r,n,ie,V]);Sx(()=>{h===!1&&R.current.isPositioned&&(R.current.isPositioned=!1,p(L=>({...L,isPositioned:!1})))},[h]);const pe=f.useRef(!1);Sx(()=>(pe.current=!0,()=>{pe.current=!1}),[]),Sx(()=>{if(E&&(O.current=E),A&&(z.current=A),E&&A){if(J.current)return J.current(E,A,xe);xe()}},[E,A,xe,J,G]);const re=f.useMemo(()=>({reference:O,floating:z,setReference:S,setFloating:k}),[S,k]),M=f.useMemo(()=>({reference:E,floating:A}),[E,A]),B=f.useMemo(()=>{const L={position:n,left:0,top:0};if(!M.floating)return L;const T=$A(M.floating,x.x),F=$A(M.floating,x.y);return u?{...L,transform:"translate("+T+"px, "+F+"px)",...rD(M.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:T,top:F}},[n,u,M.floating,x.x,x.y]);return f.useMemo(()=>({...x,update:xe,refs:re,elements:M,floatingStyles:B}),[x,xe,re,M,B])}const PY=t=>{function r(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:s,padding:a}=typeof t=="function"?t(n):t;return s&&r(s)?s.current!=null?IA({element:s.current,padding:a}).fn(n):{}:s?IA({element:s,padding:a}).fn(n):{}}}},DY=(t,r)=>({...NY(t),options:[t,r]}),RY=(t,r)=>({..._Y(t),options:[t,r]}),LY=(t,r)=>({...AY(t),options:[t,r]}),IY=(t,r)=>({...CY(t),options:[t,r]}),$Y=(t,r)=>({...SY(t),options:[t,r]}),FY=(t,r)=>({...kY(t),options:[t,r]}),qY=(t,r)=>({...PY(t),options:[t,r]});var UY="Arrow",nD=f.forwardRef((t,r)=>{const{children:n,width:s=10,height:a=5,...l}=t;return e.jsx(Mt.svg,{...l,ref:r,width:s,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:e.jsx("polygon",{points:"0,0 30,0 15,10"})})});nD.displayName=UY;var zY=nD;function sD(t){const[r,n]=f.useState(void 0);return Sn(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const s=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const l=a[0];let c,u;if("borderBoxSize"in l){const d=l.borderBoxSize,h=Array.isArray(d)?d[0]:d;c=h.inlineSize,u=h.blockSize}else c=t.offsetWidth,u=t.offsetHeight;n({width:c,height:u})});return s.observe(t,{box:"border-box"}),()=>s.unobserve(t)}else n(void 0)},[t]),r}var bN="Popper",[aD,tu]=Ks(bN),[BY,iD]=aD(bN),lD=t=>{const{__scopePopper:r,children:n}=t,[s,a]=f.useState(null);return e.jsx(BY,{scope:r,anchor:s,onAnchorChange:a,children:n})};lD.displayName=bN;var oD="PopperAnchor",cD=f.forwardRef((t,r)=>{const{__scopePopper:n,virtualRef:s,...a}=t,l=iD(oD,n),c=f.useRef(null),u=cr(r,c),d=f.useRef(null);return f.useEffect(()=>{const h=d.current;d.current=s?.current||c.current,h!==d.current&&l.onAnchorChange(d.current)}),s?null:e.jsx(Mt.div,{...a,ref:u})});cD.displayName=oD;var wN="PopperContent",[WY,HY]=aD(wN),dD=f.forwardRef((t,r)=>{const{__scopePopper:n,side:s="bottom",sideOffset:a=0,align:l="center",alignOffset:c=0,arrowPadding:u=0,avoidCollisions:d=!0,collisionBoundary:h=[],collisionPadding:x=0,sticky:p="partial",hideWhenDetached:y=!1,updatePositionStrategy:v="optimized",onPlaced:w,...b}=t,N=iD(wN,n),[_,S]=f.useState(null),k=cr(r,te=>S(te)),[E,A]=f.useState(null),O=sD(E),z=O?.width??0,R=O?.height??0,G=s+(l!=="center"?"-"+l:""),J=typeof x=="number"?x:{top:0,right:0,bottom:0,left:0,...x},ie=Array.isArray(h)?h:[h],V=ie.length>0,xe={padding:J,boundary:ie.filter(YY),altBoundary:V},{refs:pe,floatingStyles:re,placement:M,isPositioned:B,middlewareData:L}=OY({strategy:"fixed",placement:G,whileElementsMounted:(...te)=>wY(...te,{animationFrame:v==="always"}),elements:{reference:N.anchor},middleware:[DY({mainAxis:a+R,alignmentAxis:c}),d&&RY({mainAxis:!0,crossAxis:!1,limiter:p==="partial"?LY():void 0,...xe}),d&&IY({...xe}),$Y({...xe,apply:({elements:te,rects:De,availableWidth:ne,availableHeight:$e})=>{const{width:ge,height:we}=De.reference,_e=te.floating.style;_e.setProperty("--radix-popper-available-width",`${ne}px`),_e.setProperty("--radix-popper-available-height",`${$e}px`),_e.setProperty("--radix-popper-anchor-width",`${ge}px`),_e.setProperty("--radix-popper-anchor-height",`${we}px`)}}),E&&qY({element:E,padding:u}),KY({arrowWidth:z,arrowHeight:R}),y&&FY({strategy:"referenceHidden",...xe})]}),[T,F]=hD(M),I=rs(w);Sn(()=>{B&&I?.()},[B,I]);const Q=L.arrow?.x,W=L.arrow?.y,ee=L.arrow?.centerOffset!==0,[ye,he]=f.useState();return Sn(()=>{_&&he(window.getComputedStyle(_).zIndex)},[_]),e.jsx("div",{ref:pe.setFloating,"data-radix-popper-content-wrapper":"",style:{...re,transform:B?re.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ye,"--radix-popper-transform-origin":[L.transformOrigin?.x,L.transformOrigin?.y].join(" "),...L.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:e.jsx(WY,{scope:n,placedSide:T,onArrowChange:A,arrowX:Q,arrowY:W,shouldHideArrow:ee,children:e.jsx(Mt.div,{"data-side":T,"data-align":F,...b,ref:k,style:{...b.style,animation:B?void 0:"none"}})})})});dD.displayName=wN;var uD="PopperArrow",VY={top:"bottom",right:"left",bottom:"top",left:"right"},mD=f.forwardRef(function(r,n){const{__scopePopper:s,...a}=r,l=HY(uD,s),c=VY[l.placedSide];return e.jsx("span",{ref:l.onArrowChange,style:{position:"absolute",left:l.arrowX,top:l.arrowY,[c]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[l.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[l.placedSide],visibility:l.shouldHideArrow?"hidden":void 0},children:e.jsx(zY,{...a,ref:n,style:{...a.style,display:"block"}})})});mD.displayName=uD;function YY(t){return t!==null}var KY=t=>({name:"transformOrigin",options:t,fn(r){const{placement:n,rects:s,middlewareData:a}=r,c=a.arrow?.centerOffset!==0,u=c?0:t.arrowWidth,d=c?0:t.arrowHeight,[h,x]=hD(n),p={start:"0%",center:"50%",end:"100%"}[x],y=(a.arrow?.x??0)+u/2,v=(a.arrow?.y??0)+d/2;let w="",b="";return h==="bottom"?(w=c?p:`${y}px`,b=`${-d}px`):h==="top"?(w=c?p:`${y}px`,b=`${s.floating.height+d}px`):h==="right"?(w=`${-d}px`,b=c?p:`${v}px`):h==="left"&&(w=`${s.floating.width+d}px`,b=c?p:`${v}px`),{data:{x:w,y:b}}}});function hD(t){const[r,n="center"]=t.split("-");return[r,n]}var NN=lD,Bp=cD,_N=dD,CN=mD,GY="Portal",nh=f.forwardRef((t,r)=>{const{container:n,...s}=t,[a,l]=f.useState(!1);Sn(()=>l(!0),[]);const c=n||a&&globalThis?.document?.body;return c?UO.createPortal(e.jsx(Mt.div,{...s,ref:r}),c):null});nh.displayName=GY;function fD(t){const r=f.useRef({value:t,previous:t});return f.useMemo(()=>(r.current.value!==t&&(r.current.previous=r.current.value,r.current.value=t),r.current.previous),[t])}var xD=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),QY="VisuallyHidden",XY=f.forwardRef((t,r)=>e.jsx(Mt.span,{...t,ref:r,style:{...xD,...t.style}}));XY.displayName=QY;var ZY=function(t){if(typeof document>"u")return null;var r=Array.isArray(t)?t[0]:t;return r.ownerDocument.body},pd=new WeakMap,Xf=new WeakMap,Zf={},xj=0,pD=function(t){return t&&(t.host||pD(t.parentNode))},JY=function(t,r){return r.map(function(n){if(t.contains(n))return n;var s=pD(n);return s&&t.contains(s)?s:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},eK=function(t,r,n,s){var a=JY(r,Array.isArray(t)?t:[t]);Zf[n]||(Zf[n]=new WeakMap);var l=Zf[n],c=[],u=new Set,d=new Set(a),h=function(p){!p||u.has(p)||(u.add(p),h(p.parentNode))};a.forEach(h);var x=function(p){!p||d.has(p)||Array.prototype.forEach.call(p.children,function(y){if(u.has(y))x(y);else try{var v=y.getAttribute(s),w=v!==null&&v!=="false",b=(pd.get(y)||0)+1,N=(l.get(y)||0)+1;pd.set(y,b),l.set(y,N),c.push(y),b===1&&w&&Xf.set(y,!0),N===1&&y.setAttribute(n,"true"),w||y.setAttribute(s,"true")}catch(_){console.error("aria-hidden: cannot operate on ",y,_)}})};return x(r),u.clear(),xj++,function(){c.forEach(function(p){var y=pd.get(p)-1,v=l.get(p)-1;pd.set(p,y),l.set(p,v),y||(Xf.has(p)||p.removeAttribute(s),Xf.delete(p)),v||p.removeAttribute(n)}),xj--,xj||(pd=new WeakMap,pd=new WeakMap,Xf=new WeakMap,Zf={})}},Wp=function(t,r,n){n===void 0&&(n="data-aria-hidden");var s=Array.from(Array.isArray(t)?t:[t]),a=ZY(t);return a?(s.push.apply(s,Array.from(a.querySelectorAll("[aria-live], script"))),eK(s,a,n,"aria-hidden")):function(){return null}},yi=function(){return yi=Object.assign||function(r){for(var n,s=1,a=arguments.length;s<a;s++){n=arguments[s];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(r[l]=n[l])}return r},yi.apply(this,arguments)};function gD(t,r){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&r.indexOf(s)<0&&(n[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(t);a<s.length;a++)r.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(t,s[a])&&(n[s[a]]=t[s[a]]);return n}function tK(t,r,n){if(n||arguments.length===2)for(var s=0,a=r.length,l;s<a;s++)(l||!(s in r))&&(l||(l=Array.prototype.slice.call(r,0,s)),l[s]=r[s]);return t.concat(l||Array.prototype.slice.call(r))}var kx="right-scroll-bar-position",Ax="width-before-scroll-bar",rK="with-scroll-bars-hidden",nK="--removed-body-scroll-bar-size";function pj(t,r){return typeof t=="function"?t(r):t&&(t.current=r),t}function sK(t,r){var n=f.useState(function(){return{value:t,callback:r,facade:{get current(){return n.value},set current(s){var a=n.value;a!==s&&(n.value=s,n.callback(s,a))}}}})[0];return n.callback=r,n.facade}var aK=typeof window<"u"?f.useLayoutEffect:f.useEffect,FA=new WeakMap;function iK(t,r){var n=sK(null,function(s){return t.forEach(function(a){return pj(a,s)})});return aK(function(){var s=FA.get(n);if(s){var a=new Set(s),l=new Set(t),c=n.current;a.forEach(function(u){l.has(u)||pj(u,null)}),l.forEach(function(u){a.has(u)||pj(u,c)})}FA.set(n,t)},[t]),n}function lK(t){return t}function oK(t,r){r===void 0&&(r=lK);var n=[],s=!1,a={read:function(){if(s)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(l){var c=r(l,s);return n.push(c),function(){n=n.filter(function(u){return u!==c})}},assignSyncMedium:function(l){for(s=!0;n.length;){var c=n;n=[],c.forEach(l)}n={push:function(u){return l(u)},filter:function(){return n}}},assignMedium:function(l){s=!0;var c=[];if(n.length){var u=n;n=[],u.forEach(l),c=n}var d=function(){var x=c;c=[],x.forEach(l)},h=function(){return Promise.resolve().then(d)};h(),n={push:function(x){c.push(x),h()},filter:function(x){return c=c.filter(x),n}}}};return a}function cK(t){t===void 0&&(t={});var r=oK(null);return r.options=yi({async:!0,ssr:!1},t),r}var yD=function(t){var r=t.sideCar,n=gD(t,["sideCar"]);if(!r)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var s=r.read();if(!s)throw new Error("Sidecar medium not found");return f.createElement(s,yi({},n))};yD.isSideCarExport=!0;function dK(t,r){return t.useMedium(r),yD}var vD=cK(),gj=function(){},Hp=f.forwardRef(function(t,r){var n=f.useRef(null),s=f.useState({onScrollCapture:gj,onWheelCapture:gj,onTouchMoveCapture:gj}),a=s[0],l=s[1],c=t.forwardProps,u=t.children,d=t.className,h=t.removeScrollBar,x=t.enabled,p=t.shards,y=t.sideCar,v=t.noRelative,w=t.noIsolation,b=t.inert,N=t.allowPinchZoom,_=t.as,S=_===void 0?"div":_,k=t.gapMode,E=gD(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),A=y,O=iK([n,r]),z=yi(yi({},E),a);return f.createElement(f.Fragment,null,x&&f.createElement(A,{sideCar:vD,removeScrollBar:h,shards:p,noRelative:v,noIsolation:w,inert:b,setCallbacks:l,allowPinchZoom:!!N,lockRef:n,gapMode:k}),c?f.cloneElement(f.Children.only(u),yi(yi({},z),{ref:O})):f.createElement(S,yi({},z,{className:d,ref:O}),u))});Hp.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Hp.classNames={fullWidth:Ax,zeroRight:kx};var uK=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function mK(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var r=uK();return r&&t.setAttribute("nonce",r),t}function hK(t,r){t.styleSheet?t.styleSheet.cssText=r:t.appendChild(document.createTextNode(r))}function fK(t){var r=document.head||document.getElementsByTagName("head")[0];r.appendChild(t)}var xK=function(){var t=0,r=null;return{add:function(n){t==0&&(r=mK())&&(hK(r,n),fK(r)),t++},remove:function(){t--,!t&&r&&(r.parentNode&&r.parentNode.removeChild(r),r=null)}}},pK=function(){var t=xK();return function(r,n){f.useEffect(function(){return t.add(r),function(){t.remove()}},[r&&n])}},jD=function(){var t=pK(),r=function(n){var s=n.styles,a=n.dynamic;return t(s,a),null};return r},gK={left:0,top:0,right:0,gap:0},yj=function(t){return parseInt(t||"",10)||0},yK=function(t){var r=window.getComputedStyle(document.body),n=r[t==="padding"?"paddingLeft":"marginLeft"],s=r[t==="padding"?"paddingTop":"marginTop"],a=r[t==="padding"?"paddingRight":"marginRight"];return[yj(n),yj(s),yj(a)]},vK=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return gK;var r=yK(t),n=document.documentElement.clientWidth,s=window.innerWidth;return{left:r[0],top:r[1],right:r[2],gap:Math.max(0,s-n+r[2]-r[0])}},jK=jD(),kd="data-scroll-locked",bK=function(t,r,n,s){var a=t.left,l=t.top,c=t.right,u=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(rK,` {
   overflow: hidden `).concat(s,`;
   padding-right: `).concat(u,"px ").concat(s,`;
  }
  body[`).concat(kd,`] {
    overflow: hidden `).concat(s,`;
    overscroll-behavior: contain;
    `).concat([r&&"position: relative ".concat(s,";"),n==="margin"&&`
    padding-left: `.concat(a,`px;
    padding-top: `).concat(l,`px;
    padding-right: `).concat(c,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(u,"px ").concat(s,`;
    `),n==="padding"&&"padding-right: ".concat(u,"px ").concat(s,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(kx,` {
    right: `).concat(u,"px ").concat(s,`;
  }
  
  .`).concat(Ax,` {
    margin-right: `).concat(u,"px ").concat(s,`;
  }
  
  .`).concat(kx," .").concat(kx,` {
    right: 0 `).concat(s,`;
  }
  
  .`).concat(Ax," .").concat(Ax,` {
    margin-right: 0 `).concat(s,`;
  }
  
  body[`).concat(kd,`] {
    `).concat(nK,": ").concat(u,`px;
  }
`)},qA=function(){var t=parseInt(document.body.getAttribute(kd)||"0",10);return isFinite(t)?t:0},wK=function(){f.useEffect(function(){return document.body.setAttribute(kd,(qA()+1).toString()),function(){var t=qA()-1;t<=0?document.body.removeAttribute(kd):document.body.setAttribute(kd,t.toString())}},[])},NK=function(t){var r=t.noRelative,n=t.noImportant,s=t.gapMode,a=s===void 0?"margin":s;wK();var l=f.useMemo(function(){return vK(a)},[a]);return f.createElement(jK,{styles:bK(l,!r,a,n?"":"!important")})},O0=!1;if(typeof window<"u")try{var Jf=Object.defineProperty({},"passive",{get:function(){return O0=!0,!0}});window.addEventListener("test",Jf,Jf),window.removeEventListener("test",Jf,Jf)}catch{O0=!1}var gd=O0?{passive:!1}:!1,_K=function(t){return t.tagName==="TEXTAREA"},bD=function(t,r){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[r]!=="hidden"&&!(n.overflowY===n.overflowX&&!_K(t)&&n[r]==="visible")},CK=function(t){return bD(t,"overflowY")},SK=function(t){return bD(t,"overflowX")},UA=function(t,r){var n=r.ownerDocument,s=r;do{typeof ShadowRoot<"u"&&s instanceof ShadowRoot&&(s=s.host);var a=wD(t,s);if(a){var l=ND(t,s),c=l[1],u=l[2];if(c>u)return!0}s=s.parentNode}while(s&&s!==n.body);return!1},kK=function(t){var r=t.scrollTop,n=t.scrollHeight,s=t.clientHeight;return[r,n,s]},AK=function(t){var r=t.scrollLeft,n=t.scrollWidth,s=t.clientWidth;return[r,n,s]},wD=function(t,r){return t==="v"?CK(r):SK(r)},ND=function(t,r){return t==="v"?kK(r):AK(r)},EK=function(t,r){return t==="h"&&r==="rtl"?-1:1},MK=function(t,r,n,s,a){var l=EK(t,window.getComputedStyle(r).direction),c=l*s,u=n.target,d=r.contains(u),h=!1,x=c>0,p=0,y=0;do{if(!u)break;var v=ND(t,u),w=v[0],b=v[1],N=v[2],_=b-N-l*w;(w||_)&&wD(t,u)&&(p+=_,y+=w);var S=u.parentNode;u=S&&S.nodeType===Node.DOCUMENT_FRAGMENT_NODE?S.host:S}while(!d&&u!==document.body||d&&(r.contains(u)||r===u));return(x&&Math.abs(p)<1||!x&&Math.abs(y)<1)&&(h=!0),h},ex=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},zA=function(t){return[t.deltaX,t.deltaY]},BA=function(t){return t&&"current"in t?t.current:t},TK=function(t,r){return t[0]===r[0]&&t[1]===r[1]},OK=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},PK=0,yd=[];function DK(t){var r=f.useRef([]),n=f.useRef([0,0]),s=f.useRef(),a=f.useState(PK++)[0],l=f.useState(jD)[0],c=f.useRef(t);f.useEffect(function(){c.current=t},[t]),f.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(a));var b=tK([t.lockRef.current],(t.shards||[]).map(BA),!0).filter(Boolean);return b.forEach(function(N){return N.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),b.forEach(function(N){return N.classList.remove("allow-interactivity-".concat(a))})}}},[t.inert,t.lockRef.current,t.shards]);var u=f.useCallback(function(b,N){if("touches"in b&&b.touches.length===2||b.type==="wheel"&&b.ctrlKey)return!c.current.allowPinchZoom;var _=ex(b),S=n.current,k="deltaX"in b?b.deltaX:S[0]-_[0],E="deltaY"in b?b.deltaY:S[1]-_[1],A,O=b.target,z=Math.abs(k)>Math.abs(E)?"h":"v";if("touches"in b&&z==="h"&&O.type==="range")return!1;var R=UA(z,O);if(!R)return!0;if(R?A=z:(A=z==="v"?"h":"v",R=UA(z,O)),!R)return!1;if(!s.current&&"changedTouches"in b&&(k||E)&&(s.current=A),!A)return!0;var G=s.current||A;return MK(G,N,b,G==="h"?k:E)},[]),d=f.useCallback(function(b){var N=b;if(!(!yd.length||yd[yd.length-1]!==l)){var _="deltaY"in N?zA(N):ex(N),S=r.current.filter(function(A){return A.name===N.type&&(A.target===N.target||N.target===A.shadowParent)&&TK(A.delta,_)})[0];if(S&&S.should){N.cancelable&&N.preventDefault();return}if(!S){var k=(c.current.shards||[]).map(BA).filter(Boolean).filter(function(A){return A.contains(N.target)}),E=k.length>0?u(N,k[0]):!c.current.noIsolation;E&&N.cancelable&&N.preventDefault()}}},[]),h=f.useCallback(function(b,N,_,S){var k={name:b,delta:N,target:_,should:S,shadowParent:RK(_)};r.current.push(k),setTimeout(function(){r.current=r.current.filter(function(E){return E!==k})},1)},[]),x=f.useCallback(function(b){n.current=ex(b),s.current=void 0},[]),p=f.useCallback(function(b){h(b.type,zA(b),b.target,u(b,t.lockRef.current))},[]),y=f.useCallback(function(b){h(b.type,ex(b),b.target,u(b,t.lockRef.current))},[]);f.useEffect(function(){return yd.push(l),t.setCallbacks({onScrollCapture:p,onWheelCapture:p,onTouchMoveCapture:y}),document.addEventListener("wheel",d,gd),document.addEventListener("touchmove",d,gd),document.addEventListener("touchstart",x,gd),function(){yd=yd.filter(function(b){return b!==l}),document.removeEventListener("wheel",d,gd),document.removeEventListener("touchmove",d,gd),document.removeEventListener("touchstart",x,gd)}},[]);var v=t.removeScrollBar,w=t.inert;return f.createElement(f.Fragment,null,w?f.createElement(l,{styles:OK(a)}):null,v?f.createElement(NK,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function RK(t){for(var r=null;t!==null;)t instanceof ShadowRoot&&(r=t.host,t=t.host),t=t.parentNode;return r}const LK=dK(vD,DK);var sh=f.forwardRef(function(t,r){return f.createElement(Hp,yi({},t,{ref:r,sideCar:LK}))});sh.classNames=Hp.classNames;var IK=[" ","Enter","ArrowUp","ArrowDown"],$K=[" ","Enter"],fc="Select",[Vp,Yp,FK]=fN(fc),[ru,Gpe]=Ks(fc,[FK,tu]),Kp=tu(),[qK,vo]=ru(fc),[UK,zK]=ru(fc),_D=t=>{const{__scopeSelect:r,children:n,open:s,defaultOpen:a,onOpenChange:l,value:c,defaultValue:u,onValueChange:d,dir:h,name:x,autoComplete:p,disabled:y,required:v,form:w}=t,b=Kp(r),[N,_]=f.useState(null),[S,k]=f.useState(null),[E,A]=f.useState(!1),O=Jm(h),[z,R]=hl({prop:s,defaultProp:a??!1,onChange:l,caller:fc}),[G,J]=hl({prop:c,defaultProp:u,onChange:d,caller:fc}),ie=f.useRef(null),V=N?w||!!N.closest("form"):!0,[xe,pe]=f.useState(new Set),re=Array.from(xe).map(M=>M.props.value).join(";");return e.jsx(NN,{...b,children:e.jsxs(qK,{required:v,scope:r,trigger:N,onTriggerChange:_,valueNode:S,onValueNodeChange:k,valueNodeHasChildren:E,onValueNodeHasChildrenChange:A,contentId:as(),value:G,onValueChange:J,open:z,onOpenChange:R,dir:O,triggerPointerDownPosRef:ie,disabled:y,children:[e.jsx(Vp.Provider,{scope:r,children:e.jsx(UK,{scope:t.__scopeSelect,onNativeOptionAdd:f.useCallback(M=>{pe(B=>new Set(B).add(M))},[]),onNativeOptionRemove:f.useCallback(M=>{pe(B=>{const L=new Set(B);return L.delete(M),L})},[]),children:n})}),V?e.jsxs(KD,{"aria-hidden":!0,required:v,tabIndex:-1,name:x,autoComplete:p,value:G,onChange:M=>J(M.target.value),disabled:y,form:w,children:[G===void 0?e.jsx("option",{value:""}):null,Array.from(xe)]},re):null]})})};_D.displayName=fc;var CD="SelectTrigger",SD=f.forwardRef((t,r)=>{const{__scopeSelect:n,disabled:s=!1,...a}=t,l=Kp(n),c=vo(CD,n),u=c.disabled||s,d=cr(r,c.onTriggerChange),h=Yp(n),x=f.useRef("touch"),[p,y,v]=QD(b=>{const N=h().filter(k=>!k.disabled),_=N.find(k=>k.value===c.value),S=XD(N,b,_);S!==void 0&&c.onValueChange(S.value)}),w=b=>{u||(c.onOpenChange(!0),v()),b&&(c.triggerPointerDownPosRef.current={x:Math.round(b.pageX),y:Math.round(b.pageY)})};return e.jsx(Bp,{asChild:!0,...l,children:e.jsx(Mt.button,{type:"button",role:"combobox","aria-controls":c.contentId,"aria-expanded":c.open,"aria-required":c.required,"aria-autocomplete":"none",dir:c.dir,"data-state":c.open?"open":"closed",disabled:u,"data-disabled":u?"":void 0,"data-placeholder":GD(c.value)?"":void 0,...a,ref:d,onClick:bt(a.onClick,b=>{b.currentTarget.focus(),x.current!=="mouse"&&w(b)}),onPointerDown:bt(a.onPointerDown,b=>{x.current=b.pointerType;const N=b.target;N.hasPointerCapture(b.pointerId)&&N.releasePointerCapture(b.pointerId),b.button===0&&b.ctrlKey===!1&&b.pointerType==="mouse"&&(w(b),b.preventDefault())}),onKeyDown:bt(a.onKeyDown,b=>{const N=p.current!=="";!(b.ctrlKey||b.altKey||b.metaKey)&&b.key.length===1&&y(b.key),!(N&&b.key===" ")&&IK.includes(b.key)&&(w(),b.preventDefault())})})})});SD.displayName=CD;var kD="SelectValue",AD=f.forwardRef((t,r)=>{const{__scopeSelect:n,className:s,style:a,children:l,placeholder:c="",...u}=t,d=vo(kD,n),{onValueNodeHasChildrenChange:h}=d,x=l!==void 0,p=cr(r,d.onValueNodeChange);return Sn(()=>{h(x)},[h,x]),e.jsx(Mt.span,{...u,ref:p,style:{pointerEvents:"none"},children:GD(d.value)?e.jsx(e.Fragment,{children:c}):l})});AD.displayName=kD;var BK="SelectIcon",ED=f.forwardRef((t,r)=>{const{__scopeSelect:n,children:s,...a}=t;return e.jsx(Mt.span,{"aria-hidden":!0,...a,ref:r,children:s||"▼"})});ED.displayName=BK;var WK="SelectPortal",MD=t=>e.jsx(nh,{asChild:!0,...t});MD.displayName=WK;var xc="SelectContent",TD=f.forwardRef((t,r)=>{const n=vo(xc,t.__scopeSelect),[s,a]=f.useState();if(Sn(()=>{a(new DocumentFragment)},[]),!n.open){const l=s;return l?Nc.createPortal(e.jsx(OD,{scope:t.__scopeSelect,children:e.jsx(Vp.Slot,{scope:t.__scopeSelect,children:e.jsx("div",{children:t.children})})}),l):null}return e.jsx(PD,{...t,ref:r})});TD.displayName=xc;var Ka=10,[OD,jo]=ru(xc),HK="SelectContentImpl",VK=ho("SelectContent.RemoveScroll"),PD=f.forwardRef((t,r)=>{const{__scopeSelect:n,position:s="item-aligned",onCloseAutoFocus:a,onEscapeKeyDown:l,onPointerDownOutside:c,side:u,sideOffset:d,align:h,alignOffset:x,arrowPadding:p,collisionBoundary:y,collisionPadding:v,sticky:w,hideWhenDetached:b,avoidCollisions:N,..._}=t,S=vo(xc,n),[k,E]=f.useState(null),[A,O]=f.useState(null),z=cr(r,te=>E(te)),[R,G]=f.useState(null),[J,ie]=f.useState(null),V=Yp(n),[xe,pe]=f.useState(!1),re=f.useRef(!1);f.useEffect(()=>{if(k)return Wp(k)},[k]),$p();const M=f.useCallback(te=>{const[De,...ne]=V().map(we=>we.ref.current),[$e]=ne.slice(-1),ge=document.activeElement;for(const we of te)if(we===ge||(we?.scrollIntoView({block:"nearest"}),we===De&&A&&(A.scrollTop=0),we===$e&&A&&(A.scrollTop=A.scrollHeight),we?.focus(),document.activeElement!==ge))return},[V,A]),B=f.useCallback(()=>M([R,k]),[M,R,k]);f.useEffect(()=>{xe&&B()},[xe,B]);const{onOpenChange:L,triggerPointerDownPosRef:T}=S;f.useEffect(()=>{if(k){let te={x:0,y:0};const De=$e=>{te={x:Math.abs(Math.round($e.pageX)-(T.current?.x??0)),y:Math.abs(Math.round($e.pageY)-(T.current?.y??0))}},ne=$e=>{te.x<=10&&te.y<=10?$e.preventDefault():k.contains($e.target)||L(!1),document.removeEventListener("pointermove",De),T.current=null};return T.current!==null&&(document.addEventListener("pointermove",De),document.addEventListener("pointerup",ne,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",De),document.removeEventListener("pointerup",ne,{capture:!0})}}},[k,L,T]),f.useEffect(()=>{const te=()=>L(!1);return window.addEventListener("blur",te),window.addEventListener("resize",te),()=>{window.removeEventListener("blur",te),window.removeEventListener("resize",te)}},[L]);const[F,I]=QD(te=>{const De=V().filter(ge=>!ge.disabled),ne=De.find(ge=>ge.ref.current===document.activeElement),$e=XD(De,te,ne);$e&&setTimeout(()=>$e.ref.current.focus())}),Q=f.useCallback((te,De,ne)=>{const $e=!re.current&&!ne;(S.value!==void 0&&S.value===De||$e)&&(G(te),$e&&(re.current=!0))},[S.value]),W=f.useCallback(()=>k?.focus(),[k]),ee=f.useCallback((te,De,ne)=>{const $e=!re.current&&!ne;(S.value!==void 0&&S.value===De||$e)&&ie(te)},[S.value]),ye=s==="popper"?P0:DD,he=ye===P0?{side:u,sideOffset:d,align:h,alignOffset:x,arrowPadding:p,collisionBoundary:y,collisionPadding:v,sticky:w,hideWhenDetached:b,avoidCollisions:N}:{};return e.jsx(OD,{scope:n,content:k,viewport:A,onViewportChange:O,itemRefCallback:Q,selectedItem:R,onItemLeave:W,itemTextRefCallback:ee,focusSelectedItem:B,selectedItemText:J,position:s,isPositioned:xe,searchRef:F,children:e.jsx(sh,{as:VK,allowPinchZoom:!0,children:e.jsx(th,{asChild:!0,trapped:S.open,onMountAutoFocus:te=>{te.preventDefault()},onUnmountAutoFocus:bt(a,te=>{S.trigger?.focus({preventScroll:!0}),te.preventDefault()}),children:e.jsx(eh,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:te=>te.preventDefault(),onDismiss:()=>S.onOpenChange(!1),children:e.jsx(ye,{role:"listbox",id:S.contentId,"data-state":S.open?"open":"closed",dir:S.dir,onContextMenu:te=>te.preventDefault(),..._,...he,onPlaced:()=>pe(!0),ref:z,style:{display:"flex",flexDirection:"column",outline:"none",..._.style},onKeyDown:bt(_.onKeyDown,te=>{const De=te.ctrlKey||te.altKey||te.metaKey;if(te.key==="Tab"&&te.preventDefault(),!De&&te.key.length===1&&I(te.key),["ArrowUp","ArrowDown","Home","End"].includes(te.key)){let $e=V().filter(ge=>!ge.disabled).map(ge=>ge.ref.current);if(["ArrowUp","End"].includes(te.key)&&($e=$e.slice().reverse()),["ArrowUp","ArrowDown"].includes(te.key)){const ge=te.target,we=$e.indexOf(ge);$e=$e.slice(we+1)}setTimeout(()=>M($e)),te.preventDefault()}})})})})})})});PD.displayName=HK;var YK="SelectItemAlignedPosition",DD=f.forwardRef((t,r)=>{const{__scopeSelect:n,onPlaced:s,...a}=t,l=vo(xc,n),c=jo(xc,n),[u,d]=f.useState(null),[h,x]=f.useState(null),p=cr(r,z=>x(z)),y=Yp(n),v=f.useRef(!1),w=f.useRef(!0),{viewport:b,selectedItem:N,selectedItemText:_,focusSelectedItem:S}=c,k=f.useCallback(()=>{if(l.trigger&&l.valueNode&&u&&h&&b&&N&&_){const z=l.trigger.getBoundingClientRect(),R=h.getBoundingClientRect(),G=l.valueNode.getBoundingClientRect(),J=_.getBoundingClientRect();if(l.dir!=="rtl"){const ge=J.left-R.left,we=G.left-ge,_e=z.left-we,Ye=z.width+_e,ht=Math.max(Ye,R.width),Ve=window.innerWidth-Ka,lt=k0(we,[Ka,Math.max(Ka,Ve-ht)]);u.style.minWidth=Ye+"px",u.style.left=lt+"px"}else{const ge=R.right-J.right,we=window.innerWidth-G.right-ge,_e=window.innerWidth-z.right-we,Ye=z.width+_e,ht=Math.max(Ye,R.width),Ve=window.innerWidth-Ka,lt=k0(we,[Ka,Math.max(Ka,Ve-ht)]);u.style.minWidth=Ye+"px",u.style.right=lt+"px"}const ie=y(),V=window.innerHeight-Ka*2,xe=b.scrollHeight,pe=window.getComputedStyle(h),re=parseInt(pe.borderTopWidth,10),M=parseInt(pe.paddingTop,10),B=parseInt(pe.borderBottomWidth,10),L=parseInt(pe.paddingBottom,10),T=re+M+xe+L+B,F=Math.min(N.offsetHeight*5,T),I=window.getComputedStyle(b),Q=parseInt(I.paddingTop,10),W=parseInt(I.paddingBottom,10),ee=z.top+z.height/2-Ka,ye=V-ee,he=N.offsetHeight/2,te=N.offsetTop+he,De=re+M+te,ne=T-De;if(De<=ee){const ge=ie.length>0&&N===ie[ie.length-1].ref.current;u.style.bottom="0px";const we=h.clientHeight-b.offsetTop-b.offsetHeight,_e=Math.max(ye,he+(ge?W:0)+we+B),Ye=De+_e;u.style.height=Ye+"px"}else{const ge=ie.length>0&&N===ie[0].ref.current;u.style.top="0px";const _e=Math.max(ee,re+b.offsetTop+(ge?Q:0)+he)+ne;u.style.height=_e+"px",b.scrollTop=De-ee+b.offsetTop}u.style.margin=`${Ka}px 0`,u.style.minHeight=F+"px",u.style.maxHeight=V+"px",s?.(),requestAnimationFrame(()=>v.current=!0)}},[y,l.trigger,l.valueNode,u,h,b,N,_,l.dir,s]);Sn(()=>k(),[k]);const[E,A]=f.useState();Sn(()=>{h&&A(window.getComputedStyle(h).zIndex)},[h]);const O=f.useCallback(z=>{z&&w.current===!0&&(k(),S?.(),w.current=!1)},[k,S]);return e.jsx(GK,{scope:n,contentWrapper:u,shouldExpandOnScrollRef:v,onScrollButtonChange:O,children:e.jsx("div",{ref:d,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:E},children:e.jsx(Mt.div,{...a,ref:p,style:{boxSizing:"border-box",maxHeight:"100%",...a.style}})})})});DD.displayName=YK;var KK="SelectPopperPosition",P0=f.forwardRef((t,r)=>{const{__scopeSelect:n,align:s="start",collisionPadding:a=Ka,...l}=t,c=Kp(n);return e.jsx(_N,{...c,...l,ref:r,align:s,collisionPadding:a,style:{boxSizing:"border-box",...l.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});P0.displayName=KK;var[GK,SN]=ru(xc,{}),D0="SelectViewport",RD=f.forwardRef((t,r)=>{const{__scopeSelect:n,nonce:s,...a}=t,l=jo(D0,n),c=SN(D0,n),u=cr(r,l.onViewportChange),d=f.useRef(0);return e.jsxs(e.Fragment,{children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),e.jsx(Vp.Slot,{scope:n,children:e.jsx(Mt.div,{"data-radix-select-viewport":"",role:"presentation",...a,ref:u,style:{position:"relative",flex:1,overflow:"hidden auto",...a.style},onScroll:bt(a.onScroll,h=>{const x=h.currentTarget,{contentWrapper:p,shouldExpandOnScrollRef:y}=c;if(y?.current&&p){const v=Math.abs(d.current-x.scrollTop);if(v>0){const w=window.innerHeight-Ka*2,b=parseFloat(p.style.minHeight),N=parseFloat(p.style.height),_=Math.max(b,N);if(_<w){const S=_+v,k=Math.min(w,S),E=S-k;p.style.height=k+"px",p.style.bottom==="0px"&&(x.scrollTop=E>0?E:0,p.style.justifyContent="flex-end")}}}d.current=x.scrollTop})})})]})});RD.displayName=D0;var LD="SelectGroup",[QK,XK]=ru(LD),ZK=f.forwardRef((t,r)=>{const{__scopeSelect:n,...s}=t,a=as();return e.jsx(QK,{scope:n,id:a,children:e.jsx(Mt.div,{role:"group","aria-labelledby":a,...s,ref:r})})});ZK.displayName=LD;var ID="SelectLabel",$D=f.forwardRef((t,r)=>{const{__scopeSelect:n,...s}=t,a=XK(ID,n);return e.jsx(Mt.div,{id:a.id,...s,ref:r})});$D.displayName=ID;var Ux="SelectItem",[JK,FD]=ru(Ux),qD=f.forwardRef((t,r)=>{const{__scopeSelect:n,value:s,disabled:a=!1,textValue:l,...c}=t,u=vo(Ux,n),d=jo(Ux,n),h=u.value===s,[x,p]=f.useState(l??""),[y,v]=f.useState(!1),w=cr(r,S=>d.itemRefCallback?.(S,s,a)),b=as(),N=f.useRef("touch"),_=()=>{a||(u.onValueChange(s),u.onOpenChange(!1))};if(s==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return e.jsx(JK,{scope:n,value:s,disabled:a,textId:b,isSelected:h,onItemTextChange:f.useCallback(S=>{p(k=>k||(S?.textContent??"").trim())},[]),children:e.jsx(Vp.ItemSlot,{scope:n,value:s,disabled:a,textValue:x,children:e.jsx(Mt.div,{role:"option","aria-labelledby":b,"data-highlighted":y?"":void 0,"aria-selected":h&&y,"data-state":h?"checked":"unchecked","aria-disabled":a||void 0,"data-disabled":a?"":void 0,tabIndex:a?void 0:-1,...c,ref:w,onFocus:bt(c.onFocus,()=>v(!0)),onBlur:bt(c.onBlur,()=>v(!1)),onClick:bt(c.onClick,()=>{N.current!=="mouse"&&_()}),onPointerUp:bt(c.onPointerUp,()=>{N.current==="mouse"&&_()}),onPointerDown:bt(c.onPointerDown,S=>{N.current=S.pointerType}),onPointerMove:bt(c.onPointerMove,S=>{N.current=S.pointerType,a?d.onItemLeave?.():N.current==="mouse"&&S.currentTarget.focus({preventScroll:!0})}),onPointerLeave:bt(c.onPointerLeave,S=>{S.currentTarget===document.activeElement&&d.onItemLeave?.()}),onKeyDown:bt(c.onKeyDown,S=>{d.searchRef?.current!==""&&S.key===" "||($K.includes(S.key)&&_(),S.key===" "&&S.preventDefault())})})})})});qD.displayName=Ux;var wm="SelectItemText",UD=f.forwardRef((t,r)=>{const{__scopeSelect:n,className:s,style:a,...l}=t,c=vo(wm,n),u=jo(wm,n),d=FD(wm,n),h=zK(wm,n),[x,p]=f.useState(null),y=cr(r,_=>p(_),d.onItemTextChange,_=>u.itemTextRefCallback?.(_,d.value,d.disabled)),v=x?.textContent,w=f.useMemo(()=>e.jsx("option",{value:d.value,disabled:d.disabled,children:v},d.value),[d.disabled,d.value,v]),{onNativeOptionAdd:b,onNativeOptionRemove:N}=h;return Sn(()=>(b(w),()=>N(w)),[b,N,w]),e.jsxs(e.Fragment,{children:[e.jsx(Mt.span,{id:d.textId,...l,ref:y}),d.isSelected&&c.valueNode&&!c.valueNodeHasChildren?Nc.createPortal(l.children,c.valueNode):null]})});UD.displayName=wm;var zD="SelectItemIndicator",BD=f.forwardRef((t,r)=>{const{__scopeSelect:n,...s}=t;return FD(zD,n).isSelected?e.jsx(Mt.span,{"aria-hidden":!0,...s,ref:r}):null});BD.displayName=zD;var R0="SelectScrollUpButton",WD=f.forwardRef((t,r)=>{const n=jo(R0,t.__scopeSelect),s=SN(R0,t.__scopeSelect),[a,l]=f.useState(!1),c=cr(r,s.onScrollButtonChange);return Sn(()=>{if(n.viewport&&n.isPositioned){let u=function(){const h=d.scrollTop>0;l(h)};const d=n.viewport;return u(),d.addEventListener("scroll",u),()=>d.removeEventListener("scroll",u)}},[n.viewport,n.isPositioned]),a?e.jsx(VD,{...t,ref:c,onAutoScroll:()=>{const{viewport:u,selectedItem:d}=n;u&&d&&(u.scrollTop=u.scrollTop-d.offsetHeight)}}):null});WD.displayName=R0;var L0="SelectScrollDownButton",HD=f.forwardRef((t,r)=>{const n=jo(L0,t.__scopeSelect),s=SN(L0,t.__scopeSelect),[a,l]=f.useState(!1),c=cr(r,s.onScrollButtonChange);return Sn(()=>{if(n.viewport&&n.isPositioned){let u=function(){const h=d.scrollHeight-d.clientHeight,x=Math.ceil(d.scrollTop)<h;l(x)};const d=n.viewport;return u(),d.addEventListener("scroll",u),()=>d.removeEventListener("scroll",u)}},[n.viewport,n.isPositioned]),a?e.jsx(VD,{...t,ref:c,onAutoScroll:()=>{const{viewport:u,selectedItem:d}=n;u&&d&&(u.scrollTop=u.scrollTop+d.offsetHeight)}}):null});HD.displayName=L0;var VD=f.forwardRef((t,r)=>{const{__scopeSelect:n,onAutoScroll:s,...a}=t,l=jo("SelectScrollButton",n),c=f.useRef(null),u=Yp(n),d=f.useCallback(()=>{c.current!==null&&(window.clearInterval(c.current),c.current=null)},[]);return f.useEffect(()=>()=>d(),[d]),Sn(()=>{u().find(x=>x.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[u]),e.jsx(Mt.div,{"aria-hidden":!0,...a,ref:r,style:{flexShrink:0,...a.style},onPointerDown:bt(a.onPointerDown,()=>{c.current===null&&(c.current=window.setInterval(s,50))}),onPointerMove:bt(a.onPointerMove,()=>{l.onItemLeave?.(),c.current===null&&(c.current=window.setInterval(s,50))}),onPointerLeave:bt(a.onPointerLeave,()=>{d()})})}),eG="SelectSeparator",YD=f.forwardRef((t,r)=>{const{__scopeSelect:n,...s}=t;return e.jsx(Mt.div,{"aria-hidden":!0,...s,ref:r})});YD.displayName=eG;var I0="SelectArrow",tG=f.forwardRef((t,r)=>{const{__scopeSelect:n,...s}=t,a=Kp(n),l=vo(I0,n),c=jo(I0,n);return l.open&&c.position==="popper"?e.jsx(CN,{...a,...s,ref:r}):null});tG.displayName=I0;var rG="SelectBubbleInput",KD=f.forwardRef(({__scopeSelect:t,value:r,...n},s)=>{const a=f.useRef(null),l=cr(s,a),c=fD(r);return f.useEffect(()=>{const u=a.current;if(!u)return;const d=window.HTMLSelectElement.prototype,x=Object.getOwnPropertyDescriptor(d,"value").set;if(c!==r&&x){const p=new Event("change",{bubbles:!0});x.call(u,r),u.dispatchEvent(p)}},[c,r]),e.jsx(Mt.select,{...n,style:{...xD,...n.style},ref:l,defaultValue:r})});KD.displayName=rG;function GD(t){return t===""||t===void 0}function QD(t){const r=rs(t),n=f.useRef(""),s=f.useRef(0),a=f.useCallback(c=>{const u=n.current+c;r(u),(function d(h){n.current=h,window.clearTimeout(s.current),h!==""&&(s.current=window.setTimeout(()=>d(""),1e3))})(u)},[r]),l=f.useCallback(()=>{n.current="",window.clearTimeout(s.current)},[]);return f.useEffect(()=>()=>window.clearTimeout(s.current),[]),[n,a,l]}function XD(t,r,n){const a=r.length>1&&Array.from(r).every(h=>h===r[0])?r[0]:r,l=n?t.indexOf(n):-1;let c=nG(t,Math.max(l,0));a.length===1&&(c=c.filter(h=>h!==n));const d=c.find(h=>h.textValue.toLowerCase().startsWith(a.toLowerCase()));return d!==n?d:void 0}function nG(t,r){return t.map((n,s)=>t[(r+s)%t.length])}var sG=_D,ZD=SD,aG=AD,iG=ED,lG=MD,JD=TD,oG=RD,eR=$D,tR=qD,cG=UD,dG=BD,rR=WD,nR=HD,sR=YD;const tt=sG,rt=aG,Je=f.forwardRef(({className:t,children:r,...n},s)=>e.jsxs(ZD,{ref:s,className:ze("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...n,children:[r,e.jsx(iG,{asChild:!0,children:e.jsx(cn,{className:"h-4 w-4 opacity-50"})})]}));Je.displayName=ZD.displayName;const aR=f.forwardRef(({className:t,...r},n)=>e.jsx(rR,{ref:n,className:ze("flex cursor-default items-center justify-center py-1",t),...r,children:e.jsx(x7,{className:"h-4 w-4"})}));aR.displayName=rR.displayName;const iR=f.forwardRef(({className:t,...r},n)=>e.jsx(nR,{ref:n,className:ze("flex cursor-default items-center justify-center py-1",t),...r,children:e.jsx(cn,{className:"h-4 w-4"})}));iR.displayName=nR.displayName;const et=f.forwardRef(({className:t,children:r,position:n="popper",...s},a)=>e.jsx(lG,{children:e.jsxs(JD,{ref:a,className:ze("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...s,children:[e.jsx(aR,{}),e.jsx(oG,{className:ze("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),e.jsx(iR,{})]})}));et.displayName=JD.displayName;const uG=f.forwardRef(({className:t,...r},n)=>e.jsx(eR,{ref:n,className:ze("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...r}));uG.displayName=eR.displayName;const Y=f.forwardRef(({className:t,children:r,...n},s)=>e.jsxs(tR,{ref:s,className:ze("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(dG,{children:e.jsx(Gr,{className:"h-4 w-4"})})}),e.jsx(cG,{children:r})]}));Y.displayName=tR.displayName;const mG=f.forwardRef(({className:t,...r},n)=>e.jsx(sR,{ref:n,className:ze("-mx-1 my-1 h-px bg-muted",t),...r}));mG.displayName=sR.displayName;const WA=[{value:"bug",label:"Bug Report",icon:b0,color:"bg-red-100 text-red-800"},{value:"feature",label:"Feature Request",icon:uP,color:"bg-blue-100 text-blue-800"},{value:"improvement",label:"Improvement",icon:fP,color:"bg-green-100 text-green-800"},{value:"complaint",label:"Complaint",icon:vr,color:"bg-yellow-100 text-yellow-800"},{value:"other",label:"Other",icon:Ja,color:"bg-gray-100 text-gray-800"}];function hG({onClose:t}){const{user:r}=hr(),{submitFeedback:n}=aN(),[s,a]=f.useState(!1),[l,c]=f.useState(!1),[u,d]=f.useState(""),[h,x]=f.useState("bug"),[p,y]=f.useState("medium"),[v,w]=f.useState(window.location.pathname);ut.useEffect(()=>{const _=()=>w(window.location.pathname);return _(),window.addEventListener("popstate",_),()=>window.removeEventListener("popstate",_)},[]);const b=async()=>{if(u.trim()){c(!0);try{await n({message:u.trim(),type:h,priority:p,page_url:window.location.pathname,user_agent:navigator.userAgent,timestamp:new Date().toISOString()}),d(""),x("bug"),y("medium"),alert("Feedback submitted successfully! Thank you for helping improve the app.")}catch(_){console.error("Error submitting feedback:",_),alert("Failed to submit feedback. Please try again.")}finally{c(!1)}}},N=WA.find(_=>_.value===h);return e.jsxs(e.Fragment,{children:[!s&&e.jsx("div",{className:"fixed bottom-6 right-6 z-50",children:e.jsx(q,{onClick:()=>a(!0),className:"h-14 w-14 rounded-full shadow-lg hover:shadow-xl transition-all duration-200 bg-blue-600 hover:bg-blue-700",size:"icon",children:e.jsx(Ja,{className:"h-6 w-6 text-white"})})}),s&&e.jsx("div",{className:"fixed bottom-6 right-6 z-50 w-96",children:e.jsxs(se,{className:"shadow-2xl border-2 border-blue-200",children:[e.jsxs(ue,{className:"pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(fe,{className:"text-lg flex items-center gap-2",children:[e.jsx(Ja,{className:"h-5 w-5 text-blue-600"}),"User Feedback",N&&e.jsx(Oe,{className:`${N.color} text-xs`,children:N.label})]}),e.jsx(q,{variant:"ghost",size:"icon",onClick:()=>{a(!1),t?.()},className:"h-8 w-8",children:e.jsx(hn,{className:"h-4 w-4"})})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Help us improve the app! Report bugs, suggest features, or share your thoughts."})]}),e.jsxs(ae,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Type of Feedback"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:WA.map(_=>{const S=_.icon;return e.jsxs(q,{variant:h===_.value?"default":"outline",size:"sm",onClick:()=>x(_.value),className:"justify-start gap-2 h-10",children:[e.jsx(S,{className:"h-4 w-4"}),_.label]},_.value)})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Priority"}),e.jsxs(tt,{value:p,onValueChange:_=>y(_),children:[e.jsx(Je,{children:e.jsx(rt,{})}),e.jsxs(et,{children:[e.jsx(Y,{value:"low",children:"Low - Minor issue"}),e.jsx(Y,{value:"medium",children:"Medium - Standard priority"}),e.jsx(Y,{value:"high",children:"High - Important issue"}),e.jsx(Y,{value:"urgent",children:"Urgent - Critical issue"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Your Message"}),e.jsx(ar,{placeholder:"Describe the issue, suggestion, or feedback...",value:u,onChange:_=>d(_.target.value),className:"min-h-[100px] resize-none",maxLength:1e3}),e.jsxs("div",{className:"text-xs text-muted-foreground text-right",children:[u.length,"/1000 characters"]})]}),e.jsxs(q,{onClick:b,disabled:!u.trim()||l,className:"w-full",children:[e.jsx(N9,{className:"h-4 w-4 mr-2"}),l?"Submitting...":"Submit Feedback"]}),e.jsxs("div",{className:"text-xs text-muted-foreground pt-2 border-t",children:[e.jsxs("p",{children:["From: ",r?.name||"Anonymous"]}),e.jsxs("p",{children:["Page: ",v]}),e.jsxs("p",{children:["Time: ",new Date().toLocaleString()]})]})]})]})})]})}function gt({children:t,className:r}){const[n,s]=ut.useState(!1);return e.jsxs("div",{className:"flex h-screen bg-background overflow-hidden",children:[e.jsx("div",{className:ze("hidden md:flex md:w-64 md:flex-col",n&&"flex w-64 flex-col"),children:e.jsx(gA,{})}),n&&e.jsx("div",{className:"fixed inset-0 z-40 bg-black bg-opacity-50 md:hidden",onClick:()=>s(!1)}),e.jsx("div",{className:ze("fixed inset-y-0 left-0 z-50 w-64 transform transition-transform duration-300 ease-in-out md:hidden",n?"translate-x-0":"-translate-x-full"),children:e.jsx(gA,{})}),e.jsxs("div",{className:"flex flex-1 flex-col min-h-0",children:[e.jsx(fV,{onMenuClick:()=>s(!n)}),e.jsx("main",{className:ze("flex-1 overflow-y-auto bg-muted/20 p-6",r),children:t})]}),e.jsx(hG,{})]})}function lR({title:t="Access Denied",message:r="You don't have permission to access this page.",showGoBack:n=!0}){const s=er(),a=()=>{window.history.back()},l=()=>{s("/")};return e.jsx(gt,{children:e.jsx("div",{className:"flex items-center justify-center min-h-full",children:e.jsxs(se,{className:"w-full max-w-lg",children:[e.jsxs(ue,{className:"text-center pb-6",children:[e.jsx("div",{className:"mx-auto mb-6 flex h-20 w-20 items-center justify-center rounded-full bg-destructive/10",children:e.jsx(Hs,{className:"h-10 w-10 text-destructive"})}),e.jsx(fe,{className:"text-3xl font-bold text-destructive",children:t})]}),e.jsxs(ae,{className:"text-center space-y-6",children:[e.jsx("p",{className:"text-muted-foreground text-lg leading-relaxed",children:r}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[n&&e.jsxs(q,{onClick:a,variant:"outline",className:"flex-1 sm:flex-none",children:[e.jsx(Cn,{className:"mr-2 h-4 w-4"}),"Go Back"]}),e.jsxs(q,{onClick:l,className:"flex-1 sm:flex-none",children:[e.jsx(iN,{className:"mr-2 h-4 w-4"}),"Go to Dashboard"]})]})]})]})})})}function bn({children:t,requiredPermissions:r,fallbackComponent:n}){const{user:s,isAuthenticated:a,isLoading:l,hasPermission:c}=hr();return l?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Nt,{className:"h-6 w-6 animate-spin"}),e.jsx("span",{children:"Loading..."})]})}):a?r.every(d=>c(d))?e.jsx(e.Fragment,{children:t}):n?e.jsx(n,{}):e.jsx(lR,{}):e.jsx(Gw,{to:"/login",replace:!0})}function om({children:t,allowedRoles:r,fallbackComponent:n}){const{user:s,isAuthenticated:a,isLoading:l}=hr();return l?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Nt,{className:"h-6 w-6 animate-spin"}),e.jsx("span",{children:"Loading..."})]})}):a?!s?.role||!r.includes(s.role)?n?e.jsx(n,{}):e.jsx(lR,{}):e.jsx(e.Fragment,{children:t}):e.jsx(Gw,{to:"/login",replace:!0})}var Gp="Dialog",[oR,cR]=Ks(Gp),[fG,ci]=oR(Gp),dR=t=>{const{__scopeDialog:r,children:n,open:s,defaultOpen:a,onOpenChange:l,modal:c=!0}=t,u=f.useRef(null),d=f.useRef(null),[h,x]=hl({prop:s,defaultProp:a??!1,onChange:l,caller:Gp});return e.jsx(fG,{scope:r,triggerRef:u,contentRef:d,contentId:as(),titleId:as(),descriptionId:as(),open:h,onOpenChange:x,onOpenToggle:f.useCallback(()=>x(p=>!p),[x]),modal:c,children:n})};dR.displayName=Gp;var uR="DialogTrigger",mR=f.forwardRef((t,r)=>{const{__scopeDialog:n,...s}=t,a=ci(uR,n),l=cr(r,a.triggerRef);return e.jsx(Mt.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":EN(a.open),...s,ref:l,onClick:bt(t.onClick,a.onOpenToggle)})});mR.displayName=uR;var kN="DialogPortal",[xG,hR]=oR(kN,{forceMount:void 0}),fR=t=>{const{__scopeDialog:r,forceMount:n,children:s,container:a}=t,l=ci(kN,r);return e.jsx(xG,{scope:r,forceMount:n,children:f.Children.map(s,c=>e.jsx(vs,{present:n||l.open,children:e.jsx(nh,{asChild:!0,container:a,children:c})}))})};fR.displayName=kN;var zx="DialogOverlay",xR=f.forwardRef((t,r)=>{const n=hR(zx,t.__scopeDialog),{forceMount:s=n.forceMount,...a}=t,l=ci(zx,t.__scopeDialog);return l.modal?e.jsx(vs,{present:s||l.open,children:e.jsx(gG,{...a,ref:r})}):null});xR.displayName=zx;var pG=ho("DialogOverlay.RemoveScroll"),gG=f.forwardRef((t,r)=>{const{__scopeDialog:n,...s}=t,a=ci(zx,n);return e.jsx(sh,{as:pG,allowPinchZoom:!0,shards:[a.contentRef],children:e.jsx(Mt.div,{"data-state":EN(a.open),...s,ref:r,style:{pointerEvents:"auto",...s.style}})})}),pc="DialogContent",pR=f.forwardRef((t,r)=>{const n=hR(pc,t.__scopeDialog),{forceMount:s=n.forceMount,...a}=t,l=ci(pc,t.__scopeDialog);return e.jsx(vs,{present:s||l.open,children:l.modal?e.jsx(yG,{...a,ref:r}):e.jsx(vG,{...a,ref:r})})});pR.displayName=pc;var yG=f.forwardRef((t,r)=>{const n=ci(pc,t.__scopeDialog),s=f.useRef(null),a=cr(r,n.contentRef,s);return f.useEffect(()=>{const l=s.current;if(l)return Wp(l)},[]),e.jsx(gR,{...t,ref:a,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:bt(t.onCloseAutoFocus,l=>{l.preventDefault(),n.triggerRef.current?.focus()}),onPointerDownOutside:bt(t.onPointerDownOutside,l=>{const c=l.detail.originalEvent,u=c.button===0&&c.ctrlKey===!0;(c.button===2||u)&&l.preventDefault()}),onFocusOutside:bt(t.onFocusOutside,l=>l.preventDefault())})}),vG=f.forwardRef((t,r)=>{const n=ci(pc,t.__scopeDialog),s=f.useRef(!1),a=f.useRef(!1);return e.jsx(gR,{...t,ref:r,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:l=>{t.onCloseAutoFocus?.(l),l.defaultPrevented||(s.current||n.triggerRef.current?.focus(),l.preventDefault()),s.current=!1,a.current=!1},onInteractOutside:l=>{t.onInteractOutside?.(l),l.defaultPrevented||(s.current=!0,l.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const c=l.target;n.triggerRef.current?.contains(c)&&l.preventDefault(),l.detail.originalEvent.type==="focusin"&&a.current&&l.preventDefault()}})}),gR=f.forwardRef((t,r)=>{const{__scopeDialog:n,trapFocus:s,onOpenAutoFocus:a,onCloseAutoFocus:l,...c}=t,u=ci(pc,n),d=f.useRef(null),h=cr(r,d);return $p(),e.jsxs(e.Fragment,{children:[e.jsx(th,{asChild:!0,loop:!0,trapped:s,onMountAutoFocus:a,onUnmountAutoFocus:l,children:e.jsx(eh,{role:"dialog",id:u.contentId,"aria-describedby":u.descriptionId,"aria-labelledby":u.titleId,"data-state":EN(u.open),...c,ref:h,onDismiss:()=>u.onOpenChange(!1)})}),e.jsxs(e.Fragment,{children:[e.jsx(bG,{titleId:u.titleId}),e.jsx(NG,{contentRef:d,descriptionId:u.descriptionId})]})]})}),AN="DialogTitle",yR=f.forwardRef((t,r)=>{const{__scopeDialog:n,...s}=t,a=ci(AN,n);return e.jsx(Mt.h2,{id:a.titleId,...s,ref:r})});yR.displayName=AN;var vR="DialogDescription",jR=f.forwardRef((t,r)=>{const{__scopeDialog:n,...s}=t,a=ci(vR,n);return e.jsx(Mt.p,{id:a.descriptionId,...s,ref:r})});jR.displayName=vR;var bR="DialogClose",wR=f.forwardRef((t,r)=>{const{__scopeDialog:n,...s}=t,a=ci(bR,n);return e.jsx(Mt.button,{type:"button",...s,ref:r,onClick:bt(t.onClick,()=>a.onOpenChange(!1))})});wR.displayName=bR;function EN(t){return t?"open":"closed"}var NR="DialogTitleWarning",[jG,_R]=FH(NR,{contentName:pc,titleName:AN,docsSlug:"dialog"}),bG=({titleId:t})=>{const r=_R(NR),n=`\`${r.contentName}\` requires a \`${r.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${r.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${r.docsSlug}`;return f.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},wG="DialogDescriptionWarning",NG=({contentRef:t,descriptionId:r})=>{const s=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${_R(wG).contentName}}.`;return f.useEffect(()=>{const a=t.current?.getAttribute("aria-describedby");r&&a&&(document.getElementById(r)||console.warn(s))},[s,t,r]),null},MN=dR,CR=mR,TN=fR,Qp=xR,Xp=pR,ON=yR,PN=jR,DN=wR,HA=1,_G=.9,CG=.8,SG=.17,vj=.1,jj=.999,kG=.9999,AG=.99,EG=/[\\\/_+.#"@\[\(\{&]/,MG=/[\\\/_+.#"@\[\(\{&]/g,TG=/[\s-]/,SR=/[\s-]/g;function $0(t,r,n,s,a,l,c){if(l===r.length)return a===t.length?HA:AG;var u=`${a},${l}`;if(c[u]!==void 0)return c[u];for(var d=s.charAt(l),h=n.indexOf(d,a),x=0,p,y,v,w;h>=0;)p=$0(t,r,n,s,h+1,l+1,c),p>x&&(h===a?p*=HA:EG.test(t.charAt(h-1))?(p*=CG,v=t.slice(a,h-1).match(MG),v&&a>0&&(p*=Math.pow(jj,v.length))):TG.test(t.charAt(h-1))?(p*=_G,w=t.slice(a,h-1).match(SR),w&&a>0&&(p*=Math.pow(jj,w.length))):(p*=SG,a>0&&(p*=Math.pow(jj,h-a))),t.charAt(h)!==r.charAt(l)&&(p*=kG)),(p<vj&&n.charAt(h-1)===s.charAt(l+1)||s.charAt(l+1)===s.charAt(l)&&n.charAt(h-1)!==s.charAt(l))&&(y=$0(t,r,n,s,h+1,l+2,c),y*vj>p&&(p=y*vj)),p>x&&(x=p),h=n.indexOf(d,h+1);return c[u]=x,x}function VA(t){return t.toLowerCase().replace(SR," ")}function OG(t,r,n){return t=n&&n.length>0?`${t+" "+n.join(" ")}`:t,$0(t,r,VA(t),VA(r),0,0,{})}var cm='[cmdk-group=""]',bj='[cmdk-group-items=""]',PG='[cmdk-group-heading=""]',kR='[cmdk-item=""]',YA=`${kR}:not([aria-disabled="true"])`,F0="cmdk-item-select",wd="data-value",DG=(t,r,n)=>OG(t,r,n),AR=f.createContext(void 0),ah=()=>f.useContext(AR),ER=f.createContext(void 0),RN=()=>f.useContext(ER),MR=f.createContext(void 0),TR=f.forwardRef((t,r)=>{let n=Nd(()=>{var Q,W;return{search:"",value:(W=(Q=t.value)!=null?Q:t.defaultValue)!=null?W:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),s=Nd(()=>new Set),a=Nd(()=>new Map),l=Nd(()=>new Map),c=Nd(()=>new Set),u=OR(t),{label:d,children:h,value:x,onValueChange:p,filter:y,shouldFilter:v,loop:w,disablePointerSelection:b=!1,vimBindings:N=!0,..._}=t,S=as(),k=as(),E=as(),A=f.useRef(null),O=HG();gc(()=>{if(x!==void 0){let Q=x.trim();n.current.value=Q,z.emit()}},[x]),gc(()=>{O(6,xe)},[]);let z=f.useMemo(()=>({subscribe:Q=>(c.current.add(Q),()=>c.current.delete(Q)),snapshot:()=>n.current,setState:(Q,W,ee)=>{var ye,he,te,De;if(!Object.is(n.current[Q],W)){if(n.current[Q]=W,Q==="search")V(),J(),O(1,ie);else if(Q==="value"){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let ne=document.getElementById(E);ne?ne.focus():(ye=document.getElementById(S))==null||ye.focus()}if(O(7,()=>{var ne;n.current.selectedItemId=(ne=pe())==null?void 0:ne.id,z.emit()}),ee||O(5,xe),((he=u.current)==null?void 0:he.value)!==void 0){let ne=W??"";(De=(te=u.current).onValueChange)==null||De.call(te,ne);return}}z.emit()}},emit:()=>{c.current.forEach(Q=>Q())}}),[]),R=f.useMemo(()=>({value:(Q,W,ee)=>{var ye;W!==((ye=l.current.get(Q))==null?void 0:ye.value)&&(l.current.set(Q,{value:W,keywords:ee}),n.current.filtered.items.set(Q,G(W,ee)),O(2,()=>{J(),z.emit()}))},item:(Q,W)=>(s.current.add(Q),W&&(a.current.has(W)?a.current.get(W).add(Q):a.current.set(W,new Set([Q]))),O(3,()=>{V(),J(),n.current.value||ie(),z.emit()}),()=>{l.current.delete(Q),s.current.delete(Q),n.current.filtered.items.delete(Q);let ee=pe();O(4,()=>{V(),ee?.getAttribute("id")===Q&&ie(),z.emit()})}),group:Q=>(a.current.has(Q)||a.current.set(Q,new Set),()=>{l.current.delete(Q),a.current.delete(Q)}),filter:()=>u.current.shouldFilter,label:d||t["aria-label"],getDisablePointerSelection:()=>u.current.disablePointerSelection,listId:S,inputId:E,labelId:k,listInnerRef:A}),[]);function G(Q,W){var ee,ye;let he=(ye=(ee=u.current)==null?void 0:ee.filter)!=null?ye:DG;return Q?he(Q,n.current.search,W):0}function J(){if(!n.current.search||u.current.shouldFilter===!1)return;let Q=n.current.filtered.items,W=[];n.current.filtered.groups.forEach(ye=>{let he=a.current.get(ye),te=0;he.forEach(De=>{let ne=Q.get(De);te=Math.max(ne,te)}),W.push([ye,te])});let ee=A.current;re().sort((ye,he)=>{var te,De;let ne=ye.getAttribute("id"),$e=he.getAttribute("id");return((te=Q.get($e))!=null?te:0)-((De=Q.get(ne))!=null?De:0)}).forEach(ye=>{let he=ye.closest(bj);he?he.appendChild(ye.parentElement===he?ye:ye.closest(`${bj} > *`)):ee.appendChild(ye.parentElement===ee?ye:ye.closest(`${bj} > *`))}),W.sort((ye,he)=>he[1]-ye[1]).forEach(ye=>{var he;let te=(he=A.current)==null?void 0:he.querySelector(`${cm}[${wd}="${encodeURIComponent(ye[0])}"]`);te?.parentElement.appendChild(te)})}function ie(){let Q=re().find(ee=>ee.getAttribute("aria-disabled")!=="true"),W=Q?.getAttribute(wd);z.setState("value",W||void 0)}function V(){var Q,W,ee,ye;if(!n.current.search||u.current.shouldFilter===!1){n.current.filtered.count=s.current.size;return}n.current.filtered.groups=new Set;let he=0;for(let te of s.current){let De=(W=(Q=l.current.get(te))==null?void 0:Q.value)!=null?W:"",ne=(ye=(ee=l.current.get(te))==null?void 0:ee.keywords)!=null?ye:[],$e=G(De,ne);n.current.filtered.items.set(te,$e),$e>0&&he++}for(let[te,De]of a.current)for(let ne of De)if(n.current.filtered.items.get(ne)>0){n.current.filtered.groups.add(te);break}n.current.filtered.count=he}function xe(){var Q,W,ee;let ye=pe();ye&&(((Q=ye.parentElement)==null?void 0:Q.firstChild)===ye&&((ee=(W=ye.closest(cm))==null?void 0:W.querySelector(PG))==null||ee.scrollIntoView({block:"nearest"})),ye.scrollIntoView({block:"nearest"}))}function pe(){var Q;return(Q=A.current)==null?void 0:Q.querySelector(`${kR}[aria-selected="true"]`)}function re(){var Q;return Array.from(((Q=A.current)==null?void 0:Q.querySelectorAll(YA))||[])}function M(Q){let W=re()[Q];W&&z.setState("value",W.getAttribute(wd))}function B(Q){var W;let ee=pe(),ye=re(),he=ye.findIndex(De=>De===ee),te=ye[he+Q];(W=u.current)!=null&&W.loop&&(te=he+Q<0?ye[ye.length-1]:he+Q===ye.length?ye[0]:ye[he+Q]),te&&z.setState("value",te.getAttribute(wd))}function L(Q){let W=pe(),ee=W?.closest(cm),ye;for(;ee&&!ye;)ee=Q>0?BG(ee,cm):WG(ee,cm),ye=ee?.querySelector(YA);ye?z.setState("value",ye.getAttribute(wd)):B(Q)}let T=()=>M(re().length-1),F=Q=>{Q.preventDefault(),Q.metaKey?T():Q.altKey?L(1):B(1)},I=Q=>{Q.preventDefault(),Q.metaKey?M(0):Q.altKey?L(-1):B(-1)};return f.createElement(Mt.div,{ref:r,tabIndex:-1,..._,"cmdk-root":"",onKeyDown:Q=>{var W;(W=_.onKeyDown)==null||W.call(_,Q);let ee=Q.nativeEvent.isComposing||Q.keyCode===229;if(!(Q.defaultPrevented||ee))switch(Q.key){case"n":case"j":{N&&Q.ctrlKey&&F(Q);break}case"ArrowDown":{F(Q);break}case"p":case"k":{N&&Q.ctrlKey&&I(Q);break}case"ArrowUp":{I(Q);break}case"Home":{Q.preventDefault(),M(0);break}case"End":{Q.preventDefault(),T();break}case"Enter":{Q.preventDefault();let ye=pe();if(ye){let he=new Event(F0);ye.dispatchEvent(he)}}}}},f.createElement("label",{"cmdk-label":"",htmlFor:R.inputId,id:R.labelId,style:YG},d),Zp(t,Q=>f.createElement(ER.Provider,{value:z},f.createElement(AR.Provider,{value:R},Q))))}),RG=f.forwardRef((t,r)=>{var n,s;let a=as(),l=f.useRef(null),c=f.useContext(MR),u=ah(),d=OR(t),h=(s=(n=d.current)==null?void 0:n.forceMount)!=null?s:c?.forceMount;gc(()=>{if(!h)return u.item(a,c?.id)},[h]);let x=PR(a,l,[t.value,t.children,l],t.keywords),p=RN(),y=po(O=>O.value&&O.value===x.current),v=po(O=>h||u.filter()===!1?!0:O.search?O.filtered.items.get(a)>0:!0);f.useEffect(()=>{let O=l.current;if(!(!O||t.disabled))return O.addEventListener(F0,w),()=>O.removeEventListener(F0,w)},[v,t.onSelect,t.disabled]);function w(){var O,z;b(),(z=(O=d.current).onSelect)==null||z.call(O,x.current)}function b(){p.setState("value",x.current,!0)}if(!v)return null;let{disabled:N,value:_,onSelect:S,forceMount:k,keywords:E,...A}=t;return f.createElement(Mt.div,{ref:ml(l,r),...A,id:a,"cmdk-item":"",role:"option","aria-disabled":!!N,"aria-selected":!!y,"data-disabled":!!N,"data-selected":!!y,onPointerMove:N||u.getDisablePointerSelection()?void 0:b,onClick:N?void 0:w},t.children)}),LG=f.forwardRef((t,r)=>{let{heading:n,children:s,forceMount:a,...l}=t,c=as(),u=f.useRef(null),d=f.useRef(null),h=as(),x=ah(),p=po(v=>a||x.filter()===!1?!0:v.search?v.filtered.groups.has(c):!0);gc(()=>x.group(c),[]),PR(c,u,[t.value,t.heading,d]);let y=f.useMemo(()=>({id:c,forceMount:a}),[a]);return f.createElement(Mt.div,{ref:ml(u,r),...l,"cmdk-group":"",role:"presentation",hidden:p?void 0:!0},n&&f.createElement("div",{ref:d,"cmdk-group-heading":"","aria-hidden":!0,id:h},n),Zp(t,v=>f.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":n?h:void 0},f.createElement(MR.Provider,{value:y},v))))}),IG=f.forwardRef((t,r)=>{let{alwaysRender:n,...s}=t,a=f.useRef(null),l=po(c=>!c.search);return!n&&!l?null:f.createElement(Mt.div,{ref:ml(a,r),...s,"cmdk-separator":"",role:"separator"})}),$G=f.forwardRef((t,r)=>{let{onValueChange:n,...s}=t,a=t.value!=null,l=RN(),c=po(h=>h.search),u=po(h=>h.selectedItemId),d=ah();return f.useEffect(()=>{t.value!=null&&l.setState("search",t.value)},[t.value]),f.createElement(Mt.input,{ref:r,...s,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":d.listId,"aria-labelledby":d.labelId,"aria-activedescendant":u,id:d.inputId,type:"text",value:a?t.value:c,onChange:h=>{a||l.setState("search",h.target.value),n?.(h.target.value)}})}),FG=f.forwardRef((t,r)=>{let{children:n,label:s="Suggestions",...a}=t,l=f.useRef(null),c=f.useRef(null),u=po(h=>h.selectedItemId),d=ah();return f.useEffect(()=>{if(c.current&&l.current){let h=c.current,x=l.current,p,y=new ResizeObserver(()=>{p=requestAnimationFrame(()=>{let v=h.offsetHeight;x.style.setProperty("--cmdk-list-height",v.toFixed(1)+"px")})});return y.observe(h),()=>{cancelAnimationFrame(p),y.unobserve(h)}}},[]),f.createElement(Mt.div,{ref:ml(l,r),...a,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":u,"aria-label":s,id:d.listId},Zp(t,h=>f.createElement("div",{ref:ml(c,d.listInnerRef),"cmdk-list-sizer":""},h)))}),qG=f.forwardRef((t,r)=>{let{open:n,onOpenChange:s,overlayClassName:a,contentClassName:l,container:c,...u}=t;return f.createElement(MN,{open:n,onOpenChange:s},f.createElement(TN,{container:c},f.createElement(Qp,{"cmdk-overlay":"",className:a}),f.createElement(Xp,{"aria-label":t.label,"cmdk-dialog":"",className:l},f.createElement(TR,{ref:r,...u}))))}),UG=f.forwardRef((t,r)=>po(n=>n.filtered.count===0)?f.createElement(Mt.div,{ref:r,...t,"cmdk-empty":"",role:"presentation"}):null),zG=f.forwardRef((t,r)=>{let{progress:n,children:s,label:a="Loading...",...l}=t;return f.createElement(Mt.div,{ref:r,...l,"cmdk-loading":"",role:"progressbar","aria-valuenow":n,"aria-valuemin":0,"aria-valuemax":100,"aria-label":a},Zp(t,c=>f.createElement("div",{"aria-hidden":!0},c)))}),Gs=Object.assign(TR,{List:FG,Item:RG,Input:$G,Group:LG,Separator:IG,Dialog:qG,Empty:UG,Loading:zG});function BG(t,r){let n=t.nextElementSibling;for(;n;){if(n.matches(r))return n;n=n.nextElementSibling}}function WG(t,r){let n=t.previousElementSibling;for(;n;){if(n.matches(r))return n;n=n.previousElementSibling}}function OR(t){let r=f.useRef(t);return gc(()=>{r.current=t}),r}var gc=typeof window>"u"?f.useEffect:f.useLayoutEffect;function Nd(t){let r=f.useRef();return r.current===void 0&&(r.current=t()),r}function po(t){let r=RN(),n=()=>t(r.snapshot());return f.useSyncExternalStore(r.subscribe,n,n)}function PR(t,r,n,s=[]){let a=f.useRef(),l=ah();return gc(()=>{var c;let u=(()=>{var h;for(let x of n){if(typeof x=="string")return x.trim();if(typeof x=="object"&&"current"in x)return x.current?(h=x.current.textContent)==null?void 0:h.trim():a.current}})(),d=s.map(h=>h.trim());l.value(t,u,d),(c=r.current)==null||c.setAttribute(wd,u),a.current=u}),a}var HG=()=>{let[t,r]=f.useState(),n=Nd(()=>new Map);return gc(()=>{n.current.forEach(s=>s()),n.current=new Map},[t]),(s,a)=>{n.current.set(s,a),r({})}};function VG(t){let r=t.type;return typeof r=="function"?r(t.props):"render"in r?r.render(t.props):t}function Zp({asChild:t,children:r},n){return t&&f.isValidElement(r)?f.cloneElement(VG(r),{ref:r.ref},n(r.props.children)):n(r)}var YG={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};const Ft=MN,yc=CR,KG=TN,DR=f.forwardRef(({className:t,...r},n)=>e.jsx(Qp,{ref:n,className:ze("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...r}));DR.displayName=Qp.displayName;const Rt=f.forwardRef(({className:t,children:r,...n},s)=>e.jsxs(KG,{children:[e.jsx(DR,{}),e.jsxs(Xp,{ref:s,className:ze("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...n,children:[r,e.jsxs(DN,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[e.jsx(hn,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Rt.displayName=Xp.displayName;const qt=({className:t,...r})=>e.jsx("div",{className:ze("flex flex-col space-y-1.5 text-center sm:text-left",t),...r});qt.displayName="DialogHeader";const Dr=({className:t,...r})=>e.jsx("div",{className:ze("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...r});Dr.displayName="DialogFooter";const Lt=f.forwardRef(({className:t,...r},n)=>e.jsx(ON,{ref:n,className:ze("text-lg font-semibold leading-none tracking-tight",t),...r}));Lt.displayName=ON.displayName;const Ut=f.forwardRef(({className:t,...r},n)=>e.jsx(PN,{ref:n,className:ze("text-sm text-muted-foreground",t),...r}));Ut.displayName=PN.displayName;const RR=f.forwardRef(({className:t,...r},n)=>e.jsx(Gs,{ref:n,className:ze("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",t),...r}));RR.displayName=Gs.displayName;const GG=({children:t,...r})=>e.jsx(Ft,{...r,children:e.jsx(Rt,{className:"overflow-hidden p-0 shadow-lg",children:e.jsx(RR,{className:"[&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground [&_[cmdk-group]:not([hidden])_~[cmdk-group]]:pt-0 [&_[cmdk-group]]:px-2 [&_[cmdk-input-wrapper]_svg]:h-5 [&_[cmdk-input-wrapper]_svg]:w-5 [&_[cmdk-input]]:h-12 [&_[cmdk-item]]:px-2 [&_[cmdk-item]]:py-3 [&_[cmdk-item]_svg]:h-5 [&_[cmdk-item]_svg]:w-5",children:t})})}),LR=f.forwardRef(({className:t,...r},n)=>e.jsxs("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[e.jsx(nr,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),e.jsx(Gs.Input,{ref:n,className:ze("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",t),...r})]}));LR.displayName=Gs.Input.displayName;const IR=f.forwardRef(({className:t,...r},n)=>e.jsx(Gs.List,{ref:n,className:ze("max-h-[300px] overflow-y-auto overflow-x-hidden",t),...r}));IR.displayName=Gs.List.displayName;const $R=f.forwardRef(({className:t,...r},n)=>e.jsx(Gs.Empty,{ref:n,className:ze("py-6 text-center text-sm",t),...r}));$R.displayName=Gs.Empty.displayName;const Nm=f.forwardRef(({className:t,...r},n)=>e.jsx(Gs.Group,{ref:n,className:ze("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",t),...r}));Nm.displayName=Gs.Group.displayName;const Ex=f.forwardRef(({className:t,...r},n)=>e.jsx(Gs.Separator,{ref:n,className:ze("-mx-1 h-px bg-border",t),...r}));Ex.displayName=Gs.Separator.displayName;const _m=f.forwardRef(({className:t,...r},n)=>e.jsx(Gs.Item,{ref:n,className:ze("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none aria-selected:bg-accent aria-selected:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...r}));_m.displayName=Gs.Item.displayName;function QG(){const[t,r]=f.useState(!1),[n,s]=f.useState(""),[a,l]=f.useState([]),[c,u]=f.useState(!1),d=er(),{user:h,logout:x}=hr();f.useEffect(()=>{const R=G=>{G.key==="k"&&(G.metaKey||G.ctrlKey)&&(G.preventDefault(),r(J=>!J))};return document.addEventListener("keydown",R),()=>document.removeEventListener("keydown",R)},[]),f.useEffect(()=>{t||(s(""),l([]))},[t]);const p=f.useCallback(async R=>{if(!R||R.length<2){l([]);return}u(!0);try{const G=R.toLowerCase().trim(),[J,ie,V,xe,pe,re,M]=await Promise.all([de.getCustomers({search:R,limit:10}).catch(()=>({data:[]})),de.getRepairTickets({search:R,limit:10}).catch(()=>({data:[]})),de.getWorkOrders({search:R,limit:10}).catch(()=>({data:[]})),de.getWarrantyRepairTickets({search:R,limit:10}).catch(()=>({data:[]})),de.getWarrantyWorkOrders({search:R,limit:10}).catch(()=>({data:[]})),de.getQuotes({search:R,limit:10}).catch(()=>({data:[]})),de.getMachines({search:R,limit:10}).catch(()=>({data:[]}))]);console.log("🔍 Search results for query:",R,{customers:J.data,tickets:ie.data,workOrders:V.data,warrantyTickets:xe.data,warrantyOrders:pe.data,quotes:re.data,machines:M.data});const B=[],L=(T,F)=>{if(!T||typeof T!="string")return!1;const I=T.toLowerCase().replace(/[^a-z0-9]/g,""),Q=F.toLowerCase().replace(/[^a-z0-9]/g,"");return[I,I.replace(/\d+\/\d+$/,""),I.replace(/[^0-9]/g,""),I.replace(/[^a-z]/g,"")].some(ee=>ee.includes(Q))};J.data&&Array.isArray(J.data)&&J.data.forEach(T=>{const F=T.name||T.company_name||`Customer #${T.id}`,I=T.email||T.phone||"";B.push({id:`customer-${T.id}`,type:"customer",name:F,subtitle:I,searchMatch:"customer"})}),ie.data&&Array.isArray(ie.data)&&ie.data.forEach(T=>{const F=T.ticket_number||`TK-${T.id}`,I=T.customer_name||T.customer_id||"Unknown Customer",Q=T.machine_name||T.machine_model||T.machine_id||"",W=T.description||"",ee=L(F,R);B.push({id:`ticket-${T.id}`,type:"ticket",name:`${F} - ${I}`,subtitle:Q||W.substring(0,50)||`Ticket #${T.id}`,searchMatch:ee?"number":"customer"})}),V.data&&Array.isArray(V.data)&&V.data.forEach(T=>{const F=T.order_number||T.ticket_number||`WO-${T.id}`,I=T.customer_name||T.customer_id||"Unknown Customer",Q=T.machine_name||T.machine_model||T.machine_id||"",W=T.description||"",ee=L(F,R);B.push({id:`workorder-${T.id}`,type:"workorder",name:`${F} - ${I}`,subtitle:Q||W.substring(0,50)||`Work Order #${T.id}`,searchMatch:ee?"number":"customer"})}),xe.data&&Array.isArray(xe.data)&&xe.data.forEach(T=>{const F=T.ticket_number||`WT-${T.id}`,I=T.customer_name||T.customer_id||"Unknown Customer",Q=T.machine_name||T.machine_model||T.machine_id||"",W=T.description||"",ee=L(F,R);B.push({id:`warrantyticket-${T.id}`,type:"warrantyticket",name:`${F} - ${I}`,subtitle:Q||W.substring(0,50)||`Warranty Ticket #${T.id}`,searchMatch:ee?"number":"customer"})}),pe.data&&Array.isArray(pe.data)&&pe.data.forEach(T=>{const F=T.order_number||T.ticket_number||`WW-${T.id}`,I=T.customer_name||T.customer_id||"Unknown Customer",Q=T.machine_name||T.machine_model||T.machine_id||"",W=T.description||"",ee=L(F,R);B.push({id:`warrantyorder-${T.id}`,type:"warrantyorder",name:`${F} - ${I}`,subtitle:Q||W.substring(0,50)||`Warranty Order #${T.id}`,searchMatch:ee?"number":"customer"})}),re.data&&Array.isArray(re.data)&&re.data.forEach(T=>{const F=T.quote_number||`QT-${T.id}`,I=T.customer_name||T.customer_id||"Unknown Customer",Q=T.title||T.description||"",W=L(F,R);B.push({id:`quote-${T.id}`,type:"quote",name:`${F} - ${I}`,subtitle:Q.substring(0,50)||`Quote #${T.id}`,searchMatch:W?"number":"customer"})}),M.data&&Array.isArray(M.data)&&M.data.forEach(T=>{const F=T.name||T.model_name||T.model||"Unknown Machine",I=T.manufacturer||"",Q=T.catalogue_number||T.catalogue||T.catalog_number||"",W=T.category||"";let ee="name",ye="";const he=[];I&&he.push(I),Q&&he.push(`Cat: ${Q}`),W&&he.push(W),ye=he.join(" • ");const te=R.toLowerCase();if(Q&&Q.toLowerCase().includes(te))ee="catalogue";else if(I&&I.toLowerCase().includes(te))ee="manufacturer";else if(W&&W.toLowerCase().includes(te))ee="category";else{const De=(F||"").toLowerCase().replace(/[^a-z0-9]/g,""),ne=te.replace(/[^a-z0-9]/g,"");De.includes(ne)&&(ee="model")}B.push({id:`machine-${T.id}`,type:"machine",name:F,subtitle:ye||`Machine #${T.id}`,searchMatch:ee})}),B.sort((T,F)=>T.searchMatch==="number"&&F.searchMatch!=="number"?-1:F.searchMatch==="number"&&T.searchMatch!=="number"?1:T.searchMatch==="catalogue"&&F.searchMatch!=="catalogue"?-1:F.searchMatch==="catalogue"&&T.searchMatch!=="catalogue"?1:T.name.localeCompare(F.name)),console.log("✅ Processed results:",B),l(B)}catch(G){console.error("❌ Search error:",G)}finally{u(!1)}},[]);f.useEffect(()=>{const R=setTimeout(()=>{p(n)},300);return()=>clearTimeout(R)},[n,p]);const y=R=>{d(R),r(!1)},v=R=>{const G=R.id.split("-")[1];switch(R.type){case"customer":d(`/customers/${G}`);break;case"ticket":d(`/repair-tickets/${G}`);break;case"workorder":d(`/work-orders/${G}`);break;case"warrantyticket":d(`/warranty-repair-tickets/${G}`);break;case"warrantyorder":d(`/warranty-work-orders/${G}`);break;case"quote":d("/quote-management");break;case"machine":d(`/machines/${G}`);break}r(!1)},w=()=>{x(),r(!1)},b=[{id:"dashboard",label:"Dashboard",icon:e.jsx(iN,{className:"h-4 w-4"}),action:()=>y("/"),keywords:["home","dashboard","overview"],category:"navigation"},{id:"my-work",label:"My Work",icon:e.jsx(oP,{className:"h-4 w-4"}),action:()=>y("/dashboard/my-work"),keywords:["my work","tasks","assignments"],category:"navigation"},{id:"customers",label:"Customers",icon:e.jsx(xs,{className:"h-4 w-4"}),action:()=>y("/customers"),keywords:["customers","clients","contacts"],category:"navigation"},{id:"machines",label:"Machines",icon:e.jsx(Ct,{className:"h-4 w-4"}),action:()=>y("/machines"),keywords:["machines","equipment","devices"],category:"navigation"},{id:"inventory",label:"Inventory",icon:e.jsx(Jt,{className:"h-4 w-4"}),action:()=>y("/inventory"),keywords:["inventory","parts","stock","supplies"],category:"navigation"},{id:"repair-tickets",label:"Repair Tickets",icon:e.jsx(Qt,{className:"h-4 w-4"}),action:()=>y("/repair-tickets"),keywords:["repair tickets","tickets","service requests"],category:"navigation"},{id:"work-orders",label:"Work Orders",icon:e.jsx(Pm,{className:"h-4 w-4"}),action:()=>y("/work-orders"),keywords:["work orders","jobs","repairs"],category:"navigation"},{id:"warranty-tickets",label:"Warranty Repair Tickets",icon:e.jsx(Vf,{className:"h-4 w-4"}),action:()=>y("/warranty-repair-tickets"),keywords:["warranty","warranty tickets","warranty repairs"],category:"navigation"},{id:"warranty-work-orders",label:"Warranty Work Orders",icon:e.jsx(Vf,{className:"h-4 w-4"}),action:()=>y("/warranty-work-orders"),keywords:["warranty orders","warranty work"],category:"navigation"},{id:"pipeline-leads",label:"Pipeline & Leads",icon:e.jsx(Os,{className:"h-4 w-4"}),action:()=>y("/pipeline-leads"),keywords:["pipeline","leads","prospects","sales"],category:"navigation"},{id:"quotes",label:"Quote Management",icon:e.jsx(Tn,{className:"h-4 w-4"}),action:()=>y("/quote-management"),keywords:["quotes","quotations","estimates","proposals"],category:"navigation"},{id:"sales-reports",label:"Sales Reports",icon:e.jsx(sl,{className:"h-4 w-4"}),action:()=>y("/sales-reports"),keywords:["sales reports","analytics","metrics","performance"],category:"navigation"},{id:"sales-targets",label:"Sales Targets",icon:e.jsx(ti,{className:"h-4 w-4"}),action:()=>y("/sales-targets"),keywords:["targets","goals","objectives","kpi"],category:"navigation"},{id:"rental-machines",label:"Rental Machines",icon:e.jsx(l9,{className:"h-4 w-4"}),action:()=>y("/rental-machines"),keywords:["rental machines","rental fleet","equipment rental"],category:"navigation"},{id:"machine-rentals",label:"Active Rentals",icon:e.jsx(is,{className:"h-4 w-4"}),action:()=>y("/machine-rentals"),keywords:["active rentals","rentals","rented"],category:"navigation"},{id:"rental-analytics",label:"Rental Analytics",icon:e.jsx(sl,{className:"h-4 w-4"}),action:()=>y("/rental-analytics"),keywords:["rental analytics","rental reports","rental metrics"],category:"navigation"},{id:"dynamic-pricing",label:"Dynamic Pricing",icon:e.jsx(Tn,{className:"h-4 w-4"}),action:()=>y("/dynamic-pricing"),keywords:["dynamic pricing","pricing","rates"],category:"navigation"},{id:"notifications",label:"Notifications",icon:e.jsx(_i,{className:"h-4 w-4"}),action:()=>y("/notifications"),keywords:["notifications","alerts","updates"],category:"navigation"}],N=[{id:"add-customer",label:"Add Customer",icon:e.jsx(Vt,{className:"h-4 w-4"}),action:()=>y("/add-customer"),keywords:["create customer","new customer","add customer"],category:"actions"},{id:"add-machine",label:"Add Machine Model",icon:e.jsx(Vt,{className:"h-4 w-4"}),action:()=>y("/add-machine-model"),keywords:["create machine","new machine","add machine"],category:"actions"},{id:"add-inventory",label:"Add Inventory Item",icon:e.jsx(Vt,{className:"h-4 w-4"}),action:()=>y("/add-inventory-item"),keywords:["create inventory","new inventory","add part"],category:"actions"},{id:"create-repair-ticket",label:"Create Repair Ticket",icon:e.jsx(Vt,{className:"h-4 w-4"}),action:()=>y("/create-repair-ticket"),keywords:["create ticket","new ticket","add ticket"],category:"actions"},{id:"create-warranty-ticket",label:"Create Warranty Ticket",icon:e.jsx(Vt,{className:"h-4 w-4"}),action:()=>y("/create-warranty-repair-ticket"),keywords:["create warranty","new warranty","warranty ticket"],category:"actions"}],_=[{id:"settings",label:"Settings",icon:e.jsx(bl,{className:"h-4 w-4"}),action:()=>y("/settings"),keywords:["settings","preferences","configuration"],category:"settings"},{id:"logout",label:"Logout",icon:e.jsx(mP,{className:"h-4 w-4"}),action:w,keywords:["logout","sign out","exit"],category:"settings"}],S=h?.role==="admin"?[{id:"dashboard-admin",label:"Admin Dashboard",icon:e.jsx(aj,{className:"h-4 w-4"}),action:()=>y("/dashboard/admin"),keywords:["admin","admin dashboard","administration"],category:"navigation"},{id:"admin-feedback",label:"Admin Feedback",icon:e.jsx(aj,{className:"h-4 w-4"}),action:()=>y("/admin-feedback"),keywords:["feedback","admin feedback","user feedback"],category:"navigation"}]:[],k=h?.role==="manager"||h?.role==="admin"?[{id:"dashboard-manager",label:"Manager Dashboard",icon:e.jsx(aj,{className:"h-4 w-4"}),action:()=>y("/dashboard/manager"),keywords:["manager","manager dashboard","management"],category:"navigation"}]:[],E=[...b,...S,...k,...N,..._],A=R=>{switch(R){case"customer":return e.jsx(xs,{className:"h-4 w-4"});case"ticket":return e.jsx(Qt,{className:"h-4 w-4"});case"workorder":return e.jsx(Pm,{className:"h-4 w-4"});case"warrantyticket":return e.jsx(Vf,{className:"h-4 w-4"});case"warrantyorder":return e.jsx(Vf,{className:"h-4 w-4"});case"quote":return e.jsx(x9,{className:"h-4 w-4"});case"machine":return e.jsx(Ct,{className:"h-4 w-4"});default:return e.jsx(nr,{className:"h-4 w-4"})}},O=R=>{switch(R){case"customer":return"Customer";case"ticket":return"Repair Ticket";case"workorder":return"Work Order";case"warrantyticket":return"Warranty Ticket";case"warrantyorder":return"Warranty Order";case"quote":return"Quote";case"machine":return"Machine";default:return"Item"}},z=n.length<2||a.length===0;return e.jsxs(GG,{open:t,onOpenChange:r,children:[e.jsx(Lt,{className:"sr-only",children:"Command Palette"}),e.jsx(LR,{placeholder:"Search tickets (TK-01/25), machines (HD5), customers, quotes...",value:n,onValueChange:s}),e.jsxs(IR,{children:[e.jsx($R,{children:c?e.jsxs("div",{className:"flex items-center justify-center gap-2 py-6",children:[e.jsx(Nt,{className:"h-4 w-4 animate-spin"}),e.jsx("span",{children:"Searching..."})]}):e.jsx("span",{children:"No results found."})}),a.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(Nm,{heading:"Search Results",children:a.map(R=>e.jsx(_m,{value:`__search__${R.id}`,onSelect:()=>v(R),keywords:[n],children:e.jsxs("div",{className:"flex items-center gap-2 w-full",children:[A(R.type),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium",children:R.name}),e.jsxs("div",{className:"text-xs text-muted-foreground truncate flex items-center gap-2",children:[e.jsx("span",{children:O(R.type)}),R.subtitle&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"•"}),e.jsx("span",{children:R.subtitle})]}),R.searchMatch&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"•"}),e.jsxs("span",{className:"text-blue-600",children:["Matched: ",R.searchMatch]})]})]})]})]})},R.id))}),e.jsx(Ex,{})]}),z&&e.jsxs(e.Fragment,{children:[e.jsx(Nm,{heading:"Navigation",children:E.filter(R=>R.category==="navigation").map(R=>e.jsx(_m,{value:`${R.label} ${R.keywords?.join(" ")}`,onSelect:R.action,children:e.jsxs("div",{className:"flex items-center gap-2",children:[R.icon,e.jsx("span",{children:R.label})]})},R.id))}),e.jsx(Ex,{}),e.jsx(Nm,{heading:"Quick Actions",children:E.filter(R=>R.category==="actions").map(R=>e.jsx(_m,{value:`${R.label} ${R.keywords?.join(" ")}`,onSelect:R.action,children:e.jsxs("div",{className:"flex items-center gap-2",children:[R.icon,e.jsx("span",{children:R.label})]})},R.id))}),e.jsx(Ex,{}),e.jsx(Nm,{heading:"Settings",children:E.filter(R=>R.category==="settings").map(R=>e.jsx(_m,{value:`${R.label} ${R.keywords?.join(" ")}`,onSelect:R.action,children:e.jsxs("div",{className:"flex items-center gap-2",children:[R.icon,e.jsx("span",{children:R.label})]})},R.id))})]})]})]})}const be=f.forwardRef(({className:t,type:r,...n},s)=>e.jsx("input",{type:r,className:ze("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:s,...n}));be.displayName="Input";var XG="Label",FR=f.forwardRef((t,r)=>e.jsx(Mt.label,{...t,ref:r,onMouseDown:n=>{n.target.closest("button, input, select, textarea")||(t.onMouseDown?.(n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));FR.displayName=XG;var qR=FR;const ZG=Lp("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),U=f.forwardRef(({className:t,...r},n)=>e.jsx(qR,{ref:n,className:ze(ZG(),t),...r}));U.displayName=qR.displayName;const JG=Lp("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),On=f.forwardRef(({className:t,variant:r,...n},s)=>e.jsx("div",{ref:s,role:"alert",className:ze(JG({variant:r}),t),...n}));On.displayName="Alert";const Bn=f.forwardRef(({className:t,...r},n)=>e.jsx("h5",{ref:n,className:ze("mb-1 font-medium leading-none tracking-tight",t),...r}));Bn.displayName="AlertTitle";const Pn=f.forwardRef(({className:t,...r},n)=>e.jsx("div",{ref:n,className:ze("text-sm [&_p]:leading-relaxed",t),...r}));Pn.displayName="AlertDescription";function eQ(){const[t,r]=f.useState(""),[n,s]=f.useState(""),[a,l]=f.useState(!1),[c,u]=f.useState(!1),[d,h]=f.useState(""),x=er(),{login:p}=hr(),y=async v=>{v.preventDefault(),u(!0),h("");try{await p(t,n),Ne.success("Welcome back!",{description:"You have successfully logged in."}),x("/",{replace:!0})}catch(w){const b=w instanceof Error?w.message:"Login failed";h(b),Ne.error("Login Failed",{description:b})}finally{u(!1)}};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background px-4",children:e.jsxs("div",{className:"w-full max-w-md space-y-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-3xl font-bold tracking-tight text-foreground",children:"Kamer.ba"}),e.jsx("p",{className:"mt-2 text-sm text-muted-foreground",children:"Repair Management System"})]}),e.jsxs(se,{children:[e.jsxs(ue,{children:[e.jsx(fe,{children:"Sign in to your account"}),e.jsx(Xt,{children:"Enter your email and password to access the system"})]}),e.jsx(ae,{children:e.jsxs("form",{onSubmit:y,className:"space-y-4",children:[d&&e.jsx(On,{variant:"destructive",children:e.jsx(Pn,{children:d})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"email",children:"Email"}),e.jsx(be,{id:"email",type:"email",placeholder:"Enter your email",value:t,onChange:v=>r(v.target.value),required:!0,disabled:c})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"password",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(be,{id:"password",type:a?"text":"password",placeholder:"Enter your password",value:n,onChange:v=>s(v.target.value),required:!0,disabled:c}),e.jsx(q,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>l(!a),disabled:c,children:a?e.jsx(dP,{className:"h-4 w-4"}):e.jsx(mr,{className:"h-4 w-4"})})]})]}),e.jsx(q,{type:"submit",className:"w-full",disabled:c,children:c?e.jsxs(e.Fragment,{children:[e.jsx(Nt,{className:"mr-2 h-4 w-4 animate-spin"}),"Signing in..."]}):"Sign in"})]})})]})]})})}const ir=f.forwardRef(({className:t,...r},n)=>e.jsx("div",{className:"relative w-full overflow-auto",children:e.jsx("table",{ref:n,className:ze("w-full caption-bottom text-sm",t),...r})}));ir.displayName="Table";const lr=f.forwardRef(({className:t,...r},n)=>e.jsx("thead",{ref:n,className:ze("[&_tr]:border-b",t),...r}));lr.displayName="TableHeader";const or=f.forwardRef(({className:t,...r},n)=>e.jsx("tbody",{ref:n,className:ze("[&_tr:last-child]:border-0",t),...r}));or.displayName="TableBody";const tQ=f.forwardRef(({className:t,...r},n)=>e.jsx("tfoot",{ref:n,className:ze("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...r}));tQ.displayName="TableFooter";const ft=f.forwardRef(({className:t,...r},n)=>e.jsx("tr",{ref:n,className:ze("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",t),...r}));ft.displayName="TableRow";const me=f.forwardRef(({className:t,...r},n)=>e.jsx("th",{ref:n,className:ze("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",t),...r}));me.displayName="TableHead";const oe=f.forwardRef(({className:t,...r},n)=>e.jsx("td",{ref:n,className:ze("p-4 align-middle [&:has([role=checkbox])]:pr-0",t),...r}));oe.displayName="TableCell";const rQ=f.forwardRef(({className:t,...r},n)=>e.jsx("caption",{ref:n,className:ze("mt-4 text-sm text-muted-foreground",t),...r}));rQ.displayName="TableCaption";var wj="rovingFocusGroup.onEntryFocus",nQ={bubbles:!1,cancelable:!0},ih="RovingFocusGroup",[q0,UR,sQ]=fN(ih),[aQ,Jp]=Ks(ih,[sQ]),[iQ,lQ]=aQ(ih),zR=f.forwardRef((t,r)=>e.jsx(q0.Provider,{scope:t.__scopeRovingFocusGroup,children:e.jsx(q0.Slot,{scope:t.__scopeRovingFocusGroup,children:e.jsx(oQ,{...t,ref:r})})}));zR.displayName=ih;var oQ=f.forwardRef((t,r)=>{const{__scopeRovingFocusGroup:n,orientation:s,loop:a=!1,dir:l,currentTabStopId:c,defaultCurrentTabStopId:u,onCurrentTabStopIdChange:d,onEntryFocus:h,preventScrollOnEntryFocus:x=!1,...p}=t,y=f.useRef(null),v=cr(r,y),w=Jm(l),[b,N]=hl({prop:c,defaultProp:u??null,onChange:d,caller:ih}),[_,S]=f.useState(!1),k=rs(h),E=UR(n),A=f.useRef(!1),[O,z]=f.useState(0);return f.useEffect(()=>{const R=y.current;if(R)return R.addEventListener(wj,k),()=>R.removeEventListener(wj,k)},[k]),e.jsx(iQ,{scope:n,orientation:s,dir:w,loop:a,currentTabStopId:b,onItemFocus:f.useCallback(R=>N(R),[N]),onItemShiftTab:f.useCallback(()=>S(!0),[]),onFocusableItemAdd:f.useCallback(()=>z(R=>R+1),[]),onFocusableItemRemove:f.useCallback(()=>z(R=>R-1),[]),children:e.jsx(Mt.div,{tabIndex:_||O===0?-1:0,"data-orientation":s,...p,ref:v,style:{outline:"none",...t.style},onMouseDown:bt(t.onMouseDown,()=>{A.current=!0}),onFocus:bt(t.onFocus,R=>{const G=!A.current;if(R.target===R.currentTarget&&G&&!_){const J=new CustomEvent(wj,nQ);if(R.currentTarget.dispatchEvent(J),!J.defaultPrevented){const ie=E().filter(M=>M.focusable),V=ie.find(M=>M.active),xe=ie.find(M=>M.id===b),re=[V,xe,...ie].filter(Boolean).map(M=>M.ref.current);HR(re,x)}}A.current=!1}),onBlur:bt(t.onBlur,()=>S(!1))})})}),BR="RovingFocusGroupItem",WR=f.forwardRef((t,r)=>{const{__scopeRovingFocusGroup:n,focusable:s=!0,active:a=!1,tabStopId:l,children:c,...u}=t,d=as(),h=l||d,x=lQ(BR,n),p=x.currentTabStopId===h,y=UR(n),{onFocusableItemAdd:v,onFocusableItemRemove:w,currentTabStopId:b}=x;return f.useEffect(()=>{if(s)return v(),()=>w()},[s,v,w]),e.jsx(q0.ItemSlot,{scope:n,id:h,focusable:s,active:a,children:e.jsx(Mt.span,{tabIndex:p?0:-1,"data-orientation":x.orientation,...u,ref:r,onMouseDown:bt(t.onMouseDown,N=>{s?x.onItemFocus(h):N.preventDefault()}),onFocus:bt(t.onFocus,()=>x.onItemFocus(h)),onKeyDown:bt(t.onKeyDown,N=>{if(N.key==="Tab"&&N.shiftKey){x.onItemShiftTab();return}if(N.target!==N.currentTarget)return;const _=uQ(N,x.orientation,x.dir);if(_!==void 0){if(N.metaKey||N.ctrlKey||N.altKey||N.shiftKey)return;N.preventDefault();let k=y().filter(E=>E.focusable).map(E=>E.ref.current);if(_==="last")k.reverse();else if(_==="prev"||_==="next"){_==="prev"&&k.reverse();const E=k.indexOf(N.currentTarget);k=x.loop?mQ(k,E+1):k.slice(E+1)}setTimeout(()=>HR(k))}}),children:typeof c=="function"?c({isCurrentTabStop:p,hasTabStop:b!=null}):c})})});WR.displayName=BR;var cQ={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function dQ(t,r){return r!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function uQ(t,r,n){const s=dQ(t.key,n);if(!(r==="vertical"&&["ArrowLeft","ArrowRight"].includes(s))&&!(r==="horizontal"&&["ArrowUp","ArrowDown"].includes(s)))return cQ[s]}function HR(t,r=!1){const n=document.activeElement;for(const s of t)if(s===n||(s.focus({preventScroll:r}),document.activeElement!==n))return}function mQ(t,r){return t.map((n,s)=>t[(r+s)%t.length])}var VR=zR,YR=WR,U0=["Enter"," "],hQ=["ArrowDown","PageUp","Home"],KR=["ArrowUp","PageDown","End"],fQ=[...hQ,...KR],xQ={ltr:[...U0,"ArrowRight"],rtl:[...U0,"ArrowLeft"]},pQ={ltr:["ArrowLeft"],rtl:["ArrowRight"]},lh="Menu",[Lm,gQ,yQ]=fN(lh),[Cc,GR]=Ks(lh,[yQ,tu,Jp]),eg=tu(),QR=Jp(),[vQ,Sc]=Cc(lh),[jQ,oh]=Cc(lh),XR=t=>{const{__scopeMenu:r,open:n=!1,children:s,dir:a,onOpenChange:l,modal:c=!0}=t,u=eg(r),[d,h]=f.useState(null),x=f.useRef(!1),p=rs(l),y=Jm(a);return f.useEffect(()=>{const v=()=>{x.current=!0,document.addEventListener("pointerdown",w,{capture:!0,once:!0}),document.addEventListener("pointermove",w,{capture:!0,once:!0})},w=()=>x.current=!1;return document.addEventListener("keydown",v,{capture:!0}),()=>{document.removeEventListener("keydown",v,{capture:!0}),document.removeEventListener("pointerdown",w,{capture:!0}),document.removeEventListener("pointermove",w,{capture:!0})}},[]),e.jsx(NN,{...u,children:e.jsx(vQ,{scope:r,open:n,onOpenChange:p,content:d,onContentChange:h,children:e.jsx(jQ,{scope:r,onClose:f.useCallback(()=>p(!1),[p]),isUsingKeyboardRef:x,dir:y,modal:c,children:s})})})};XR.displayName=lh;var bQ="MenuAnchor",LN=f.forwardRef((t,r)=>{const{__scopeMenu:n,...s}=t,a=eg(n);return e.jsx(Bp,{...a,...s,ref:r})});LN.displayName=bQ;var IN="MenuPortal",[wQ,ZR]=Cc(IN,{forceMount:void 0}),JR=t=>{const{__scopeMenu:r,forceMount:n,children:s,container:a}=t,l=Sc(IN,r);return e.jsx(wQ,{scope:r,forceMount:n,children:e.jsx(vs,{present:n||l.open,children:e.jsx(nh,{asChild:!0,container:a,children:s})})})};JR.displayName=IN;var La="MenuContent",[NQ,$N]=Cc(La),e3=f.forwardRef((t,r)=>{const n=ZR(La,t.__scopeMenu),{forceMount:s=n.forceMount,...a}=t,l=Sc(La,t.__scopeMenu),c=oh(La,t.__scopeMenu);return e.jsx(Lm.Provider,{scope:t.__scopeMenu,children:e.jsx(vs,{present:s||l.open,children:e.jsx(Lm.Slot,{scope:t.__scopeMenu,children:c.modal?e.jsx(_Q,{...a,ref:r}):e.jsx(CQ,{...a,ref:r})})})})}),_Q=f.forwardRef((t,r)=>{const n=Sc(La,t.__scopeMenu),s=f.useRef(null),a=cr(r,s);return f.useEffect(()=>{const l=s.current;if(l)return Wp(l)},[]),e.jsx(FN,{...t,ref:a,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:bt(t.onFocusOutside,l=>l.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),CQ=f.forwardRef((t,r)=>{const n=Sc(La,t.__scopeMenu);return e.jsx(FN,{...t,ref:r,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),SQ=ho("MenuContent.ScrollLock"),FN=f.forwardRef((t,r)=>{const{__scopeMenu:n,loop:s=!1,trapFocus:a,onOpenAutoFocus:l,onCloseAutoFocus:c,disableOutsidePointerEvents:u,onEntryFocus:d,onEscapeKeyDown:h,onPointerDownOutside:x,onFocusOutside:p,onInteractOutside:y,onDismiss:v,disableOutsideScroll:w,...b}=t,N=Sc(La,n),_=oh(La,n),S=eg(n),k=QR(n),E=gQ(n),[A,O]=f.useState(null),z=f.useRef(null),R=cr(r,z,N.onContentChange),G=f.useRef(0),J=f.useRef(""),ie=f.useRef(0),V=f.useRef(null),xe=f.useRef("right"),pe=f.useRef(0),re=w?sh:f.Fragment,M=w?{as:SQ,allowPinchZoom:!0}:void 0,B=T=>{const F=J.current+T,I=E().filter(te=>!te.disabled),Q=document.activeElement,W=I.find(te=>te.ref.current===Q)?.textValue,ee=I.map(te=>te.textValue),ye=$Q(ee,F,W),he=I.find(te=>te.textValue===ye)?.ref.current;(function te(De){J.current=De,window.clearTimeout(G.current),De!==""&&(G.current=window.setTimeout(()=>te(""),1e3))})(F),he&&setTimeout(()=>he.focus())};f.useEffect(()=>()=>window.clearTimeout(G.current),[]),$p();const L=f.useCallback(T=>xe.current===V.current?.side&&qQ(T,V.current?.area),[]);return e.jsx(NQ,{scope:n,searchRef:J,onItemEnter:f.useCallback(T=>{L(T)&&T.preventDefault()},[L]),onItemLeave:f.useCallback(T=>{L(T)||(z.current?.focus(),O(null))},[L]),onTriggerLeave:f.useCallback(T=>{L(T)&&T.preventDefault()},[L]),pointerGraceTimerRef:ie,onPointerGraceIntentChange:f.useCallback(T=>{V.current=T},[]),children:e.jsx(re,{...M,children:e.jsx(th,{asChild:!0,trapped:a,onMountAutoFocus:bt(l,T=>{T.preventDefault(),z.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:c,children:e.jsx(eh,{asChild:!0,disableOutsidePointerEvents:u,onEscapeKeyDown:h,onPointerDownOutside:x,onFocusOutside:p,onInteractOutside:y,onDismiss:v,children:e.jsx(VR,{asChild:!0,...k,dir:_.dir,orientation:"vertical",loop:s,currentTabStopId:A,onCurrentTabStopIdChange:O,onEntryFocus:bt(d,T=>{_.isUsingKeyboardRef.current||T.preventDefault()}),preventScrollOnEntryFocus:!0,children:e.jsx(_N,{role:"menu","aria-orientation":"vertical","data-state":p3(N.open),"data-radix-menu-content":"",dir:_.dir,...S,...b,ref:R,style:{outline:"none",...b.style},onKeyDown:bt(b.onKeyDown,T=>{const I=T.target.closest("[data-radix-menu-content]")===T.currentTarget,Q=T.ctrlKey||T.altKey||T.metaKey,W=T.key.length===1;I&&(T.key==="Tab"&&T.preventDefault(),!Q&&W&&B(T.key));const ee=z.current;if(T.target!==ee||!fQ.includes(T.key))return;T.preventDefault();const he=E().filter(te=>!te.disabled).map(te=>te.ref.current);KR.includes(T.key)&&he.reverse(),LQ(he)}),onBlur:bt(t.onBlur,T=>{T.currentTarget.contains(T.target)||(window.clearTimeout(G.current),J.current="")}),onPointerMove:bt(t.onPointerMove,Im(T=>{const F=T.target,I=pe.current!==T.clientX;if(T.currentTarget.contains(F)&&I){const Q=T.clientX>pe.current?"right":"left";xe.current=Q,pe.current=T.clientX}}))})})})})})})});e3.displayName=La;var kQ="MenuGroup",qN=f.forwardRef((t,r)=>{const{__scopeMenu:n,...s}=t;return e.jsx(Mt.div,{role:"group",...s,ref:r})});qN.displayName=kQ;var AQ="MenuLabel",t3=f.forwardRef((t,r)=>{const{__scopeMenu:n,...s}=t;return e.jsx(Mt.div,{...s,ref:r})});t3.displayName=AQ;var Bx="MenuItem",KA="menu.itemSelect",tg=f.forwardRef((t,r)=>{const{disabled:n=!1,onSelect:s,...a}=t,l=f.useRef(null),c=oh(Bx,t.__scopeMenu),u=$N(Bx,t.__scopeMenu),d=cr(r,l),h=f.useRef(!1),x=()=>{const p=l.current;if(!n&&p){const y=new CustomEvent(KA,{bubbles:!0,cancelable:!0});p.addEventListener(KA,v=>s?.(v),{once:!0}),kP(p,y),y.defaultPrevented?h.current=!1:c.onClose()}};return e.jsx(r3,{...a,ref:d,disabled:n,onClick:bt(t.onClick,x),onPointerDown:p=>{t.onPointerDown?.(p),h.current=!0},onPointerUp:bt(t.onPointerUp,p=>{h.current||p.currentTarget?.click()}),onKeyDown:bt(t.onKeyDown,p=>{const y=u.searchRef.current!=="";n||y&&p.key===" "||U0.includes(p.key)&&(p.currentTarget.click(),p.preventDefault())})})});tg.displayName=Bx;var r3=f.forwardRef((t,r)=>{const{__scopeMenu:n,disabled:s=!1,textValue:a,...l}=t,c=$N(Bx,n),u=QR(n),d=f.useRef(null),h=cr(r,d),[x,p]=f.useState(!1),[y,v]=f.useState("");return f.useEffect(()=>{const w=d.current;w&&v((w.textContent??"").trim())},[l.children]),e.jsx(Lm.ItemSlot,{scope:n,disabled:s,textValue:a??y,children:e.jsx(YR,{asChild:!0,...u,focusable:!s,children:e.jsx(Mt.div,{role:"menuitem","data-highlighted":x?"":void 0,"aria-disabled":s||void 0,"data-disabled":s?"":void 0,...l,ref:h,onPointerMove:bt(t.onPointerMove,Im(w=>{s?c.onItemLeave(w):(c.onItemEnter(w),w.defaultPrevented||w.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:bt(t.onPointerLeave,Im(w=>c.onItemLeave(w))),onFocus:bt(t.onFocus,()=>p(!0)),onBlur:bt(t.onBlur,()=>p(!1))})})})}),EQ="MenuCheckboxItem",n3=f.forwardRef((t,r)=>{const{checked:n=!1,onCheckedChange:s,...a}=t;return e.jsx(o3,{scope:t.__scopeMenu,checked:n,children:e.jsx(tg,{role:"menuitemcheckbox","aria-checked":Wx(n)?"mixed":n,...a,ref:r,"data-state":zN(n),onSelect:bt(a.onSelect,()=>s?.(Wx(n)?!0:!n),{checkForDefaultPrevented:!1})})})});n3.displayName=EQ;var s3="MenuRadioGroup",[MQ,TQ]=Cc(s3,{value:void 0,onValueChange:()=>{}}),a3=f.forwardRef((t,r)=>{const{value:n,onValueChange:s,...a}=t,l=rs(s);return e.jsx(MQ,{scope:t.__scopeMenu,value:n,onValueChange:l,children:e.jsx(qN,{...a,ref:r})})});a3.displayName=s3;var i3="MenuRadioItem",l3=f.forwardRef((t,r)=>{const{value:n,...s}=t,a=TQ(i3,t.__scopeMenu),l=n===a.value;return e.jsx(o3,{scope:t.__scopeMenu,checked:l,children:e.jsx(tg,{role:"menuitemradio","aria-checked":l,...s,ref:r,"data-state":zN(l),onSelect:bt(s.onSelect,()=>a.onValueChange?.(n),{checkForDefaultPrevented:!1})})})});l3.displayName=i3;var UN="MenuItemIndicator",[o3,OQ]=Cc(UN,{checked:!1}),c3=f.forwardRef((t,r)=>{const{__scopeMenu:n,forceMount:s,...a}=t,l=OQ(UN,n);return e.jsx(vs,{present:s||Wx(l.checked)||l.checked===!0,children:e.jsx(Mt.span,{...a,ref:r,"data-state":zN(l.checked)})})});c3.displayName=UN;var PQ="MenuSeparator",d3=f.forwardRef((t,r)=>{const{__scopeMenu:n,...s}=t;return e.jsx(Mt.div,{role:"separator","aria-orientation":"horizontal",...s,ref:r})});d3.displayName=PQ;var DQ="MenuArrow",u3=f.forwardRef((t,r)=>{const{__scopeMenu:n,...s}=t,a=eg(n);return e.jsx(CN,{...a,...s,ref:r})});u3.displayName=DQ;var RQ="MenuSub",[Qpe,m3]=Cc(RQ),Cm="MenuSubTrigger",h3=f.forwardRef((t,r)=>{const n=Sc(Cm,t.__scopeMenu),s=oh(Cm,t.__scopeMenu),a=m3(Cm,t.__scopeMenu),l=$N(Cm,t.__scopeMenu),c=f.useRef(null),{pointerGraceTimerRef:u,onPointerGraceIntentChange:d}=l,h={__scopeMenu:t.__scopeMenu},x=f.useCallback(()=>{c.current&&window.clearTimeout(c.current),c.current=null},[]);return f.useEffect(()=>x,[x]),f.useEffect(()=>{const p=u.current;return()=>{window.clearTimeout(p),d(null)}},[u,d]),e.jsx(LN,{asChild:!0,...h,children:e.jsx(r3,{id:a.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":a.contentId,"data-state":p3(n.open),...t,ref:ml(r,a.onTriggerChange),onClick:p=>{t.onClick?.(p),!(t.disabled||p.defaultPrevented)&&(p.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:bt(t.onPointerMove,Im(p=>{l.onItemEnter(p),!p.defaultPrevented&&!t.disabled&&!n.open&&!c.current&&(l.onPointerGraceIntentChange(null),c.current=window.setTimeout(()=>{n.onOpenChange(!0),x()},100))})),onPointerLeave:bt(t.onPointerLeave,Im(p=>{x();const y=n.content?.getBoundingClientRect();if(y){const v=n.content?.dataset.side,w=v==="right",b=w?-5:5,N=y[w?"left":"right"],_=y[w?"right":"left"];l.onPointerGraceIntentChange({area:[{x:p.clientX+b,y:p.clientY},{x:N,y:y.top},{x:_,y:y.top},{x:_,y:y.bottom},{x:N,y:y.bottom}],side:v}),window.clearTimeout(u.current),u.current=window.setTimeout(()=>l.onPointerGraceIntentChange(null),300)}else{if(l.onTriggerLeave(p),p.defaultPrevented)return;l.onPointerGraceIntentChange(null)}})),onKeyDown:bt(t.onKeyDown,p=>{const y=l.searchRef.current!=="";t.disabled||y&&p.key===" "||xQ[s.dir].includes(p.key)&&(n.onOpenChange(!0),n.content?.focus(),p.preventDefault())})})})});h3.displayName=Cm;var f3="MenuSubContent",x3=f.forwardRef((t,r)=>{const n=ZR(La,t.__scopeMenu),{forceMount:s=n.forceMount,...a}=t,l=Sc(La,t.__scopeMenu),c=oh(La,t.__scopeMenu),u=m3(f3,t.__scopeMenu),d=f.useRef(null),h=cr(r,d);return e.jsx(Lm.Provider,{scope:t.__scopeMenu,children:e.jsx(vs,{present:s||l.open,children:e.jsx(Lm.Slot,{scope:t.__scopeMenu,children:e.jsx(FN,{id:u.contentId,"aria-labelledby":u.triggerId,...a,ref:h,align:"start",side:c.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:x=>{c.isUsingKeyboardRef.current&&d.current?.focus(),x.preventDefault()},onCloseAutoFocus:x=>x.preventDefault(),onFocusOutside:bt(t.onFocusOutside,x=>{x.target!==u.trigger&&l.onOpenChange(!1)}),onEscapeKeyDown:bt(t.onEscapeKeyDown,x=>{c.onClose(),x.preventDefault()}),onKeyDown:bt(t.onKeyDown,x=>{const p=x.currentTarget.contains(x.target),y=pQ[c.dir].includes(x.key);p&&y&&(l.onOpenChange(!1),u.trigger?.focus(),x.preventDefault())})})})})})});x3.displayName=f3;function p3(t){return t?"open":"closed"}function Wx(t){return t==="indeterminate"}function zN(t){return Wx(t)?"indeterminate":t?"checked":"unchecked"}function LQ(t){const r=document.activeElement;for(const n of t)if(n===r||(n.focus(),document.activeElement!==r))return}function IQ(t,r){return t.map((n,s)=>t[(r+s)%t.length])}function $Q(t,r,n){const a=r.length>1&&Array.from(r).every(h=>h===r[0])?r[0]:r,l=n?t.indexOf(n):-1;let c=IQ(t,Math.max(l,0));a.length===1&&(c=c.filter(h=>h!==n));const d=c.find(h=>h.toLowerCase().startsWith(a.toLowerCase()));return d!==n?d:void 0}function FQ(t,r){const{x:n,y:s}=t;let a=!1;for(let l=0,c=r.length-1;l<r.length;c=l++){const u=r[l],d=r[c],h=u.x,x=u.y,p=d.x,y=d.y;x>s!=y>s&&n<(p-h)*(s-x)/(y-x)+h&&(a=!a)}return a}function qQ(t,r){if(!r)return!1;const n={x:t.clientX,y:t.clientY};return FQ(n,r)}function Im(t){return r=>r.pointerType==="mouse"?t(r):void 0}var UQ=XR,zQ=LN,BQ=JR,WQ=e3,HQ=qN,VQ=t3,YQ=tg,KQ=n3,GQ=a3,QQ=l3,XQ=c3,ZQ=d3,JQ=u3,eX=h3,tX=x3,rg="DropdownMenu",[rX,Xpe]=Ks(rg,[GR]),Rs=GR(),[nX,g3]=rX(rg),y3=t=>{const{__scopeDropdownMenu:r,children:n,dir:s,open:a,defaultOpen:l,onOpenChange:c,modal:u=!0}=t,d=Rs(r),h=f.useRef(null),[x,p]=hl({prop:a,defaultProp:l??!1,onChange:c,caller:rg});return e.jsx(nX,{scope:r,triggerId:as(),triggerRef:h,contentId:as(),open:x,onOpenChange:p,onOpenToggle:f.useCallback(()=>p(y=>!y),[p]),modal:u,children:e.jsx(UQ,{...d,open:x,onOpenChange:p,dir:s,modal:u,children:n})})};y3.displayName=rg;var v3="DropdownMenuTrigger",j3=f.forwardRef((t,r)=>{const{__scopeDropdownMenu:n,disabled:s=!1,...a}=t,l=g3(v3,n),c=Rs(n);return e.jsx(zQ,{asChild:!0,...c,children:e.jsx(Mt.button,{type:"button",id:l.triggerId,"aria-haspopup":"menu","aria-expanded":l.open,"aria-controls":l.open?l.contentId:void 0,"data-state":l.open?"open":"closed","data-disabled":s?"":void 0,disabled:s,...a,ref:ml(r,l.triggerRef),onPointerDown:bt(t.onPointerDown,u=>{!s&&u.button===0&&u.ctrlKey===!1&&(l.onOpenToggle(),l.open||u.preventDefault())}),onKeyDown:bt(t.onKeyDown,u=>{s||(["Enter"," "].includes(u.key)&&l.onOpenToggle(),u.key==="ArrowDown"&&l.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(u.key)&&u.preventDefault())})})})});j3.displayName=v3;var sX="DropdownMenuPortal",b3=t=>{const{__scopeDropdownMenu:r,...n}=t,s=Rs(r);return e.jsx(BQ,{...s,...n})};b3.displayName=sX;var w3="DropdownMenuContent",N3=f.forwardRef((t,r)=>{const{__scopeDropdownMenu:n,...s}=t,a=g3(w3,n),l=Rs(n),c=f.useRef(!1);return e.jsx(WQ,{id:a.contentId,"aria-labelledby":a.triggerId,...l,...s,ref:r,onCloseAutoFocus:bt(t.onCloseAutoFocus,u=>{c.current||a.triggerRef.current?.focus(),c.current=!1,u.preventDefault()}),onInteractOutside:bt(t.onInteractOutside,u=>{const d=u.detail.originalEvent,h=d.button===0&&d.ctrlKey===!0,x=d.button===2||h;(!a.modal||x)&&(c.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});N3.displayName=w3;var aX="DropdownMenuGroup",iX=f.forwardRef((t,r)=>{const{__scopeDropdownMenu:n,...s}=t,a=Rs(n);return e.jsx(HQ,{...a,...s,ref:r})});iX.displayName=aX;var lX="DropdownMenuLabel",_3=f.forwardRef((t,r)=>{const{__scopeDropdownMenu:n,...s}=t,a=Rs(n);return e.jsx(VQ,{...a,...s,ref:r})});_3.displayName=lX;var oX="DropdownMenuItem",C3=f.forwardRef((t,r)=>{const{__scopeDropdownMenu:n,...s}=t,a=Rs(n);return e.jsx(YQ,{...a,...s,ref:r})});C3.displayName=oX;var cX="DropdownMenuCheckboxItem",S3=f.forwardRef((t,r)=>{const{__scopeDropdownMenu:n,...s}=t,a=Rs(n);return e.jsx(KQ,{...a,...s,ref:r})});S3.displayName=cX;var dX="DropdownMenuRadioGroup",uX=f.forwardRef((t,r)=>{const{__scopeDropdownMenu:n,...s}=t,a=Rs(n);return e.jsx(GQ,{...a,...s,ref:r})});uX.displayName=dX;var mX="DropdownMenuRadioItem",k3=f.forwardRef((t,r)=>{const{__scopeDropdownMenu:n,...s}=t,a=Rs(n);return e.jsx(QQ,{...a,...s,ref:r})});k3.displayName=mX;var hX="DropdownMenuItemIndicator",A3=f.forwardRef((t,r)=>{const{__scopeDropdownMenu:n,...s}=t,a=Rs(n);return e.jsx(XQ,{...a,...s,ref:r})});A3.displayName=hX;var fX="DropdownMenuSeparator",E3=f.forwardRef((t,r)=>{const{__scopeDropdownMenu:n,...s}=t,a=Rs(n);return e.jsx(ZQ,{...a,...s,ref:r})});E3.displayName=fX;var xX="DropdownMenuArrow",pX=f.forwardRef((t,r)=>{const{__scopeDropdownMenu:n,...s}=t,a=Rs(n);return e.jsx(JQ,{...a,...s,ref:r})});pX.displayName=xX;var gX="DropdownMenuSubTrigger",M3=f.forwardRef((t,r)=>{const{__scopeDropdownMenu:n,...s}=t,a=Rs(n);return e.jsx(eX,{...a,...s,ref:r})});M3.displayName=gX;var yX="DropdownMenuSubContent",T3=f.forwardRef((t,r)=>{const{__scopeDropdownMenu:n,...s}=t,a=Rs(n);return e.jsx(tX,{...a,...s,ref:r,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});T3.displayName=yX;var vX=y3,jX=j3,bX=b3,O3=N3,P3=_3,D3=C3,R3=S3,L3=k3,I3=A3,$3=E3,F3=M3,q3=T3;const Cr=vX,Sr=jX,wX=f.forwardRef(({className:t,inset:r,children:n,...s},a)=>e.jsxs(F3,{ref:a,className:ze("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",r&&"pl-8",t),...s,children:[n,e.jsx(ri,{className:"ml-auto h-4 w-4"})]}));wX.displayName=F3.displayName;const NX=f.forwardRef(({className:t,...r},n)=>e.jsx(q3,{ref:n,className:ze("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...r}));NX.displayName=q3.displayName;const wr=f.forwardRef(({className:t,sideOffset:r=4,...n},s)=>e.jsx(bX,{children:e.jsx(O3,{ref:s,sideOffset:r,className:ze("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n})}));wr.displayName=O3.displayName;const ct=f.forwardRef(({className:t,inset:r,...n},s)=>e.jsx(D3,{ref:s,className:ze("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r&&"pl-8",t),...n}));ct.displayName=D3.displayName;const _X=f.forwardRef(({className:t,children:r,checked:n,...s},a)=>e.jsxs(R3,{ref:a,className:ze("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:n,...s,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(I3,{children:e.jsx(Gr,{className:"h-4 w-4"})})}),r]}));_X.displayName=R3.displayName;const CX=f.forwardRef(({className:t,children:r,...n},s)=>e.jsxs(L3,{ref:s,className:ze("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(I3,{children:e.jsx(b7,{className:"h-2 w-2 fill-current"})})}),r]}));CX.displayName=L3.displayName;const Tr=f.forwardRef(({className:t,inset:r,...n},s)=>e.jsx(P3,{ref:s,className:ze("px-2 py-1.5 text-sm font-semibold",r&&"pl-8",t),...n}));Tr.displayName=P3.displayName;const Lr=f.forwardRef(({className:t,...r},n)=>e.jsx($3,{ref:n,className:ze("-mx-1 my-1 h-px bg-muted",t),...r}));Lr.displayName=$3.displayName;var U3="AlertDialog",[SX,Zpe]=Ks(U3,[cR]),wl=cR(),z3=t=>{const{__scopeAlertDialog:r,...n}=t,s=wl(r);return e.jsx(MN,{...s,...n,modal:!0})};z3.displayName=U3;var kX="AlertDialogTrigger",AX=f.forwardRef((t,r)=>{const{__scopeAlertDialog:n,...s}=t,a=wl(n);return e.jsx(CR,{...a,...s,ref:r})});AX.displayName=kX;var EX="AlertDialogPortal",B3=t=>{const{__scopeAlertDialog:r,...n}=t,s=wl(r);return e.jsx(TN,{...s,...n})};B3.displayName=EX;var MX="AlertDialogOverlay",W3=f.forwardRef((t,r)=>{const{__scopeAlertDialog:n,...s}=t,a=wl(n);return e.jsx(Qp,{...a,...s,ref:r})});W3.displayName=MX;var Ad="AlertDialogContent",[TX,OX]=SX(Ad),PX=J9("AlertDialogContent"),H3=f.forwardRef((t,r)=>{const{__scopeAlertDialog:n,children:s,...a}=t,l=wl(n),c=f.useRef(null),u=cr(r,c),d=f.useRef(null);return e.jsx(jG,{contentName:Ad,titleName:V3,docsSlug:"alert-dialog",children:e.jsx(TX,{scope:n,cancelRef:d,children:e.jsxs(Xp,{role:"alertdialog",...l,...a,ref:u,onOpenAutoFocus:bt(a.onOpenAutoFocus,h=>{h.preventDefault(),d.current?.focus({preventScroll:!0})}),onPointerDownOutside:h=>h.preventDefault(),onInteractOutside:h=>h.preventDefault(),children:[e.jsx(PX,{children:s}),e.jsx(RX,{contentRef:c})]})})})});H3.displayName=Ad;var V3="AlertDialogTitle",Y3=f.forwardRef((t,r)=>{const{__scopeAlertDialog:n,...s}=t,a=wl(n);return e.jsx(ON,{...a,...s,ref:r})});Y3.displayName=V3;var K3="AlertDialogDescription",G3=f.forwardRef((t,r)=>{const{__scopeAlertDialog:n,...s}=t,a=wl(n);return e.jsx(PN,{...a,...s,ref:r})});G3.displayName=K3;var DX="AlertDialogAction",Q3=f.forwardRef((t,r)=>{const{__scopeAlertDialog:n,...s}=t,a=wl(n);return e.jsx(DN,{...a,...s,ref:r})});Q3.displayName=DX;var X3="AlertDialogCancel",Z3=f.forwardRef((t,r)=>{const{__scopeAlertDialog:n,...s}=t,{cancelRef:a}=OX(X3,n),l=wl(n),c=cr(r,a);return e.jsx(DN,{...l,...s,ref:c})});Z3.displayName=X3;var RX=({contentRef:t})=>{const r=`\`${Ad}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${Ad}\` by passing a \`${K3}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${Ad}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return f.useEffect(()=>{document.getElementById(t.current?.getAttribute("aria-describedby"))||console.warn(r)},[r,t]),null},LX=z3,IX=B3,J3=W3,eL=H3,tL=Q3,rL=Z3,nL=Y3,sL=G3;const ng=LX,$X=IX,aL=f.forwardRef(({className:t,...r},n)=>e.jsx(J3,{className:ze("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...r,ref:n}));aL.displayName=J3.displayName;const ch=f.forwardRef(({className:t,...r},n)=>e.jsxs($X,{children:[e.jsx(aL,{}),e.jsx(eL,{ref:n,className:ze("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...r})]}));ch.displayName=eL.displayName;const dh=({className:t,...r})=>e.jsx("div",{className:ze("flex flex-col space-y-2 text-center sm:text-left",t),...r});dh.displayName="AlertDialogHeader";const uh=({className:t,...r})=>e.jsx("div",{className:ze("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...r});uh.displayName="AlertDialogFooter";const mh=f.forwardRef(({className:t,...r},n)=>e.jsx(nL,{ref:n,className:ze("text-lg font-semibold",t),...r}));mh.displayName=nL.displayName;const hh=f.forwardRef(({className:t,...r},n)=>e.jsx(sL,{ref:n,className:ze("text-sm text-muted-foreground",t),...r}));hh.displayName=sL.displayName;const fh=f.forwardRef(({className:t,...r},n)=>e.jsx(tL,{ref:n,className:ze(cN(),t),...r}));fh.displayName=tL.displayName;const BN=f.forwardRef(({className:t,...r},n)=>e.jsx(rL,{ref:n,className:ze(cN({variant:"outline"}),"mt-2 sm:mt-0",t),...r}));BN.displayName=rL.displayName;function Vs({open:t,onOpenChange:r,onConfirm:n,title:s="Delete Item",description:a,itemName:l,itemType:c="item",isLoading:u=!1}){const d=`Are you sure you want to delete ${l?`"${l}"`:`this ${c}`}? This action cannot be undone.`;return e.jsx(ng,{open:t,onOpenChange:r,children:e.jsxs(ch,{children:[e.jsxs(dh,{children:[e.jsx(mh,{children:s}),e.jsx(hh,{children:a||d})]}),e.jsxs(uh,{children:[e.jsx(BN,{disabled:u,children:"Cancel"}),e.jsx(fh,{onClick:n,className:"bg-red-600 hover:bg-red-700",disabled:u,children:u?"Deleting...":"Delete"})]})]})})}function iL({open:t,onOpenChange:r,title:n,description:s,confirmText:a="OK",cancelText:l="Cancel",onConfirm:c,onCancel:u,variant:d="default",showCancel:h=!1,isLoading:x=!1}){const p=()=>{c?c():r(!1)},y=()=>{switch(d){case"destructive":return"bg-red-600 hover:bg-red-700";case"warning":return"bg-yellow-600 hover:bg-yellow-700";default:return""}};return e.jsx(ng,{open:t,onOpenChange:r,children:e.jsxs(ch,{children:[e.jsxs(dh,{children:[e.jsx(mh,{children:n}),e.jsx(hh,{children:s})]}),e.jsxs(uh,{children:[h&&e.jsx(BN,{disabled:x,children:l}),e.jsx(fh,{onClick:p,className:y(),disabled:x,children:x?"Loading...":a})]})]})})}function Qs(t){if(!t)return"Unknown";const r={in_progress:"In Progress","converted - warranty":"Converted - Warranty",warranty_declined:"Warranty Declined",low_stock:"Low Stock",out_of_stock:"Out of Stock",warranty_expiring:"Warranty Expiring",needs_improvement:"Needs Improvement"};return r[t]?r[t]:t.split("_").map(n=>n.charAt(0).toUpperCase()+n.slice(1).toLowerCase()).join(" ")}function Vr(t){return{pending:"outline",in_progress:"secondary",completed:"default",cancelled:"destructive",intake:"outline",testing:"outline",parts_ordered:"outline",waiting_approval:"outline",waiting_supplier:"outline",service_cancelled:"destructive",quoted:"outline",awaiting_approval:"outline",declined:"destructive",ready_for_pickup:"default",warranty_declined:"destructive",open:"outline",converted:"default","converted - warranty":"default",draft:"outline",sent:"secondary",viewed:"secondary",accepted:"default",expired:"destructive",active:"default",inactive:"outline",low_stock:"destructive",out_of_stock:"destructive",in_stock:"default",new:"outline",contacted:"secondary",qualified:"secondary",proposal:"secondary",negotiation:"secondary",closed_won:"default",closed_lost:"destructive",excellent:"default",good:"default",average:"secondary",needs_improvement:"destructive"}[t]||"outline"}function Xs(t){return{pending:"bg-yellow-50 text-yellow-700 border-yellow-200",in_progress:"bg-blue-50 text-blue-700 border-blue-200",completed:"bg-green-50 text-green-700 border-green-200",cancelled:"bg-red-50 text-red-700 border-red-200",intake:"bg-orange-50 text-orange-700 border-orange-200",testing:"bg-purple-50 text-purple-700 border-purple-200",parts_ordered:"bg-orange-50 text-orange-700 border-orange-200",waiting_approval:"bg-amber-50 text-amber-700 border-amber-200",waiting_supplier:"bg-red-50 text-red-700 border-red-200",service_cancelled:"bg-red-50 text-red-700 border-red-200",quoted:"bg-blue-50 text-blue-700 border-blue-200",awaiting_approval:"bg-amber-50 text-amber-700 border-amber-200",declined:"bg-red-50 text-red-700 border-red-200",ready_for_pickup:"bg-green-50 text-green-700 border-green-200",warranty_declined:"bg-red-50 text-red-700 border-red-200",open:"bg-orange-50 text-orange-700 border-orange-200",converted:"bg-green-50 text-green-700 border-green-200","converted - warranty":"bg-green-50 text-green-700 border-green-200",draft:"bg-gray-50 text-gray-700 border-gray-200",sent:"bg-blue-50 text-blue-700 border-blue-200",viewed:"bg-purple-50 text-purple-700 border-purple-200",accepted:"bg-green-50 text-green-700 border-green-200",expired:"bg-red-50 text-red-700 border-red-200",active:"bg-green-50 text-green-700 border-green-200",inactive:"bg-gray-50 text-gray-700 border-gray-200",low_stock:"bg-yellow-50 text-yellow-700 border-yellow-200",out_of_stock:"bg-red-50 text-red-700 border-red-200",in_stock:"bg-green-50 text-green-700 border-green-200",new:"bg-blue-50 text-blue-700 border-blue-200",contacted:"bg-purple-50 text-purple-700 border-purple-200",qualified:"bg-indigo-50 text-indigo-700 border-indigo-200",proposal:"bg-pink-50 text-pink-700 border-pink-200",negotiation:"bg-orange-50 text-orange-700 border-orange-200",closed_won:"bg-green-50 text-green-700 border-green-200",closed_lost:"bg-red-50 text-red-700 border-red-200",excellent:"bg-green-50 text-green-700 border-green-200",good:"bg-blue-50 text-blue-700 border-blue-200",average:"bg-yellow-50 text-yellow-700 border-yellow-200",needs_improvement:"bg-red-50 text-red-700 border-red-200"}[t]||"bg-gray-50 text-gray-700 border-gray-200"}function at(t,r=2){const n=typeof t=="string"?parseFloat(t):t;return isNaN(n)?"0.00 KM":`${new Intl.NumberFormat("en-US",{minimumFractionDigits:r,maximumFractionDigits:r}).format(n)} KM`}function ps(t,r){const[n,s]=f.useState(()=>{const b=`table_columns_${t}`,N=localStorage.getItem(b);return N?JSON.parse(N):r}),[a,l]=f.useState(!0),[c,u]=f.useState(!1);f.useEffect(()=>{(async()=>{try{const N=await de.getTablePreference(t);if(N.status==="success"&&N.data){const _=N.data.visible_columns;if(Array.isArray(_)&&_.length>0){s(_);const S=`table_columns_${t}`;localStorage.setItem(S,JSON.stringify(_))}}}catch(N){N.status}finally{l(!1)}})()},[t]);const d=f.useCallback(async b=>{const N=`table_columns_${t}`;localStorage.setItem(N,JSON.stringify(b)),u(!0);try{await de.saveTablePreference(t,b)}catch(_){console.error(`Failed to sync table preferences for ${t}:`,_)}finally{u(!1)}},[t]),h=f.useCallback(b=>{s(b),d(b)},[d]),x=f.useCallback(b=>{s(N=>{const _=N.includes(b)?N.filter(S=>S!==b):[...N,b];return d(_),_})},[d]),p=f.useCallback(b=>n.includes(b),[n]),y=f.useCallback(async()=>{const b=`table_columns_${t}`;s(r),localStorage.removeItem(b),u(!0);try{await de.deleteTablePreference(t)}catch(N){console.error(`Failed to reset table preferences for ${t}:`,N)}finally{u(!1)}},[t,r]),v=f.useCallback(()=>{h(r)},[r,h]),w=f.useCallback(()=>{const b=r[0];h([b])},[r,h]);return{visibleColumns:n,setVisibleColumns:h,toggleColumn:x,isColumnVisible:p,resetColumns:y,showAllColumns:v,hideAllColumns:w,isLoading:a,isSyncing:c,defaultColumns:r}}function gs(t){return t.map(r=>r.key)}var sg="Checkbox",[FX,Jpe]=Ks(sg),[qX,WN]=FX(sg);function UX(t){const{__scopeCheckbox:r,checked:n,children:s,defaultChecked:a,disabled:l,form:c,name:u,onCheckedChange:d,required:h,value:x="on",internal_do_not_use_render:p}=t,[y,v]=hl({prop:n,defaultProp:a??!1,onChange:d,caller:sg}),[w,b]=f.useState(null),[N,_]=f.useState(null),S=f.useRef(!1),k=w?!!c||!!w.closest("form"):!0,E={checked:y,disabled:l,setChecked:v,control:w,setControl:b,name:u,form:c,value:x,hasConsumerStoppedPropagationRef:S,required:h,defaultChecked:uo(a)?!1:a,isFormControl:k,bubbleInput:N,setBubbleInput:_};return e.jsx(qX,{scope:r,...E,children:zX(p)?p(E):s})}var lL="CheckboxTrigger",oL=f.forwardRef(({__scopeCheckbox:t,onKeyDown:r,onClick:n,...s},a)=>{const{control:l,value:c,disabled:u,checked:d,required:h,setControl:x,setChecked:p,hasConsumerStoppedPropagationRef:y,isFormControl:v,bubbleInput:w}=WN(lL,t),b=cr(a,x),N=f.useRef(d);return f.useEffect(()=>{const _=l?.form;if(_){const S=()=>p(N.current);return _.addEventListener("reset",S),()=>_.removeEventListener("reset",S)}},[l,p]),e.jsx(Mt.button,{type:"button",role:"checkbox","aria-checked":uo(d)?"mixed":d,"aria-required":h,"data-state":hL(d),"data-disabled":u?"":void 0,disabled:u,value:c,...s,ref:b,onKeyDown:bt(r,_=>{_.key==="Enter"&&_.preventDefault()}),onClick:bt(n,_=>{p(S=>uo(S)?!0:!S),w&&v&&(y.current=_.isPropagationStopped(),y.current||_.stopPropagation())})})});oL.displayName=lL;var HN=f.forwardRef((t,r)=>{const{__scopeCheckbox:n,name:s,checked:a,defaultChecked:l,required:c,disabled:u,value:d,onCheckedChange:h,form:x,...p}=t;return e.jsx(UX,{__scopeCheckbox:n,checked:a,defaultChecked:l,disabled:u,required:c,onCheckedChange:h,name:s,form:x,value:d,internal_do_not_use_render:({isFormControl:y})=>e.jsxs(e.Fragment,{children:[e.jsx(oL,{...p,ref:r,__scopeCheckbox:n}),y&&e.jsx(mL,{__scopeCheckbox:n})]})})});HN.displayName=sg;var cL="CheckboxIndicator",dL=f.forwardRef((t,r)=>{const{__scopeCheckbox:n,forceMount:s,...a}=t,l=WN(cL,n);return e.jsx(vs,{present:s||uo(l.checked)||l.checked===!0,children:e.jsx(Mt.span,{"data-state":hL(l.checked),"data-disabled":l.disabled?"":void 0,...a,ref:r,style:{pointerEvents:"none",...t.style}})})});dL.displayName=cL;var uL="CheckboxBubbleInput",mL=f.forwardRef(({__scopeCheckbox:t,...r},n)=>{const{control:s,hasConsumerStoppedPropagationRef:a,checked:l,defaultChecked:c,required:u,disabled:d,name:h,value:x,form:p,bubbleInput:y,setBubbleInput:v}=WN(uL,t),w=cr(n,v),b=fD(l),N=sD(s);f.useEffect(()=>{const S=y;if(!S)return;const k=window.HTMLInputElement.prototype,A=Object.getOwnPropertyDescriptor(k,"checked").set,O=!a.current;if(b!==l&&A){const z=new Event("click",{bubbles:O});S.indeterminate=uo(l),A.call(S,uo(l)?!1:l),S.dispatchEvent(z)}},[y,b,l,a]);const _=f.useRef(uo(l)?!1:l);return e.jsx(Mt.input,{type:"checkbox","aria-hidden":!0,defaultChecked:c??_.current,required:u,disabled:d,name:h,value:x,form:p,...r,tabIndex:-1,ref:w,style:{...r.style,...N,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});mL.displayName=uL;function zX(t){return typeof t=="function"}function uo(t){return t==="indeterminate"}function hL(t){return uo(t)?"indeterminate":t?"checked":"unchecked"}const ag=f.forwardRef(({className:t,...r},n)=>e.jsx(HN,{ref:n,className:ze("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...r,children:e.jsx(dL,{className:ze("flex items-center justify-center text-current"),children:e.jsx(Gr,{className:"h-4 w-4"})})}));ag.displayName=HN.displayName;function BX(t,r){return f.useReducer((n,s)=>r[n][s]??n,t)}var VN="ScrollArea",[fL,ege]=Ks(VN),[WX,za]=fL(VN),xL=f.forwardRef((t,r)=>{const{__scopeScrollArea:n,type:s="hover",dir:a,scrollHideDelay:l=600,...c}=t,[u,d]=f.useState(null),[h,x]=f.useState(null),[p,y]=f.useState(null),[v,w]=f.useState(null),[b,N]=f.useState(null),[_,S]=f.useState(0),[k,E]=f.useState(0),[A,O]=f.useState(!1),[z,R]=f.useState(!1),G=cr(r,ie=>d(ie)),J=Jm(a);return e.jsx(WX,{scope:n,type:s,dir:J,scrollHideDelay:l,scrollArea:u,viewport:h,onViewportChange:x,content:p,onContentChange:y,scrollbarX:v,onScrollbarXChange:w,scrollbarXEnabled:A,onScrollbarXEnabledChange:O,scrollbarY:b,onScrollbarYChange:N,scrollbarYEnabled:z,onScrollbarYEnabledChange:R,onCornerWidthChange:S,onCornerHeightChange:E,children:e.jsx(Mt.div,{dir:J,...c,ref:G,style:{position:"relative","--radix-scroll-area-corner-width":_+"px","--radix-scroll-area-corner-height":k+"px",...t.style}})})});xL.displayName=VN;var pL="ScrollAreaViewport",gL=f.forwardRef((t,r)=>{const{__scopeScrollArea:n,children:s,nonce:a,...l}=t,c=za(pL,n),u=f.useRef(null),d=cr(r,u,c.onViewportChange);return e.jsxs(e.Fragment,{children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:a}),e.jsx(Mt.div,{"data-radix-scroll-area-viewport":"",...l,ref:d,style:{overflowX:c.scrollbarXEnabled?"scroll":"hidden",overflowY:c.scrollbarYEnabled?"scroll":"hidden",...t.style},children:e.jsx("div",{ref:c.onContentChange,style:{minWidth:"100%",display:"table"},children:s})})]})});gL.displayName=pL;var Li="ScrollAreaScrollbar",YN=f.forwardRef((t,r)=>{const{forceMount:n,...s}=t,a=za(Li,t.__scopeScrollArea),{onScrollbarXEnabledChange:l,onScrollbarYEnabledChange:c}=a,u=t.orientation==="horizontal";return f.useEffect(()=>(u?l(!0):c(!0),()=>{u?l(!1):c(!1)}),[u,l,c]),a.type==="hover"?e.jsx(HX,{...s,ref:r,forceMount:n}):a.type==="scroll"?e.jsx(VX,{...s,ref:r,forceMount:n}):a.type==="auto"?e.jsx(yL,{...s,ref:r,forceMount:n}):a.type==="always"?e.jsx(KN,{...s,ref:r}):null});YN.displayName=Li;var HX=f.forwardRef((t,r)=>{const{forceMount:n,...s}=t,a=za(Li,t.__scopeScrollArea),[l,c]=f.useState(!1);return f.useEffect(()=>{const u=a.scrollArea;let d=0;if(u){const h=()=>{window.clearTimeout(d),c(!0)},x=()=>{d=window.setTimeout(()=>c(!1),a.scrollHideDelay)};return u.addEventListener("pointerenter",h),u.addEventListener("pointerleave",x),()=>{window.clearTimeout(d),u.removeEventListener("pointerenter",h),u.removeEventListener("pointerleave",x)}}},[a.scrollArea,a.scrollHideDelay]),e.jsx(vs,{present:n||l,children:e.jsx(yL,{"data-state":l?"visible":"hidden",...s,ref:r})})}),VX=f.forwardRef((t,r)=>{const{forceMount:n,...s}=t,a=za(Li,t.__scopeScrollArea),l=t.orientation==="horizontal",c=lg(()=>d("SCROLL_END"),100),[u,d]=BX("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return f.useEffect(()=>{if(u==="idle"){const h=window.setTimeout(()=>d("HIDE"),a.scrollHideDelay);return()=>window.clearTimeout(h)}},[u,a.scrollHideDelay,d]),f.useEffect(()=>{const h=a.viewport,x=l?"scrollLeft":"scrollTop";if(h){let p=h[x];const y=()=>{const v=h[x];p!==v&&(d("SCROLL"),c()),p=v};return h.addEventListener("scroll",y),()=>h.removeEventListener("scroll",y)}},[a.viewport,l,d,c]),e.jsx(vs,{present:n||u!=="hidden",children:e.jsx(KN,{"data-state":u==="hidden"?"hidden":"visible",...s,ref:r,onPointerEnter:bt(t.onPointerEnter,()=>d("POINTER_ENTER")),onPointerLeave:bt(t.onPointerLeave,()=>d("POINTER_LEAVE"))})})}),yL=f.forwardRef((t,r)=>{const n=za(Li,t.__scopeScrollArea),{forceMount:s,...a}=t,[l,c]=f.useState(!1),u=t.orientation==="horizontal",d=lg(()=>{if(n.viewport){const h=n.viewport.offsetWidth<n.viewport.scrollWidth,x=n.viewport.offsetHeight<n.viewport.scrollHeight;c(u?h:x)}},10);return Pd(n.viewport,d),Pd(n.content,d),e.jsx(vs,{present:s||l,children:e.jsx(KN,{"data-state":l?"visible":"hidden",...a,ref:r})})}),KN=f.forwardRef((t,r)=>{const{orientation:n="vertical",...s}=t,a=za(Li,t.__scopeScrollArea),l=f.useRef(null),c=f.useRef(0),[u,d]=f.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),h=NL(u.viewport,u.content),x={...s,sizes:u,onSizesChange:d,hasThumb:h>0&&h<1,onThumbChange:y=>l.current=y,onThumbPointerUp:()=>c.current=0,onThumbPointerDown:y=>c.current=y};function p(y,v){return ZX(y,c.current,u,v)}return n==="horizontal"?e.jsx(YX,{...x,ref:r,onThumbPositionChange:()=>{if(a.viewport&&l.current){const y=a.viewport.scrollLeft,v=GA(y,u,a.dir);l.current.style.transform=`translate3d(${v}px, 0, 0)`}},onWheelScroll:y=>{a.viewport&&(a.viewport.scrollLeft=y)},onDragScroll:y=>{a.viewport&&(a.viewport.scrollLeft=p(y,a.dir))}}):n==="vertical"?e.jsx(KX,{...x,ref:r,onThumbPositionChange:()=>{if(a.viewport&&l.current){const y=a.viewport.scrollTop,v=GA(y,u);l.current.style.transform=`translate3d(0, ${v}px, 0)`}},onWheelScroll:y=>{a.viewport&&(a.viewport.scrollTop=y)},onDragScroll:y=>{a.viewport&&(a.viewport.scrollTop=p(y))}}):null}),YX=f.forwardRef((t,r)=>{const{sizes:n,onSizesChange:s,...a}=t,l=za(Li,t.__scopeScrollArea),[c,u]=f.useState(),d=f.useRef(null),h=cr(r,d,l.onScrollbarXChange);return f.useEffect(()=>{d.current&&u(getComputedStyle(d.current))},[d]),e.jsx(jL,{"data-orientation":"horizontal",...a,ref:h,sizes:n,style:{bottom:0,left:l.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:l.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":ig(n)+"px",...t.style},onThumbPointerDown:x=>t.onThumbPointerDown(x.x),onDragScroll:x=>t.onDragScroll(x.x),onWheelScroll:(x,p)=>{if(l.viewport){const y=l.viewport.scrollLeft+x.deltaX;t.onWheelScroll(y),CL(y,p)&&x.preventDefault()}},onResize:()=>{d.current&&l.viewport&&c&&s({content:l.viewport.scrollWidth,viewport:l.viewport.offsetWidth,scrollbar:{size:d.current.clientWidth,paddingStart:Vx(c.paddingLeft),paddingEnd:Vx(c.paddingRight)}})}})}),KX=f.forwardRef((t,r)=>{const{sizes:n,onSizesChange:s,...a}=t,l=za(Li,t.__scopeScrollArea),[c,u]=f.useState(),d=f.useRef(null),h=cr(r,d,l.onScrollbarYChange);return f.useEffect(()=>{d.current&&u(getComputedStyle(d.current))},[d]),e.jsx(jL,{"data-orientation":"vertical",...a,ref:h,sizes:n,style:{top:0,right:l.dir==="ltr"?0:void 0,left:l.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":ig(n)+"px",...t.style},onThumbPointerDown:x=>t.onThumbPointerDown(x.y),onDragScroll:x=>t.onDragScroll(x.y),onWheelScroll:(x,p)=>{if(l.viewport){const y=l.viewport.scrollTop+x.deltaY;t.onWheelScroll(y),CL(y,p)&&x.preventDefault()}},onResize:()=>{d.current&&l.viewport&&c&&s({content:l.viewport.scrollHeight,viewport:l.viewport.offsetHeight,scrollbar:{size:d.current.clientHeight,paddingStart:Vx(c.paddingTop),paddingEnd:Vx(c.paddingBottom)}})}})}),[GX,vL]=fL(Li),jL=f.forwardRef((t,r)=>{const{__scopeScrollArea:n,sizes:s,hasThumb:a,onThumbChange:l,onThumbPointerUp:c,onThumbPointerDown:u,onThumbPositionChange:d,onDragScroll:h,onWheelScroll:x,onResize:p,...y}=t,v=za(Li,n),[w,b]=f.useState(null),N=cr(r,G=>b(G)),_=f.useRef(null),S=f.useRef(""),k=v.viewport,E=s.content-s.viewport,A=rs(x),O=rs(d),z=lg(p,10);function R(G){if(_.current){const J=G.clientX-_.current.left,ie=G.clientY-_.current.top;h({x:J,y:ie})}}return f.useEffect(()=>{const G=J=>{const ie=J.target;w?.contains(ie)&&A(J,E)};return document.addEventListener("wheel",G,{passive:!1}),()=>document.removeEventListener("wheel",G,{passive:!1})},[k,w,E,A]),f.useEffect(O,[s,O]),Pd(w,z),Pd(v.content,z),e.jsx(GX,{scope:n,scrollbar:w,hasThumb:a,onThumbChange:rs(l),onThumbPointerUp:rs(c),onThumbPositionChange:O,onThumbPointerDown:rs(u),children:e.jsx(Mt.div,{...y,ref:N,style:{position:"absolute",...y.style},onPointerDown:bt(t.onPointerDown,G=>{G.button===0&&(G.target.setPointerCapture(G.pointerId),_.current=w.getBoundingClientRect(),S.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",v.viewport&&(v.viewport.style.scrollBehavior="auto"),R(G))}),onPointerMove:bt(t.onPointerMove,R),onPointerUp:bt(t.onPointerUp,G=>{const J=G.target;J.hasPointerCapture(G.pointerId)&&J.releasePointerCapture(G.pointerId),document.body.style.webkitUserSelect=S.current,v.viewport&&(v.viewport.style.scrollBehavior=""),_.current=null})})})}),Hx="ScrollAreaThumb",bL=f.forwardRef((t,r)=>{const{forceMount:n,...s}=t,a=vL(Hx,t.__scopeScrollArea);return e.jsx(vs,{present:n||a.hasThumb,children:e.jsx(QX,{ref:r,...s})})}),QX=f.forwardRef((t,r)=>{const{__scopeScrollArea:n,style:s,...a}=t,l=za(Hx,n),c=vL(Hx,n),{onThumbPositionChange:u}=c,d=cr(r,p=>c.onThumbChange(p)),h=f.useRef(void 0),x=lg(()=>{h.current&&(h.current(),h.current=void 0)},100);return f.useEffect(()=>{const p=l.viewport;if(p){const y=()=>{if(x(),!h.current){const v=JX(p,u);h.current=v,u()}};return u(),p.addEventListener("scroll",y),()=>p.removeEventListener("scroll",y)}},[l.viewport,x,u]),e.jsx(Mt.div,{"data-state":c.hasThumb?"visible":"hidden",...a,ref:d,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...s},onPointerDownCapture:bt(t.onPointerDownCapture,p=>{const v=p.target.getBoundingClientRect(),w=p.clientX-v.left,b=p.clientY-v.top;c.onThumbPointerDown({x:w,y:b})}),onPointerUp:bt(t.onPointerUp,c.onThumbPointerUp)})});bL.displayName=Hx;var GN="ScrollAreaCorner",wL=f.forwardRef((t,r)=>{const n=za(GN,t.__scopeScrollArea),s=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&s?e.jsx(XX,{...t,ref:r}):null});wL.displayName=GN;var XX=f.forwardRef((t,r)=>{const{__scopeScrollArea:n,...s}=t,a=za(GN,n),[l,c]=f.useState(0),[u,d]=f.useState(0),h=!!(l&&u);return Pd(a.scrollbarX,()=>{const x=a.scrollbarX?.offsetHeight||0;a.onCornerHeightChange(x),d(x)}),Pd(a.scrollbarY,()=>{const x=a.scrollbarY?.offsetWidth||0;a.onCornerWidthChange(x),c(x)}),h?e.jsx(Mt.div,{...s,ref:r,style:{width:l,height:u,position:"absolute",right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:0,...t.style}}):null});function Vx(t){return t?parseInt(t,10):0}function NL(t,r){const n=t/r;return isNaN(n)?0:n}function ig(t){const r=NL(t.viewport,t.content),n=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,s=(t.scrollbar.size-n)*r;return Math.max(s,18)}function ZX(t,r,n,s="ltr"){const a=ig(n),l=a/2,c=r||l,u=a-c,d=n.scrollbar.paddingStart+c,h=n.scrollbar.size-n.scrollbar.paddingEnd-u,x=n.content-n.viewport,p=s==="ltr"?[0,x]:[x*-1,0];return _L([d,h],p)(t)}function GA(t,r,n="ltr"){const s=ig(r),a=r.scrollbar.paddingStart+r.scrollbar.paddingEnd,l=r.scrollbar.size-a,c=r.content-r.viewport,u=l-s,d=n==="ltr"?[0,c]:[c*-1,0],h=k0(t,d);return _L([0,c],[0,u])(h)}function _L(t,r){return n=>{if(t[0]===t[1]||r[0]===r[1])return r[0];const s=(r[1]-r[0])/(t[1]-t[0]);return r[0]+s*(n-t[0])}}function CL(t,r){return t>0&&t<r}var JX=(t,r=()=>{})=>{let n={left:t.scrollLeft,top:t.scrollTop},s=0;return(function a(){const l={left:t.scrollLeft,top:t.scrollTop},c=n.left!==l.left,u=n.top!==l.top;(c||u)&&r(),n=l,s=window.requestAnimationFrame(a)})(),()=>window.cancelAnimationFrame(s)};function lg(t,r){const n=rs(t),s=f.useRef(0);return f.useEffect(()=>()=>window.clearTimeout(s.current),[]),f.useCallback(()=>{window.clearTimeout(s.current),s.current=window.setTimeout(n,r)},[n,r])}function Pd(t,r){const n=rs(r);Sn(()=>{let s=0;if(t){const a=new ResizeObserver(()=>{cancelAnimationFrame(s),s=window.requestAnimationFrame(n)});return a.observe(t),()=>{window.cancelAnimationFrame(s),a.unobserve(t)}}},[t,n])}var SL=xL,eZ=gL,tZ=wL;const kL=f.forwardRef(({className:t,children:r,...n},s)=>e.jsxs(SL,{ref:s,className:ze("relative overflow-hidden",t),...n,children:[e.jsx(eZ,{className:"h-full w-full rounded-[inherit]",children:r}),e.jsx(AL,{}),e.jsx(tZ,{})]}));kL.displayName=SL.displayName;const AL=f.forwardRef(({className:t,orientation:r="vertical",...n},s)=>e.jsx(YN,{ref:s,orientation:r,className:ze("flex touch-none select-none transition-colors",r==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",r==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...n,children:e.jsx(bL,{className:"relative flex-1 rounded-full bg-border"})}));AL.displayName=YN.displayName;function ys({columns:t,visibleColumns:r,onToggleColumn:n,onShowAll:s,onHideAll:a,onReset:l,isSyncing:c=!1}){const[u,d]=f.useState(""),[h,x]=f.useState(!1),p=t.filter(S=>S.label.toLowerCase().includes(u.toLowerCase())),y=r.length,v=t.length,w=(S,k)=>{k.preventDefault(),k.stopPropagation(),n(S)},b=S=>{S.preventDefault(),S.stopPropagation(),s()},N=S=>{S.preventDefault(),S.stopPropagation(),a()},_=S=>{S.preventDefault(),S.stopPropagation(),l(),d("")};return e.jsxs(Cr,{open:h,onOpenChange:x,children:[e.jsx(Sr,{asChild:!0,children:e.jsxs(q,{variant:"outline",size:"sm",className:"h-9",children:[e.jsx(C7,{className:"h-4 w-4 mr-2"}),"Columns",c&&e.jsx(Nt,{className:"h-3 w-3 ml-2 animate-spin"}),!c&&e.jsxs("span",{className:"ml-2 text-xs text-muted-foreground",children:["(",y,"/",v,")"]})]})}),e.jsxs(wr,{align:"end",className:"w-[280px]",children:[e.jsxs(Tr,{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Column Visibility"}),e.jsxs("span",{className:"text-xs font-normal text-muted-foreground",children:[y," of ",v]})]}),e.jsx(Lr,{}),t.length>8&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"px-2 py-2",children:e.jsx(be,{placeholder:"Search columns...",value:u,onChange:S=>d(S.target.value),className:"h-8",onClick:S=>S.stopPropagation()})}),e.jsx(Lr,{})]}),e.jsxs("div",{className:"px-2 py-1 flex gap-1",children:[e.jsxs(q,{variant:"ghost",size:"sm",className:"h-7 flex-1 text-xs",onClick:b,children:[e.jsx(mr,{className:"h-3 w-3 mr-1"}),"Show All"]}),e.jsxs(q,{variant:"ghost",size:"sm",className:"h-7 flex-1 text-xs",onClick:N,children:[e.jsx(dP,{className:"h-3 w-3 mr-1"}),"Hide All"]})]}),e.jsx(Lr,{}),e.jsx(kL,{className:"h-[300px]",children:e.jsx("div",{className:"px-2 py-1 space-y-1",children:p.length===0?e.jsx("div",{className:"text-sm text-muted-foreground text-center py-4",children:"No columns found"}):p.map(S=>{const k=r.includes(S.key);return e.jsxs("div",{className:"flex items-center space-x-2 px-2 py-1.5 rounded-sm hover:bg-accent cursor-pointer",onClick:E=>w(S.key,E),children:[e.jsx(ag,{id:`column-${S.key}`,checked:k,onCheckedChange:()=>n(S.key),onClick:E=>E.stopPropagation()}),e.jsx(U,{htmlFor:`column-${S.key}`,className:"text-sm font-normal cursor-pointer flex-1",children:S.label})]},S.key)})})}),e.jsx(Lr,{}),e.jsx("div",{className:"px-2 py-2",children:e.jsxs(q,{variant:"outline",size:"sm",className:"w-full h-8",onClick:_,children:[e.jsx(v9,{className:"h-3 w-3 mr-2"}),"Reset to Default"]})})]})]})}const QA=[{key:"customer",label:"Customer"},{key:"type",label:"Type"},{key:"contact",label:"Contact"},{key:"status",label:"Status"},{key:"machines",label:"Machines"},{key:"total_spent",label:"Total Spent"},{key:"owner",label:"Owner"}],XA=[{id:"1",customer_type:"private",name:"John Smith",email:"john.smith@email.com",phone:"+1 (555) 123-4567",company_name:"ABC Corporation",status:"active",total_machines:5,created_at:"2024-01-01T00:00:00Z",updated_at:"2024-01-01T00:00:00Z"},{id:"2",customer_type:"company",name:"Tech Solutions Inc",contact_person:"Sarah Johnson",email:"sarah.j@company.com",phone:"+1 (555) 987-6543",company_name:"Tech Solutions Inc",status:"active",total_machines:3,created_at:"2024-01-01T00:00:00Z",updated_at:"2024-01-01T00:00:00Z"},{id:"3",customer_type:"company",name:"Global Enterprises",contact_person:"Mike Chen",email:"mike.chen@business.com",phone:"+1 (555) 456-7890",company_name:"Global Enterprises",status:"pending",total_machines:2,created_at:"2024-01-01T00:00:00Z",updated_at:"2024-01-01T00:00:00Z"},{id:"4",customer_type:"private",name:"Lisa Wang",email:"lisa.wang@corp.com",phone:"+1 (555) 321-0987",company_name:"Innovation Labs",status:"active",total_machines:8,created_at:"2024-01-01T00:00:00Z",updated_at:"2024-01-01T00:00:00Z"},{id:"5",customer_type:"private",name:"David Kim",email:"david.kim@startup.com",phone:"+1 (555) 654-3210",company_name:"StartupCo",status:"inactive",total_machines:1,created_at:"2024-01-01T00:00:00Z",updated_at:"2024-01-01T00:00:00Z"}],rZ=t=>e.jsx(Oe,{variant:Vr(t),className:Vr(t)==="outline"?Xs(t):void 0,children:Qs(t)});function nZ(){const t=er(),[r,n]=f.useState([]),[s,a]=f.useState(!0),[l,c]=f.useState(""),[u,d]=f.useState(""),[h,x]=f.useState(""),[p,y]=f.useState({owner:"",status:"",customer_type:""}),{visibleColumns:v,toggleColumn:w,isColumnVisible:b,resetColumns:N,showAllColumns:_,hideAllColumns:S,isSyncing:k}=ps("customers",gs(QA)),[E,A]=f.useState(!1),[O,z]=f.useState(null),[R,G]=f.useState(!1),[J,ie]=f.useState(null),[V,xe]=f.useState(!1),[pe,re]=f.useState(null),[M,B]=f.useState({customer_type:"private",name:"",contact_person:"",email:"",phone:"",phone2:"",fax:"",street_address:"",city:"",postal_code:"",company_name:"",vat_number:"",owner_id:void 0,ownership_notes:"",status:"active"}),[L,T]=f.useState([]),[F,I]=f.useState(!1),[Q,W]=f.useState(1),[ee,ye]=f.useState(1),[he,te]=f.useState(0),[De]=f.useState(25);f.useEffect(()=>{ne()},[u,p,Q]);const ne=async()=>{try{a(!0),x("");const H={page:Q,limit:De};u.trim()&&(H.search=u.trim()),p.status&&(H.status=p.status),p.owner&&(p.owner==="assigned"?H.owner_assigned="true":p.owner==="unassigned"?H.owner_assigned="false":H.owner_name=p.owner),p.customer_type&&(H.customer_type=p.customer_type);const Be=await de.getCustomers(H),st=Be.data||[],K=Be.pagination||{},Z=st.reduce((ke,Ae)=>{const je=ke.find(He=>He.id===Ae.id);return je?(je.total_machines=(je.total_machines||0)+(Ae.total_machines||0),je.total_spent=parseFloat(je.total_spent?.toString()||"0")+parseFloat(Ae.total_spent?.toString()||"0")):ke.push(Ae),ke},[]);n(Z),ye(K.pages||1),te(K.total||0)}catch(H){x("Failed to load customers"),console.error("Error fetching customers:",H),n(XA),ye(1),te(XA.length)}finally{a(!1)}},$e=H=>{t(`/customers/${H}`)},ge=H=>{if(H.total_machines&&H.total_machines>0){ie(H),G(!0);return}z(H),A(!0)},we=async()=>{if(O)try{await de.deleteCustomer(O.id),ne()}catch(H){console.error("Error deleting customer:",H),console.error("Failed to delete customer. Please try again.")}finally{A(!1),z(null)}},_e=async H=>{re(H),await Ye(),B({customer_type:H.customer_type||"private",name:H.name||"",contact_person:H.contact_person||"",email:H.email||"",phone:H.phone||"",phone2:H.phone2||"",fax:H.fax||"",street_address:H.street_address||"",city:H.city||"",postal_code:H.postal_code||"",company_name:H.company_name||"",vat_number:H.vat_number||"",owner_id:H.owner_id||void 0,ownership_notes:H.ownership_notes||"",status:H.status||"active"}),xe(!0)},Ye=async()=>{try{const H=await de.getUsers();T(H.data||[])}catch(H){console.error("Error fetching users:",H)}},ht=(H,Be)=>{B(st=>({...st,[H]:Be}))},Ve=async()=>{if(pe)try{I(!0);const H={customer_type:M.customer_type,name:M.name,status:M.status};M.contact_person&&(H.contact_person=M.contact_person),M.email&&(H.email=M.email),M.phone&&(H.phone=M.phone),M.phone2&&(H.phone2=M.phone2),M.fax&&(H.fax=M.fax),M.street_address&&(H.street_address=M.street_address),M.city&&(H.city=M.city),M.postal_code&&(H.postal_code=M.postal_code),M.company_name&&(H.company_name=M.company_name),M.vat_number&&(H.vat_number=M.vat_number),M.owner_id&&(H.owner_id=M.owner_id),M.ownership_notes&&(H.ownership_notes=M.ownership_notes),await de.updateCustomer(pe.id,H),await ne(),Ne.success("Customer updated successfully"),xe(!1)}catch(H){console.error("Error updating customer:",H),H.message?Ne.error(H.message):Ne.error("Failed to update customer. Please try again.")}finally{I(!1)}},lt=()=>{xe(!1),re(null),B({customer_type:"private",name:"",contact_person:"",email:"",phone:"",phone2:"",fax:"",street_address:"",city:"",postal_code:"",company_name:"",vat_number:"",owner_id:void 0,ownership_notes:"",status:"active"})},yt=()=>r.map(Be=>Be.owner_name).filter((Be,st,K)=>Be&&K.indexOf(Be)===st).sort(),Re=r;return s?e.jsx(gt,{children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Nt,{className:"h-6 w-6 animate-spin"}),e.jsx("span",{children:"Loading customers..."})]})})}):e.jsx(gt,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Customers"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage your customer database and relationships"})]}),e.jsxs(q,{onClick:()=>t("/add-customer"),children:[e.jsx(Vt,{className:"mr-2 h-4 w-4"}),"Add Customer"]})]}),e.jsxs(se,{children:[e.jsx(ue,{children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("div",{className:"relative",children:[s?e.jsx(Nt,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground animate-spin"}):e.jsx(nr,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),e.jsx(be,{placeholder:"Search customers... (press Enter to search)",value:l,onChange:H=>c(H.target.value),onKeyDown:H=>{H.key==="Enter"&&(H.preventDefault(),d(l),W(1))},className:"pl-10 pr-10 w-80",disabled:s}),l&&e.jsx("button",{onClick:()=>{c(""),d(""),W(1)},className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground transition-colors",children:e.jsx(hn,{className:"h-4 w-4"})})]}),e.jsx(ys,{columns:QA,visibleColumns:v,onToggleColumn:w,onShowAll:_,onHideAll:S,onReset:N,isSyncing:k}),e.jsxs(Cr,{children:[e.jsx(Sr,{asChild:!0,children:e.jsxs(q,{variant:"outline",children:[e.jsx(Ua,{className:"mr-2 h-4 w-4"}),"Filter"]})}),e.jsxs(wr,{align:"end",className:"w-56",children:[e.jsx(Tr,{children:"Filter by"}),e.jsx(Lr,{}),e.jsxs("div",{className:"p-2",children:[e.jsx(U,{className:"text-xs font-medium text-muted-foreground",children:"Status"}),e.jsxs(tt,{value:p.status,onValueChange:H=>{y(Be=>({...Be,status:H==="clear"?"":H})),W(1)},children:[e.jsx(Je,{className:"h-8",children:e.jsx(rt,{placeholder:"All statuses"})}),e.jsxs(et,{children:[e.jsx(Y,{value:"clear",children:"Clear Status"}),e.jsx(Y,{value:"active",children:"Active"}),e.jsx(Y,{value:"inactive",children:"Inactive"}),e.jsx(Y,{value:"pending",children:"Pending"})]})]})]}),e.jsxs("div",{className:"p-2",children:[e.jsx(U,{className:"text-xs font-medium text-muted-foreground",children:"Owner"}),e.jsxs(tt,{value:p.owner,onValueChange:H=>{y(Be=>({...Be,owner:H==="clear"?"":H})),W(1)},children:[e.jsx(Je,{className:"h-8",children:e.jsx(rt,{placeholder:"All owners"})}),e.jsxs(et,{children:[e.jsx(Y,{value:"clear",children:"Clear Owner"}),e.jsx(Y,{value:"assigned",children:"Assigned"}),e.jsx(Y,{value:"unassigned",children:"Unassigned"}),yt().map(H=>e.jsx(Y,{value:H||"",children:H},H))]})]})]}),e.jsxs("div",{className:"p-2",children:[e.jsx(U,{className:"text-xs font-medium text-muted-foreground",children:"Type"}),e.jsxs(tt,{value:p.customer_type,onValueChange:H=>{y(Be=>({...Be,customer_type:H==="clear"?"":H})),W(1)},children:[e.jsx(Je,{className:"h-8",children:e.jsx(rt,{placeholder:"All types"})}),e.jsxs(et,{children:[e.jsx(Y,{value:"clear",children:"Clear Type"}),e.jsx(Y,{value:"private",children:"Private Personnel"}),e.jsx(Y,{value:"company",children:"Company"})]})]})]}),e.jsx(Lr,{}),e.jsx(ct,{onClick:()=>{y({owner:"",status:"",customer_type:""}),W(1)},className:"text-center",children:"Clear Filters"})]})]}),u&&e.jsx("div",{className:"flex items-center space-x-2 text-sm text-muted-foreground",children:s?e.jsxs(e.Fragment,{children:[e.jsx(Nt,{className:"h-4 w-4 animate-spin"}),e.jsx("span",{children:"Searching..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(nr,{className:"h-4 w-4"}),e.jsx("span",{children:he>0?`Found ${he} customer${he!==1?"s":""} for "${u}"`:`No results found for "${u}"`})]})})]})})}),e.jsx(ae,{children:e.jsxs(ir,{children:[e.jsx(lr,{children:e.jsxs(ft,{children:[b("customer")&&e.jsx(me,{children:"Customer"}),b("type")&&e.jsx(me,{children:"Type"}),b("contact")&&e.jsx(me,{children:"Contact"}),b("status")&&e.jsx(me,{children:"Status"}),b("machines")&&e.jsx(me,{children:"Machines"}),b("total_spent")&&e.jsx(me,{children:"Total Spent"}),b("owner")&&e.jsx(me,{children:"Owner"}),e.jsx(me,{className:"text-right",children:"Actions"})]})}),e.jsx(or,{children:Re.map((H,Be)=>e.jsxs(ft,{className:"cursor-pointer hover:bg-muted/50",onClick:()=>t(`/customers/${H.id}`),children:[b("customer")&&e.jsx(oe,{children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:H.customer_type==="company"?H.company_name:H.name}),e.jsxs("div",{className:"text-sm text-muted-foreground flex items-center",children:[e.jsx(dl,{className:"mr-1 h-3 w-3"}),H.city||"N/A"]}),H.customer_type==="company"&&H.contact_person&&e.jsxs("div",{className:"text-sm text-muted-foreground flex items-center mt-1",children:[e.jsx(Ot,{className:"mr-1 h-3 w-3"}),H.contact_person]}),H.customer_type==="private"&&H.company_name&&e.jsxs("div",{className:"text-sm text-muted-foreground flex items-center mt-1",children:[e.jsx(Cs,{className:"mr-1 h-3 w-3"}),H.company_name]})]})}),b("type")&&e.jsx(oe,{children:e.jsx(Oe,{variant:H.customer_type==="company"?"default":"secondary",className:"text-xs",children:H.customer_type==="company"?"Company":"Private"})}),b("contact")&&e.jsx(oe,{children:e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsx(Ci,{className:"mr-1 h-3 w-3"}),H.email]}),e.jsxs("div",{className:"flex items-center text-sm text-muted-foreground",children:[e.jsx(Mi,{className:"mr-1 h-3 w-3"}),H.phone]})]})}),b("status")&&e.jsx(oe,{children:rZ(H.status||"active")}),b("machines")&&e.jsx(oe,{children:e.jsxs(Oe,{variant:"outline",children:[H.total_machines||0," machines"]})}),b("total_spent")&&e.jsx(oe,{className:"text-sm text-muted-foreground",children:H.total_spent?at(H.total_spent):"N/A"}),b("owner")&&e.jsx(oe,{className:"text-sm text-muted-foreground",children:H.owner_name||"N/A"}),e.jsx(oe,{className:"text-right",children:e.jsxs(Cr,{children:[e.jsx(Sr,{asChild:!0,children:e.jsx(q,{variant:"ghost",className:"h-8 w-8 p-0",onClick:st=>st.stopPropagation(),children:e.jsx(ss,{className:"h-4 w-4"})})}),e.jsxs(wr,{align:"end",children:[e.jsx(Tr,{children:"Actions"}),e.jsxs(ct,{onClick:st=>{st.stopPropagation(),$e(H.id)},children:[e.jsx(mr,{className:"mr-2 h-4 w-4"}),"View Details"]}),e.jsxs(ct,{onClick:st=>{st.stopPropagation(),_e(H)},children:[e.jsx(xr,{className:"mr-2 h-4 w-4"}),"Edit Customer"]}),e.jsx(Lr,{}),e.jsxs(ct,{className:"text-red-600",onClick:st=>{st.stopPropagation(),ge(H)},children:[e.jsx(br,{className:"mr-2 h-4 w-4"}),"Delete"]})]})]})})]},`customer-${H.id}-${Be}`))})]})})]}),ee>1&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",(Q-1)*De+1," to ",Math.min(Q*De,he)," of ",he," customers"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(q,{variant:"outline",size:"sm",onClick:()=>W(H=>Math.max(1,H-1)),disabled:Q===1,children:"Previous"}),e.jsxs("div",{className:"flex items-center space-x-1",children:[Array.from({length:Math.min(5,ee)},(H,Be)=>{const st=Be+1;return e.jsx(q,{variant:Q===st?"default":"outline",size:"sm",onClick:()=>W(st),className:"w-8 h-8 p-0",children:st},st)}),ee>5&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-muted-foreground",children:"..."}),e.jsx(q,{variant:Q===ee?"default":"outline",size:"sm",onClick:()=>W(ee),className:"w-8 h-8 p-0",children:ee})]})]}),e.jsx(q,{variant:"outline",size:"sm",onClick:()=>W(H=>Math.min(ee,H+1)),disabled:Q===ee,children:"Next"})]})]}),e.jsx(Vs,{open:E,onOpenChange:A,onConfirm:we,title:"Delete Customer",itemName:O?.name,itemType:"customer"}),e.jsx(iL,{open:R,onOpenChange:G,title:"Cannot Delete Customer",description:`Cannot delete ${J?.name} because they have ${J?.total_machines} machine(s) assigned. Please contact an administrator to reassign or remove the machines first.`,confirmText:"OK",showCancel:!1}),e.jsx(Ft,{open:V,onOpenChange:xe,children:e.jsxs(Rt,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(qt,{children:[e.jsx(Lt,{children:"Edit Customer"}),e.jsx(Ut,{children:"Update customer information and contact details"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"customer_type",children:"Customer Type"}),e.jsxs(tt,{value:M.customer_type,onValueChange:H=>ht("customer_type",H),children:[e.jsx(Je,{children:e.jsx(rt,{placeholder:"Select customer type"})}),e.jsxs(et,{children:[e.jsx(Y,{value:"private",children:"Private"}),e.jsx(Y,{value:"company",children:"Company"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"name",children:"Name *"}),e.jsx(be,{id:"name",value:M.name,onChange:H=>ht("name",H.target.value),placeholder:"Enter customer name",required:!0})]}),M.customer_type==="company"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"contact_person",children:"Contact Person"}),e.jsx(be,{id:"contact_person",value:M.contact_person||"",onChange:H=>ht("contact_person",H.target.value),placeholder:"Enter contact person name"})]}),M.customer_type==="company"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"company_name",children:"Company Name"}),e.jsx(be,{id:"company_name",value:M.company_name||"",onChange:H=>ht("company_name",H.target.value),placeholder:"Enter company name"})]}),M.customer_type==="company"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"vat_number",children:"VAT Number"}),e.jsx(be,{id:"vat_number",value:M.vat_number||"",onChange:H=>ht("vat_number",H.target.value),placeholder:"Enter VAT number"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"email",children:"Email"}),e.jsx(be,{id:"email",type:"email",value:M.email||"",onChange:H=>ht("email",H.target.value),placeholder:"Enter email address"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"phone",children:"Phone"}),e.jsx(be,{id:"phone",value:M.phone||"",onChange:H=>ht("phone",H.target.value),placeholder:"Enter phone number"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"phone2",children:"Phone 2"}),e.jsx(be,{id:"phone2",value:M.phone2||"",onChange:H=>ht("phone2",H.target.value),placeholder:"Enter secondary phone"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"fax",children:"Fax"}),e.jsx(be,{id:"fax",value:M.fax||"",onChange:H=>ht("fax",H.target.value),placeholder:"Enter fax number"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"street_address",children:"Street Address"}),e.jsx(be,{id:"street_address",value:M.street_address||"",onChange:H=>ht("street_address",H.target.value),placeholder:"Enter street address"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"city",children:"City"}),e.jsx(be,{id:"city",value:M.city||"",onChange:H=>ht("city",H.target.value),placeholder:"Enter city"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"postal_code",children:"Postal Code"}),e.jsx(be,{id:"postal_code",value:M.postal_code||"",onChange:H=>ht("postal_code",H.target.value),placeholder:"Enter postal code"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"owner_id",children:"Assigned Owner"}),e.jsxs(tt,{value:M.owner_id?.toString()||"none",onValueChange:H=>ht("owner_id",H==="none"?void 0:parseInt(H)),children:[e.jsx(Je,{children:e.jsx(rt,{placeholder:"Select owner"})}),e.jsxs(et,{children:[e.jsx(Y,{value:"none",children:"No owner assigned"}),L.map(H=>e.jsx(Y,{value:H.id.toString(),children:H.name},H.id))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"status",children:"Status"}),e.jsxs(tt,{value:M.status||"active",onValueChange:H=>ht("status",H),children:[e.jsx(Je,{children:e.jsx(rt,{placeholder:"Select status"})}),e.jsxs(et,{children:[e.jsx(Y,{value:"active",children:"Active"}),e.jsx(Y,{value:"inactive",children:"Inactive"}),e.jsx(Y,{value:"pending",children:"Pending"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"ownership_notes",children:"Ownership Notes"}),e.jsx(ar,{id:"ownership_notes",value:M.ownership_notes||"",onChange:H=>ht("ownership_notes",H.target.value),placeholder:"Enter any additional notes",rows:3})]})]}),e.jsxs(Dr,{className:"flex justify-end space-x-2",children:[e.jsxs(q,{variant:"outline",onClick:lt,disabled:F,children:[e.jsx(hn,{className:"mr-2 h-4 w-4"}),"Cancel"]}),e.jsx(q,{onClick:Ve,disabled:F||!M.name.trim(),children:F?e.jsxs(e.Fragment,{children:[e.jsx(Nt,{className:"mr-2 h-4 w-4 animate-spin"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ul,{className:"mr-2 h-4 w-4"}),"Save Changes"]})})]})]})})]})})}var og="Tabs",[sZ,tge]=Ks(og,[Jp]),EL=Jp(),[aZ,QN]=sZ(og),ML=f.forwardRef((t,r)=>{const{__scopeTabs:n,value:s,onValueChange:a,defaultValue:l,orientation:c="horizontal",dir:u,activationMode:d="automatic",...h}=t,x=Jm(u),[p,y]=hl({prop:s,onChange:a,defaultProp:l??"",caller:og});return e.jsx(aZ,{scope:n,baseId:as(),value:p,onValueChange:y,orientation:c,dir:x,activationMode:d,children:e.jsx(Mt.div,{dir:x,"data-orientation":c,...h,ref:r})})});ML.displayName=og;var TL="TabsList",OL=f.forwardRef((t,r)=>{const{__scopeTabs:n,loop:s=!0,...a}=t,l=QN(TL,n),c=EL(n);return e.jsx(VR,{asChild:!0,...c,orientation:l.orientation,dir:l.dir,loop:s,children:e.jsx(Mt.div,{role:"tablist","aria-orientation":l.orientation,...a,ref:r})})});OL.displayName=TL;var PL="TabsTrigger",DL=f.forwardRef((t,r)=>{const{__scopeTabs:n,value:s,disabled:a=!1,...l}=t,c=QN(PL,n),u=EL(n),d=IL(c.baseId,s),h=$L(c.baseId,s),x=s===c.value;return e.jsx(YR,{asChild:!0,...u,focusable:!a,active:x,children:e.jsx(Mt.button,{type:"button",role:"tab","aria-selected":x,"aria-controls":h,"data-state":x?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:d,...l,ref:r,onMouseDown:bt(t.onMouseDown,p=>{!a&&p.button===0&&p.ctrlKey===!1?c.onValueChange(s):p.preventDefault()}),onKeyDown:bt(t.onKeyDown,p=>{[" ","Enter"].includes(p.key)&&c.onValueChange(s)}),onFocus:bt(t.onFocus,()=>{const p=c.activationMode!=="manual";!x&&!a&&p&&c.onValueChange(s)})})})});DL.displayName=PL;var RL="TabsContent",LL=f.forwardRef((t,r)=>{const{__scopeTabs:n,value:s,forceMount:a,children:l,...c}=t,u=QN(RL,n),d=IL(u.baseId,s),h=$L(u.baseId,s),x=s===u.value,p=f.useRef(x);return f.useEffect(()=>{const y=requestAnimationFrame(()=>p.current=!1);return()=>cancelAnimationFrame(y)},[]),e.jsx(vs,{present:a||x,children:({present:y})=>e.jsx(Mt.div,{"data-state":x?"active":"inactive","data-orientation":u.orientation,role:"tabpanel","aria-labelledby":d,hidden:!y,id:h,tabIndex:0,...c,ref:r,style:{...t.style,animationDuration:p.current?"0s":void 0},children:y&&l})})});LL.displayName=RL;function IL(t,r){return`${t}-trigger-${r}`}function $L(t,r){return`${t}-content-${r}`}var iZ=ML,FL=OL,qL=DL,UL=LL;const Ys=iZ,Ps=f.forwardRef(({className:t,...r},n)=>e.jsx(FL,{ref:n,className:ze("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...r}));Ps.displayName=FL.displayName;const Kt=f.forwardRef(({className:t,...r},n)=>e.jsx(qL,{ref:n,className:ze("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...r}));Kt.displayName=qL.displayName;const Gt=f.forwardRef(({className:t,...r},n)=>e.jsx(UL,{ref:n,className:ze("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...r}));Gt.displayName=UL.displayName;function jt(t){if(!t)return"N/A";const r=typeof t=="string"?new Date(t):t;if(isNaN(r.getTime()))return"Invalid Date";const n=r.getDate().toString().padStart(2,"0"),s=(r.getMonth()+1).toString().padStart(2,"0"),a=r.getFullYear();return`${n}.${s}.${a}`}function gn(t){if(!t)return"N/A";const r=typeof t=="string"?new Date(t):t;if(isNaN(r.getTime()))return"Invalid Date";const n=r.getDate().toString().padStart(2,"0"),s=(r.getMonth()+1).toString().padStart(2,"0"),a=r.getFullYear(),l=r.getHours().toString().padStart(2,"0"),c=r.getMinutes().toString().padStart(2,"0");return`${n}.${s}.${a} ${l}:${c}`}function tx(t){return t?(typeof t=="string"?new Date(t):t)<new Date:!1}function no(t){if(!t)return"";const r=typeof t=="string"?new Date(t):t;return isNaN(r.getTime())?"":r.toISOString().split("T")[0]}function Yo(t){const r=t.split(".");if(r.length!==3)return null;const n=parseInt(r[0],10),s=parseInt(r[1],10)-1,a=parseInt(r[2],10),l=new Date(a,s,n);return l.getDate()!==n||l.getMonth()!==s||l.getFullYear()!==a?null:l}function lZ(){const{id:t}=oi(),r=er(),[n,s]=f.useState(null),[a,l]=f.useState([]),[c,u]=f.useState([]),[d,h]=f.useState([]),[x,p]=f.useState(!0),[y,v]=f.useState(null),[w,b]=f.useState(!1),[N,_]=f.useState(!1),[S,k]=f.useState(!1),[E,A]=f.useState(!1),[O,z]=f.useState({customer_type:"private",name:"",contact_person:"",email:"",phone:"",phone2:"",fax:"",street_address:"",city:"",postal_code:"",company_name:"",vat_number:"",owner_id:void 0,ownership_notes:"",status:"active"}),[R,G]=f.useState([]),[J,ie]=f.useState(!1);f.useEffect(()=>{t&&V()},[t]);const V=async()=>{try{p(!0),v(null);const ne=await de.getCustomer(t);s(ne.data);const $e=await de.getCustomerMachines(t);l($e.data||[]);const ge=await de.getCustomerWorkOrders(t);u(ge.data||[]);const we=await de.getCustomerWarrantyWorkOrders(t);h(we.data||[])}catch(ne){v("Failed to load customer details."),console.error("Error fetching customer details:",ne)}finally{p(!1)}},xe=()=>{if(n){if(a&&a.length>0){_(!0);return}b(!0)}},pe=async()=>{if(n)try{await de.deleteCustomer(n.id),r("/customers"),Ne.success("Customer deleted successfully")}catch(ne){console.error("Error deleting customer:",ne),ne.message?Ne.error(ne.message):Ne.error("Failed to delete customer. Please try again.")}finally{b(!1)}},re=async()=>{n&&(await M(),z({customer_type:n.customer_type||"private",name:n.name||"",contact_person:n.contact_person||"",email:n.email||"",phone:n.phone||"",phone2:n.phone2||"",fax:n.fax||"",street_address:n.street_address||"",city:n.city||"",postal_code:n.postal_code||"",company_name:n.company_name||"",vat_number:n.vat_number||"",owner_id:n.owner_id||void 0,ownership_notes:n.ownership_notes||"",status:n.status||"active"}),A(!0))},M=async()=>{try{const ne=await de.getUsers();G(ne.data||[])}catch(ne){console.error("Error fetching users:",ne)}},B=(ne,$e)=>{z(ge=>({...ge,[ne]:$e}))},L=async()=>{if(n)try{ie(!0);const ne={customer_type:O.customer_type,name:O.name,status:O.status};O.contact_person&&(ne.contact_person=O.contact_person),O.email&&(ne.email=O.email),O.phone&&(ne.phone=O.phone),O.phone2&&(ne.phone2=O.phone2),O.fax&&(ne.fax=O.fax),O.street_address&&(ne.street_address=O.street_address),O.city&&(ne.city=O.city),O.postal_code&&(ne.postal_code=O.postal_code),O.company_name&&(ne.company_name=O.company_name),O.vat_number&&(ne.vat_number=O.vat_number),O.owner_id&&(ne.owner_id=O.owner_id),O.ownership_notes&&(ne.ownership_notes=O.ownership_notes),await de.updateCustomer(n.id,ne),await V(),Ne.success("Customer updated successfully"),A(!1)}catch(ne){console.error("Error updating customer:",ne),Ne.error("Failed to update customer. Please try again.")}finally{ie(!1)}},T=()=>{A(!1),z({customer_type:"private",name:"",contact_person:"",email:"",phone:"",phone2:"",fax:"",street_address:"",city:"",postal_code:"",company_name:"",vat_number:"",owner_id:void 0,ownership_notes:"",status:"active"})},F=(ne,$e)=>{if(!$e)return e.jsx(Oe,{variant:"secondary",children:"No Warranty"});const ge=new Date($e),we=new Date,_e=Math.ceil((ge.getTime()-we.getTime())/(1e3*60*60*24));return!ne||_e<0?e.jsx(Oe,{variant:"destructive",children:"Expired"}):_e<=90?e.jsx(Oe,{variant:"outline",className:"border-orange-300 text-orange-700",children:"Expires Soon"}):e.jsx(Oe,{variant:"outline",className:"border-green-300 text-green-700",children:"Active"})},I=ne=>{const ge={pending:Zt,in_progress:ks,completed:Ar,cancelled:wn}[ne]||Zt;return e.jsxs(Oe,{variant:Vr(ne),className:`flex items-center gap-1 ${Vr(ne)==="outline"?Xs(ne):""}`,children:[e.jsx(ge,{className:"h-3 w-3"}),Qs(ne)]})},Q=ne=>{const $e={low:{color:"default"},medium:{color:"outline"},high:{color:"destructive"}},ge=$e[ne]||$e.medium;return e.jsx(Oe,{variant:ge.color,children:ne})},W=ne=>ne?e.jsx(Oe,{variant:ne==="new"?"default":"outline",children:ne}):e.jsx(Oe,{variant:"secondary",children:"N/A"});if(x)return e.jsx(gt,{children:e.jsxs("div",{className:"flex items-center justify-center h-64",children:[e.jsx(Nt,{className:"h-8 w-8 animate-spin"}),e.jsx("span",{className:"ml-2",children:"Loading customer details..."})]})});if(y)return e.jsx(gt,{children:e.jsxs(On,{variant:"destructive",children:[e.jsx(vr,{className:"h-4 w-4"}),e.jsx(Bn,{children:"Error"}),e.jsx(Pn,{children:y})]})});if(!n)return e.jsx(gt,{children:e.jsxs(On,{variant:"destructive",children:[e.jsx(vr,{className:"h-4 w-4"}),e.jsx(Bn,{children:"Not Found"}),e.jsx(Pn,{children:"Customer not found."})]})});const ee=a.length,ye=c.length,he=d.length,te=a.filter(ne=>ne.is_sale&&ne.sale_price).reduce((ne,$e)=>ne+(parseFloat($e.sale_price?.toString()||"0")||0),0),De=a.filter(ne=>ne.warranty_active).length;return e.jsx(gt,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(q,{variant:"ghost",onClick:()=>r(-1),className:"mr-2",children:e.jsx(Cn,{className:"h-4 w-4"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:n.customer_type==="company"?n.company_name:n.name}),e.jsx(Oe,{variant:n.customer_type==="company"?"default":"secondary",className:"text-sm",children:n.customer_type==="company"?"Company":"Private"})]}),e.jsxs("p",{className:"text-muted-foreground",children:[n.customer_type==="company"&&n.contact_person&&`${n.contact_person} • `,n.customer_type==="private"&&n.company_name&&`${n.company_name} • `,"Customer since ",new Date(n.created_at).getFullYear()]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(q,{variant:"outline",onClick:re,children:[e.jsx(xr,{className:"mr-2 h-4 w-4"}),"Edit Customer"]}),e.jsxs(q,{variant:"destructive",onClick:xe,children:[e.jsx(br,{className:"mr-2 h-4 w-4"}),"Delete Customer"]})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-5",children:[e.jsxs(se,{children:[e.jsxs(ue,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(fe,{className:"text-sm font-medium",children:"Total Machines"}),e.jsx(Ct,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(ae,{children:[e.jsx("div",{className:"text-2xl font-bold",children:ee}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Machines owned"})]})]}),e.jsxs(se,{children:[e.jsxs(ue,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(fe,{className:"text-sm font-medium",children:"Active Warranty"}),e.jsx(Hs,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(ae,{children:[e.jsx("div",{className:"text-2xl font-bold",children:De}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Under warranty"})]})]}),e.jsxs(se,{children:[e.jsxs(ue,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(fe,{className:"text-sm font-medium",children:"Work Orders"}),e.jsx(Ct,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(ae,{children:[e.jsx("div",{className:"text-2xl font-bold",children:ye}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Total repairs"})]})]}),e.jsxs(se,{children:[e.jsxs(ue,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(fe,{className:"text-sm font-medium",children:"Warranty Repairs"}),e.jsx(ei,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(ae,{children:[e.jsx("div",{className:"text-2xl font-bold",children:he}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Warranty repairs"})]})]}),e.jsxs(se,{children:[e.jsxs(ue,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(fe,{className:"text-sm font-medium",children:"Total Spent"}),e.jsx(Xm,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(ae,{children:[e.jsx("div",{className:"text-2xl font-bold",children:at(te)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Total purchases"})]})]})]}),e.jsxs(Ys,{defaultValue:"details",className:"space-y-4",children:[e.jsxs(Ps,{children:[e.jsx(Kt,{value:"details",children:"Customer Details"}),e.jsxs(Kt,{value:"machines",children:["Machines (",a.length,")"]}),e.jsxs(Kt,{value:"work-orders",children:["Work Orders (",c.length,")"]}),e.jsxs(Kt,{value:"warranty-work-orders",children:["Warranty Work Orders (",d.length,")"]})]}),e.jsx(Gt,{value:"details",className:"space-y-4",children:e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs(se,{children:[e.jsx(ue,{children:e.jsxs(fe,{className:"flex items-center gap-2",children:[e.jsx(Ot,{className:"h-5 w-5"}),n.customer_type==="company"?"Contact Information":"Personal Information"]})}),e.jsx(ae,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.customer_type==="company"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Company Name"}),e.jsx("p",{className:"text-sm",children:n.company_name||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Contact Person"}),e.jsx("p",{className:"text-sm",children:n.contact_person||"N/A"})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Full Name"}),e.jsx("p",{className:"text-sm",children:n.name})]}),n.company_name&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Company"}),e.jsx("p",{className:"text-sm",children:n.company_name})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Email"}),e.jsx("p",{className:"text-sm",children:n.email||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Phone"}),e.jsx("p",{className:"text-sm",children:n.phone||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Phone 2"}),e.jsx("p",{className:"text-sm",children:n.phone2||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Fax"}),e.jsx("p",{className:"text-sm",children:n.fax||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Created"}),e.jsx("p",{className:"text-sm",children:jt(n.created_at)})]})]})})]}),e.jsxs(se,{children:[e.jsx(ue,{children:e.jsxs(fe,{className:"flex items-center gap-2",children:[e.jsx(cl,{className:"h-5 w-5"}),n.customer_type==="company"?"Business Information":"Address Information"]})}),e.jsx(ae,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.customer_type==="company"&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"VAT Number"}),e.jsx("p",{className:"text-sm",children:n.vat_number||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Address"}),e.jsx("p",{className:"text-sm",children:n.street_address||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"City"}),e.jsx("p",{className:"text-sm",children:n.city||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Postal Code"}),e.jsx("p",{className:"text-sm",children:n.postal_code||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Owner"}),e.jsx("p",{className:"text-sm",children:n.owner_name||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Assigned At"}),e.jsx("p",{className:"text-sm",children:n.assigned_at?jt(n.assigned_at):"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Last Updated"}),e.jsx("p",{className:"text-sm",children:jt(n.updated_at)})]})]})})]}),n.ownership_notes&&e.jsxs(se,{children:[e.jsx(ue,{children:e.jsxs(fe,{className:"flex items-center gap-2",children:[e.jsx(Ot,{className:"h-5 w-5"}),"Ownership Information"]})}),e.jsx(ae,{children:e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Ownership Notes"}),e.jsx("p",{className:"text-sm bg-muted p-3 rounded mt-2",children:n.ownership_notes})]})})]})]})}),e.jsx(Gt,{value:"machines",className:"space-y-4",children:e.jsxs(se,{children:[e.jsx(ue,{children:e.jsxs(fe,{className:"flex items-center gap-2",children:[e.jsx(Ct,{className:"h-5 w-5"}),"Customer Machines (",a.length,")"]})}),e.jsx(ae,{children:a.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Ct,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"No machines found for this customer."})]}):e.jsxs(ir,{children:[e.jsx(lr,{children:e.jsxs(ft,{children:[e.jsx(me,{children:"Serial Number"}),e.jsx(me,{children:"Model"}),e.jsx(me,{children:"Manufacturer"}),e.jsx(me,{children:"Condition"}),e.jsx(me,{children:"Purchase Date"}),e.jsx(me,{children:"Warranty Status"}),e.jsx(me,{children:"Sale Price"}),e.jsx(me,{className:"text-right",children:"Actions"})]})}),e.jsx(or,{children:a.map(ne=>e.jsxs(ft,{children:[e.jsx(oe,{className:"font-medium",children:e.jsx(q,{variant:"link",className:"p-0 h-auto font-medium",onClick:()=>r(`/machines/${ne.id}`),children:ne.serial_number})}),e.jsx(oe,{children:ne.model_name}),e.jsx(oe,{children:ne.manufacturer}),e.jsx(oe,{children:W(ne.machine_condition)}),e.jsx(oe,{children:ne.purchase_date?jt(ne.purchase_date):"N/A"}),e.jsx(oe,{children:F(ne.warranty_active,ne.warranty_expiry_date)}),e.jsx(oe,{children:ne.sale_price?at(ne.sale_price):"N/A"}),e.jsx(oe,{className:"text-right",children:e.jsxs(Cr,{children:[e.jsx(Sr,{asChild:!0,children:e.jsx(q,{variant:"ghost",className:"h-8 w-8 p-0",children:e.jsx(mr,{className:"h-4 w-4"})})}),e.jsxs(wr,{align:"end",children:[e.jsx(Tr,{children:"Actions"}),e.jsxs(ct,{onClick:()=>r(`/machines/${ne.id}`),children:[e.jsx(mr,{className:"mr-2 h-4 w-4"})," View Machine Details"]}),e.jsxs(ct,{onClick:()=>r(`/machines/${ne.id}`),children:[e.jsx(xr,{className:"mr-2 h-4 w-4"})," Edit Machine"]})]})]})})]},ne.id))})]})})]})}),e.jsx(Gt,{value:"work-orders",className:"space-y-4",children:e.jsxs(se,{children:[e.jsx(ue,{children:e.jsxs(fe,{className:"flex items-center gap-2",children:[e.jsx(Ct,{className:"h-5 w-5"}),"Work Orders (",c.length,")"]})}),e.jsx(ae,{children:c.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Ct,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"No work orders found for this customer."})]}):e.jsxs(ir,{children:[e.jsx(lr,{children:e.jsxs(ft,{children:[e.jsx(me,{children:"ID"}),e.jsx(me,{children:"Status"}),e.jsx(me,{children:"Priority"}),e.jsx(me,{children:"Description"}),e.jsx(me,{children:"Machine"}),e.jsx(me,{children:"Technician"}),e.jsx(me,{children:"Created"}),e.jsx(me,{children:"Total Cost"}),e.jsx(me,{className:"text-right",children:"Actions"})]})}),e.jsx(or,{children:c.map(ne=>e.jsxs(ft,{children:[e.jsx(oe,{className:"font-medium",children:e.jsxs(q,{variant:"link",className:"p-0 h-auto",onClick:()=>r(`/work-orders/${ne.id}`),children:["#",ne.formatted_number||ne.id]})}),e.jsx(oe,{children:I(ne.status)}),e.jsx(oe,{children:Q(ne.priority)}),e.jsx(oe,{className:"max-w-xs truncate",children:ne.description||"No description"}),e.jsx(oe,{children:e.jsx(q,{variant:"link",className:"p-0 h-auto text-xs",onClick:()=>r(`/machines/${ne.machine_id}`),children:ne.serial_number})}),e.jsx(oe,{children:ne.technician_name||"Unassigned"}),e.jsx(oe,{children:jt(ne.created_at)}),e.jsx(oe,{children:ne.quote_total?at(ne.quote_total):"N/A"}),e.jsx(oe,{className:"text-right",children:e.jsxs(Cr,{children:[e.jsx(Sr,{asChild:!0,children:e.jsx(q,{variant:"ghost",className:"h-8 w-8 p-0",children:e.jsx(mr,{className:"h-4 w-4"})})}),e.jsxs(wr,{align:"end",children:[e.jsx(Tr,{children:"Actions"}),e.jsxs(ct,{onClick:()=>r(`/work-orders/${ne.id}`),children:[e.jsx(mr,{className:"mr-2 h-4 w-4"})," View Details"]}),e.jsxs(ct,{onClick:()=>r(`/work-orders/${ne.id}`),children:[e.jsx(xr,{className:"mr-2 h-4 w-4"})," Edit Work Order"]})]})]})})]},ne.id))})]})})]})}),e.jsx(Gt,{value:"warranty-work-orders",className:"space-y-4",children:e.jsxs(se,{children:[e.jsx(ue,{children:e.jsxs(fe,{className:"flex items-center gap-2",children:[e.jsx(ei,{className:"h-5 w-5"}),"Warranty Work Orders (",d.length,")"]})}),e.jsx(ae,{children:d.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(ei,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"No warranty work orders found for this customer."})]}):e.jsxs(ir,{children:[e.jsx(lr,{children:e.jsxs(ft,{children:[e.jsx(me,{children:"ID"}),e.jsx(me,{children:"Status"}),e.jsx(me,{children:"Priority"}),e.jsx(me,{children:"Description"}),e.jsx(me,{children:"Machine"}),e.jsx(me,{children:"Technician"}),e.jsx(me,{children:"Created"}),e.jsx(me,{children:"Total Cost"}),e.jsx(me,{className:"text-right",children:"Actions"})]})}),e.jsx(or,{children:d.map(ne=>e.jsxs(ft,{children:[e.jsx(oe,{className:"font-medium",children:e.jsxs(q,{variant:"link",className:"p-0 h-auto",onClick:()=>r(`/warranty-work-orders/${ne.id}`),children:["#",ne.formatted_number||ne.id]})}),e.jsx(oe,{children:I(ne.status)}),e.jsx(oe,{children:Q(ne.priority)}),e.jsx(oe,{className:"max-w-xs truncate",children:ne.description||"No description"}),e.jsx(oe,{children:e.jsx(q,{variant:"link",className:"p-0 h-auto text-xs",onClick:()=>r(`/machines/${ne.machine_id}`),children:ne.serial_number})}),e.jsx(oe,{children:ne.technician_name||"Unassigned"}),e.jsx(oe,{children:jt(ne.created_at)}),e.jsx(oe,{children:ne.quote_total?at(ne.quote_total):"N/A"}),e.jsx(oe,{className:"text-right",children:e.jsxs(Cr,{children:[e.jsx(Sr,{asChild:!0,children:e.jsx(q,{variant:"ghost",className:"h-8 w-8 p-0",children:e.jsx(mr,{className:"h-4 w-4"})})}),e.jsxs(wr,{align:"end",children:[e.jsx(Tr,{children:"Actions"}),e.jsxs(ct,{onClick:()=>r(`/warranty-work-orders/${ne.id}`),children:[e.jsx(mr,{className:"mr-2 h-4 w-4"})," View Details"]}),e.jsxs(ct,{onClick:()=>r(`/warranty-work-orders/${ne.id}`),children:[e.jsx(xr,{className:"mr-2 h-4 w-4"})," Edit Work Order"]})]})]})})]},ne.id))})]})})]})})]}),e.jsx(Vs,{open:w,onOpenChange:b,onConfirm:pe,title:"Delete Customer",itemName:n?.name,itemType:"customer"}),e.jsx(iL,{open:N,onOpenChange:_,title:"Cannot Delete Customer",description:`Cannot delete ${n?.name} because they have ${a.length} machine(s) assigned. Please contact an administrator to reassign or remove the machines first.`,confirmText:"OK",showCancel:!1}),e.jsx(Ft,{open:E,onOpenChange:A,children:e.jsxs(Rt,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(qt,{children:[e.jsx(Lt,{children:"Edit Customer"}),e.jsx(Ut,{children:"Update customer information and contact details"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"customer_type",children:"Customer Type"}),e.jsxs(tt,{value:O.customer_type,onValueChange:ne=>B("customer_type",ne),children:[e.jsx(Je,{children:e.jsx(rt,{placeholder:"Select customer type"})}),e.jsxs(et,{children:[e.jsx(Y,{value:"private",children:"Private"}),e.jsx(Y,{value:"company",children:"Company"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"name",children:"Name *"}),e.jsx(be,{id:"name",value:O.name,onChange:ne=>B("name",ne.target.value),placeholder:"Enter customer name",required:!0})]}),O.customer_type==="company"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"contact_person",children:"Contact Person"}),e.jsx(be,{id:"contact_person",value:O.contact_person||"",onChange:ne=>B("contact_person",ne.target.value),placeholder:"Enter contact person name"})]}),O.customer_type==="company"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"company_name",children:"Company Name"}),e.jsx(be,{id:"company_name",value:O.company_name||"",onChange:ne=>B("company_name",ne.target.value),placeholder:"Enter company name"})]}),O.customer_type==="company"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"vat_number",children:"VAT Number"}),e.jsx(be,{id:"vat_number",value:O.vat_number||"",onChange:ne=>B("vat_number",ne.target.value),placeholder:"Enter VAT number"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"email",children:"Email"}),e.jsx(be,{id:"email",type:"email",value:O.email||"",onChange:ne=>B("email",ne.target.value),placeholder:"Enter email address"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"phone",children:"Phone"}),e.jsx(be,{id:"phone",value:O.phone||"",onChange:ne=>B("phone",ne.target.value),placeholder:"Enter phone number"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"phone2",children:"Phone 2"}),e.jsx(be,{id:"phone2",value:O.phone2||"",onChange:ne=>B("phone2",ne.target.value),placeholder:"Enter secondary phone"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"fax",children:"Fax"}),e.jsx(be,{id:"fax",value:O.fax||"",onChange:ne=>B("fax",ne.target.value),placeholder:"Enter fax number"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"street_address",children:"Street Address"}),e.jsx(be,{id:"street_address",value:O.street_address||"",onChange:ne=>B("street_address",ne.target.value),placeholder:"Enter street address"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"city",children:"City"}),e.jsx(be,{id:"city",value:O.city||"",onChange:ne=>B("city",ne.target.value),placeholder:"Enter city"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"postal_code",children:"Postal Code"}),e.jsx(be,{id:"postal_code",value:O.postal_code||"",onChange:ne=>B("postal_code",ne.target.value),placeholder:"Enter postal code"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"owner_id",children:"Assigned Owner"}),e.jsxs(tt,{value:O.owner_id?.toString()||"none",onValueChange:ne=>B("owner_id",ne==="none"?void 0:parseInt(ne)),children:[e.jsx(Je,{children:e.jsx(rt,{placeholder:"Select owner"})}),e.jsxs(et,{children:[e.jsx(Y,{value:"none",children:"No owner assigned"}),R.map(ne=>e.jsx(Y,{value:ne.id.toString(),children:ne.name},ne.id))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"status",children:"Status"}),e.jsxs(tt,{value:O.status||"active",onValueChange:ne=>B("status",ne),children:[e.jsx(Je,{children:e.jsx(rt,{placeholder:"Select status"})}),e.jsxs(et,{children:[e.jsx(Y,{value:"active",children:"Active"}),e.jsx(Y,{value:"inactive",children:"Inactive"}),e.jsx(Y,{value:"pending",children:"Pending"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"ownership_notes",children:"Ownership Notes"}),e.jsx(ar,{id:"ownership_notes",value:O.ownership_notes||"",onChange:ne=>B("ownership_notes",ne.target.value),placeholder:"Enter any additional notes",rows:3})]})]}),e.jsxs(Dr,{className:"flex justify-end space-x-2",children:[e.jsxs(q,{variant:"outline",onClick:T,disabled:J,children:[e.jsx(hn,{className:"mr-2 h-4 w-4"}),"Cancel"]}),e.jsx(q,{onClick:L,disabled:J||!O.name.trim(),children:J?e.jsxs(e.Fragment,{children:[e.jsx(Nt,{className:"mr-2 h-4 w-4 animate-spin"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ul,{className:"mr-2 h-4 w-4"}),"Save Changes"]})})]})]})})]})})}function oZ(){const t=er(),[r,n]=f.useState([]),[s,a]=f.useState(!1),[l,c]=f.useState(!1),[u,d]=f.useState({customer_type:"private",name:"",contact_person:"",email:"",phone:"",phone2:"",fax:"",street_address:"",city:"",postal_code:"",company_name:"",vat_number:"",owner_id:void 0,ownership_notes:"",status:"active"});f.useEffect(()=>{(async()=>{try{a(!0);const v=await de.getUsers();n(v.data||[])}catch(v){console.error("Error fetching users:",v),Ne.error("Failed to load users")}finally{a(!1)}})()},[]);const h=(y,v)=>{d(w=>({...w,[y]:y==="owner_id"?v==="none"?void 0:parseInt(v):v}))},x=async y=>{y.preventDefault();try{c(!0);let v={...u};u.customer_type==="company"?(v.name=u.company_name,v.contact_person||delete v.contact_person):(v.company_name||delete v.company_name,delete v.contact_person),v=Object.fromEntries(Object.entries(v).filter(([w,b])=>b!==""&&b!==void 0)),await de.createCustomer(v),Ne.success("Customer created successfully!"),t("/customers")}catch(v){console.error("Error creating customer:",v),Ne.error("Failed to create customer. Please try again.")}finally{c(!1)}},p=()=>{t("/customers")};return e.jsx(gt,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(q,{variant:"ghost",size:"icon",onClick:p,className:"h-10 w-10",children:e.jsx(Cn,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Add New Customer"}),e.jsx("p",{className:"text-muted-foreground",children:"Create a new customer profile with their contact information and company details"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(q,{variant:"outline",onClick:p,children:[e.jsx(hn,{className:"mr-2 h-4 w-4"}),"Cancel"]}),e.jsxs(q,{type:"submit",form:"customer-form",disabled:l,children:[e.jsx(ul,{className:"mr-2 h-4 w-4"}),l?"Creating...":"Create Customer"]})]})]}),e.jsxs("form",{id:"customer-form",onSubmit:x,className:"space-y-6",children:[e.jsxs(se,{children:[e.jsx(ue,{children:e.jsx(fe,{children:"Customer Type"})}),e.jsx(ae,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"customer_type",children:"Customer Type *"}),e.jsxs(tt,{value:u.customer_type,onValueChange:y=>h("customer_type",y),children:[e.jsx(Je,{children:e.jsx(rt,{placeholder:"Select customer type"})}),e.jsxs(et,{children:[e.jsx(Y,{value:"private",children:"Private Personnel"}),e.jsx(Y,{value:"company",children:"Company"})]})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(se,{children:[e.jsx(ue,{children:e.jsxs(fe,{className:"flex items-center space-x-2",children:[e.jsx(Ot,{className:"h-5 w-5"}),e.jsx("span",{children:"Basic Information"})]})}),e.jsxs(ae,{className:"space-y-4",children:[u.customer_type==="private"?e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"name",children:"Full Name *"}),e.jsx(be,{id:"name",value:u.name,onChange:y=>h("name",y.target.value),placeholder:"Enter full name",required:!0})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"company_name",children:"Company Name *"}),e.jsxs("div",{className:"relative",children:[e.jsx(cl,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),e.jsx(be,{id:"company_name",value:u.company_name||"",onChange:y=>h("company_name",y.target.value),placeholder:"Enter company name",className:"pl-10",required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"contact_person",children:"Contact Person *"}),e.jsx(be,{id:"contact_person",value:u.contact_person||"",onChange:y=>h("contact_person",y.target.value),placeholder:"Enter contact person name",required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"email",children:"Email Address *"}),e.jsxs("div",{className:"relative",children:[e.jsx(Ci,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),e.jsx(be,{id:"email",type:"email",value:u.email,onChange:y=>h("email",y.target.value),placeholder:"Enter email address",className:"pl-10",required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"phone",children:"Phone Number"}),e.jsxs("div",{className:"relative",children:[e.jsx(Mi,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),e.jsx(be,{id:"phone",type:"tel",value:u.phone,onChange:y=>h("phone",y.target.value),placeholder:"Enter phone number",className:"pl-10"})]})]}),u.customer_type==="private"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"company_name",children:"Company Name (Optional)"}),e.jsxs("div",{className:"relative",children:[e.jsx(cl,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),e.jsx(be,{id:"company_name",value:u.company_name||"",onChange:y=>h("company_name",y.target.value),placeholder:"Enter company name (if applicable)",className:"pl-10"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"vat_number",children:"VAT Number"}),e.jsx(be,{id:"vat_number",value:u.vat_number||"",onChange:y=>h("vat_number",y.target.value),placeholder:"Enter VAT number"})]})]})]}),e.jsxs(se,{children:[e.jsx(ue,{children:e.jsxs(fe,{className:"flex items-center space-x-2",children:[e.jsx(dl,{className:"h-5 w-5"}),e.jsx("span",{children:"Address Information"})]})}),e.jsxs(ae,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"street_address",children:"Street Address"}),e.jsxs("div",{className:"relative",children:[e.jsx(dl,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),e.jsx(be,{id:"street_address",value:u.street_address||"",onChange:y=>h("street_address",y.target.value),placeholder:"Enter street address",className:"pl-10"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"city",children:"City"}),e.jsx(be,{id:"city",value:u.city||"",onChange:y=>h("city",y.target.value),placeholder:"City"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"postal_code",children:"Postal Code"}),e.jsx(be,{id:"postal_code",value:u.postal_code||"",onChange:y=>h("postal_code",y.target.value),placeholder:"Postal code"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"phone2",children:"Secondary Phone"}),e.jsx(be,{id:"phone2",value:u.phone2||"",onChange:y=>h("phone2",y.target.value),placeholder:"Secondary phone number"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"fax",children:"Fax"}),e.jsx(be,{id:"fax",value:u.fax||"",onChange:y=>h("fax",y.target.value),placeholder:"Fax number"})]})]})]})]})]}),e.jsxs(se,{children:[e.jsx(ue,{children:e.jsx(fe,{children:"Assignment & Status"})}),e.jsx(ae,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"status",children:"Status"}),e.jsxs(tt,{value:u.status,onValueChange:y=>h("status",y),children:[e.jsx(Je,{children:e.jsx(rt,{placeholder:"Select status"})}),e.jsxs(et,{children:[e.jsx(Y,{value:"active",children:"Active"}),e.jsx(Y,{value:"inactive",children:"Inactive"}),e.jsx(Y,{value:"pending",children:"Pending"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"owner_id",children:"Owner"}),e.jsxs(tt,{value:u.owner_id?.toString()||"none",onValueChange:y=>h("owner_id",y==="none"?"":y),children:[e.jsx(Je,{children:e.jsx(rt,{placeholder:s?"Loading users...":"Select owner"})}),e.jsxs(et,{children:[e.jsx(Y,{value:"none",children:"No owner"}),r.map(y=>e.jsx(Y,{value:y.id.toString(),children:y.name},y.id))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"ownership_notes",children:"Ownership Notes"}),e.jsx(be,{id:"ownership_notes",value:u.ownership_notes||"",onChange:y=>h("ownership_notes",y.target.value),placeholder:"Enter ownership notes"})]})]})})]})]})]})})}var cg="Popover",[zL,rge]=Ks(cg,[tu]),xh=tu(),[cZ,bo]=zL(cg),BL=t=>{const{__scopePopover:r,children:n,open:s,defaultOpen:a,onOpenChange:l,modal:c=!1}=t,u=xh(r),d=f.useRef(null),[h,x]=f.useState(!1),[p,y]=hl({prop:s,defaultProp:a??!1,onChange:l,caller:cg});return e.jsx(NN,{...u,children:e.jsx(cZ,{scope:r,contentId:as(),triggerRef:d,open:p,onOpenChange:y,onOpenToggle:f.useCallback(()=>y(v=>!v),[y]),hasCustomAnchor:h,onCustomAnchorAdd:f.useCallback(()=>x(!0),[]),onCustomAnchorRemove:f.useCallback(()=>x(!1),[]),modal:c,children:n})})};BL.displayName=cg;var WL="PopoverAnchor",dZ=f.forwardRef((t,r)=>{const{__scopePopover:n,...s}=t,a=bo(WL,n),l=xh(n),{onCustomAnchorAdd:c,onCustomAnchorRemove:u}=a;return f.useEffect(()=>(c(),()=>u()),[c,u]),e.jsx(Bp,{...l,...s,ref:r})});dZ.displayName=WL;var HL="PopoverTrigger",VL=f.forwardRef((t,r)=>{const{__scopePopover:n,...s}=t,a=bo(HL,n),l=xh(n),c=cr(r,a.triggerRef),u=e.jsx(Mt.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":XL(a.open),...s,ref:c,onClick:bt(t.onClick,a.onOpenToggle)});return a.hasCustomAnchor?u:e.jsx(Bp,{asChild:!0,...l,children:u})});VL.displayName=HL;var XN="PopoverPortal",[uZ,mZ]=zL(XN,{forceMount:void 0}),YL=t=>{const{__scopePopover:r,forceMount:n,children:s,container:a}=t,l=bo(XN,r);return e.jsx(uZ,{scope:r,forceMount:n,children:e.jsx(vs,{present:n||l.open,children:e.jsx(nh,{asChild:!0,container:a,children:s})})})};YL.displayName=XN;var Dd="PopoverContent",KL=f.forwardRef((t,r)=>{const n=mZ(Dd,t.__scopePopover),{forceMount:s=n.forceMount,...a}=t,l=bo(Dd,t.__scopePopover);return e.jsx(vs,{present:s||l.open,children:l.modal?e.jsx(fZ,{...a,ref:r}):e.jsx(xZ,{...a,ref:r})})});KL.displayName=Dd;var hZ=ho("PopoverContent.RemoveScroll"),fZ=f.forwardRef((t,r)=>{const n=bo(Dd,t.__scopePopover),s=f.useRef(null),a=cr(r,s),l=f.useRef(!1);return f.useEffect(()=>{const c=s.current;if(c)return Wp(c)},[]),e.jsx(sh,{as:hZ,allowPinchZoom:!0,children:e.jsx(GL,{...t,ref:a,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:bt(t.onCloseAutoFocus,c=>{c.preventDefault(),l.current||n.triggerRef.current?.focus()}),onPointerDownOutside:bt(t.onPointerDownOutside,c=>{const u=c.detail.originalEvent,d=u.button===0&&u.ctrlKey===!0,h=u.button===2||d;l.current=h},{checkForDefaultPrevented:!1}),onFocusOutside:bt(t.onFocusOutside,c=>c.preventDefault(),{checkForDefaultPrevented:!1})})})}),xZ=f.forwardRef((t,r)=>{const n=bo(Dd,t.__scopePopover),s=f.useRef(!1),a=f.useRef(!1);return e.jsx(GL,{...t,ref:r,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:l=>{t.onCloseAutoFocus?.(l),l.defaultPrevented||(s.current||n.triggerRef.current?.focus(),l.preventDefault()),s.current=!1,a.current=!1},onInteractOutside:l=>{t.onInteractOutside?.(l),l.defaultPrevented||(s.current=!0,l.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const c=l.target;n.triggerRef.current?.contains(c)&&l.preventDefault(),l.detail.originalEvent.type==="focusin"&&a.current&&l.preventDefault()}})}),GL=f.forwardRef((t,r)=>{const{__scopePopover:n,trapFocus:s,onOpenAutoFocus:a,onCloseAutoFocus:l,disableOutsidePointerEvents:c,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:h,onInteractOutside:x,...p}=t,y=bo(Dd,n),v=xh(n);return $p(),e.jsx(th,{asChild:!0,loop:!0,trapped:s,onMountAutoFocus:a,onUnmountAutoFocus:l,children:e.jsx(eh,{asChild:!0,disableOutsidePointerEvents:c,onInteractOutside:x,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:h,onDismiss:()=>y.onOpenChange(!1),children:e.jsx(_N,{"data-state":XL(y.open),role:"dialog",id:y.contentId,...v,...p,ref:r,style:{...p.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),QL="PopoverClose",pZ=f.forwardRef((t,r)=>{const{__scopePopover:n,...s}=t,a=bo(QL,n);return e.jsx(Mt.button,{type:"button",...s,ref:r,onClick:bt(t.onClick,()=>a.onOpenChange(!1))})});pZ.displayName=QL;var gZ="PopoverArrow",yZ=f.forwardRef((t,r)=>{const{__scopePopover:n,...s}=t,a=xh(n);return e.jsx(CN,{...a,...s,ref:r})});yZ.displayName=gZ;function XL(t){return t?"open":"closed"}var vZ=BL,jZ=VL,bZ=YL,ZL=KL;const dn=vZ,un=jZ,sn=f.forwardRef(({className:t,align:r="center",sideOffset:n=4,...s},a)=>e.jsx(bZ,{children:e.jsx(ZL,{ref:a,align:r,sideOffset:n,className:ze("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...s})}));sn.displayName=ZL.displayName;function wZ(){const t=er(),[r,n]=f.useState([]),[s,a]=f.useState([]),[l,c]=f.useState(!1),[u,d]=f.useState(!1),[h,x]=f.useState(!1),[p,y]=f.useState(!1),[v,w]=f.useState(!1),[b,N]=f.useState(!1),[_,S]=f.useState(""),[k,E]=f.useState(""),[A,O]=f.useState([]),[z,R]=f.useState({name:"",catalogue_number:"",manufacturer:"",category_id:void 0,description:"",warranty_months:12});f.useEffect(()=>{G()},[]);const G=async()=>{await Promise.all([J(),ie()])},J=async()=>{try{c(!0);const L=await de.getMachineCategories();n(L.data||[])}catch(L){console.error("Error fetching categories:",L),Ne.error("Failed to load machine categories")}finally{c(!1)}},ie=async()=>{try{d(!0);const[L,T]=await Promise.all([de.getSuppliers({limit:100}),de.getMachineModels({limit:100})]),F=L.data||[];a(F);const I=F.map(ye=>ye.name),W=(T.data||[]).map(ye=>ye.manufacturer).filter(ye=>ye&&ye.trim()),ee=[...new Set([...I,...W])];O(ee.sort())}catch(L){console.error("Error fetching suppliers:",L),Ne.error("Failed to load suppliers"),O([])}finally{d(!1)}},V=(L,T)=>{R(F=>({...F,[L]:T}))},xe=r.filter(L=>L.name.toLowerCase().includes(_.toLowerCase())),pe=A.filter(L=>L.toLowerCase().includes(k.toLowerCase())),re=async L=>{try{y(!0);const T=L.trim(),F=r.find(W=>{const ee=W.name.toLowerCase().trim(),ye=T.toLowerCase().trim();return!!(ee===ye||ee.includes(ye)||ye.includes(ee))});if(F){V("category_id",F.id),w(!1),S(""),Ne.info(`Category "${T}" is similar to existing "${F.name}" and has been selected`);return}const Q=(await de.createMachineCategory({name:T})).data;n(W=>[...W,Q]),V("category_id",Q.id),w(!1),S(""),Ne.success(`Category "${T}" created successfully`)}catch(T){if(console.error("Error creating category:",T),console.error("Full error object:",T),T.message&&T.message.includes("already exists")){const F=r.find(I=>{const Q=I.name.toLowerCase().trim(),W=L.trim().toLowerCase();return Q.includes(W)||W.includes(Q)});F?Ne.error(`Category "${L.trim()}" is too similar to existing "${F.name}". Please select the existing category or use a different name.`):Ne.error(`Category "${L.trim()}" already exists. Please select it from the list.`)}else Ne.error("Failed to create category. Please try again.")}finally{y(!1)}},M=async L=>{if(L.preventDefault(),!z.name.trim()){Ne.error("Machine model name is required");return}if(!z.manufacturer.trim()){Ne.error("Manufacturer is required");return}try{x(!0),await de.createMachineModel(z),Ne.success("Machine model created successfully"),t("/machines")}catch(T){console.error("Error creating machine model:",T),Ne.error("Failed to create machine model. Please try again.")}finally{x(!1)}},B=()=>{t("/machines")};return e.jsx(gt,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(q,{variant:"ghost",size:"icon",onClick:B,className:"h-10 w-10",children:e.jsx(Cn,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Add New Machine Model"}),e.jsx("p",{className:"text-muted-foreground",children:"Create a new machine model with specifications and warranty information"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(q,{variant:"outline",onClick:B,children:[e.jsx(hn,{className:"mr-2 h-4 w-4"}),"Cancel"]}),e.jsxs(q,{type:"submit",form:"machine-model-form",disabled:h,children:[e.jsx(ul,{className:"mr-2 h-4 w-4"}),h?"Creating...":"Create Machine Model"]})]})]}),e.jsxs("form",{id:"machine-model-form",onSubmit:M,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(se,{children:[e.jsx(ue,{children:e.jsxs(fe,{className:"flex items-center space-x-2",children:[e.jsx(Jt,{className:"h-5 w-5"}),e.jsx("span",{children:"Basic Information"})]})}),e.jsxs(ae,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"name",children:"Machine Model Name *"}),e.jsxs("div",{className:"relative",children:[e.jsx(Jt,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),e.jsx(be,{id:"name",value:z.name,onChange:L=>V("name",L.target.value),placeholder:"Enter machine model name",className:"pl-10",required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"catalogue_number",children:"Catalogue Number"}),e.jsxs("div",{className:"relative",children:[e.jsx(Qa,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),e.jsx(be,{id:"catalogue_number",value:z.catalogue_number||"",onChange:L=>V("catalogue_number",L.target.value),placeholder:"Enter catalogue number",className:"pl-10"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"manufacturer",children:"Manufacturer *"}),e.jsxs(dn,{open:b,onOpenChange:N,children:[e.jsx(un,{asChild:!0,children:e.jsxs(q,{variant:"outline",role:"combobox","aria-expanded":b,className:"w-full justify-between h-10",children:[z.manufacturer||"Select manufacturer...",e.jsx(cn,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),e.jsxs(sn,{className:"w-[400px] p-0",align:"start",children:[e.jsx("div",{className:"border-b p-3",children:e.jsxs("div",{className:"relative",children:[e.jsx(nr,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(be,{placeholder:"Search or type new manufacturer...",className:"pl-10",value:k,onChange:L=>E(L.target.value)})]})}),e.jsxs("div",{className:"max-h-[300px] overflow-y-auto",children:[k&&!pe.includes(k)&&e.jsx("div",{className:"p-1 border-b",children:e.jsxs("div",{onClick:()=>{V("manufacturer",k),N(!1)},className:"flex items-center gap-3 p-2 rounded-sm cursor-pointer hover:bg-accent hover:text-accent-foreground transition-colors",children:[e.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-green-100",children:e.jsx("span",{className:"text-green-600 text-sm font-bold",children:"+"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("p",{className:"font-medium",children:['Add "',k,'"']}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Create new manufacturer"})]})]})}),pe.length===0?e.jsx("div",{className:"p-4 text-center text-muted-foreground",children:"No manufacturers found."}):e.jsx("div",{className:"p-1",children:pe.map(L=>e.jsxs("div",{onClick:()=>{V("manufacturer",L),N(!1)},className:"flex items-center gap-3 p-2 rounded-sm cursor-pointer hover:bg-accent hover:text-accent-foreground transition-colors",children:[e.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-orange-100",children:e.jsx(cl,{className:"h-4 w-4 text-orange-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium",children:L}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Select manufacturer"})]})]},L))})]})]})]})]})]})]}),e.jsxs(se,{children:[e.jsx(ue,{children:e.jsxs(fe,{className:"flex items-center space-x-2",children:[e.jsx(Hs,{className:"h-5 w-5"}),e.jsx("span",{children:"Category & Warranty"})]})}),e.jsxs(ae,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"category_id",children:"Category"}),e.jsxs(dn,{open:v,onOpenChange:w,children:[e.jsx(un,{asChild:!0,children:e.jsxs(q,{variant:"outline",role:"combobox","aria-expanded":v,className:"w-full justify-between h-10",children:[z.category_id?r.find(L=>L.id===z.category_id)?.name:"Select category...",e.jsx(cn,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),e.jsxs(sn,{className:"w-[400px] p-0",align:"start",children:[e.jsx("div",{className:"border-b p-3",children:e.jsxs("div",{className:"relative",children:[e.jsx(nr,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(be,{placeholder:"Search categories or type new...",className:"pl-10",value:_,onChange:L=>S(L.target.value)})]})}),e.jsxs("div",{className:"max-h-[300px] overflow-y-auto",children:[e.jsx("div",{className:"p-1 border-b",children:e.jsxs("div",{onClick:()=>{V("category_id",void 0),w(!1)},className:"flex items-center gap-3 p-2 rounded-sm cursor-pointer hover:bg-accent hover:text-accent-foreground transition-colors",children:[e.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-gray-100",children:e.jsx("span",{className:"text-gray-600 text-sm font-bold",children:"-"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium",children:"No category"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Leave category empty"})]})]})}),_&&!xe.some(L=>{const T=L.name.toLowerCase().trim(),F=_.trim().toLowerCase();return T===F||T.includes(F)||F.includes(T)})&&e.jsx("div",{className:"p-1 border-b",children:e.jsxs("div",{onClick:()=>{re(_)},className:"flex items-center gap-3 p-2 rounded-sm cursor-pointer hover:bg-accent hover:text-accent-foreground transition-colors",children:[e.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-green-100",children:p?e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-green-600 border-t-transparent"}):e.jsx("span",{className:"text-green-600 text-sm font-bold",children:"+"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("p",{className:"font-medium",children:['Create "',_,'"']}),e.jsx("p",{className:"text-sm text-muted-foreground",children:p?"Creating category...":"Add new category"})]})]})}),xe.length===0?e.jsx("div",{className:"p-4 text-center text-muted-foreground",children:"No categories found."}):e.jsx("div",{className:"p-1",children:xe.map(L=>e.jsxs("div",{onClick:()=>{V("category_id",L.id),w(!1)},className:"flex items-center gap-3 p-2 rounded-sm cursor-pointer hover:bg-accent hover:text-accent-foreground transition-colors",children:[e.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-orange-100",children:e.jsx(Jt,{className:"h-4 w-4 text-orange-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium",children:L.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Select category"})]})]},L.id))})]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"warranty_months",children:"Warranty Period (Months)"}),e.jsxs("div",{className:"relative",children:[e.jsx(Hs,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),e.jsx(be,{id:"warranty_months",type:"number",min:"0",max:"120",value:z.warranty_months,onChange:L=>V("warranty_months",parseInt(L.target.value)||0),placeholder:"Enter warranty period in months",className:"pl-10"})]})]})]})]})]}),e.jsxs(se,{children:[e.jsx(ue,{children:e.jsxs(fe,{className:"flex items-center space-x-2",children:[e.jsx(Qt,{className:"h-5 w-5"}),e.jsx("span",{children:"Description"})]})}),e.jsx(ae,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"description",children:"Machine Model Description"}),e.jsx(ar,{id:"description",value:z.description||"",onChange:L=>V("description",L.target.value),placeholder:"Enter detailed description of the machine model, specifications, features, etc.",rows:4})]})})]})]})]})})}const JL=6048e5,NZ=864e5,_Z=6e4,CZ=36e5,SZ=1e3,rx=43200,ZA=1440,JA=Symbol.for("constructDateFrom");function Hn(t,r){return typeof t=="function"?t(r):t&&typeof t=="object"&&JA in t?t[JA](r):t instanceof Date?new t.constructor(r):new Date(r)}function Xr(t,r){return Hn(r||t,t)}function e5(t,r,n){const s=Xr(t,n?.in);return isNaN(r)?Hn(n?.in||t,NaN):(r&&s.setDate(s.getDate()+r),s)}let kZ={};function kc(){return kZ}function go(t,r){const n=kc(),s=r?.weekStartsOn??r?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,a=Xr(t,r?.in),l=a.getDay(),c=(l<s?7:0)+l-s;return a.setDate(a.getDate()-c),a.setHours(0,0,0,0),a}function Rd(t,r){return go(t,{...r,weekStartsOn:1})}function t5(t,r){const n=Xr(t,r?.in),s=n.getFullYear(),a=Hn(n,0);a.setFullYear(s+1,0,4),a.setHours(0,0,0,0);const l=Rd(a),c=Hn(n,0);c.setFullYear(s,0,4),c.setHours(0,0,0,0);const u=Rd(c);return n.getTime()>=l.getTime()?s+1:n.getTime()>=u.getTime()?s:s-1}function Ld(t){const r=Xr(t),n=new Date(Date.UTC(r.getFullYear(),r.getMonth(),r.getDate(),r.getHours(),r.getMinutes(),r.getSeconds(),r.getMilliseconds()));return n.setUTCFullYear(r.getFullYear()),+t-+n}function dg(t,...r){const n=Hn.bind(null,t||r.find(s=>typeof s=="object"));return r.map(n)}function eE(t,r){const n=Xr(t,r?.in);return n.setHours(0,0,0,0),n}function AZ(t,r,n){const[s,a]=dg(n?.in,t,r),l=eE(s),c=eE(a),u=+l-Ld(l),d=+c-Ld(c);return Math.round((u-d)/NZ)}function EZ(t,r){const n=t5(t,r),s=Hn(t,0);return s.setFullYear(n,0,4),s.setHours(0,0,0,0),Rd(s)}function Mx(t,r){const n=+Xr(t)-+Xr(r);return n<0?-1:n>0?1:n}function MZ(t){return Hn(t,Date.now())}function TZ(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function OZ(t){return!(!TZ(t)&&typeof t!="number"||isNaN(+Xr(t)))}function PZ(t,r,n){const[s,a]=dg(n?.in,t,r),l=s.getFullYear()-a.getFullYear(),c=s.getMonth()-a.getMonth();return l*12+c}function DZ(t){return r=>{const s=(t?Math[t]:Math.trunc)(r);return s===0?0:s}}function RZ(t,r){return+Xr(t)-+Xr(r)}function LZ(t,r){const n=Xr(t,r?.in);return n.setHours(23,59,59,999),n}function IZ(t,r){const n=Xr(t,r?.in),s=n.getMonth();return n.setFullYear(n.getFullYear(),s+1,0),n.setHours(23,59,59,999),n}function $Z(t,r){const n=Xr(t,r?.in);return+LZ(n,r)==+IZ(n,r)}function FZ(t,r,n){const[s,a,l]=dg(n?.in,t,t,r),c=Mx(a,l),u=Math.abs(PZ(a,l));if(u<1)return 0;a.getMonth()===1&&a.getDate()>27&&a.setDate(30),a.setMonth(a.getMonth()-c*u);let d=Mx(a,l)===-c;$Z(s)&&u===1&&Mx(s,l)===1&&(d=!1);const h=c*(u-+d);return h===0?0:h}function qZ(t,r,n){const s=RZ(t,r)/1e3;return DZ(n?.roundingMethod)(s)}function UZ(t,r){const n=Xr(t,r?.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}const zZ={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},BZ=(t,r,n)=>{let s;const a=zZ[t];return typeof a=="string"?s=a:r===1?s=a.one:s=a.other.replace("{{count}}",r.toString()),n?.addSuffix?n.comparison&&n.comparison>0?"in "+s:s+" ago":s};function Nj(t){return(r={})=>{const n=r.width?String(r.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const WZ={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},HZ={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},VZ={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},YZ={date:Nj({formats:WZ,defaultWidth:"full"}),time:Nj({formats:HZ,defaultWidth:"full"}),dateTime:Nj({formats:VZ,defaultWidth:"full"})},KZ={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},GZ=(t,r,n,s)=>KZ[t];function dm(t){return(r,n)=>{const s=n?.context?String(n.context):"standalone";let a;if(s==="formatting"&&t.formattingValues){const c=t.defaultFormattingWidth||t.defaultWidth,u=n?.width?String(n.width):c;a=t.formattingValues[u]||t.formattingValues[c]}else{const c=t.defaultWidth,u=n?.width?String(n.width):t.defaultWidth;a=t.values[u]||t.values[c]}const l=t.argumentCallback?t.argumentCallback(r):r;return a[l]}}const QZ={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},XZ={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},ZZ={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},JZ={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},eJ={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},tJ={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},rJ=(t,r)=>{const n=Number(t),s=n%100;if(s>20||s<10)switch(s%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},nJ={ordinalNumber:rJ,era:dm({values:QZ,defaultWidth:"wide"}),quarter:dm({values:XZ,defaultWidth:"wide",argumentCallback:t=>t-1}),month:dm({values:ZZ,defaultWidth:"wide"}),day:dm({values:JZ,defaultWidth:"wide"}),dayPeriod:dm({values:eJ,defaultWidth:"wide",formattingValues:tJ,defaultFormattingWidth:"wide"})};function um(t){return(r,n={})=>{const s=n.width,a=s&&t.matchPatterns[s]||t.matchPatterns[t.defaultMatchWidth],l=r.match(a);if(!l)return null;const c=l[0],u=s&&t.parsePatterns[s]||t.parsePatterns[t.defaultParseWidth],d=Array.isArray(u)?aJ(u,p=>p.test(c)):sJ(u,p=>p.test(c));let h;h=t.valueCallback?t.valueCallback(d):d,h=n.valueCallback?n.valueCallback(h):h;const x=r.slice(c.length);return{value:h,rest:x}}}function sJ(t,r){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&r(t[n]))return n}function aJ(t,r){for(let n=0;n<t.length;n++)if(r(t[n]))return n}function iJ(t){return(r,n={})=>{const s=r.match(t.matchPattern);if(!s)return null;const a=s[0],l=r.match(t.parsePattern);if(!l)return null;let c=t.valueCallback?t.valueCallback(l[0]):l[0];c=n.valueCallback?n.valueCallback(c):c;const u=r.slice(a.length);return{value:c,rest:u}}}const lJ=/^(\d+)(th|st|nd|rd)?/i,oJ=/\d+/i,cJ={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},dJ={any:[/^b/i,/^(a|c)/i]},uJ={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},mJ={any:[/1/i,/2/i,/3/i,/4/i]},hJ={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},fJ={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},xJ={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},pJ={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},gJ={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},yJ={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},vJ={ordinalNumber:iJ({matchPattern:lJ,parsePattern:oJ,valueCallback:t=>parseInt(t,10)}),era:um({matchPatterns:cJ,defaultMatchWidth:"wide",parsePatterns:dJ,defaultParseWidth:"any"}),quarter:um({matchPatterns:uJ,defaultMatchWidth:"wide",parsePatterns:mJ,defaultParseWidth:"any",valueCallback:t=>t+1}),month:um({matchPatterns:hJ,defaultMatchWidth:"wide",parsePatterns:fJ,defaultParseWidth:"any"}),day:um({matchPatterns:xJ,defaultMatchWidth:"wide",parsePatterns:pJ,defaultParseWidth:"any"}),dayPeriod:um({matchPatterns:gJ,defaultMatchWidth:"any",parsePatterns:yJ,defaultParseWidth:"any"})},ZN={code:"en-US",formatDistance:BZ,formatLong:YZ,formatRelative:GZ,localize:nJ,match:vJ,options:{weekStartsOn:0,firstWeekContainsDate:1}};function jJ(t,r){const n=Xr(t,r?.in);return AZ(n,UZ(n))+1}function r5(t,r){const n=Xr(t,r?.in),s=+Rd(n)-+EZ(n);return Math.round(s/JL)+1}function JN(t,r){const n=Xr(t,r?.in),s=n.getFullYear(),a=kc(),l=r?.firstWeekContainsDate??r?.locale?.options?.firstWeekContainsDate??a.firstWeekContainsDate??a.locale?.options?.firstWeekContainsDate??1,c=Hn(r?.in||t,0);c.setFullYear(s+1,0,l),c.setHours(0,0,0,0);const u=go(c,r),d=Hn(r?.in||t,0);d.setFullYear(s,0,l),d.setHours(0,0,0,0);const h=go(d,r);return+n>=+u?s+1:+n>=+h?s:s-1}function bJ(t,r){const n=kc(),s=r?.firstWeekContainsDate??r?.locale?.options?.firstWeekContainsDate??n.firstWeekContainsDate??n.locale?.options?.firstWeekContainsDate??1,a=JN(t,r),l=Hn(r?.in||t,0);return l.setFullYear(a,0,s),l.setHours(0,0,0,0),go(l,r)}function n5(t,r){const n=Xr(t,r?.in),s=+go(n,r)-+bJ(n,r);return Math.round(s/JL)+1}function Fr(t,r){const n=t<0?"-":"",s=Math.abs(t).toString().padStart(r,"0");return n+s}const Zl={y(t,r){const n=t.getFullYear(),s=n>0?n:1-n;return Fr(r==="yy"?s%100:s,r.length)},M(t,r){const n=t.getMonth();return r==="M"?String(n+1):Fr(n+1,2)},d(t,r){return Fr(t.getDate(),r.length)},a(t,r){const n=t.getHours()/12>=1?"pm":"am";switch(r){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,r){return Fr(t.getHours()%12||12,r.length)},H(t,r){return Fr(t.getHours(),r.length)},m(t,r){return Fr(t.getMinutes(),r.length)},s(t,r){return Fr(t.getSeconds(),r.length)},S(t,r){const n=r.length,s=t.getMilliseconds(),a=Math.trunc(s*Math.pow(10,n-3));return Fr(a,r.length)}},vd={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},tE={G:function(t,r,n){const s=t.getFullYear()>0?1:0;switch(r){case"G":case"GG":case"GGG":return n.era(s,{width:"abbreviated"});case"GGGGG":return n.era(s,{width:"narrow"});case"GGGG":default:return n.era(s,{width:"wide"})}},y:function(t,r,n){if(r==="yo"){const s=t.getFullYear(),a=s>0?s:1-s;return n.ordinalNumber(a,{unit:"year"})}return Zl.y(t,r)},Y:function(t,r,n,s){const a=JN(t,s),l=a>0?a:1-a;if(r==="YY"){const c=l%100;return Fr(c,2)}return r==="Yo"?n.ordinalNumber(l,{unit:"year"}):Fr(l,r.length)},R:function(t,r){const n=t5(t);return Fr(n,r.length)},u:function(t,r){const n=t.getFullYear();return Fr(n,r.length)},Q:function(t,r,n){const s=Math.ceil((t.getMonth()+1)/3);switch(r){case"Q":return String(s);case"QQ":return Fr(s,2);case"Qo":return n.ordinalNumber(s,{unit:"quarter"});case"QQQ":return n.quarter(s,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(s,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(s,{width:"wide",context:"formatting"})}},q:function(t,r,n){const s=Math.ceil((t.getMonth()+1)/3);switch(r){case"q":return String(s);case"qq":return Fr(s,2);case"qo":return n.ordinalNumber(s,{unit:"quarter"});case"qqq":return n.quarter(s,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(s,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(s,{width:"wide",context:"standalone"})}},M:function(t,r,n){const s=t.getMonth();switch(r){case"M":case"MM":return Zl.M(t,r);case"Mo":return n.ordinalNumber(s+1,{unit:"month"});case"MMM":return n.month(s,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(s,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(s,{width:"wide",context:"formatting"})}},L:function(t,r,n){const s=t.getMonth();switch(r){case"L":return String(s+1);case"LL":return Fr(s+1,2);case"Lo":return n.ordinalNumber(s+1,{unit:"month"});case"LLL":return n.month(s,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(s,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(s,{width:"wide",context:"standalone"})}},w:function(t,r,n,s){const a=n5(t,s);return r==="wo"?n.ordinalNumber(a,{unit:"week"}):Fr(a,r.length)},I:function(t,r,n){const s=r5(t);return r==="Io"?n.ordinalNumber(s,{unit:"week"}):Fr(s,r.length)},d:function(t,r,n){return r==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):Zl.d(t,r)},D:function(t,r,n){const s=jJ(t);return r==="Do"?n.ordinalNumber(s,{unit:"dayOfYear"}):Fr(s,r.length)},E:function(t,r,n){const s=t.getDay();switch(r){case"E":case"EE":case"EEE":return n.day(s,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(s,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(s,{width:"short",context:"formatting"});case"EEEE":default:return n.day(s,{width:"wide",context:"formatting"})}},e:function(t,r,n,s){const a=t.getDay(),l=(a-s.weekStartsOn+8)%7||7;switch(r){case"e":return String(l);case"ee":return Fr(l,2);case"eo":return n.ordinalNumber(l,{unit:"day"});case"eee":return n.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(a,{width:"short",context:"formatting"});case"eeee":default:return n.day(a,{width:"wide",context:"formatting"})}},c:function(t,r,n,s){const a=t.getDay(),l=(a-s.weekStartsOn+8)%7||7;switch(r){case"c":return String(l);case"cc":return Fr(l,r.length);case"co":return n.ordinalNumber(l,{unit:"day"});case"ccc":return n.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(a,{width:"narrow",context:"standalone"});case"cccccc":return n.day(a,{width:"short",context:"standalone"});case"cccc":default:return n.day(a,{width:"wide",context:"standalone"})}},i:function(t,r,n){const s=t.getDay(),a=s===0?7:s;switch(r){case"i":return String(a);case"ii":return Fr(a,r.length);case"io":return n.ordinalNumber(a,{unit:"day"});case"iii":return n.day(s,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(s,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(s,{width:"short",context:"formatting"});case"iiii":default:return n.day(s,{width:"wide",context:"formatting"})}},a:function(t,r,n){const a=t.getHours()/12>=1?"pm":"am";switch(r){case"a":case"aa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(t,r,n){const s=t.getHours();let a;switch(s===12?a=vd.noon:s===0?a=vd.midnight:a=s/12>=1?"pm":"am",r){case"b":case"bb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(t,r,n){const s=t.getHours();let a;switch(s>=17?a=vd.evening:s>=12?a=vd.afternoon:s>=4?a=vd.morning:a=vd.night,r){case"B":case"BB":case"BBB":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(t,r,n){if(r==="ho"){let s=t.getHours()%12;return s===0&&(s=12),n.ordinalNumber(s,{unit:"hour"})}return Zl.h(t,r)},H:function(t,r,n){return r==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):Zl.H(t,r)},K:function(t,r,n){const s=t.getHours()%12;return r==="Ko"?n.ordinalNumber(s,{unit:"hour"}):Fr(s,r.length)},k:function(t,r,n){let s=t.getHours();return s===0&&(s=24),r==="ko"?n.ordinalNumber(s,{unit:"hour"}):Fr(s,r.length)},m:function(t,r,n){return r==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):Zl.m(t,r)},s:function(t,r,n){return r==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):Zl.s(t,r)},S:function(t,r){return Zl.S(t,r)},X:function(t,r,n){const s=t.getTimezoneOffset();if(s===0)return"Z";switch(r){case"X":return nE(s);case"XXXX":case"XX":return Ko(s);case"XXXXX":case"XXX":default:return Ko(s,":")}},x:function(t,r,n){const s=t.getTimezoneOffset();switch(r){case"x":return nE(s);case"xxxx":case"xx":return Ko(s);case"xxxxx":case"xxx":default:return Ko(s,":")}},O:function(t,r,n){const s=t.getTimezoneOffset();switch(r){case"O":case"OO":case"OOO":return"GMT"+rE(s,":");case"OOOO":default:return"GMT"+Ko(s,":")}},z:function(t,r,n){const s=t.getTimezoneOffset();switch(r){case"z":case"zz":case"zzz":return"GMT"+rE(s,":");case"zzzz":default:return"GMT"+Ko(s,":")}},t:function(t,r,n){const s=Math.trunc(+t/1e3);return Fr(s,r.length)},T:function(t,r,n){return Fr(+t,r.length)}};function rE(t,r=""){const n=t>0?"-":"+",s=Math.abs(t),a=Math.trunc(s/60),l=s%60;return l===0?n+String(a):n+String(a)+r+Fr(l,2)}function nE(t,r){return t%60===0?(t>0?"-":"+")+Fr(Math.abs(t)/60,2):Ko(t,r)}function Ko(t,r=""){const n=t>0?"-":"+",s=Math.abs(t),a=Fr(Math.trunc(s/60),2),l=Fr(s%60,2);return n+a+r+l}const sE=(t,r)=>{switch(t){case"P":return r.date({width:"short"});case"PP":return r.date({width:"medium"});case"PPP":return r.date({width:"long"});case"PPPP":default:return r.date({width:"full"})}},s5=(t,r)=>{switch(t){case"p":return r.time({width:"short"});case"pp":return r.time({width:"medium"});case"ppp":return r.time({width:"long"});case"pppp":default:return r.time({width:"full"})}},wJ=(t,r)=>{const n=t.match(/(P+)(p+)?/)||[],s=n[1],a=n[2];if(!a)return sE(t,r);let l;switch(s){case"P":l=r.dateTime({width:"short"});break;case"PP":l=r.dateTime({width:"medium"});break;case"PPP":l=r.dateTime({width:"long"});break;case"PPPP":default:l=r.dateTime({width:"full"});break}return l.replace("{{date}}",sE(s,r)).replace("{{time}}",s5(a,r))},z0={p:s5,P:wJ},NJ=/^D+$/,_J=/^Y+$/,CJ=["D","DD","YY","YYYY"];function a5(t){return NJ.test(t)}function i5(t){return _J.test(t)}function B0(t,r,n){const s=SJ(t,r,n);if(console.warn(s),CJ.includes(t))throw new RangeError(s)}function SJ(t,r,n){const s=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${r}\`) for formatting ${s} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const kJ=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,AJ=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,EJ=/^'([^]*?)'?$/,MJ=/''/g,TJ=/[a-zA-Z]/;function Ed(t,r,n){const s=kc(),a=s.locale??ZN,l=s.firstWeekContainsDate??s.locale?.options?.firstWeekContainsDate??1,c=s.weekStartsOn??s.locale?.options?.weekStartsOn??0,u=Xr(t,n?.in);if(!OZ(u))throw new RangeError("Invalid time value");let d=r.match(AJ).map(x=>{const p=x[0];if(p==="p"||p==="P"){const y=z0[p];return y(x,a.formatLong)}return x}).join("").match(kJ).map(x=>{if(x==="''")return{isToken:!1,value:"'"};const p=x[0];if(p==="'")return{isToken:!1,value:OJ(x)};if(tE[p])return{isToken:!0,value:x};if(p.match(TJ))throw new RangeError("Format string contains an unescaped latin alphabet character `"+p+"`");return{isToken:!1,value:x}});a.localize.preprocessor&&(d=a.localize.preprocessor(u,d));const h={firstWeekContainsDate:l,weekStartsOn:c,locale:a};return d.map(x=>{if(!x.isToken)return x.value;const p=x.value;(i5(p)||a5(p))&&B0(p,r,String(t));const y=tE[p[0]];return y(u,p,a.localize,h)}).join("")}function OJ(t){const r=t.match(EJ);return r?r[1].replace(MJ,"'"):t}function PJ(t,r,n){const s=kc(),a=n?.locale??s.locale??ZN,l=2520,c=Mx(t,r);if(isNaN(c))throw new RangeError("Invalid time value");const u=Object.assign({},n,{addSuffix:n?.addSuffix,comparison:c}),[d,h]=dg(n?.in,...c>0?[r,t]:[t,r]),x=qZ(h,d),p=(Ld(h)-Ld(d))/1e3,y=Math.round((x-p)/60);let v;if(y<2)return n?.includeSeconds?x<5?a.formatDistance("lessThanXSeconds",5,u):x<10?a.formatDistance("lessThanXSeconds",10,u):x<20?a.formatDistance("lessThanXSeconds",20,u):x<40?a.formatDistance("halfAMinute",0,u):x<60?a.formatDistance("lessThanXMinutes",1,u):a.formatDistance("xMinutes",1,u):y===0?a.formatDistance("lessThanXMinutes",1,u):a.formatDistance("xMinutes",y,u);if(y<45)return a.formatDistance("xMinutes",y,u);if(y<90)return a.formatDistance("aboutXHours",1,u);if(y<ZA){const w=Math.round(y/60);return a.formatDistance("aboutXHours",w,u)}else{if(y<l)return a.formatDistance("xDays",1,u);if(y<rx){const w=Math.round(y/ZA);return a.formatDistance("xDays",w,u)}else if(y<rx*2)return v=Math.round(y/rx),a.formatDistance("aboutXMonths",v,u)}if(v=FZ(h,d),v<12){const w=Math.round(y/rx);return a.formatDistance("xMonths",w,u)}else{const w=v%12,b=Math.trunc(v/12);return w<3?a.formatDistance("aboutXYears",b,u):w<9?a.formatDistance("overXYears",b,u):a.formatDistance("almostXYears",b+1,u)}}function DJ(t,r){return PJ(t,MZ(t),r)}function RJ(){return Object.assign({},kc())}function LJ(t,r){const n=Xr(t,r?.in).getDay();return n===0?7:n}function IJ(t,r){const n=$J(r)?new r(0):Hn(r,0);return n.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),n.setHours(t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()),n}function $J(t){return typeof t=="function"&&t.prototype?.constructor===t}const FJ=10;class l5{subPriority=0;validate(r,n){return!0}}class qJ extends l5{constructor(r,n,s,a,l){super(),this.value=r,this.validateValue=n,this.setValue=s,this.priority=a,l&&(this.subPriority=l)}validate(r,n){return this.validateValue(r,this.value,n)}set(r,n,s){return this.setValue(r,n,this.value,s)}}class UJ extends l5{priority=FJ;subPriority=-1;constructor(r,n){super(),this.context=r||(s=>Hn(n,s))}set(r,n){return n.timestampIsSet?r:Hn(r,IJ(r,this.context))}}class Rr{run(r,n,s,a){const l=this.parse(r,n,s,a);return l?{setter:new qJ(l.value,this.validate,this.set,this.priority,this.subPriority),rest:l.rest}:null}validate(r,n,s){return!0}}class zJ extends Rr{priority=140;parse(r,n,s){switch(n){case"G":case"GG":case"GGG":return s.era(r,{width:"abbreviated"})||s.era(r,{width:"narrow"});case"GGGGG":return s.era(r,{width:"narrow"});case"GGGG":default:return s.era(r,{width:"wide"})||s.era(r,{width:"abbreviated"})||s.era(r,{width:"narrow"})}}set(r,n,s){return n.era=s,r.setFullYear(s,0,1),r.setHours(0,0,0,0),r}incompatibleTokens=["R","u","t","T"]}const Nn={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},vi={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function _n(t,r){return t&&{value:r(t.value),rest:t.rest}}function mn(t,r){const n=r.match(t);return n?{value:parseInt(n[0],10),rest:r.slice(n[0].length)}:null}function ji(t,r){const n=r.match(t);if(!n)return null;if(n[0]==="Z")return{value:0,rest:r.slice(1)};const s=n[1]==="+"?1:-1,a=n[2]?parseInt(n[2],10):0,l=n[3]?parseInt(n[3],10):0,c=n[5]?parseInt(n[5],10):0;return{value:s*(a*CZ+l*_Z+c*SZ),rest:r.slice(n[0].length)}}function o5(t){return mn(Nn.anyDigitsSigned,t)}function yn(t,r){switch(t){case 1:return mn(Nn.singleDigit,r);case 2:return mn(Nn.twoDigits,r);case 3:return mn(Nn.threeDigits,r);case 4:return mn(Nn.fourDigits,r);default:return mn(new RegExp("^\\d{1,"+t+"}"),r)}}function Yx(t,r){switch(t){case 1:return mn(Nn.singleDigitSigned,r);case 2:return mn(Nn.twoDigitsSigned,r);case 3:return mn(Nn.threeDigitsSigned,r);case 4:return mn(Nn.fourDigitsSigned,r);default:return mn(new RegExp("^-?\\d{1,"+t+"}"),r)}}function e_(t){switch(t){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function c5(t,r){const n=r>0,s=n?r:1-r;let a;if(s<=50)a=t||100;else{const l=s+50,c=Math.trunc(l/100)*100,u=t>=l%100;a=t+c-(u?100:0)}return n?a:1-a}function d5(t){return t%400===0||t%4===0&&t%100!==0}class BJ extends Rr{priority=130;incompatibleTokens=["Y","R","u","w","I","i","e","c","t","T"];parse(r,n,s){const a=l=>({year:l,isTwoDigitYear:n==="yy"});switch(n){case"y":return _n(yn(4,r),a);case"yo":return _n(s.ordinalNumber(r,{unit:"year"}),a);default:return _n(yn(n.length,r),a)}}validate(r,n){return n.isTwoDigitYear||n.year>0}set(r,n,s){const a=r.getFullYear();if(s.isTwoDigitYear){const c=c5(s.year,a);return r.setFullYear(c,0,1),r.setHours(0,0,0,0),r}const l=!("era"in n)||n.era===1?s.year:1-s.year;return r.setFullYear(l,0,1),r.setHours(0,0,0,0),r}}class WJ extends Rr{priority=130;parse(r,n,s){const a=l=>({year:l,isTwoDigitYear:n==="YY"});switch(n){case"Y":return _n(yn(4,r),a);case"Yo":return _n(s.ordinalNumber(r,{unit:"year"}),a);default:return _n(yn(n.length,r),a)}}validate(r,n){return n.isTwoDigitYear||n.year>0}set(r,n,s,a){const l=JN(r,a);if(s.isTwoDigitYear){const u=c5(s.year,l);return r.setFullYear(u,0,a.firstWeekContainsDate),r.setHours(0,0,0,0),go(r,a)}const c=!("era"in n)||n.era===1?s.year:1-s.year;return r.setFullYear(c,0,a.firstWeekContainsDate),r.setHours(0,0,0,0),go(r,a)}incompatibleTokens=["y","R","u","Q","q","M","L","I","d","D","i","t","T"]}class HJ extends Rr{priority=130;parse(r,n){return Yx(n==="R"?4:n.length,r)}set(r,n,s){const a=Hn(r,0);return a.setFullYear(s,0,4),a.setHours(0,0,0,0),Rd(a)}incompatibleTokens=["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]}class VJ extends Rr{priority=130;parse(r,n){return Yx(n==="u"?4:n.length,r)}set(r,n,s){return r.setFullYear(s,0,1),r.setHours(0,0,0,0),r}incompatibleTokens=["G","y","Y","R","w","I","i","e","c","t","T"]}class YJ extends Rr{priority=120;parse(r,n,s){switch(n){case"Q":case"QQ":return yn(n.length,r);case"Qo":return s.ordinalNumber(r,{unit:"quarter"});case"QQQ":return s.quarter(r,{width:"abbreviated",context:"formatting"})||s.quarter(r,{width:"narrow",context:"formatting"});case"QQQQQ":return s.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return s.quarter(r,{width:"wide",context:"formatting"})||s.quarter(r,{width:"abbreviated",context:"formatting"})||s.quarter(r,{width:"narrow",context:"formatting"})}}validate(r,n){return n>=1&&n<=4}set(r,n,s){return r.setMonth((s-1)*3,1),r.setHours(0,0,0,0),r}incompatibleTokens=["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]}class KJ extends Rr{priority=120;parse(r,n,s){switch(n){case"q":case"qq":return yn(n.length,r);case"qo":return s.ordinalNumber(r,{unit:"quarter"});case"qqq":return s.quarter(r,{width:"abbreviated",context:"standalone"})||s.quarter(r,{width:"narrow",context:"standalone"});case"qqqqq":return s.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return s.quarter(r,{width:"wide",context:"standalone"})||s.quarter(r,{width:"abbreviated",context:"standalone"})||s.quarter(r,{width:"narrow",context:"standalone"})}}validate(r,n){return n>=1&&n<=4}set(r,n,s){return r.setMonth((s-1)*3,1),r.setHours(0,0,0,0),r}incompatibleTokens=["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]}class GJ extends Rr{incompatibleTokens=["Y","R","q","Q","L","w","I","D","i","e","c","t","T"];priority=110;parse(r,n,s){const a=l=>l-1;switch(n){case"M":return _n(mn(Nn.month,r),a);case"MM":return _n(yn(2,r),a);case"Mo":return _n(s.ordinalNumber(r,{unit:"month"}),a);case"MMM":return s.month(r,{width:"abbreviated",context:"formatting"})||s.month(r,{width:"narrow",context:"formatting"});case"MMMMM":return s.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return s.month(r,{width:"wide",context:"formatting"})||s.month(r,{width:"abbreviated",context:"formatting"})||s.month(r,{width:"narrow",context:"formatting"})}}validate(r,n){return n>=0&&n<=11}set(r,n,s){return r.setMonth(s,1),r.setHours(0,0,0,0),r}}class QJ extends Rr{priority=110;parse(r,n,s){const a=l=>l-1;switch(n){case"L":return _n(mn(Nn.month,r),a);case"LL":return _n(yn(2,r),a);case"Lo":return _n(s.ordinalNumber(r,{unit:"month"}),a);case"LLL":return s.month(r,{width:"abbreviated",context:"standalone"})||s.month(r,{width:"narrow",context:"standalone"});case"LLLLL":return s.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return s.month(r,{width:"wide",context:"standalone"})||s.month(r,{width:"abbreviated",context:"standalone"})||s.month(r,{width:"narrow",context:"standalone"})}}validate(r,n){return n>=0&&n<=11}set(r,n,s){return r.setMonth(s,1),r.setHours(0,0,0,0),r}incompatibleTokens=["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]}function XJ(t,r,n){const s=Xr(t,n?.in),a=n5(s,n)-r;return s.setDate(s.getDate()-a*7),Xr(s,n?.in)}class ZJ extends Rr{priority=100;parse(r,n,s){switch(n){case"w":return mn(Nn.week,r);case"wo":return s.ordinalNumber(r,{unit:"week"});default:return yn(n.length,r)}}validate(r,n){return n>=1&&n<=53}set(r,n,s,a){return go(XJ(r,s,a),a)}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","i","t","T"]}function JJ(t,r,n){const s=Xr(t,n?.in),a=r5(s,n)-r;return s.setDate(s.getDate()-a*7),s}class eee extends Rr{priority=100;parse(r,n,s){switch(n){case"I":return mn(Nn.week,r);case"Io":return s.ordinalNumber(r,{unit:"week"});default:return yn(n.length,r)}}validate(r,n){return n>=1&&n<=53}set(r,n,s){return Rd(JJ(r,s))}incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]}const tee=[31,28,31,30,31,30,31,31,30,31,30,31],ree=[31,29,31,30,31,30,31,31,30,31,30,31];class nee extends Rr{priority=90;subPriority=1;parse(r,n,s){switch(n){case"d":return mn(Nn.date,r);case"do":return s.ordinalNumber(r,{unit:"date"});default:return yn(n.length,r)}}validate(r,n){const s=r.getFullYear(),a=d5(s),l=r.getMonth();return a?n>=1&&n<=ree[l]:n>=1&&n<=tee[l]}set(r,n,s){return r.setDate(s),r.setHours(0,0,0,0),r}incompatibleTokens=["Y","R","q","Q","w","I","D","i","e","c","t","T"]}class see extends Rr{priority=90;subpriority=1;parse(r,n,s){switch(n){case"D":case"DD":return mn(Nn.dayOfYear,r);case"Do":return s.ordinalNumber(r,{unit:"date"});default:return yn(n.length,r)}}validate(r,n){const s=r.getFullYear();return d5(s)?n>=1&&n<=366:n>=1&&n<=365}set(r,n,s){return r.setMonth(0,s),r.setHours(0,0,0,0),r}incompatibleTokens=["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]}function t_(t,r,n){const s=kc(),a=n?.weekStartsOn??n?.locale?.options?.weekStartsOn??s.weekStartsOn??s.locale?.options?.weekStartsOn??0,l=Xr(t,n?.in),c=l.getDay(),d=(r%7+7)%7,h=7-a,x=r<0||r>6?r-(c+h)%7:(d+h)%7-(c+h)%7;return e5(l,x,n)}class aee extends Rr{priority=90;parse(r,n,s){switch(n){case"E":case"EE":case"EEE":return s.day(r,{width:"abbreviated",context:"formatting"})||s.day(r,{width:"short",context:"formatting"})||s.day(r,{width:"narrow",context:"formatting"});case"EEEEE":return s.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return s.day(r,{width:"short",context:"formatting"})||s.day(r,{width:"narrow",context:"formatting"});case"EEEE":default:return s.day(r,{width:"wide",context:"formatting"})||s.day(r,{width:"abbreviated",context:"formatting"})||s.day(r,{width:"short",context:"formatting"})||s.day(r,{width:"narrow",context:"formatting"})}}validate(r,n){return n>=0&&n<=6}set(r,n,s,a){return r=t_(r,s,a),r.setHours(0,0,0,0),r}incompatibleTokens=["D","i","e","c","t","T"]}class iee extends Rr{priority=90;parse(r,n,s,a){const l=c=>{const u=Math.floor((c-1)/7)*7;return(c+a.weekStartsOn+6)%7+u};switch(n){case"e":case"ee":return _n(yn(n.length,r),l);case"eo":return _n(s.ordinalNumber(r,{unit:"day"}),l);case"eee":return s.day(r,{width:"abbreviated",context:"formatting"})||s.day(r,{width:"short",context:"formatting"})||s.day(r,{width:"narrow",context:"formatting"});case"eeeee":return s.day(r,{width:"narrow",context:"formatting"});case"eeeeee":return s.day(r,{width:"short",context:"formatting"})||s.day(r,{width:"narrow",context:"formatting"});case"eeee":default:return s.day(r,{width:"wide",context:"formatting"})||s.day(r,{width:"abbreviated",context:"formatting"})||s.day(r,{width:"short",context:"formatting"})||s.day(r,{width:"narrow",context:"formatting"})}}validate(r,n){return n>=0&&n<=6}set(r,n,s,a){return r=t_(r,s,a),r.setHours(0,0,0,0),r}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]}class lee extends Rr{priority=90;parse(r,n,s,a){const l=c=>{const u=Math.floor((c-1)/7)*7;return(c+a.weekStartsOn+6)%7+u};switch(n){case"c":case"cc":return _n(yn(n.length,r),l);case"co":return _n(s.ordinalNumber(r,{unit:"day"}),l);case"ccc":return s.day(r,{width:"abbreviated",context:"standalone"})||s.day(r,{width:"short",context:"standalone"})||s.day(r,{width:"narrow",context:"standalone"});case"ccccc":return s.day(r,{width:"narrow",context:"standalone"});case"cccccc":return s.day(r,{width:"short",context:"standalone"})||s.day(r,{width:"narrow",context:"standalone"});case"cccc":default:return s.day(r,{width:"wide",context:"standalone"})||s.day(r,{width:"abbreviated",context:"standalone"})||s.day(r,{width:"short",context:"standalone"})||s.day(r,{width:"narrow",context:"standalone"})}}validate(r,n){return n>=0&&n<=6}set(r,n,s,a){return r=t_(r,s,a),r.setHours(0,0,0,0),r}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]}function oee(t,r,n){const s=Xr(t,n?.in),a=LJ(s,n),l=r-a;return e5(s,l,n)}class cee extends Rr{priority=90;parse(r,n,s){const a=l=>l===0?7:l;switch(n){case"i":case"ii":return yn(n.length,r);case"io":return s.ordinalNumber(r,{unit:"day"});case"iii":return _n(s.day(r,{width:"abbreviated",context:"formatting"})||s.day(r,{width:"short",context:"formatting"})||s.day(r,{width:"narrow",context:"formatting"}),a);case"iiiii":return _n(s.day(r,{width:"narrow",context:"formatting"}),a);case"iiiiii":return _n(s.day(r,{width:"short",context:"formatting"})||s.day(r,{width:"narrow",context:"formatting"}),a);case"iiii":default:return _n(s.day(r,{width:"wide",context:"formatting"})||s.day(r,{width:"abbreviated",context:"formatting"})||s.day(r,{width:"short",context:"formatting"})||s.day(r,{width:"narrow",context:"formatting"}),a)}}validate(r,n){return n>=1&&n<=7}set(r,n,s){return r=oee(r,s),r.setHours(0,0,0,0),r}incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]}class dee extends Rr{priority=80;parse(r,n,s){switch(n){case"a":case"aa":case"aaa":return s.dayPeriod(r,{width:"abbreviated",context:"formatting"})||s.dayPeriod(r,{width:"narrow",context:"formatting"});case"aaaaa":return s.dayPeriod(r,{width:"narrow",context:"formatting"});case"aaaa":default:return s.dayPeriod(r,{width:"wide",context:"formatting"})||s.dayPeriod(r,{width:"abbreviated",context:"formatting"})||s.dayPeriod(r,{width:"narrow",context:"formatting"})}}set(r,n,s){return r.setHours(e_(s),0,0,0),r}incompatibleTokens=["b","B","H","k","t","T"]}class uee extends Rr{priority=80;parse(r,n,s){switch(n){case"b":case"bb":case"bbb":return s.dayPeriod(r,{width:"abbreviated",context:"formatting"})||s.dayPeriod(r,{width:"narrow",context:"formatting"});case"bbbbb":return s.dayPeriod(r,{width:"narrow",context:"formatting"});case"bbbb":default:return s.dayPeriod(r,{width:"wide",context:"formatting"})||s.dayPeriod(r,{width:"abbreviated",context:"formatting"})||s.dayPeriod(r,{width:"narrow",context:"formatting"})}}set(r,n,s){return r.setHours(e_(s),0,0,0),r}incompatibleTokens=["a","B","H","k","t","T"]}class mee extends Rr{priority=80;parse(r,n,s){switch(n){case"B":case"BB":case"BBB":return s.dayPeriod(r,{width:"abbreviated",context:"formatting"})||s.dayPeriod(r,{width:"narrow",context:"formatting"});case"BBBBB":return s.dayPeriod(r,{width:"narrow",context:"formatting"});case"BBBB":default:return s.dayPeriod(r,{width:"wide",context:"formatting"})||s.dayPeriod(r,{width:"abbreviated",context:"formatting"})||s.dayPeriod(r,{width:"narrow",context:"formatting"})}}set(r,n,s){return r.setHours(e_(s),0,0,0),r}incompatibleTokens=["a","b","t","T"]}class hee extends Rr{priority=70;parse(r,n,s){switch(n){case"h":return mn(Nn.hour12h,r);case"ho":return s.ordinalNumber(r,{unit:"hour"});default:return yn(n.length,r)}}validate(r,n){return n>=1&&n<=12}set(r,n,s){const a=r.getHours()>=12;return a&&s<12?r.setHours(s+12,0,0,0):!a&&s===12?r.setHours(0,0,0,0):r.setHours(s,0,0,0),r}incompatibleTokens=["H","K","k","t","T"]}class fee extends Rr{priority=70;parse(r,n,s){switch(n){case"H":return mn(Nn.hour23h,r);case"Ho":return s.ordinalNumber(r,{unit:"hour"});default:return yn(n.length,r)}}validate(r,n){return n>=0&&n<=23}set(r,n,s){return r.setHours(s,0,0,0),r}incompatibleTokens=["a","b","h","K","k","t","T"]}class xee extends Rr{priority=70;parse(r,n,s){switch(n){case"K":return mn(Nn.hour11h,r);case"Ko":return s.ordinalNumber(r,{unit:"hour"});default:return yn(n.length,r)}}validate(r,n){return n>=0&&n<=11}set(r,n,s){return r.getHours()>=12&&s<12?r.setHours(s+12,0,0,0):r.setHours(s,0,0,0),r}incompatibleTokens=["h","H","k","t","T"]}class pee extends Rr{priority=70;parse(r,n,s){switch(n){case"k":return mn(Nn.hour24h,r);case"ko":return s.ordinalNumber(r,{unit:"hour"});default:return yn(n.length,r)}}validate(r,n){return n>=1&&n<=24}set(r,n,s){const a=s<=24?s%24:s;return r.setHours(a,0,0,0),r}incompatibleTokens=["a","b","h","H","K","t","T"]}class gee extends Rr{priority=60;parse(r,n,s){switch(n){case"m":return mn(Nn.minute,r);case"mo":return s.ordinalNumber(r,{unit:"minute"});default:return yn(n.length,r)}}validate(r,n){return n>=0&&n<=59}set(r,n,s){return r.setMinutes(s,0,0),r}incompatibleTokens=["t","T"]}class yee extends Rr{priority=50;parse(r,n,s){switch(n){case"s":return mn(Nn.second,r);case"so":return s.ordinalNumber(r,{unit:"second"});default:return yn(n.length,r)}}validate(r,n){return n>=0&&n<=59}set(r,n,s){return r.setSeconds(s,0),r}incompatibleTokens=["t","T"]}class vee extends Rr{priority=30;parse(r,n){const s=a=>Math.trunc(a*Math.pow(10,-n.length+3));return _n(yn(n.length,r),s)}set(r,n,s){return r.setMilliseconds(s),r}incompatibleTokens=["t","T"]}class jee extends Rr{priority=10;parse(r,n){switch(n){case"X":return ji(vi.basicOptionalMinutes,r);case"XX":return ji(vi.basic,r);case"XXXX":return ji(vi.basicOptionalSeconds,r);case"XXXXX":return ji(vi.extendedOptionalSeconds,r);case"XXX":default:return ji(vi.extended,r)}}set(r,n,s){return n.timestampIsSet?r:Hn(r,r.getTime()-Ld(r)-s)}incompatibleTokens=["t","T","x"]}class bee extends Rr{priority=10;parse(r,n){switch(n){case"x":return ji(vi.basicOptionalMinutes,r);case"xx":return ji(vi.basic,r);case"xxxx":return ji(vi.basicOptionalSeconds,r);case"xxxxx":return ji(vi.extendedOptionalSeconds,r);case"xxx":default:return ji(vi.extended,r)}}set(r,n,s){return n.timestampIsSet?r:Hn(r,r.getTime()-Ld(r)-s)}incompatibleTokens=["t","T","X"]}class wee extends Rr{priority=40;parse(r){return o5(r)}set(r,n,s){return[Hn(r,s*1e3),{timestampIsSet:!0}]}incompatibleTokens="*"}class Nee extends Rr{priority=20;parse(r){return o5(r)}set(r,n,s){return[Hn(r,s),{timestampIsSet:!0}]}incompatibleTokens="*"}const _ee={G:new zJ,y:new BJ,Y:new WJ,R:new HJ,u:new VJ,Q:new YJ,q:new KJ,M:new GJ,L:new QJ,w:new ZJ,I:new eee,d:new nee,D:new see,E:new aee,e:new iee,c:new lee,i:new cee,a:new dee,b:new uee,B:new mee,h:new hee,H:new fee,K:new xee,k:new pee,m:new gee,s:new yee,S:new vee,X:new jee,x:new bee,t:new wee,T:new Nee},Cee=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,See=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,kee=/^'([^]*?)'?$/,Aee=/''/g,Eee=/\S/,Mee=/[a-zA-Z]/;function nx(t,r,n,s){const a=()=>Hn(n,NaN),l=RJ(),c=l.locale??ZN,u=l.firstWeekContainsDate??l.locale?.options?.firstWeekContainsDate??1,d=l.weekStartsOn??l.locale?.options?.weekStartsOn??0;if(!r)return t?a():Xr(n,s?.in);const h={firstWeekContainsDate:u,weekStartsOn:d,locale:c},x=[new UJ(s?.in,n)],p=r.match(See).map(N=>{const _=N[0];if(_ in z0){const S=z0[_];return S(N,c.formatLong)}return N}).join("").match(Cee),y=[];for(let N of p){i5(N)&&B0(N,r,t),a5(N)&&B0(N,r,t);const _=N[0],S=_ee[_];if(S){const{incompatibleTokens:k}=S;if(Array.isArray(k)){const A=y.find(O=>k.includes(O.token)||O.token===_);if(A)throw new RangeError(`The format string mustn't contain \`${A.fullToken}\` and \`${N}\` at the same time`)}else if(S.incompatibleTokens==="*"&&y.length>0)throw new RangeError(`The format string mustn't contain \`${N}\` and any other token at the same time`);y.push({token:_,fullToken:N});const E=S.run(t,N,c.match,h);if(!E)return a();x.push(E.setter),t=E.rest}else{if(_.match(Mee))throw new RangeError("Format string contains an unescaped latin alphabet character `"+_+"`");if(N==="''"?N="'":_==="'"&&(N=Tee(N)),t.indexOf(N)===0)t=t.slice(N.length);else return a()}}if(t.length>0&&Eee.test(t))return a();const v=x.map(N=>N.priority).sort((N,_)=>_-N).filter((N,_,S)=>S.indexOf(N)===_).map(N=>x.filter(_=>_.priority===N).sort((_,S)=>S.subPriority-_.subPriority)).map(N=>N[0]);let w=Xr(n,s?.in);if(isNaN(+w))return a();const b={};for(const N of v){if(!N.validate(w,h))return a();const _=N.set(w,b,h);Array.isArray(_)?(w=_[0],Object.assign(b,_[1])):w=_}return w}function Tee(t){return t.match(kee)[1].replace(Aee,"'")}function Oee({selected:t,onSelect:r,weekStartsOn:n=1,className:s}){const[a,l]=f.useState(()=>{const p=new Date;return new Date(p.getFullYear(),p.getMonth(),1)}),c=new Date(a);c.setDate(1-(a.getDay()+7-n)%7);const u=[];for(let p=0;p<42;p++){const y=new Date(c);y.setDate(c.getDate()+p),u.push({date:y,isCurrentMonth:y.getMonth()===a.getMonth()})}const d=()=>{l(p=>new Date(p.getFullYear(),p.getMonth()-1,1))},h=()=>{l(p=>new Date(p.getFullYear(),p.getMonth()+1,1))},x=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"];return n===0&&x.unshift(x.pop()),e.jsxs("div",{className:ze("p-2",s),children:[e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsx("button",{onClick:d,className:"px-2",children:"<"}),e.jsx("span",{className:"font-medium",children:Ed(a,"MMMM yyyy")}),e.jsx("button",{onClick:h,className:"px-2",children:">"})]}),e.jsx("div",{className:"grid grid-cols-7 text-center text-xs font-medium mb-1",children:x.map(p=>e.jsx("div",{children:p},p))}),e.jsx("div",{className:"grid grid-cols-7 gap-1",children:u.map(({date:p,isCurrentMonth:y})=>{const v=t&&p.toDateString()===t.toDateString();return e.jsx("button",{onClick:()=>r?.(p),disabled:!y,className:ze("h-10 w-10 flex items-center justify-center rounded hover:bg-gray-700 transition-colors",v?"bg-blue-500 text-white":"",y?"text-white":"text-gray-400"),children:p.getDate()},p.toISOString())})})]})}function Rn({value:t,onChange:r,placeholder:n="Pick a date",disabled:s=!1,className:a}){const[l,c]=f.useState(()=>{if(!t)return;let d=nx(t,"yyyy-MM-dd",new Date);return isNaN(d.getTime())&&(d=nx(t,"dd.MM.yyyy",new Date)),isNaN(d.getTime())?void 0:d});f.useEffect(()=>{if(!t)c(void 0);else{let d=nx(t,"yyyy-MM-dd",new Date);isNaN(d.getTime())&&(d=nx(t,"dd.MM.yyyy",new Date)),c(isNaN(d.getTime())?void 0:d)}},[t]);const u=d=>{c(d),r?.(Ed(d,"yyyy-MM-dd"))};return e.jsxs(dn,{children:[e.jsx(un,{asChild:!0,children:e.jsxs(q,{variant:"outline","data-empty":!l,className:ze("data-[empty=true]:text-muted-foreground w-full justify-start text-left font-normal",a),disabled:s,children:[e.jsx(is,{className:"mr-2 h-4 w-4"}),l?Ed(l,"dd.MM.yyyy"):e.jsx("span",{children:n})]})}),e.jsx(sn,{className:"w-[280px] p-0",children:e.jsx(Oee,{selected:l,onSelect:u,weekStartsOn:1})})]})}function Jl({value:t,onChange:r,name:n,required:s=!1,...a}){return e.jsxs("div",{className:"relative",children:[e.jsx(Rn,{value:t,onChange:r,...a}),e.jsx("input",{type:"hidden",name:n,value:t?no(t):"",required:s})]})}function Pee({isOpen:t,onClose:r,onSuccess:n,modelId:s,modelName:a,warrantyMonths:l}){const{user:c}=hr(),[u,d]=f.useState([]),[h,x]=f.useState(!1),[p,y]=f.useState(!1),[v,w]=f.useState(""),[b,N]=f.useState(null),[_,S]=f.useState(""),[k,E]=f.useState(new Date().toISOString().split("T")[0]),[A,O]=f.useState(""),[z,R]=f.useState(""),[G,J]=f.useState("new"),[ie,V]=f.useState(""),[xe,pe]=f.useState(""),[re,M]=f.useState(""),[B,L]=f.useState(!1),[T,F]=f.useState(""),[I,Q]=f.useState(!1),ee=(Ve=>{if(!Ve)return"";const lt=new Date(Ve);return lt.setMonth(lt.getMonth()+l),lt.toISOString().split("T")[0]})(k),[ye,he]=f.useState(["AMS","Kamer.ba"]),[te,De]=f.useState("");f.useEffect(()=>{t&&(ne(),$e())},[t]);const ne=async()=>{x(!0),w("");try{const Ve=await de.getCustomers(),lt=Ve.data||Ve;d(Array.isArray(lt)?lt:[])}catch(Ve){w("Failed to load customers"),console.error("Error fetching customers:",Ve)}finally{x(!1)}},$e=async()=>{try{const lt=(await de.request("/assigned-machines/purchased-at-options")).data||[],yt=[...new Set(["AMS","Kamer.ba",...lt])];he(yt)}catch(Ve){console.error("Error fetching purchased_at options:",Ve),he(["AMS","Kamer.ba"])}},ge=u.filter(Ve=>Ve.name.toLowerCase().includes(re.toLowerCase())||Ve.email&&Ve.email.toLowerCase().includes(re.toLowerCase())||Ve.company_name&&Ve.company_name.toLowerCase().includes(re.toLowerCase())),we=ye.filter(Ve=>Ve.toLowerCase().includes(T.toLowerCase())),_e=async Ve=>{if(Ve.preventDefault(),!b||!_.trim()){w("Please select a customer and enter a serial number");return}y(!0),w("");try{const lt={serial_number:_.trim(),model_id:parseInt(s),customer_id:parseInt(b.id),purchase_date:k,warranty_expiry_date:ee,sale_price:A?parseFloat(A):void 0,receipt_number:z||void 0,machine_condition:G,description:ie||void 0,purchased_at:xe||void 0,sold_by_user_id:c?.id?parseInt(c.id):void 0,added_by_user_id:c?.id?parseInt(c.id):void 0,is_sale:!!A,sale_date:k};await de.createAssignedMachine(lt),n(),r(),Ye()}catch(lt){w("Failed to assign machine"),console.error("Error assigning machine:",lt)}finally{y(!1)}},Ye=()=>{N(null),S(""),E(new Date().toISOString().split("T")[0]),O(""),R(""),J("new"),V(""),pe(""),De(""),M(""),L(!1),F(""),Q(!1),w("")},ht=()=>{Ye(),r()};return e.jsx(Ft,{open:t,onOpenChange:ht,children:e.jsxs(Rt,{className:"max-w-2xl max-h-[90vh] overflow-y-auto","aria-describedby":"assign-machine-description",children:[e.jsxs(qt,{children:[e.jsxs(Lt,{children:["Assign Machine - ",a]}),e.jsx(Ut,{id:"assign-machine-description",children:"Assign a serial number of this model to a customer."})]}),h?e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx(Nt,{className:"h-8 w-8 animate-spin"}),e.jsx("span",{className:"ml-2",children:"Loading data..."})]}):e.jsxs("form",{onSubmit:_e,className:"space-y-6",children:[v&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-3",children:e.jsx("p",{className:"text-red-600 text-sm",children:v})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"customer",children:"Customer *"}),e.jsxs(dn,{open:B,onOpenChange:L,children:[e.jsx(un,{asChild:!0,children:e.jsxs(q,{variant:"outline",role:"combobox","aria-expanded":B,className:"w-full justify-between",disabled:p,children:[b?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ot,{className:"h-4 w-4"}),e.jsx("span",{children:b.name}),b.company_name&&e.jsx(Oe,{variant:"secondary",children:b.company_name})]}):"Select customer...",e.jsx(cn,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),e.jsxs(sn,{className:"w-[400px] p-0",children:[e.jsx("div",{className:"border-b p-3",children:e.jsxs("div",{className:"relative",children:[e.jsx(nr,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(be,{placeholder:"Search customers...",className:"pl-10",value:re,onChange:Ve=>M(Ve.target.value)})]})}),e.jsx("div",{className:"max-h-[300px] overflow-y-auto",children:h?e.jsxs("div",{className:"flex items-center justify-center py-6",children:[e.jsx(Nt,{className:"h-6 w-6 animate-spin"}),e.jsx("span",{className:"ml-2",children:"Loading customers..."})]}):ge.length===0?e.jsx("div",{className:"p-4 text-center text-muted-foreground",children:"No customers found."}):e.jsx("div",{className:"p-1",children:ge.map(Ve=>e.jsxs("div",{onClick:()=>{N(Ve),L(!1)},className:ze("flex items-center gap-3 p-2 rounded-sm cursor-pointer hover:bg-accent hover:text-accent-foreground transition-colors",b?.id===Ve.id&&"bg-accent"),children:[e.jsx(Gr,{className:ze("h-4 w-4",b?.id===Ve.id?"opacity-100":"opacity-0")}),e.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-primary/10",children:e.jsx(Ot,{className:"w-4 h-4 text-primary"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium",children:Ve.name}),Ve.company_name&&e.jsx("p",{className:"text-sm text-muted-foreground",children:Ve.company_name})]})]},Ve.id))})})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"serialNumber",children:"Serial Number *"}),e.jsxs("div",{className:"relative",children:[e.jsx(Jt,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),e.jsx(be,{id:"serialNumber",value:_,onChange:Ve=>S(Ve.target.value),className:"pl-10",disabled:p,placeholder:"Enter serial number...",required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"purchaseDate",children:"Purchase Date *"}),e.jsx(Rn,{value:k,onChange:Ve=>E(Ve),placeholder:"Select purchase date",disabled:p})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"condition",children:"Machine Condition"}),e.jsxs(tt,{value:G,onValueChange:J,disabled:p,children:[e.jsx(Je,{children:e.jsx(rt,{})}),e.jsxs(et,{children:[e.jsx(Y,{value:"new",children:"New"}),e.jsx(Y,{value:"used",children:"Used"}),e.jsx(Y,{value:"refurbished",children:"Refurbished"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"salePrice",children:"Sale Price (KM)"}),e.jsx(be,{id:"salePrice",type:"number",step:"0.01",min:"0",value:A,onChange:Ve=>O(Ve.target.value),disabled:p,placeholder:"0.00 KM"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"receiptNumber",children:"Receipt Number"}),e.jsx(be,{id:"receiptNumber",value:z,onChange:Ve=>R(Ve.target.value),disabled:p,placeholder:"Enter receipt number..."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"purchasedAt",children:"Purchased At"}),e.jsxs(dn,{open:I,onOpenChange:Q,children:[e.jsx(un,{asChild:!0,children:e.jsxs(q,{variant:"outline",role:"combobox","aria-expanded":I,className:"w-full justify-between",disabled:p,children:[xe?e.jsx("span",{children:xe}):"Select where purchased...",e.jsx(cn,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),e.jsxs(sn,{className:"w-[400px] p-0",children:[e.jsx("div",{className:"border-b p-3",children:e.jsxs("div",{className:"relative",children:[e.jsx(nr,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(be,{placeholder:"Search or type new shop name...",className:"pl-10",value:T,onChange:Ve=>F(Ve.target.value)})]})}),e.jsxs("div",{className:"max-h-[300px] overflow-y-auto",children:[T&&!we.includes(T)&&e.jsx("div",{className:"p-1 border-b",children:e.jsxs("div",{onClick:()=>{pe(T),Q(!1)},className:"flex items-center gap-3 p-2 rounded-sm cursor-pointer hover:bg-accent hover:text-accent-foreground transition-colors",children:[e.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-green-100",children:e.jsx("span",{className:"text-green-600 text-sm font-bold",children:"+"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("p",{className:"font-medium",children:['Add "',T,'"']}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Create new shop"})]})]})}),we.length===0?e.jsx("div",{className:"p-4 text-center text-muted-foreground",children:"No options found."}):e.jsx("div",{className:"p-1",children:we.map(Ve=>e.jsxs("div",{onClick:()=>{pe(Ve),Q(!1)},className:ze("flex items-center gap-3 p-2 rounded-sm cursor-pointer hover:bg-accent hover:text-accent-foreground transition-colors",xe===Ve&&"bg-accent"),children:[e.jsx(Gr,{className:ze("h-4 w-4",xe===Ve?"opacity-100":"opacity-0")}),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"font-medium",children:Ve})})]},Ve))})]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"description",children:"Description"}),e.jsx(be,{id:"description",value:ie,onChange:Ve=>V(Ve.target.value),disabled:p,placeholder:"Enter description..."})]}),ee&&e.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-md p-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Gr,{className:"h-4 w-4 text-orange-600"}),e.jsx("span",{className:"text-sm font-medium text-orange-800",children:"Warranty Information"})]}),e.jsxs("div",{className:"mt-1 text-sm text-orange-700",children:[e.jsxs("div",{children:["Warranty Period: ",l," months"]}),e.jsxs("div",{children:["Warranty Expires: ",jt(ee)]})]})]}),e.jsxs(Dr,{children:[e.jsx(q,{type:"button",variant:"outline",onClick:ht,disabled:p,children:"Cancel"}),e.jsx(q,{type:"submit",disabled:p||!b||!_.trim(),children:p?e.jsxs(e.Fragment,{children:[e.jsx(Nt,{className:"mr-2 h-4 w-4 animate-spin"}),"Assigning..."]}):"Assign Machine"})]})]})]})})}function Dee(){const{modelId:t}=oi(),r=er(),{hasPermission:n}=hr(),[s,a]=f.useState(null),[l,c]=f.useState([]),[u,d]=f.useState(!0),[h,x]=f.useState(""),[p,y]=f.useState(""),[v,w]=f.useState(!1),[b,N]=f.useState(!1),[_,S]=f.useState(null),[k,E]=f.useState([]),[A,O]=f.useState(!1),[z,R]=f.useState(""),[G,J]=f.useState(!1),[ie,V]=f.useState(""),[xe,pe]=f.useState([]),[re,M]=f.useState(!1),[B,L]=f.useState(!1),[T,F]=f.useState(null),[I,Q]=f.useState(!1),[W,ee]=f.useState(!1);f.useEffect(()=>{t&&te()},[t]),f.useEffect(()=>{ye(),he()},[]);const ye=async()=>{try{const Re=await de.getMachineCategories();E(Re.data||[])}catch(Re){console.error("Error fetching categories:",Re)}},he=async()=>{try{const Be=((await de.getSuppliers({limit:100})).data||[]).map(st=>st.name);pe(Be)}catch(Re){console.error("Error fetching manufacturers:",Re),pe([])}},te=async()=>{try{d(!0);const Re=await de.getMachineModel(t),H=Re.data||Re,{model:Be,serials:st}=H;Be&&a(Be),st&&c(st)}catch(Re){y("Failed to load machine model details"),console.error("Error fetching machine model details:",Re)}finally{d(!1)}},De=(Re,H)=>H?Re?e.jsx(Oe,{variant:"default",className:"bg-green-100 text-green-800",children:"Active"}):e.jsx(Oe,{variant:"destructive",children:"Expired"}):e.jsx(Oe,{variant:"outline",children:"No Warranty"}),ne=Re=>{switch(Re){case"new":return e.jsx(Oe,{variant:"default",className:"bg-green-100 text-green-800",children:"New"});case"used":return e.jsx(Oe,{variant:"outline",className:"border-orange-300 text-orange-700",children:"Used"});default:return e.jsx(Oe,{variant:"outline",children:Re||"Unknown"})}},$e=l.filter(Re=>Re.serial_number.toLowerCase().includes(h.toLowerCase())||Re.customer_name.toLowerCase().includes(h.toLowerCase())||Re.receipt_number&&Re.receipt_number.toLowerCase().includes(h.toLowerCase())),ge=l.filter(Re=>Re.is_sale&&Re.sale_price).reduce((Re,H)=>Re+(parseFloat(H.sale_price?.toString()||"0")||0),0),we=l.filter(Re=>Re.is_sale&&Re.sale_price),_e=we.length>0?we.reduce((Re,H)=>Re+(parseFloat(H.sale_price?.toString()||"0")||0),0)/we.length:0,Ye=()=>{te()},ht=async()=>{if(!_||!_.id){Ne.error("Invalid model data"),console.error("editingModel is missing or has no id:",_);return}try{const Re={name:_.name,manufacturer:_.manufacturer,catalogue_number:_.catalogue_number||null,warranty_months:_.warranty_months,description:_.description||null};_.category_id&&typeof _.category_id=="number"&&(Re.category_id=_.category_id),console.log("Updating model:",_.id,Re),await de.updateMachineModel(_.id,Re),Ne.success("Machine model updated successfully"),await te(),N(!1),S(null),R(""),V("")}catch(Re){console.error("Error updating machine model:",Re),Ne.error(Re.message||"Failed to update machine model")}},Ve=Re=>{F(Re),M(!0)},lt=async()=>{if(T)try{L(!0),await de.deleteMachine(T.assigned_machine_id),Ne.success("Machine permanently deleted successfully."),M(!1),F(null),te()}catch(Re){console.error("Error deleting machine:",Re);const H=Re.response?.data?.message||"Failed to delete machine. Please try again.";Ne.error(H)}finally{L(!1)}},yt=async()=>{if(s)try{ee(!0),await de.deleteMachineModel(s.id),Ne.success("Machine model deleted successfully"),r("/machines")}catch(Re){console.error("Error deleting machine model:",Re),Ne.error(Re.message||"Failed to delete machine model. It may have associated machines.")}finally{ee(!1)}};return u?e.jsx(gt,{children:e.jsxs("div",{className:"flex items-center justify-center h-64",children:[e.jsx(Nt,{className:"h-8 w-8 animate-spin"}),e.jsx("span",{className:"ml-2",children:"Loading machine model details..."})]})}):p?e.jsx(gt,{children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-red-600 mb-4",children:p}),e.jsx(q,{onClick:te,children:"Try Again"})]})})}):s?e.jsx(gt,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs(q,{variant:"outline",onClick:()=>r("/machines"),className:"flex items-center space-x-2",children:[e.jsx(Cn,{className:"h-4 w-4"}),e.jsx("span",{children:"Back"})]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:s.name}),e.jsxs("p",{className:"text-muted-foreground",children:[s.manufacturer," • ",s.catalogue_number||"No catalogue number"]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(q,{variant:"outline",onClick:()=>{console.log("Opening edit dialog for model:",s),S({...s}),N(!0)},children:[e.jsx(xr,{className:"mr-2 h-4 w-4"}),"Edit Model"]}),n("machines:assign")&&e.jsxs(q,{onClick:()=>w(!0),children:[e.jsx(Vt,{className:"mr-2 h-4 w-4"}),"Assign Machine"]}),e.jsxs(q,{variant:"destructive",onClick:()=>Q(!0),children:[e.jsx(br,{className:"mr-2 h-4 w-4"}),"Delete Model"]})]})]}),e.jsxs(se,{children:[e.jsx(ue,{children:e.jsx(fe,{children:"Model Information"})}),e.jsxs(ae,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Jt,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm font-medium",children:"Manufacturer"})]}),e.jsx("p",{className:"text-lg font-semibold",children:s.manufacturer})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Hs,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm font-medium",children:"Warranty Period"})]}),e.jsxs("p",{className:"text-lg font-semibold",children:[s.warranty_months," months"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(cl,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm font-medium",children:"Category"})]}),e.jsx("p",{className:"text-lg font-semibold",children:s.category_name||"Uncategorized"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ot,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm font-medium",children:"Total Assigned"})]}),e.jsx("p",{className:"text-lg font-semibold",children:s.total_assigned})]})]}),s.description&&e.jsxs("div",{className:"mt-6 pt-6 border-t",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(Jt,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm font-medium",children:"Description"})]}),e.jsx("p",{className:"text-muted-foreground",children:s.description})]})]})]}),e.jsxs(se,{children:[e.jsx(ue,{children:e.jsx(fe,{children:"Sales Metrics"})}),e.jsx(ae,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ar,{className:"h-4 w-4 text-green-500"}),e.jsx("span",{className:"text-sm font-medium",children:"Total Sales"})]}),e.jsx("p",{className:"text-2xl font-bold",children:l.filter(Re=>Re.is_sale).length})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ot,{className:"h-4 w-4 text-orange-500"}),e.jsx("span",{className:"text-sm font-medium",children:"Total Assignments"})]}),e.jsx("p",{className:"text-2xl font-bold",children:l.length})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Xm,{className:"h-4 w-4 text-green-500"}),e.jsx("span",{className:"text-sm font-medium",children:"Total Revenue"})]}),e.jsx("p",{className:"text-2xl font-bold",children:at(ge)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Jt,{className:"h-4 w-4 text-purple-500"}),e.jsx("span",{className:"text-sm font-medium",children:"Avg Sale Price"})]}),e.jsx("p",{className:"text-2xl font-bold",children:at(_e)})]})]})})]}),e.jsxs(se,{children:[e.jsx(ue,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(fe,{children:"Assigned Machines"}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsxs("div",{className:"relative",children:[e.jsx(nr,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),e.jsx(be,{placeholder:"Search machines...",value:h,onChange:Re=>x(Re.target.value),className:"pl-10 w-80"})]})})]})}),e.jsx(ae,{children:e.jsxs(ir,{children:[e.jsx(lr,{children:e.jsxs(ft,{children:[e.jsx(me,{children:"Serial Number"}),e.jsx(me,{children:"Customer"}),e.jsx(me,{children:"Type"}),e.jsx(me,{children:"Condition"}),e.jsx(me,{children:"Purchase Date"}),e.jsx(me,{children:"Warranty Status"}),e.jsx(me,{children:"Sale Price"}),e.jsx(me,{children:"Receipt"}),e.jsx(me,{className:"text-right",children:"Actions"})]})}),e.jsx(or,{children:$e.length===0?e.jsx(ft,{children:e.jsx(oe,{colSpan:9,className:"text-center py-8",children:e.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[e.jsx(Jt,{className:"h-8 w-8 text-muted-foreground"}),e.jsx("p",{className:"text-muted-foreground",children:"No assigned machines found"})]})})}):$e.map((Re,H)=>e.jsxs(ft,{onClick:()=>r(`/machines/${Re.assigned_machine_id}`),className:"cursor-pointer hover:bg-muted/50",children:[e.jsx(oe,{className:"font-medium",children:e.jsx(q,{variant:"link",className:"p-0 h-auto font-medium",onClick:Be=>{Be.stopPropagation(),r(`/machines/${Re.assigned_machine_id}`)},children:Re.serial_number})}),e.jsx(oe,{children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:Re.customer_name}),Re.customer_email&&e.jsx("div",{className:"text-sm text-muted-foreground",children:Re.customer_email})]})}),e.jsx(oe,{children:e.jsx(Oe,{variant:Re.is_sale?"default":"outline",className:Re.is_sale?"bg-green-100 text-green-800":"",children:Re.is_sale?"Sale":"Assignment"})}),e.jsx(oe,{children:ne(Re.machine_condition)}),e.jsx(oe,{className:"text-sm text-muted-foreground",children:jt(Re.purchase_date)}),e.jsx(oe,{children:De(Re.warranty_active,Re.warranty_expiry_date)}),e.jsx(oe,{className:"text-sm text-muted-foreground",children:Re.sale_price?at(Re.sale_price):"N/A"}),e.jsx(oe,{className:"text-sm text-muted-foreground",children:Re.receipt_number||"N/A"}),e.jsx(oe,{className:"text-right",children:e.jsxs(Cr,{children:[e.jsx(Sr,{asChild:!0,children:e.jsx(q,{variant:"ghost",className:"h-8 w-8 p-0",children:e.jsx(ss,{className:"h-4 w-4"})})}),e.jsxs(wr,{align:"end",children:[e.jsx(Tr,{children:"Actions"}),e.jsxs(ct,{onClick:Be=>{Be.stopPropagation(),r(`/machines/${Re.assigned_machine_id}`)},children:[e.jsx(mr,{className:"mr-2 h-4 w-4"}),"View Details"]}),e.jsxs(ct,{onClick:Be=>{Be.stopPropagation(),r(`/machines/${Re.assigned_machine_id}`)},children:[e.jsx(xr,{className:"mr-2 h-4 w-4"}),"Edit Machine"]}),e.jsxs(ct,{children:[e.jsx(Ct,{className:"mr-2 h-4 w-4"}),"Create Service Ticket"]}),e.jsx(Lr,{}),e.jsxs(ct,{className:"text-red-600",onClick:Be=>{Be.stopPropagation(),Ve(Re)},children:[e.jsx(br,{className:"mr-2 h-4 w-4"}),"Delete Machine"]})]})]})})]},`machine-${Re.id}-${H}`))})]})})]}),n("machines:assign")&&e.jsx(Pee,{isOpen:v,onClose:()=>w(!1),onSuccess:Ye,modelId:t,modelName:s.name,warrantyMonths:s.warranty_months}),e.jsx(Ft,{open:b,onOpenChange:N,children:e.jsxs(Rt,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(qt,{children:[e.jsx(Lt,{children:"Edit Machine Model"}),e.jsx(Ut,{children:"Update the machine model information below."})]}),_&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"edit-name",children:"Model Name *"}),e.jsx(be,{id:"edit-name",value:_.name,onChange:Re=>S({..._,name:Re.target.value}),placeholder:"Enter model name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"edit-manufacturer",children:"Manufacturer *"}),e.jsxs(dn,{open:G,onOpenChange:J,children:[e.jsx(un,{asChild:!0,children:e.jsxs(q,{variant:"outline",role:"combobox","aria-expanded":G,className:"w-full justify-between h-11",children:[_.manufacturer||"Select manufacturer...",e.jsx(cn,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),e.jsxs(sn,{className:"w-[400px] p-0",align:"start",children:[e.jsx("div",{className:"border-b p-3",children:e.jsxs("div",{className:"relative",children:[e.jsx(nr,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(be,{placeholder:"Search or type new manufacturer...",className:"pl-10",value:ie,onChange:Re=>V(Re.target.value)})]})}),e.jsxs("div",{className:"max-h-[300px] overflow-y-auto",children:[ie&&!xe.some(Re=>Re.toLowerCase()===ie.toLowerCase())&&e.jsx("div",{className:"p-1 border-b",children:e.jsxs("div",{onClick:()=>{S({..._,manufacturer:ie}),J(!1),V("")},className:"flex items-center gap-3 p-2 rounded-sm cursor-pointer hover:bg-accent hover:text-accent-foreground transition-colors",children:[e.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-green-100",children:e.jsx("span",{className:"text-green-600 text-sm font-bold",children:"+"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("p",{className:"font-medium",children:['Add "',ie,'"']}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Create new manufacturer"})]})]})}),xe.filter(Re=>ie===""||Re.toLowerCase().includes(ie.toLowerCase())).length===0?e.jsx("div",{className:"p-4 text-center text-muted-foreground",children:"No manufacturers found."}):e.jsx("div",{className:"p-1",children:xe.filter(Re=>ie===""||Re.toLowerCase().includes(ie.toLowerCase())).map(Re=>e.jsxs("div",{onClick:()=>{S({..._,manufacturer:Re}),J(!1),V("")},className:ze("flex items-center gap-3 p-2 rounded-sm cursor-pointer hover:bg-accent hover:text-accent-foreground transition-colors",_.manufacturer===Re&&"bg-accent"),children:[e.jsx(Gr,{className:ze("h-4 w-4",_.manufacturer===Re?"opacity-100":"opacity-0")}),e.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-orange-100",children:e.jsx(cl,{className:"w-4 h-4 text-orange-600"})}),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"font-medium",children:Re})})]},Re))})]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"edit-catalogue",children:"Catalogue Number"}),e.jsx(be,{id:"edit-catalogue",value:_.catalogue_number||"",onChange:Re=>S({..._,catalogue_number:Re.target.value}),placeholder:"Enter catalogue number"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"edit-warranty",children:"Warranty (months)"}),e.jsx(be,{id:"edit-warranty",type:"number",min:"0",max:"120",value:_.warranty_months,onChange:Re=>S({..._,warranty_months:parseInt(Re.target.value)||0}),placeholder:"12"})]}),e.jsxs("div",{className:"space-y-2 col-span-2",children:[e.jsx(U,{htmlFor:"edit-category",children:"Category"}),e.jsxs(dn,{open:A,onOpenChange:O,children:[e.jsx(un,{asChild:!0,children:e.jsxs(q,{variant:"outline",role:"combobox","aria-expanded":A,className:"w-full justify-between h-11",children:[_.category_id?k.find(Re=>Re.id===_.category_id)?.name:_.category_name||"Select category (optional)",e.jsx(cn,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),e.jsxs(sn,{className:"w-[400px] p-0",align:"start",children:[e.jsx("div",{className:"border-b p-3",children:e.jsxs("div",{className:"relative",children:[e.jsx(nr,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(be,{placeholder:"Search categories...",className:"pl-10",value:z,onChange:Re=>R(Re.target.value)})]})}),e.jsxs("div",{className:"max-h-[300px] overflow-y-auto p-1",children:[e.jsxs("div",{onClick:()=>{S({..._,category_id:void 0,category_name:void 0}),O(!1)},className:"flex items-center gap-3 p-2 rounded-sm cursor-pointer hover:bg-accent hover:text-accent-foreground transition-colors",children:[e.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-gray-100",children:e.jsx("span",{className:"text-gray-600 text-sm",children:"-"})}),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"font-medium",children:"No category"})})]}),k.filter(Re=>z===""||Re.name.toLowerCase().includes(z.toLowerCase())).map(Re=>e.jsxs("div",{onClick:()=>{S({..._,category_id:Re.id,category_name:Re.name}),O(!1)},className:ze("flex items-center gap-3 p-2 rounded-sm cursor-pointer hover:bg-accent hover:text-accent-foreground transition-colors",_.category_id===Re.id&&"bg-accent"),children:[e.jsx(Gr,{className:ze("h-4 w-4",_.category_id===Re.id?"opacity-100":"opacity-0")}),e.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-primary/10",children:e.jsx(Jt,{className:"w-4 w-4 text-primary"})}),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"font-medium",children:Re.name})})]},Re.id))]})]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"edit-description",children:"Description"}),e.jsx(ar,{id:"edit-description",value:_.description||"",onChange:Re=>S({..._,description:Re.target.value}),placeholder:"Enter machine model description...",rows:3,className:"resize-none"})]})]}),e.jsxs(Dr,{children:[e.jsx(q,{variant:"outline",onClick:()=>N(!1),children:"Cancel"}),e.jsx(q,{onClick:ht,disabled:!_?.name||!_?.manufacturer,children:"Save Changes"})]})]})}),e.jsx(Ft,{open:re,onOpenChange:M,children:e.jsxs(Rt,{children:[e.jsxs(qt,{children:[e.jsx(Lt,{children:"Permanently Delete Machine"}),e.jsx(Ut,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{children:"Are you sure you want to permanently delete this machine? This action cannot be undone and will:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 text-sm text-muted-foreground",children:[e.jsx("li",{children:"Remove the machine assignment"}),e.jsx("li",{children:"Delete the machine serial permanently"})]}),e.jsx("div",{className:"mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded-md",children:e.jsxs("p",{className:"text-sm text-yellow-800",children:[e.jsx("strong",{children:"Note:"})," This machine cannot be deleted if it has associated repair tickets, work orders, or warranty records. Please delete or reassign those records first."]})}),e.jsxs("div",{className:"mt-4 space-y-1",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Machine:"})," ",T?.model_name]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Serial:"})," ",T?.serial_number]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Customer:"})," ",T?.customer_name]})]})]})})]}),e.jsxs(Dr,{children:[e.jsx(q,{variant:"outline",onClick:()=>M(!1),children:"Cancel"}),e.jsxs(q,{variant:"destructive",onClick:lt,disabled:B,children:[B&&e.jsx(Nt,{className:"mr-2 h-4 w-4 animate-spin"}),B?"Deleting...":"Permanently Delete"]})]})]})}),e.jsx(Ft,{open:I,onOpenChange:Q,children:e.jsxs(Rt,{children:[e.jsxs(qt,{children:[e.jsx(Lt,{children:"Delete Machine Model"}),e.jsx(Ut,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{children:"Are you sure you want to delete this machine model? This action cannot be undone."}),e.jsx("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-md",children:e.jsxs("p",{className:"text-sm text-red-800",children:[e.jsx("strong",{children:"Warning:"})," This will delete the entire model including all associated machines, serials, and related records. Make sure to verify there are no active repair tickets or work orders."]})}),s&&e.jsxs("div",{className:"mt-4 space-y-1",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Model:"})," ",s.name]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Manufacturer:"})," ",s.manufacturer]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Total Serials:"})," ",s.total_serials]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Assigned Machines:"})," ",s.total_assigned]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Active Warranties:"})," ",s.active_warranty]})]})]})})]}),e.jsxs(Dr,{children:[e.jsx(q,{variant:"outline",onClick:()=>Q(!1),disabled:W,children:"Cancel"}),e.jsxs(q,{variant:"destructive",onClick:yt,disabled:W,children:[W&&e.jsx(Nt,{className:"mr-2 h-4 w-4 animate-spin"}),W?"Deleting...":"Delete Model"]})]})]})})]})}):e.jsx(gt,{children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-red-600 mb-4",children:"Machine model not found"}),e.jsx(q,{onClick:()=>r("/machines"),children:"Back to Machines"})]})})})}var Ree="Separator",aE="horizontal",Lee=["horizontal","vertical"],u5=f.forwardRef((t,r)=>{const{decorative:n,orientation:s=aE,...a}=t,l=Iee(s)?s:aE,u=n?{role:"none"}:{"aria-orientation":l==="vertical"?l:void 0,role:"separator"};return e.jsx(Mt.div,{"data-orientation":l,...u,...a,ref:r})});u5.displayName=Ree;function Iee(t){return Lee.includes(t)}var m5=u5;const Id=f.forwardRef(({className:t,orientation:r="horizontal",decorative:n=!0,...s},a)=>e.jsx(m5,{ref:a,decorative:n,orientation:r,className:ze("shrink-0 bg-border",r==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",t),...s}));Id.displayName=m5.displayName;function $ee(){const{id:t}=oi(),r=er(),[n,s]=f.useState(null),[a,l]=f.useState([]),[c,u]=f.useState([]),[d,h]=f.useState(!0),[x,p]=f.useState(null),[y,v]=f.useState(!1),[w,b]=f.useState(!1),[N,_]=f.useState({name:"",description:"",warranty_expiry_date:"",warranty_active:!0,machine_condition:"new",sale_price:"",receipt_number:"",purchased_at:""}),[S,k]=f.useState(!1),[E,A]=f.useState(!1);f.useEffect(()=>{t&&O()},[t]);const O=async()=>{try{h(!0),p(null);const re=await de.getMachine(t);s(re.data);const M=await de.getMachineWorkOrders(t);l(M.data||[]);const B=await de.getMachineWarrantyWorkOrders(t);u(B.data||[])}catch(re){p("Failed to load machine details."),console.error("Error fetching machine details:",re)}finally{h(!1)}},z=()=>{n&&(_({name:n.name||"",description:n.description||"",warranty_expiry_date:n.warranty_expiry_date||"",warranty_active:n.warranty_active,machine_condition:n.machine_condition||"new",sale_price:n.sale_price?.toString()||"",receipt_number:n.receipt_number||"",purchased_at:n.purchased_at||""}),v(!0))},R=async()=>{if(n)try{b(!0);const re={name:N.name,description:N.description,warranty_expiry_date:N.warranty_expiry_date||null,warranty_active:N.warranty_active,machine_condition:N.machine_condition,sale_price:N.sale_price?parseFloat(N.sale_price):null,receipt_number:N.receipt_number||null,purchased_at:N.purchased_at||null};await de.updateMachine(n.id,re),Ne.success("Machine updated successfully."),v(!1),O()}catch(re){console.error("Error updating machine:",re),Ne.error("Failed to update machine. Please try again.")}finally{b(!1)}},G=()=>{k(!0)},J=async()=>{if(n)try{A(!0),await de.deleteMachine(n.id),Ne.success("Machine permanently deleted successfully."),k(!1),r("/machines")}catch(re){console.error("Error deleting machine:",re);const M=re.response?.data?.message||"Failed to delete machine. Please try again.";Ne.error(M)}finally{A(!1)}},ie=()=>{if(!n?.warranty_expiry_date)return{status:"No Warranty",color:"secondary"};const re=new Date(n.warranty_expiry_date),M=new Date,B=Math.ceil((re.getTime()-M.getTime())/(1e3*60*60*24));return!n.warranty_active||B<0?{status:"Expired",color:"destructive"}:B<=90?{status:`Expires in ${B} days`,color:"outline"}:{status:"Active",color:"default"}},V=re=>{const B={pending:Zt,in_progress:ks,completed:Ar,cancelled:wn}[re]||Zt;return e.jsxs(Oe,{variant:Vr(re),className:`flex items-center gap-1 ${Vr(re)==="outline"?Xs(re):""}`,children:[e.jsx(B,{className:"h-3 w-3"}),Qs(re)]})},xe=re=>{const M={low:{color:"default"},medium:{color:"outline"},high:{color:"destructive"}},B=M[re]||M.medium;return e.jsx(Oe,{variant:B.color,children:re})};if(d)return e.jsx(gt,{children:e.jsxs("div",{className:"flex items-center justify-center h-64",children:[e.jsx(Nt,{className:"h-8 w-8 animate-spin"}),e.jsx("span",{className:"ml-2",children:"Loading machine details..."})]})});if(x)return e.jsx(gt,{children:e.jsxs(On,{variant:"destructive",children:[e.jsx(vr,{className:"h-4 w-4"}),e.jsx(Bn,{children:"Error"}),e.jsx(Pn,{children:x})]})});if(!n)return e.jsx(gt,{children:e.jsxs(On,{variant:"destructive",children:[e.jsx(vr,{className:"h-4 w-4"}),e.jsx(Bn,{children:"Not Found"}),e.jsx(Pn,{children:"Machine not found."})]})});const pe=ie();return e.jsxs(gt,{children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(q,{variant:"ghost",onClick:()=>r(-1),className:"mr-2",children:e.jsx(Cn,{className:"h-4 w-4"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:n.name}),e.jsxs("p",{className:"text-muted-foreground",children:["Serial: ",n.serial_number," • ",n.manufacturer]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(q,{variant:"outline",onClick:z,children:[e.jsx(xr,{className:"mr-2 h-4 w-4"}),"Edit Machine"]}),e.jsxs(q,{variant:"destructive",onClick:G,children:[e.jsx(br,{className:"mr-2 h-4 w-4"}),"Delete Machine"]})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[e.jsxs(se,{children:[e.jsxs(ue,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(fe,{className:"text-sm font-medium",children:"Warranty Status"}),e.jsx(Hs,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(ae,{children:[e.jsx(Oe,{variant:pe.color,className:"text-sm",children:pe.status}),n.warranty_expiry_date&&e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Expires: ",jt(n.warranty_expiry_date)]})]})]}),e.jsxs(se,{children:[e.jsxs(ue,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(fe,{className:"text-sm font-medium",children:"Work Orders"}),e.jsx(Ct,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(ae,{children:[e.jsx("div",{className:"text-2xl font-bold",children:a.length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Total work orders"})]})]}),e.jsxs(se,{children:[e.jsxs(ue,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(fe,{className:"text-sm font-medium",children:"Warranty Work Orders"}),e.jsx(ei,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(ae,{children:[e.jsx("div",{className:"text-2xl font-bold",children:c.length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Warranty repairs"})]})]}),e.jsxs(se,{children:[e.jsxs(ue,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(fe,{className:"text-sm font-medium",children:"Customer"}),e.jsx(Ot,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(ae,{children:[e.jsx("div",{className:"text-sm font-medium",children:n.customer_name}),e.jsx(q,{variant:"link",className:"p-0 h-auto text-xs",onClick:()=>r(`/customers/${n.customer_id}`),children:"View Customer"})]})]})]}),e.jsxs(Ys,{defaultValue:"details",className:"space-y-4",children:[e.jsxs(Ps,{children:[e.jsx(Kt,{value:"details",children:"Machine Details"}),e.jsxs(Kt,{value:"work-orders",children:["Work Orders (",a.length,")"]}),e.jsxs(Kt,{value:"warranty-work-orders",children:["Warranty Work Orders (",c.length,")"]})]}),e.jsx(Gt,{value:"details",className:"space-y-4",children:e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs(se,{children:[e.jsx(ue,{children:e.jsxs(fe,{className:"flex items-center gap-2",children:[e.jsx(Ct,{className:"h-5 w-5"}),"Machine Information"]})}),e.jsxs(ae,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Name"}),e.jsx("p",{className:"text-sm",children:n.name})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Model"}),e.jsx("p",{className:"text-sm",children:n.model_name})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Serial Number"}),e.jsx("p",{className:"text-sm font-mono",children:n.serial_number})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Manufacturer"}),e.jsx("p",{className:"text-sm",children:n.manufacturer})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Catalogue Number"}),e.jsx("p",{className:"text-sm",children:n.catalogue_number||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Category"}),e.jsx("p",{className:"text-sm",children:n.category_name||"N/A"})]})]}),n.description&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Description"}),e.jsx("p",{className:"text-sm",children:n.description})]})]})]}),e.jsxs(se,{children:[e.jsx(ue,{children:e.jsxs(fe,{className:"flex items-center gap-2",children:[e.jsx(Tn,{className:"h-5 w-5"}),"Sales & Assignment Information"]})}),e.jsxs(ae,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Transaction Type"}),e.jsx(Oe,{variant:n.is_sale?"default":"outline",children:n.is_sale?"Sale":"Assignment"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Condition"}),e.jsx(Oe,{variant:n.machine_condition==="new"?"default":"outline",children:n.machine_condition||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Purchase Date"}),e.jsx("p",{className:"text-sm",children:n.purchase_date?jt(n.purchase_date):"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Sale Price"}),e.jsx("p",{className:"text-sm",children:n.sale_price?at(n.sale_price):"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Receipt Number"}),e.jsx("p",{className:"text-sm",children:n.receipt_number||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Purchased At"}),e.jsx("p",{className:"text-sm",children:n.purchased_at||"N/A"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Sold By"}),e.jsx("p",{className:"text-sm",children:n.sold_by_name||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Added By"}),e.jsx("p",{className:"text-sm",children:n.added_by_name||"N/A"})]})]})]})]})]})}),e.jsx(Gt,{value:"work-orders",className:"space-y-4",children:e.jsxs(se,{children:[e.jsx(ue,{children:e.jsxs(fe,{className:"flex items-center gap-2",children:[e.jsx(Ct,{className:"h-5 w-5"}),"Work Orders (",a.length,")"]})}),e.jsx(ae,{children:a.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Ct,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"No work orders found for this machine."})]}):e.jsxs(ir,{children:[e.jsx(lr,{children:e.jsxs(ft,{children:[e.jsx(me,{children:"ID"}),e.jsx(me,{children:"Status"}),e.jsx(me,{children:"Priority"}),e.jsx(me,{children:"Description"}),e.jsx(me,{children:"Technician"}),e.jsx(me,{children:"Created"}),e.jsx(me,{children:"Total Cost"}),e.jsx(me,{className:"text-right",children:"Actions"})]})}),e.jsx(or,{children:a.map(re=>e.jsxs(ft,{children:[e.jsx(oe,{className:"font-medium",children:e.jsxs(q,{variant:"link",className:"p-0 h-auto",onClick:()=>r(`/work-orders/${re.id}`),children:["#",re.formatted_number||re.id]})}),e.jsx(oe,{children:V(re.status)}),e.jsx(oe,{children:xe(re.priority)}),e.jsx(oe,{className:"max-w-xs truncate",children:re.description||"No description"}),e.jsx(oe,{children:re.technician_name||"Unassigned"}),e.jsx(oe,{children:jt(re.created_at)}),e.jsx(oe,{children:(()=>{if(re.total_cost&&re.total_cost>0)return at(re.total_cost);const M=(parseFloat(re.labor_hours?.toString()||"0")||0)*(parseFloat(re.labor_rate?.toString()||"0")||0),B=parseFloat(re.quote_subtotal_parts?.toString()||"0")||0,L=parseFloat(re.troubleshooting_fee?.toString()||"0")||0,T=M+B+L;return T>0?at(T):re.quote_total?at(re.quote_total):"N/A"})()}),e.jsx(oe,{className:"text-right",children:e.jsxs(Cr,{children:[e.jsx(Sr,{asChild:!0,children:e.jsx(q,{variant:"ghost",className:"h-8 w-8 p-0",children:e.jsx(mr,{className:"h-4 w-4"})})}),e.jsxs(wr,{align:"end",children:[e.jsx(Tr,{children:"Actions"}),e.jsxs(ct,{onClick:()=>r(`/work-orders/${re.id}`),children:[e.jsx(mr,{className:"mr-2 h-4 w-4"})," View Details"]}),e.jsxs(ct,{onClick:()=>r(`/work-orders/${re.id}`),children:[e.jsx(xr,{className:"mr-2 h-4 w-4"})," Edit Work Order"]})]})]})})]},re.id))})]})})]})}),e.jsx(Gt,{value:"warranty-work-orders",className:"space-y-4",children:e.jsxs(se,{children:[e.jsx(ue,{children:e.jsxs(fe,{className:"flex items-center gap-2",children:[e.jsx(ei,{className:"h-5 w-5"}),"Warranty Work Orders (",c.length,")"]})}),e.jsx(ae,{children:c.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(ei,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"No warranty work orders found for this machine."})]}):e.jsxs(ir,{children:[e.jsx(lr,{children:e.jsxs(ft,{children:[e.jsx(me,{children:"ID"}),e.jsx(me,{children:"Status"}),e.jsx(me,{children:"Priority"}),e.jsx(me,{children:"Description"}),e.jsx(me,{children:"Technician"}),e.jsx(me,{children:"Created"}),e.jsx(me,{className:"text-right",children:"Actions"})]})}),e.jsx(or,{children:c.map(re=>e.jsxs(ft,{children:[e.jsx(oe,{className:"font-medium",children:e.jsxs(q,{variant:"link",className:"p-0 h-auto",onClick:()=>r(`/warranty-work-orders/${re.id}`),children:["#",re.formatted_number||re.id]})}),e.jsx(oe,{children:V(re.status)}),e.jsx(oe,{children:xe(re.priority)}),e.jsx(oe,{className:"max-w-xs truncate",children:re.description||"No description"}),e.jsx(oe,{children:re.technician_name||"Unassigned"}),e.jsx(oe,{children:jt(re.created_at)}),e.jsx(oe,{className:"text-right",children:e.jsxs(Cr,{children:[e.jsx(Sr,{asChild:!0,children:e.jsx(q,{variant:"ghost",className:"h-8 w-8 p-0",children:e.jsx(mr,{className:"h-4 w-4"})})}),e.jsxs(wr,{align:"end",children:[e.jsx(Tr,{children:"Actions"}),e.jsxs(ct,{onClick:()=>r(`/warranty-work-orders/${re.id}`),children:[e.jsx(mr,{className:"mr-2 h-4 w-4"})," View Details"]}),e.jsxs(ct,{onClick:()=>r(`/warranty-work-orders/${re.id}`),children:[e.jsx(xr,{className:"mr-2 h-4 w-4"})," Edit Work Order"]})]})]})})]},re.id))})]})})]})})]})]}),e.jsx(Ft,{open:y,onOpenChange:v,children:e.jsxs(Rt,{className:"sm:max-w-[600px]",children:[e.jsxs(qt,{children:[e.jsx(Lt,{children:"Edit Machine"}),e.jsx(Ut,{children:"Update the machine information below."})]}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"name",children:"Machine Name"}),e.jsx(be,{id:"name",value:N.name,onChange:re=>_(M=>({...M,name:re.target.value})),placeholder:"Enter machine name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"machine_condition",children:"Condition"}),e.jsxs(tt,{value:N.machine_condition,onValueChange:re=>_(M=>({...M,machine_condition:re})),children:[e.jsx(Je,{children:e.jsx(rt,{placeholder:"Select condition"})}),e.jsxs(et,{children:[e.jsx(Y,{value:"new",children:"New"}),e.jsx(Y,{value:"used",children:"Used"})]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"description",children:"Description"}),e.jsx(ar,{id:"description",value:N.description,onChange:re=>_(M=>({...M,description:re.target.value})),placeholder:"Enter machine description",rows:3})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"warranty_expiry_date",children:"Warranty Expiry Date"}),e.jsx(Rn,{value:N.warranty_expiry_date,onChange:re=>_(M=>({...M,warranty_expiry_date:re})),placeholder:"Select warranty expiry date"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"sale_price",children:"Sale Price (KM)"}),e.jsx(be,{id:"sale_price",type:"number",step:"0.01",value:N.sale_price,onChange:re=>_(M=>({...M,sale_price:re.target.value})),placeholder:"0.00"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"receipt_number",children:"Receipt Number"}),e.jsx(be,{id:"receipt_number",value:N.receipt_number,onChange:re=>_(M=>({...M,receipt_number:re.target.value})),placeholder:"Enter receipt number"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"purchased_at",children:"Purchased At"}),e.jsx(be,{id:"purchased_at",value:N.purchased_at,onChange:re=>_(M=>({...M,purchased_at:re.target.value})),placeholder:"e.g., AMS, Kamer.ba"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"warranty_active",checked:N.warranty_active,onChange:re=>_(M=>({...M,warranty_active:re.target.checked})),className:"rounded"}),e.jsx(U,{htmlFor:"warranty_active",children:"Warranty Active"})]})]}),e.jsxs(Dr,{children:[e.jsx(q,{variant:"outline",onClick:()=>v(!1),children:"Cancel"}),e.jsxs(q,{onClick:R,disabled:w,children:[w&&e.jsx(Nt,{className:"mr-2 h-4 w-4 animate-spin"}),w?"Updating...":"Update Machine"]})]})]})}),e.jsx(Ft,{open:S,onOpenChange:k,children:e.jsxs(Rt,{children:[e.jsxs(qt,{children:[e.jsx(Lt,{children:"Permanently Delete Machine"}),e.jsx(Ut,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{children:"Are you sure you want to permanently delete this machine? This action cannot be undone and will:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 text-sm text-muted-foreground",children:[e.jsx("li",{children:"Remove the machine assignment"}),e.jsx("li",{children:"Delete the machine serial permanently"})]}),e.jsx("div",{className:"mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded-md",children:e.jsxs("p",{className:"text-sm text-yellow-800",children:[e.jsx("strong",{children:"Note:"})," This machine cannot be deleted if it has associated repair tickets, work orders, or warranty records. Please delete or reassign those records first."]})}),e.jsxs("div",{className:"mt-4 space-y-1",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Machine:"})," ",n?.name]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Serial:"})," ",n?.serial_number]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Customer:"})," ",n?.customer_name]})]})]})})]}),e.jsxs(Dr,{children:[e.jsx(q,{variant:"outline",onClick:()=>k(!1),children:"Cancel"}),e.jsxs(q,{variant:"destructive",onClick:J,disabled:E,children:[E&&e.jsx(Nt,{className:"mr-2 h-4 w-4 animate-spin"}),E?"Deleting...":"Permanently Delete"]})]})]})})]})}const iE=[{key:"name",label:"Model Name"},{key:"manufacturer",label:"Manufacturer"},{key:"catalogue",label:"Catalogue #"},{key:"category",label:"Category"},{key:"warranty",label:"Warranty"},{key:"serials",label:"Serials"},{key:"assigned",label:"Assigned"}];function Fee(){const t=er(),{visibleColumns:r,toggleColumn:n,isColumnVisible:s,resetColumns:a,showAllColumns:l,hideAllColumns:c,isSyncing:u}=ps("machines",gs(iE)),{hasPermission:d}=hr(),[h,x]=f.useState([]),[p,y]=f.useState(!0),[v,w]=f.useState(""),[b,N]=f.useState(""),[_,S]=f.useState(""),[k,E]=f.useState({category:"",manufacturer:""}),[A,O]=f.useState(1),[z,R]=f.useState(1),[G,J]=f.useState(0),[ie]=f.useState(25),[V,xe]=f.useState(null),[pe,re]=f.useState(!1),[M,B]=f.useState([]),[L,T]=f.useState(!1),[F,I]=f.useState(""),[Q,W]=f.useState(!1),[ee,ye]=f.useState(""),[he,te]=f.useState([]),[De,ne]=f.useState(!1),[$e,ge]=f.useState(null),[we,_e]=f.useState(!1);f.useEffect(()=>{Ve()},[b,k,A]),f.useEffect(()=>{Ye(),ht()},[]);const Ye=async()=>{try{const Se=await de.getMachineCategories();B(Se.data||[])}catch(Se){console.error("Error fetching categories:",Se)}},ht=async()=>{try{const Me=((await de.getSuppliers({limit:100})).data||[]).map(Ee=>Ee.name),Tt=h.map(Ee=>Ee.manufacturer).filter(Boolean),Pe=[...new Set([...Me,...Tt])];te(Pe)}catch(Se){console.error("Error fetching manufacturers:",Se);const it=h.map(Me=>Me.manufacturer).filter(Boolean);te([...new Set(it)])}},Ve=async()=>{try{y(!0),S("");const Se={page:A,limit:ie};b.trim()&&(Se.search=b.trim()),k.category&&(Se.category=k.category),k.manufacturer&&(Se.manufacturer=k.manufacturer);const it=await de.getMachineModels(Se);console.log("Raw API response:",it),console.log("Response.data:",it.data),console.log("First model from response:",it.data?.[0]);const Me=it.data||[],Tt=it.pagination||{};console.log("Models data being set to state:",Me),console.log("First model being set to state:",Me[0]),x(Me),R(Tt.pages||1),J(Tt.total||0)}catch(Se){S("Failed to load machine models"),console.error("Error fetching machine models:",Se)}finally{y(!1)}},lt=Se=>{t(`/machines/model/${Se}`)},yt=Se=>{console.log("Opening edit dialog for model:",Se),xe({...Se}),re(!0)},Re=async()=>{if(!V||!V.id){Ne.error("Invalid model data");return}try{const Se={name:V.name,manufacturer:V.manufacturer,catalogue_number:V.catalogue_number||null,warranty_months:V.warranty_months,description:V.description||null};V.category_id&&typeof V.category_id=="number"&&(Se.category_id=V.category_id),console.log("Updating model:",V.id,Se),await de.updateMachineModel(V.id,Se),Ne.success("Machine model updated successfully"),await Ve(),re(!1),xe(null),I("")}catch(Se){console.error("Error updating machine model:",Se),Ne.error(Se.message||"Failed to update machine model")}},H=Se=>{ge(Se),ne(!0)},Be=async()=>{if($e)try{_e(!0),await de.deleteMachineModel($e.id),Ne.success("Machine model deleted successfully"),ne(!1),ge(null),await Ve()}catch(Se){console.error("Error deleting machine model:",Se),Ne.error(Se.message||"Failed to delete machine model")}finally{_e(!1)}},st=()=>h.map(it=>it.category_name).filter((it,Me,Tt)=>it&&Tt.indexOf(it)===Me).sort(),K=()=>h.map(it=>it.manufacturer).filter((it,Me,Tt)=>it&&Tt.indexOf(it)===Me).sort(),Z=h,ke=G,Ae=h.reduce((Se,it)=>Se+(parseInt(it.total_assigned?.toString()||"0")||0),0),je=h.reduce((Se,it)=>Se+(parseInt(it.unassigned_serials?.toString()||"0")||0),0),He=h.reduce((Se,it)=>Se+(parseInt(it.active_warranty?.toString()||"0")||0),0);return p?e.jsx(gt,{children:e.jsxs("div",{className:"flex items-center justify-center h-64",children:[e.jsx(Nt,{className:"h-8 w-8 animate-spin"}),e.jsx("span",{className:"ml-2",children:"Loading machine models..."})]})}):_?e.jsx(gt,{children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-red-600 mb-4",children:_}),e.jsx(q,{onClick:Ve,children:"Try Again"})]})})}):e.jsx(gt,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Machine Models"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage machine models and track assigned machines"})]}),e.jsxs(q,{onClick:()=>t("/add-machine-model"),children:[e.jsx(Vt,{className:"mr-2 h-4 w-4"}),"Add Machine Model"]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[e.jsxs(se,{children:[e.jsxs(ue,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(fe,{className:"text-sm font-medium",children:"Total Models"}),e.jsx(Jt,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(ae,{children:[e.jsx("div",{className:"text-2xl font-bold",children:ke}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Machine models"})]})]}),e.jsxs(se,{children:[e.jsxs(ue,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(fe,{className:"text-sm font-medium",children:"Assigned Machines"}),e.jsx(Ot,{className:"h-4 w-4 text-green-500"})]}),e.jsxs(ae,{children:[e.jsx("div",{className:"text-2xl font-bold",children:Ae}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"With customers"})]})]}),e.jsxs(se,{children:[e.jsxs(ue,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(fe,{className:"text-sm font-medium",children:"Unassigned"}),e.jsx(vr,{className:"h-4 w-4 text-orange-500"})]}),e.jsxs(ae,{children:[e.jsx("div",{className:"text-2xl font-bold",children:je}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Available for assignment"})]})]}),e.jsxs(se,{children:[e.jsxs(ue,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(fe,{className:"text-sm font-medium",children:"Active Warranty"}),e.jsx(Hs,{className:"h-4 w-4 text-orange-500"})]}),e.jsxs(ae,{children:[e.jsx("div",{className:"text-2xl font-bold",children:He}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Under warranty"})]})]})]}),e.jsxs(se,{children:[e.jsx(ue,{children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("div",{className:"relative",children:[e.jsx(nr,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),e.jsx(be,{placeholder:"Search machine models... (press Enter to search)",value:v,onChange:Se=>w(Se.target.value),onKeyDown:Se=>{Se.key==="Enter"&&(Se.preventDefault(),N(v),O(1))},className:"pl-10 pr-10 w-80",disabled:p}),v&&e.jsx(q,{variant:"ghost",size:"sm",className:"absolute right-1 top-1/2 h-6 w-6 -translate-y-1/2 p-0",onClick:()=>{w(""),N(""),O(1)},children:e.jsx(hn,{className:"h-3 w-3"})})]}),e.jsx(ys,{columns:iE,visibleColumns:r,onToggleColumn:n,onShowAll:l,onHideAll:c,onReset:a,isSyncing:u}),e.jsxs(Cr,{children:[e.jsx(Sr,{asChild:!0,children:e.jsxs(q,{variant:"outline",className:"h-9",children:[e.jsx(Ua,{className:"mr-2 h-4 w-4"}),"Filters",(k.category||k.manufacturer)&&e.jsx(Oe,{variant:"secondary",className:"ml-2 h-5 w-5 rounded-full p-0 text-xs",children:[k.category,k.manufacturer].filter(Boolean).length})]})}),e.jsxs(wr,{align:"end",className:"w-56",children:[e.jsx(Tr,{children:"Filter by"}),e.jsx(Lr,{}),e.jsxs("div",{className:"p-2",children:[e.jsx(U,{className:"text-xs font-medium text-muted-foreground",children:"Category"}),e.jsxs(tt,{value:k.category,onValueChange:Se=>{E(it=>({...it,category:Se==="clear"?"":Se})),O(1)},children:[e.jsx(Je,{className:"h-8",children:e.jsx(rt,{placeholder:"All categories"})}),e.jsxs(et,{children:[e.jsx(Y,{value:"clear",children:"Clear Category"}),st().map(Se=>e.jsx(Y,{value:Se||"",children:Se},Se))]})]})]}),e.jsxs("div",{className:"p-2",children:[e.jsx(U,{className:"text-xs font-medium text-muted-foreground",children:"Manufacturer"}),e.jsxs(tt,{value:k.manufacturer,onValueChange:Se=>{E(it=>({...it,manufacturer:Se==="clear"?"":Se})),O(1)},children:[e.jsx(Je,{className:"h-8",children:e.jsx(rt,{placeholder:"All manufacturers"})}),e.jsxs(et,{children:[e.jsx(Y,{value:"clear",children:"Clear Manufacturer"}),K().map(Se=>e.jsx(Y,{value:Se||"",children:Se},Se))]})]})]}),e.jsx(Lr,{}),e.jsx(ct,{onClick:()=>{E({category:"",manufacturer:""}),O(1)},className:"text-center",children:"Clear Filters"})]})]})]})})}),e.jsxs(ae,{children:[e.jsxs(ir,{children:[e.jsx(lr,{children:e.jsxs(ft,{children:[s("name")&&e.jsx(me,{children:"Model Name"}),s("manufacturer")&&e.jsx(me,{children:"Manufacturer"}),s("catalogue")&&e.jsx(me,{children:"Catalogue Number"}),s("category")&&e.jsx(me,{children:"Category"}),s("warranty")&&e.jsx(me,{children:"Warranty Period"}),s("serials")&&e.jsx(me,{children:"Total Serials"}),s("assigned")&&e.jsx(me,{children:"Assigned"}),e.jsx(me,{className:"text-right",children:"Actions"})]})}),e.jsx(or,{children:Z.map((Se,it)=>e.jsxs(ft,{className:"cursor-pointer hover:bg-muted/50",onClick:()=>lt(Se.id),children:[s("name")&&e.jsx(oe,{children:e.jsx("div",{className:"font-medium",children:Se.name})}),s("manufacturer")&&e.jsx(oe,{className:"font-medium",children:Se.manufacturer}),s("catalogue")&&e.jsx(oe,{className:"text-sm text-muted-foreground",children:Se.catalogue_number||"N/A"}),s("category")&&e.jsx(oe,{children:e.jsx(Oe,{variant:"outline",children:Se.category_name||"Uncategorized"})}),s("warranty")&&e.jsx(oe,{children:e.jsxs(Oe,{variant:"outline",className:"border-orange-300 text-orange-700",children:[Se.warranty_months," months"]})}),s("serials")&&e.jsx(oe,{className:"font-medium",children:Se.total_serials}),s("assigned")&&e.jsx(oe,{children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Oe,{variant:"default",className:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-100",children:Se.total_assigned}),Se.unassigned_serials>0&&e.jsxs(Oe,{variant:"outline",className:"border-orange-300 text-orange-700 dark:border-orange-700 dark:text-orange-400",children:[Se.unassigned_serials," unassigned"]})]})}),e.jsx(oe,{className:"text-right",onClick:Me=>Me.stopPropagation(),children:e.jsxs(Cr,{children:[e.jsx(Sr,{asChild:!0,children:e.jsx(q,{variant:"ghost",className:"h-8 w-8 p-0",children:e.jsx(ss,{className:"h-4 w-4"})})}),e.jsxs(wr,{align:"end",children:[e.jsx(Tr,{children:"Actions"}),e.jsxs(ct,{onClick:()=>lt(Se.id),children:[e.jsx(mr,{className:"mr-2 h-4 w-4"}),"View Details"]}),e.jsxs(ct,{onClick:Me=>{Me.stopPropagation(),yt(Se)},children:[e.jsx(xr,{className:"mr-2 h-4 w-4"}),"Edit Model"]}),d("machines:assign")&&e.jsxs(ct,{onClick:Me=>{Me.stopPropagation(),t(`/machines/model/${Se.id}`)},children:[e.jsx(Ct,{className:"mr-2 h-4 w-4"}),"Assign Machine"]}),e.jsx(Lr,{}),e.jsxs(ct,{className:"text-red-600",onClick:Me=>{Me.stopPropagation(),H(Se)},children:[e.jsx(br,{className:"mr-2 h-4 w-4"}),"Delete Model"]})]})]})})]},`model-${Se.id}-${it}`))})]}),z>1&&e.jsxs("div",{className:"flex items-center justify-between mt-4",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",(A-1)*ie+1," to ",Math.min(A*ie,G)," of ",G," machine models"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(q,{variant:"outline",size:"sm",onClick:()=>O(Se=>Math.max(1,Se-1)),disabled:A===1,children:"Previous"}),Array.from({length:Math.min(5,z)},(Se,it)=>{let Me;return z<=5||A<=3?Me=it+1:A>=z-2?Me=z-4+it:Me=A-2+it,e.jsx(q,{variant:A===Me?"default":"outline",size:"sm",onClick:()=>O(Me),className:"w-8 h-8 p-0",children:Me},Me)}),e.jsx(q,{variant:"outline",size:"sm",onClick:()=>O(Se=>Math.min(z,Se+1)),disabled:A===z,children:"Next"})]})]})]})]}),e.jsx(Ft,{open:pe,onOpenChange:re,children:e.jsxs(Rt,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(qt,{children:[e.jsx(Lt,{children:"Edit Machine Model"}),e.jsx(Ut,{children:"Update the machine model information below."})]}),V&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"edit-name",children:"Model Name *"}),e.jsx(be,{id:"edit-name",value:V.name,onChange:Se=>xe({...V,name:Se.target.value}),placeholder:"Enter model name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"edit-manufacturer",children:"Manufacturer *"}),e.jsxs(dn,{open:Q,onOpenChange:W,children:[e.jsx(un,{asChild:!0,children:e.jsxs(q,{variant:"outline",role:"combobox","aria-expanded":Q,className:"w-full justify-between h-11",children:[V.manufacturer||"Select manufacturer...",e.jsx(cn,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),e.jsxs(sn,{className:"w-[400px] p-0",align:"start",children:[e.jsx("div",{className:"border-b p-3",children:e.jsxs("div",{className:"relative",children:[e.jsx(nr,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(be,{placeholder:"Search or type new manufacturer...",className:"pl-10",value:ee,onChange:Se=>ye(Se.target.value)})]})}),e.jsxs("div",{className:"max-h-[300px] overflow-y-auto",children:[ee&&!he.some(Se=>Se.toLowerCase()===ee.toLowerCase())&&e.jsx("div",{className:"p-1 border-b",children:e.jsxs("div",{onClick:()=>{xe({...V,manufacturer:ee}),W(!1),ye("")},className:"flex items-center gap-3 p-2 rounded-sm cursor-pointer hover:bg-accent hover:text-accent-foreground transition-colors",children:[e.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-green-100",children:e.jsx("span",{className:"text-green-600 text-sm font-bold",children:"+"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("p",{className:"font-medium",children:['Add "',ee,'"']}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Create new manufacturer"})]})]})}),he.filter(Se=>ee===""||Se.toLowerCase().includes(ee.toLowerCase())).length===0?e.jsx("div",{className:"p-4 text-center text-muted-foreground",children:"No manufacturers found."}):e.jsx("div",{className:"p-1",children:he.filter(Se=>ee===""||Se.toLowerCase().includes(ee.toLowerCase())).map(Se=>e.jsxs("div",{onClick:()=>{xe({...V,manufacturer:Se}),W(!1),ye("")},className:ze("flex items-center gap-3 p-2 rounded-sm cursor-pointer hover:bg-accent hover:text-accent-foreground transition-colors",V.manufacturer===Se&&"bg-accent"),children:[e.jsx(Gr,{className:ze("h-4 w-4",V.manufacturer===Se?"opacity-100":"opacity-0")}),e.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-orange-100",children:e.jsx(cl,{className:"w-4 h-4 text-orange-600"})}),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"font-medium",children:Se})})]},Se))})]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"edit-catalogue",children:"Catalogue Number"}),e.jsx(be,{id:"edit-catalogue",value:V.catalogue_number||"",onChange:Se=>xe({...V,catalogue_number:Se.target.value}),placeholder:"Enter catalogue number"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"edit-warranty",children:"Warranty (months)"}),e.jsx(be,{id:"edit-warranty",type:"number",min:"0",max:"120",value:V.warranty_months,onChange:Se=>xe({...V,warranty_months:parseInt(Se.target.value)||0}),placeholder:"12"})]}),e.jsxs("div",{className:"space-y-2 col-span-2",children:[e.jsx(U,{htmlFor:"edit-category",children:"Category"}),e.jsxs(dn,{open:L,onOpenChange:T,children:[e.jsx(un,{asChild:!0,children:e.jsxs(q,{variant:"outline",role:"combobox","aria-expanded":L,className:"w-full justify-between h-11",children:[V.category_id?M.find(Se=>Se.id===V.category_id)?.name:V.category_name||"Select category (optional)",e.jsx(cn,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),e.jsxs(sn,{className:"w-[400px] p-0",align:"start",children:[e.jsx("div",{className:"border-b p-3",children:e.jsxs("div",{className:"relative",children:[e.jsx(nr,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(be,{placeholder:"Search categories...",className:"pl-10",value:F,onChange:Se=>I(Se.target.value)})]})}),e.jsxs("div",{className:"max-h-[300px] overflow-y-auto p-1",children:[e.jsxs("div",{onClick:()=>{xe({...V,category_id:void 0,category_name:void 0}),T(!1)},className:"flex items-center gap-3 p-2 rounded-sm cursor-pointer hover:bg-accent hover:text-accent-foreground transition-colors",children:[e.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-gray-100",children:e.jsx("span",{className:"text-gray-600 text-sm",children:"-"})}),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"font-medium",children:"No category"})})]}),M.filter(Se=>F===""||Se.name.toLowerCase().includes(F.toLowerCase())).map(Se=>e.jsxs("div",{onClick:()=>{xe({...V,category_id:Se.id,category_name:Se.name}),T(!1)},className:ze("flex items-center gap-3 p-2 rounded-sm cursor-pointer hover:bg-accent hover:text-accent-foreground transition-colors",V.category_id===Se.id&&"bg-accent"),children:[e.jsx(Gr,{className:ze("h-4 w-4",V.category_id===Se.id?"opacity-100":"opacity-0")}),e.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-primary/10",children:e.jsx(Jt,{className:"w-4 h-4 text-primary"})}),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"font-medium",children:Se.name})})]},Se.id))]})]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"edit-description",children:"Description"}),e.jsx(ar,{id:"edit-description",value:V.description||"",onChange:Se=>xe({...V,description:Se.target.value}),placeholder:"Enter machine model description...",rows:3,className:"resize-none"})]})]}),e.jsxs(Dr,{children:[e.jsx(q,{variant:"outline",onClick:()=>re(!1),children:"Cancel"}),e.jsx(q,{onClick:Re,disabled:!V?.name||!V?.manufacturer,children:"Save Changes"})]})]})}),e.jsx(Ft,{open:De,onOpenChange:ne,children:e.jsxs(Rt,{children:[e.jsxs(qt,{children:[e.jsx(Lt,{children:"Delete Machine Model"}),e.jsx(Ut,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{children:"Are you sure you want to delete this machine model? This action cannot be undone."}),e.jsx("div",{className:"mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded-md",children:e.jsxs("p",{className:"text-sm text-yellow-800",children:[e.jsx("strong",{children:"Warning:"})," This will only delete the model if it has no associated machines, serials, or work orders."]})}),$e&&e.jsxs("div",{className:"mt-4 space-y-1",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Model:"})," ",$e.name]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Manufacturer:"})," ",$e.manufacturer]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Total Serials:"})," ",$e.total_serials]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Assigned:"})," ",$e.total_assigned]})]})]})})]}),e.jsxs(Dr,{children:[e.jsx(q,{variant:"outline",onClick:()=>ne(!1),disabled:we,children:"Cancel"}),e.jsxs(q,{variant:"destructive",onClick:Be,disabled:we,children:[we&&e.jsx(Nt,{className:"mr-2 h-4 w-4 animate-spin"}),we?"Deleting...":"Delete Model"]})]})]})})]})})}function h5({open:t,onOpenChange:r,itemName:n,workOrderCount:s=0,title:a="Cannot Delete Inventory Item",description:l}){const c=`${n?`"${n}"`:"This inventory item"} is currently used in ${s} work order${s>1?"s":""} and cannot be deleted. Please remove it from all work orders before deleting.`;return e.jsx(ng,{open:t,onOpenChange:r,children:e.jsxs(ch,{children:[e.jsxs(dh,{children:[e.jsx(mh,{children:a}),e.jsx(hh,{children:l||c})]}),e.jsx(uh,{children:e.jsx(fh,{onClick:()=>r(!1),children:"OK"})})]})})}const lE=[{key:"name",label:"Item Name"},{key:"description",label:"Description"},{key:"quantity",label:"Quantity"},{key:"price",label:"Unit Price"},{key:"category",label:"Category"},{key:"supplier",label:"Supplier"},{key:"sku",label:"SKU"},{key:"location",label:"Location"}];function qee(){const t=er(),{visibleColumns:r,toggleColumn:n,isColumnVisible:s,resetColumns:a,showAllColumns:l,hideAllColumns:c,isSyncing:u}=ps("inventory",gs(lE)),[d,h]=f.useState([]),[x,p]=f.useState(!0),[y,v]=f.useState(""),[w,b]=f.useState(""),[N,_]=f.useState({category:"",supplier:"",stock_status:""}),[S,k]=f.useState(1),[E,A]=f.useState(1),[O,z]=f.useState(0),[R]=f.useState(25),[G,J]=f.useState(""),[ie,V]=f.useState(!1),[xe,pe]=f.useState(!1),[re,M]=f.useState(!1),[B,L]=f.useState(null),[T,F]=f.useState(!1),[I,Q]=f.useState({item:null,workOrderCount:0}),[W,ee]=f.useState({name:"",description:"",quantity:"",unit_price:"",category:"",supplier:"",sku:"",location:"",min_stock_level:""}),[ye,he]=f.useState({quantity:"",reason:"adjustment"}),[te,De]=f.useState(!1);f.useEffect(()=>{ne()},[w,N,S]);const ne=async()=>{try{p(!0);const je={page:S,limit:R};w&&(je.search=w),N.category&&(je.category=N.category),N.supplier&&(je.supplier=N.supplier),N.stock_status&&(je.stock_status=N.stock_status);const He=await de.getInventory(je),Se=He.data||[];h(Se),A(He.pagination?.pages||1),z(He.pagination?.total||0)}catch(je){J("Failed to load inventory"),console.error("Error fetching inventory:",je)}finally{p(!1)}},$e=je=>{t(`/inventory/${je}`)},ge=je=>{L(je),ee({name:je.name,description:je.description||"",quantity:je.quantity.toString(),unit_price:je.unit_price.toString(),category:je.category||"",supplier:je.supplier||"",sku:je.sku||"",location:je.location||"",min_stock_level:je.min_stock_level?.toString()||""}),V(!0)},we=async()=>{if(B){De(!0);try{await de.updateInventoryItem(B.id,{name:W.name,description:W.description||null,quantity:parseInt(W.quantity),unit_price:parseFloat(W.unit_price),category:W.category||null,supplier:W.supplier||null,sku:W.sku||null,location:W.location||null,min_stock_level:W.min_stock_level?parseInt(W.min_stock_level):null}),Ne.success("Inventory item updated successfully"),V(!1),L(null),ne()}catch(je){console.error("Error updating item:",je),Ne.error(je.response?.data?.message||"Failed to update item")}finally{De(!1)}}},_e=je=>{L(je),he({quantity:je.quantity.toString(),reason:"adjustment"}),M(!0)},Ye=async()=>{if(B){De(!0);try{await de.updateInventoryItem(B.id,{quantity:parseInt(ye.quantity)}),Ne.success("Stock adjusted successfully"),M(!1),L(null),ne()}catch(je){console.error("Error adjusting stock:",je),Ne.error(je.response?.data?.message||"Failed to adjust stock")}finally{De(!1)}}},ht=je=>{L(je),pe(!0)},Ve=async()=>{if(B){De(!0);try{await de.deleteInventoryItem(B.id),Ne.success("Inventory item deleted successfully"),pe(!1),L(null),ne()}catch(je){if(console.error("Error deleting item:",je),je.response?.data?.message?.includes("currently used in")&&je.response?.data?.message?.includes("work order")){const Se=je.response.data.message.match(/used in (\d+) work order/),it=Se?parseInt(Se[1]):0;Q({item:B,workOrderCount:it}),F(!0),pe(!1)}else Ne.error(je.response?.data?.message||"Failed to delete item")}finally{De(!1)}}},lt=()=>{b(y),k(1)},yt=()=>{v(""),b(""),k(1)},Re=(je,He)=>{_(Se=>({...Se,[je]:He})),k(1)},H=()=>{_({category:"",supplier:"",stock_status:""}),k(1)},Be=()=>{const je=new Set;return d.forEach(He=>{He.category&&je.add(He.category)}),Array.from(je).sort()},st=()=>{const je=new Set;return d.forEach(He=>{He.supplier&&je.add(He.supplier)}),Array.from(je).sort()},K=()=>Object.values(N).filter(je=>je!=="").length,Z=d.filter(je=>je.min_stock_level&&je.quantity<=je.min_stock_level),ke=d.filter(je=>je.quantity<=0),Ae=d.reduce((je,He)=>je+He.quantity*He.unit_price,0);return x?e.jsx(gt,{children:e.jsxs("div",{className:"flex items-center justify-center h-64",children:[e.jsx(Nt,{className:"h-8 w-8 animate-spin"}),e.jsx("span",{className:"ml-2",children:"Loading inventory..."})]})}):G?e.jsx(gt,{children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-red-600 mb-4",children:G}),e.jsx(q,{onClick:ne,children:"Try Again"})]})})}):e.jsx(gt,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Inventory"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage parts, supplies, and equipment inventory"})]}),e.jsxs(q,{onClick:()=>t("/add-inventory-item"),children:[e.jsx(Vt,{className:"mr-2 h-4 w-4"}),"Add Item"]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[e.jsxs(se,{children:[e.jsxs(ue,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(fe,{className:"text-sm font-medium",children:"Total Items"}),e.jsx(Jt,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(ae,{children:[e.jsx("div",{className:"text-2xl font-bold",children:O}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Inventory items"})]})]}),e.jsxs(se,{children:[e.jsxs(ue,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(fe,{className:"text-sm font-medium",children:"Low Stock"}),e.jsx(vr,{className:"h-4 w-4 text-orange-500"})]}),e.jsxs(ae,{children:[e.jsx("div",{className:"text-2xl font-bold",children:Z.length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Below minimum level"})]})]}),e.jsxs(se,{children:[e.jsxs(ue,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(fe,{className:"text-sm font-medium",children:"Out of Stock"}),e.jsx(Zm,{className:"h-4 w-4 text-red-500"})]}),e.jsxs(ae,{children:[e.jsx("div",{className:"text-2xl font-bold",children:ke.length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Need restocking"})]})]}),e.jsxs(se,{children:[e.jsxs(ue,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(fe,{className:"text-sm font-medium",children:"Total Value"}),e.jsx(Os,{className:"h-4 w-4 text-green-500"})]}),e.jsxs(ae,{children:[e.jsx("div",{className:"text-2xl font-bold",children:at(Ae)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Inventory value"})]})]})]}),e.jsxs(se,{children:[e.jsx(ue,{children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("div",{className:"relative",children:[e.jsx(nr,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),e.jsx(be,{placeholder:"Search inventory...",value:y,onChange:je=>v(je.target.value),onKeyDown:je=>{je.key==="Enter"&&lt()},className:"pl-10 w-80"}),y&&e.jsx(q,{variant:"ghost",size:"sm",className:"absolute right-1 top-1/2 -translate-y-1/2 h-6 w-6 p-0",onClick:yt,children:e.jsx(hn,{className:"h-3 w-3"})})]}),e.jsx(q,{onClick:lt,variant:"outline",children:"Search"}),e.jsx(ys,{columns:lE,visibleColumns:r,onToggleColumn:n,onShowAll:l,onHideAll:c,onReset:a,isSyncing:u}),e.jsxs(Cr,{children:[e.jsx(Sr,{asChild:!0,children:e.jsxs(q,{variant:"outline",className:"relative",children:[e.jsx(Ua,{className:"mr-2 h-4 w-4"}),"Filters",K()>0&&e.jsx(Oe,{variant:"secondary",className:"ml-2 h-5 w-5 rounded-full p-0 flex items-center justify-center text-xs",children:K()})]})}),e.jsxs(wr,{align:"end",className:"w-56",children:[e.jsx(Tr,{children:"Filter by"}),e.jsx(Lr,{}),e.jsxs("div",{className:"p-2",children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Category"}),e.jsxs(tt,{value:N.category||"all",onValueChange:je=>Re("category",je==="all"?"":je),children:[e.jsx(Je,{children:e.jsx(rt,{placeholder:"All categories"})}),e.jsxs(et,{children:[e.jsx(Y,{value:"all",children:"All categories"}),Be().map(je=>e.jsx(Y,{value:je,children:je},je))]})]})]}),e.jsxs("div",{className:"p-2",children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Supplier"}),e.jsxs(tt,{value:N.supplier||"all",onValueChange:je=>Re("supplier",je==="all"?"":je),children:[e.jsx(Je,{children:e.jsx(rt,{placeholder:"All suppliers"})}),e.jsxs(et,{children:[e.jsx(Y,{value:"all",children:"All suppliers"}),st().map(je=>e.jsx(Y,{value:je,children:je},je))]})]})]}),e.jsxs("div",{className:"p-2",children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Stock Status"}),e.jsxs(tt,{value:N.stock_status||"all",onValueChange:je=>Re("stock_status",je==="all"?"":je),children:[e.jsx(Je,{children:e.jsx(rt,{placeholder:"All statuses"})}),e.jsxs(et,{children:[e.jsx(Y,{value:"all",children:"All statuses"}),e.jsx(Y,{value:"in_stock",children:"In Stock"}),e.jsx(Y,{value:"low_stock",children:"Low Stock"}),e.jsx(Y,{value:"out_of_stock",children:"Out of Stock"})]})]})]}),e.jsx(Lr,{}),e.jsxs(ct,{onClick:H,children:[e.jsx(hn,{className:"mr-2 h-4 w-4"}),"Clear Filters"]})]})]})]})})}),e.jsxs(ae,{children:[e.jsxs(ir,{children:[e.jsx(lr,{children:e.jsxs(ft,{children:[s("name")&&e.jsx(me,{children:"Item"}),s("sku")&&e.jsx(me,{children:"SKU"}),s("category")&&e.jsx(me,{children:"Category"}),s("quantity")&&e.jsx(me,{children:"Quantity"}),s("price")&&e.jsx(me,{children:"Unit Price"}),s("supplier")&&e.jsx(me,{children:"Supplier"}),s("location")&&e.jsx(me,{children:"Location"}),e.jsx(me,{className:"text-right",children:"Actions"})]})}),e.jsx(or,{children:d.map((je,He)=>e.jsxs(ft,{className:"cursor-pointer hover:bg-muted/50",onClick:()=>t(`/inventory/${je.id}`),children:[s("name")&&e.jsx(oe,{children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:je.name}),je.description&&e.jsx("div",{className:"text-sm text-muted-foreground",children:je.description})]})}),s("sku")&&e.jsx(oe,{className:"text-sm text-muted-foreground",children:je.sku||"N/A"}),s("category")&&e.jsx(oe,{children:e.jsx(Oe,{variant:"outline",children:je.category||"Uncategorized"})}),s("quantity")&&e.jsx(oe,{className:"font-medium",children:je.quantity}),s("price")&&e.jsx(oe,{className:"text-sm text-muted-foreground",children:at(je.unit_price)}),s("supplier")&&e.jsx(oe,{className:"text-sm text-muted-foreground",children:je.supplier||"N/A"}),s("location")&&e.jsx(oe,{className:"text-sm text-muted-foreground",children:je.location||"N/A"}),e.jsx(oe,{className:"text-right",children:e.jsxs(Cr,{children:[e.jsx(Sr,{asChild:!0,children:e.jsx(q,{variant:"ghost",className:"h-8 w-8 p-0",onClick:Se=>Se.stopPropagation(),children:e.jsx(ss,{className:"h-4 w-4"})})}),e.jsxs(wr,{align:"end",onClick:Se=>Se.stopPropagation(),children:[e.jsx(Tr,{children:"Actions"}),e.jsxs(ct,{onClick:Se=>{Se.stopPropagation(),$e(je.id)},children:[e.jsx(mr,{className:"mr-2 h-4 w-4"}),"View Details"]}),e.jsxs(ct,{onClick:Se=>{Se.stopPropagation(),ge(je)},children:[e.jsx(xr,{className:"mr-2 h-4 w-4"}),"Edit Item"]}),e.jsxs(ct,{onClick:Se=>{Se.stopPropagation(),_e(je)},children:[e.jsx(Jt,{className:"mr-2 h-4 w-4"}),"Adjust Stock"]}),e.jsx(Lr,{}),e.jsxs(ct,{className:"text-red-600",onClick:Se=>{Se.stopPropagation(),ht(je)},children:[e.jsx(br,{className:"mr-2 h-4 w-4"}),"Delete"]})]})]})})]},`item-${je.id}-${He}`))})]}),E>1&&e.jsxs("div",{className:"flex items-center justify-between px-2 py-4",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",(S-1)*R+1," to ",Math.min(S*R,O)," of ",O," items"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(q,{variant:"outline",size:"sm",onClick:()=>k(je=>Math.max(je-1,1)),disabled:S===1,children:[e.jsx(_c,{className:"h-4 w-4"}),"Previous"]}),e.jsx("div",{className:"flex items-center space-x-1",children:Array.from({length:Math.min(5,E)},(je,He)=>{const Se=He+1;return e.jsx(q,{variant:S===Se?"default":"outline",size:"sm",onClick:()=>k(Se),className:"w-8 h-8 p-0",children:Se},Se)})}),e.jsxs(q,{variant:"outline",size:"sm",onClick:()=>k(je=>Math.min(je+1,E)),disabled:S===E,children:["Next",e.jsx(ri,{className:"h-4 w-4"})]})]})]})]})]}),e.jsx(Ft,{open:ie,onOpenChange:V,children:e.jsxs(Rt,{className:"max-w-2xl",children:[e.jsxs(qt,{children:[e.jsx(Lt,{children:"Edit Inventory Item"}),e.jsxs(Ut,{children:["Update the details for ",B?.name]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"edit-name",children:"Item Name *"}),e.jsx(be,{id:"edit-name",value:W.name,onChange:je=>ee({...W,name:je.target.value}),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"edit-sku",children:"SKU"}),e.jsx(be,{id:"edit-sku",value:W.sku,onChange:je=>ee({...W,sku:je.target.value})})]}),e.jsxs("div",{className:"space-y-2 col-span-2",children:[e.jsx(U,{htmlFor:"edit-description",children:"Description"}),e.jsx(be,{id:"edit-description",value:W.description,onChange:je=>ee({...W,description:je.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"edit-quantity",children:"Quantity *"}),e.jsx(be,{id:"edit-quantity",type:"number",value:W.quantity,onChange:je=>ee({...W,quantity:je.target.value}),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"edit-unit-price",children:"Unit Price (KM) *"}),e.jsx(be,{id:"edit-unit-price",type:"number",step:"0.01",value:W.unit_price,onChange:je=>ee({...W,unit_price:je.target.value}),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"edit-category",children:"Category"}),e.jsx(be,{id:"edit-category",value:W.category,onChange:je=>ee({...W,category:je.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"edit-supplier",children:"Supplier"}),e.jsx(be,{id:"edit-supplier",value:W.supplier,onChange:je=>ee({...W,supplier:je.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"edit-location",children:"Location"}),e.jsx(be,{id:"edit-location",value:W.location,onChange:je=>ee({...W,location:je.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"edit-min-stock",children:"Minimum Stock Level"}),e.jsx(be,{id:"edit-min-stock",type:"number",value:W.min_stock_level,onChange:je=>ee({...W,min_stock_level:je.target.value})})]})]}),e.jsxs(Dr,{children:[e.jsx(q,{variant:"outline",onClick:()=>V(!1),children:"Cancel"}),e.jsx(q,{onClick:we,disabled:te,children:te?e.jsxs(e.Fragment,{children:[e.jsx(Nt,{className:"mr-2 h-4 w-4 animate-spin"}),"Saving..."]}):"Save Changes"})]})]})}),e.jsx(Ft,{open:re,onOpenChange:M,children:e.jsxs(Rt,{children:[e.jsxs(qt,{children:[e.jsx(Lt,{children:"Adjust Stock"}),e.jsxs(Ut,{children:["Update stock level for ",B?.name]})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"current-stock",children:"Current Stock"}),e.jsx(be,{id:"current-stock",value:B?.quantity||0,disabled:!0,className:"bg-muted"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"new-quantity",children:"New Quantity *"}),e.jsx(be,{id:"new-quantity",type:"number",value:ye.quantity,onChange:je=>he({...ye,quantity:je.target.value}),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"adjustment-reason",children:"Reason"}),e.jsxs(tt,{value:ye.reason,onValueChange:je=>he({...ye,reason:je}),children:[e.jsx(Je,{children:e.jsx(rt,{})}),e.jsxs(et,{children:[e.jsx(Y,{value:"adjustment",children:"Stock Adjustment"}),e.jsx(Y,{value:"restock",children:"Restocking"}),e.jsx(Y,{value:"damage",children:"Damaged Items"}),e.jsx(Y,{value:"lost",children:"Lost Items"}),e.jsx(Y,{value:"correction",children:"Inventory Correction"})]})]})]})]}),e.jsxs(Dr,{children:[e.jsx(q,{variant:"outline",onClick:()=>M(!1),children:"Cancel"}),e.jsx(q,{onClick:Ye,disabled:te,children:te?e.jsxs(e.Fragment,{children:[e.jsx(Nt,{className:"mr-2 h-4 w-4 animate-spin"}),"Adjusting..."]}):"Adjust Stock"})]})]})}),e.jsx(Vs,{open:xe,onOpenChange:pe,onConfirm:Ve,title:"Delete Inventory Item",description:`Are you sure you want to delete ${B?.name}? This action cannot be undone.`,isLoading:te}),e.jsx(h5,{open:T,onOpenChange:F,itemName:I.item?.name,workOrderCount:I.workOrderCount,title:"Cannot Delete Inventory Item"})]})})}function Uee(){const{id:t}=oi(),r=er(),[n,s]=f.useState(null),[a,l]=f.useState([]),[c,u]=f.useState([]),[d,h]=f.useState(!0),[x,p]=f.useState(null),[y,v]=f.useState(!1),[w,b]=f.useState(!1),[N,_]=f.useState(!1),[S,k]=f.useState(!1),[E,A]=f.useState(0),[O,z]=f.useState({name:"",description:"",quantity:"",unit_price:"",category:"",supplier:"",sku:"",location:"",min_stock_level:""}),[R,G]=f.useState({quantity:"",reason:"adjustment"}),[J,ie]=f.useState(!1);f.useEffect(()=>{t&&V()},[t]);const V=async()=>{try{h(!0),p(null);const te=await de.getInventoryItem(t);s(te.data);const De=await de.getInventoryWorkOrders(t);l(De.data||[]);const ne=await de.getInventoryWarrantyWorkOrders(t);u(ne.data||[])}catch(te){p("Failed to load inventory item details."),console.error("Error fetching inventory details:",te)}finally{h(!1)}},xe=(te,De)=>{const ne=De||5;return te===0?e.jsx(Oe,{variant:"destructive",children:"Out of Stock"}):te<=ne?e.jsx(Oe,{variant:"outline",className:"border-orange-300 text-orange-700",children:"Low Stock"}):e.jsx(Oe,{variant:"outline",className:"border-green-300 text-green-700",children:"In Stock"})},pe=te=>{const ne={pending:Zt,in_progress:ks,completed:Ar,cancelled:wn}[te]||Zt;return e.jsxs(Oe,{variant:Vr(te),className:`flex items-center gap-1 ${Vr(te)==="outline"?Xs(te):""}`,children:[e.jsx(ne,{className:"h-3 w-3"}),Qs(te)]})},re=te=>{const De={low:{color:"default"},medium:{color:"outline"},high:{color:"destructive"}},ne=De[te]||De.medium;return e.jsx(Oe,{variant:ne.color,children:te})},M=()=>{n&&(z({name:n.name,description:n.description||"",quantity:n.quantity.toString(),unit_price:n.unit_price.toString(),category:n.category||"",supplier:n.supplier||"",sku:n.sku||"",location:n.location||"",min_stock_level:n.min_stock_level?.toString()||""}),v(!0))},B=async()=>{if(n){ie(!0);try{await de.updateInventoryItem(n.id,{name:O.name,description:O.description||null,quantity:parseInt(O.quantity),unit_price:parseFloat(O.unit_price),category:O.category||null,supplier:O.supplier||null,sku:O.sku||null,location:O.location||null,min_stock_level:O.min_stock_level?parseInt(O.min_stock_level):null}),Ne.success("Inventory item updated successfully"),v(!1),V()}catch(te){console.error("Error updating item:",te),Ne.error(te.response?.data?.message||"Failed to update item")}finally{ie(!1)}}},L=()=>{n&&(G({quantity:n.quantity.toString(),reason:"adjustment"}),_(!0))},T=async()=>{if(n){ie(!0);try{await de.updateInventoryItem(n.id,{quantity:parseInt(R.quantity)}),Ne.success("Stock adjusted successfully"),_(!1),V()}catch(te){console.error("Error adjusting stock:",te),Ne.error(te.response?.data?.message||"Failed to adjust stock")}finally{ie(!1)}}},F=()=>{b(!0)},I=async()=>{if(n){ie(!0);try{await de.deleteInventoryItem(n.id),Ne.success("Inventory item deleted successfully"),r("/inventory")}catch(te){if(console.error("Error deleting item:",te),te.response?.data?.message?.includes("currently used in")&&te.response?.data?.message?.includes("work order")){const ne=te.response.data.message.match(/used in (\d+) work order/),$e=ne?parseInt(ne[1]):0;A($e),k(!0),b(!1)}else Ne.error(te.response?.data?.message||"Failed to delete item");ie(!1)}}};if(d)return e.jsx(gt,{children:e.jsxs("div",{className:"flex items-center justify-center h-64",children:[e.jsx(Nt,{className:"h-8 w-8 animate-spin"}),e.jsx("span",{className:"ml-2",children:"Loading inventory details..."})]})});if(x)return e.jsx(gt,{children:e.jsxs(On,{variant:"destructive",children:[e.jsx(vr,{className:"h-4 w-4"}),e.jsx(Bn,{children:"Error"}),e.jsx(Pn,{children:x})]})});if(!n)return e.jsx(gt,{children:e.jsxs(On,{variant:"destructive",children:[e.jsx(vr,{className:"h-4 w-4"}),e.jsx(Bn,{children:"Not Found"}),e.jsx(Pn,{children:"Inventory item not found."})]})});const Q=a.length,W=c.length,ee=a.reduce((te,De)=>te+(De.quantity_used||0),0)+c.reduce((te,De)=>te+(De.quantity_used||0),0),ye=ee*parseFloat(n.unit_price.toString()),he=n.quantity*parseFloat(n.unit_price.toString());return e.jsx(gt,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(q,{variant:"ghost",onClick:()=>r(-1),className:"mr-2",children:e.jsx(Cn,{className:"h-4 w-4"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:n.name}),e.jsxs("div",{className:"text-muted-foreground flex items-center gap-2",children:[n.sku&&e.jsxs("span",{children:["SKU: ",n.sku]}),n.sku&&n.category&&e.jsx("span",{children:"•"}),n.category&&e.jsx("span",{children:n.category}),(n.sku||n.category)&&e.jsx("span",{children:"•"}),xe(n.quantity,n.min_stock_level)]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(q,{variant:"outline",onClick:L,children:[e.jsx(Jt,{className:"mr-2 h-4 w-4"}),"Adjust Stock"]}),e.jsxs(q,{variant:"outline",onClick:M,children:[e.jsx(xr,{className:"mr-2 h-4 w-4"}),"Edit Item"]}),e.jsxs(q,{variant:"destructive",onClick:F,children:[e.jsx(br,{className:"mr-2 h-4 w-4"}),"Delete Item"]})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-5",children:[e.jsxs(se,{children:[e.jsxs(ue,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(fe,{className:"text-sm font-medium",children:"Current Stock"}),e.jsx(Jt,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(ae,{children:[e.jsx("div",{className:"text-2xl font-bold",children:n.quantity}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Units available"})]})]}),e.jsxs(se,{children:[e.jsxs(ue,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(fe,{className:"text-sm font-medium",children:"Stock Value"}),e.jsx(Xm,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(ae,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:[he.toFixed(2)," KM"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Current value"})]})]}),e.jsxs(se,{children:[e.jsxs(ue,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(fe,{className:"text-sm font-medium",children:"Total Used"}),e.jsx(Zm,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(ae,{children:[e.jsx("div",{className:"text-2xl font-bold",children:ee}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Units consumed"})]})]}),e.jsxs(se,{children:[e.jsxs(ue,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(fe,{className:"text-sm font-medium",children:"Work Orders"}),e.jsx(Ct,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(ae,{children:[e.jsx("div",{className:"text-2xl font-bold",children:Q}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Regular repairs"})]})]}),e.jsxs(se,{children:[e.jsxs(ue,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(fe,{className:"text-sm font-medium",children:"Warranty Repairs"}),e.jsx(ei,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(ae,{children:[e.jsx("div",{className:"text-2xl font-bold",children:W}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Warranty repairs"})]})]})]}),n.quantity<=(n.min_stock_level||5)&&e.jsxs(On,{variant:"destructive",children:[e.jsx(fs,{className:"h-4 w-4"}),e.jsx(Bn,{children:"Low Stock Alert"}),e.jsxs(Pn,{children:["This item is running low on stock. Current quantity: ",n.quantity,", Minimum level: ",n.min_stock_level||5]})]}),e.jsxs(Ys,{defaultValue:"details",className:"space-y-4",children:[e.jsxs(Ps,{children:[e.jsx(Kt,{value:"details",children:"Item Details"}),e.jsxs(Kt,{value:"work-orders",children:["Work Orders (",a.length,")"]}),e.jsxs(Kt,{value:"warranty-work-orders",children:["Warranty Work Orders (",c.length,")"]}),e.jsx(Kt,{value:"usage-stats",children:"Usage Statistics"})]}),e.jsx(Gt,{value:"details",className:"space-y-4",children:e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs(se,{children:[e.jsx(ue,{children:e.jsxs(fe,{className:"flex items-center gap-2",children:[e.jsx(Jt,{className:"h-5 w-5"}),"Basic Information"]})}),e.jsxs(ae,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Name"}),e.jsx("p",{className:"text-sm",children:n.name})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"SKU"}),e.jsx("p",{className:"text-sm",children:n.sku||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Part Number"}),e.jsx("p",{className:"text-sm",children:n.part_number||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Barcode"}),e.jsx("p",{className:"text-sm",children:n.barcode||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Category"}),e.jsx("p",{className:"text-sm",children:n.category||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Location"}),e.jsx("p",{className:"text-sm",children:n.location||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Created"}),e.jsx("p",{className:"text-sm",children:jt(n.created_at)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Last Updated"}),e.jsx("p",{className:"text-sm",children:jt(n.updated_at)})]})]}),n.description&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Description"}),e.jsx("p",{className:"text-sm",children:n.description})]})]})]}),e.jsxs(se,{children:[e.jsx(ue,{children:e.jsxs(fe,{className:"flex items-center gap-2",children:[e.jsx(sl,{className:"h-5 w-5"}),"Stock & Pricing"]})}),e.jsx(ae,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Current Quantity"}),e.jsx("p",{className:"text-sm font-bold",children:n.quantity})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Unit Price"}),e.jsxs("p",{className:"text-sm font-bold",children:[parseFloat(n.unit_price.toString()).toFixed(2)," KM"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Min Stock Level"}),e.jsx("p",{className:"text-sm",children:n.min_stock_level||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Reorder Level"}),e.jsx("p",{className:"text-sm",children:n.reorder_level||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Min Order Qty"}),e.jsx("p",{className:"text-sm",children:n.min_order_quantity||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Lead Time"}),e.jsx("p",{className:"text-sm",children:n.lead_time_days?`${n.lead_time_days} days`:"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Supplier"}),e.jsx("p",{className:"text-sm",children:n.supplier||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Value"}),e.jsxs("p",{className:"text-sm font-bold",children:[he.toFixed(2)," KM"]})]})]})})]})]})}),e.jsx(Gt,{value:"work-orders",className:"space-y-4",children:e.jsxs(se,{children:[e.jsx(ue,{children:e.jsxs(fe,{className:"flex items-center gap-2",children:[e.jsx(Ct,{className:"h-5 w-5"}),"Work Orders Using This Item (",a.length,")"]})}),e.jsx(ae,{children:a.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Ct,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"This item has not been used in any work orders."})]}):e.jsxs(ir,{children:[e.jsx(lr,{children:e.jsxs(ft,{children:[e.jsx(me,{children:"Work Order"}),e.jsx(me,{children:"Status"}),e.jsx(me,{children:"Priority"}),e.jsx(me,{children:"Customer"}),e.jsx(me,{children:"Machine"}),e.jsx(me,{children:"Technician"}),e.jsx(me,{children:"Quantity Used"}),e.jsx(me,{children:"Created"}),e.jsx(me,{className:"text-right",children:"Actions"})]})}),e.jsx(or,{children:a.map(te=>e.jsxs(ft,{children:[e.jsx(oe,{className:"font-medium",children:e.jsxs(q,{variant:"link",className:"p-0 h-auto",onClick:()=>r(`/work-orders/${te.id}`),children:["#",te.formatted_number||te.id]})}),e.jsx(oe,{children:pe(te.status)}),e.jsx(oe,{children:re(te.priority)}),e.jsx(oe,{children:e.jsx(q,{variant:"link",className:"p-0 h-auto text-xs",onClick:()=>r(`/customers/${te.customer_id}`),children:te.customer_name})}),e.jsx(oe,{children:e.jsx(q,{variant:"link",className:"p-0 h-auto text-xs",onClick:()=>r(`/machines/${te.machine_id}`),children:te.serial_number})}),e.jsx(oe,{children:te.technician_name||"Unassigned"}),e.jsx(oe,{className:"font-medium",children:te.quantity_used}),e.jsx(oe,{children:jt(te.created_at)}),e.jsx(oe,{className:"text-right",children:e.jsxs(Cr,{children:[e.jsx(Sr,{asChild:!0,children:e.jsx(q,{variant:"ghost",className:"h-8 w-8 p-0",children:e.jsx(mr,{className:"h-4 w-4"})})}),e.jsxs(wr,{align:"end",children:[e.jsx(Tr,{children:"Actions"}),e.jsxs(ct,{onClick:()=>r(`/work-orders/${te.id}`),children:[e.jsx(mr,{className:"mr-2 h-4 w-4"})," View Work Order"]}),e.jsxs(ct,{onClick:()=>r(`/customers/${te.customer_id}`),children:[e.jsx(Ot,{className:"mr-2 h-4 w-4"})," View Customer"]}),e.jsxs(ct,{onClick:()=>r(`/machines/${te.machine_id}`),children:[e.jsx(Ct,{className:"mr-2 h-4 w-4"})," View Machine"]})]})]})})]},te.id))})]})})]})}),e.jsx(Gt,{value:"warranty-work-orders",className:"space-y-4",children:e.jsxs(se,{children:[e.jsx(ue,{children:e.jsxs(fe,{className:"flex items-center gap-2",children:[e.jsx(ei,{className:"h-5 w-5"}),"Warranty Work Orders Using This Item (",c.length,")"]})}),e.jsx(ae,{children:c.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(ei,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"This item has not been used in any warranty work orders."})]}):e.jsxs(ir,{children:[e.jsx(lr,{children:e.jsxs(ft,{children:[e.jsx(me,{children:"Work Order"}),e.jsx(me,{children:"Status"}),e.jsx(me,{children:"Priority"}),e.jsx(me,{children:"Customer"}),e.jsx(me,{children:"Machine"}),e.jsx(me,{children:"Technician"}),e.jsx(me,{children:"Quantity Used"}),e.jsx(me,{children:"Created"}),e.jsx(me,{className:"text-right",children:"Actions"})]})}),e.jsx(or,{children:c.map(te=>e.jsxs(ft,{children:[e.jsx(oe,{className:"font-medium",children:e.jsxs(q,{variant:"link",className:"p-0 h-auto",onClick:()=>r(`/warranty-work-orders/${te.id}`),children:["#",te.formatted_number||te.id]})}),e.jsx(oe,{children:pe(te.status)}),e.jsx(oe,{children:re(te.priority)}),e.jsx(oe,{children:e.jsx(q,{variant:"link",className:"p-0 h-auto text-xs",onClick:()=>r(`/customers/${te.customer_id}`),children:te.customer_name})}),e.jsx(oe,{children:e.jsx(q,{variant:"link",className:"p-0 h-auto text-xs",onClick:()=>r(`/machines/${te.machine_id}`),children:te.serial_number})}),e.jsx(oe,{children:te.technician_name||"Unassigned"}),e.jsx(oe,{className:"font-medium",children:te.quantity_used}),e.jsx(oe,{children:jt(te.created_at)}),e.jsx(oe,{className:"text-right",children:e.jsxs(Cr,{children:[e.jsx(Sr,{asChild:!0,children:e.jsx(q,{variant:"ghost",className:"h-8 w-8 p-0",children:e.jsx(mr,{className:"h-4 w-4"})})}),e.jsxs(wr,{align:"end",children:[e.jsx(Tr,{children:"Actions"}),e.jsxs(ct,{onClick:()=>r(`/warranty-work-orders/${te.id}`),children:[e.jsx(mr,{className:"mr-2 h-4 w-4"})," View Work Order"]}),e.jsxs(ct,{onClick:()=>r(`/customers/${te.customer_id}`),children:[e.jsx(Ot,{className:"mr-2 h-4 w-4"})," View Customer"]}),e.jsxs(ct,{onClick:()=>r(`/machines/${te.machine_id}`),children:[e.jsx(Ct,{className:"mr-2 h-4 w-4"})," View Machine"]})]})]})})]},te.id))})]})})]})}),e.jsx(Gt,{value:"usage-stats",className:"space-y-4",children:e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs(se,{children:[e.jsx(ue,{children:e.jsxs(fe,{className:"flex items-center gap-2",children:[e.jsx(sl,{className:"h-5 w-5"}),"Usage Summary"]})}),e.jsx(ae,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Units Used"}),e.jsx("p",{className:"text-2xl font-bold",children:ee})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Value Used"}),e.jsxs("p",{className:"text-2xl font-bold",children:[ye.toFixed(2)," KM"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Regular Work Orders"}),e.jsx("p",{className:"text-2xl font-bold",children:Q})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Warranty Work Orders"}),e.jsx("p",{className:"text-2xl font-bold",children:W})]})]})})]}),e.jsxs(se,{children:[e.jsx(ue,{children:e.jsxs(fe,{className:"flex items-center gap-2",children:[e.jsx(Os,{className:"h-5 w-5"}),"Stock Analysis"]})}),e.jsxs(ae,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Current Stock"}),e.jsx("p",{className:"text-2xl font-bold",children:n.quantity})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Stock Value"}),e.jsxs("p",{className:"text-2xl font-bold",children:[he.toFixed(2)," KM"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Min Stock Level"}),e.jsx("p",{className:"text-2xl font-bold",children:n.min_stock_level||5})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Reorder Level"}),e.jsx("p",{className:"text-2xl font-bold",children:n.reorder_level||"N/A"})]})]}),n.quantity<=(n.min_stock_level||5)&&e.jsxs(On,{variant:"destructive",children:[e.jsx(fs,{className:"h-4 w-4"}),e.jsx(Bn,{children:"Reorder Required"}),e.jsx(Pn,{children:"Stock is below minimum level. Consider reordering."})]})]})]})]})})]}),e.jsx(Ft,{open:y,onOpenChange:v,children:e.jsxs(Rt,{className:"max-w-2xl",children:[e.jsxs(qt,{children:[e.jsx(Lt,{children:"Edit Inventory Item"}),e.jsxs(Ut,{children:["Update the details for ",n?.name]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"edit-name",children:"Item Name *"}),e.jsx(be,{id:"edit-name",value:O.name,onChange:te=>z({...O,name:te.target.value}),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"edit-sku",children:"SKU"}),e.jsx(be,{id:"edit-sku",value:O.sku,onChange:te=>z({...O,sku:te.target.value})})]}),e.jsxs("div",{className:"space-y-2 col-span-2",children:[e.jsx(U,{htmlFor:"edit-description",children:"Description"}),e.jsx(be,{id:"edit-description",value:O.description,onChange:te=>z({...O,description:te.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"edit-quantity",children:"Quantity *"}),e.jsx(be,{id:"edit-quantity",type:"number",value:O.quantity,onChange:te=>z({...O,quantity:te.target.value}),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"edit-unit-price",children:"Unit Price (KM) *"}),e.jsx(be,{id:"edit-unit-price",type:"number",step:"0.01",value:O.unit_price,onChange:te=>z({...O,unit_price:te.target.value}),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"edit-category",children:"Category"}),e.jsx(be,{id:"edit-category",value:O.category,onChange:te=>z({...O,category:te.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"edit-supplier",children:"Supplier"}),e.jsx(be,{id:"edit-supplier",value:O.supplier,onChange:te=>z({...O,supplier:te.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"edit-location",children:"Location"}),e.jsx(be,{id:"edit-location",value:O.location,onChange:te=>z({...O,location:te.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"edit-min-stock",children:"Minimum Stock Level"}),e.jsx(be,{id:"edit-min-stock",type:"number",value:O.min_stock_level,onChange:te=>z({...O,min_stock_level:te.target.value})})]})]}),e.jsxs(Dr,{children:[e.jsx(q,{variant:"outline",onClick:()=>v(!1),children:"Cancel"}),e.jsx(q,{onClick:B,disabled:J,children:J?e.jsxs(e.Fragment,{children:[e.jsx(Nt,{className:"mr-2 h-4 w-4 animate-spin"}),"Saving..."]}):"Save Changes"})]})]})}),e.jsx(Ft,{open:N,onOpenChange:_,children:e.jsxs(Rt,{children:[e.jsxs(qt,{children:[e.jsx(Lt,{children:"Adjust Stock"}),e.jsxs(Ut,{children:["Update stock level for ",n?.name]})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"current-stock",children:"Current Stock"}),e.jsx(be,{id:"current-stock",value:n?.quantity||0,disabled:!0,className:"bg-muted"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"new-quantity",children:"New Quantity *"}),e.jsx(be,{id:"new-quantity",type:"number",value:R.quantity,onChange:te=>G({...R,quantity:te.target.value}),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"adjustment-reason",children:"Reason"}),e.jsxs(tt,{value:R.reason,onValueChange:te=>G({...R,reason:te}),children:[e.jsx(Je,{children:e.jsx(rt,{})}),e.jsxs(et,{children:[e.jsx(Y,{value:"adjustment",children:"Stock Adjustment"}),e.jsx(Y,{value:"restock",children:"Restocking"}),e.jsx(Y,{value:"damage",children:"Damaged Items"}),e.jsx(Y,{value:"lost",children:"Lost Items"}),e.jsx(Y,{value:"correction",children:"Inventory Correction"})]})]})]})]}),e.jsxs(Dr,{children:[e.jsx(q,{variant:"outline",onClick:()=>_(!1),children:"Cancel"}),e.jsx(q,{onClick:T,disabled:J,children:J?e.jsxs(e.Fragment,{children:[e.jsx(Nt,{className:"mr-2 h-4 w-4 animate-spin"}),"Adjusting..."]}):"Adjust Stock"})]})]})}),e.jsx(Vs,{open:w,onOpenChange:b,onConfirm:I,title:"Delete Inventory Item",description:`Are you sure you want to delete ${n?.name}? This action cannot be undone.`,isLoading:J}),e.jsx(h5,{open:S,onOpenChange:k,itemName:n?.name,workOrderCount:E,title:"Cannot Delete Inventory Item"})]})})}const zee={name:"",description:"",quantity:"0",unit_price:"0.00",category:"",min_stock_level:"5",supplier:"",sku:"",location:""};function Bee(){const t=er(),[r,n]=f.useState(zee),[s,a]=f.useState(!1),[l,c]=f.useState({}),[u,d]=f.useState([]),[h,x]=f.useState([]),[p,y]=f.useState(!1),[v,w]=f.useState(!1),[b,N]=f.useState(!1),[_,S]=f.useState(!1),[k,E]=f.useState(""),[A,O]=f.useState(""),[z,R]=f.useState(!1);f.useEffect(()=>{G()},[]);const G=async()=>{await Promise.all([J(),ie()])},J=async()=>{try{y(!0);const F=((await de.getInventoryCategories()).data||[]).map(I=>I.name);d(F)}catch(T){console.error("Error fetching categories:",T),Ne.error("Failed to load categories"),d(["Parts","Tools","Supplies","Equipment","Consumables","Electronics","Mechanical","Electrical","Hydraulic","Pneumatic","Safety","Cleaning","Lubricants","Filters","Belts","Other"])}finally{y(!1)}},ie=async()=>{try{w(!0);const F=((await de.getSuppliers()).data||[]).map(I=>I.name);x(F)}catch(T){console.error("Error fetching suppliers:",T),Ne.error("Failed to load suppliers"),x(["Local Supplier","Online Store","Manufacturer Direct","Distributor","Other"])}finally{w(!1)}},V=u.filter(T=>T.toLowerCase().includes(k.toLowerCase())),xe=h.filter(T=>T.toLowerCase().includes(A.toLowerCase())),pe=async()=>{const T=k.trim();if(!T){Ne.error("Please enter a category name");return}const F=u.find(I=>I.toLowerCase()===T.toLowerCase());if(F){n(I=>({...I,category:F})),E(""),N(!1),Ne.info(`Category "${F}" already exists and has been selected`);return}try{R(!0);const Q=(await de.createInventoryCategory({name:T,description:`Category for ${T}`})).data;d(W=>[...W,Q.name]),n(W=>({...W,category:Q.name})),E(""),N(!1),Ne.success(`Category "${Q.name}" created successfully`)}catch(I){console.error("Error creating category:",I),Ne.error(I.message||"Failed to create category")}finally{R(!1)}},re=(T,F)=>{n(I=>({...I,[T]:F})),l[T]&&c(I=>({...I,[T]:void 0}))},M=()=>{const T={};r.name.trim()||(T.name="Name is required");const F=parseInt(r.quantity);(isNaN(F)||F<0)&&(T.quantity="Quantity must be a valid positive number");const I=parseFloat(r.unit_price);(isNaN(I)||I<0)&&(T.unit_price="Unit price must be a valid positive number");const Q=parseInt(r.min_stock_level);return r.min_stock_level&&(isNaN(Q)||Q<0)&&(T.min_stock_level="Minimum stock level must be a valid positive number"),c(T),Object.keys(T).length===0},B=async T=>{if(T.preventDefault(),!M()){Ne.error("Please fix the errors before submitting");return}a(!0);try{const F={name:r.name.trim(),description:r.description.trim()||null,quantity:parseInt(r.quantity),unit_price:parseFloat(r.unit_price),category:r.category||null,min_stock_level:r.min_stock_level?parseInt(r.min_stock_level):null,supplier:r.supplier||null,sku:r.sku.trim()||null,location:r.location.trim()||null};await de.createInventoryItem(F),Ne.success("Inventory item created successfully!"),t("/inventory")}catch(F){console.error("Error creating inventory item:",F),Ne.error(F.message||"Failed to create inventory item")}finally{a(!1)}},L=()=>{t("/inventory")};return e.jsx(gt,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(q,{variant:"ghost",size:"icon",onClick:L,children:e.jsx(Cn,{className:"h-4 w-4"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Add Inventory Item"}),e.jsx("p",{className:"text-muted-foreground",children:"Create a new inventory item with all necessary details"})]})]}),e.jsxs("form",{onSubmit:B,className:"space-y-6",children:[e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs(se,{children:[e.jsx(ue,{children:e.jsx(fe,{children:"Basic Information"})}),e.jsxs(ae,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"name",children:"Item Name *"}),e.jsx(be,{id:"name",value:r.name,onChange:T=>re("name",T.target.value),placeholder:"Enter item name",className:l.name?"border-red-500":""}),l.name&&e.jsx("p",{className:"text-sm text-red-500",children:l.name})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"description",children:"Description"}),e.jsx(ar,{id:"description",value:r.description,onChange:T=>re("description",T.target.value),placeholder:"Enter item description",rows:3})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"sku",children:"SKU"}),e.jsx(be,{id:"sku",value:r.sku,onChange:T=>re("sku",T.target.value),placeholder:"Enter SKU or part number"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"category",children:"Category"}),e.jsxs(dn,{open:b,onOpenChange:N,children:[e.jsx(un,{asChild:!0,children:e.jsxs(q,{variant:"outline",role:"combobox","aria-expanded":b,className:"w-full justify-between h-11",children:[r.category||"Select category...",e.jsx(aA,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),e.jsxs(sn,{className:"w-[400px] p-0",align:"start",children:[e.jsx("div",{className:"border-b p-3",children:e.jsxs("div",{className:"relative",children:[e.jsx(nr,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(be,{placeholder:"Search or type new category...",className:"pl-10",value:k,onChange:T=>E(T.target.value)})]})}),e.jsxs("div",{className:"max-h-[200px] overflow-y-auto",children:[k.trim()&&!V.some(T=>T.toLowerCase()===k.toLowerCase())&&e.jsx("div",{className:"p-1 border-b",children:e.jsxs("div",{onClick:pe,className:"flex items-center gap-3 p-2 rounded-sm cursor-pointer hover:bg-accent hover:text-accent-foreground transition-colors",children:[e.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-green-100",children:z?e.jsx(Nt,{className:"h-4 w-4 animate-spin text-green-600"}):e.jsx("span",{className:"text-green-600 text-sm font-bold",children:"+"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("p",{className:"font-medium",children:['Add "',k,'"']}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Create new category"})]})]})}),V.length>0&&e.jsx("div",{className:"p-1",children:V.map(T=>e.jsxs("div",{onClick:()=>{re("category",T),N(!1)},className:ze("flex items-center gap-3 p-2 rounded-sm cursor-pointer hover:bg-accent hover:text-accent-foreground transition-colors",r.category===T&&"bg-accent"),children:[e.jsx(Gr,{className:ze("h-4 w-4",r.category===T?"opacity-100":"opacity-0")}),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"font-medium",children:T})})]},T))})]})]})]})]})]})]}),e.jsxs(se,{children:[e.jsx(ue,{children:e.jsx(fe,{children:"Stock & Pricing"})}),e.jsxs(ae,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"quantity",children:"Initial Quantity *"}),e.jsx(be,{id:"quantity",type:"number",min:"0",value:r.quantity,onChange:T=>re("quantity",T.target.value),placeholder:"0",className:l.quantity?"border-red-500":""}),l.quantity&&e.jsx("p",{className:"text-sm text-red-500",children:l.quantity})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"unit_price",children:"Unit Price (KM) *"}),e.jsx(be,{id:"unit_price",type:"number",min:"0",step:"0.01",value:r.unit_price,onChange:T=>re("unit_price",T.target.value),placeholder:"0.00",className:l.unit_price?"border-red-500":""}),l.unit_price&&e.jsx("p",{className:"text-sm text-red-500",children:l.unit_price})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"min_stock_level",children:"Minimum Stock Level"}),e.jsx(be,{id:"min_stock_level",type:"number",min:"0",value:r.min_stock_level,onChange:T=>re("min_stock_level",T.target.value),placeholder:"5",className:l.min_stock_level?"border-red-500":""}),l.min_stock_level&&e.jsx("p",{className:"text-sm text-red-500",children:l.min_stock_level}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Alert will be triggered when stock falls below this level"})]})]})]}),e.jsxs(se,{children:[e.jsx(ue,{children:e.jsx(fe,{children:"Supplier & Location"})}),e.jsxs(ae,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"supplier",children:"Supplier"}),e.jsxs(dn,{open:_,onOpenChange:S,children:[e.jsx(un,{asChild:!0,children:e.jsxs(q,{variant:"outline",role:"combobox","aria-expanded":_,className:"w-full justify-between h-11",children:[r.supplier||"Select supplier...",e.jsx(aA,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),e.jsxs(sn,{className:"w-[400px] p-0",align:"start",children:[e.jsx("div",{className:"border-b p-3",children:e.jsxs("div",{className:"relative",children:[e.jsx(nr,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(be,{placeholder:"Search or type new supplier...",className:"pl-10",value:A,onChange:T=>O(T.target.value)})]})}),e.jsxs("div",{className:"max-h-[200px] overflow-y-auto",children:[A.trim()&&!xe.some(T=>T.toLowerCase()===A.toLowerCase())&&e.jsx("div",{className:"p-1 border-b",children:e.jsxs("div",{onClick:()=>{re("supplier",A),S(!1)},className:"flex items-center gap-3 p-2 rounded-sm cursor-pointer hover:bg-accent hover:text-accent-foreground transition-colors",children:[e.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-orange-100",children:e.jsx("span",{className:"text-orange-600 text-sm font-bold",children:"+"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("p",{className:"font-medium",children:['Use "',A,'"']}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Add as new supplier"})]})]})}),xe.length>0&&e.jsx("div",{className:"p-1",children:xe.map(T=>e.jsxs("div",{onClick:()=>{re("supplier",T),S(!1)},className:ze("flex items-center gap-3 p-2 rounded-sm cursor-pointer hover:bg-accent hover:text-accent-foreground transition-colors",r.supplier===T&&"bg-accent"),children:[e.jsx(Gr,{className:ze("h-4 w-4",r.supplier===T?"opacity-100":"opacity-0")}),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"font-medium",children:T})})]},T))})]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"location",children:"Storage Location"}),e.jsx(be,{id:"location",value:r.location,onChange:T=>re("location",T.target.value),placeholder:"e.g., Warehouse A, Shelf B3"})]})]})]}),e.jsxs(se,{children:[e.jsx(ue,{children:e.jsx(fe,{children:"Summary"})}),e.jsxs(ae,{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Item:"}),e.jsx("span",{className:"text-sm font-medium",children:r.name||"Not specified"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Quantity:"}),e.jsx("span",{className:"text-sm font-medium",children:r.quantity})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Unit Price:"}),e.jsxs("span",{className:"text-sm font-medium",children:[r.unit_price," KM"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Total Value:"}),e.jsxs("span",{className:"text-sm font-medium",children:[(parseFloat(r.quantity)*parseFloat(r.unit_price)).toFixed(2)," KM"]})]}),r.category&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Category:"}),e.jsx("span",{className:"text-sm font-medium",children:r.category})]})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-4",children:[e.jsx(q,{type:"button",variant:"outline",onClick:L,children:"Cancel"}),e.jsx(q,{type:"submit",disabled:s,children:s?e.jsxs(e.Fragment,{children:[e.jsx(Nt,{className:"mr-2 h-4 w-4 animate-spin"}),"Creating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ul,{className:"mr-2 h-4 w-4"}),"Create Item"]})})]})]})]})})}function wo({open:t,onOpenChange:r,itemName:n,itemType:s="item",title:a="Cannot Delete Completed Item",description:l}){const c=`${n?`"${n}"`:`This ${s}`} is completed and cannot be deleted. Please contact your administrator if you need to remove this ${s}.`;return e.jsx(ng,{open:t,onOpenChange:r,children:e.jsxs(ch,{children:[e.jsxs(dh,{children:[e.jsx(mh,{children:a}),e.jsx(hh,{children:l||c})]}),e.jsx(uh,{children:e.jsx(fh,{onClick:()=>r(!1),children:"OK"})})]})})}function Wee(){const{id:t}=oi(),r=er(),{user:n}=hr(),[s,a]=f.useState(null),[l,c]=f.useState(!1),[u,d]=f.useState(""),[h,x]=f.useState([]),[p,y]=f.useState(!1),[v,w]=f.useState(!0),[b,N]=f.useState(null),[_,S]=f.useState(!1),[k,E]=f.useState(!1);f.useEffect(()=>{t&&A()},[t]);const A=async()=>{try{w(!0),N(null);const re=await de.getRepairTicket(t);a(re.data)}catch(re){N("Failed to load repair ticket details."),console.error("Error fetching repair ticket details:",re)}finally{w(!1)}},O=async()=>{if(s)if(n?.role==="technician"){y(!0);try{const re={technician_id:n.id,priority:s.priority||"medium",estimated_hours:null,notes:`Converted from repair ticket ${s.formatted_number||s.ticket_number}`},M=await de.convertRepairTicketToWorkOrder(s.id,re);Ne.success("Repair ticket converted and assigned to you"),M.data?.work_order?.id?r(`/work-orders/${M.data.work_order.id}`):await A()}catch(re){console.error("Error converting ticket:",re),Ne.error(re.response?.data?.message||"Failed to convert ticket to work order")}finally{y(!1)}}else{c(!0);try{const re=await de.getUsers(),M=re.data||re;x(Array.isArray(M)?M:[])}catch(re){console.error("Error fetching users:",re),Ne.error("Failed to load users")}}},z=async()=>{if(s){y(!0);try{const re={technician_id:u==="unassigned"?null:u||null,priority:s.priority||"medium",estimated_hours:null,notes:`Converted from repair ticket ${s.formatted_number||s.ticket_number}`},M=await de.convertRepairTicketToWorkOrder(s.id,re);Ne.success("Repair ticket converted to work order successfully"),c(!1),d(""),await A(),M.data?.work_order?.id&&r(`/work-orders/${M.data.work_order.id}`)}catch(re){console.error("Error converting ticket:",re),Ne.error(re.response?.data?.message||"Failed to convert ticket to work order")}finally{y(!1)}}},R=()=>{if(s){if(s.status==="converted"||s.status==="converted - warranty"){E(!0);return}S(!0)}},G=async()=>{try{const re=await fetch(`${rn}/api/print/repair-ticket/${s.id}`,{method:"GET",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!re.ok){const L=await re.text();throw console.error("Response error:",L),new Error(`Failed to generate PDF: ${re.status} ${re.statusText}`)}const M=await re.blob(),B=window.URL.createObjectURL(M);window.open(B,"_blank"),window.URL.revokeObjectURL(B)}catch(re){console.error("Error generating PDF:",re),Ne.error("Failed to generate PDF: "+re.message)}},J=async()=>{try{const re=await fetch(`${rn}/api/print/repair-ticket/${s.id}`,{method:"GET",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!re.ok)throw new Error("Failed to generate PDF");const M=await re.blob(),B=window.URL.createObjectURL(M),L=document.createElement("a");L.href=B,L.download=`repair-ticket-${s.formatted_number}.pdf`,document.body.appendChild(L),L.click(),document.body.removeChild(L),window.URL.revokeObjectURL(B)}catch(re){console.error("Error downloading PDF:",re),Ne.error("Failed to download PDF")}},ie=async()=>{if(s)try{await de.deleteRepairTicket(s.id),Ne.success("Repair ticket deleted successfully"),S(!1),r("/repair-tickets")}catch(re){console.error("Error deleting ticket:",re),Ne.error(re.response?.data?.message||"Failed to delete repair ticket")}},V=re=>{const M={low:{color:"outline",className:"bg-green-50 text-green-700 border-green-200",label:"Low"},medium:{color:"outline",className:"bg-yellow-50 text-yellow-700 border-yellow-200",label:"Medium"},high:{color:"outline",className:"bg-red-50 text-red-700 border-red-200",label:"High"}},B=M[re]||M.medium;return e.jsx(Oe,{variant:B.color,className:B.className,children:B.label})},xe=re=>{const B={intake:Zt,converted:Ar,"converted - warranty":ei,cancelled:wn}[re]||Zt;return e.jsxs(Oe,{variant:Vr(re),className:`flex items-center gap-1 ${Vr(re)==="outline"?Xs(re):""}`,children:[e.jsx(B,{className:"h-3 w-3"}),Qs(re)]})},pe=re=>{if(!re||re==="unknown")return null;const B={cold:{color:"outline",label:"Cold Lead"},warm:{color:"default",label:"Warm Lead"},hot:{color:"destructive",label:"Hot Lead"}}[re];return B?e.jsx(Oe,{variant:B.color,children:B.label}):null};return v?e.jsx(gt,{children:e.jsxs("div",{className:"flex items-center justify-center h-64",children:[e.jsx(Nt,{className:"h-8 w-8 animate-spin"}),e.jsx("span",{className:"ml-2",children:"Loading repair ticket details..."})]})}):b?e.jsx(gt,{children:e.jsxs(On,{variant:"destructive",children:[e.jsx(vr,{className:"h-4 w-4"}),e.jsx(Bn,{children:"Error"}),e.jsx(Pn,{children:b})]})}):s?e.jsxs(gt,{children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(q,{variant:"ghost",onClick:()=>r(-1),className:"mr-2",children:e.jsx(Cn,{className:"h-4 w-4"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:s.formatted_number||`Ticket #${s.id}`}),e.jsxs("div",{className:"text-muted-foreground flex items-center gap-2",children:[e.jsx("span",{children:s.customer_name}),e.jsx("span",{children:"•"}),xe(s.status),V(s.priority),pe(s.lead_quality)]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[n?.role!=="sales"&&e.jsxs(q,{variant:"outline",onClick:()=>r(`/repair-tickets/${t}`),children:[e.jsx(xr,{className:"mr-2 h-4 w-4"}),"Edit"]}),e.jsx(q,{variant:"outline",size:"sm",onClick:G,children:e.jsx($a,{className:"h-4 w-4"})}),e.jsx(q,{variant:"outline",size:"sm",onClick:J,children:e.jsx(Qt,{className:"h-4 w-4"})}),s.status==="intake"&&n?.role!=="sales"&&e.jsxs(q,{variant:"default",onClick:O,children:[e.jsx(Ct,{className:"mr-2 h-4 w-4"}),"Convert to Work Order"]}),n?.role!=="sales"&&e.jsx(q,{variant:"destructive",size:"sm",onClick:R,children:e.jsx(br,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[e.jsxs(se,{children:[e.jsxs(ue,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(fe,{className:"text-sm font-medium",children:"Status"}),e.jsx(Qt,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(ae,{children:[e.jsx("div",{className:"text-2xl font-bold",children:xe(s.status)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Current status"})]})]}),e.jsxs(se,{children:[e.jsxs(ue,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(fe,{className:"text-sm font-medium",children:"Priority"}),e.jsx(vr,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(ae,{children:[e.jsx("div",{className:"text-2xl font-bold",children:V(s.priority)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Priority level"})]})]}),e.jsxs(se,{children:[e.jsxs(ue,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(fe,{className:"text-sm font-medium",children:"Created"}),e.jsx(is,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(ae,{children:[e.jsx("div",{className:"text-2xl font-bold",children:jt(s.created_at)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Date submitted"})]})]}),e.jsxs(se,{children:[e.jsxs(ue,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(fe,{className:"text-sm font-medium",children:"Submitted By"}),e.jsx(Ot,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(ae,{children:[e.jsx("div",{className:"text-2xl font-bold",children:s.submitted_by_name||"Unknown"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Staff member"})]})]})]}),e.jsxs(Ys,{defaultValue:"details",className:"space-y-4",children:[e.jsxs(Ps,{children:[e.jsx(Kt,{value:"details",children:"Ticket Details"}),e.jsx(Kt,{value:"customer",children:"Customer Info"}),e.jsx(Kt,{value:"machine",children:"Machine Info"}),e.jsx(Kt,{value:"conversion",children:"Conversion"})]}),e.jsx(Gt,{value:"details",className:"space-y-4",children:e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs(se,{children:[e.jsx(ue,{children:e.jsxs(fe,{className:"flex items-center gap-2",children:[e.jsx(fs,{className:"h-5 w-5"}),"Problem Information"]})}),e.jsxs(ae,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Problem Description"}),e.jsx("p",{className:"text-sm mt-1",children:s.problem_description})]}),s.notes&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Notes"}),e.jsx("p",{className:"text-sm mt-1",children:s.notes})]}),s.additional_equipment&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Additional Equipment"}),e.jsx("p",{className:"text-sm mt-1",children:s.additional_equipment})]}),s.brought_by&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Brought By"}),e.jsx("p",{className:"text-sm mt-1",children:s.brought_by})]})]})]}),e.jsxs(se,{children:[e.jsx(ue,{children:e.jsxs(fe,{className:"flex items-center gap-2",children:[e.jsx(Qt,{className:"h-5 w-5"}),"Ticket Information"]})}),e.jsx(ae,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Ticket Number"}),e.jsx("p",{className:"text-sm font-bold",children:s.formatted_number||s.ticket_number||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Year Created"}),e.jsx("p",{className:"text-sm",children:s.year_created||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Status"}),e.jsx("div",{className:"text-sm",children:xe(s.status)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Priority"}),e.jsx("div",{className:"text-sm",children:V(s.priority)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Created"}),e.jsx("p",{className:"text-sm",children:jt(s.created_at)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Last Updated"}),e.jsx("p",{className:"text-sm",children:jt(s.updated_at)})]})]})})]})]})}),e.jsx(Gt,{value:"customer",className:"space-y-4",children:e.jsxs(se,{children:[e.jsx(ue,{children:e.jsxs(fe,{className:"flex items-center gap-2",children:[s.customer_type==="company"?e.jsx(Cs,{className:"h-5 w-5"}):e.jsx(cl,{className:"h-5 w-5"}),"Customer Information",s.customer_type&&e.jsx(Oe,{variant:s.customer_type==="company"?"default":"secondary",className:"text-xs",children:s.customer_type==="company"?"Company":"Private"})]})}),e.jsxs(ae,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.customer_type==="company"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Company Name"}),e.jsx("p",{className:"text-sm font-bold",children:s.company_name||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Contact Person"}),e.jsx("p",{className:"text-sm",children:s.contact_person||"N/A"})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Full Name"}),e.jsx("p",{className:"text-sm font-bold",children:s.customer_name})]}),s.company_name&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Company"}),e.jsx("p",{className:"text-sm",children:s.company_name})]})]}),s.customer_type==="company"&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"VAT Number"}),e.jsx("p",{className:"text-sm",children:s.vat_number||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Email"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ci,{className:"h-3 w-3"}),e.jsx("p",{className:"text-sm",children:s.email||"N/A"})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Phone"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Mi,{className:"h-3 w-3"}),e.jsx("p",{className:"text-sm",children:s.phone1||"N/A"})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Phone 2"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Mi,{className:"h-3 w-3"}),e.jsx("p",{className:"text-sm",children:s.phone2||"N/A"})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Address"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(dl,{className:"h-3 w-3"}),e.jsx("p",{className:"text-sm",children:s.street_address&&s.city&&s.postal_code?`${s.street_address}, ${s.postal_code} ${s.city}`:"N/A"})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Fax"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx($a,{className:"h-3 w-3"}),e.jsx("p",{className:"text-sm",children:s.fax||"N/A"})]})]})]}),e.jsx("div",{className:"pt-4",children:e.jsxs(q,{variant:"outline",onClick:()=>r(`/customers/${s.customer_id}`),children:[e.jsx(mr,{className:"mr-2 h-4 w-4"}),"View Customer Details"]})})]})]})}),e.jsx(Gt,{value:"machine",className:"space-y-4",children:e.jsxs(se,{children:[e.jsx(ue,{children:e.jsxs(fe,{className:"flex items-center gap-2",children:[e.jsx(Ct,{className:"h-5 w-5"}),"Machine Information"]})}),e.jsxs(ae,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Manufacturer"}),e.jsx("p",{className:"text-sm font-bold",children:s.manufacturer||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Model"}),e.jsx("p",{className:"text-sm font-bold",children:s.model_name||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Serial Number"}),e.jsx("p",{className:"text-sm",children:s.serial_number||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Catalogue Number"}),e.jsx("p",{className:"text-sm",children:s.catalogue_number||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Category"}),e.jsx("p",{className:"text-sm",children:s.category_name||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Purchase Date"}),e.jsx("p",{className:"text-sm",children:jt(s.purchase_date)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Warranty Expiry"}),e.jsx("p",{className:"text-sm",children:jt(s.warranty_expiry_date)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Receipt Number"}),e.jsx("p",{className:"text-sm",children:s.receipt_number||"N/A"})]})]}),e.jsx("div",{className:"pt-4",children:e.jsxs(q,{variant:"outline",onClick:()=>r(`/machines/${s.machine_id}`),children:[e.jsx(mr,{className:"mr-2 h-4 w-4"}),"View Machine Details"]})})]})]})}),e.jsx(Gt,{value:"conversion",className:"space-y-4",children:e.jsx("div",{className:"grid gap-4",children:e.jsxs(se,{children:[e.jsx(ue,{children:e.jsxs(fe,{className:"flex items-center gap-2",children:[e.jsx(bl,{className:"h-5 w-5"}),"Conversion Information"]})}),e.jsxs(ae,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Converted At"}),e.jsx("p",{className:"text-sm",children:jt(s.converted_at)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Converted By"}),e.jsx("p",{className:"text-sm",children:s.converted_by_technician_name||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Work Order ID"}),e.jsx("p",{className:"text-sm",children:s.converted_to_work_order_id||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Work Order Number"}),e.jsx("p",{className:"text-sm",children:s.converted_work_order_formatted_number||"N/A"})]})]}),s.converted_to_work_order_id&&e.jsx("div",{className:"pt-4",children:e.jsxs(q,{variant:"outline",onClick:()=>r(`/work-orders/${s.converted_to_work_order_id}`),children:[e.jsx(mr,{className:"mr-2 h-4 w-4"}),"View Work Order"]})})]})]})})})]})]}),e.jsx(Ft,{open:l,onOpenChange:c,children:e.jsxs(Rt,{className:"sm:max-w-[425px]",children:[e.jsxs(qt,{children:[e.jsx(Lt,{children:"Convert to Work Order"}),e.jsx(Ut,{children:"Please select a technician to assign to this work order or leave unassigned."})]}),e.jsx("div",{className:"grid gap-4 py-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"technician",children:"Technician"}),e.jsxs(tt,{value:u,onValueChange:d,children:[e.jsx(Je,{children:e.jsx(rt,{placeholder:"Select technician (optional)"})}),e.jsxs(et,{children:[e.jsx(Y,{value:"unassigned",children:"No technician assigned"}),h.map(re=>e.jsxs(Y,{value:re.id,children:[re.name," (",re.role,")"]},re.id))]})]})]})}),e.jsxs(Dr,{children:[e.jsx(q,{variant:"outline",onClick:()=>c(!1),children:"Cancel"}),e.jsx(q,{onClick:z,disabled:p,children:p?e.jsxs(e.Fragment,{children:[e.jsx(Nt,{className:"mr-2 h-4 w-4 animate-spin"}),"Converting..."]}):"Convert to Work Order"})]})]})}),e.jsx(Vs,{open:_,onOpenChange:S,onConfirm:ie,title:"Delete Repair Ticket",itemName:s?.formatted_number||s?.ticket_number||`#${s?.id}`,itemType:"repair ticket"}),e.jsx(wo,{open:k,onOpenChange:E,itemName:s?.formatted_number||s?.ticket_number||`#${s?.id}`,itemType:"repair ticket",title:"Cannot Delete Converted Repair Ticket",description:"This repair ticket has been converted to a work order and cannot be deleted. Please contact your administrator if you need to remove this ticket."})]}):e.jsx(gt,{children:e.jsxs(On,{variant:"destructive",children:[e.jsx(vr,{className:"h-4 w-4"}),e.jsx(Bn,{children:"Not Found"}),e.jsx(Pn,{children:"Repair ticket not found."})]})})}function Hee(){const{id:t}=oi(),r=er(),{user:n}=hr(),[s,a]=f.useState(null),[l,c]=f.useState([]),[u,d]=f.useState([]),[h,x]=f.useState([]),[p,y]=f.useState([]),[v,w]=f.useState(!0),[b,N]=f.useState(!1),[_,S]=f.useState(!1),[k,E]=f.useState(null),[A,O]=f.useState(!1),[z,R]=f.useState(!1),[G,J]=f.useState(null),[ie,V]=f.useState(""),[xe,pe]=f.useState(!1),[re,M]=f.useState(!1),[B,L]=f.useState({description:"",status:"pending",priority:"medium",technician_id:"",labor_hours:"",labor_rate:"50",troubleshooting_fee:"",is_warranty:!1,started_at:"",completed_at:""}),[T,F]=f.useState(""),[I,Q]=f.useState({inventory_id:"",quantity:1});f.useEffect(()=>{t&&W()},[t]);const W=async()=>{try{w(!0),E(null);const Z=await de.getWorkOrder(t);if(a(Z.data),Z.data){const ke=Z.data;L({description:ke.description||"",status:ke.status||"pending",priority:ke.priority||"medium",technician_id:ke.owner_technician_id||ke.technician_id||"unassigned",labor_hours:ke.labor_hours?.toString()||"",labor_rate:ke.labor_rate?.toString()||"50",troubleshooting_fee:ke.troubleshooting_fee?.toString()||"",is_warranty:ke.is_warranty||!1,started_at:ke.started_at||"",completed_at:ke.completed_at||""})}await Promise.all([ee(),ye(),he(),te()])}catch(Z){E("Failed to load work order details."),console.error("Error fetching work order details:",Z)}finally{w(!1)}},ee=async()=>{try{const Z=await de.getWorkOrderNotes(t);c(Z.data||Z||[])}catch(Z){console.error("Error fetching notes:",Z)}},ye=async()=>{try{const Z=await de.getWorkOrderInventory(t);d(Z.data||Z||[])}catch(Z){console.error("Error fetching inventory:",Z)}},he=async()=>{try{const Z=await de.getUsers(),ke=Z.data||Z;x(Array.isArray(ke)?ke:[])}catch(Z){console.error("Error fetching users:",Z)}},te=async()=>{try{const Z=await de.getInventory({limit:1e3});y(Z.data||[])}catch(Z){console.error("Error fetching inventory:",Z)}},De=async()=>{if(s){S(!0);try{const Z={};B.description!==s.description&&(Z.description=B.description),B.status!==s.status&&(Z.status=B.status),B.priority!==s.priority&&(Z.priority=B.priority),B.technician_id!==(s.technician_id?.toString()||"")&&(Z.technician_id=B.technician_id&&B.technician_id!=="unassigned"?parseInt(B.technician_id):null),B.labor_hours!==(s.labor_hours?.toString()||"")&&(Z.labor_hours=B.labor_hours?parseFloat(B.labor_hours):null),B.labor_rate!==(s.labor_rate?.toString()||"")&&(Z.labor_rate=B.labor_rate?parseFloat(B.labor_rate):null),B.troubleshooting_fee!==(s.troubleshooting_fee?.toString()||"")&&(Z.troubleshooting_fee=B.troubleshooting_fee?parseFloat(B.troubleshooting_fee):null),B.is_warranty!==s.is_warranty&&(Z.is_warranty=B.is_warranty);const ke=H();Z.total_cost=ke,await de.updateWorkOrder(s.id,Z),Ne.success("Work order updated successfully"),N(!1),await W()}catch(Z){console.error("Error updating work order:",Z),Ne.error(Z.response?.data?.message||"Failed to update work order")}finally{S(!1)}}},ne=()=>{s&&L({description:s.description||"",status:s.status||"pending",priority:s.priority||"medium",technician_id:s.owner_technician_id||s.technician_id||"unassigned",labor_hours:s.labor_hours?.toString()||"",labor_rate:s.labor_rate?.toString()||"50",troubleshooting_fee:s.troubleshooting_fee?.toString()||"",is_warranty:s.is_warranty||!1,started_at:s.started_at||"",completed_at:s.completed_at||""}),N(!1)},$e=async()=>{if(T.trim())try{await de.createWorkOrderNote({work_order_id:parseInt(t),content:T}),Ne.success("Note added successfully"),F(""),O(!1),await ee()}catch(Z){console.error("Error adding note:",Z),Ne.error(Z.response?.data?.message||"Failed to add note")}},ge=async()=>{if(!(!I.inventory_id||!I.quantity))try{if(await de.createWorkOrderInventory({work_order_id:parseInt(t),inventory_id:parseInt(I.inventory_id),quantity:parseInt(I.quantity.toString())}),Ne.success("Part added successfully"),Q({inventory_id:"",quantity:1}),R(!1),await ye(),await W(),s){const Z=H();await de.updateWorkOrder(s.id,{total_cost:Z})}}catch(Z){console.error("Error adding inventory:",Z),Ne.error(Z.response?.data?.message||"Failed to add part")}},we=Z=>{J(Z),V(Z.quantity.toString())},_e=async()=>{if(G)try{if(await de.updateWorkOrderInventory(G.id,{quantity:parseInt(ie)}),Ne.success("Part updated successfully"),J(null),V(""),await ye(),await W(),s){const Z=H();await de.updateWorkOrder(s.id,{total_cost:Z})}}catch(Z){console.error("Error updating inventory:",Z),Ne.error(Z.response?.data?.message||"Failed to update part")}},Ye=async Z=>{try{if(await de.deleteWorkOrderInventory(Z.id),Ne.success("Part deleted successfully"),await ye(),await W(),s){const ke=H();await de.updateWorkOrder(s.id,{total_cost:ke})}}catch(ke){console.error("Error deleting inventory:",ke),Ne.error(ke.response?.data?.message||"Failed to delete part")}},ht=async()=>{if(s)try{await de.deleteWorkOrder(s.id),Ne.success("Work order deleted successfully"),r("/work-orders")}catch(Z){console.error("Error deleting work order:",Z),Ne.error(Z.response?.data?.message||"Failed to delete work order")}},Ve=async()=>{if(s)try{const Z=localStorage.getItem("token"),ke=await fetch(`${rn}/api/print/work-order/${s.id}`,{method:"GET",headers:{Authorization:`Bearer ${Z}`}});if(!ke.ok){const Se=await ke.json();throw new Error(`Failed to generate PDF: ${ke.status} ${ke.statusText}`)}const Ae=await ke.blob(),je=window.URL.createObjectURL(Ae),He=window.open(je,"_blank");He&&(He.onload=()=>{He.print()}),setTimeout(()=>{window.URL.revokeObjectURL(je)},1e3)}catch(Z){console.error("Error generating PDF:",Z),Ne.error("Failed to generate PDF for printing")}},lt=async()=>{if(s)try{const Z=localStorage.getItem("token"),ke=await fetch(`${rn}/api/print/work-order/${s.id}`,{method:"GET",headers:{Authorization:`Bearer ${Z}`}});if(!ke.ok){const Se=await ke.json();throw new Error(`Failed to generate PDF: ${ke.status} ${ke.statusText}`)}const Ae=await ke.blob(),je=window.URL.createObjectURL(Ae),He=document.createElement("a");He.href=je,He.download=`work-order-${s.formatted_number||s.id}-${new Date().toISOString().split("T")[0]}.pdf`,document.body.appendChild(He),He.click(),document.body.removeChild(He),window.URL.revokeObjectURL(je),Ne.success("PDF downloaded successfully")}catch(Z){console.error("Error downloading PDF:",Z),Ne.error("Failed to download PDF")}},yt=Z=>{const Ae={intake:Qt,pending:Zt,in_progress:ks,completed:Ar,cancelled:wn,testing:bl,parts_ordered:Jt,waiting_approval:Rp,waiting_supplier:Dp,service_cancelled:wn}[Z]||Zt;return e.jsxs(Oe,{variant:Vr(Z),className:`flex items-center gap-1 ${Vr(Z)==="outline"?Xs(Z):""}`,children:[e.jsx(Ae,{className:"h-3 w-3"}),Qs(Z)]})},Re=Z=>{switch(Z){case"high":return e.jsx(Oe,{variant:"destructive",children:"High"});case"medium":return e.jsx(Oe,{variant:"outline",className:"border-orange-300 text-orange-700",children:"Medium"});case"low":return e.jsx(Oe,{variant:"outline",className:"border-green-300 text-green-700",children:"Low"});default:return e.jsx(Oe,{variant:"outline",children:"Normal"})}},H=()=>{const Z=(parseFloat(B.labor_hours)||0)*(parseFloat(B.labor_rate)||0),ke=(u||[]).reduce((je,He)=>je+(Number(He.total_price)||0),0),Ae=parseFloat(B.troubleshooting_fee)||0;return Number(Z+ke+Ae)},Be=(Z,ke)=>{const Ae=new Date(Z),He=new Date(ke).getTime()-Ae.getTime(),Se=Math.floor(He/(1e3*60*60*24)),it=Math.floor(He%(1e3*60*60*24)/(1e3*60*60)),Me=Math.floor(He%(1e3*60*60)/(1e3*60));return Se>0?`${Se}d ${it}h ${Me}m`:it>0?`${it}h ${Me}m`:`${Me}m`},st=Z=>{const ke=B.status,Ae=new Date().toISOString();L(je=>{const He={...je,status:Z};return Z==="in_progress"&&ke!=="in_progress"&&(He.started_at=Ae),Z==="completed"&&ke!=="completed"&&(He.completed_at=Ae),ke==="completed"&&Z!=="completed"&&(He.completed_at=""),He})},K=n?.role!=="sales";return v?e.jsx(gt,{children:e.jsxs("div",{className:"flex items-center justify-center h-64",children:[e.jsx(Nt,{className:"h-8 w-8 animate-spin"}),e.jsx("span",{className:"ml-2",children:"Loading work order details..."})]})}):k||!s?e.jsx(gt,{children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs(On,{variant:"destructive",children:[e.jsx(vr,{className:"h-4 w-4"}),e.jsx(Bn,{children:"Error"}),e.jsx(Pn,{children:k||"Work order not found"})]})})}):e.jsx(gt,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(q,{variant:"ghost",size:"sm",onClick:()=>r(-1),children:e.jsx(Cn,{className:"h-4 w-4"})}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-lg bg-primary flex items-center justify-center",children:e.jsx(Ct,{className:"h-6 w-6 text-primary-foreground"})}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold",children:["Work Order ",s.formatted_number||`#${s.id}`]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Created ",jt(s.created_at)]})]})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:b?e.jsxs(e.Fragment,{children:[e.jsxs(q,{variant:"outline",onClick:ne,children:[e.jsx(hn,{className:"mr-2 h-4 w-4"}),"Cancel"]}),e.jsxs(q,{onClick:De,disabled:_,children:[_?e.jsx(Nt,{className:"mr-2 h-4 w-4 animate-spin"}):e.jsx(ul,{className:"mr-2 h-4 w-4"}),"Save"]})]}):e.jsxs(e.Fragment,{children:[n?.role!=="sales"&&e.jsxs(q,{variant:"outline",onClick:()=>N(!0),disabled:!K,children:[e.jsx(xr,{className:"mr-2 h-4 w-4"}),"Edit"]}),e.jsx(q,{variant:"outline",size:"sm",onClick:Ve,children:e.jsx($a,{className:"h-4 w-4"})}),e.jsx(q,{variant:"outline",size:"sm",onClick:lt,children:e.jsx(Qt,{className:"h-4 w-4"})}),n?.role!=="sales"&&e.jsx(q,{variant:"destructive",size:"sm",onClick:()=>{if(s?.status==="completed"){M(!0);return}pe(!0)},children:e.jsx(br,{className:"h-4 w-4"})})]})})]}),e.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs(se,{children:[e.jsx(ue,{children:e.jsxs(fe,{className:"flex items-center gap-2",children:[e.jsx(Ot,{className:"h-5 w-5"}),"Customer Information"]})}),e.jsxs(ae,{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx(U,{className:"text-sm font-medium",children:"Name"}),e.jsx("p",{className:"text-sm font-medium",children:s.customer_name||"N/A"})]}),s.customer_phone&&e.jsxs("div",{children:[e.jsx(U,{className:"text-sm font-medium",children:"Phone"}),e.jsx("p",{className:"text-sm",children:s.customer_phone})]}),s.customer_email&&e.jsxs("div",{children:[e.jsx(U,{className:"text-sm font-medium",children:"Email"}),e.jsx("p",{className:"text-sm",children:s.customer_email})]}),s.customer_company&&e.jsxs("div",{children:[e.jsx(U,{className:"text-sm font-medium",children:"Company"}),e.jsx("p",{className:"text-sm",children:s.customer_company})]}),s.customer_address&&e.jsxs("div",{children:[e.jsx(U,{className:"text-sm font-medium",children:"Address"}),e.jsx("p",{className:"text-sm",children:s.customer_address})]}),s.customer_city&&e.jsxs("div",{children:[e.jsx(U,{className:"text-sm font-medium",children:"City"}),e.jsx("p",{className:"text-sm",children:s.customer_city})]}),s.customer_vat_number&&e.jsxs("div",{children:[e.jsx(U,{className:"text-sm font-medium",children:"VAT Number"}),e.jsx("p",{className:"text-sm",children:s.customer_vat_number})]}),s.customer_owner_name&&e.jsxs("div",{children:[e.jsx(U,{className:"text-sm font-medium",children:"Assigned To"}),e.jsx("p",{className:"text-sm",children:s.customer_owner_name})]}),s.customer_id&&e.jsxs(q,{variant:"outline",size:"sm",className:"w-full",onClick:()=>r(`/customers/${s.customer_id}`),children:[e.jsx(mr,{className:"mr-2 h-4 w-4"}),"View Full Customer Details"]})]})]}),e.jsxs(se,{children:[e.jsx(ue,{children:e.jsxs(fe,{className:"flex items-center gap-2",children:[e.jsx(Ct,{className:"h-5 w-5"}),"Machine Information"]})}),e.jsxs(ae,{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx(U,{className:"text-sm font-medium",children:"Model Name"}),e.jsx("p",{className:"text-sm font-medium",children:s.machine_name||"N/A"})]}),s.serial_number&&e.jsxs("div",{children:[e.jsx(U,{className:"text-sm font-medium",children:"Serial Number"}),e.jsx("p",{className:"text-sm font-mono",children:s.serial_number})]}),s.technician_name&&e.jsxs("div",{children:[e.jsx(U,{className:"text-sm font-medium",children:"Assigned Technician"}),e.jsx("p",{className:"text-sm",children:s.technician_name})]}),s.machine_id&&e.jsxs(q,{variant:"outline",size:"sm",className:"w-full",onClick:()=>r(`/machines/${s.machine_id}`),children:[e.jsx(mr,{className:"mr-2 h-4 w-4"}),"View Full Machine Details"]})]})]}),e.jsxs(se,{children:[e.jsx(ue,{children:e.jsxs(fe,{className:"flex items-center gap-2",children:[e.jsx(ks,{className:"h-5 w-5"}),"Status & Priority"]})}),e.jsxs(ae,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(U,{className:"text-sm font-medium",children:"Status"}),e.jsx("div",{className:"mt-1",children:b?e.jsxs(tt,{value:B.status,onValueChange:Z=>st(Z),children:[e.jsx(Je,{children:e.jsx(rt,{})}),e.jsxs(et,{children:[e.jsx(Y,{value:"intake",children:"Intake"}),e.jsx(Y,{value:"pending",children:"Pending"}),e.jsx(Y,{value:"in_progress",children:"In Progress"}),e.jsx(Y,{value:"completed",children:"Completed"}),e.jsx(Y,{value:"cancelled",children:"Cancelled"}),e.jsx(Y,{value:"testing",children:"Testing"}),e.jsx(Y,{value:"parts_ordered",children:"Parts Ordered"}),e.jsx(Y,{value:"waiting_approval",children:"Waiting Approval"}),e.jsx(Y,{value:"waiting_supplier",children:"Waiting Supplier"}),e.jsx(Y,{value:"service_cancelled",children:"Service Cancelled"})]})]}):yt(s.status)})]}),e.jsxs("div",{children:[e.jsx(U,{className:"text-sm font-medium",children:"Priority"}),e.jsx("div",{className:"mt-1",children:b?e.jsxs(tt,{value:B.priority,onValueChange:Z=>L(ke=>({...ke,priority:Z})),children:[e.jsx(Je,{children:e.jsx(rt,{})}),e.jsxs(et,{children:[e.jsx(Y,{value:"low",children:"Low"}),e.jsx(Y,{value:"medium",children:"Medium"}),e.jsx(Y,{value:"high",children:"High"})]})]}):Re(s.priority)})]})]})]}),e.jsxs(se,{children:[e.jsx(ue,{children:e.jsxs(fe,{className:"flex items-center gap-2",children:[e.jsx(Zt,{className:"h-5 w-5"}),"Time Tracking"]})}),e.jsxs(ae,{className:"space-y-3",children:[(()=>{const Z=b?B.started_at:s.started_at;return Z&&Z.trim()!==""&&e.jsxs("div",{children:[e.jsx(U,{className:"text-sm font-medium",children:"Started At"}),e.jsx("p",{className:"text-sm",children:gn(Z)})]})})(),(()=>{const Z=b?B.completed_at:s.completed_at;return Z&&Z.trim()!==""&&e.jsxs("div",{children:[e.jsx(U,{className:"text-sm font-medium",children:"Completed At"}),e.jsx("p",{className:"text-sm",children:gn(Z)})]})})(),(()=>{const Z=b?B.started_at:s.started_at,ke=b?B.completed_at:s.completed_at;return Z&&Z.trim()!==""&&ke&&ke.trim()!==""&&e.jsxs("div",{children:[e.jsx(U,{className:"text-sm font-medium",children:"Total Duration"}),e.jsx("p",{className:"text-sm",children:Be(Z,ke)})]})})()]})]})]}),e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs(se,{children:[e.jsx(ue,{children:e.jsxs(fe,{className:"flex items-center gap-2",children:[e.jsx(Qt,{className:"h-5 w-5"}),"Work Order Details"]})}),e.jsxs(ae,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(U,{htmlFor:"description",children:"Description"}),b?e.jsx(ar,{id:"description",value:B.description,onChange:Z=>L(ke=>({...ke,description:Z.target.value})),rows:4,className:"mt-1"}):e.jsx("p",{className:"text-sm mt-1",children:s.description||"No description provided"})]}),e.jsxs("div",{children:[e.jsx(U,{htmlFor:"technician",children:"Technician"}),b?e.jsxs(tt,{value:B.technician_id,onValueChange:Z=>L(ke=>({...ke,technician_id:Z})),children:[e.jsx(Je,{className:"mt-1",children:e.jsx(rt,{placeholder:"Select technician"})}),e.jsxs(et,{children:[e.jsx(Y,{value:"unassigned",children:"No technician assigned"}),h.map(Z=>e.jsxs(Y,{value:Z.id,children:[Z.name," (",Z.role,")"]},Z.id))]})]}):e.jsx("p",{className:"text-sm mt-1",children:s.owner_technician_name||s.technician_name||"No technician assigned"})]})]})]}),e.jsxs(se,{children:[e.jsx(ue,{children:e.jsxs(fe,{className:"flex items-center gap-2",children:[e.jsx(Tn,{className:"h-5 w-5"}),"Cost Information"]})}),e.jsxs(ae,{children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx(U,{htmlFor:"labor_hours",children:"Labor Hours"}),b?e.jsx(be,{id:"labor_hours",type:"number",step:"0.1",value:B.labor_hours,onChange:Z=>L(ke=>({...ke,labor_hours:Z.target.value})),className:"mt-1"}):e.jsxs("p",{className:"text-sm mt-1",children:[s.labor_hours||"0"," hours"]})]}),e.jsxs("div",{children:[e.jsx(U,{htmlFor:"labor_rate",children:"Labor Rate (KM/hour)"}),b?e.jsx(be,{id:"labor_rate",type:"number",step:"0.01",value:B.labor_rate,onChange:Z=>L(ke=>({...ke,labor_rate:Z.target.value})),className:"mt-1"}):e.jsxs("p",{className:"text-sm mt-1",children:[s.labor_rate||"0"," KM/hour"]})]}),e.jsxs("div",{children:[e.jsx(U,{htmlFor:"troubleshooting_fee",children:"Troubleshooting Fee (KM)"}),b?e.jsx(be,{id:"troubleshooting_fee",type:"number",step:"0.01",value:B.troubleshooting_fee,onChange:Z=>L(ke=>({...ke,troubleshooting_fee:Z.target.value})),className:"mt-1"}):e.jsxs("p",{className:"text-sm mt-1",children:[s.troubleshooting_fee||"0"," KM"]})]}),e.jsxs("div",{children:[e.jsx(U,{children:"Parts Cost (KM)"}),e.jsxs("p",{className:"text-sm mt-1",children:[Number((u||[]).reduce((Z,ke)=>Z+(Number(ke.total_price)||0),0)).toFixed(2)," KM"]})]})]}),e.jsx("div",{className:"mt-4 pt-4 border-t",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(U,{className:"text-lg font-semibold",children:"Total Cost"}),e.jsxs("span",{className:"text-lg font-bold",children:[(H()||0).toFixed(2)," KM"]})]})})]})]}),e.jsxs(se,{children:[e.jsx(ue,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(fe,{className:"flex items-center gap-2",children:[e.jsx(Ja,{className:"h-5 w-5"}),"Technician Notes"]}),b&&e.jsxs(q,{size:"sm",onClick:()=>O(!0),children:[e.jsx(Vt,{className:"mr-2 h-4 w-4"}),"Add Note"]})]})}),e.jsx(ae,{children:l.length===0?e.jsx("p",{className:"text-sm text-muted-foreground",children:"No notes yet"}):e.jsx("div",{className:"space-y-3",children:l.map(Z=>e.jsxs("div",{className:"p-3 bg-muted rounded-lg",children:[e.jsx("p",{className:"text-sm",children:Z.content}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[gn(Z.created_at),Z.user_name&&` • ${Z.user_name}`]})]},Z.id))})})]}),e.jsxs(se,{children:[e.jsx(ue,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(fe,{className:"flex items-center gap-2",children:[e.jsx(Jt,{className:"h-5 w-5"}),"Parts Used"]}),b&&e.jsxs(q,{size:"sm",onClick:()=>R(!0),children:[e.jsx(Vt,{className:"mr-2 h-4 w-4"}),"Add Part"]})]})}),e.jsx(ae,{children:u.length===0?e.jsx("p",{className:"text-sm text-muted-foreground",children:"No parts used yet"}):e.jsxs(ir,{children:[e.jsx(lr,{children:e.jsxs(ft,{children:[e.jsx(me,{children:"Item"}),e.jsx(me,{className:"text-right",children:"Quantity"}),e.jsx(me,{className:"text-right",children:"Unit Price"}),e.jsx(me,{className:"text-right",children:"Total"}),b&&e.jsx(me,{className:"text-right",children:"Actions"})]})}),e.jsx(or,{children:u.map(Z=>e.jsxs(ft,{children:[e.jsx(oe,{children:Z.inventory_name}),e.jsx(oe,{className:"text-right",children:G?.id===Z.id?e.jsx(be,{type:"number",value:ie,onChange:ke=>V(ke.target.value),className:"w-20 text-right",min:"1"}):Z.quantity}),e.jsxs(oe,{className:"text-right",children:[Number(Z.unit_price||0).toFixed(2)," KM"]}),e.jsxs(oe,{className:"text-right",children:[Number(Z.total_price||0).toFixed(2)," KM"]}),b&&e.jsx(oe,{className:"text-right",children:G?.id===Z.id?e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsx(q,{size:"sm",variant:"outline",onClick:_e,disabled:!ie||parseInt(ie)<=0,children:e.jsx(ul,{className:"h-4 w-4"})}),e.jsx(q,{size:"sm",variant:"outline",onClick:()=>{J(null),V("")},children:e.jsx(hn,{className:"h-4 w-4"})})]}):e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsx(q,{size:"sm",variant:"outline",onClick:()=>we(Z),children:e.jsx(xr,{className:"h-4 w-4"})}),e.jsx(q,{size:"sm",variant:"outline",onClick:()=>Ye(Z),children:e.jsx(br,{className:"h-4 w-4"})})]})})]},Z.id))})]})})]})]})]}),e.jsx(Ft,{open:A,onOpenChange:O,children:e.jsxs(Rt,{children:[e.jsxs(qt,{children:[e.jsx(Lt,{children:"Add Note"}),e.jsx(Ut,{children:"Add a note to this work order for other technicians to see."})]}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsx(U,{htmlFor:"note-content",children:"Note Content"}),e.jsx(ar,{id:"note-content",value:T,onChange:Z=>F(Z.target.value),rows:4,className:"mt-1",placeholder:"Enter your note here..."})]})}),e.jsxs(Dr,{children:[e.jsx(q,{variant:"outline",onClick:()=>O(!1),children:"Cancel"}),e.jsx(q,{onClick:$e,disabled:!T.trim(),children:"Add Note"})]})]})}),e.jsx(Ft,{open:z,onOpenChange:R,children:e.jsxs(Rt,{children:[e.jsxs(qt,{children:[e.jsx(Lt,{children:"Add Part"}),e.jsx(Ut,{children:"Add a part to this work order."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(U,{htmlFor:"inventory-item",children:"Part"}),e.jsxs(tt,{value:I.inventory_id,onValueChange:Z=>Q(ke=>({...ke,inventory_id:Z})),children:[e.jsx(Je,{className:"mt-1",children:e.jsx(rt,{placeholder:"Select a part"})}),e.jsx(et,{children:p.map(Z=>e.jsxs(Y,{value:Z.id,children:[Z.name," - ",Z.price," KM"]},Z.id))})]})]}),e.jsxs("div",{children:[e.jsx(U,{htmlFor:"quantity",children:"Quantity"}),e.jsx(be,{id:"quantity",type:"number",min:"1",value:I.quantity,onChange:Z=>Q(ke=>({...ke,quantity:parseInt(Z.target.value)||1})),className:"mt-1"})]})]}),e.jsxs(Dr,{children:[e.jsx(q,{variant:"outline",onClick:()=>R(!1),children:"Cancel"}),e.jsx(q,{onClick:ge,disabled:!I.inventory_id||!I.quantity,children:"Add Part"})]})]})}),e.jsx(Vs,{open:xe,onOpenChange:pe,onConfirm:ht,title:"Delete Work Order",itemName:s?.formatted_number||`#${s?.id}`,itemType:"work order"}),e.jsx(wo,{open:re,onOpenChange:M,itemName:s?.formatted_number||`#${s?.id}`,itemType:"work order",title:"Cannot Delete Completed Work Order"})]})})}function Vee(){const{id:t}=oi(),r=er(),{user:n}=hr(),[s,a]=f.useState(null),[l,c]=f.useState(!0),[u,d]=f.useState(null),[h,x]=f.useState(!1),[p,y]=f.useState(""),[v,w]=f.useState([]),[b,N]=f.useState(!1),[_,S]=f.useState(!1),[k,E]=f.useState(!1);f.useEffect(()=>{t&&(A(),O())},[t]);const A=async()=>{try{c(!0),d(null);const M=await de.getWarrantyRepairTicket(t);a(M.data)}catch(M){d("Failed to load warranty repair ticket details."),console.error("Error fetching warranty repair ticket details:",M)}finally{c(!1)}},O=async()=>{try{const M=await de.getUsers();w(M.data||[])}catch(M){console.error("Error fetching users:",M)}},z=async()=>{if(n?.role==="technician"){if(!s)return;try{N(!0);const M=await de.convertWarrantyRepairTicketToWorkOrder(s.id,{technician_id:n.id,priority:s.priority||"medium"});Ne.success("Warranty repair ticket converted and assigned to you");const B=M.data?.warranty_work_order?.id;B?r(`/warranty-work-orders/${B}`):A()}catch(M){console.error("Error converting ticket:",M),Ne.error(M.response?.data?.message||"Failed to convert warranty repair ticket")}finally{N(!1)}}else x(!0)},R=async()=>{if(!(!s||!p))try{N(!0);const M=await de.convertWarrantyRepairTicketToWorkOrder(s.id,{technician_id:p,priority:s.priority||"medium"});Ne.success("Warranty repair ticket converted to work order successfully"),x(!1),y("");const B=M.data?.warranty_work_order?.id;B?r(`/warranty-work-orders/${B}`):A()}catch(M){console.error("Error converting ticket:",M),Ne.error(M.response?.data?.message||"Failed to convert warranty repair ticket")}finally{N(!1)}},G=()=>{s?.status==="converted"||s?.status==="converted - warranty"?E(!0):S(!0)},J=async()=>{try{const M=await fetch(`${rn}/api/print/warranty-ticket/${s.id}`,{method:"GET",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!M.ok)throw new Error("Failed to generate PDF");const B=await M.blob(),L=window.URL.createObjectURL(B);window.open(L,"_blank"),window.URL.revokeObjectURL(L)}catch(M){console.error("Error generating PDF:",M),Ne.error("Failed to generate PDF")}},ie=async()=>{try{const M=await fetch(`${rn}/api/print/warranty-ticket/${s.id}`,{method:"GET",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!M.ok)throw new Error("Failed to generate PDF");const B=await M.blob(),L=window.URL.createObjectURL(B),T=document.createElement("a");T.href=L,T.download=`warranty-ticket-${s.formatted_number}.pdf`,document.body.appendChild(T),T.click(),document.body.removeChild(T),window.URL.revokeObjectURL(L)}catch(M){console.error("Error downloading PDF:",M),Ne.error("Failed to download PDF")}},V=async()=>{if(s)try{await de.deleteWarrantyRepairTicket(s.id),Ne.success("Warranty repair ticket deleted successfully"),S(!1),r("/warranty-repair-tickets")}catch(M){console.error("Error deleting ticket:",M),Ne.error(M.response?.data?.message||"Failed to delete warranty repair ticket")}},xe=M=>{const L={intake:Zt,converted:Ar,"converted - warranty":Ar,cancelled:fs}[M]||Zt;return e.jsxs(Oe,{variant:Vr(M),className:`flex items-center gap-1 ${Vr(M)==="outline"?Xs(M):""}`,children:[e.jsx(L,{className:"h-3 w-3"}),Qs(M)]})},pe=M=>{if(!M)return e.jsx(Oe,{variant:"outline",className:"bg-yellow-50 text-yellow-700 border-yellow-200",children:"Medium"});const B={low:{color:"bg-green-50 text-green-700 border-green-200",label:"Low"},medium:{color:"bg-yellow-50 text-yellow-700 border-yellow-200",label:"Medium"},high:{color:"bg-red-50 text-red-700 border-red-200",label:"High"}},L=B[M]||B.medium;return e.jsx(Oe,{variant:"outline",className:L.color,children:L.label})},re=M=>{if(!M||M==="unknown")return null;const L={cold:{color:"outline",label:"Cold Lead"},warm:{color:"default",label:"Warm Lead"},hot:{color:"destructive",label:"Hot Lead"}}[M];return L?e.jsx(Oe,{variant:L.color,children:L.label}):null};return l?e.jsx(gt,{children:e.jsxs("div",{className:"flex items-center justify-center h-64",children:[e.jsx(Nt,{className:"h-8 w-8 animate-spin"}),e.jsx("span",{className:"ml-2",children:"Loading warranty repair ticket details..."})]})}):u?e.jsx(gt,{children:e.jsxs(On,{variant:"destructive",children:[e.jsx(vr,{className:"h-4 w-4"}),e.jsx(Bn,{children:"Error"}),e.jsx(Pn,{children:u})]})}):s?e.jsx(gt,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(q,{variant:"ghost",onClick:()=>r(-1),className:"mr-2",children:e.jsx(Cn,{className:"h-4 w-4"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:s.formatted_number||`Warranty Ticket #${s.id}`}),e.jsxs("div",{className:"text-muted-foreground flex items-center gap-2",children:[e.jsx("span",{children:s.customer_name}),e.jsx("span",{children:"•"}),xe(s.status),re(s.lead_quality),e.jsxs(Oe,{variant:"outline",className:"flex items-center gap-1",children:[e.jsx(Hs,{className:"h-3 w-3"}),"Warranty"]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[n?.role!=="sales"&&e.jsxs(q,{variant:"outline",onClick:()=>r(`/warranty-repair-tickets/${t}`),children:[e.jsx(xr,{className:"mr-2 h-4 w-4"}),"Edit"]}),e.jsx(q,{variant:"outline",size:"sm",onClick:J,children:e.jsx($a,{className:"h-4 w-4"})}),e.jsx(q,{variant:"outline",size:"sm",onClick:ie,children:e.jsx(Qt,{className:"h-4 w-4"})}),n?.role!=="sales"&&e.jsxs(q,{onClick:z,disabled:s.status==="converted"||s.status==="cancelled",children:[e.jsx(Ct,{className:"mr-2 h-4 w-4"}),"Convert to Work Order"]}),n?.role!=="sales"&&e.jsx(q,{variant:"destructive",size:"sm",onClick:G,children:e.jsx(br,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[e.jsxs(se,{children:[e.jsxs(ue,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(fe,{className:"text-sm font-medium",children:"Status"}),e.jsx(Qt,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(ae,{children:[e.jsx("div",{className:"text-2xl font-bold",children:xe(s.status)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Current status"})]})]}),e.jsxs(se,{children:[e.jsxs(ue,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(fe,{className:"text-sm font-medium",children:"Priority"}),e.jsx(fs,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(ae,{children:[e.jsx("div",{className:"text-2xl font-bold",children:pe(s.priority)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Ticket priority"})]})]}),e.jsxs(se,{children:[e.jsxs(ue,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(fe,{className:"text-sm font-medium",children:"Created"}),e.jsx(is,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(ae,{children:[e.jsx("div",{className:"text-2xl font-bold",children:jt(s.created_at)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Date submitted"})]})]}),e.jsxs(se,{children:[e.jsxs(ue,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(fe,{className:"text-sm font-medium",children:"Submitted By"}),e.jsx(Ot,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(ae,{children:[e.jsx("div",{className:"text-2xl font-bold",children:s.submitted_by_name||"Unknown"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Staff member"})]})]})]}),e.jsxs(Ys,{defaultValue:"details",className:"space-y-4",children:[e.jsxs(Ps,{children:[e.jsx(Kt,{value:"details",children:"Ticket Details"}),e.jsx(Kt,{value:"customer",children:"Customer Info"}),e.jsx(Kt,{value:"machine",children:"Machine Info"}),e.jsx(Kt,{value:"conversion",children:"Conversion"})]}),e.jsx(Gt,{value:"details",className:"space-y-4",children:e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs(se,{children:[e.jsx(ue,{children:e.jsxs(fe,{className:"flex items-center gap-2",children:[e.jsx(fs,{className:"h-5 w-5"}),"Problem Information"]})}),e.jsxs(ae,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Problem Description"}),e.jsx("p",{className:"text-sm mt-1",children:s.problem_description})]}),s.notes&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Notes"}),e.jsx("p",{className:"text-sm mt-1",children:s.notes})]}),s.additional_equipment&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Additional Equipment"}),e.jsx("p",{className:"text-sm mt-1",children:s.additional_equipment})]}),s.brought_by&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Brought By"}),e.jsx("p",{className:"text-sm mt-1",children:s.brought_by})]})]})]}),e.jsxs(se,{children:[e.jsx(ue,{children:e.jsxs(fe,{className:"flex items-center gap-2",children:[e.jsx(Qt,{className:"h-5 w-5"}),"Ticket Information"]})}),e.jsx(ae,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Ticket Number"}),e.jsx("p",{className:"text-sm font-bold",children:s.formatted_number||s.ticket_number||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Year Created"}),e.jsx("p",{className:"text-sm",children:s.year_created||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Status"}),e.jsx("div",{className:"text-sm",children:xe(s.status)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Priority"}),e.jsx("div",{className:"text-sm",children:pe(s.priority)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Created"}),e.jsx("p",{className:"text-sm",children:jt(s.created_at)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Last Updated"}),e.jsx("p",{className:"text-sm",children:jt(s.updated_at)})]})]})})]})]})}),e.jsx(Gt,{value:"customer",className:"space-y-4",children:e.jsxs(se,{children:[e.jsx(ue,{children:e.jsxs(fe,{className:"flex items-center gap-2",children:[s.customer_type==="company"?e.jsx(Cs,{className:"h-5 w-5"}):e.jsx(cl,{className:"h-5 w-5"}),"Customer Information",s.customer_type&&e.jsx(Oe,{variant:s.customer_type==="company"?"default":"secondary",className:"text-xs",children:s.customer_type==="company"?"Company":"Private"})]})}),e.jsxs(ae,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.customer_type==="company"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Company Name"}),e.jsx("p",{className:"text-sm font-bold",children:s.company_name||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Contact Person"}),e.jsx("p",{className:"text-sm",children:s.contact_person||"N/A"})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Full Name"}),e.jsx("p",{className:"text-sm font-bold",children:s.customer_name})]}),s.company_name&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Company"}),e.jsx("p",{className:"text-sm",children:s.company_name})]})]}),s.customer_type==="company"&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"VAT Number"}),e.jsx("p",{className:"text-sm",children:s.vat_number||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Email"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ci,{className:"h-3 w-3"}),e.jsx("p",{className:"text-sm",children:s.email||"N/A"})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Phone"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Mi,{className:"h-3 w-3"}),e.jsx("p",{className:"text-sm",children:s.phone1||"N/A"})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Phone 2"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Mi,{className:"h-3 w-3"}),e.jsx("p",{className:"text-sm",children:s.phone2||"N/A"})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Address"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(dl,{className:"h-3 w-3"}),e.jsx("p",{className:"text-sm",children:s.street_address&&s.city&&s.postal_code?`${s.street_address}, ${s.postal_code} ${s.city}`:"N/A"})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Fax"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx($a,{className:"h-3 w-3"}),e.jsx("p",{className:"text-sm",children:s.fax||"N/A"})]})]})]}),e.jsx("div",{className:"pt-4",children:e.jsxs(q,{variant:"outline",onClick:()=>r(`/customers/${s.customer_id}`),children:[e.jsx(mr,{className:"mr-2 h-4 w-4"}),"View Customer Details"]})})]})]})}),e.jsx(Gt,{value:"machine",className:"space-y-4",children:e.jsxs(se,{children:[e.jsx(ue,{children:e.jsxs(fe,{className:"flex items-center gap-2",children:[e.jsx(Ct,{className:"h-5 w-5"}),"Machine Information"]})}),e.jsxs(ae,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Manufacturer"}),e.jsx("p",{className:"text-sm font-bold",children:s.manufacturer||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Model"}),e.jsx("p",{className:"text-sm font-bold",children:s.model_name||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Serial Number"}),e.jsx("p",{className:"text-sm",children:s.serial_number||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Catalogue Number"}),e.jsx("p",{className:"text-sm",children:s.catalogue_number||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Category"}),e.jsx("p",{className:"text-sm",children:s.category_name||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Purchase Date"}),e.jsx("p",{className:"text-sm",children:jt(s.purchase_date)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Warranty Expiry"}),e.jsx("p",{className:"text-sm",children:jt(s.warranty_expiry_date)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Receipt Number"}),e.jsx("p",{className:"text-sm",children:s.receipt_number||"N/A"})]})]}),e.jsx("div",{className:"pt-4",children:e.jsxs(q,{variant:"outline",onClick:()=>r(`/machines/${s.machine_id}`),children:[e.jsx(mr,{className:"mr-2 h-4 w-4"}),"View Machine Details"]})})]})]})}),e.jsx(Gt,{value:"conversion",className:"space-y-4",children:e.jsx("div",{className:"grid gap-4",children:e.jsxs(se,{children:[e.jsx(ue,{children:e.jsxs(fe,{className:"flex items-center gap-2",children:[e.jsx(bl,{className:"h-5 w-5"}),"Conversion Information"]})}),e.jsxs(ae,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Converted At"}),e.jsx("p",{className:"text-sm",children:jt(s.converted_at)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Converted By"}),e.jsx("p",{className:"text-sm",children:s.converted_by_technician_name||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Warranty Work Order ID"}),e.jsx("p",{className:"text-sm",children:s.converted_to_warranty_work_order_id||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Work Order Number"}),e.jsx("p",{className:"text-sm",children:s.converted_work_order_formatted_number||"N/A"})]})]}),s.converted_to_warranty_work_order_id&&e.jsx("div",{className:"pt-4",children:e.jsxs(q,{variant:"outline",onClick:()=>r(`/warranty-work-orders/${s.converted_to_warranty_work_order_id}`),children:[e.jsx(mr,{className:"mr-2 h-4 w-4"}),"View Warranty Work Order"]})})]})]})})})]}),e.jsx(Ft,{open:h,onOpenChange:x,children:e.jsxs(Rt,{children:[e.jsxs(qt,{children:[e.jsx(Lt,{children:"Convert to Warranty Work Order"}),e.jsxs(Ut,{children:["Convert warranty repair ticket ",s?.formatted_number," to a warranty work order."]})]}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsx(U,{htmlFor:"technician",children:"Assign Technician"}),e.jsxs(tt,{value:p,onValueChange:y,children:[e.jsx(Je,{children:e.jsx(rt,{placeholder:"Select a technician"})}),e.jsx(et,{children:v.map(M=>e.jsx(Y,{value:M.id,children:M.name},M.id))})]})]})}),e.jsxs(Dr,{children:[e.jsx(q,{variant:"outline",onClick:()=>x(!1),children:"Cancel"}),e.jsx(q,{onClick:R,disabled:!p||b,children:b?e.jsxs(e.Fragment,{children:[e.jsx(Nt,{className:"mr-2 h-4 w-4 animate-spin"}),"Converting..."]}):"Convert to Work Order"})]})]})}),e.jsx(Vs,{open:_,onOpenChange:S,onConfirm:V,title:"Delete Warranty Repair Ticket",description:`Are you sure you want to delete warranty repair ticket ${s?.formatted_number}? This action cannot be undone.`}),e.jsx(wo,{open:k,onOpenChange:E,title:"Cannot Delete Converted Ticket",description:`Warranty repair ticket ${s?.formatted_number} has been converted to a work order and cannot be deleted.`})]})}):e.jsx(gt,{children:e.jsxs(On,{variant:"destructive",children:[e.jsx(vr,{className:"h-4 w-4"}),e.jsx(Bn,{children:"Not Found"}),e.jsx(Pn,{children:"Warranty repair ticket not found."})]})})}function Yee(){const{id:t}=oi(),r=er(),{user:n}=hr(),[s,a]=f.useState(null),[l,c]=f.useState(!0),[u,d]=f.useState(null),[h,x]=f.useState(!1),[p,y]=f.useState(!1),[v,w]=f.useState({status:"",priority:"",technician_id:"",description:"",started_at:"",completed_at:"",labor_hours:"",labor_rate:"",troubleshooting_fee:""}),[b,N]=f.useState(!1),[_,S]=f.useState(!1),[k,E]=f.useState([]),[A,O]=f.useState(""),[z,R]=f.useState(!1),[G,J]=f.useState(!1),[ie,V]=f.useState([]),[xe,pe]=f.useState(!1),[re,M]=f.useState(!1),[B,L]=f.useState({inventory_id:"",quantity:1}),[T,F]=f.useState([]),[I,Q]=f.useState(!1),[W,ee]=f.useState(null),[ye,he]=f.useState(""),[te,De]=f.useState([]),[ne,$e]=f.useState(!1);f.useEffect(()=>{t&&(ge(),we(),_e(),Ye(),Re())},[t]);const ge=async()=>{try{c(!0),d(null);const Pe=await de.getWarrantyWorkOrder(t);a(Pe.data),Pe.data&&w({status:Pe.data.status||"",priority:Pe.data.priority||"",technician_id:(Pe.data.owner_technician_id||Pe.data.technician_id)?.toString()||"unassigned",description:Pe.data.description||"",started_at:Pe.data.started_at||"",completed_at:Pe.data.completed_at||"",labor_hours:Pe.data.labor_hours?.toString()||"",labor_rate:Pe.data.labor_rate?.toString()||"",troubleshooting_fee:Pe.data.troubleshooting_fee?.toString()||""})}catch(Pe){d("Failed to load warranty work order details."),console.error("Error fetching warranty work order details:",Pe)}finally{c(!1)}},we=async()=>{try{const Pe=await de.getWarrantyWorkOrderNotes(t);E(Pe.data||[])}catch(Pe){console.error("Error fetching notes:",Pe)}},_e=async()=>{try{pe(!0);const Pe=await de.getWarrantyWorkOrderInventory(t);V(Pe.data||[])}catch(Pe){console.error("Error fetching inventory:",Pe)}finally{pe(!1)}},Ye=async()=>{try{Q(!0);const Pe=await de.getInventory({limit:1e3});F(Pe.data||[])}catch(Pe){console.error("Error fetching inventory items:",Pe)}finally{Q(!1)}},ht=async Pe=>{try{if(await de.deleteWarrantyWorkOrderInventory(t,Pe.id),Ne.success("Part deleted successfully"),await _e(),await ge(),s){const Ee=He();await de.updateWarrantyWorkOrder(s.id,{total_cost:Ee})}}catch(Ee){console.error("Error deleting inventory:",Ee),Ne.error(Ee.response?.data?.message||"Failed to delete part")}},Ve=async()=>{if(!(!B.inventory_id||!B.quantity))try{if(await de.createWarrantyWorkOrderInventory(t,{inventory_id:parseInt(B.inventory_id),quantity:parseInt(B.quantity.toString())}),Ne.success("Part added successfully"),L({inventory_id:"",quantity:1}),M(!1),await _e(),await ge(),s){const Pe=He();await de.updateWarrantyWorkOrder(s.id,{total_cost:Pe})}}catch(Pe){console.error("Error adding inventory:",Pe),Ne.error(Pe.response?.data?.message||"Failed to add part")}},lt=Pe=>{ee(Pe),he(Pe.quantity.toString())},yt=async()=>{if(W)try{if(await de.deleteWarrantyWorkOrderInventory(t,W.id),await de.createWarrantyWorkOrderInventory(t,{inventory_id:parseInt(W.inventory_id),quantity:parseInt(ye)}),Ne.success("Part updated successfully"),ee(null),he(""),await _e(),await ge(),s){const Pe=He();await de.updateWarrantyWorkOrder(s.id,{total_cost:Pe})}}catch(Pe){console.error("Error updating inventory:",Pe),Ne.error(Pe.response?.data?.message||"Failed to update part")}},Re=async()=>{try{$e(!0);const Pe=await de.getUsers({limit:100});De(Pe.data||[])}catch(Pe){console.error("Error fetching technicians:",Pe)}finally{$e(!1)}},H=()=>{x(!1),s&&w({status:s.status||"",priority:s.priority||"",technician_id:(s.owner_technician_id||s.technician_id)?.toString()||"unassigned",description:s.description||"",started_at:s.started_at||"",completed_at:s.completed_at||"",labor_hours:s.labor_hours?.toString()||"",labor_rate:s.labor_rate?.toString()||"",troubleshooting_fee:s.troubleshooting_fee?.toString()||""})},Be=async()=>{if(s)try{y(!0);const Pe={};v.status!==s.status&&(Pe.status=v.status),v.priority!==s.priority&&(Pe.priority=v.priority),v.technician_id!==((s.owner_technician_id||s.technician_id)?.toString()||"unassigned")&&(Pe.technician_id=v.technician_id&&v.technician_id!=="unassigned"?parseInt(v.technician_id):null),v.description!==s.description&&(Pe.description=v.description),v.labor_hours!==(s.labor_hours?.toString()||"")&&(Pe.labor_hours=v.labor_hours?parseFloat(v.labor_hours):null),v.labor_rate!==(s.labor_rate?.toString()||"")&&(Pe.labor_rate=v.labor_rate?parseFloat(v.labor_rate):null),v.troubleshooting_fee!==(s.troubleshooting_fee?.toString()||"")&&(Pe.troubleshooting_fee=v.troubleshooting_fee?parseFloat(v.troubleshooting_fee):null);const Ee=He();Pe.total_cost=Ee,await de.updateWarrantyWorkOrder(s.id,Pe),Ne.success("Warranty work order updated successfully"),await ge(),x(!1)}catch(Pe){console.error("Error updating warranty work order:",Pe),Ne.error(Pe.response?.data?.message||"Failed to update warranty work order")}finally{y(!1)}},st=Pe=>{const Ee=v.status,xt=new Date().toISOString();w(wt=>{const Le={...wt,status:Pe};return Pe==="in_progress"&&Ee!=="in_progress"&&(Le.started_at=xt),Pe==="completed"&&Ee!=="completed"&&(Le.completed_at=xt),Ee==="completed"&&Pe!=="completed"&&(Le.completed_at=""),Le})},K=()=>{s?.status==="completed"?S(!0):N(!0)},Z=async()=>{if(s)try{await de.deleteWarrantyWorkOrder(s.id),Ne.success("Warranty work order deleted successfully"),r("/warranty-work-orders")}catch(Pe){console.error("Error deleting warranty work order:",Pe),Ne.error(Pe.response?.data?.message||"Failed to delete warranty work order")}},ke=async()=>{if(s)try{const Pe=localStorage.getItem("token"),Ee=await fetch(`${rn}/api/print/warranty-work-order/${s.id}`,{method:"GET",headers:{Authorization:`Bearer ${Pe}`}});if(!Ee.ok){const ot=await Ee.json();throw new Error(`Failed to generate PDF: ${Ee.status} ${Ee.statusText}`)}const xt=await Ee.blob(),wt=window.URL.createObjectURL(xt),Le=window.open(wt,"_blank");Le&&(Le.onload=()=>{Le.print()}),setTimeout(()=>{window.URL.revokeObjectURL(wt)},1e3)}catch(Pe){console.error("Error generating PDF:",Pe),Ne.error("Failed to generate PDF for printing")}},Ae=async()=>{if(s)try{const Pe=localStorage.getItem("token"),Ee=await fetch(`${rn}/api/print/warranty-work-order/${s.id}`,{method:"GET",headers:{Authorization:`Bearer ${Pe}`}});if(!Ee.ok){const ot=await Ee.json();throw new Error(`Failed to generate PDF: ${Ee.status} ${Ee.statusText}`)}const xt=await Ee.blob(),wt=window.URL.createObjectURL(xt),Le=document.createElement("a");Le.href=wt,Le.download=`warranty-work-order-${s.formatted_number||s.id}-${new Date().toISOString().split("T")[0]}.pdf`,document.body.appendChild(Le),Le.click(),document.body.removeChild(Le),window.URL.revokeObjectURL(wt),Ne.success("PDF downloaded successfully")}catch(Pe){console.error("Error downloading PDF:",Pe),Ne.error("Failed to download PDF")}},je=async()=>{if(A.trim())try{R(!0),await de.createWarrantyWorkOrderNote(s.id,{note:A}),O(""),J(!1),await we(),Ne.success("Note added successfully")}catch(Pe){console.error("Error adding note:",Pe),Ne.error("Failed to add note")}finally{R(!1)}},He=()=>{const Pe=(parseFloat(v.labor_hours)||0)*(parseFloat(v.labor_rate)||0),Ee=(ie||[]).reduce((wt,Le)=>wt+(Number(Le.total_price)||0),0),xt=parseFloat(v.troubleshooting_fee)||0;return Number(Pe+Ee+xt)},Se=(Pe,Ee)=>{const xt=new Date(Pe),Le=new Date(Ee).getTime()-xt.getTime(),ot=Math.floor(Le/(1e3*60*60*24)),It=Math.floor(Le%(1e3*60*60*24)/(1e3*60*60)),Er=Math.floor(Le%(1e3*60*60)/(1e3*60));return ot>0?`${ot}d ${It}h ${Er}m`:It>0?`${It}h ${Er}m`:`${Er}m`},it=Pe=>{const xt={intake:Zt,quoted:Qt,pending:Zt,in_progress:ks,completed:Ar,cancelled:wn,testing:bl,parts_ordered:Jt,waiting_approval:Rp,waiting_supplier:Dp,service_cancelled:wn,warranty_declined:wn}[Pe]||Zt;return e.jsxs(Oe,{variant:Vr(Pe),className:`flex items-center gap-1 ${Vr(Pe)==="outline"?Xs(Pe):""}`,children:[e.jsx(xt,{className:"h-3 w-3"}),Qs(Pe)]})},Me=Pe=>{switch(Pe){case"high":return e.jsx(Oe,{variant:"destructive",children:"High"});case"medium":return e.jsx(Oe,{variant:"default",children:"Medium"});case"low":return e.jsx(Oe,{variant:"secondary",children:"Low"});default:return e.jsx(Oe,{variant:"outline",children:"Normal"})}},Tt=n?.role!=="sales";return l?e.jsx(gt,{children:e.jsxs("div",{className:"flex items-center justify-center h-64",children:[e.jsx(Nt,{className:"h-8 w-8 animate-spin"}),e.jsx("span",{className:"ml-2",children:"Loading warranty work order details..."})]})}):u||!s?e.jsx(gt,{children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs(On,{variant:"destructive",children:[e.jsx(vr,{className:"h-4 w-4"}),e.jsx(Bn,{children:"Error"}),e.jsx(Pn,{children:u||"Warranty work order not found"})]})})}):e.jsx(gt,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(q,{variant:"ghost",size:"sm",onClick:()=>r(-1),children:e.jsx(Cn,{className:"h-4 w-4"})}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-lg bg-primary flex items-center justify-center",children:e.jsx(Ct,{className:"h-6 w-6 text-primary-foreground"})}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold",children:["Warranty Work Order ",s.formatted_number||`#${s.id}`]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Created ",jt(s.created_at)]})]})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:h?e.jsxs(e.Fragment,{children:[e.jsxs(q,{variant:"outline",onClick:H,children:[e.jsx(hn,{className:"mr-2 h-4 w-4"}),"Cancel"]}),e.jsxs(q,{onClick:Be,disabled:p,children:[p?e.jsx(Nt,{className:"mr-2 h-4 w-4 animate-spin"}):e.jsx(ul,{className:"mr-2 h-4 w-4"}),"Save"]})]}):e.jsxs(e.Fragment,{children:[n?.role!=="sales"&&e.jsxs(q,{variant:"outline",onClick:()=>x(!0),disabled:!Tt,children:[e.jsx(xr,{className:"mr-2 h-4 w-4"}),"Edit"]}),e.jsx(q,{variant:"outline",size:"sm",onClick:ke,children:e.jsx($a,{className:"h-4 w-4"})}),e.jsx(q,{variant:"outline",size:"sm",onClick:Ae,children:e.jsx(Qt,{className:"h-4 w-4"})}),n?.role!=="sales"&&e.jsx(q,{variant:"destructive",size:"sm",onClick:K,children:e.jsx(br,{className:"h-4 w-4"})})]})})]}),e.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs(se,{children:[e.jsx(ue,{children:e.jsxs(fe,{className:"flex items-center gap-2",children:[e.jsx(Ot,{className:"h-5 w-5"}),"Customer Information"]})}),e.jsxs(ae,{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx(U,{className:"text-sm font-medium",children:"Name"}),e.jsx("p",{className:"text-sm font-medium",children:s.customer_name||"N/A"})]}),s.customer_phone&&e.jsxs("div",{children:[e.jsx(U,{className:"text-sm font-medium",children:"Phone"}),e.jsx("p",{className:"text-sm",children:s.customer_phone})]}),s.customer_email&&e.jsxs("div",{children:[e.jsx(U,{className:"text-sm font-medium",children:"Email"}),e.jsx("p",{className:"text-sm",children:s.customer_email})]}),s.customer_company&&e.jsxs("div",{children:[e.jsx(U,{className:"text-sm font-medium",children:"Company"}),e.jsx("p",{className:"text-sm",children:s.customer_company})]}),s.customer_address&&e.jsxs("div",{children:[e.jsx(U,{className:"text-sm font-medium",children:"Address"}),e.jsx("p",{className:"text-sm",children:s.customer_address})]}),s.customer_city&&e.jsxs("div",{children:[e.jsx(U,{className:"text-sm font-medium",children:"City"}),e.jsx("p",{className:"text-sm",children:s.customer_city})]}),s.customer_vat_number&&e.jsxs("div",{children:[e.jsx(U,{className:"text-sm font-medium",children:"VAT Number"}),e.jsx("p",{className:"text-sm",children:s.customer_vat_number})]}),s.customer_owner_name&&e.jsxs("div",{children:[e.jsx(U,{className:"text-sm font-medium",children:"Assigned To"}),e.jsx("p",{className:"text-sm",children:s.customer_owner_name})]}),s.customer_id&&e.jsxs(q,{variant:"outline",size:"sm",className:"w-full",onClick:()=>r(`/customers/${s.customer_id}`),children:[e.jsx(mr,{className:"mr-2 h-4 w-4"}),"View Full Customer Details"]})]})]}),e.jsxs(se,{children:[e.jsx(ue,{children:e.jsxs(fe,{className:"flex items-center gap-2",children:[e.jsx(Ct,{className:"h-5 w-5"}),"Machine Information"]})}),e.jsxs(ae,{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx(U,{className:"text-sm font-medium",children:"Model Name"}),e.jsx("p",{className:"text-sm font-medium",children:s.machine_name||"N/A"})]}),s.serial_number&&e.jsxs("div",{children:[e.jsx(U,{className:"text-sm font-medium",children:"Serial Number"}),e.jsx("p",{className:"text-sm font-mono",children:s.serial_number})]}),(s.owner_technician_name||s.technician_name)&&e.jsxs("div",{children:[e.jsx(U,{className:"text-sm font-medium",children:"Assigned Technician"}),e.jsx("p",{className:"text-sm",children:s.owner_technician_name||s.technician_name})]}),s.machine_id&&e.jsxs(q,{variant:"outline",size:"sm",className:"w-full",onClick:()=>r(`/machines/${s.machine_id}`),children:[e.jsx(mr,{className:"mr-2 h-4 w-4"}),"View Full Machine Details"]})]})]}),e.jsxs(se,{children:[e.jsx(ue,{children:e.jsxs(fe,{className:"flex items-center gap-2",children:[e.jsx(ks,{className:"h-5 w-5"}),"Status & Priority"]})}),e.jsxs(ae,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(U,{className:"text-sm font-medium",children:"Status"}),e.jsx("div",{className:"mt-1",children:h?e.jsxs(tt,{value:v.status,onValueChange:Pe=>st(Pe),children:[e.jsx(Je,{children:e.jsx(rt,{})}),e.jsxs(et,{children:[e.jsx(Y,{value:"intake",children:"Intake"}),e.jsx(Y,{value:"pending",children:"Pending"}),e.jsx(Y,{value:"in_progress",children:"In Progress"}),e.jsx(Y,{value:"completed",children:"Completed"}),e.jsx(Y,{value:"cancelled",children:"Cancelled"}),e.jsx(Y,{value:"testing",children:"Testing"}),e.jsx(Y,{value:"parts_ordered",children:"Parts Ordered"}),e.jsx(Y,{value:"waiting_approval",children:"Waiting Approval"}),e.jsx(Y,{value:"waiting_supplier",children:"Waiting Supplier"}),e.jsx(Y,{value:"service_cancelled",children:"Service Cancelled"}),e.jsx(Y,{value:"warranty_declined",children:"Warranty Declined"})]})]}):it(s.status)})]}),e.jsxs("div",{children:[e.jsx(U,{className:"text-sm font-medium",children:"Priority"}),e.jsx("div",{className:"mt-1",children:h?e.jsxs(tt,{value:v.priority,onValueChange:Pe=>w(Ee=>({...Ee,priority:Pe})),children:[e.jsx(Je,{children:e.jsx(rt,{})}),e.jsxs(et,{children:[e.jsx(Y,{value:"low",children:"Low"}),e.jsx(Y,{value:"medium",children:"Medium"}),e.jsx(Y,{value:"high",children:"High"})]})]}):Me(s.priority)})]})]})]}),e.jsxs(se,{children:[e.jsx(ue,{children:e.jsxs(fe,{className:"flex items-center gap-2",children:[e.jsx(Zt,{className:"h-5 w-5"}),"Time Tracking"]})}),e.jsxs(ae,{className:"space-y-3",children:[(()=>{const Pe=h?v.started_at:s.started_at;return Pe&&Pe.trim()!==""&&e.jsxs("div",{children:[e.jsx(U,{className:"text-sm font-medium",children:"Started At"}),e.jsx("p",{className:"text-sm",children:gn(Pe)})]})})(),(()=>{const Pe=h?v.completed_at:s.completed_at;return Pe&&Pe.trim()!==""&&e.jsxs("div",{children:[e.jsx(U,{className:"text-sm font-medium",children:"Completed At"}),e.jsx("p",{className:"text-sm",children:gn(Pe)})]})})(),(()=>{const Pe=h?v.started_at:s.started_at,Ee=h?v.completed_at:s.completed_at;return Pe&&Pe.trim()!==""&&Ee&&Ee.trim()!==""&&e.jsxs("div",{children:[e.jsx(U,{className:"text-sm font-medium",children:"Total Duration"}),e.jsx("p",{className:"text-sm",children:Se(Pe,Ee)})]})})()]})]})]}),e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs(se,{children:[e.jsx(ue,{children:e.jsxs(fe,{className:"flex items-center gap-2",children:[e.jsx(Qt,{className:"h-5 w-5"}),"Warranty Work Order Details"]})}),e.jsxs(ae,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(U,{htmlFor:"description",children:"Description"}),h?e.jsx(ar,{id:"description",value:v.description,onChange:Pe=>w(Ee=>({...Ee,description:Pe.target.value})),rows:4,className:"mt-1"}):e.jsx("p",{className:"text-sm mt-1",children:s.description||"No description provided"})]}),e.jsxs("div",{children:[e.jsx(U,{htmlFor:"technician",children:"Technician"}),h?e.jsxs(tt,{value:v.technician_id||"unassigned",onValueChange:Pe=>w(Ee=>({...Ee,technician_id:Pe==="unassigned"?"":Pe})),children:[e.jsx(Je,{children:e.jsx(rt,{placeholder:"Select technician"})}),e.jsxs(et,{children:[e.jsx(Y,{value:"unassigned",children:"Unassigned"}),te.map(Pe=>e.jsx(Y,{value:Pe.id.toString(),children:Pe.name},Pe.id))]})]}):e.jsx("p",{className:"text-sm mt-1",children:s.owner_technician_name||s.technician_name||"Unassigned"})]})]})]}),e.jsxs(se,{children:[e.jsx(ue,{children:e.jsxs(fe,{className:"flex items-center gap-2",children:[e.jsx(Tn,{className:"h-5 w-5"}),"Cost Information"]})}),e.jsxs(ae,{children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx(U,{htmlFor:"labor_hours",children:"Labor Hours"}),h?e.jsx(be,{id:"labor_hours",type:"number",step:"0.1",value:v.labor_hours,onChange:Pe=>w(Ee=>({...Ee,labor_hours:Pe.target.value})),className:"mt-1"}):e.jsxs("p",{className:"text-sm mt-1",children:[s.labor_hours||"0"," hours"]})]}),e.jsxs("div",{children:[e.jsx(U,{htmlFor:"labor_rate",children:"Labor Rate (KM/hour)"}),h?e.jsx(be,{id:"labor_rate",type:"number",step:"0.01",value:v.labor_rate,onChange:Pe=>w(Ee=>({...Ee,labor_rate:Pe.target.value})),className:"mt-1"}):e.jsxs("p",{className:"text-sm mt-1",children:[s.labor_rate||"0"," KM/hour"]})]}),e.jsxs("div",{children:[e.jsx(U,{htmlFor:"troubleshooting_fee",children:"Troubleshooting Fee (KM)"}),h?e.jsx(be,{id:"troubleshooting_fee",type:"number",step:"0.01",value:v.troubleshooting_fee,onChange:Pe=>w(Ee=>({...Ee,troubleshooting_fee:Pe.target.value})),className:"mt-1"}):e.jsxs("p",{className:"text-sm mt-1",children:[s.troubleshooting_fee||"0"," KM"]})]}),e.jsxs("div",{children:[e.jsx(U,{children:"Parts Cost (KM)"}),e.jsx("p",{className:"text-sm mt-1",children:at(Number((ie||[]).reduce((Pe,Ee)=>Pe+(Number(Ee.total_price)||0),0)))})]})]}),e.jsxs("div",{className:"mt-4 pt-4 border-t",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(U,{className:"text-lg font-semibold",children:"Total Cost (Reference Only)"}),e.jsx("span",{className:"text-lg font-bold",children:at(He()||0)})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"* Warranty work orders are free for customers. Costs shown are for internal reference only."})]})]})]}),e.jsxs(se,{children:[e.jsx(ue,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(fe,{className:"flex items-center gap-2",children:[e.jsx(Ja,{className:"h-5 w-5"}),"Technician Notes"]}),h&&e.jsxs(q,{size:"sm",onClick:()=>J(!0),children:[e.jsx(Vt,{className:"mr-2 h-4 w-4"}),"Add Note"]})]})}),e.jsx(ae,{children:k.length===0?e.jsx("p",{className:"text-sm text-muted-foreground",children:"No notes yet"}):e.jsx("div",{className:"space-y-3",children:k.map(Pe=>e.jsxs("div",{className:"p-3 bg-muted rounded-lg",children:[e.jsx("p",{className:"text-sm",children:Pe.content}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:gn(Pe.created_at)})]},Pe.id))})})]}),e.jsxs(se,{children:[e.jsx(ue,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(fe,{className:"flex items-center gap-2",children:[e.jsx(Jt,{className:"h-5 w-5"}),"Parts Used"]}),h&&e.jsxs(q,{size:"sm",onClick:()=>M(!0),children:[e.jsx(Vt,{className:"mr-2 h-4 w-4"}),"Add Part"]})]})}),e.jsx(ae,{children:xe?e.jsxs("div",{className:"flex items-center justify-center py-4",children:[e.jsx(Nt,{className:"h-4 w-4 animate-spin mr-2"}),e.jsx("span",{className:"text-sm",children:"Loading inventory..."})]}):ie.length===0?e.jsx("p",{className:"text-sm text-muted-foreground",children:"No parts used"}):e.jsxs(ir,{children:[e.jsx(lr,{children:e.jsxs(ft,{children:[e.jsx(me,{children:"Item"}),e.jsx(me,{className:"text-right",children:"Quantity"}),e.jsx(me,{className:"text-right",children:"Unit Price"}),e.jsx(me,{className:"text-right",children:"Total"}),h&&e.jsx(me,{className:"text-right",children:"Actions"})]})}),e.jsx(or,{children:ie.map(Pe=>e.jsxs(ft,{children:[e.jsx(oe,{children:Pe.inventory_name}),e.jsx(oe,{className:"text-right",children:W?.id===Pe.id?e.jsx(be,{type:"number",value:ye,onChange:Ee=>he(Ee.target.value),className:"w-20 text-right",min:"1"}):Pe.quantity}),e.jsx(oe,{className:"text-right",children:at(Pe.unit_price||0)}),e.jsx(oe,{className:"text-right",children:at(Pe.total_price||0)}),h&&e.jsx(oe,{className:"text-right",children:W?.id===Pe.id?e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsx(q,{size:"sm",variant:"outline",onClick:yt,disabled:!ye||parseInt(ye)<=0,children:e.jsx(ul,{className:"h-4 w-4"})}),e.jsx(q,{size:"sm",variant:"outline",onClick:()=>{ee(null),he("")},children:e.jsx(hn,{className:"h-4 w-4"})})]}):e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsx(q,{size:"sm",variant:"outline",onClick:()=>lt(Pe),children:e.jsx(xr,{className:"h-4 w-4"})}),e.jsx(q,{size:"sm",variant:"outline",onClick:()=>ht(Pe),children:e.jsx(br,{className:"h-4 w-4"})})]})})]},Pe.id))})]})})]})]})]}),e.jsx(Ft,{open:G,onOpenChange:J,children:e.jsxs(Rt,{children:[e.jsxs(qt,{children:[e.jsx(Lt,{children:"Add Note"}),e.jsx(Ut,{children:"Add a note to this warranty work order."})]}),e.jsx("div",{className:"space-y-4",children:e.jsx(ar,{placeholder:"Enter your note...",value:A,onChange:Pe=>O(Pe.target.value),rows:4})}),e.jsxs(Dr,{children:[e.jsx(q,{variant:"outline",onClick:()=>J(!1),children:"Cancel"}),e.jsxs(q,{onClick:je,disabled:z||!A.trim(),children:[z?e.jsx(Nt,{className:"mr-2 h-4 w-4 animate-spin"}):e.jsx(Vt,{className:"mr-2 h-4 w-4"}),"Add Note"]})]})]})}),e.jsx(Vs,{open:b,onOpenChange:N,onConfirm:Z,title:"Delete Warranty Work Order",description:"Are you sure you want to delete this warranty work order? This action cannot be undone."}),e.jsx(wo,{open:_,onOpenChange:S,title:"Cannot Delete Completed Work Order",description:"Completed warranty work orders cannot be deleted. Please contact an administrator if you need to make changes."}),e.jsx(Ft,{open:re,onOpenChange:M,children:e.jsxs(Rt,{children:[e.jsxs(qt,{children:[e.jsx(Lt,{children:"Add Part"}),e.jsx(Ut,{children:"Add a part to this warranty work order."})]}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"inventory-select",children:"Select Part"}),e.jsxs(tt,{value:B.inventory_id,onValueChange:Pe=>L(Ee=>({...Ee,inventory_id:Pe})),children:[e.jsx(Je,{children:e.jsx(rt,{placeholder:"Choose a part"})}),e.jsx(et,{children:T.map(Pe=>e.jsxs(Y,{value:Pe.id.toString(),children:[Pe.name," - ",at(Pe.unit_price||0)," (Stock: ",Pe.quantity,")"]},Pe.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"quantity",children:"Quantity"}),e.jsx(be,{id:"quantity",type:"number",min:"1",value:B.quantity,onChange:Pe=>L(Ee=>({...Ee,quantity:parseInt(Pe.target.value)||1}))})]})]}),e.jsxs(Dr,{children:[e.jsx(q,{variant:"outline",onClick:()=>{M(!1),L({inventory_id:"",quantity:1})},children:"Cancel"}),e.jsx(q,{onClick:Ve,disabled:!B.inventory_id||!B.quantity,children:"Add Part"})]})]})})]})})}const oE=[{key:"ticket_number",label:"Ticket #"},{key:"customer",label:"Customer"},{key:"machine",label:"Machine"},{key:"problem",label:"Problem"},{key:"status",label:"Status"},{key:"priority",label:"Priority"},{key:"submitted_by",label:"Submitted By"},{key:"created_at",label:"Created"}];function Kee(){const t=er(),{user:r,hasPermission:n}=hr(),[s,a]=f.useState([]),[l,c]=f.useState(!0),[u,d]=f.useState(null),[h,x]=f.useState(""),[p,y]=f.useState(""),[v,w]=f.useState({status:"",priority:"",technician:""}),[b,N]=f.useState(1),[_,S]=f.useState(1),[k,E]=f.useState(0),[A]=f.useState(25),O=new Date().getFullYear(),[z,R]=f.useState(O),[G,J]=f.useState([O]),[ie,V]=f.useState(!1),[xe,pe]=f.useState(null),[re,M]=f.useState(""),[B,L]=f.useState([]),[T,F]=f.useState(!1),[I,Q]=f.useState(!1),[W,ee]=f.useState(null),[ye,he]=f.useState(!1),[te,De]=f.useState(null),{visibleColumns:ne,toggleColumn:$e,isColumnVisible:ge,resetColumns:we,showAllColumns:_e,hideAllColumns:Ye,isSyncing:ht}=ps("warranty_repair_tickets",gs(oE));f.useEffect(()=>{(async()=>{try{const It=(await de.getWarrantyRepairTicketYears()).data||[];J(It.length>0?It:[O])}catch(ot){console.error("Error fetching years:",ot),J([O])}})()},[]),f.useEffect(()=>{Ve(),lt()},[p,v,b,z]);const Ve=async()=>{try{c(!0),d(null);const Le={page:b,limit:A,year:z};p&&(Le.search=p),v.status&&(Le.status=v.status),v.priority&&(Le.priority=v.priority),v.technician&&(Le.technician_id=v.technician);const ot=await de.getWarrantyRepairTickets(Le);a(ot.data||[]),S(ot.pagination?.pages||1),E(ot.pagination?.total||0)}catch(Le){d("Failed to load warranty repair tickets."),console.error("Error fetching warranty repair tickets:",Le)}finally{c(!1)}},lt=async()=>{try{const Le=await de.getUsers();L(Le.data||[])}catch(Le){console.error("Error fetching users:",Le)}},yt=Le=>{t(`/warranty-repair-tickets/${Le}`)},Re=()=>{y(h),N(1)},H=()=>{x(""),y(""),N(1)},Be=(Le,ot)=>{w(It=>({...It,[Le]:ot})),N(1)},st=()=>{w({status:"",priority:"",technician:""}),N(1)},K=()=>{const Le=new Map;return s.forEach(ot=>{ot.converted_by_technician_id&&ot.converted_by_technician_name&&Le.set(ot.converted_by_technician_id,ot.converted_by_technician_name),ot.submitted_by&&ot.submitted_by_name&&Le.set(ot.submitted_by,ot.submitted_by_name)}),Array.from(Le.entries()).sort((ot,It)=>ot[1].localeCompare(It[1])).map(([ot,It])=>({id:ot,name:It}))},Z=()=>Object.values(v).filter(Le=>Le!=="").length,ke=async Le=>{if(pe(Le),r?.role==="technician")try{F(!0);const ot=await de.convertWarrantyRepairTicketToWorkOrder(Le.id,{technician_id:r.id,priority:Le.priority||"medium"});Ne.success("Warranty repair ticket converted and assigned to you");const It=ot.data?.warranty_work_order?.id;It?t(`/warranty-work-orders/${It}`):Ve()}catch(ot){console.error("Error converting ticket:",ot),Ne.error(ot.response?.data?.message||"Failed to convert warranty repair ticket")}finally{F(!1)}else V(!0)},Ae=async()=>{if(!(!xe||!re))try{F(!0);const Le=await de.convertWarrantyRepairTicketToWorkOrder(xe.id,{technician_id:re,priority:xe.priority||"medium"});Ne.success("Warranty repair ticket converted to work order successfully"),V(!1),pe(null),M("");const ot=Le.data?.warranty_work_order?.id;ot?t(`/warranty-work-orders/${ot}`):Ve()}catch(Le){console.error("Error converting ticket:",Le),Ne.error(Le.response?.data?.message||"Failed to convert warranty repair ticket")}finally{F(!1)}},je=Le=>{Le.status==="converted"||Le.status==="converted - warranty"?(De(Le),he(!0)):(ee(Le),Q(!0))},He=async()=>{if(W)try{await de.deleteWarrantyRepairTicket(W.id),Ne.success("Warranty repair ticket deleted successfully"),Q(!1),ee(null),Ve()}catch(Le){console.error("Error deleting ticket:",Le),Ne.error(Le.response?.data?.message||"Failed to delete warranty repair ticket")}},Se=async Le=>{try{const ot=await fetch(`${rn}/api/print/warranty-ticket/${Le.id}`,{method:"GET",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!ot.ok)throw new Error(`HTTP error! status: ${ot.status}`);const It=await ot.blob(),Er=window.URL.createObjectURL(It),Yr=window.open(Er,"_blank");Yr&&(Yr.document.title=`Warranty Repair Ticket ${Le.formatted_number||Le.ticket_number}`),window.URL.revokeObjectURL(Er)}catch(ot){console.error("Error printing ticket:",ot),Ne.error("Failed to print ticket")}},it=async Le=>{try{const ot=await fetch(`${rn}/api/print/warranty-ticket/${Le.id}`,{method:"GET",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!ot.ok)throw new Error(`HTTP error! status: ${ot.status}`);const It=await ot.blob(),Er=window.URL.createObjectURL(It),Yr=document.createElement("a");Yr.href=Er,Yr.download=`warranty-repair-ticket-${Le.formatted_number||Le.ticket_number}.pdf`,document.body.appendChild(Yr),Yr.click(),document.body.removeChild(Yr),window.URL.revokeObjectURL(Er)}catch(ot){console.error("Error downloading ticket:",ot),Ne.error("Failed to download ticket")}},Me=Le=>{const It={intake:Zt,converted:Ar,"converted - warranty":Ar,cancelled:fs}[Le]||Zt;return e.jsxs(Oe,{variant:Vr(Le),className:`flex items-center gap-1 ${Vr(Le)==="outline"?Xs(Le):""}`,children:[e.jsx(It,{className:"h-3 w-3"}),Qs(Le)]})},Tt=Le=>{if(!Le)return e.jsx(Oe,{variant:"outline",className:"bg-yellow-50 text-yellow-700 border-yellow-200",children:"Medium"});const ot={low:{color:"bg-green-50 text-green-700 border-green-200",label:"Low"},medium:{color:"bg-yellow-50 text-yellow-700 border-yellow-200",label:"Medium"},high:{color:"bg-red-50 text-red-700 border-red-200",label:"High"}},It=ot[Le]||ot.medium;return e.jsx(Oe,{variant:"outline",className:It.color,children:It.label})},Pe=s.filter(Le=>Le.status!=="converted"&&Le.status!=="converted - warranty"),Ee=s.filter(Le=>Le.status==="converted"||Le.status==="converted - warranty"),xt=s.filter(Le=>Le.priority==="high"),wt=k;return l?e.jsx(gt,{children:e.jsxs("div",{className:"flex items-center justify-center h-64",children:[e.jsx(Nt,{className:"h-8 w-8 animate-spin"}),e.jsx("span",{className:"ml-2",children:"Loading warranty repair tickets..."})]})}):u?e.jsx(gt,{children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-red-600 mb-4",children:u}),e.jsx(q,{onClick:Ve,children:"Try Again"})]})})}):e.jsx(gt,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Warranty Repair Tickets"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage warranty repair tickets and track conversions"})]}),n("repair_tickets:write")&&e.jsxs(q,{onClick:()=>t("/create-warranty-repair-ticket"),children:[e.jsx(Vt,{className:"mr-2 h-4 w-4"}),"New Warranty Ticket"]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[e.jsxs(se,{children:[e.jsxs(ue,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(fe,{className:"text-sm font-medium",children:"Open Tickets"}),e.jsx(Zt,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(ae,{children:[e.jsx("div",{className:"text-2xl font-bold",children:Pe.length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Not converted"})]})]}),e.jsxs(se,{children:[e.jsxs(ue,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(fe,{className:"text-sm font-medium",children:"Converted Tickets"}),e.jsx(Ar,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(ae,{children:[e.jsx("div",{className:"text-2xl font-bold",children:Ee.length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"To work orders"})]})]}),e.jsxs(se,{children:[e.jsxs(ue,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(fe,{className:"text-sm font-medium",children:"High Priority"}),e.jsx(fs,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(ae,{children:[e.jsx("div",{className:"text-2xl font-bold",children:xt.length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Urgent tickets"})]})]}),e.jsxs(se,{children:[e.jsxs(ue,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(fe,{className:"text-sm font-medium",children:"Total Tickets"}),e.jsx(Qt,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(ae,{children:[e.jsx("div",{className:"text-2xl font-bold",children:wt}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"All warranty tickets"})]})]})]}),e.jsxs(se,{children:[e.jsx(ue,{children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("div",{className:"relative",children:[e.jsx(nr,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),e.jsx(be,{placeholder:"Search tickets...",value:h,onChange:Le=>x(Le.target.value),onKeyDown:Le=>{Le.key==="Enter"&&Re()},className:"pl-10 w-80"}),h&&e.jsx(q,{variant:"ghost",size:"sm",className:"absolute right-1 top-1/2 -translate-y-1/2 h-6 w-6 p-0",onClick:H,children:e.jsx(hn,{className:"h-3 w-3"})})]}),e.jsx(q,{onClick:Re,variant:"outline",children:"Search"}),e.jsxs(Cr,{children:[e.jsx(Sr,{asChild:!0,children:e.jsxs(q,{variant:"outline",className:"relative",children:[e.jsx(Ua,{className:"mr-2 h-4 w-4"}),"Filters",Z()>0&&e.jsx(Oe,{variant:"secondary",className:"ml-2 h-5 w-5 rounded-full p-0 flex items-center justify-center text-xs",children:Z()})]})}),e.jsxs(wr,{align:"end",className:"w-56",children:[e.jsx(Tr,{children:"Filter by"}),e.jsx(Lr,{}),e.jsxs("div",{className:"p-2",children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Status"}),e.jsxs(tt,{value:v.status||"all",onValueChange:Le=>Be("status",Le==="all"?"":Le),children:[e.jsx(Je,{children:e.jsx(rt,{placeholder:"All statuses"})}),e.jsxs(et,{children:[e.jsx(Y,{value:"all",children:"All statuses"}),e.jsx(Y,{value:"intake",children:"Intake"}),e.jsx(Y,{value:"converted",children:"Converted"}),e.jsx(Y,{value:"converted - warranty",children:"Converted - Warranty"}),e.jsx(Y,{value:"cancelled",children:"Cancelled"})]})]})]}),e.jsxs("div",{className:"p-2",children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Priority"}),e.jsxs(tt,{value:v.priority||"all",onValueChange:Le=>Be("priority",Le==="all"?"":Le),children:[e.jsx(Je,{children:e.jsx(rt,{placeholder:"All priorities"})}),e.jsxs(et,{children:[e.jsx(Y,{value:"all",children:"All priorities"}),e.jsx(Y,{value:"low",children:"Low"}),e.jsx(Y,{value:"medium",children:"Medium"}),e.jsx(Y,{value:"high",children:"High"})]})]})]}),e.jsxs("div",{className:"p-2",children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Technician"}),e.jsxs(tt,{value:v.technician||"all",onValueChange:Le=>Be("technician",Le==="all"?"":Le),children:[e.jsx(Je,{children:e.jsx(rt,{placeholder:"All technicians"})}),e.jsxs(et,{children:[e.jsx(Y,{value:"all",children:"All technicians"}),e.jsx(Y,{value:"unassigned",children:"Unassigned"}),K().map(Le=>e.jsx(Y,{value:Le.id,children:Le.name},Le.id))]})]})]}),e.jsxs("div",{className:"p-2",children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Year"}),e.jsxs(tt,{value:z.toString(),onValueChange:Le=>{R(parseInt(Le)),N(1)},children:[e.jsx(Je,{children:e.jsx(rt,{})}),e.jsx(et,{children:G.map(Le=>e.jsx(Y,{value:Le.toString(),children:Le},Le))})]})]}),e.jsx(Lr,{}),e.jsxs(ct,{onClick:st,children:[e.jsx(hn,{className:"mr-2 h-4 w-4"}),"Clear Filters"]})]})]}),e.jsx(ys,{columns:oE,visibleColumns:ne,onToggleColumn:$e,onShowAll:_e,onHideAll:Ye,onReset:we,isSyncing:ht})]})})}),e.jsxs(ae,{children:[e.jsx("div",{className:"rounded-md border",children:e.jsxs(ir,{children:[e.jsx(lr,{children:e.jsxs(ft,{children:[ge("ticket_number")&&e.jsx(me,{children:"Ticket #"}),ge("customer")&&e.jsx(me,{children:"Customer"}),ge("machine")&&e.jsx(me,{children:"Machine"}),ge("problem")&&e.jsx(me,{children:"Problem"}),ge("status")&&e.jsx(me,{children:"Status"}),ge("priority")&&e.jsx(me,{children:"Priority"}),ge("submitted_by")&&e.jsx(me,{children:"Submitted By"}),ge("created_at")&&e.jsx(me,{children:"Created"}),e.jsx(me,{className:"w-[70px]",children:"Actions"})]})}),e.jsx(or,{children:s.length===0?e.jsx(ft,{children:e.jsx(oe,{colSpan:9,className:"text-center py-8",children:e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx(Qt,{className:"h-8 w-8 text-muted-foreground"}),e.jsx("p",{className:"text-muted-foreground",children:"No warranty repair tickets found"})]})})}):s.map(Le=>e.jsxs(ft,{className:"cursor-pointer hover:bg-muted/50",onClick:()=>t(`/warranty-repair-tickets/${Le.id}`),children:[ge("ticket_number")&&e.jsx(oe,{className:"font-medium",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Hs,{className:"h-4 w-4 text-orange-500"}),Le.formatted_number||`#${Le.ticket_number||Le.id}`]})}),ge("customer")&&e.jsx(oe,{children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:Le.customer_name}),Le.company_name&&e.jsx("div",{className:"text-sm text-muted-foreground",children:Le.company_name})]})}),ge("machine")&&e.jsx(oe,{children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:Le.model_name||"N/A"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:Le.serial_number||"N/A"})]})}),ge("problem")&&e.jsx(oe,{children:e.jsx("div",{className:"max-w-[200px] truncate",children:Le.problem_description})}),ge("status")&&e.jsx(oe,{children:Me(Le.status)}),ge("priority")&&e.jsx(oe,{children:Tt(Le.priority)}),ge("submitted_by")&&e.jsx(oe,{children:Le.submitted_by_name||"Unknown"}),ge("created_at")&&e.jsx(oe,{children:jt(Le.created_at)}),e.jsx(oe,{className:"text-right",children:e.jsxs(Cr,{children:[e.jsx(Sr,{asChild:!0,children:e.jsx(q,{variant:"ghost",className:"h-8 w-8 p-0",onClick:ot=>ot.stopPropagation(),children:e.jsx(ss,{className:"h-4 w-4"})})}),e.jsxs(wr,{align:"end",onClick:ot=>ot.stopPropagation(),children:[e.jsx(Tr,{children:"Actions"}),e.jsxs(ct,{onClick:ot=>{ot.stopPropagation(),yt(Le.id)},children:[e.jsx(mr,{className:"mr-2 h-4 w-4"}),"View Details"]}),n("repair_tickets:write")&&e.jsxs(ct,{onClick:ot=>ot.stopPropagation(),children:[e.jsx(xr,{className:"mr-2 h-4 w-4"}),"Edit Ticket"]}),n("repair_tickets:write")&&e.jsxs(ct,{onClick:ot=>ot.stopPropagation(),children:[e.jsx(Ot,{className:"mr-2 h-4 w-4"}),"Assign Technician"]}),n("repair_tickets:write")&&e.jsxs(ct,{onClick:ot=>{ot.stopPropagation(),ke(Le)},disabled:Le.status==="converted"||Le.status==="cancelled",children:[e.jsx(Ct,{className:"mr-2 h-4 w-4"}),"Convert to Work Order"]}),e.jsxs(ct,{onClick:ot=>{ot.stopPropagation(),Se(Le)},children:[e.jsx($a,{className:"mr-2 h-4 w-4"}),"Print"]}),e.jsxs(ct,{onClick:ot=>{ot.stopPropagation(),it(Le)},children:[e.jsx(Qt,{className:"mr-2 h-4 w-4"}),"Download PDF"]}),n("repair_tickets:delete")&&e.jsxs(e.Fragment,{children:[e.jsx(Lr,{}),e.jsxs(ct,{className:"text-red-600",onClick:ot=>{ot.stopPropagation(),je(Le)},children:[e.jsx(br,{className:"mr-2 h-4 w-4"}),"Delete"]})]})]})]})})]},Le.id))})]})}),_>1&&e.jsxs("div",{className:"flex items-center justify-between px-2 py-4",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",(b-1)*A+1," to ",Math.min(b*A,k)," of ",k," warranty repair tickets"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(q,{variant:"outline",size:"sm",onClick:()=>N(Le=>Math.max(Le-1,1)),disabled:b===1,children:[e.jsx(_c,{className:"h-4 w-4"}),"Previous"]}),e.jsx("div",{className:"flex items-center space-x-1",children:Array.from({length:Math.min(5,_)},(Le,ot)=>{const It=ot+1;return e.jsx(q,{variant:b===It?"default":"outline",size:"sm",onClick:()=>N(It),className:"w-8 h-8 p-0",children:It},It)})}),e.jsxs(q,{variant:"outline",size:"sm",onClick:()=>N(Le=>Math.min(Le+1,_)),disabled:b===_,children:["Next",e.jsx(ri,{className:"h-4 w-4"})]})]})]})]})]}),e.jsx(Ft,{open:ie,onOpenChange:V,children:e.jsxs(Rt,{children:[e.jsxs(qt,{children:[e.jsx(Lt,{children:"Convert to Warranty Work Order"}),e.jsxs(Ut,{children:["Convert warranty repair ticket ",xe?.formatted_number," to a warranty work order."]})]}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsx(U,{htmlFor:"technician",children:"Assign Technician"}),e.jsxs(tt,{value:re,onValueChange:M,children:[e.jsx(Je,{children:e.jsx(rt,{placeholder:"Select a technician"})}),e.jsx(et,{children:B.map(Le=>e.jsx(Y,{value:Le.id,children:Le.name},Le.id))})]})]})}),e.jsxs(Dr,{children:[e.jsx(q,{variant:"outline",onClick:()=>V(!1),children:"Cancel"}),e.jsx(q,{onClick:Ae,disabled:!re||T,children:T?e.jsxs(e.Fragment,{children:[e.jsx(Nt,{className:"mr-2 h-4 w-4 animate-spin"}),"Converting..."]}):"Convert to Work Order"})]})]})}),e.jsx(Vs,{open:I,onOpenChange:Q,onConfirm:He,title:"Delete Warranty Repair Ticket",description:`Are you sure you want to delete warranty repair ticket ${W?.formatted_number}? This action cannot be undone.`}),e.jsx(wo,{open:ye,onOpenChange:he,title:"Cannot Delete Converted Ticket",description:`Warranty repair ticket ${te?.formatted_number} has been converted to a work order and cannot be deleted.`})]})})}const cE=[{key:"work_order_number",label:"Work Order #"},{key:"customer",label:"Customer"},{key:"machine",label:"Machine"},{key:"description",label:"Description"},{key:"status",label:"Status"},{key:"priority",label:"Priority"},{key:"technician",label:"Technician"},{key:"created_at",label:"Created"}];function Gee(){const t=er(),{hasPermission:r}=hr(),[n]=qO(),[s,a]=f.useState([]),[l,c]=f.useState(!0),[u,d]=f.useState(null),[h,x]=f.useState(""),[p,y]=f.useState(""),[v,w]=f.useState({status:"",priority:"",technician:""}),[b,N]=f.useState(1),[_,S]=f.useState(1),[k,E]=f.useState(0),[A]=f.useState(25),O=new Date().getFullYear(),[z,R]=f.useState(O),[G,J]=f.useState([O]),[ie,V]=f.useState(!1),[xe,pe]=f.useState(null),[re,M]=f.useState(!1),[B,L]=f.useState(null),{visibleColumns:T,toggleColumn:F,isColumnVisible:I,resetColumns:Q,showAllColumns:W,hideAllColumns:ee,isSyncing:ye}=ps("warranty_work_orders",gs(cE));f.useEffect(()=>{const K=n.get("priority");K&&w(Z=>({...Z,priority:K}))},[n]),f.useEffect(()=>{(async()=>{try{const ke=(await de.getWarrantyWorkOrderYears()).data||[];J(ke.length>0?ke:[O])}catch(Z){console.error("Error fetching years:",Z),J([O])}})()},[]),f.useEffect(()=>{he()},[p,v,b,z]);const he=async()=>{try{c(!0),d(null);const K={page:b,limit:A,year:z};p&&(K.search=p),v.status&&(K.status=v.status),v.priority&&(K.priority=v.priority),v.technician&&(K.technician_id=v.technician);const Z=await de.getWarrantyWorkOrders(K);a(Z.data||[]),S(Z.pagination?.pages||1),E(Z.pagination?.total||0)}catch(K){d("Failed to load warranty work orders."),console.error("Error fetching warranty work orders:",K)}finally{c(!1)}},te=K=>{t(`/warranty-work-orders/${K}`)},De=()=>{y(h),N(1)},ne=()=>{x(""),y(""),N(1)},$e=(K,Z)=>{w(ke=>({...ke,[K]:Z})),N(1)},ge=()=>{w({status:"",priority:"",technician:""}),N(1)},we=()=>{const K=new Map;return s.forEach(Z=>{Z.technician_id&&Z.technician_name&&K.set(Z.technician_id,Z.technician_name)}),Array.from(K.entries()).sort((Z,ke)=>Z[1].localeCompare(ke[1])).map(([Z,ke])=>({id:Z,name:ke}))},_e=()=>Object.values(v).filter(K=>K!=="").length,Ye=K=>{t(`/warranty-work-orders/${K}`)},ht=K=>{Ne.info("Technician assignment feature coming soon")},Ve=K=>{Ne.info("Time logging feature coming soon")},lt=K=>{K.status==="completed"?(L(K),M(!0)):(pe(K),V(!0))},yt=async()=>{if(xe)try{await de.deleteWarrantyWorkOrder(xe.id),Ne.success("Warranty work order deleted successfully"),V(!1),pe(null),he()}catch(K){console.error("Error deleting warranty work order:",K),Ne.error(K.response?.data?.message||"Failed to delete warranty work order")}},Re=async K=>{try{const Z=await fetch(`${rn}/api/print/warranty-work-order/${K.id}`,{method:"GET",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!Z.ok)throw new Error(`HTTP error! status: ${Z.status}`);const ke=await Z.blob(),Ae=window.URL.createObjectURL(ke),je=window.open(Ae,"_blank");je&&(je.document.title=`Warranty Work Order ${K.formatted_number||K.id}`),window.URL.revokeObjectURL(Ae)}catch(Z){console.error("Error printing work order:",Z),Ne.error("Failed to print work order")}},H=async K=>{try{const Z=await fetch(`${rn}/api/print/warranty-work-order/${K.id}`,{method:"GET",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!Z.ok)throw new Error(`HTTP error! status: ${Z.status}`);const ke=await Z.blob(),Ae=window.URL.createObjectURL(ke),je=document.createElement("a");je.href=Ae,je.download=`warranty-work-order-${K.formatted_number||K.id}.pdf`,document.body.appendChild(je),je.click(),document.body.removeChild(je),window.URL.revokeObjectURL(Ae)}catch(Z){console.error("Error downloading work order:",Z),Ne.error("Failed to download work order")}},Be=K=>{const ke={intake:Zt,quoted:Qt,awaiting_approval:Zt,declined:wn,pending:Zt,in_progress:Ct,completed:Ar,ready_for_pickup:Ar,cancelled:wn,testing:Ct,parts_ordered:Zt,waiting_approval:Zt,waiting_supplier:Zt,service_cancelled:wn,warranty_declined:wn}[K]||Zt;return e.jsxs(Oe,{variant:Vr(K),className:`flex items-center gap-1 ${Vr(K)==="outline"?Xs(K):""}`,children:[e.jsx(ke,{className:"h-3 w-3"}),Qs(K)]})},st=K=>{const Z={low:{color:"bg-green-50 text-green-700 border-green-200",label:"Low"},medium:{color:"bg-yellow-50 text-yellow-700 border-yellow-200",label:"Medium"},high:{color:"bg-red-50 text-red-700 border-red-200",label:"High"}},ke=Z[K]||Z.medium;return e.jsx(Oe,{variant:"outline",className:ke.color,children:ke.label})};return l?e.jsx(gt,{children:e.jsxs("div",{className:"flex items-center justify-center h-64",children:[e.jsx(Nt,{className:"h-8 w-8 animate-spin"}),e.jsx("span",{className:"ml-2",children:"Loading warranty work orders..."})]})}):u?e.jsx(gt,{children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-red-600 mb-4",children:u}),e.jsx(q,{onClick:he,children:"Try Again"})]})})}):e.jsx(gt,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Warranty Work Orders"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage warranty work orders and track progress"})]})}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[e.jsxs(se,{children:[e.jsxs(ue,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(fe,{className:"text-sm font-medium",children:"Pending"}),e.jsx(Zt,{className:"h-4 w-4 text-gray-500"})]}),e.jsxs(ae,{children:[e.jsx("div",{className:"text-2xl font-bold",children:s.filter(K=>K.status==="pending").length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Awaiting start"})]})]}),e.jsxs(se,{children:[e.jsxs(ue,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(fe,{className:"text-sm font-medium",children:"In Progress"}),e.jsx(ks,{className:"h-4 w-4 text-orange-500"})]}),e.jsxs(ae,{children:[e.jsx("div",{className:"text-2xl font-bold",children:s.filter(K=>K.status==="in_progress").length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Currently being worked on"})]})]}),e.jsxs(se,{children:[e.jsxs(ue,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(fe,{className:"text-sm font-medium",children:"Completed"}),e.jsx(Ar,{className:"h-4 w-4 text-green-500"})]}),e.jsxs(ae,{children:[e.jsx("div",{className:"text-2xl font-bold",children:s.filter(K=>K.status==="completed").length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Finished this period"})]})]}),e.jsxs(se,{children:[e.jsxs(ue,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(fe,{className:"text-sm font-medium",children:"Warranty Declined"}),e.jsx(wn,{className:"h-4 w-4 text-red-500"})]}),e.jsxs(ae,{children:[e.jsx("div",{className:"text-2xl font-bold",children:s.filter(K=>K.status==="warranty_declined").length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Warranties not covered"})]})]})]}),e.jsxs(se,{children:[e.jsx(ue,{children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("div",{className:"relative",children:[e.jsx(nr,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),e.jsx(be,{placeholder:"Search work orders...",value:h,onChange:K=>x(K.target.value),onKeyDown:K=>{K.key==="Enter"&&De()},className:"pl-10 w-80"}),h&&e.jsx(q,{variant:"ghost",size:"sm",className:"absolute right-1 top-1/2 -translate-y-1/2 h-6 w-6 p-0",onClick:ne,children:e.jsx(hn,{className:"h-3 w-3"})})]}),e.jsx(q,{onClick:De,variant:"outline",children:"Search"}),e.jsxs(Cr,{children:[e.jsx(Sr,{asChild:!0,children:e.jsxs(q,{variant:"outline",className:"relative",children:[e.jsx(Ua,{className:"mr-2 h-4 w-4"}),"Filters",_e()>0&&e.jsx(Oe,{variant:"secondary",className:"ml-2 h-5 w-5 rounded-full p-0 flex items-center justify-center text-xs",children:_e()})]})}),e.jsxs(wr,{align:"end",className:"w-56",children:[e.jsx(Tr,{children:"Filter by"}),e.jsx(Lr,{}),e.jsxs("div",{className:"p-2",children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Status"}),e.jsxs(tt,{value:v.status||"all",onValueChange:K=>$e("status",K==="all"?"":K),children:[e.jsx(Je,{children:e.jsx(rt,{placeholder:"All statuses"})}),e.jsxs(et,{children:[e.jsx(Y,{value:"all",children:"All statuses"}),e.jsx(Y,{value:"intake",children:"Intake"}),e.jsx(Y,{value:"pending",children:"Pending"}),e.jsx(Y,{value:"in_progress",children:"In Progress"}),e.jsx(Y,{value:"completed",children:"Completed"}),e.jsx(Y,{value:"cancelled",children:"Cancelled"}),e.jsx(Y,{value:"testing",children:"Testing"}),e.jsx(Y,{value:"parts_ordered",children:"Parts Ordered"}),e.jsx(Y,{value:"waiting_approval",children:"Waiting Approval"}),e.jsx(Y,{value:"waiting_supplier",children:"Waiting Supplier"}),e.jsx(Y,{value:"service_cancelled",children:"Service Cancelled"}),e.jsx(Y,{value:"warranty_declined",children:"Warranty Declined"})]})]})]}),e.jsxs("div",{className:"p-2",children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Priority"}),e.jsxs(tt,{value:v.priority||"all",onValueChange:K=>$e("priority",K==="all"?"":K),children:[e.jsx(Je,{children:e.jsx(rt,{placeholder:"All priorities"})}),e.jsxs(et,{children:[e.jsx(Y,{value:"all",children:"All priorities"}),e.jsx(Y,{value:"low",children:"Low"}),e.jsx(Y,{value:"medium",children:"Medium"}),e.jsx(Y,{value:"high",children:"High"})]})]})]}),e.jsxs("div",{className:"p-2",children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Technician"}),e.jsxs(tt,{value:v.technician||"all",onValueChange:K=>$e("technician",K==="all"?"":K),children:[e.jsx(Je,{children:e.jsx(rt,{placeholder:"All technicians"})}),e.jsxs(et,{children:[e.jsx(Y,{value:"all",children:"All technicians"}),e.jsx(Y,{value:"unassigned",children:"Unassigned"}),we().map(K=>e.jsx(Y,{value:K.id,children:K.name},K.id))]})]})]}),e.jsxs("div",{className:"p-2",children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Year"}),e.jsxs(tt,{value:z.toString(),onValueChange:K=>{R(parseInt(K)),N(1)},children:[e.jsx(Je,{children:e.jsx(rt,{})}),e.jsx(et,{children:G.map(K=>e.jsx(Y,{value:K.toString(),children:K},K))})]})]}),e.jsx(Lr,{}),e.jsxs(ct,{onClick:ge,children:[e.jsx(hn,{className:"mr-2 h-4 w-4"}),"Clear Filters"]})]})]}),e.jsx(ys,{columns:cE,visibleColumns:T,onToggleColumn:F,onShowAll:W,onHideAll:ee,onReset:Q,isSyncing:ye})]})})}),e.jsxs(ae,{children:[e.jsx("div",{className:"rounded-md border",children:e.jsxs(ir,{children:[e.jsx(lr,{children:e.jsxs(ft,{children:[I("work_order_number")&&e.jsx(me,{children:"Work Order #"}),I("customer")&&e.jsx(me,{children:"Customer"}),I("machine")&&e.jsx(me,{children:"Machine"}),I("description")&&e.jsx(me,{children:"Description"}),I("status")&&e.jsx(me,{children:"Status"}),I("priority")&&e.jsx(me,{children:"Priority"}),I("technician")&&e.jsx(me,{children:"Technician"}),e.jsx(me,{className:"text-right",children:"Actions"})]})}),e.jsx(or,{children:s.length===0?e.jsx(ft,{children:e.jsx(oe,{colSpan:8,className:"text-center py-8",children:e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx(Qt,{className:"h-8 w-8 text-muted-foreground"}),e.jsx("p",{className:"text-muted-foreground",children:"No warranty work orders found"})]})})}):s.map((K,Z)=>e.jsxs(ft,{className:"cursor-pointer hover:bg-muted/50",onClick:()=>t(`/warranty-work-orders/${K.id}`),children:[I("work_order_number")&&e.jsx(oe,{className:"font-medium",children:K.formatted_number||`#${K.id}`}),I("customer")&&e.jsx(oe,{children:K.customer_name||"N/A"}),I("machine")&&e.jsx(oe,{children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:K.machine_name||"N/A"}),K.serial_number&&e.jsx("div",{className:"text-sm text-muted-foreground",children:K.serial_number})]})}),I("description")&&e.jsx(oe,{className:"max-w-xs",children:e.jsx("div",{className:"truncate",children:K.description||"No description"})}),I("status")&&e.jsx(oe,{children:Be(K.status)}),I("priority")&&e.jsx(oe,{children:st(K.priority)}),I("technician")&&e.jsx(oe,{className:"text-sm text-muted-foreground",children:K.technician_name||"Unassigned"}),e.jsx(oe,{className:"text-right",children:e.jsxs(Cr,{children:[e.jsx(Sr,{asChild:!0,children:e.jsx(q,{variant:"ghost",className:"h-8 w-8 p-0",onClick:ke=>ke.stopPropagation(),children:e.jsx(ss,{className:"h-4 w-4"})})}),e.jsxs(wr,{align:"end",children:[e.jsx(Tr,{children:"Actions"}),e.jsxs(ct,{onClick:ke=>{ke.stopPropagation(),te(K.id)},children:[e.jsx(mr,{className:"mr-2 h-4 w-4"}),"View Details"]}),r("work_orders:write")&&e.jsxs(ct,{onClick:ke=>{ke.stopPropagation(),Ye(K.id)},children:[e.jsx(xr,{className:"mr-2 h-4 w-4"}),"Edit Work Order"]}),r("work_orders:write")&&e.jsxs(ct,{onClick:ke=>{ke.stopPropagation(),ht(K.id)},children:[e.jsx(Ot,{className:"mr-2 h-4 w-4"}),"Assign Technician"]}),r("work_orders:write")&&e.jsxs(ct,{onClick:ke=>{ke.stopPropagation(),Ve(K.id)},children:[e.jsx(Zt,{className:"mr-2 h-4 w-4"}),"Log Time"]}),e.jsxs(ct,{onClick:ke=>{ke.stopPropagation(),Re(K)},children:[e.jsx($a,{className:"mr-2 h-4 w-4"}),"Print"]}),e.jsxs(ct,{onClick:ke=>{ke.stopPropagation(),H(K)},children:[e.jsx(Qt,{className:"mr-2 h-4 w-4"}),"Download PDF"]}),r("work_orders:delete")&&e.jsxs(e.Fragment,{children:[e.jsx(Lr,{}),e.jsxs(ct,{className:"text-red-600",onClick:ke=>{ke.stopPropagation(),lt(K)},children:[e.jsx(br,{className:"mr-2 h-4 w-4"}),"Delete"]})]})]})]})})]},`warranty-workorder-${K.id}-${Z}`))})]})}),_>1&&e.jsxs("div",{className:"flex items-center justify-between px-2 py-4",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",(b-1)*A+1," to ",Math.min(b*A,k)," of ",k," warranty work orders"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(q,{variant:"outline",size:"sm",onClick:()=>N(K=>Math.max(K-1,1)),disabled:b===1,children:[e.jsx(_c,{className:"h-4 w-4"}),"Previous"]}),e.jsx("div",{className:"flex items-center space-x-1",children:Array.from({length:Math.min(5,_)},(K,Z)=>{const ke=Z+1;return e.jsx(q,{variant:b===ke?"default":"outline",size:"sm",onClick:()=>N(ke),className:"w-8 h-8 p-0",children:ke},ke)})}),e.jsxs(q,{variant:"outline",size:"sm",onClick:()=>N(K=>Math.min(K+1,_)),disabled:b===_,children:["Next",e.jsx(ri,{className:"h-4 w-4"})]})]})]})]})]}),e.jsx(Vs,{open:ie,onOpenChange:V,onConfirm:yt,title:"Delete Warranty Work Order",description:`Are you sure you want to delete warranty work order ${xe?.formatted_number}? This action cannot be undone.`}),e.jsx(wo,{open:re,onOpenChange:M,title:"Cannot Delete Completed Work Order",description:`Warranty work order ${B?.formatted_number} is completed and cannot be deleted.`})]})})}const mm=[{id:"customer",label:"Customer",icon:Ot,description:"Select or create customer"},{id:"machine",label:"Machine",icon:Ct,description:"Choose machine for repair"},{id:"details",label:"Problem Details",icon:Qt,description:"Describe the issue"},{id:"review",label:"Review & Submit",icon:Ar,description:"Confirm and create ticket"}];function Qee(){const t=er(),{user:r}=hr(),[n,s]=f.useState(0),[a,l]=f.useState(!1),[c,u]=f.useState(null),[d,h]=f.useState({customerType:"existing",selectedCustomer:null,newCustomer:{customer_type:"private",name:"",contact_person:"",email:"",phone:"",phone2:"",fax:"",company_name:"",vat_number:"",street_address:"",city:"",postal_code:"",owner_id:void 0,ownership_notes:""},machineType:"existing",selectedMachine:null,newMachine:{model_id:"",serial_number:"",purchase_date:"",purchased_at:"",receipt_number:"",sale_price:"",machine_condition:"new",description:"",warranty_expiry_date:""},newModel:{name:"",manufacturer:"",catalogue_number:"",warranty_months:12,category_id:"",description:""},ticketDetails:{problem_description:"",notes:"",additional_equipment:"",brought_by:"",priority:"medium"}}),[x,p]=f.useState([]),[y,v]=f.useState([]),[w,b]=f.useState([]),[N,_]=f.useState([]),[S,k]=f.useState([]),[E,A]=f.useState([]),[O,z]=f.useState(!1),[R,G]=f.useState(!1),[J,ie]=f.useState(!1),[V,xe]=f.useState(["AMS","Kamer.ba"]),[pe,re]=f.useState(""),[M,B]=f.useState(!1),[L,T]=f.useState(!1),[F,I]=f.useState(!1),[Q,W]=f.useState(!1),[ee,ye]=f.useState(!1),[he,te]=f.useState(!1),[De,ne]=f.useState(!1),[$e,ge]=f.useState(!1),[we,_e]=f.useState(!1),[Ye,ht]=f.useState(!1),[Ve,lt]=f.useState(!1),[yt,Re]=f.useState(!1),[H,Be]=f.useState(""),[st,K]=f.useState(""),[Z,ke]=f.useState("");f.useEffect(()=>{Ae()},[]),f.useEffect(()=>{d.selectedCustomer?.id&&it(d.selectedCustomer.id)},[d.selectedCustomer]),f.useEffect(()=>{if(d.newMachine.purchase_date&&d.newMachine.model_id){const P=Se(d.newMachine.purchase_date,d.newMachine.model_id);h($=>({...$,newMachine:{...$.newMachine,warranty_expiry_date:P}}))}},[d.newMachine.purchase_date,d.newMachine.model_id]);const Ae=async()=>{try{z(!0),ie(!0);const[P,$,We,vt,dt]=await Promise.all([de.getCustomers({limit:100}),de.getMachineModels({limit:100}),de.getUsers({limit:100}),de.getMachineCategories(),de.getSuppliers({limit:100})]);p(P.data||[]),b($.data||[]),A(We.data||[]),_(vt.data||[]);const kn=(dt.data||[]).map(pt=>pt.name),ce=($.data||[]).map(pt=>pt.manufacturer).filter(pt=>pt&&pt.trim()),Ze=[...new Set([...kn,...ce])];k(Ze.sort()),await je()}catch(P){console.error("Error fetching initial data:",P),u("Failed to load form data")}finally{z(!1),ie(!1)}},je=async()=>{try{const $=(await de.request("/assigned-machines/purchased-at-options")).data||[],We=[...new Set(["AMS","Kamer.ba",...$])];xe(We)}catch(P){console.error("Error fetching purchased_at options:",P),xe(["AMS","Kamer.ba"])}},He=V.filter(P=>P.toLowerCase().includes(pe.toLowerCase())),Se=(P,$)=>{if(!P||!$)return"";const We=w.find(dt=>dt.id===$);if(!We||!We.warranty_months)return"";const vt=new Date(P);return vt.setMonth(vt.getMonth()+We.warranty_months),vt.toISOString().split("T")[0]},it=async P=>{try{G(!0);const $=await de.getCustomerMachines(P);v($.data||[])}catch($){console.error("Error fetching customer machines:",$)}finally{G(!1)}},Me=()=>{n<mm.length-1&&s(n+1)},Tt=()=>{n>0&&s(n-1)},Pe=P=>{h($=>({...$,customerType:P,selectedCustomer:P==="existing"?$.selectedCustomer:null,newCustomer:P==="new"?$.newCustomer:{customer_type:"private",name:"",contact_person:"",email:"",phone:"",phone2:"",fax:"",company_name:"",vat_number:"",street_address:"",city:"",postal_code:"",owner_id:void 0,ownership_notes:""}}))},Ee=P=>{h($=>({...$,machineType:P,selectedMachine:P==="existing"?$.selectedMachine:null,newMachine:P==="new"?$.newMachine:{model_id:"",serial_number:"",purchase_date:"",purchased_at:"",receipt_number:"",sale_price:"",machine_condition:"new",description:"",warranty_expiry_date:""}}))},xt=async()=>{try{W(!0);const P={...d.newCustomer,name:d.newCustomer.customer_type==="company"?d.newCustomer.company_name:d.newCustomer.name},$=await de.createCustomer(P),We=$.data||$;if(!We||!We.id)throw new Error("Invalid customer data received from server");p(vt=>[We,...vt]),h(vt=>({...vt,selectedCustomer:We,customerType:"existing"}))}catch(P){console.error("Error creating customer:",P),u("Failed to create customer")}finally{W(!1)}},wt=async P=>{try{ne(!0);const $=P.trim(),We=N.find(zt=>{const kn=zt.name.toLowerCase().trim(),ce=$.toLowerCase().trim();return!!(kn===ce||kn.includes(ce)||ce.includes(kn))});if(We){h(zt=>({...zt,newModel:{...zt.newModel,category_id:We.id.toString()}})),lt(!1),K(""),Ne.info(`Category "${$}" is similar to existing "${We.name}" and has been selected`);return}const dt=(await de.createMachineCategory({name:$})).data;_(zt=>[...zt,dt]),h(zt=>({...zt,newModel:{...zt.newModel,category_id:dt.id.toString()}})),lt(!1),K(""),Ne.success(`Category "${$}" created successfully`)}catch($){if(console.error("Error creating category:",$),$.message&&$.message.includes("already exists")){const We=N.find(vt=>{const dt=vt.name.toLowerCase().trim(),zt=P.trim().toLowerCase();return dt.includes(zt)||zt.includes(dt)});We?Ne.error(`Category "${P.trim()}" is too similar to existing "${We.name}". Please select the existing category or use a different name.`):Ne.error(`Category "${P.trim()}" already exists. Please select it from the list.`)}else Ne.error($.message||"Failed to create category")}finally{ne(!1)}},Le=async()=>{try{te(!0);const $=(await de.createMachineModel(d.newModel)).data;b(We=>[$,...We]),h(We=>({...We,newMachine:{...We.newMachine,model_id:$.id}})),I(!1),Ne.success("Machine model created successfully")}catch(P){console.error("Error creating machine model:",P),u("Failed to create machine model"),Ne.error("Failed to create machine model")}finally{te(!1)}},ot=async()=>{try{ye(!0);const P={customer_id:parseInt(d.selectedCustomer.id),serial_number:d.newMachine.serial_number,model_id:parseInt(d.newMachine.model_id),purchase_date:d.newMachine.purchase_date,purchased_at:d.newMachine.purchased_at,receipt_number:d.newMachine.receipt_number,sale_price:d.newMachine.sale_price?parseFloat(d.newMachine.sale_price):null,machine_condition:d.newMachine.machine_condition,description:d.newMachine.description,warranty_expiry_date:d.newMachine.warranty_expiry_date,added_by_user_id:r?.id},We=(await de.createAssignedMachine(P)).data,vt={id:We.id,machine_id:We.id,customer_id:d.selectedCustomer.id,manufacturer:w.find(dt=>dt.id===d.newMachine.model_id)?.manufacturer,model_name:w.find(dt=>dt.id===d.newMachine.model_id)?.name,serial_number:d.newMachine.serial_number,purchase_date:d.newMachine.purchase_date};v(dt=>[vt,...dt]),h(dt=>({...dt,selectedMachine:vt,machineType:"existing"})),T(!1)}catch(P){console.error("Error creating machine:",P),u(P instanceof Error?P.message:"Failed to create machine")}finally{ye(!1)}},It=async()=>{try{l(!0),u(null);const P={customer_id:d.selectedCustomer.id,machine_id:parseInt(d.selectedMachine.id),problem_description:d.ticketDetails.problem_description,notes:d.ticketDetails.notes,additional_equipment:d.ticketDetails.additional_equipment,brought_by:d.ticketDetails.brought_by,priority:d.ticketDetails.priority,submitted_by:"1"},We=(await de.createRepairTicket(P)).data;Ne.success("Repair ticket created successfully"),t(`/repair-tickets/${We.id}`)}catch(P){console.error("Error creating repair ticket:",P),u("Failed to create repair ticket"),Ne.error("Failed to create repair ticket",{description:P instanceof Error?P.message:"An error occurred"})}finally{l(!1)}},Er=P=>{switch(P){case 0:return d.customerType==="existing"?!!d.selectedCustomer:d.newCustomer.customer_type==="company"?!!(d.newCustomer.company_name&&d.newCustomer.contact_person&&d.newCustomer.email):!!(d.newCustomer.name&&d.newCustomer.email);case 1:return d.machineType==="existing"?!!d.selectedMachine:!!(d.newMachine.model_id&&d.newMachine.serial_number);case 2:return!!d.ticketDetails.problem_description;case 3:return!0;default:return!1}},Yr=Er(n),Gn=Er(0)&&Er(1)&&Er(2),Qn=()=>{switch(n){case 0:return $t();case 1:return sr();case 2:return le();case 3:return Qe();default:return null}},$t=()=>e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("div",{className:"flex items-center justify-center w-16 h-16 mx-auto rounded-full bg-primary/10",children:e.jsx(Ot,{className:"w-8 h-8 text-primary"})}),e.jsx("h3",{className:"text-2xl font-semibold",children:"Select Customer"}),e.jsx("p",{className:"text-muted-foreground",children:"Choose an existing customer or create a new one"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(se,{className:ze("cursor-pointer transition-all hover:shadow-md",d.customerType==="existing"&&"ring-2 ring-primary"),onClick:()=>Pe("existing"),children:e.jsxs(ae,{className:"p-6 text-center",children:[e.jsx(Ot,{className:"w-8 h-8 mx-auto mb-3 text-muted-foreground"}),e.jsx("h4",{className:"font-semibold mb-2",children:"Existing Customer"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Select from your customer database"})]})}),e.jsx(se,{className:ze("cursor-pointer transition-all hover:shadow-md",d.customerType==="new"&&"ring-2 ring-primary"),onClick:()=>Pe("new"),children:e.jsxs(ae,{className:"p-6 text-center",children:[e.jsx(Vt,{className:"w-8 h-8 mx-auto mb-3 text-muted-foreground"}),e.jsx("h4",{className:"font-semibold mb-2",children:"New Customer"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Create a new customer profile"})]})})]}),e.jsx(Id,{}),d.customerType==="existing"?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(U,{className:"text-base font-medium",children:"Search & Select Customer"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Find and select the customer for this repair ticket"})]}),d.selectedCustomer&&e.jsx(se,{className:"bg-primary/5 border-primary/20",children:e.jsx(ae,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex items-center justify-center w-10 h-10 rounded-full bg-primary/10",children:e.jsx(Ot,{className:"w-5 h-5 text-primary"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-primary",children:d.selectedCustomer.customer_type==="company"?d.selectedCustomer.company_name:d.selectedCustomer.name}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[d.selectedCustomer.customer_type==="company"&&d.selectedCustomer.contact_person&&e.jsxs(Oe,{variant:"outline",className:"text-xs",children:[e.jsx(Ot,{className:"w-3 h-3 mr-1"}),d.selectedCustomer.contact_person]}),d.selectedCustomer.customer_type==="private"&&d.selectedCustomer.company_name&&e.jsxs(Oe,{variant:"outline",className:"text-xs",children:[e.jsx(Cs,{className:"w-3 h-3 mr-1"}),d.selectedCustomer.company_name]}),d.selectedCustomer.email&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Ci,{className:"w-3 h-3"}),d.selectedCustomer.email]})]})]}),e.jsx(q,{variant:"ghost",size:"sm",onClick:()=>h(P=>({...P,selectedCustomer:null})),className:"ml-auto",children:"Change"})]})})}),e.jsxs(dn,{open:$e,onOpenChange:ge,children:[e.jsx(un,{asChild:!0,children:e.jsxs(q,{variant:"outline",role:"combobox","aria-expanded":$e,className:"w-full justify-between h-12",children:[d.selectedCustomer?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ot,{className:"w-4 h-4"}),e.jsx("span",{children:d.selectedCustomer.customer_type==="company"?d.selectedCustomer.company_name:d.selectedCustomer.name}),d.selectedCustomer.customer_type==="company"&&d.selectedCustomer.contact_person&&e.jsx(Oe,{variant:"secondary",className:"ml-2",children:d.selectedCustomer.contact_person}),d.selectedCustomer.customer_type==="private"&&d.selectedCustomer.company_name&&e.jsx(Oe,{variant:"secondary",className:"ml-2",children:d.selectedCustomer.company_name})]}):e.jsx("span",{className:"text-muted-foreground",children:"Select customer..."}),e.jsx(cn,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),e.jsxs(sn,{className:"w-[400px] p-0",align:"start",children:[e.jsx("div",{className:"border-b p-3",children:e.jsxs("div",{className:"relative",children:[e.jsx(nr,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(be,{placeholder:"Search customers...",className:"pl-10",onChange:P=>{}})]})}),e.jsx("div",{className:"max-h-[300px] overflow-y-auto",children:O?e.jsxs("div",{className:"flex items-center justify-center py-6",children:[e.jsx(Nt,{className:"h-6 w-6 animate-spin"}),e.jsx("span",{className:"ml-2",children:"Loading customers..."})]}):x.length===0?e.jsx("div",{className:"p-4 text-center text-muted-foreground",children:"No customers found."}):e.jsx("div",{className:"p-1",children:x.filter(P=>P&&P.id).map(P=>e.jsxs("div",{onClick:()=>{h($=>({...$,selectedCustomer:P})),ge(!1)},className:ze("flex items-center gap-3 p-2 rounded-sm cursor-pointer hover:bg-accent hover:text-accent-foreground transition-colors",d.selectedCustomer?.id===P.id&&"bg-accent"),children:[e.jsx(Gr,{className:ze("h-4 w-4",d.selectedCustomer?.id===P.id?"opacity-100":"opacity-0")}),e.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-primary/10",children:e.jsx(Ot,{className:"w-4 h-4 text-primary"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium",children:P.customer_type==="company"?P.company_name:P.name}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[P.customer_type==="company"&&P.contact_person&&e.jsxs(Oe,{variant:"outline",className:"text-xs",children:[e.jsx(Ot,{className:"w-3 h-3 mr-1"}),P.contact_person]}),P.customer_type==="private"&&P.company_name&&e.jsxs(Oe,{variant:"outline",className:"text-xs",children:[e.jsx(Cs,{className:"w-3 h-3 mr-1"}),P.company_name]}),P.email&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Ci,{className:"w-3 h-3"}),P.email]})]})]})]},P.id))})})]})]})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(U,{className:"text-base font-medium",children:"Create New Customer"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Enter customer information to create a new profile"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"h-px bg-border flex-1"}),e.jsx("span",{className:"text-sm text-muted-foreground px-2",children:"Basic Information"}),e.jsx("div",{className:"h-px bg-border flex-1"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"customer_type",children:"Customer Type *"}),e.jsxs(tt,{value:d.newCustomer.customer_type,onValueChange:P=>h($=>({...$,newCustomer:{...$.newCustomer,customer_type:P}})),children:[e.jsx(Je,{children:e.jsx(rt,{placeholder:"Select customer type"})}),e.jsxs(et,{children:[e.jsx(Y,{value:"private",children:"Private Personnel"}),e.jsx(Y,{value:"company",children:"Company"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.newCustomer.customer_type==="company"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(U,{htmlFor:"customer-company-name",className:"flex items-center gap-2",children:[e.jsx(Cs,{className:"w-4 h-4"}),"Company Name *"]}),e.jsx(be,{id:"customer-company-name",value:d.newCustomer.company_name,onChange:P=>h($=>({...$,newCustomer:{...$.newCustomer,company_name:P.target.value}})),placeholder:"Enter company name",className:"h-11"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(U,{htmlFor:"customer-contact-person",className:"flex items-center gap-2",children:[e.jsx(Ot,{className:"w-4 h-4"}),"Contact Person *"]}),e.jsx(be,{id:"customer-contact-person",value:d.newCustomer.contact_person,onChange:P=>h($=>({...$,newCustomer:{...$.newCustomer,contact_person:P.target.value}})),placeholder:"Enter contact person name",className:"h-11"})]})]}):e.jsxs("div",{className:"space-y-2",children:[e.jsxs(U,{htmlFor:"customer-name",className:"flex items-center gap-2",children:[e.jsx(Ot,{className:"w-4 h-4"}),"Full Name *"]}),e.jsx(be,{id:"customer-name",value:d.newCustomer.name,onChange:P=>h($=>({...$,newCustomer:{...$.newCustomer,name:P.target.value}})),placeholder:"Enter customer name",className:"h-11"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(U,{htmlFor:"customer-email",className:"flex items-center gap-2",children:[e.jsx(Ci,{className:"w-4 h-4"}),"Email Address *"]}),e.jsx(be,{id:"customer-email",type:"email",value:d.newCustomer.email,onChange:P=>h($=>({...$,newCustomer:{...$.newCustomer,email:P.target.value}})),placeholder:"Enter email address",className:"h-11"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(U,{htmlFor:"customer-phone1",className:"flex items-center gap-2",children:[e.jsx(Mi,{className:"w-4 h-4"}),"Primary Phone"]}),e.jsx(be,{id:"customer-phone",value:d.newCustomer.phone,onChange:P=>h($=>({...$,newCustomer:{...$.newCustomer,phone:P.target.value}})),placeholder:"Enter phone number",className:"h-11"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(U,{htmlFor:"customer-phone2",className:"flex items-center gap-2",children:[e.jsx(Mi,{className:"w-4 h-4"}),"Secondary Phone"]}),e.jsx(be,{id:"customer-phone2",value:d.newCustomer.phone2,onChange:P=>h($=>({...$,newCustomer:{...$.newCustomer,phone2:P.target.value}})),placeholder:"Enter secondary phone number",className:"h-11"})]}),d.newCustomer.customer_type==="private"&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs(U,{htmlFor:"customer-company",className:"flex items-center gap-2",children:[e.jsx(Cs,{className:"w-4 h-4"}),"Company Name"]}),e.jsx(be,{id:"customer-company",value:d.newCustomer.company_name,onChange:P=>h($=>({...$,newCustomer:{...$.newCustomer,company_name:P.target.value}})),placeholder:"Enter company name (optional)",className:"h-11"})]}),d.newCustomer.customer_type==="company"&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs(U,{htmlFor:"customer-vat",className:"flex items-center gap-2",children:[e.jsx(Qa,{className:"w-4 h-4"}),"VAT Number"]}),e.jsx(be,{id:"customer-vat",value:d.newCustomer.vat_number,onChange:P=>h($=>({...$,newCustomer:{...$.newCustomer,vat_number:P.target.value}})),placeholder:"Enter VAT number",className:"h-11"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"h-px bg-border flex-1"}),e.jsx("span",{className:"text-sm text-muted-foreground px-2",children:"Address Information"}),e.jsx("div",{className:"h-px bg-border flex-1"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(U,{htmlFor:"customer-street",className:"flex items-center gap-2",children:[e.jsx(dl,{className:"w-4 h-4"}),"Street Address"]}),e.jsx(be,{id:"customer-street",value:d.newCustomer.street_address,onChange:P=>h($=>({...$,newCustomer:{...$.newCustomer,street_address:P.target.value}})),placeholder:"Enter street address",className:"h-11"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(U,{htmlFor:"customer-city",className:"flex items-center gap-2",children:[e.jsx(dl,{className:"w-4 h-4"}),"City"]}),e.jsx(be,{id:"customer-city",value:d.newCustomer.city,onChange:P=>h($=>({...$,newCustomer:{...$.newCustomer,city:P.target.value}})),placeholder:"Enter city",className:"h-11"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(U,{htmlFor:"customer-postal",className:"flex items-center gap-2",children:[e.jsx(Qa,{className:"w-4 h-4"}),"Postal Code"]}),e.jsx(be,{id:"customer-postal",value:d.newCustomer.postal_code,onChange:P=>h($=>({...$,newCustomer:{...$.newCustomer,postal_code:P.target.value}})),placeholder:"Enter postal code",className:"h-11"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(U,{htmlFor:"customer-fax",className:"flex items-center gap-2",children:[e.jsx($a,{className:"w-4 h-4"}),"Fax Number"]}),e.jsx(be,{id:"customer-fax",value:d.newCustomer.fax,onChange:P=>h($=>({...$,newCustomer:{...$.newCustomer,fax:P.target.value}})),placeholder:"Enter fax number",className:"h-11"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"h-px bg-border flex-1"}),e.jsx("span",{className:"text-sm text-muted-foreground px-2",children:"Additional Information"}),e.jsx("div",{className:"h-px bg-border flex-1"})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(U,{htmlFor:"customer-owner",className:"flex items-center gap-2",children:[e.jsx(Ot,{className:"w-4 h-4"}),"Owner/Assigned To"]}),e.jsxs(tt,{value:d.newCustomer.owner_id||"",onValueChange:P=>h($=>({...$,newCustomer:{...$.newCustomer,owner_id:P||void 0}})),children:[e.jsx(Je,{className:"h-11",children:e.jsx(rt,{placeholder:"Select a user..."})}),e.jsx(et,{children:E.map(P=>e.jsx(Y,{value:P.id.toString(),children:P.name||P.email||`User ${P.id}`},P.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(U,{htmlFor:"customer-notes",className:"flex items-center gap-2",children:[e.jsx(Qt,{className:"w-4 h-4"}),"Ownership Notes"]}),e.jsx(ar,{id:"customer-notes",value:d.newCustomer.ownership_notes,onChange:P=>h($=>({...$,newCustomer:{...$.newCustomer,ownership_notes:P.target.value}})),placeholder:"Additional notes about customer ownership or assignment",rows:3,className:"resize-none"})]})]})]}),e.jsx(q,{className:"w-full h-12",onClick:xt,disabled:Q||(d.newCustomer.customer_type==="company"?!d.newCustomer.company_name||!d.newCustomer.contact_person||!d.newCustomer.email:!d.newCustomer.name||!d.newCustomer.email),children:Q?e.jsxs(e.Fragment,{children:[e.jsx(Nt,{className:"mr-2 h-4 w-4 animate-spin"}),"Creating Customer..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Vt,{className:"mr-2 h-4 w-4"}),"Create Customer & Continue"]})})]})]}),sr=()=>e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("div",{className:"flex items-center justify-center w-16 h-16 mx-auto rounded-full bg-primary/10",children:e.jsx(Ct,{className:"w-8 h-8 text-primary"})}),e.jsx("h3",{className:"text-2xl font-semibold",children:"Select Machine"}),e.jsx("p",{className:"text-muted-foreground",children:"Choose the machine that needs repair"})]}),d.selectedCustomer&&e.jsx(se,{className:"bg-muted/50",children:e.jsx(ae,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ot,{className:"w-5 h-5 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:d.selectedCustomer.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[d.selectedCustomer.company_name&&`${d.selectedCustomer.company_name} • `,d.selectedCustomer.email]})]})]})})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(se,{className:ze("cursor-pointer transition-all hover:shadow-md",d.machineType==="existing"&&"ring-2 ring-primary"),onClick:()=>Ee("existing"),children:e.jsxs(ae,{className:"p-6 text-center",children:[e.jsx(Ct,{className:"w-8 h-8 mx-auto mb-3 text-muted-foreground"}),e.jsx("h4",{className:"font-semibold mb-2",children:"Existing Machine"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Select from customer's machines"})]})}),e.jsx(se,{className:ze("cursor-pointer transition-all hover:shadow-md",d.machineType==="new"&&"ring-2 ring-primary"),onClick:()=>Ee("new"),children:e.jsxs(ae,{className:"p-6 text-center",children:[e.jsx(Vt,{className:"w-8 h-8 mx-auto mb-3 text-muted-foreground"}),e.jsx("h4",{className:"font-semibold mb-2",children:"New Machine"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Add a new machine to customer"})]})})]}),e.jsx(Id,{}),d.machineType==="existing"?e.jsx("div",{className:"space-y-4",children:d.selectedCustomer?e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx(U,{className:"text-base font-medium",children:"Select Machine"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Choose the machine that needs repair"})]}),d.selectedMachine&&e.jsx(se,{className:"bg-primary/5 border-primary/20",children:e.jsx(ae,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex items-center justify-center w-10 h-10 rounded-full bg-primary/10",children:e.jsx(Ct,{className:"w-5 h-5 text-primary"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-primary",children:d.selectedMachine.model_name||"Unknown Model"}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[d.selectedMachine.serial_number&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Qa,{className:"w-3 h-3"}),d.selectedMachine.serial_number]}),d.selectedMachine.manufacturer&&e.jsx(Oe,{variant:"outline",className:"text-xs",children:d.selectedMachine.manufacturer})]})]}),e.jsx(q,{variant:"ghost",size:"sm",onClick:()=>h(P=>({...P,selectedMachine:null})),className:"ml-auto",children:"Change"})]})})}),e.jsxs(dn,{open:we,onOpenChange:_e,children:[e.jsx(un,{asChild:!0,children:e.jsxs(q,{variant:"outline",role:"combobox","aria-expanded":we,className:"w-full justify-between h-12",disabled:!d.selectedCustomer,children:[d.selectedMachine?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ct,{className:"w-4 h-4"}),e.jsx("span",{children:d.selectedMachine.model_name||"Unknown Model"}),d.selectedMachine.serial_number&&e.jsx(Oe,{variant:"secondary",className:"ml-2",children:d.selectedMachine.serial_number})]}):e.jsx("span",{className:"text-muted-foreground",children:d.selectedCustomer?"Select machine...":"Select customer first"}),e.jsx(cn,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),e.jsxs(sn,{className:"w-[400px] p-0",align:"start",children:[e.jsx("div",{className:"border-b p-3",children:e.jsxs("div",{className:"relative",children:[e.jsx(nr,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(be,{placeholder:"Search machines by name or serial...",className:"pl-10",value:H,onChange:P=>Be(P.target.value)})]})}),e.jsx("div",{className:"max-h-[300px] overflow-y-auto",children:R?e.jsxs("div",{className:"flex items-center justify-center py-6",children:[e.jsx(Nt,{className:"h-6 w-6 animate-spin"}),e.jsx("span",{className:"ml-2",children:"Loading machines..."})]}):y.length===0?e.jsxs("div",{className:"p-4 text-center",children:[e.jsx(Jt,{className:"w-8 h-8 mx-auto mb-2 text-muted-foreground"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"No machines found for this customer."}),e.jsxs(q,{variant:"outline",size:"sm",onClick:()=>{_e(!1),Ee("new")},children:[e.jsx(Vt,{className:"mr-2 h-4 w-4"}),"Add New Machine"]})]}):(()=>{const P=y.filter($=>{if(!H)return!0;const We=H.toLowerCase();return $.model_name&&$.model_name.toLowerCase().includes(We)||$.serial_number&&$.serial_number.toLowerCase().includes(We)||$.manufacturer&&$.manufacturer.toLowerCase().includes(We)});return P.length===0?e.jsx("div",{className:"p-4 text-center text-muted-foreground",children:"No machines match your search."}):e.jsx("div",{className:"p-1",children:P.map($=>e.jsxs("div",{onClick:()=>{h(We=>({...We,selectedMachine:$})),_e(!1)},className:ze("flex items-center gap-3 p-2 rounded-sm cursor-pointer hover:bg-accent hover:text-accent-foreground transition-colors",d.selectedMachine?.id===$.id&&"bg-accent"),children:[e.jsx(Gr,{className:ze("h-4 w-4",d.selectedMachine?.id===$.id?"opacity-100":"opacity-0")}),e.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-primary/10",children:e.jsx(Ct,{className:"w-4 h-4 text-primary"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium",children:$.model_name||"Unknown Model"}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[$.serial_number&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Qa,{className:"w-3 h-3"}),$.serial_number]}),$.manufacturer&&e.jsx(Oe,{variant:"outline",className:"text-xs",children:$.manufacturer})]}),$.purchase_date&&e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Purchased: ",jt($.purchase_date)]})]})]},$.id))})})()})]})]})]}):e.jsxs(On,{children:[e.jsx(vr,{className:"h-4 w-4"}),e.jsx(Bn,{children:"No Customer Selected"}),e.jsx(Pn,{children:"Please select a customer first to view their machines."})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(U,{className:"text-base font-medium",children:"Add New Machine"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Enter the machine details below"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(U,{htmlFor:"machine-model",className:"flex items-center gap-2",children:[e.jsx(Jt,{className:"w-4 h-4"}),"Machine Model *"]}),e.jsxs(dn,{open:Ye,onOpenChange:ht,children:[e.jsx(un,{asChild:!0,children:e.jsxs(q,{variant:"outline",role:"combobox","aria-expanded":Ye,className:"w-full justify-between h-11",children:[d.newMachine.model_id&&w.find(P=>P.id===d.newMachine.model_id)?.name||"Select model...",e.jsx(cn,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),e.jsxs(sn,{className:"w-[400px] p-0",align:"start",children:[e.jsx("div",{className:"border-b p-3",children:e.jsxs("div",{className:"relative",children:[e.jsx(nr,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(be,{placeholder:"Search models...",className:"pl-10",onChange:P=>{}})]})}),e.jsx("div",{className:"max-h-[300px] overflow-y-auto",children:J?e.jsxs("div",{className:"flex items-center justify-center py-6",children:[e.jsx(Nt,{className:"h-6 w-6 animate-spin"}),e.jsx("span",{className:"ml-2",children:"Loading models..."})]}):w.length===0?e.jsx("div",{className:"p-4 text-center text-muted-foreground",children:"No models found."}):e.jsx("div",{className:"p-1",children:w.map(P=>e.jsxs("div",{onClick:()=>{h($=>({...$,newMachine:{...$.newMachine,model_id:P.id}})),ht(!1)},className:ze("flex items-center gap-3 p-2 rounded-sm cursor-pointer hover:bg-accent hover:text-accent-foreground transition-colors",d.newMachine.model_id===P.id&&"bg-accent"),children:[e.jsx(Gr,{className:ze("h-4 w-4",d.newMachine.model_id===P.id?"opacity-100":"opacity-0")}),e.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-primary/10",children:e.jsx(Jt,{className:"w-4 h-4 text-primary"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium",children:P.name}),P.manufacturer&&e.jsx("p",{className:"text-sm text-muted-foreground",children:P.manufacturer})]})]},P.id))})})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(U,{htmlFor:"serial-number",className:"flex items-center gap-2",children:[e.jsx(Qa,{className:"w-4 h-4"}),"Serial Number *"]}),e.jsx(be,{id:"serial-number",value:d.newMachine.serial_number,onChange:P=>h($=>({...$,newMachine:{...$.newMachine,serial_number:P.target.value}})),placeholder:"Enter serial number",className:"h-11"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(U,{htmlFor:"purchase-date",className:"flex items-center gap-2",children:[e.jsx(is,{className:"w-4 h-4"}),"Purchase Date"]}),e.jsx(Rn,{value:d.newMachine.purchase_date,onChange:P=>h($=>({...$,newMachine:{...$.newMachine,purchase_date:P}})),placeholder:"Select purchase date"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(U,{htmlFor:"purchased-at",className:"flex items-center gap-2",children:[e.jsx(Cs,{className:"w-4 h-4"}),"Purchased At"]}),e.jsxs(dn,{open:M,onOpenChange:B,children:[e.jsx(un,{asChild:!0,children:e.jsxs(q,{variant:"outline",role:"combobox","aria-expanded":M,className:"w-full justify-between h-11",children:[d.newMachine.purchased_at||"Select where purchased...",e.jsx(cn,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),e.jsxs(sn,{className:"w-[400px] p-0",align:"start",children:[e.jsx("div",{className:"border-b p-3",children:e.jsxs("div",{className:"relative",children:[e.jsx(nr,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(be,{placeholder:"Search or type new shop name...",className:"pl-10",value:pe,onChange:P=>re(P.target.value)})]})}),e.jsxs("div",{className:"max-h-[300px] overflow-y-auto",children:[pe&&!He.includes(pe)&&e.jsx("div",{className:"p-1 border-b",children:e.jsxs("div",{onClick:()=>{h(P=>({...P,newMachine:{...P.newMachine,purchased_at:pe}})),B(!1)},className:"flex items-center gap-3 p-2 rounded-sm cursor-pointer hover:bg-accent hover:text-accent-foreground transition-colors",children:[e.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-green-100",children:e.jsx("span",{className:"text-green-600 text-sm font-bold",children:"+"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("p",{className:"font-medium",children:['Add "',pe,'"']}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Create new shop"})]})]})}),He.length===0?e.jsx("div",{className:"p-4 text-center text-muted-foreground",children:"No options found."}):e.jsx("div",{className:"p-1",children:He.map(P=>e.jsxs("div",{onClick:()=>{h($=>({...$,newMachine:{...$.newMachine,purchased_at:P}})),B(!1)},className:ze("flex items-center gap-3 p-2 rounded-sm cursor-pointer hover:bg-accent hover:text-accent-foreground transition-colors",d.newMachine.purchased_at===P&&"bg-accent"),children:[e.jsx(Gr,{className:ze("h-4 w-4",d.newMachine.purchased_at===P?"opacity-100":"opacity-0")}),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"font-medium",children:P})})]},P))})]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(U,{htmlFor:"receipt-number",className:"flex items-center gap-2",children:[e.jsx(hP,{className:"w-4 h-4"}),"Receipt Number"]}),e.jsx(be,{id:"receipt-number",value:d.newMachine.receipt_number,onChange:P=>h($=>({...$,newMachine:{...$.newMachine,receipt_number:P.target.value}})),placeholder:"Enter receipt number",className:"h-11"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(U,{htmlFor:"sale-price",className:"flex items-center gap-2",children:[e.jsx(Xm,{className:"w-4 h-4"}),"Sale Price"]}),e.jsx(be,{id:"sale-price",type:"number",step:"0.01",value:d.newMachine.sale_price,onChange:P=>h($=>({...$,newMachine:{...$.newMachine,sale_price:P.target.value}})),placeholder:"Enter sale price",className:"h-11"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(U,{htmlFor:"machine-condition",className:"flex items-center gap-2",children:[e.jsx(Jt,{className:"w-4 h-4"}),"Machine Condition"]}),e.jsxs(tt,{value:d.newMachine.machine_condition,onValueChange:P=>h($=>({...$,newMachine:{...$.newMachine,machine_condition:P}})),children:[e.jsx(Je,{className:"h-11",children:e.jsx(rt,{placeholder:"Select condition..."})}),e.jsxs(et,{children:[e.jsx(Y,{value:"new",children:"New"}),e.jsx(Y,{value:"used",children:"Used"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(U,{htmlFor:"warranty-expiry",className:"flex items-center gap-2",children:[e.jsx(is,{className:"w-4 h-4"}),"Warranty Expiry Date"]}),e.jsx(Rn,{value:d.newMachine.warranty_expiry_date,onChange:P=>h($=>({...$,newMachine:{...$.newMachine,warranty_expiry_date:P}})),placeholder:"Select warranty expiry date"})]}),e.jsxs("div",{className:"space-y-2 md:col-span-2",children:[e.jsxs(U,{htmlFor:"description",className:"flex items-center gap-2",children:[e.jsx(Qt,{className:"w-4 h-4"}),"Description"]}),e.jsx(ar,{id:"description",value:d.newMachine.description,onChange:P=>h($=>({...$,newMachine:{...$.newMachine,description:P.target.value}})),placeholder:"Enter machine description or notes...",className:"min-h-[80px]"})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(Ft,{open:F,onOpenChange:I,children:[e.jsx(yc,{asChild:!0,children:e.jsxs(q,{variant:"outline",className:"flex-1",children:[e.jsx(Vt,{className:"mr-2 h-4 w-4"}),"Create New Model"]})}),e.jsxs(Rt,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(qt,{children:[e.jsxs(Lt,{className:"flex items-center gap-2",children:[e.jsx(Jt,{className:"w-5 h-5"}),"Create New Machine Model"]}),e.jsx(Ut,{children:"Add a new machine model to the database."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"model-name",children:"Model Name *"}),e.jsx(be,{id:"model-name",value:d.newModel.name,onChange:P=>h($=>({...$,newModel:{...$.newModel,name:P.target.value}})),placeholder:"Enter model name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"model-manufacturer",children:"Manufacturer *"}),e.jsxs(dn,{open:yt,onOpenChange:Re,children:[e.jsx(un,{asChild:!0,children:e.jsxs(q,{variant:"outline",role:"combobox","aria-expanded":yt,className:"w-full justify-between h-11",children:[d.newModel.manufacturer||"Select manufacturer...",e.jsx(cn,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),e.jsxs(sn,{className:"w-[400px] p-0",align:"start",children:[e.jsx("div",{className:"border-b p-3",children:e.jsxs("div",{className:"relative",children:[e.jsx(nr,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(be,{placeholder:"Search or type new manufacturer...",className:"pl-10",value:Z,onChange:P=>ke(P.target.value)})]})}),e.jsxs("div",{className:"max-h-[300px] overflow-y-auto",children:[Z&&!S.some(P=>P.toLowerCase()===Z.toLowerCase())&&e.jsx("div",{className:"p-1 border-b",children:e.jsxs("div",{onClick:()=>{h(P=>({...P,newModel:{...P.newModel,manufacturer:Z}})),Re(!1),ke("")},className:"flex items-center gap-3 p-2 rounded-sm cursor-pointer hover:bg-accent hover:text-accent-foreground transition-colors",children:[e.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-green-100",children:e.jsx("span",{className:"text-green-600 text-sm font-bold",children:"+"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("p",{className:"font-medium",children:['Add "',Z,'"']}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Create new manufacturer"})]})]})}),S.filter(P=>Z===""||P.toLowerCase().includes(Z.toLowerCase())).length===0?e.jsx("div",{className:"p-4 text-center text-muted-foreground",children:"No manufacturers found."}):e.jsx("div",{className:"p-1",children:S.filter(P=>Z===""||P.toLowerCase().includes(Z.toLowerCase())).map(P=>e.jsxs("div",{onClick:()=>{h($=>({...$,newModel:{...$.newModel,manufacturer:P}})),Re(!1),ke("")},className:ze("flex items-center gap-3 p-2 rounded-sm cursor-pointer hover:bg-accent hover:text-accent-foreground transition-colors",d.newModel.manufacturer===P&&"bg-accent"),children:[e.jsx(Gr,{className:ze("h-4 w-4",d.newModel.manufacturer===P?"opacity-100":"opacity-0")}),e.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-orange-100",children:e.jsx(Cs,{className:"w-4 h-4 text-orange-600"})}),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"font-medium",children:P})})]},P))})]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"model-catalogue-number",children:"Catalogue Number"}),e.jsx(be,{id:"model-catalogue-number",value:d.newModel.catalogue_number,onChange:P=>h($=>({...$,newModel:{...$.newModel,catalogue_number:P.target.value}})),placeholder:"Enter catalogue number"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"model-warranty-months",children:"Warranty (months)"}),e.jsx(be,{id:"model-warranty-months",type:"number",min:"0",max:"120",value:d.newModel.warranty_months,onChange:P=>h($=>({...$,newModel:{...$.newModel,warranty_months:parseInt(P.target.value)||12}})),placeholder:"12"})]}),e.jsxs("div",{className:"space-y-2 col-span-2",children:[e.jsx(U,{htmlFor:"model-category",children:"Category"}),e.jsxs(dn,{open:Ve,onOpenChange:lt,children:[e.jsx(un,{asChild:!0,children:e.jsxs(q,{variant:"outline",role:"combobox","aria-expanded":Ve,className:"w-full justify-between h-11",children:[d.newModel.category_id?N.find(P=>P.id.toString()===d.newModel.category_id)?.name:"Select category (optional)",e.jsx(cn,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),e.jsxs(sn,{className:"w-[400px] p-0",align:"start",children:[e.jsx("div",{className:"border-b p-3",children:e.jsxs("div",{className:"relative",children:[e.jsx(nr,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(be,{placeholder:"Search categories...",className:"pl-10",value:st,onChange:P=>K(P.target.value)})]})}),e.jsxs("div",{className:"max-h-[300px] overflow-y-auto p-1",children:[e.jsxs("div",{onClick:()=>{h(P=>({...P,newModel:{...P.newModel,category_id:""}})),lt(!1),K("")},className:"flex items-center gap-3 p-2 rounded-sm cursor-pointer hover:bg-accent hover:text-accent-foreground transition-colors",children:[e.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-gray-100",children:e.jsx("span",{className:"text-gray-600 text-sm",children:"-"})}),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"font-medium",children:"No category"})})]}),st&&!N.some(P=>{const $=P.name.toLowerCase().trim(),We=st.trim().toLowerCase();return $===We||$.includes(We)||We.includes($)})&&e.jsx("div",{className:"p-1 border-b",children:e.jsxs("div",{onClick:()=>wt(st),className:"flex items-center gap-3 p-2 rounded-sm cursor-pointer hover:bg-accent hover:text-accent-foreground transition-colors",children:[e.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-green-100",children:De?e.jsx(Nt,{className:"h-4 w-4 text-green-600 animate-spin"}):e.jsx("span",{className:"text-green-600 text-sm font-bold",children:"+"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("p",{className:"font-medium",children:['Create "',st,'"']}),e.jsx("p",{className:"text-sm text-muted-foreground",children:De?"Creating category...":"Add new category"})]})]})}),N.filter(P=>st===""||P.name.toLowerCase().includes(st.toLowerCase())).map(P=>e.jsxs("div",{onClick:()=>{h($=>({...$,newModel:{...$.newModel,category_id:P.id.toString()}})),lt(!1),K("")},className:ze("flex items-center gap-3 p-2 rounded-sm cursor-pointer hover:bg-accent hover:text-accent-foreground transition-colors",d.newModel.category_id===P.id.toString()&&"bg-accent"),children:[e.jsx(Gr,{className:ze("h-4 w-4",d.newModel.category_id===P.id.toString()?"opacity-100":"opacity-0")}),e.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-primary/10",children:e.jsx(Jt,{className:"w-4 h-4 text-primary"})}),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"font-medium",children:P.name})})]},P.id))]})]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"model-description",children:"Description"}),e.jsx(ar,{id:"model-description",value:d.newModel.description,onChange:P=>h($=>({...$,newModel:{...$.newModel,description:P.target.value}})),placeholder:"Enter machine model description...",rows:3,className:"resize-none"})]})]}),e.jsxs(Dr,{children:[e.jsx(q,{variant:"outline",onClick:()=>I(!1),children:"Cancel"}),e.jsxs(q,{onClick:Le,disabled:he||!d.newModel.name||!d.newModel.manufacturer,children:[he&&e.jsx(Nt,{className:"mr-2 h-4 w-4 animate-spin"}),"Create Model"]})]})]})]}),e.jsxs(Ft,{open:L,onOpenChange:T,children:[e.jsx(yc,{asChild:!0,children:e.jsxs(q,{className:"flex-1",disabled:!d.newMachine.model_id||!d.newMachine.serial_number,children:[e.jsx(Vt,{className:"mr-2 h-4 w-4"}),"Add Machine"]})}),e.jsxs(Rt,{children:[e.jsxs(qt,{children:[e.jsxs(Lt,{className:"flex items-center gap-2",children:[e.jsx(Ct,{className:"w-5 h-5"}),"Add New Machine"]}),e.jsx(Ut,{children:"Add this machine to the customer's profile."})]}),e.jsx("div",{className:"space-y-4",children:e.jsx(se,{children:e.jsxs(ae,{className:"p-4",children:[e.jsx("h4",{className:"font-medium mb-3",children:"Machine Details"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Model:"}),e.jsx("span",{children:w.find(P=>P.id===d.newMachine.model_id)?.name})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Serial:"}),e.jsx("span",{children:d.newMachine.serial_number})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Customer:"}),e.jsx("span",{children:d.selectedCustomer?.name})]}),d.newMachine.purchase_date&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Purchase Date:"}),e.jsx("span",{children:jt(d.newMachine.purchase_date)})]})]})]})})}),e.jsxs(Dr,{children:[e.jsx(q,{variant:"outline",onClick:()=>T(!1),children:"Cancel"}),e.jsxs(q,{onClick:ot,disabled:ee,children:[ee&&e.jsx(Nt,{className:"mr-2 h-4 w-4 animate-spin"}),"Add Machine"]})]})]})]})]})]})]}),le=()=>e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("div",{className:"flex items-center justify-center w-16 h-16 mx-auto rounded-full bg-primary/10",children:e.jsx(Qt,{className:"w-8 h-8 text-primary"})}),e.jsx("h3",{className:"text-2xl font-semibold",children:"Problem Details"}),e.jsx("p",{className:"text-muted-foreground",children:"Describe the issue and provide additional information"})]}),d.selectedMachine&&e.jsx(se,{className:"bg-muted/50",children:e.jsx(ae,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ct,{className:"w-5 h-5 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:d.selectedMachine.model_name||"Unknown Model"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[d.selectedMachine.manufacturer&&`${d.selectedMachine.manufacturer} • `,"Serial: ",d.selectedMachine.serial_number||"N/A"]})]})]})})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(U,{htmlFor:"problem-description",className:"flex items-center gap-2 text-base font-medium",children:[e.jsx(vr,{className:"w-4 h-4"}),"Problem Description *"]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"Provide a detailed description of the issue or problem with the machine"}),e.jsx(ar,{id:"problem-description",value:d.ticketDetails.problem_description,onChange:P=>h($=>({...$,ticketDetails:{...$.ticketDetails,problem_description:P.target.value}})),placeholder:"Describe the problem in detail... What symptoms are you experiencing? When did the issue start? Any error messages?",rows:5,className:"resize-none"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(U,{htmlFor:"brought-by",className:"flex items-center gap-2",children:[e.jsx(Ot,{className:"w-4 h-4"}),"Brought By"]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"Who brought the machine for service?"}),e.jsx(be,{id:"brought-by",value:d.ticketDetails.brought_by,onChange:P=>h($=>({...$,ticketDetails:{...$.ticketDetails,brought_by:P.target.value}})),placeholder:"Enter name or contact person",className:"h-11"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(U,{htmlFor:"priority",className:"flex items-center gap-2",children:[e.jsx(vr,{className:"w-4 h-4"}),"Priority"]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"How urgent is this repair request?"}),e.jsxs(tt,{value:d.ticketDetails.priority,onValueChange:P=>h($=>({...$,ticketDetails:{...$.ticketDetails,priority:P}})),children:[e.jsx(Je,{className:"h-11",children:e.jsx(rt,{})}),e.jsxs(et,{children:[e.jsx(Y,{value:"low",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Oe,{variant:"outline",className:"bg-green-50 text-green-700 border-green-200",children:"Low"}),e.jsx("span",{children:"Low Priority"})]})}),e.jsx(Y,{value:"medium",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Oe,{variant:"outline",className:"bg-yellow-50 text-yellow-700 border-yellow-200",children:"Medium"}),e.jsx("span",{children:"Medium Priority"})]})}),e.jsx(Y,{value:"high",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Oe,{variant:"outline",className:"bg-red-50 text-red-700 border-red-200",children:"High"}),e.jsx("span",{children:"High Priority"})]})})]})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs(U,{htmlFor:"additional-equipment",className:"flex items-center gap-2",children:[e.jsx(Jt,{className:"w-4 h-4"}),"Additional Equipment"]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"Any additional items brought with the machine?"}),e.jsx(ar,{id:"additional-equipment",value:d.ticketDetails.additional_equipment,onChange:P=>h($=>({...$,ticketDetails:{...$.ticketDetails,additional_equipment:P.target.value}})),placeholder:"List any cables, accessories, or other items...",rows:3,className:"resize-none"})]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(U,{htmlFor:"notes",className:"flex items-center gap-2",children:[e.jsx(Qt,{className:"w-4 h-4"}),"Additional Notes"]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"Any additional information, special instructions, or observations"}),e.jsx(ar,{id:"notes",value:d.ticketDetails.notes,onChange:P=>h($=>({...$,ticketDetails:{...$.ticketDetails,notes:P.target.value}})),placeholder:"Any special instructions, previous repair history, or other relevant information...",rows:4,className:"resize-none"})]})]})]}),Qe=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{children:e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Review & Submit"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs(se,{children:[e.jsx(ue,{children:e.jsxs(fe,{className:"flex items-center gap-2",children:[e.jsx(Ot,{className:"h-5 w-5"}),"Customer Information"]})}),e.jsx(ae,{children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Name"}),e.jsx("p",{children:d.selectedCustomer?.name})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Email"}),e.jsx("p",{children:d.selectedCustomer?.email||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Phone"}),e.jsx("p",{children:d.selectedCustomer?.phone1||d.selectedCustomer?.phone||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Company"}),e.jsx("p",{children:d.selectedCustomer?.company_name||"N/A"})]})]})})]}),e.jsxs(se,{children:[e.jsx(ue,{children:e.jsxs(fe,{className:"flex items-center gap-2",children:[e.jsx(Ct,{className:"h-5 w-5"}),"Machine Information"]})}),e.jsx(ae,{children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Model"}),e.jsx("p",{children:d.selectedMachine?.model_name||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Manufacturer"}),e.jsx("p",{children:d.selectedMachine?.manufacturer||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Serial Number"}),e.jsx("p",{children:d.selectedMachine?.serial_number||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Purchase Date"}),e.jsx("p",{children:d.selectedMachine?.purchase_date?jt(d.selectedMachine.purchase_date):"N/A"})]}),d.machineType==="new"&&d.newMachine.purchased_at&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Purchased At"}),e.jsx("p",{children:d.newMachine.purchased_at})]}),d.machineType==="new"&&d.newMachine.sale_price&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Sale Price"}),e.jsxs("p",{children:[d.newMachine.sale_price," KM"]})]}),d.machineType==="new"&&d.newMachine.machine_condition&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Condition"}),e.jsx("p",{className:"capitalize",children:d.newMachine.machine_condition})]}),d.machineType==="new"&&d.newMachine.warranty_expiry_date&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Warranty Expiry"}),e.jsx("p",{children:jt(d.newMachine.warranty_expiry_date)})]}),d.machineType==="new"&&d.newMachine.receipt_number&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Receipt Number"}),e.jsx("p",{children:d.newMachine.receipt_number})]}),d.machineType==="new"&&d.newMachine.description&&e.jsxs("div",{className:"col-span-2",children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Description"}),e.jsx("p",{className:"whitespace-pre-wrap",children:d.newMachine.description})]})]})})]}),e.jsxs(se,{children:[e.jsx(ue,{children:e.jsxs(fe,{className:"flex items-center gap-2",children:[e.jsx(Qt,{className:"h-5 w-5"}),"Problem Details"]})}),e.jsx(ae,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Problem Description"}),e.jsx("p",{className:"whitespace-pre-wrap",children:d.ticketDetails.problem_description})]}),d.ticketDetails.notes&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Notes"}),e.jsx("p",{className:"whitespace-pre-wrap",children:d.ticketDetails.notes})]}),d.ticketDetails.additional_equipment&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Additional Equipment"}),e.jsx("p",{className:"whitespace-pre-wrap",children:d.ticketDetails.additional_equipment})]}),d.ticketDetails.brought_by&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Brought By"}),e.jsx("p",{children:d.ticketDetails.brought_by})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Priority"}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(Oe,{variant:"outline",className:d.ticketDetails.priority==="high"?"bg-red-50 text-red-700 border-red-200":d.ticketDetails.priority==="medium"?"bg-yellow-50 text-yellow-700 border-yellow-200":"bg-green-50 text-green-700 border-green-200",children:d.ticketDetails.priority.charAt(0).toUpperCase()+d.ticketDetails.priority.slice(1)})})]})]})})]})]})]});return e.jsx(gt,{children:e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(q,{variant:"ghost",onClick:()=>t(-1),className:"mr-2",children:e.jsx(Cn,{className:"h-4 w-4"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Create Repair Ticket"}),e.jsx("p",{className:"text-muted-foreground",children:"Create a new repair ticket for customer service"})]})]})}),c&&e.jsxs(On,{variant:"destructive",children:[e.jsx(vr,{className:"h-4 w-4"}),e.jsx(Bn,{children:"Error"}),e.jsx(Pn,{children:c})]}),e.jsx(se,{children:e.jsx(ae,{className:"pt-6",children:e.jsx("div",{className:"flex items-center justify-between",children:mm.map((P,$)=>{const We=P.icon,vt=$===n,dt=$<n,zt=$<=n||dt;return e.jsxs("div",{className:"flex items-center flex-1",children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:`flex items-center justify-center w-12 h-12 rounded-full border-2 transition-all ${vt?"border-primary bg-primary text-primary-foreground shadow-lg scale-110":dt?"border-green-500 bg-green-500 text-white":zt?"border-muted-foreground bg-background text-muted-foreground hover:border-primary/50":"border-muted bg-muted text-muted-foreground"}`,children:dt?e.jsx(Ar,{className:"h-6 w-6"}):e.jsx(We,{className:"h-6 w-6"})}),e.jsxs("div",{className:"mt-3 text-center",children:[e.jsx("p",{className:`text-sm font-medium ${vt?"text-primary":dt?"text-green-600":"text-muted-foreground"}`,children:P.label}),e.jsx("p",{className:`text-xs mt-1 ${vt?"text-primary/70":"text-muted-foreground"}`,children:P.description})]})]}),$<mm.length-1&&e.jsx("div",{className:`flex-1 h-0.5 mx-6 ${dt?"bg-green-500":"bg-muted"}`})]},P.id)})})})}),e.jsx(se,{children:e.jsx(ae,{className:"pt-6",children:Qn()})}),e.jsxs("div",{className:"flex items-center justify-between pt-6 border-t",children:[e.jsxs(q,{variant:"outline",onClick:Tt,disabled:n===0,className:"h-12 px-6",children:[e.jsx(Cn,{className:"mr-2 h-4 w-4"}),"Previous"]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Step ",n+1," of ",mm.length]}),n===mm.length-1?e.jsxs(q,{onClick:It,disabled:!Gn||a,className:"h-12 px-8",size:"lg",children:[a&&e.jsx(Nt,{className:"mr-2 h-4 w-4 animate-spin"}),e.jsx(Ar,{className:"mr-2 h-4 w-4"}),"Create Repair Ticket"]}):e.jsxs(q,{onClick:Me,disabled:!Yr,className:"h-12 px-8",size:"lg",children:["Next",e.jsx(Am,{className:"ml-2 h-4 w-4"})]})]})]})]})})}const hm=[{id:"customer",label:"Customer",icon:Ot,description:"Select or create customer"},{id:"machine",label:"Machine",icon:Ct,description:"Choose machine for warranty repair"},{id:"details",label:"Problem Details",icon:Qt,description:"Describe the warranty issue"},{id:"review",label:"Review & Submit",icon:Ar,description:"Confirm and create warranty ticket"}];function Xee(){const t=er(),{user:r}=hr(),[n,s]=f.useState(0),[a,l]=f.useState(!1),[c,u]=f.useState(null),[d,h]=f.useState({customerType:"existing",selectedCustomer:null,newCustomer:{customer_type:"private",name:"",contact_person:"",email:"",phone:"",phone2:"",fax:"",company_name:"",vat_number:"",street_address:"",city:"",postal_code:"",owner_id:void 0,ownership_notes:""},machineType:"existing",selectedMachine:null,newMachine:{model_id:"",serial_number:"",purchase_date:"",purchased_at:"",receipt_number:"",sale_price:"",machine_condition:"new",description:"",warranty_expiry_date:""},newModel:{name:"",manufacturer:"",catalogue_number:"",warranty_months:12,category_id:"",description:""},ticketDetails:{problem_description:"",notes:"",additional_equipment:"",brought_by:"",priority:"medium"}}),[x,p]=f.useState([]),[y,v]=f.useState([]),[w,b]=f.useState([]),[N,_]=f.useState([]),[S,k]=f.useState([]),[E,A]=f.useState([]),[O,z]=f.useState(!1),[R,G]=f.useState(!1),[J,ie]=f.useState(!1),[V,xe]=f.useState(["AMS","Kamer.ba"]),[pe,re]=f.useState(""),[M,B]=f.useState(!1),[L,T]=f.useState(!1),[F,I]=f.useState(!1),[Q,W]=f.useState(!1),[ee,ye]=f.useState(!1),[he,te]=f.useState(!1),[De,ne]=f.useState(!1),[$e,ge]=f.useState(!1),[we,_e]=f.useState(!1),[Ye,ht]=f.useState(!1),[Ve,lt]=f.useState(!1),[yt,Re]=f.useState(!1),[H,Be]=f.useState(""),[st,K]=f.useState(""),[Z,ke]=f.useState("");f.useEffect(()=>{Ae()},[]),f.useEffect(()=>{d.selectedCustomer?.id&&it(d.selectedCustomer.id)},[d.selectedCustomer]),f.useEffect(()=>{if(d.newMachine.purchase_date&&d.newMachine.model_id){const P=Se(d.newMachine.purchase_date,d.newMachine.model_id);h($=>({...$,newMachine:{...$.newMachine,warranty_expiry_date:P}}))}},[d.newMachine.purchase_date,d.newMachine.model_id]);const Ae=async()=>{try{z(!0),ie(!0);const[P,$,We,vt,dt]=await Promise.all([de.getCustomers({limit:100}),de.getMachineModels({limit:100}),de.getUsers({limit:100}),de.getMachineCategories(),de.getSuppliers({limit:100})]);p(P.data||[]),b($.data||[]),A(We.data||[]),_(vt.data||[]);const kn=(dt.data||[]).map(pt=>pt.name),ce=($.data||[]).map(pt=>pt.manufacturer).filter(pt=>pt&&pt.trim()),Ze=[...new Set([...kn,...ce])];k(Ze.sort()),await je()}catch(P){console.error("Error fetching initial data:",P),u("Failed to load form data")}finally{z(!1),ie(!1)}},je=async()=>{try{const $=(await de.request("/assigned-machines/purchased-at-options")).data||[],We=[...new Set(["AMS","Kamer.ba",...$])];xe(We)}catch(P){console.error("Error fetching purchased_at options:",P),xe(["AMS","Kamer.ba"])}},He=V.filter(P=>P.toLowerCase().includes(pe.toLowerCase())),Se=(P,$)=>{if(!P||!$)return"";const We=w.find(dt=>dt.id===$);if(!We||!We.warranty_months)return"";const vt=new Date(P);return vt.setMonth(vt.getMonth()+We.warranty_months),vt.toISOString().split("T")[0]},it=async P=>{try{G(!0);const $=await de.getCustomerMachines(P);v($.data||[])}catch($){console.error("Error fetching customer machines:",$)}finally{G(!1)}},Me=()=>{n<hm.length-1&&s(n+1)},Tt=()=>{n>0&&s(n-1)},Pe=P=>{h($=>({...$,customerType:P,selectedCustomer:P==="existing"?$.selectedCustomer:null,newCustomer:P==="new"?$.newCustomer:{customer_type:"private",name:"",contact_person:"",email:"",phone:"",phone2:"",fax:"",company_name:"",vat_number:"",street_address:"",city:"",postal_code:"",owner_id:void 0,ownership_notes:""}}))},Ee=P=>{h($=>({...$,machineType:P,selectedMachine:P==="existing"?$.selectedMachine:null,newMachine:P==="new"?$.newMachine:{model_id:"",serial_number:"",purchase_date:"",purchased_at:"",receipt_number:"",sale_price:"",machine_condition:"new",description:"",warranty_expiry_date:""}}))},xt=async()=>{try{W(!0);const P={...d.newCustomer,name:d.newCustomer.customer_type==="company"?d.newCustomer.company_name:d.newCustomer.name},$=await de.createCustomer(P),We=$.data||$;if(!We||!We.id)throw new Error("Invalid customer data received from server");p(vt=>[We,...vt]),h(vt=>({...vt,selectedCustomer:We,customerType:"existing"}))}catch(P){console.error("Error creating customer:",P),u("Failed to create customer")}finally{W(!1)}},wt=async P=>{try{ne(!0);const $=P.trim(),We=N.find(zt=>{const kn=zt.name.toLowerCase().trim(),ce=$.toLowerCase().trim();return!!(kn===ce||kn.includes(ce)||ce.includes(kn))});if(We){h(zt=>({...zt,newModel:{...zt.newModel,category_id:We.id.toString()}})),lt(!1),K(""),Ne.info(`Category "${$}" is similar to existing "${We.name}" and has been selected`);return}const dt=(await de.createMachineCategory({name:$})).data;_(zt=>[...zt,dt]),h(zt=>({...zt,newModel:{...zt.newModel,category_id:dt.id.toString()}})),lt(!1),K(""),Ne.success(`Category "${$}" created successfully`)}catch($){if(console.error("Error creating category:",$),$.message&&$.message.includes("already exists")){const We=N.find(vt=>{const dt=vt.name.toLowerCase().trim(),zt=P.trim().toLowerCase();return dt.includes(zt)||zt.includes(dt)});We?Ne.error(`Category "${P.trim()}" is too similar to existing "${We.name}". Please select the existing category or use a different name.`):Ne.error(`Category "${P.trim()}" already exists. Please select it from the list.`)}else Ne.error($.message||"Failed to create category")}finally{ne(!1)}},Le=async()=>{try{te(!0);const $=(await de.createMachineModel(d.newModel)).data;b(We=>[$,...We]),h(We=>({...We,newMachine:{...We.newMachine,model_id:$.id}})),I(!1),Ne.success("Machine model created successfully")}catch(P){console.error("Error creating machine model:",P),u("Failed to create machine model"),Ne.error("Failed to create machine model")}finally{te(!1)}},ot=async()=>{try{ye(!0);const P={customer_id:parseInt(d.selectedCustomer.id),serial_number:d.newMachine.serial_number,model_id:parseInt(d.newMachine.model_id),purchase_date:d.newMachine.purchase_date,purchased_at:d.newMachine.purchased_at,receipt_number:d.newMachine.receipt_number,sale_price:d.newMachine.sale_price?parseFloat(d.newMachine.sale_price):null,machine_condition:d.newMachine.machine_condition,description:d.newMachine.description,warranty_expiry_date:d.newMachine.warranty_expiry_date,added_by_user_id:r?.id},We=(await de.createAssignedMachine(P)).data,vt={id:We.id,machine_id:We.id,customer_id:d.selectedCustomer.id,manufacturer:w.find(dt=>dt.id===d.newMachine.model_id)?.manufacturer,model_name:w.find(dt=>dt.id===d.newMachine.model_id)?.name,serial_number:d.newMachine.serial_number,purchase_date:d.newMachine.purchase_date};v(dt=>[vt,...dt]),h(dt=>({...dt,selectedMachine:vt,machineType:"existing"})),T(!1)}catch(P){console.error("Error creating machine:",P),u(P instanceof Error?P.message:"Failed to create machine")}finally{ye(!1)}},It=async()=>{try{l(!0),u(null);const P={customer_id:d.selectedCustomer.id,machine_id:parseInt(d.selectedMachine.id),problem_description:d.ticketDetails.problem_description,notes:d.ticketDetails.notes,additional_equipment:d.ticketDetails.additional_equipment,brought_by:d.ticketDetails.brought_by,priority:d.ticketDetails.priority,submitted_by:"1"},We=(await de.createWarrantyRepairTicket(P)).data;Ne.success("Warranty repair ticket created successfully"),t(`/warranty-repair-tickets/${We.id}`)}catch(P){console.error("Error creating warranty repair ticket:",P),u("Failed to create warranty repair ticket"),Ne.error("Failed to create warranty repair ticket",{description:P instanceof Error?P.message:"An error occurred"})}finally{l(!1)}},Er=P=>{switch(P){case 0:return d.customerType==="existing"?!!d.selectedCustomer:d.newCustomer.customer_type==="company"?!!(d.newCustomer.company_name&&d.newCustomer.contact_person&&d.newCustomer.email):!!(d.newCustomer.name&&d.newCustomer.email);case 1:return d.machineType==="existing"?!!d.selectedMachine:!!(d.newMachine.model_id&&d.newMachine.serial_number);case 2:return!!d.ticketDetails.problem_description;case 3:return!0;default:return!1}},Yr=Er(n),Gn=Er(0)&&Er(1)&&Er(2),Qn=()=>{switch(n){case 0:return $t();case 1:return sr();case 2:return le();case 3:return Qe();default:return null}},$t=()=>e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("div",{className:"flex items-center justify-center w-16 h-16 mx-auto rounded-full bg-primary/10",children:e.jsx(Ot,{className:"w-8 h-8 text-primary"})}),e.jsx("h3",{className:"text-2xl font-semibold",children:"Select Customer"}),e.jsx("p",{className:"text-muted-foreground",children:"Choose an existing customer or create a new one"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(se,{className:ze("cursor-pointer transition-all hover:shadow-md",d.customerType==="existing"&&"ring-2 ring-primary"),onClick:()=>Pe("existing"),children:e.jsxs(ae,{className:"p-6 text-center",children:[e.jsx(Ot,{className:"w-8 h-8 mx-auto mb-3 text-muted-foreground"}),e.jsx("h4",{className:"font-semibold mb-2",children:"Existing Customer"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Select from your customer database"})]})}),e.jsx(se,{className:ze("cursor-pointer transition-all hover:shadow-md",d.customerType==="new"&&"ring-2 ring-primary"),onClick:()=>Pe("new"),children:e.jsxs(ae,{className:"p-6 text-center",children:[e.jsx(Vt,{className:"w-8 h-8 mx-auto mb-3 text-muted-foreground"}),e.jsx("h4",{className:"font-semibold mb-2",children:"New Customer"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Create a new customer profile"})]})})]}),e.jsx(Id,{}),d.customerType==="existing"?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(U,{className:"text-base font-medium",children:"Search & Select Customer"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Find and select the customer for this warranty repair ticket"})]}),d.selectedCustomer&&e.jsx(se,{className:"bg-primary/5 border-primary/20",children:e.jsx(ae,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex items-center justify-center w-10 h-10 rounded-full bg-primary/10",children:e.jsx(Ot,{className:"w-5 h-5 text-primary"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-primary",children:d.selectedCustomer.customer_type==="company"?d.selectedCustomer.company_name:d.selectedCustomer.name}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[d.selectedCustomer.customer_type==="company"&&d.selectedCustomer.contact_person&&e.jsxs(Oe,{variant:"outline",className:"text-xs",children:[e.jsx(Ot,{className:"w-3 h-3 mr-1"}),d.selectedCustomer.contact_person]}),d.selectedCustomer.customer_type==="private"&&d.selectedCustomer.company_name&&e.jsxs(Oe,{variant:"outline",className:"text-xs",children:[e.jsx(Cs,{className:"w-3 h-3 mr-1"}),d.selectedCustomer.company_name]}),d.selectedCustomer.email&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Ci,{className:"w-3 h-3"}),d.selectedCustomer.email]})]})]}),e.jsx(q,{variant:"ghost",size:"sm",onClick:()=>h(P=>({...P,selectedCustomer:null})),className:"ml-auto",children:"Change"})]})})}),e.jsxs(dn,{open:$e,onOpenChange:ge,children:[e.jsx(un,{asChild:!0,children:e.jsxs(q,{variant:"outline",role:"combobox","aria-expanded":$e,className:"w-full justify-between h-12",children:[d.selectedCustomer?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ot,{className:"w-4 h-4"}),e.jsx("span",{children:d.selectedCustomer.customer_type==="company"?d.selectedCustomer.company_name:d.selectedCustomer.name}),d.selectedCustomer.customer_type==="company"&&d.selectedCustomer.contact_person&&e.jsx(Oe,{variant:"secondary",className:"ml-2",children:d.selectedCustomer.contact_person}),d.selectedCustomer.customer_type==="private"&&d.selectedCustomer.company_name&&e.jsx(Oe,{variant:"secondary",className:"ml-2",children:d.selectedCustomer.company_name})]}):e.jsx("span",{className:"text-muted-foreground",children:"Select customer..."}),e.jsx(cn,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),e.jsxs(sn,{className:"w-[400px] p-0",align:"start",children:[e.jsx("div",{className:"border-b p-3",children:e.jsxs("div",{className:"relative",children:[e.jsx(nr,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(be,{placeholder:"Search customers...",className:"pl-10",onChange:P=>{}})]})}),e.jsx("div",{className:"max-h-[300px] overflow-y-auto",children:O?e.jsxs("div",{className:"flex items-center justify-center py-6",children:[e.jsx(Nt,{className:"h-6 w-6 animate-spin"}),e.jsx("span",{className:"ml-2",children:"Loading customers..."})]}):x.length===0?e.jsx("div",{className:"p-4 text-center text-muted-foreground",children:"No customers found."}):e.jsx("div",{className:"p-1",children:x.filter(P=>P&&P.id).map(P=>e.jsxs("div",{onClick:()=>{h($=>({...$,selectedCustomer:P})),ge(!1)},className:ze("flex items-center gap-3 p-2 rounded-sm cursor-pointer hover:bg-accent hover:text-accent-foreground transition-colors",d.selectedCustomer?.id===P.id&&"bg-accent"),children:[e.jsx(Gr,{className:ze("h-4 w-4",d.selectedCustomer?.id===P.id?"opacity-100":"opacity-0")}),e.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-primary/10",children:e.jsx(Ot,{className:"w-4 h-4 text-primary"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium",children:P.customer_type==="company"?P.company_name:P.name}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[P.customer_type==="company"&&P.contact_person&&e.jsxs(Oe,{variant:"outline",className:"text-xs",children:[e.jsx(Ot,{className:"w-3 h-3 mr-1"}),P.contact_person]}),P.customer_type==="private"&&P.company_name&&e.jsxs(Oe,{variant:"outline",className:"text-xs",children:[e.jsx(Cs,{className:"w-3 h-3 mr-1"}),P.company_name]}),P.email&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Ci,{className:"w-3 h-3"}),P.email]})]})]})]},P.id))})})]})]})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(U,{className:"text-base font-medium",children:"Create New Customer"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Enter customer information to create a new profile"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"h-px bg-border flex-1"}),e.jsx("span",{className:"text-sm text-muted-foreground px-2",children:"Basic Information"}),e.jsx("div",{className:"h-px bg-border flex-1"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"customer_type",children:"Customer Type *"}),e.jsxs(tt,{value:d.newCustomer.customer_type,onValueChange:P=>h($=>({...$,newCustomer:{...$.newCustomer,customer_type:P}})),children:[e.jsx(Je,{children:e.jsx(rt,{placeholder:"Select customer type"})}),e.jsxs(et,{children:[e.jsx(Y,{value:"private",children:"Private Personnel"}),e.jsx(Y,{value:"company",children:"Company"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.newCustomer.customer_type==="company"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(U,{htmlFor:"customer-company-name",className:"flex items-center gap-2",children:[e.jsx(Cs,{className:"w-4 h-4"}),"Company Name *"]}),e.jsx(be,{id:"customer-company-name",value:d.newCustomer.company_name,onChange:P=>h($=>({...$,newCustomer:{...$.newCustomer,company_name:P.target.value}})),placeholder:"Enter company name",className:"h-11"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(U,{htmlFor:"customer-contact-person",className:"flex items-center gap-2",children:[e.jsx(Ot,{className:"w-4 h-4"}),"Contact Person *"]}),e.jsx(be,{id:"customer-contact-person",value:d.newCustomer.contact_person,onChange:P=>h($=>({...$,newCustomer:{...$.newCustomer,contact_person:P.target.value}})),placeholder:"Enter contact person name",className:"h-11"})]})]}):e.jsxs("div",{className:"space-y-2",children:[e.jsxs(U,{htmlFor:"customer-name",className:"flex items-center gap-2",children:[e.jsx(Ot,{className:"w-4 h-4"}),"Full Name *"]}),e.jsx(be,{id:"customer-name",value:d.newCustomer.name,onChange:P=>h($=>({...$,newCustomer:{...$.newCustomer,name:P.target.value}})),placeholder:"Enter customer name",className:"h-11"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(U,{htmlFor:"customer-email",className:"flex items-center gap-2",children:[e.jsx(Ci,{className:"w-4 h-4"}),"Email Address *"]}),e.jsx(be,{id:"customer-email",type:"email",value:d.newCustomer.email,onChange:P=>h($=>({...$,newCustomer:{...$.newCustomer,email:P.target.value}})),placeholder:"Enter email address",className:"h-11"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(U,{htmlFor:"customer-phone1",className:"flex items-center gap-2",children:[e.jsx(Mi,{className:"w-4 h-4"}),"Primary Phone"]}),e.jsx(be,{id:"customer-phone",value:d.newCustomer.phone,onChange:P=>h($=>({...$,newCustomer:{...$.newCustomer,phone:P.target.value}})),placeholder:"Enter phone number",className:"h-11"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(U,{htmlFor:"customer-phone2",className:"flex items-center gap-2",children:[e.jsx(Mi,{className:"w-4 h-4"}),"Secondary Phone"]}),e.jsx(be,{id:"customer-phone2",value:d.newCustomer.phone2,onChange:P=>h($=>({...$,newCustomer:{...$.newCustomer,phone2:P.target.value}})),placeholder:"Enter secondary phone number",className:"h-11"})]}),d.newCustomer.customer_type==="private"&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs(U,{htmlFor:"customer-company",className:"flex items-center gap-2",children:[e.jsx(Cs,{className:"w-4 h-4"}),"Company Name"]}),e.jsx(be,{id:"customer-company",value:d.newCustomer.company_name,onChange:P=>h($=>({...$,newCustomer:{...$.newCustomer,company_name:P.target.value}})),placeholder:"Enter company name (optional)",className:"h-11"})]}),d.newCustomer.customer_type==="company"&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs(U,{htmlFor:"customer-vat",className:"flex items-center gap-2",children:[e.jsx(Qa,{className:"w-4 h-4"}),"VAT Number"]}),e.jsx(be,{id:"customer-vat",value:d.newCustomer.vat_number,onChange:P=>h($=>({...$,newCustomer:{...$.newCustomer,vat_number:P.target.value}})),placeholder:"Enter VAT number",className:"h-11"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"h-px bg-border flex-1"}),e.jsx("span",{className:"text-sm text-muted-foreground px-2",children:"Address Information"}),e.jsx("div",{className:"h-px bg-border flex-1"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(U,{htmlFor:"customer-street",className:"flex items-center gap-2",children:[e.jsx(dl,{className:"w-4 h-4"}),"Street Address"]}),e.jsx(be,{id:"customer-street",value:d.newCustomer.street_address,onChange:P=>h($=>({...$,newCustomer:{...$.newCustomer,street_address:P.target.value}})),placeholder:"Enter street address",className:"h-11"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(U,{htmlFor:"customer-city",className:"flex items-center gap-2",children:[e.jsx(dl,{className:"w-4 h-4"}),"City"]}),e.jsx(be,{id:"customer-city",value:d.newCustomer.city,onChange:P=>h($=>({...$,newCustomer:{...$.newCustomer,city:P.target.value}})),placeholder:"Enter city",className:"h-11"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(U,{htmlFor:"customer-postal",className:"flex items-center gap-2",children:[e.jsx(Qa,{className:"w-4 h-4"}),"Postal Code"]}),e.jsx(be,{id:"customer-postal",value:d.newCustomer.postal_code,onChange:P=>h($=>({...$,newCustomer:{...$.newCustomer,postal_code:P.target.value}})),placeholder:"Enter postal code",className:"h-11"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(U,{htmlFor:"customer-fax",className:"flex items-center gap-2",children:[e.jsx($a,{className:"w-4 h-4"}),"Fax Number"]}),e.jsx(be,{id:"customer-fax",value:d.newCustomer.fax,onChange:P=>h($=>({...$,newCustomer:{...$.newCustomer,fax:P.target.value}})),placeholder:"Enter fax number",className:"h-11"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"h-px bg-border flex-1"}),e.jsx("span",{className:"text-sm text-muted-foreground px-2",children:"Additional Information"}),e.jsx("div",{className:"h-px bg-border flex-1"})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(U,{htmlFor:"customer-owner",className:"flex items-center gap-2",children:[e.jsx(Ot,{className:"w-4 h-4"}),"Owner/Assigned To"]}),e.jsxs(tt,{value:d.newCustomer.owner_id||"",onValueChange:P=>h($=>({...$,newCustomer:{...$.newCustomer,owner_id:P||void 0}})),children:[e.jsx(Je,{className:"h-11",children:e.jsx(rt,{placeholder:"Select a user..."})}),e.jsx(et,{children:E.map(P=>e.jsx(Y,{value:P.id.toString(),children:P.name||P.email||`User ${P.id}`},P.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(U,{htmlFor:"customer-notes",className:"flex items-center gap-2",children:[e.jsx(Qt,{className:"w-4 h-4"}),"Ownership Notes"]}),e.jsx(ar,{id:"customer-notes",value:d.newCustomer.ownership_notes,onChange:P=>h($=>({...$,newCustomer:{...$.newCustomer,ownership_notes:P.target.value}})),placeholder:"Additional notes about customer ownership or assignment",rows:3,className:"resize-none"})]})]})]}),e.jsx(q,{className:"w-full h-12",onClick:xt,disabled:Q||(d.newCustomer.customer_type==="company"?!d.newCustomer.company_name||!d.newCustomer.contact_person||!d.newCustomer.email:!d.newCustomer.name||!d.newCustomer.email),children:Q?e.jsxs(e.Fragment,{children:[e.jsx(Nt,{className:"mr-2 h-4 w-4 animate-spin"}),"Creating Customer..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Vt,{className:"mr-2 h-4 w-4"}),"Create Customer & Continue"]})})]})]}),sr=()=>e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("div",{className:"flex items-center justify-center w-16 h-16 mx-auto rounded-full bg-primary/10",children:e.jsx(Ct,{className:"w-8 h-8 text-primary"})}),e.jsx("h3",{className:"text-2xl font-semibold",children:"Select Machine"}),e.jsx("p",{className:"text-muted-foreground",children:"Choose the machine that needs warranty repair"})]}),d.selectedCustomer&&e.jsx(se,{className:"bg-muted/50",children:e.jsx(ae,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ot,{className:"w-5 h-5 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:d.selectedCustomer.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[d.selectedCustomer.company_name&&`${d.selectedCustomer.company_name} • `,d.selectedCustomer.email]})]})]})})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(se,{className:ze("cursor-pointer transition-all hover:shadow-md",d.machineType==="existing"&&"ring-2 ring-primary"),onClick:()=>Ee("existing"),children:e.jsxs(ae,{className:"p-6 text-center",children:[e.jsx(Ct,{className:"w-8 h-8 mx-auto mb-3 text-muted-foreground"}),e.jsx("h4",{className:"font-semibold mb-2",children:"Existing Machine"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Select from customer's machines"})]})}),e.jsx(se,{className:ze("cursor-pointer transition-all hover:shadow-md",d.machineType==="new"&&"ring-2 ring-primary"),onClick:()=>Ee("new"),children:e.jsxs(ae,{className:"p-6 text-center",children:[e.jsx(Vt,{className:"w-8 h-8 mx-auto mb-3 text-muted-foreground"}),e.jsx("h4",{className:"font-semibold mb-2",children:"New Machine"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Add a new machine to customer"})]})})]}),e.jsx(Id,{}),d.machineType==="existing"?e.jsx("div",{className:"space-y-4",children:d.selectedCustomer?e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx(U,{className:"text-base font-medium",children:"Select Machine"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Choose the machine that needs warranty repair"})]}),d.selectedMachine&&e.jsx(se,{className:"bg-primary/5 border-primary/20",children:e.jsx(ae,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex items-center justify-center w-10 h-10 rounded-full bg-primary/10",children:e.jsx(Ct,{className:"w-5 h-5 text-primary"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-primary",children:d.selectedMachine.model_name||"Unknown Model"}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[d.selectedMachine.serial_number&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Qa,{className:"w-3 h-3"}),d.selectedMachine.serial_number]}),d.selectedMachine.manufacturer&&e.jsx(Oe,{variant:"outline",className:"text-xs",children:d.selectedMachine.manufacturer})]})]}),e.jsx(q,{variant:"ghost",size:"sm",onClick:()=>h(P=>({...P,selectedMachine:null})),className:"ml-auto",children:"Change"})]})})}),e.jsxs(dn,{open:we,onOpenChange:_e,children:[e.jsx(un,{asChild:!0,children:e.jsxs(q,{variant:"outline",role:"combobox","aria-expanded":we,className:"w-full justify-between h-12",disabled:!d.selectedCustomer,children:[d.selectedMachine?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ct,{className:"w-4 h-4"}),e.jsx("span",{children:d.selectedMachine.model_name||"Unknown Model"}),d.selectedMachine.serial_number&&e.jsx(Oe,{variant:"secondary",className:"ml-2",children:d.selectedMachine.serial_number})]}):e.jsx("span",{className:"text-muted-foreground",children:d.selectedCustomer?"Select machine...":"Select customer first"}),e.jsx(cn,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),e.jsxs(sn,{className:"w-[400px] p-0",align:"start",children:[e.jsx("div",{className:"border-b p-3",children:e.jsxs("div",{className:"relative",children:[e.jsx(nr,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(be,{placeholder:"Search machines by name or serial...",className:"pl-10",value:H,onChange:P=>Be(P.target.value)})]})}),e.jsx("div",{className:"max-h-[300px] overflow-y-auto",children:R?e.jsxs("div",{className:"flex items-center justify-center py-6",children:[e.jsx(Nt,{className:"h-6 w-6 animate-spin"}),e.jsx("span",{className:"ml-2",children:"Loading machines..."})]}):y.length===0?e.jsxs("div",{className:"p-4 text-center",children:[e.jsx(Jt,{className:"w-8 h-8 mx-auto mb-2 text-muted-foreground"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"No machines found for this customer."}),e.jsxs(q,{variant:"outline",size:"sm",onClick:()=>{_e(!1),Ee("new")},children:[e.jsx(Vt,{className:"mr-2 h-4 w-4"}),"Add New Machine"]})]}):(()=>{const P=y.filter($=>{if(!H)return!0;const We=H.toLowerCase();return $.model_name&&$.model_name.toLowerCase().includes(We)||$.serial_number&&$.serial_number.toLowerCase().includes(We)||$.manufacturer&&$.manufacturer.toLowerCase().includes(We)});return P.length===0?e.jsx("div",{className:"p-4 text-center text-muted-foreground",children:"No machines match your search."}):e.jsx("div",{className:"p-1",children:P.map($=>e.jsxs("div",{onClick:()=>{h(We=>({...We,selectedMachine:$})),_e(!1)},className:ze("flex items-center gap-3 p-2 rounded-sm cursor-pointer hover:bg-accent hover:text-accent-foreground transition-colors",d.selectedMachine?.id===$.id&&"bg-accent"),children:[e.jsx(Gr,{className:ze("h-4 w-4",d.selectedMachine?.id===$.id?"opacity-100":"opacity-0")}),e.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-primary/10",children:e.jsx(Ct,{className:"w-4 h-4 text-primary"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium",children:$.model_name||"Unknown Model"}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[$.serial_number&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Qa,{className:"w-3 h-3"}),$.serial_number]}),$.manufacturer&&e.jsx(Oe,{variant:"outline",className:"text-xs",children:$.manufacturer})]}),$.purchase_date&&e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Purchased: ",jt($.purchase_date)]})]})]},$.id))})})()})]})]})]}):e.jsxs(On,{children:[e.jsx(vr,{className:"h-4 w-4"}),e.jsx(Bn,{children:"No Customer Selected"}),e.jsx(Pn,{children:"Please select a customer first to view their machines."})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(U,{className:"text-base font-medium",children:"Add New Machine"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Enter the machine details below"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(U,{htmlFor:"machine-model",className:"flex items-center gap-2",children:[e.jsx(Jt,{className:"w-4 h-4"}),"Machine Model *"]}),e.jsxs(dn,{open:Ye,onOpenChange:ht,children:[e.jsx(un,{asChild:!0,children:e.jsxs(q,{variant:"outline",role:"combobox","aria-expanded":Ye,className:"w-full justify-between h-11",children:[d.newMachine.model_id&&w.find(P=>P.id===d.newMachine.model_id)?.name||"Select model...",e.jsx(cn,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),e.jsxs(sn,{className:"w-[400px] p-0",align:"start",children:[e.jsx("div",{className:"border-b p-3",children:e.jsxs("div",{className:"relative",children:[e.jsx(nr,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(be,{placeholder:"Search models...",className:"pl-10",onChange:P=>{}})]})}),e.jsx("div",{className:"max-h-[300px] overflow-y-auto",children:J?e.jsxs("div",{className:"flex items-center justify-center py-6",children:[e.jsx(Nt,{className:"h-6 w-6 animate-spin"}),e.jsx("span",{className:"ml-2",children:"Loading models..."})]}):w.length===0?e.jsx("div",{className:"p-4 text-center text-muted-foreground",children:"No models found."}):e.jsx("div",{className:"p-1",children:w.map(P=>e.jsxs("div",{onClick:()=>{h($=>({...$,newMachine:{...$.newMachine,model_id:P.id}})),ht(!1)},className:ze("flex items-center gap-3 p-2 rounded-sm cursor-pointer hover:bg-accent hover:text-accent-foreground transition-colors",d.newMachine.model_id===P.id&&"bg-accent"),children:[e.jsx(Gr,{className:ze("h-4 w-4",d.newMachine.model_id===P.id?"opacity-100":"opacity-0")}),e.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-primary/10",children:e.jsx(Jt,{className:"w-4 h-4 text-primary"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium",children:P.name}),P.manufacturer&&e.jsx("p",{className:"text-sm text-muted-foreground",children:P.manufacturer})]})]},P.id))})})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(U,{htmlFor:"serial-number",className:"flex items-center gap-2",children:[e.jsx(Qa,{className:"w-4 h-4"}),"Serial Number *"]}),e.jsx(be,{id:"serial-number",value:d.newMachine.serial_number,onChange:P=>h($=>({...$,newMachine:{...$.newMachine,serial_number:P.target.value}})),placeholder:"Enter serial number",className:"h-11"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(U,{htmlFor:"purchase-date",className:"flex items-center gap-2",children:[e.jsx(is,{className:"w-4 h-4"}),"Purchase Date"]}),e.jsx(Rn,{value:d.newMachine.purchase_date,onChange:P=>h($=>({...$,newMachine:{...$.newMachine,purchase_date:P}})),placeholder:"Select purchase date"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(U,{htmlFor:"purchased-at",className:"flex items-center gap-2",children:[e.jsx(Cs,{className:"w-4 h-4"}),"Purchased At"]}),e.jsxs(dn,{open:M,onOpenChange:B,children:[e.jsx(un,{asChild:!0,children:e.jsxs(q,{variant:"outline",role:"combobox","aria-expanded":M,className:"w-full justify-between h-11",children:[d.newMachine.purchased_at||"Select where purchased...",e.jsx(cn,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),e.jsxs(sn,{className:"w-[400px] p-0",align:"start",children:[e.jsx("div",{className:"border-b p-3",children:e.jsxs("div",{className:"relative",children:[e.jsx(nr,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(be,{placeholder:"Search or type new shop name...",className:"pl-10",value:pe,onChange:P=>re(P.target.value)})]})}),e.jsxs("div",{className:"max-h-[300px] overflow-y-auto",children:[pe&&!He.includes(pe)&&e.jsx("div",{className:"p-1 border-b",children:e.jsxs("div",{onClick:()=>{h(P=>({...P,newMachine:{...P.newMachine,purchased_at:pe}})),B(!1)},className:"flex items-center gap-3 p-2 rounded-sm cursor-pointer hover:bg-accent hover:text-accent-foreground transition-colors",children:[e.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-green-100",children:e.jsx("span",{className:"text-green-600 text-sm font-bold",children:"+"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("p",{className:"font-medium",children:['Add "',pe,'"']}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Create new shop"})]})]})}),He.length===0?e.jsx("div",{className:"p-4 text-center text-muted-foreground",children:"No options found."}):e.jsx("div",{className:"p-1",children:He.map(P=>e.jsxs("div",{onClick:()=>{h($=>({...$,newMachine:{...$.newMachine,purchased_at:P}})),B(!1)},className:ze("flex items-center gap-3 p-2 rounded-sm cursor-pointer hover:bg-accent hover:text-accent-foreground transition-colors",d.newMachine.purchased_at===P&&"bg-accent"),children:[e.jsx(Gr,{className:ze("h-4 w-4",d.newMachine.purchased_at===P?"opacity-100":"opacity-0")}),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"font-medium",children:P})})]},P))})]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(U,{htmlFor:"receipt-number",className:"flex items-center gap-2",children:[e.jsx(hP,{className:"w-4 h-4"}),"Receipt Number"]}),e.jsx(be,{id:"receipt-number",value:d.newMachine.receipt_number,onChange:P=>h($=>({...$,newMachine:{...$.newMachine,receipt_number:P.target.value}})),placeholder:"Enter receipt number",className:"h-11"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(U,{htmlFor:"sale-price",className:"flex items-center gap-2",children:[e.jsx(Xm,{className:"w-4 h-4"}),"Sale Price"]}),e.jsx(be,{id:"sale-price",type:"number",step:"0.01",value:d.newMachine.sale_price,onChange:P=>h($=>({...$,newMachine:{...$.newMachine,sale_price:P.target.value}})),placeholder:"Enter sale price",className:"h-11"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(U,{htmlFor:"machine-condition",className:"flex items-center gap-2",children:[e.jsx(Jt,{className:"w-4 h-4"}),"Machine Condition"]}),e.jsxs(tt,{value:d.newMachine.machine_condition,onValueChange:P=>h($=>({...$,newMachine:{...$.newMachine,machine_condition:P}})),children:[e.jsx(Je,{className:"h-11",children:e.jsx(rt,{placeholder:"Select condition..."})}),e.jsxs(et,{children:[e.jsx(Y,{value:"new",children:"New"}),e.jsx(Y,{value:"used",children:"Used"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(U,{htmlFor:"warranty-expiry",className:"flex items-center gap-2",children:[e.jsx(is,{className:"w-4 h-4"}),"Warranty Expiry Date"]}),e.jsx(Rn,{value:d.newMachine.warranty_expiry_date,onChange:P=>h($=>({...$,newMachine:{...$.newMachine,warranty_expiry_date:P}})),placeholder:"Select warranty expiry date"})]}),e.jsxs("div",{className:"space-y-2 md:col-span-2",children:[e.jsxs(U,{htmlFor:"description",className:"flex items-center gap-2",children:[e.jsx(Qt,{className:"w-4 h-4"}),"Description"]}),e.jsx(ar,{id:"description",value:d.newMachine.description,onChange:P=>h($=>({...$,newMachine:{...$.newMachine,description:P.target.value}})),placeholder:"Enter machine description or notes...",className:"min-h-[80px]"})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(Ft,{open:F,onOpenChange:I,children:[e.jsx(yc,{asChild:!0,children:e.jsxs(q,{variant:"outline",className:"flex-1",children:[e.jsx(Vt,{className:"mr-2 h-4 w-4"}),"Create New Model"]})}),e.jsxs(Rt,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(qt,{children:[e.jsxs(Lt,{className:"flex items-center gap-2",children:[e.jsx(Jt,{className:"w-5 h-5"}),"Create New Machine Model"]}),e.jsx(Ut,{children:"Add a new machine model to the database."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"model-name",children:"Model Name *"}),e.jsx(be,{id:"model-name",value:d.newModel.name,onChange:P=>h($=>({...$,newModel:{...$.newModel,name:P.target.value}})),placeholder:"Enter model name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"model-manufacturer",children:"Manufacturer *"}),e.jsxs(dn,{open:yt,onOpenChange:Re,children:[e.jsx(un,{asChild:!0,children:e.jsxs(q,{variant:"outline",role:"combobox","aria-expanded":yt,className:"w-full justify-between h-11",children:[d.newModel.manufacturer||"Select manufacturer...",e.jsx(cn,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),e.jsxs(sn,{className:"w-[400px] p-0",align:"start",children:[e.jsx("div",{className:"border-b p-3",children:e.jsxs("div",{className:"relative",children:[e.jsx(nr,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(be,{placeholder:"Search or type new manufacturer...",className:"pl-10",value:Z,onChange:P=>ke(P.target.value)})]})}),e.jsxs("div",{className:"max-h-[300px] overflow-y-auto",children:[Z&&!S.some(P=>P.toLowerCase()===Z.toLowerCase())&&e.jsx("div",{className:"p-1 border-b",children:e.jsxs("div",{onClick:()=>{h(P=>({...P,newModel:{...P.newModel,manufacturer:Z}})),Re(!1),ke("")},className:"flex items-center gap-3 p-2 rounded-sm cursor-pointer hover:bg-accent hover:text-accent-foreground transition-colors",children:[e.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-green-100",children:e.jsx("span",{className:"text-green-600 text-sm font-bold",children:"+"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("p",{className:"font-medium",children:['Add "',Z,'"']}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Create new manufacturer"})]})]})}),S.filter(P=>Z===""||P.toLowerCase().includes(Z.toLowerCase())).length===0?e.jsx("div",{className:"p-4 text-center text-muted-foreground",children:"No manufacturers found."}):e.jsx("div",{className:"p-1",children:S.filter(P=>Z===""||P.toLowerCase().includes(Z.toLowerCase())).map(P=>e.jsxs("div",{onClick:()=>{h($=>({...$,newModel:{...$.newModel,manufacturer:P}})),Re(!1),ke("")},className:ze("flex items-center gap-3 p-2 rounded-sm cursor-pointer hover:bg-accent hover:text-accent-foreground transition-colors",d.newModel.manufacturer===P&&"bg-accent"),children:[e.jsx(Gr,{className:ze("h-4 w-4",d.newModel.manufacturer===P?"opacity-100":"opacity-0")}),e.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-orange-100",children:e.jsx(Cs,{className:"w-4 h-4 text-orange-600"})}),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"font-medium",children:P})})]},P))})]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"model-catalogue-number",children:"Catalogue Number"}),e.jsx(be,{id:"model-catalogue-number",value:d.newModel.catalogue_number,onChange:P=>h($=>({...$,newModel:{...$.newModel,catalogue_number:P.target.value}})),placeholder:"Enter catalogue number"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"model-warranty-months",children:"Warranty (months)"}),e.jsx(be,{id:"model-warranty-months",type:"number",min:"0",max:"120",value:d.newModel.warranty_months,onChange:P=>h($=>({...$,newModel:{...$.newModel,warranty_months:parseInt(P.target.value)||12}})),placeholder:"12"})]}),e.jsxs("div",{className:"space-y-2 col-span-2",children:[e.jsx(U,{htmlFor:"model-category",children:"Category"}),e.jsxs(dn,{open:Ve,onOpenChange:lt,children:[e.jsx(un,{asChild:!0,children:e.jsxs(q,{variant:"outline",role:"combobox","aria-expanded":Ve,className:"w-full justify-between h-11",children:[d.newModel.category_id?N.find(P=>P.id.toString()===d.newModel.category_id)?.name:"Select category (optional)",e.jsx(cn,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),e.jsxs(sn,{className:"w-[400px] p-0",align:"start",children:[e.jsx("div",{className:"border-b p-3",children:e.jsxs("div",{className:"relative",children:[e.jsx(nr,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(be,{placeholder:"Search categories...",className:"pl-10",value:st,onChange:P=>K(P.target.value)})]})}),e.jsxs("div",{className:"max-h-[300px] overflow-y-auto p-1",children:[e.jsxs("div",{onClick:()=>{h(P=>({...P,newModel:{...P.newModel,category_id:""}})),lt(!1),K("")},className:"flex items-center gap-3 p-2 rounded-sm cursor-pointer hover:bg-accent hover:text-accent-foreground transition-colors",children:[e.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-gray-100",children:e.jsx("span",{className:"text-gray-600 text-sm",children:"-"})}),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"font-medium",children:"No category"})})]}),st&&!N.some(P=>{const $=P.name.toLowerCase().trim(),We=st.trim().toLowerCase();return $===We||$.includes(We)||We.includes($)})&&e.jsx("div",{className:"p-1 border-b",children:e.jsxs("div",{onClick:()=>wt(st),className:"flex items-center gap-3 p-2 rounded-sm cursor-pointer hover:bg-accent hover:text-accent-foreground transition-colors",children:[e.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-green-100",children:De?e.jsx(Nt,{className:"h-4 w-4 text-green-600 animate-spin"}):e.jsx("span",{className:"text-green-600 text-sm font-bold",children:"+"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("p",{className:"font-medium",children:['Create "',st,'"']}),e.jsx("p",{className:"text-sm text-muted-foreground",children:De?"Creating category...":"Add new category"})]})]})}),N.filter(P=>st===""||P.name.toLowerCase().includes(st.toLowerCase())).map(P=>e.jsxs("div",{onClick:()=>{h($=>({...$,newModel:{...$.newModel,category_id:P.id.toString()}})),lt(!1),K("")},className:ze("flex items-center gap-3 p-2 rounded-sm cursor-pointer hover:bg-accent hover:text-accent-foreground transition-colors",d.newModel.category_id===P.id.toString()&&"bg-accent"),children:[e.jsx(Gr,{className:ze("h-4 w-4",d.newModel.category_id===P.id.toString()?"opacity-100":"opacity-0")}),e.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-primary/10",children:e.jsx(Jt,{className:"w-4 h-4 text-primary"})}),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"font-medium",children:P.name})})]},P.id))]})]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"model-description",children:"Description"}),e.jsx(ar,{id:"model-description",value:d.newModel.description,onChange:P=>h($=>({...$,newModel:{...$.newModel,description:P.target.value}})),placeholder:"Enter machine model description...",rows:3,className:"resize-none"})]})]}),e.jsxs(Dr,{children:[e.jsx(q,{variant:"outline",onClick:()=>I(!1),children:"Cancel"}),e.jsxs(q,{onClick:Le,disabled:he||!d.newModel.name||!d.newModel.manufacturer,children:[he&&e.jsx(Nt,{className:"mr-2 h-4 w-4 animate-spin"}),"Create Model"]})]})]})]}),e.jsxs(Ft,{open:L,onOpenChange:T,children:[e.jsx(yc,{asChild:!0,children:e.jsxs(q,{className:"flex-1",disabled:!d.newMachine.model_id||!d.newMachine.serial_number,children:[e.jsx(Vt,{className:"mr-2 h-4 w-4"}),"Add Machine"]})}),e.jsxs(Rt,{children:[e.jsxs(qt,{children:[e.jsxs(Lt,{className:"flex items-center gap-2",children:[e.jsx(Ct,{className:"w-5 h-5"}),"Add New Machine"]}),e.jsx(Ut,{children:"Add this machine to the customer's profile."})]}),e.jsx("div",{className:"space-y-4",children:e.jsx(se,{children:e.jsxs(ae,{className:"p-4",children:[e.jsx("h4",{className:"font-medium mb-3",children:"Machine Details"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Model:"}),e.jsx("span",{children:w.find(P=>P.id===d.newMachine.model_id)?.name})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Serial:"}),e.jsx("span",{children:d.newMachine.serial_number})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Customer:"}),e.jsx("span",{children:d.selectedCustomer?.name})]}),d.newMachine.purchase_date&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Purchase Date:"}),e.jsx("span",{children:jt(d.newMachine.purchase_date)})]})]})]})})}),e.jsxs(Dr,{children:[e.jsx(q,{variant:"outline",onClick:()=>T(!1),children:"Cancel"}),e.jsxs(q,{onClick:ot,disabled:ee,children:[ee&&e.jsx(Nt,{className:"mr-2 h-4 w-4 animate-spin"}),"Add Machine"]})]})]})]})]})]})]}),le=()=>e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("div",{className:"flex items-center justify-center w-16 h-16 mx-auto rounded-full bg-primary/10",children:e.jsx(Qt,{className:"w-8 h-8 text-primary"})}),e.jsx("h3",{className:"text-2xl font-semibold",children:"Warranty Problem Details"}),e.jsx("p",{className:"text-muted-foreground",children:"Describe the warranty issue and provide additional information"})]}),d.selectedMachine&&e.jsx(se,{className:"bg-muted/50",children:e.jsx(ae,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ct,{className:"w-5 h-5 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:d.selectedMachine.model_name||"Unknown Model"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[d.selectedMachine.manufacturer&&`${d.selectedMachine.manufacturer} • `,"Serial: ",d.selectedMachine.serial_number||"N/A"]})]})]})})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(U,{htmlFor:"problem-description",className:"flex items-center gap-2 text-base font-medium",children:[e.jsx(vr,{className:"w-4 h-4"}),"Warranty Problem Description *"]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"Provide a detailed description of the warranty issue or problem with the machine"}),e.jsx(ar,{id:"problem-description",value:d.ticketDetails.problem_description,onChange:P=>h($=>({...$,ticketDetails:{...$.ticketDetails,problem_description:P.target.value}})),placeholder:"Describe the warranty problem in detail... What symptoms are you experiencing? When did the issue start? Any error messages?",rows:5,className:"resize-none"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(U,{htmlFor:"brought-by",className:"flex items-center gap-2",children:[e.jsx(Ot,{className:"w-4 h-4"}),"Brought By"]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"Who brought the machine for warranty service?"}),e.jsx(be,{id:"brought-by",value:d.ticketDetails.brought_by,onChange:P=>h($=>({...$,ticketDetails:{...$.ticketDetails,brought_by:P.target.value}})),placeholder:"Enter name or contact person",className:"h-11"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(U,{htmlFor:"priority",className:"flex items-center gap-2",children:[e.jsx(vr,{className:"w-4 h-4"}),"Priority"]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"How urgent is this warranty repair request?"}),e.jsxs(tt,{value:d.ticketDetails.priority,onValueChange:P=>h($=>({...$,ticketDetails:{...$.ticketDetails,priority:P}})),children:[e.jsx(Je,{className:"h-11",children:e.jsx(rt,{})}),e.jsxs(et,{children:[e.jsx(Y,{value:"low",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Oe,{variant:"outline",className:"bg-green-50 text-green-700 border-green-200",children:"Low"}),e.jsx("span",{children:"Low Priority"})]})}),e.jsx(Y,{value:"medium",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Oe,{variant:"outline",className:"bg-yellow-50 text-yellow-700 border-yellow-200",children:"Medium"}),e.jsx("span",{children:"Medium Priority"})]})}),e.jsx(Y,{value:"high",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Oe,{variant:"outline",className:"bg-red-50 text-red-700 border-red-200",children:"High"}),e.jsx("span",{children:"High Priority"})]})})]})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs(U,{htmlFor:"additional-equipment",className:"flex items-center gap-2",children:[e.jsx(Jt,{className:"w-4 h-4"}),"Additional Equipment"]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"Any additional items brought with the machine?"}),e.jsx(ar,{id:"additional-equipment",value:d.ticketDetails.additional_equipment,onChange:P=>h($=>({...$,ticketDetails:{...$.ticketDetails,additional_equipment:P.target.value}})),placeholder:"List any cables, accessories, or other items...",rows:3,className:"resize-none"})]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(U,{htmlFor:"notes",className:"flex items-center gap-2",children:[e.jsx(Qt,{className:"w-4 h-4"}),"Additional Notes"]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"Any additional information, special instructions, or observations"}),e.jsx(ar,{id:"notes",value:d.ticketDetails.notes,onChange:P=>h($=>({...$,ticketDetails:{...$.ticketDetails,notes:P.target.value}})),placeholder:"Any special instructions, previous repair history, or other relevant information...",rows:4,className:"resize-none"})]})]})]}),Qe=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{children:e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Review & Submit Warranty Ticket"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs(se,{children:[e.jsx(ue,{children:e.jsxs(fe,{className:"flex items-center gap-2",children:[e.jsx(Ot,{className:"h-5 w-5"}),"Customer Information"]})}),e.jsx(ae,{children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Name"}),e.jsx("p",{children:d.selectedCustomer?.name})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Email"}),e.jsx("p",{children:d.selectedCustomer?.email||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Phone"}),e.jsx("p",{children:d.selectedCustomer?.phone1||d.selectedCustomer?.phone||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Company"}),e.jsx("p",{children:d.selectedCustomer?.company_name||"N/A"})]})]})})]}),e.jsxs(se,{children:[e.jsx(ue,{children:e.jsxs(fe,{className:"flex items-center gap-2",children:[e.jsx(Ct,{className:"h-5 w-5"}),"Machine Information"]})}),e.jsx(ae,{children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Model"}),e.jsx("p",{children:d.selectedMachine?.model_name||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Manufacturer"}),e.jsx("p",{children:d.selectedMachine?.manufacturer||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Serial Number"}),e.jsx("p",{children:d.selectedMachine?.serial_number||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Purchase Date"}),e.jsx("p",{children:d.selectedMachine?.purchase_date?jt(d.selectedMachine.purchase_date):"N/A"})]}),d.machineType==="new"&&d.newMachine.purchased_at&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Purchased At"}),e.jsx("p",{children:d.newMachine.purchased_at})]}),d.machineType==="new"&&d.newMachine.sale_price&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Sale Price"}),e.jsxs("p",{children:[d.newMachine.sale_price," KM"]})]}),d.machineType==="new"&&d.newMachine.machine_condition&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Condition"}),e.jsx("p",{className:"capitalize",children:d.newMachine.machine_condition})]}),d.machineType==="new"&&d.newMachine.warranty_expiry_date&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Warranty Expiry"}),e.jsx("p",{children:jt(d.newMachine.warranty_expiry_date)})]}),d.machineType==="new"&&d.newMachine.receipt_number&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Receipt Number"}),e.jsx("p",{children:d.newMachine.receipt_number})]}),d.machineType==="new"&&d.newMachine.description&&e.jsxs("div",{className:"col-span-2",children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Description"}),e.jsx("p",{className:"whitespace-pre-wrap",children:d.newMachine.description})]})]})})]}),e.jsxs(se,{children:[e.jsx(ue,{children:e.jsxs(fe,{className:"flex items-center gap-2",children:[e.jsx(Hs,{className:"h-5 w-5"}),"Warranty Problem Details"]})}),e.jsx(ae,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Problem Description"}),e.jsx("p",{className:"whitespace-pre-wrap",children:d.ticketDetails.problem_description})]}),d.ticketDetails.notes&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Notes"}),e.jsx("p",{className:"whitespace-pre-wrap",children:d.ticketDetails.notes})]}),d.ticketDetails.additional_equipment&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Additional Equipment"}),e.jsx("p",{className:"whitespace-pre-wrap",children:d.ticketDetails.additional_equipment})]}),d.ticketDetails.brought_by&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Brought By"}),e.jsx("p",{children:d.ticketDetails.brought_by})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Priority"}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(Oe,{variant:"outline",className:d.ticketDetails.priority==="high"?"bg-red-50 text-red-700 border-red-200":d.ticketDetails.priority==="medium"?"bg-yellow-50 text-yellow-700 border-yellow-200":"bg-green-50 text-green-700 border-green-200",children:d.ticketDetails.priority.charAt(0).toUpperCase()+d.ticketDetails.priority.slice(1)})})]})]})})]})]})]});return e.jsx(gt,{children:e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(q,{variant:"ghost",onClick:()=>t(-1),className:"mr-2",children:e.jsx(Cn,{className:"h-4 w-4"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Create Warranty Repair Ticket"}),e.jsx("p",{className:"text-muted-foreground",children:"Create a new warranty repair ticket for customer service"})]})]})}),c&&e.jsxs(On,{variant:"destructive",children:[e.jsx(vr,{className:"h-4 w-4"}),e.jsx(Bn,{children:"Error"}),e.jsx(Pn,{children:c})]}),e.jsx(se,{children:e.jsx(ae,{className:"pt-6",children:e.jsx("div",{className:"flex items-center justify-between",children:hm.map((P,$)=>{const We=P.icon,vt=$===n,dt=$<n,zt=$<=n||dt;return e.jsxs("div",{className:"flex items-center flex-1",children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:`flex items-center justify-center w-12 h-12 rounded-full border-2 transition-all ${vt?"border-primary bg-primary text-primary-foreground shadow-lg scale-110":dt?"border-green-500 bg-green-500 text-white":zt?"border-muted-foreground bg-background text-muted-foreground hover:border-primary/50":"border-muted bg-muted text-muted-foreground"}`,children:dt?e.jsx(Ar,{className:"h-6 w-6"}):e.jsx(We,{className:"h-6 w-6"})}),e.jsxs("div",{className:"mt-3 text-center",children:[e.jsx("p",{className:`text-sm font-medium ${vt?"text-primary":dt?"text-green-600":"text-muted-foreground"}`,children:P.label}),e.jsx("p",{className:`text-xs mt-1 ${vt?"text-primary/70":"text-muted-foreground"}`,children:P.description})]})]}),$<hm.length-1&&e.jsx("div",{className:`flex-1 h-0.5 mx-6 ${dt?"bg-green-500":"bg-muted"}`})]},P.id)})})})}),e.jsx(se,{children:e.jsx(ae,{className:"pt-6",children:Qn()})}),e.jsxs("div",{className:"flex items-center justify-between pt-6 border-t",children:[e.jsxs(q,{variant:"outline",onClick:Tt,disabled:n===0,className:"h-12 px-6",children:[e.jsx(Cn,{className:"mr-2 h-4 w-4"}),"Previous"]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Step ",n+1," of ",hm.length]}),n===hm.length-1?e.jsxs(q,{onClick:It,disabled:!Gn||a,className:"h-12 px-8",size:"lg",children:[a&&e.jsx(Nt,{className:"mr-2 h-4 w-4 animate-spin"}),e.jsx(Hs,{className:"mr-2 h-4 w-4"}),"Create Warranty Repair Ticket"]}):e.jsxs(q,{onClick:Me,disabled:!Yr,className:"h-12 px-8",size:"lg",children:["Next",e.jsx(Am,{className:"ml-2 h-4 w-4"})]})]})]})]})})}const dE=[{key:"ticket_number",label:"Ticket #"},{key:"customer",label:"Customer"},{key:"machine",label:"Machine"},{key:"problem",label:"Problem"},{key:"status",label:"Status"},{key:"priority",label:"Priority"},{key:"submitted_by",label:"Submitted By"},{key:"created_at",label:"Created"}],Zee=t=>t?e.jsx(Oe,{variant:Vr(t),className:Vr(t)==="outline"?Xs(t):void 0,children:Qs(t)}):e.jsx(Oe,{variant:"outline",children:"Unknown"}),Jee=t=>{const r={low:{color:"outline",className:"bg-green-50 text-green-700 border-green-200",label:"Low"},medium:{color:"outline",className:"bg-yellow-50 text-yellow-700 border-yellow-200",label:"Medium"},high:{color:"outline",className:"bg-red-50 text-red-700 border-red-200",label:"High"}},n=r[t]||r.medium;return e.jsx(Oe,{variant:n.color,className:n.className,children:n.label})};function ete(){const t=er(),{user:r,hasPermission:n}=hr(),{visibleColumns:s,toggleColumn:a,isColumnVisible:l,resetColumns:c,showAllColumns:u,hideAllColumns:d,isSyncing:h}=ps("repair_tickets",gs(dE)),[x,p]=f.useState([]),[y,v]=f.useState(!0),[w,b]=f.useState(""),[N,_]=f.useState(""),[S,k]=f.useState({status:"",priority:"",technician:""}),[E,A]=f.useState(1),[O,z]=f.useState(1),[R,G]=f.useState(0),[J]=f.useState(25),[ie,V]=f.useState(""),xe=new Date().getFullYear(),[pe,re]=f.useState(xe),[M,B]=f.useState([xe]),[L,T]=f.useState(!1),[F,I]=f.useState(null),[Q,W]=f.useState(""),[ee,ye]=f.useState([]),[he,te]=f.useState(!1),[De,ne]=f.useState(!1),[$e,ge]=f.useState(null),[we,_e]=f.useState(!1),[Ye,ht]=f.useState(null);f.useEffect(()=>{(async()=>{try{const wt=(await de.getRepairTicketYears()).data||[];B(wt.length>0?wt:[xe])}catch(xt){console.error("Error fetching years:",xt),B([xe])}})()},[]),f.useEffect(()=>{Ve()},[N,S,E,pe]);const Ve=async()=>{try{v(!0);const Ee={page:E,limit:J,year:pe};N&&(Ee.search=N),S.status&&(Ee.status=S.status),S.priority&&(Ee.priority=S.priority),S.technician&&(Ee.technician_id=S.technician);const xt=await de.getRepairTickets(Ee),wt=xt.data||[];p(wt),z(xt.pagination?.pages||1),G(xt.pagination?.total||0)}catch(Ee){V("Failed to load repair tickets"),console.error("Error fetching repair tickets:",Ee)}finally{v(!1)}},lt=Ee=>{t(`/repair-tickets/${Ee}`)},yt=()=>{_(w),A(1)},Re=()=>{b(""),_(""),A(1)},H=(Ee,xt)=>{k(wt=>({...wt,[Ee]:xt})),A(1)},Be=()=>{k({status:"",priority:"",technician:""}),A(1)},st=()=>{const Ee=new Map;return x.forEach(xt=>{xt.converted_by_technician_id&&xt.converted_by_technician_name&&Ee.set(xt.converted_by_technician_id,xt.converted_by_technician_name),xt.submitted_by&&xt.submitted_by_name&&Ee.set(xt.submitted_by,xt.submitted_by_name)}),Array.from(Ee.entries()).sort((xt,wt)=>xt[1].localeCompare(wt[1])).map(([xt,wt])=>({id:xt,name:wt}))},K=()=>Object.values(S).filter(Ee=>Ee!=="").length,Z=async Ee=>{if(I(Ee),r?.role==="technician"){te(!0);try{const xt={technician_id:r.id,priority:Ee.priority||"medium",estimated_hours:null,notes:`Converted from repair ticket ${Ee.formatted_number||Ee.ticket_number}`},wt=await de.convertRepairTicketToWorkOrder(Ee.id,xt);Ne.success("Repair ticket converted and assigned to you"),wt.data?.work_order?.id?t(`/work-orders/${wt.data.work_order.id}`):await Ve()}catch(xt){console.error("Error converting ticket:",xt),Ne.error(xt.response?.data?.message||"Failed to convert ticket to work order")}finally{te(!1)}}else{T(!0);try{const xt=await de.getUsers(),wt=xt.data||xt;ye(Array.isArray(wt)?wt:[])}catch(xt){console.error("Error fetching users:",xt),Ne.error("Failed to load users")}}},ke=async()=>{if(F){te(!0);try{const Ee={technician_id:Q==="unassigned"?null:Q||null,priority:F.priority||"medium",estimated_hours:null,notes:`Converted from repair ticket ${F.formatted_number||F.ticket_number}`},xt=await de.convertRepairTicketToWorkOrder(F.id,Ee);Ne.success("Repair ticket converted to work order successfully"),T(!1),I(null),W(""),await Ve(),xt.data?.work_order?.id&&t(`/work-orders/${xt.data.work_order.id}`)}catch(Ee){console.error("Error converting ticket:",Ee),Ne.error(Ee.response?.data?.message||"Failed to convert ticket to work order")}finally{te(!1)}}},Ae=Ee=>{if(Ee.status==="converted"||Ee.status==="converted - warranty"){ht(Ee),_e(!0);return}ge(Ee),ne(!0)},je=async()=>{if($e)try{await de.deleteRepairTicket($e.id),Ne.success("Repair ticket deleted successfully"),ne(!1),ge(null),await Ve()}catch(Ee){console.error("Error deleting ticket:",Ee),Ne.error(Ee.response?.data?.message||"Failed to delete repair ticket")}},He=async Ee=>{try{const xt=await fetch(`${rn}/api/print/repair-ticket/${Ee.id}`,{method:"GET",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!xt.ok)throw new Error(`HTTP error! status: ${xt.status}`);const wt=await xt.blob(),Le=window.URL.createObjectURL(wt),ot=window.open(Le,"_blank");ot&&(ot.document.title=`Repair Ticket ${Ee.formatted_number||Ee.ticket_number}`),window.URL.revokeObjectURL(Le)}catch(xt){console.error("Error printing ticket:",xt),Ne.error("Failed to print ticket")}},Se=async Ee=>{try{const xt=await fetch(`${rn}/api/print/repair-ticket/${Ee.id}`,{method:"GET",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!xt.ok)throw new Error(`HTTP error! status: ${xt.status}`);const wt=await xt.blob(),Le=window.URL.createObjectURL(wt),ot=document.createElement("a");ot.href=Le,ot.download=`repair-ticket-${Ee.formatted_number||Ee.ticket_number}.pdf`,document.body.appendChild(ot),ot.click(),document.body.removeChild(ot),window.URL.revokeObjectURL(Le)}catch(xt){console.error("Error downloading ticket:",xt),Ne.error("Failed to download ticket")}},it=x.filter(Ee=>Ee.status!=="converted"&&Ee.status!=="converted - warranty"),Me=x.filter(Ee=>Ee.status==="converted"||Ee.status==="converted - warranty"),Tt=x.filter(Ee=>Ee.priority==="high"),Pe=R;return y?e.jsx(gt,{children:e.jsxs("div",{className:"flex items-center justify-center h-64",children:[e.jsx(Nt,{className:"h-8 w-8 animate-spin"}),e.jsx("span",{className:"ml-2",children:"Loading repair tickets..."})]})}):ie?e.jsx(gt,{children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-red-600 mb-4",children:ie}),e.jsx(q,{onClick:Ve,children:"Try Again"})]})})}):e.jsxs(gt,{children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Repair Tickets"}),e.jsx("p",{className:"text-muted-foreground",children:"Track and manage repair requests and service tickets"})]}),n("repair_tickets:write")&&e.jsxs(q,{onClick:()=>t("/create-repair-ticket"),children:[e.jsx(Vt,{className:"mr-2 h-4 w-4"}),"Create Ticket"]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[e.jsxs(se,{children:[e.jsxs(ue,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(fe,{className:"text-sm font-medium",children:"Open Tickets"}),e.jsx(fs,{className:"h-4 w-4 text-orange-500"})]}),e.jsxs(ae,{children:[e.jsx("div",{className:"text-2xl font-bold",children:it.length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Not converted"})]})]}),e.jsxs(se,{children:[e.jsxs(ue,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(fe,{className:"text-sm font-medium",children:"Converted Tickets"}),e.jsx(Ar,{className:"h-4 w-4 text-green-500"})]}),e.jsxs(ae,{children:[e.jsx("div",{className:"text-2xl font-bold",children:Me.length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"To work orders"})]})]}),e.jsxs(se,{children:[e.jsxs(ue,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(fe,{className:"text-sm font-medium",children:"High Priority"}),e.jsx(Ct,{className:"h-4 w-4 text-red-500"})]}),e.jsxs(ae,{children:[e.jsx("div",{className:"text-2xl font-bold",children:Tt.length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Urgent tickets"})]})]}),e.jsxs(se,{children:[e.jsxs(ue,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(fe,{className:"text-sm font-medium",children:"Total Tickets"}),e.jsx(Qt,{className:"h-4 w-4 text-gray-500"})]}),e.jsxs(ae,{children:[e.jsx("div",{className:"text-2xl font-bold",children:Pe}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"All repair tickets"})]})]})]}),e.jsxs(se,{children:[e.jsx(ue,{children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("div",{className:"relative",children:[e.jsx(nr,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),e.jsx(be,{placeholder:"Search tickets...",value:w,onChange:Ee=>b(Ee.target.value),onKeyDown:Ee=>{Ee.key==="Enter"&&yt()},className:"pl-10 w-80"}),w&&e.jsx(q,{variant:"ghost",size:"sm",className:"absolute right-1 top-1/2 -translate-y-1/2 h-6 w-6 p-0",onClick:Re,children:e.jsx(hn,{className:"h-3 w-3"})})]}),e.jsx(q,{onClick:yt,variant:"outline",children:"Search"}),e.jsx(ys,{columns:dE,visibleColumns:s,onToggleColumn:a,onShowAll:u,onHideAll:d,onReset:c,isSyncing:h}),e.jsxs(Cr,{children:[e.jsx(Sr,{asChild:!0,children:e.jsxs(q,{variant:"outline",className:"relative",children:[e.jsx(Ua,{className:"mr-2 h-4 w-4"}),"Filters",K()>0&&e.jsx(Oe,{variant:"secondary",className:"ml-2 h-5 w-5 rounded-full p-0 flex items-center justify-center text-xs",children:K()})]})}),e.jsxs(wr,{align:"end",className:"w-56",children:[e.jsx(Tr,{children:"Filter by"}),e.jsx(Lr,{}),e.jsxs("div",{className:"p-2",children:[e.jsx(U,{className:"text-sm font-medium mb-2 block",children:"Status"}),e.jsxs(tt,{value:S.status||"all",onValueChange:Ee=>H("status",Ee==="all"?"":Ee),children:[e.jsx(Je,{children:e.jsx(rt,{placeholder:"All statuses"})}),e.jsxs(et,{children:[e.jsx(Y,{value:"all",children:"All statuses"}),e.jsx(Y,{value:"intake",children:"Intake"}),e.jsx(Y,{value:"converted",children:"Converted"}),e.jsx(Y,{value:"converted - warranty",children:"Converted - Warranty"}),e.jsx(Y,{value:"cancelled",children:"Cancelled"})]})]})]}),e.jsxs("div",{className:"p-2",children:[e.jsx(U,{className:"text-sm font-medium mb-2 block",children:"Priority"}),e.jsxs(tt,{value:S.priority||"all",onValueChange:Ee=>H("priority",Ee==="all"?"":Ee),children:[e.jsx(Je,{children:e.jsx(rt,{placeholder:"All priorities"})}),e.jsxs(et,{children:[e.jsx(Y,{value:"all",children:"All priorities"}),e.jsx(Y,{value:"low",children:"Low"}),e.jsx(Y,{value:"medium",children:"Medium"}),e.jsx(Y,{value:"high",children:"High"})]})]})]}),e.jsxs("div",{className:"p-2",children:[e.jsx(U,{className:"text-sm font-medium mb-2 block",children:"Technician"}),e.jsxs(tt,{value:S.technician||"all",onValueChange:Ee=>H("technician",Ee==="all"?"":Ee),children:[e.jsx(Je,{children:e.jsx(rt,{placeholder:"All technicians"})}),e.jsxs(et,{children:[e.jsx(Y,{value:"all",children:"All technicians"}),e.jsx(Y,{value:"unassigned",children:"Unassigned"}),st().map(Ee=>e.jsx(Y,{value:Ee.id,children:Ee.name},Ee.id))]})]})]}),e.jsxs("div",{className:"p-2",children:[e.jsx(U,{className:"text-sm font-medium mb-2 block",children:"Year"}),e.jsxs(tt,{value:pe.toString(),onValueChange:Ee=>{re(parseInt(Ee)),A(1)},children:[e.jsx(Je,{children:e.jsx(rt,{})}),e.jsx(et,{children:M.map(Ee=>e.jsx(Y,{value:Ee.toString(),children:Ee},Ee))})]})]}),e.jsx(Lr,{}),e.jsxs(ct,{onClick:Be,children:[e.jsx(hn,{className:"mr-2 h-4 w-4"}),"Clear Filters"]})]})]})]})})}),e.jsxs(ae,{children:[e.jsxs(ir,{children:[e.jsx(lr,{children:e.jsxs(ft,{children:[l("ticket_number")&&e.jsx(me,{children:"Ticket #"}),l("customer")&&e.jsx(me,{children:"Customer"}),l("machine")&&e.jsx(me,{children:"Machine"}),l("problem")&&e.jsx(me,{children:"Problem"}),l("status")&&e.jsx(me,{children:"Status"}),l("priority")&&e.jsx(me,{children:"Priority"}),l("submitted_by")&&e.jsx(me,{children:"Technician"}),l("created_at")&&e.jsx(me,{children:"Created"}),e.jsx(me,{className:"text-right",children:"Actions"})]})}),e.jsx(or,{children:x.map((Ee,xt)=>e.jsxs(ft,{className:"cursor-pointer hover:bg-muted/50",onClick:()=>t(`/repair-tickets/${Ee.id}`),children:[l("ticket_number")&&e.jsx(oe,{className:"font-medium",children:Ee.formatted_number||Ee.ticket_number||`#${Ee.id}`}),l("customer")&&e.jsx(oe,{children:Ee.customer_name||"N/A"}),l("machine")&&e.jsx(oe,{children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:Ee.model_name||"N/A"}),Ee.serial_number&&e.jsx("div",{className:"text-sm text-muted-foreground",children:Ee.serial_number})]})}),l("problem")&&e.jsx(oe,{className:"max-w-xs",children:e.jsx("div",{className:"truncate",children:Ee.problem_description||"No description"})}),l("status")&&e.jsx(oe,{children:Zee(Ee.status)}),l("priority")&&e.jsx(oe,{children:Jee(Ee.priority)}),l("submitted_by")&&e.jsx(oe,{className:"text-sm text-muted-foreground",children:Ee.converted_by_technician_name||Ee.submitted_by_name||"Unassigned"}),l("created_at")&&e.jsx(oe,{className:"text-sm text-muted-foreground",children:jt(Ee.created_at)}),e.jsx(oe,{className:"text-right",children:e.jsxs(Cr,{children:[e.jsx(Sr,{asChild:!0,children:e.jsx(q,{variant:"ghost",className:"h-8 w-8 p-0",onClick:wt=>wt.stopPropagation(),children:e.jsx(ss,{className:"h-4 w-4"})})}),e.jsxs(wr,{align:"end",onClick:wt=>wt.stopPropagation(),children:[e.jsx(Tr,{children:"Actions"}),e.jsxs(ct,{onClick:wt=>{wt.stopPropagation(),lt(Ee.id)},children:[e.jsx(mr,{className:"mr-2 h-4 w-4"}),"View Details"]}),n("repair_tickets:write")&&e.jsxs(ct,{onClick:wt=>wt.stopPropagation(),children:[e.jsx(xr,{className:"mr-2 h-4 w-4"}),"Edit Ticket"]}),n("repair_tickets:write")&&e.jsxs(ct,{onClick:wt=>wt.stopPropagation(),children:[e.jsx(Ot,{className:"mr-2 h-4 w-4"}),"Assign Technician"]}),n("repair_tickets:write")&&e.jsxs(ct,{onClick:wt=>{wt.stopPropagation(),Z(Ee)},disabled:Ee.status==="converted"||Ee.status==="cancelled",children:[e.jsx(Ct,{className:"mr-2 h-4 w-4"}),"Convert to Work Order"]}),e.jsxs(ct,{onClick:wt=>{wt.stopPropagation(),He(Ee)},children:[e.jsx($a,{className:"mr-2 h-4 w-4"}),"Print"]}),e.jsxs(ct,{onClick:wt=>{wt.stopPropagation(),Se(Ee)},children:[e.jsx(Qt,{className:"mr-2 h-4 w-4"}),"Download PDF"]}),n("repair_tickets:delete")&&e.jsxs(e.Fragment,{children:[e.jsx(Lr,{}),e.jsxs(ct,{className:"text-red-600",onClick:wt=>{wt.stopPropagation(),Ae(Ee)},children:[e.jsx(br,{className:"mr-2 h-4 w-4"}),"Delete"]})]})]})]})})]},`ticket-${Ee.id}-${xt}`))})]}),O>1&&e.jsxs("div",{className:"flex items-center justify-between px-2 py-4",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",(E-1)*J+1," to ",Math.min(E*J,R)," of ",R," tickets"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(q,{variant:"outline",size:"sm",onClick:()=>A(Ee=>Math.max(Ee-1,1)),disabled:E===1,children:[e.jsx(_c,{className:"h-4 w-4"}),"Previous"]}),e.jsx("div",{className:"flex items-center space-x-1",children:Array.from({length:Math.min(5,O)},(Ee,xt)=>{const wt=xt+1;return e.jsx(q,{variant:E===wt?"default":"outline",size:"sm",onClick:()=>A(wt),className:"w-8 h-8 p-0",children:wt},wt)})}),e.jsxs(q,{variant:"outline",size:"sm",onClick:()=>A(Ee=>Math.min(Ee+1,O)),disabled:E===O,children:["Next",e.jsx(ri,{className:"h-4 w-4"})]})]})]})]})]})]}),e.jsx(Ft,{open:L,onOpenChange:T,children:e.jsxs(Rt,{className:"sm:max-w-[425px]",children:[e.jsxs(qt,{children:[e.jsx(Lt,{children:"Convert to Work Order"}),e.jsx(Ut,{children:"Please select a technician to assign to this work order or leave unassigned."})]}),e.jsx("div",{className:"grid gap-4 py-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"technician",children:"Technician"}),e.jsxs(tt,{value:Q,onValueChange:W,children:[e.jsx(Je,{children:e.jsx(rt,{placeholder:"Select technician (optional)"})}),e.jsxs(et,{children:[e.jsx(Y,{value:"unassigned",children:"No technician assigned"}),ee.map(Ee=>e.jsxs(Y,{value:Ee.id,children:[Ee.name," (",Ee.role,")"]},Ee.id))]})]})]})}),e.jsxs(Dr,{children:[e.jsx(q,{variant:"outline",onClick:()=>T(!1),children:"Cancel"}),e.jsx(q,{onClick:ke,disabled:he,children:he?e.jsxs(e.Fragment,{children:[e.jsx(Nt,{className:"mr-2 h-4 w-4 animate-spin"}),"Converting..."]}):"Convert to Work Order"})]})]})}),e.jsx(Vs,{open:De,onOpenChange:ne,onConfirm:je,title:"Delete Repair Ticket",itemName:$e?.formatted_number||$e?.ticket_number||`#${$e?.id}`,itemType:"repair ticket"}),e.jsx(wo,{open:we,onOpenChange:_e,itemName:Ye?.formatted_number||Ye?.ticket_number||`#${Ye?.id}`,itemType:"repair ticket",title:"Cannot Delete Converted Repair Ticket",description:"This repair ticket has been converted to a work order and cannot be deleted. Please contact your administrator if you need to remove this ticket."})]})}const tte=t=>t?e.jsx(Oe,{variant:Vr(t),className:Vr(t)==="outline"?Xs(t):void 0,children:Qs(t)}):e.jsx(Oe,{variant:"outline",children:"Unknown"}),rte=t=>{switch(t){case"high":return e.jsx(Oe,{variant:"destructive",children:"High"});case"medium":return e.jsx(Oe,{variant:"outline",className:"border-orange-300 text-orange-700",children:"Medium"});case"low":return e.jsx(Oe,{variant:"outline",className:"border-green-300 text-green-700",children:"Low"});default:return e.jsx(Oe,{variant:"outline",children:t||"Normal"})}},uE=[{key:"work_order_number",label:"Work Order #"},{key:"customer",label:"Customer"},{key:"machine",label:"Machine"},{key:"description",label:"Description"},{key:"status",label:"Status"},{key:"priority",label:"Priority"},{key:"technician",label:"Technician"},{key:"cost",label:"Cost"}];function nte(){const t=er(),{hasPermission:r}=hr(),[n]=qO(),[s,a]=f.useState([]),[l,c]=f.useState(!0),[u,d]=f.useState(""),[h,x]=f.useState(""),[p,y]=f.useState({status:"",priority:"",technician:""}),[v,w]=f.useState(1),[b,N]=f.useState(1),[_,S]=f.useState(0),[k]=f.useState(25),[E,A]=f.useState(""),[O,z]=f.useState(!1),[R,G]=f.useState(null),[J,ie]=f.useState(!1),[V,xe]=f.useState(null),pe=new Date().getFullYear(),[re,M]=f.useState(pe),[B,L]=f.useState([pe]),{visibleColumns:T,toggleColumn:F,isColumnVisible:I,resetColumns:Q,showAllColumns:W,hideAllColumns:ee,isSyncing:ye}=ps("work_orders",gs(uE));f.useEffect(()=>{const Ae=n.get("priority");Ae&&y(je=>({...je,priority:Ae}))},[n]),f.useEffect(()=>{(async()=>{try{const He=(await de.getWorkOrderYears()).data||[];L(He.length>0?He:[pe])}catch(je){console.error("Error fetching years:",je),L([pe])}})()},[]),f.useEffect(()=>{he()},[h,p,v,re]);const he=async()=>{try{c(!0);const Ae={page:v,limit:k,year:re};h&&(Ae.search=h),p.status&&(Ae.status=p.status),p.priority&&(Ae.priority=p.priority),p.technician&&(Ae.technician_id=p.technician);const je=await de.getWorkOrders(Ae),He=je.data||[];a(He),N(je.pagination?.pages||1),S(je.pagination?.total||0)}catch(Ae){A("Failed to load work orders"),console.error("Error fetching work orders:",Ae)}finally{c(!1)}},te=Ae=>{t(`/work-orders/${Ae}`)},De=()=>{x(u),w(1)},ne=()=>{d(""),x(""),w(1)},$e=(Ae,je)=>{y(He=>({...He,[Ae]:je})),w(1)},ge=()=>{y({status:"",priority:"",technician:""}),w(1)},we=()=>{const Ae=new Map;return s.forEach(je=>{je.technician_id&&je.technician_name&&Ae.set(je.technician_id,je.technician_name)}),Array.from(Ae.entries()).sort((je,He)=>je[1].localeCompare(He[1])).map(([je,He])=>({id:je,name:He}))},_e=()=>Object.values(p).filter(Ae=>Ae!=="").length,Ye=Ae=>{t(`/work-orders/${Ae}`)},ht=Ae=>{},Ve=Ae=>{},lt=Ae=>{if(Ae.status==="completed"){xe(Ae),ie(!0);return}G(Ae),z(!0)},yt=async()=>{if(R)try{await de.deleteWorkOrder(R.id),he(),Ne.success("Work order deleted successfully")}catch(Ae){console.error("Error deleting work order:",Ae),Ne.error("Failed to delete work order. Please try again.")}finally{z(!1),G(null)}},Re=async Ae=>{try{const je=await fetch(`${rn}/api/print/work-order/${Ae.id}`,{method:"GET",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!je.ok)throw new Error(`HTTP error! status: ${je.status}`);const He=await je.blob(),Se=window.URL.createObjectURL(He),it=window.open(Se,"_blank");it&&(it.document.title=`Work Order ${Ae.formatted_number||Ae.id}`),window.URL.revokeObjectURL(Se)}catch(je){console.error("Error printing work order:",je),Ne.error("Failed to print work order")}},H=async Ae=>{try{const je=await fetch(`${rn}/api/print/work-order/${Ae.id}`,{method:"GET",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!je.ok)throw new Error(`HTTP error! status: ${je.status}`);const He=await je.blob(),Se=window.URL.createObjectURL(He),it=document.createElement("a");it.href=Se,it.download=`work-order-${Ae.formatted_number||Ae.id}.pdf`,document.body.appendChild(it),it.click(),document.body.removeChild(it),window.URL.revokeObjectURL(Se)}catch(je){console.error("Error downloading work order:",je),Ne.error("Failed to download work order")}},Be=s.filter(Ae=>Ae.status==="pending"),st=s.filter(Ae=>Ae.status==="in_progress"),K=s.filter(Ae=>Ae.status==="completed"),Z=Ae=>{if(Ae.total_cost!==null&&Ae.total_cost!==void 0)return Number(Ae.total_cost)||0;const je=parseFloat(Ae.labor_hours?.toString()||"0")||0,He=parseFloat(Ae.labor_rate?.toString()||"0")||0,Se=parseFloat(Ae.quote_subtotal_parts?.toString()||"0")||0,it=parseFloat(Ae.troubleshooting_fee?.toString()||"0")||0,Tt=je*He+Se+it;return isNaN(Tt)?0:Tt},ke=s.filter(Ae=>Ae.status==="completed").reduce((Ae,je)=>{const He=Z(je);return Ae+(Number(He)||0)},0);return l?e.jsx(gt,{children:e.jsxs("div",{className:"flex items-center justify-center h-64",children:[e.jsx(Nt,{className:"h-8 w-8 animate-spin"}),e.jsx("span",{className:"ml-2",children:"Loading work orders..."})]})}):E?e.jsx(gt,{children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-red-600 mb-4",children:E}),e.jsx(q,{onClick:he,children:"Try Again"})]})})}):e.jsx(gt,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Work Orders"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage repair work orders and track technician progress"})]})}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[e.jsxs(se,{children:[e.jsxs(ue,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(fe,{className:"text-sm font-medium",children:"Pending"}),e.jsx(Zt,{className:"h-4 w-4 text-gray-500"})]}),e.jsxs(ae,{children:[e.jsx("div",{className:"text-2xl font-bold",children:Be.length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Awaiting start"})]})]}),e.jsxs(se,{children:[e.jsxs(ue,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(fe,{className:"text-sm font-medium",children:"In Progress"}),e.jsx(Ct,{className:"h-4 w-4 text-yellow-500"})]}),e.jsxs(ae,{children:[e.jsx("div",{className:"text-2xl font-bold",children:st.length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Being worked on"})]})]}),e.jsxs(se,{children:[e.jsxs(ue,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(fe,{className:"text-sm font-medium",children:"Completed"}),e.jsx(is,{className:"h-4 w-4 text-green-500"})]}),e.jsxs(ae,{children:[e.jsx("div",{className:"text-2xl font-bold",children:K.length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"This month"})]})]}),e.jsxs(se,{children:[e.jsxs(ue,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(fe,{className:"text-sm font-medium",children:"Total Revenue"}),e.jsx(Tn,{className:"h-4 w-4 text-green-500"})]}),e.jsxs(ae,{children:[e.jsx("div",{className:"text-2xl font-bold",children:at(ke||0)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Completed orders"})]})]})]}),e.jsxs(se,{children:[e.jsx(ue,{children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("div",{className:"relative",children:[e.jsx(nr,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),e.jsx(be,{placeholder:"Search work orders...",value:u,onChange:Ae=>d(Ae.target.value),onKeyDown:Ae=>{Ae.key==="Enter"&&De()},className:"pl-10 w-80"}),u&&e.jsx(q,{variant:"ghost",size:"sm",className:"absolute right-1 top-1/2 -translate-y-1/2 h-6 w-6 p-0",onClick:ne,children:e.jsx(hn,{className:"h-3 w-3"})})]}),e.jsx(q,{onClick:De,variant:"outline",children:"Search"}),e.jsxs(Cr,{children:[e.jsx(Sr,{asChild:!0,children:e.jsxs(q,{variant:"outline",className:"relative",children:[e.jsx(Ua,{className:"mr-2 h-4 w-4"}),"Filters",_e()>0&&e.jsx(Oe,{variant:"secondary",className:"ml-2 h-5 w-5 rounded-full p-0 flex items-center justify-center text-xs",children:_e()})]})}),e.jsxs(wr,{align:"end",className:"w-56",children:[e.jsx(Tr,{children:"Filter by"}),e.jsx(Lr,{}),e.jsxs("div",{className:"p-2",children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Status"}),e.jsxs(tt,{value:p.status||"all",onValueChange:Ae=>$e("status",Ae==="all"?"":Ae),children:[e.jsx(Je,{children:e.jsx(rt,{placeholder:"All statuses"})}),e.jsxs(et,{children:[e.jsx(Y,{value:"all",children:"All statuses"}),e.jsx(Y,{value:"intake",children:"Intake"}),e.jsx(Y,{value:"pending",children:"Pending"}),e.jsx(Y,{value:"in_progress",children:"In Progress"}),e.jsx(Y,{value:"completed",children:"Completed"}),e.jsx(Y,{value:"cancelled",children:"Cancelled"}),e.jsx(Y,{value:"testing",children:"Testing"}),e.jsx(Y,{value:"parts_ordered",children:"Parts Ordered"}),e.jsx(Y,{value:"waiting_approval",children:"Waiting Approval"}),e.jsx(Y,{value:"waiting_supplier",children:"Waiting Supplier"}),e.jsx(Y,{value:"service_cancelled",children:"Service Cancelled"})]})]})]}),e.jsxs("div",{className:"p-2",children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Priority"}),e.jsxs(tt,{value:p.priority||"all",onValueChange:Ae=>$e("priority",Ae==="all"?"":Ae),children:[e.jsx(Je,{children:e.jsx(rt,{placeholder:"All priorities"})}),e.jsxs(et,{children:[e.jsx(Y,{value:"all",children:"All priorities"}),e.jsx(Y,{value:"low",children:"Low"}),e.jsx(Y,{value:"medium",children:"Medium"}),e.jsx(Y,{value:"high",children:"High"})]})]})]}),e.jsxs("div",{className:"p-2",children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Technician"}),e.jsxs(tt,{value:p.technician||"all",onValueChange:Ae=>$e("technician",Ae==="all"?"":Ae),children:[e.jsx(Je,{children:e.jsx(rt,{placeholder:"All technicians"})}),e.jsxs(et,{children:[e.jsx(Y,{value:"all",children:"All technicians"}),e.jsx(Y,{value:"unassigned",children:"Unassigned"}),we().map(Ae=>e.jsx(Y,{value:Ae.id,children:Ae.name},Ae.id))]})]})]}),e.jsxs("div",{className:"p-2",children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Year"}),e.jsxs(tt,{value:re.toString(),onValueChange:Ae=>{M(parseInt(Ae)),w(1)},children:[e.jsx(Je,{children:e.jsx(rt,{})}),e.jsx(et,{children:B.map(Ae=>e.jsx(Y,{value:Ae.toString(),children:Ae},Ae))})]})]}),e.jsx(Lr,{}),e.jsxs(ct,{onClick:ge,children:[e.jsx(hn,{className:"mr-2 h-4 w-4"}),"Clear Filters"]})]})]}),e.jsx(ys,{columns:uE,visibleColumns:T,onToggleColumn:F,onShowAll:W,onHideAll:ee,onReset:Q,isSyncing:ye})]})})}),e.jsxs(ae,{children:[e.jsxs(ir,{children:[e.jsx(lr,{children:e.jsxs(ft,{children:[I("work_order_number")&&e.jsx(me,{children:"Work Order #"}),I("customer")&&e.jsx(me,{children:"Customer"}),I("machine")&&e.jsx(me,{children:"Machine"}),I("description")&&e.jsx(me,{children:"Description"}),I("status")&&e.jsx(me,{children:"Status"}),I("priority")&&e.jsx(me,{children:"Priority"}),I("technician")&&e.jsx(me,{children:"Technician"}),I("cost")&&e.jsx(me,{children:"Cost"}),e.jsx(me,{className:"text-right",children:"Actions"})]})}),e.jsx(or,{children:s.map((Ae,je)=>e.jsxs(ft,{className:"cursor-pointer hover:bg-muted/50",onClick:()=>t(`/work-orders/${Ae.id}`),children:[I("work_order_number")&&e.jsx(oe,{className:"font-medium",children:Ae.formatted_number||Ae.work_order_number||`#${Ae.id}`}),I("customer")&&e.jsx(oe,{children:Ae.customer_name||"N/A"}),I("machine")&&e.jsx(oe,{children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:Ae.machine_name||"N/A"}),Ae.model_name&&e.jsx("div",{className:"text-sm text-muted-foreground",children:Ae.model_name})]})}),I("description")&&e.jsx(oe,{className:"max-w-xs",children:e.jsx("div",{className:"truncate",children:Ae.description||"No description"})}),I("status")&&e.jsx(oe,{children:tte(Ae.status)}),I("priority")&&e.jsx(oe,{children:rte(Ae.priority)}),I("technician")&&e.jsx(oe,{className:"text-sm text-muted-foreground",children:Ae.technician_name||"Unassigned"}),I("cost")&&e.jsx(oe,{className:"text-sm text-muted-foreground",children:(()=>{const He=Z(Ae);return He>0?at(He):"N/A"})()}),e.jsx(oe,{className:"text-right",children:e.jsxs(Cr,{children:[e.jsx(Sr,{asChild:!0,children:e.jsx(q,{variant:"ghost",className:"h-8 w-8 p-0",onClick:He=>He.stopPropagation(),children:e.jsx(ss,{className:"h-4 w-4"})})}),e.jsxs(wr,{align:"end",children:[e.jsx(Tr,{children:"Actions"}),e.jsxs(ct,{onClick:He=>{He.stopPropagation(),te(Ae.id)},children:[e.jsx(mr,{className:"mr-2 h-4 w-4"}),"View Details"]}),r("work_orders:write")&&e.jsxs(ct,{onClick:He=>{He.stopPropagation(),Ye(Ae.id)},children:[e.jsx(xr,{className:"mr-2 h-4 w-4"}),"Edit Work Order"]}),r("work_orders:write")&&e.jsxs(ct,{onClick:He=>{He.stopPropagation(),ht(Ae.id)},children:[e.jsx(Ot,{className:"mr-2 h-4 w-4"}),"Assign Technician"]}),r("work_orders:write")&&e.jsxs(ct,{onClick:He=>{He.stopPropagation(),Ve(Ae.id)},children:[e.jsx(Zt,{className:"mr-2 h-4 w-4"}),"Log Time"]}),e.jsxs(ct,{onClick:He=>{He.stopPropagation(),Re(Ae)},children:[e.jsx($a,{className:"mr-2 h-4 w-4"}),"Print"]}),e.jsxs(ct,{onClick:He=>{He.stopPropagation(),H(Ae)},children:[e.jsx(Qt,{className:"mr-2 h-4 w-4"}),"Download PDF"]}),r("work_orders:delete")&&e.jsxs(e.Fragment,{children:[e.jsx(Lr,{}),e.jsxs(ct,{className:"text-red-600",onClick:He=>{He.stopPropagation(),lt(Ae)},children:[e.jsx(br,{className:"mr-2 h-4 w-4"}),"Delete"]})]})]})]})})]},`workorder-${Ae.id}-${je}`))})]}),b>1&&e.jsxs("div",{className:"flex items-center justify-between px-2 py-4",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",(v-1)*k+1," to ",Math.min(v*k,_)," of ",_," work orders"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(q,{variant:"outline",size:"sm",onClick:()=>w(Ae=>Math.max(Ae-1,1)),disabled:v===1,children:[e.jsx(_c,{className:"h-4 w-4"}),"Previous"]}),e.jsx("div",{className:"flex items-center space-x-1",children:Array.from({length:Math.min(5,b)},(Ae,je)=>{const He=je+1;return e.jsx(q,{variant:v===He?"default":"outline",size:"sm",onClick:()=>w(He),className:"w-8 h-8 p-0",children:He},He)})}),e.jsxs(q,{variant:"outline",size:"sm",onClick:()=>w(Ae=>Math.min(Ae+1,b)),disabled:v===b,children:["Next",e.jsx(ri,{className:"h-4 w-4"})]})]})]})]})]}),e.jsx(Vs,{open:O,onOpenChange:z,onConfirm:yt,title:"Delete Work Order",itemName:R?.formatted_number||R?.work_order_number||`#${R?.id}`,itemType:"work order"}),e.jsx(wo,{open:J,onOpenChange:ie,itemName:V?.formatted_number||V?.work_order_number||`#${V?.id}`,itemType:"work order",title:"Cannot Delete Completed Work Order"})]})})}function r_({currentPage:t,totalPages:r,totalCount:n,pageSize:s,onPageChange:a,itemName:l="items"}){if(r<=1)return null;const c=(t-1)*s+1,u=Math.min(t*s,n),d=()=>{const h=[];if(r<=7)for(let p=1;p<=r;p++)h.push(p);else if(h.push(1),t<=3){for(let p=2;p<=Math.min(5,r-1);p++)h.push(p);h.push("..."),h.push(r)}else if(t>=r-2){h.push("...");for(let p=Math.max(r-4,2);p<=r;p++)h.push(p)}else{h.push("...");for(let p=t-1;p<=t+1;p++)h.push(p);h.push("..."),h.push(r)}return h};return e.jsxs("div",{className:"flex items-center justify-between px-2 py-4",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",c," to ",u," of ",n," ",l]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(q,{variant:"outline",size:"sm",onClick:()=>a(t-1),disabled:t===1,children:[e.jsx(_c,{className:"h-4 w-4 mr-1"}),"Previous"]}),e.jsx("div",{className:"flex items-center space-x-1",children:d().map((h,x)=>h==="..."?e.jsx("span",{className:"px-2 text-muted-foreground",children:"..."},`ellipsis-${x}`):e.jsx(q,{variant:t===h?"default":"outline",size:"sm",onClick:()=>a(h),className:"min-w-[2.5rem]",children:h},h))}),e.jsxs(q,{variant:"outline",size:"sm",onClick:()=>a(t+1),disabled:t===r,children:["Next",e.jsx(ri,{className:"h-4 w-4 ml-1"})]})]})]})}const Kx=[{value:"new",label:"New Lead"},{value:"contacted",label:"Contacted"},{value:"qualified",label:"Qualified"},{value:"proposal",label:"Proposal"},{value:"negotiation",label:"Negotiation"},{value:"won",label:"Won"},{value:"lost",label:"Lost"}],mE=[{id:"new",name:"New",color:"#3b82f6",description:"Fresh leads that need initial contact"},{id:"contacted",name:"Contacted",color:"#8b5cf6",description:"Initial contact has been made"},{id:"qualified",name:"Qualified",color:"#f59e0b",description:"Leads that meet qualification criteria"},{id:"proposal",name:"Proposal",color:"#ef4444",description:"Proposal has been sent"},{id:"negotiation",name:"Negotiation",color:"#ec4899",description:"Active negotiations in progress"},{id:"won",name:"Won",color:"#10b981",description:"Successfully closed deals"},{id:"lost",name:"Lost",color:"#6b7280",description:"Lost opportunities"}],f5=["Website","Referral","Cold Call","Trade Show","Social Media","Email Campaign","Advertisement","Other"],hE=[{key:"customer",label:"Customer"},{key:"company",label:"Company"},{key:"contact",label:"Contact"},{key:"value",label:"Potential Value"},{key:"quality",label:"Quality"},{key:"stage",label:"Stage"},{key:"assigned_to",label:"Assigned To"},{key:"next_follow_up",label:"Next Follow-up"}],fE=[{key:"lead",label:"Lead"},{key:"date",label:"Follow-up Date"},{key:"type",label:"Type"},{key:"notes",label:"Notes"},{key:"created_by",label:"Created By"},{key:"status",label:"Status"}];function ste(){const{user:t,hasPermission:r}=hr();er();const n=Bw(),[s,a]=f.useState(""),[l,c]=f.useState({stage:"",quality:"",source:"",assigned_to:"",created_by:""}),[u,d]=f.useState(1),[h,x]=f.useState(1),[p,y]=f.useState(0),[v]=f.useState(25),w=ps("leads",gs(hE)),b=ps("followups",gs(fE)),[N,_]=f.useState(!1),[S,k]=f.useState(!1),[E,A]=f.useState(!1),[O,z]=f.useState(!1),[R,G]=f.useState(!1),[J,ie]=f.useState(!1),[V,xe]=f.useState(!1),[pe,re]=f.useState(!1),[M,B]=f.useState({customer_name:"",company_name:"",email:"",phone:"",potential_value:"",lead_quality:"medium",sales_stage:"new",assigned_to:"",next_follow_up:"",sales_notes:"",source:""}),[L,T]=f.useState(null),[F,I]=f.useState(null),[Q,W]=f.useState(null),[ee,ye]=f.useState(null),[he,te]=f.useState({follow_up_date:"",follow_up_type:"",notes:""}),{data:De,isLoading:ne,refetch:$e}=jr({queryKey:["leads",s,l,u],queryFn:async()=>{const le=await de.getLeads({search:s||void 0,stage:l.stage||void 0,quality:l.quality||void 0,source:l.source||void 0,assigned_to:l.assigned_to||void 0,created_by:l.created_by||void 0,page:u,limit:v});return le.pagination&&(x(le.pagination.pages||1),y(le.pagination.total||0)),le},staleTime:120*1e3}),{data:ge}=jr({queryKey:["users"],queryFn:()=>de.getUsers({limit:100}),staleTime:600*1e3}),{data:we,isLoading:_e}=jr({queryKey:["all-follow-ups"],queryFn:()=>de.getAllFollowUps(),staleTime:120*1e3}),Ye=De?.data||[],ht=ge?.data||[],Ve=we?.data||[],lt=fd({mutationFn:le=>de.createLead(le),onSuccess:()=>{n.invalidateQueries({queryKey:["leads"]}),_(!1),K()}}),yt=fd({mutationFn:({id:le,leadData:Qe})=>de.updateLead(le,Qe),onSuccess:()=>{n.invalidateQueries({queryKey:["leads"]}),k(!1),K()}}),Re=fd({mutationFn:le=>de.deleteLead(le),onSuccess:()=>{n.invalidateQueries({queryKey:["leads"]}),A(!1),I(null)}}),H=fd({mutationFn:({leadId:le,followUpData:Qe})=>de.addLeadFollowUp(le,Qe),onSuccess:()=>{n.invalidateQueries({queryKey:["all-follow-ups"]}),G(!1),te({follow_up_date:"",follow_up_type:"",notes:""})}}),Be=fd({mutationFn:({leadId:le,followUpId:Qe,followUpData:P})=>de.updateLeadFollowUp(le,Qe,P),onSuccess:()=>{n.invalidateQueries({queryKey:["all-follow-ups"]}),ie(!1),W(null),te({follow_up_date:"",follow_up_type:"",notes:""})}}),st=fd({mutationFn:({leadId:le,followUpId:Qe})=>de.deleteFollowUp(le,Qe),onSuccess:()=>{n.invalidateQueries({queryKey:["all-follow-ups"]}),ye(null)}}),K=()=>{B({customer_name:"",company_name:"",email:"",phone:"",potential_value:"",lead_quality:"medium",sales_stage:"new",assigned_to:t?.id?.toString()||"",next_follow_up:"",sales_notes:"",source:""}),T(null)},Z=()=>{r("pipeline:write")&&(K(),_(!0))},ke=le=>{r("pipeline:write")&&(B({customer_name:le.customer_name,company_name:le.company_name||"",email:le.email||"",phone:le.phone||"",potential_value:le.potential_value.toString(),lead_quality:le.lead_quality,sales_stage:le.sales_stage,assigned_to:le.assigned_to?.toString()||"",next_follow_up:le.next_follow_up||"",sales_notes:le.sales_notes||"",source:le.source||""}),T(le),k(!0))},Ae=()=>{const le={...M,potential_value:parseFloat(M.potential_value)||0,assigned_to:M.assigned_to?parseInt(M.assigned_to):null,next_follow_up:M.next_follow_up||null};L?yt.mutate({id:L.id.toString(),leadData:le}):lt.mutate(le)},je=le=>{r("pipeline:delete")&&(I(le),A(!0))},He=()=>{F&&Re.mutate(F.id.toString())},Se=()=>{a(""),c({stage:"",quality:"",source:"",assigned_to:"",created_by:""})},it=()=>{let le=0;return s&&le++,l.stage&&le++,l.quality&&le++,l.source&&le++,l.assigned_to&&le++,l.created_by&&le++,le},Me=le=>{r("pipeline:write")&&(T(le),te({follow_up_date:"",follow_up_type:"",notes:""}),G(!0))},Tt=le=>{W(le),te({follow_up_date:le.follow_up_date,follow_up_type:le.follow_up_type,notes:le.notes}),ie(!0)},Pe=le=>{ye(le)},Ee=()=>{L&&H.mutate({leadId:L.id.toString(),followUpData:he})},xt=()=>{Q&&L&&Be.mutate({leadId:L.id.toString(),followUpId:Q.id.toString(),followUpData:he})},wt=()=>{ee&&L&&st.mutate({leadId:L.id.toString(),followUpId:ee.id.toString()})},Le=le=>{r("pipeline:write")&&(T(le),z(!0))},ot=le=>{if(L){const Qe={...L,assigned_to:le?parseInt(le):null};yt.mutate({id:L.id.toString(),leadData:Qe})}z(!1),T(null)},It=()=>{z(!1),T(null)},Er=le=>{T(le),xe(!0)},Yr=le=>{W(le),re(!0)},Gn=()=>{xe(!1),T(null)},Qn=()=>{re(!1),W(null)},sr=(()=>{const le={};return mE.forEach(Qe=>{const P=Ye.filter($=>$.sales_stage===Qe.id);le[Qe.id]={count:P.length,value:P.reduce(($,We)=>{const vt=We.potential_value,dt=typeof vt=="string"?parseFloat(vt):vt;return typeof dt=="number"&&!isNaN(dt)?$+dt:$},0)}}),le})();return e.jsx(gt,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Pipeline & Leads"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage your sales pipeline and leads in one unified view"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(q,{variant:"outline",size:"sm",onClick:()=>$e(),children:[e.jsx(Ws,{className:"mr-2 h-4 w-4"}),"Refresh"]}),r("pipeline:write")&&e.jsxs(q,{onClick:Z,children:[e.jsx(Vt,{className:"mr-2 h-4 w-4"}),"Create Lead"]})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsxs(se,{children:[e.jsxs(ue,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(fe,{className:"text-sm font-medium",children:"Total Leads"}),e.jsx(xs,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(ae,{children:[e.jsx("div",{className:"text-2xl font-bold",children:Ye.length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Across all stages"})]})]}),e.jsxs(se,{children:[e.jsxs(ue,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(fe,{className:"text-sm font-medium",children:"Total Value"}),e.jsx(Tn,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(ae,{children:[e.jsx("div",{className:"text-2xl font-bold",children:ne?e.jsx("div",{className:"animate-pulse bg-gray-200 h-8 w-24 rounded"}):(()=>{if(!Ye||Ye.length===0)return at(0);const le=Ye.reduce((Qe,P)=>{const $=P.potential_value,We=typeof $=="string"?parseFloat($):$;return typeof We=="number"&&!isNaN(We)?Qe+We:Qe},0);return at(le)})()}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Pipeline value"})]})]}),e.jsxs(se,{children:[e.jsxs(ue,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(fe,{className:"text-sm font-medium",children:"Conversion Rate"}),e.jsx(Os,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(ae,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:[Ye.length>0?Math.round(Ye.filter(le=>le.sales_stage==="won").length/Ye.length*100):0,"%"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Won vs total leads"})]})]}),e.jsxs(se,{children:[e.jsxs(ue,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(fe,{className:"text-sm font-medium",children:"Overdue Follow-ups"}),e.jsx(fs,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(ae,{children:[e.jsx("div",{className:"text-2xl font-bold",children:Ye.filter(le=>le.next_follow_up&&new Date(le.next_follow_up)<new Date).length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Need attention"})]})]})]}),e.jsxs(se,{children:[e.jsxs(ue,{children:[e.jsx(fe,{children:"Pipeline Stages"}),e.jsx(Xt,{children:"Overview of leads in each pipeline stage"})]}),e.jsx(ae,{children:e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4 xl:grid-cols-7",children:mE.map(le=>e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-4 h-4 rounded-full mx-auto mb-2",style:{backgroundColor:le.color}}),e.jsx("div",{className:"text-sm font-medium",children:le.name}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[sr[le.id]?.count||0," leads"]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:at(sr[le.id]?.value||0)})]},le.id))})})]}),e.jsxs(Ys,{defaultValue:"leads",className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(Ps,{children:[e.jsxs(Kt,{value:"leads",className:"flex items-center gap-2",children:["Leads",e.jsx(Oe,{variant:"secondary",className:"ml-1",children:Ye.length})]}),e.jsxs(Kt,{value:"follow-ups",className:"flex items-center gap-2",children:["Follow-ups",e.jsx(Oe,{variant:"secondary",className:"ml-1",children:Ve.length})]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(nr,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),e.jsx(be,{placeholder:"Search leads...",value:s,onChange:le=>a(le.target.value),className:"pl-10 w-[300px]"})]}),e.jsxs(Cr,{children:[e.jsx(Sr,{asChild:!0,children:e.jsxs(q,{variant:"outline",children:[e.jsx(Ua,{className:"mr-2 h-4 w-4"}),"Filter",it()>0&&e.jsx(Oe,{variant:"secondary",className:"ml-2",children:it()})]})}),e.jsxs(wr,{align:"end",className:"w-56",children:[e.jsx(Tr,{children:"Filter by"}),e.jsx(Lr,{}),e.jsxs("div",{className:"p-2",children:[e.jsx(U,{className:"text-xs font-medium text-muted-foreground",children:"Stage"}),e.jsxs(tt,{value:l.stage,onValueChange:le=>{c(Qe=>({...Qe,stage:le==="clear"?"":le})),d(1)},children:[e.jsx(Je,{className:"h-8",children:e.jsx(rt,{placeholder:"All stages"})}),e.jsxs(et,{children:[e.jsx(Y,{value:"clear",children:"Clear Stage"}),Kx.map(le=>e.jsx(Y,{value:le.value,children:le.label},le.value))]})]})]}),e.jsxs("div",{className:"p-2",children:[e.jsx(U,{className:"text-xs font-medium text-muted-foreground",children:"Quality"}),e.jsxs(tt,{value:l.quality,onValueChange:le=>{c(Qe=>({...Qe,quality:le==="clear"?"":le})),d(1)},children:[e.jsx(Je,{className:"h-8",children:e.jsx(rt,{placeholder:"All quality"})}),e.jsxs(et,{children:[e.jsx(Y,{value:"clear",children:"Clear Quality"}),e.jsx(Y,{value:"high",children:"High"}),e.jsx(Y,{value:"medium",children:"Medium"}),e.jsx(Y,{value:"low",children:"Low"})]})]})]}),e.jsxs("div",{className:"p-2",children:[e.jsx(U,{className:"text-xs font-medium text-muted-foreground",children:"Source"}),e.jsxs(tt,{value:l.source,onValueChange:le=>{c(Qe=>({...Qe,source:le==="clear"?"":le}))},children:[e.jsx(Je,{className:"h-8",children:e.jsx(rt,{placeholder:"All sources"})}),e.jsxs(et,{children:[e.jsx(Y,{value:"clear",children:"Clear Source"}),f5.map(le=>e.jsx(Y,{value:le,children:le},le))]})]})]}),e.jsxs("div",{className:"p-2",children:[e.jsx(U,{className:"text-xs font-medium text-muted-foreground",children:"Assigned To"}),e.jsxs(tt,{value:l.assigned_to,onValueChange:le=>{c(Qe=>({...Qe,assigned_to:le==="clear"?"":le}))},children:[e.jsx(Je,{className:"h-8",children:e.jsx(rt,{placeholder:"All users"})}),e.jsxs(et,{children:[e.jsx(Y,{value:"clear",children:"Clear Assignment"}),e.jsx(Y,{value:"unassigned",children:"Unassigned"}),ht.map(le=>e.jsx(Y,{value:le.id.toString(),children:le.name},le.id))]})]})]}),e.jsxs("div",{className:"p-2",children:[e.jsx(U,{className:"text-xs font-medium text-muted-foreground",children:"Created By"}),e.jsxs(tt,{value:l.created_by,onValueChange:le=>{c(Qe=>({...Qe,created_by:le==="clear"?"":le}))},children:[e.jsx(Je,{className:"h-8",children:e.jsx(rt,{placeholder:"All creators"})}),e.jsxs(et,{children:[e.jsx(Y,{value:"clear",children:"Clear Creator"}),ht.map(le=>e.jsx(Y,{value:le.id.toString(),children:le.name},le.id))]})]})]}),e.jsx(Lr,{}),e.jsx(ct,{onClick:Se,className:"text-center",children:"Clear Filters"})]})]}),e.jsx(ys,{columns:hE,visibleColumns:w.visibleColumns,onToggleColumn:w.toggleColumn,onShowAll:w.showAllColumns,onHideAll:w.hideAllColumns,onReset:w.resetColumns,isSyncing:w.isSyncing})]})]}),e.jsx(Gt,{value:"leads",className:"space-y-4",children:e.jsx(se,{children:e.jsxs(ae,{className:"p-0",children:[e.jsxs(ir,{children:[e.jsx(lr,{children:e.jsxs(ft,{children:[w.isColumnVisible("customer")&&e.jsx(me,{children:"Customer"}),w.isColumnVisible("company")&&e.jsx(me,{children:"Company"}),w.isColumnVisible("value")&&e.jsx(me,{children:"Value"}),w.isColumnVisible("quality")&&e.jsx(me,{children:"Quality"}),w.isColumnVisible("stage")&&e.jsx(me,{children:"Stage"}),w.isColumnVisible("assigned_to")&&e.jsx(me,{children:"Assigned To"}),w.isColumnVisible("next_follow_up")&&e.jsx(me,{children:"Next Follow-up"}),e.jsx(me,{className:"w-[50px]",children:"Actions"})]})}),e.jsx(or,{children:ne?e.jsx(ft,{children:e.jsx(oe,{colSpan:8,className:"text-center py-8",children:e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx(Nt,{className:"h-6 w-6 animate-spin mr-2"}),"Loading leads..."]})})}):Ye.length===0?e.jsx(ft,{children:e.jsx(oe,{colSpan:8,className:"text-center py-8 text-muted-foreground",children:"No leads found"})}):Ye.map(le=>e.jsxs(ft,{className:"cursor-pointer hover:bg-muted/50",onClick:()=>Er(le),children:[w.isColumnVisible("customer")&&e.jsx(oe,{children:e.jsx("div",{className:"flex items-center space-x-2",children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:le.customer_name}),le.email&&e.jsx("div",{className:"text-sm text-muted-foreground",children:le.email})]})})}),w.isColumnVisible("company")&&e.jsx(oe,{children:le.company_name||"-"}),w.isColumnVisible("value")&&e.jsx(oe,{className:"font-medium",children:at((()=>{const Qe=le.potential_value,P=typeof Qe=="string"?parseFloat(Qe):Qe;return typeof P=="number"&&!isNaN(P)?P:0})())}),w.isColumnVisible("quality")&&e.jsx(oe,{children:e.jsx(Oe,{className:x5(le.lead_quality),children:le.lead_quality})}),w.isColumnVisible("stage")&&e.jsx(oe,{children:e.jsx(Oe,{className:p5(le.sales_stage),children:Kx.find(Qe=>Qe.value===le.sales_stage)?.label||le.sales_stage})}),w.isColumnVisible("assigned_to")&&e.jsx(oe,{children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ot,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{children:le.assigned_to_name||"Unassigned"})]})}),w.isColumnVisible("next_follow_up")&&e.jsx(oe,{children:le.next_follow_up?jt(le.next_follow_up):"-"}),e.jsx(oe,{children:e.jsxs(Cr,{children:[e.jsx(Sr,{asChild:!0,children:e.jsx(q,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",onClick:Qe=>Qe.stopPropagation(),children:e.jsx(ss,{className:"h-4 w-4"})})}),e.jsxs(wr,{align:"end",children:[r("pipeline:write")&&e.jsxs(ct,{onClick:Qe=>{Qe.stopPropagation(),ke(le)},children:[e.jsx(xr,{className:"mr-2 h-4 w-4"}),"Edit"]}),r("pipeline:write")&&e.jsxs(ct,{onClick:Qe=>{Qe.stopPropagation(),Le(le)},children:[e.jsx(Ot,{className:"mr-2 h-4 w-4"}),"Assign User"]}),r("pipeline:write")&&e.jsxs(ct,{onClick:Qe=>{Qe.stopPropagation(),Me(le)},children:[e.jsx(is,{className:"mr-2 h-4 w-4"}),"Add Follow-up"]}),r("pipeline:write")&&e.jsx(Lr,{}),r("pipeline:delete")&&e.jsxs(ct,{onClick:Qe=>{Qe.stopPropagation(),je(le)},children:[e.jsx(br,{className:"mr-2 h-4 w-4"}),"Delete"]})]})]})})]},le.id))})]}),e.jsx(r_,{currentPage:u,totalPages:h,totalCount:p,pageSize:v,onPageChange:d,itemName:"leads"})]})})}),e.jsx(Gt,{value:"follow-ups",className:"space-y-4",children:e.jsxs(se,{children:[e.jsx(ue,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(fe,{children:"Follow-ups"}),e.jsx(ys,{columns:fE,visibleColumns:b.visibleColumns,onToggleColumn:b.toggleColumn,onShowAll:b.showAllColumns,onHideAll:b.hideAllColumns,onReset:b.resetColumns,isSyncing:b.isSyncing})]})}),e.jsx(ae,{className:"p-0",children:e.jsxs(ir,{children:[e.jsx(lr,{children:e.jsxs(ft,{children:[b.isColumnVisible("lead")&&e.jsx(me,{children:"Lead"}),b.isColumnVisible("date")&&e.jsx(me,{children:"Follow-up Date"}),b.isColumnVisible("type")&&e.jsx(me,{children:"Type"}),b.isColumnVisible("notes")&&e.jsx(me,{children:"Notes"}),b.isColumnVisible("created_by")&&e.jsx(me,{children:"Created By"}),b.isColumnVisible("status")&&e.jsx(me,{children:"Status"}),e.jsx(me,{className:"w-[50px]",children:"Actions"})]})}),e.jsx(or,{children:_e?e.jsx(ft,{children:e.jsx(oe,{colSpan:8,className:"text-center py-8",children:e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx(Nt,{className:"h-6 w-6 animate-spin mr-2"}),"Loading follow-ups..."]})})}):Ve.length===0?e.jsx(ft,{children:e.jsx(oe,{colSpan:8,className:"text-center py-8 text-muted-foreground",children:"No follow-ups found"})}):Ve.map(le=>e.jsxs(ft,{className:"cursor-pointer hover:bg-muted/50",onClick:()=>Yr(le),children:[b.isColumnVisible("lead")&&e.jsx(oe,{children:e.jsx("div",{className:"font-medium",children:Ye.find(Qe=>Qe.id===le.lead_id)?.customer_name||"Unknown Lead"})}),b.isColumnVisible("date")&&e.jsx(oe,{children:jt(le.follow_up_date)}),b.isColumnVisible("type")&&e.jsx(oe,{children:le.follow_up_type||"-"}),b.isColumnVisible("notes")&&e.jsx(oe,{className:"max-w-[200px] truncate",children:le.notes}),b.isColumnVisible("created_by")&&e.jsx(oe,{children:le.created_by_name}),b.isColumnVisible("status")&&e.jsx(oe,{children:e.jsx(Oe,{variant:le.completed?"default":"secondary",children:le.completed?"Completed":"Pending"})}),e.jsx(oe,{children:e.jsxs(Cr,{children:[e.jsx(Sr,{asChild:!0,children:e.jsx(q,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",onClick:Qe=>Qe.stopPropagation(),children:e.jsx(ss,{className:"h-4 w-4"})})}),e.jsxs(wr,{align:"end",children:[e.jsxs(ct,{onClick:Qe=>{Qe.stopPropagation(),Tt(le)},children:[e.jsx(xr,{className:"mr-2 h-4 w-4"}),"Edit"]}),e.jsxs(ct,{onClick:Qe=>{Qe.stopPropagation(),Pe(le)},children:[e.jsx(br,{className:"mr-2 h-4 w-4"}),"Delete"]})]})]})})]},le.id))})]})})]})})]}),e.jsx(ite,{isOpen:N||S,onClose:()=>{_(!1),k(!1),K()},onSave:Ae,formData:M,setFormData:B,users:ht,isEdit:!!L,isLoading:lt.isPending||yt.isPending}),e.jsx(Vs,{open:E,onOpenChange:A,onConfirm:He,title:"Delete Lead",description:`Are you sure you want to delete lead "${F?.customer_name}"? This action cannot be undone.`,itemName:F?.customer_name,itemType:"lead",isLoading:Re.isPending}),e.jsx(xE,{isOpen:R,onClose:()=>{G(!1),te({follow_up_date:"",follow_up_type:"",notes:""})},onSave:Ee,formData:he,setFormData:te,isLoading:H.isPending,title:"Add Follow-up"}),e.jsx(xE,{isOpen:J,onClose:()=>{ie(!1),W(null),te({follow_up_date:"",follow_up_type:"",notes:""})},onSave:xt,formData:he,setFormData:te,isLoading:Be.isPending,title:"Edit Follow-up"}),e.jsx(Vs,{open:!!ee,onOpenChange:()=>ye(null),onConfirm:wt,title:"Delete Follow-up",description:"Are you sure you want to delete this follow-up? This action cannot be undone.",itemName:"follow-up",itemType:"follow-up",isLoading:st.isPending}),e.jsx(ate,{isOpen:O,onClose:It,onSave:ot,users:ht,isLoading:yt.isPending}),e.jsx(lte,{isOpen:V,onClose:Gn,lead:L,users:ht}),e.jsx(ote,{isOpen:pe,onClose:Qn,followUp:Q,leads:Ye})]})})}function xE({isOpen:t,onClose:r,onSave:n,formData:s,setFormData:a,isLoading:l,title:c}){return e.jsx(Ft,{open:t,onOpenChange:r,children:e.jsxs(Rt,{className:"sm:max-w-[500px]",children:[e.jsxs(qt,{children:[e.jsx(Lt,{children:c}),e.jsx(Ut,{children:c==="Add Follow-up"?"Add a new follow-up for this lead.":"Update the follow-up information."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"follow_up_date",children:"Follow-up Date *"}),e.jsx(Rn,{value:s.follow_up_date,onChange:u=>a({...s,follow_up_date:u}),placeholder:"Select follow-up date"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"follow_up_type",children:"Follow-up Type"}),e.jsxs(tt,{value:s.follow_up_type,onValueChange:u=>a({...s,follow_up_type:u}),children:[e.jsx(Je,{children:e.jsx(rt,{placeholder:"Select type"})}),e.jsxs(et,{children:[e.jsx(Y,{value:"call",children:"Call"}),e.jsx(Y,{value:"email",children:"Email"}),e.jsx(Y,{value:"meeting",children:"Meeting"}),e.jsx(Y,{value:"demo",children:"Demo"}),e.jsx(Y,{value:"proposal",children:"Proposal"}),e.jsx(Y,{value:"other",children:"Other"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"notes",children:"Notes"}),e.jsx(ar,{id:"notes",value:s.notes,onChange:u=>a({...s,notes:u.target.value}),placeholder:"Enter follow-up notes",rows:3})]})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(q,{variant:"outline",onClick:r,children:"Cancel"}),e.jsx(q,{onClick:n,disabled:l,children:l?"Saving...":"Save"})]})]})})}function ate({isOpen:t,onClose:r,onSave:n,users:s,isLoading:a}){const[l,c]=f.useState(""),u=()=>{n(l),c("")},d=()=>{r(),c("")};return e.jsx(Ft,{open:t,onOpenChange:d,children:e.jsxs(Rt,{className:"sm:max-w-[400px]",children:[e.jsxs(qt,{children:[e.jsx(Lt,{children:"Assign User"}),e.jsx(Ut,{children:"Select a user to assign this lead to."})]}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"assigned_user",children:"Assign To"}),e.jsxs(tt,{value:l,onValueChange:c,children:[e.jsx(Je,{children:e.jsx(rt,{placeholder:"Select user"})}),e.jsxs(et,{children:[e.jsx(Y,{value:"",children:"Unassign"}),s.map(h=>e.jsx(Y,{value:h.id.toString(),children:h.name},h.id))]})]})]})}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(q,{variant:"outline",onClick:d,children:"Cancel"}),e.jsx(q,{onClick:u,disabled:a,children:a?"Saving...":"Assign"})]})]})})}function ite({isOpen:t,onClose:r,onSave:n,formData:s,setFormData:a,users:l,isEdit:c,isLoading:u}){return e.jsx(Ft,{open:t,onOpenChange:r,children:e.jsxs(Rt,{className:"sm:max-w-[600px] max-h-[90vh] overflow-y-auto",children:[e.jsxs(qt,{children:[e.jsx(Lt,{children:c?"Edit Lead":"Create New Lead"}),e.jsx(Ut,{children:c?"Update the lead information below.":"Fill in the details to create a new lead."})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"customer_name",children:"Customer Name *"}),e.jsx(be,{id:"customer_name",value:s.customer_name,onChange:d=>a({...s,customer_name:d.target.value}),placeholder:"Enter customer name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"company_name",children:"Company Name"}),e.jsx(be,{id:"company_name",value:s.company_name,onChange:d=>a({...s,company_name:d.target.value}),placeholder:"Enter company name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"email",children:"Email"}),e.jsx(be,{id:"email",type:"email",value:s.email,onChange:d=>a({...s,email:d.target.value}),placeholder:"Enter email address"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"phone",children:"Phone"}),e.jsx(be,{id:"phone",value:s.phone,onChange:d=>a({...s,phone:d.target.value}),placeholder:"Enter phone number"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"potential_value",children:"Potential Value"}),e.jsx(be,{id:"potential_value",type:"number",value:s.potential_value,onChange:d=>a({...s,potential_value:d.target.value}),placeholder:"Enter potential value"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"lead_quality",children:"Lead Quality"}),e.jsxs(tt,{value:s.lead_quality,onValueChange:d=>a({...s,lead_quality:d}),children:[e.jsx(Je,{children:e.jsx(rt,{})}),e.jsxs(et,{children:[e.jsx(Y,{value:"high",children:"High"}),e.jsx(Y,{value:"medium",children:"Medium"}),e.jsx(Y,{value:"low",children:"Low"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"sales_stage",children:"Sales Stage"}),e.jsxs(tt,{value:s.sales_stage,onValueChange:d=>a({...s,sales_stage:d}),children:[e.jsx(Je,{children:e.jsx(rt,{})}),e.jsx(et,{children:Kx.map(d=>e.jsx(Y,{value:d.value,children:d.label},d.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"source",children:"Source"}),e.jsxs(tt,{value:s.source,onValueChange:d=>a({...s,source:d}),children:[e.jsx(Je,{children:e.jsx(rt,{placeholder:"Select source"})}),e.jsx(et,{children:f5.map(d=>e.jsx(Y,{value:d,children:d},d))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"assigned_to",children:"Assign To"}),e.jsxs(tt,{value:s.assigned_to,onValueChange:d=>a({...s,assigned_to:d}),children:[e.jsx(Je,{children:e.jsx(rt,{placeholder:"Select user"})}),e.jsx(et,{children:l.map(d=>e.jsx(Y,{value:d.id.toString(),children:d.name},d.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"next_follow_up",children:"Next Follow-up"}),e.jsx(Rn,{value:s.next_follow_up,onChange:d=>a({...s,next_follow_up:d}),placeholder:"Select next follow-up date"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"sales_notes",children:"Sales Notes"}),e.jsx(ar,{id:"sales_notes",value:s.sales_notes,onChange:d=>a({...s,sales_notes:d.target.value}),placeholder:"Enter sales notes",rows:3})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(q,{variant:"outline",onClick:r,children:"Cancel"}),e.jsx(q,{onClick:n,disabled:u,children:u?"Saving...":c?"Update Lead":"Create Lead"})]})]})})}const x5=t=>{switch(t){case"high":return"bg-green-100 text-green-800 hover:bg-green-200";case"medium":return"bg-yellow-100 text-yellow-800 hover:bg-yellow-200";case"low":return"bg-red-100 text-red-800 hover:bg-red-200";default:return"bg-gray-100 text-gray-800 hover:bg-gray-200"}},p5=t=>{switch(t){case"new":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300";case"contacted":return"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-300";case"qualified":return"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-300";case"proposal":return"bg-indigo-100 text-indigo-800 dark:bg-indigo-900 dark:text-indigo-300";case"negotiation":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300";case"won":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300";case"lost":return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-300";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-300"}};function lte({isOpen:t,onClose:r,lead:n,users:s}){if(!n)return null;const a=s.find(c=>c.id===n.assigned_to),l=s.find(c=>c.name===n.created_by_name);return e.jsx(Ft,{open:t,onOpenChange:r,children:e.jsxs(Rt,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(qt,{children:[e.jsx(Lt,{children:"Lead Details"}),e.jsx(Ut,{children:"View detailed information about this lead including customer details, lead information, and sales notes."})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Customer Information"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(U,{className:"text-sm font-medium text-muted-foreground",children:"Customer Name"}),e.jsx("p",{className:"text-sm",children:n.customer_name})]}),e.jsxs("div",{children:[e.jsx(U,{className:"text-sm font-medium text-muted-foreground",children:"Company"}),e.jsx("p",{className:"text-sm",children:n.company_name||"-"})]}),e.jsxs("div",{children:[e.jsx(U,{className:"text-sm font-medium text-muted-foreground",children:"Email"}),e.jsx("p",{className:"text-sm",children:n.email||"-"})]}),e.jsxs("div",{children:[e.jsx(U,{className:"text-sm font-medium text-muted-foreground",children:"Phone"}),e.jsx("p",{className:"text-sm",children:n.phone||"-"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Lead Information"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(U,{className:"text-sm font-medium text-muted-foreground",children:"Potential Value"}),e.jsx("p",{className:"text-sm font-medium",children:at(n.potential_value||0)})]}),e.jsxs("div",{children:[e.jsx(U,{className:"text-sm font-medium text-muted-foreground",children:"Lead Quality"}),e.jsx(Oe,{className:x5(n.lead_quality),children:n.lead_quality})]}),e.jsxs("div",{children:[e.jsx(U,{className:"text-sm font-medium text-muted-foreground",children:"Sales Stage"}),e.jsx(Oe,{className:p5(n.sales_stage),children:Kx.find(c=>c.value===n.sales_stage)?.label||n.sales_stage})]}),e.jsxs("div",{children:[e.jsx(U,{className:"text-sm font-medium text-muted-foreground",children:"Source"}),e.jsx("p",{className:"text-sm",children:n.source||"-"})]}),e.jsxs("div",{children:[e.jsx(U,{className:"text-sm font-medium text-muted-foreground",children:"Assigned To"}),e.jsx("p",{className:"text-sm",children:a?.name||"Unassigned"})]}),e.jsxs("div",{children:[e.jsx(U,{className:"text-sm font-medium text-muted-foreground",children:"Created By"}),e.jsx("p",{className:"text-sm",children:l?.name||n.created_by_name||"-"})]}),e.jsxs("div",{children:[e.jsx(U,{className:"text-sm font-medium text-muted-foreground",children:"Next Follow-up"}),e.jsx("p",{className:"text-sm",children:n.next_follow_up?jt(n.next_follow_up):"-"})]}),e.jsxs("div",{children:[e.jsx(U,{className:"text-sm font-medium text-muted-foreground",children:"Created Date"}),e.jsx("p",{className:"text-sm",children:jt(n.created_at)})]})]})]}),n.sales_notes&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{className:"text-sm font-medium text-muted-foreground",children:"Sales Notes"}),e.jsx("p",{className:"text-sm bg-muted p-3 rounded-md",children:n.sales_notes})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(q,{variant:"outline",onClick:r,children:"Close"})})]})})}function ote({isOpen:t,onClose:r,followUp:n,leads:s}){if(!n)return null;const a=s.find(l=>l.id===n.lead_id);return e.jsx(Ft,{open:t,onOpenChange:r,children:e.jsxs(Rt,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(qt,{children:[e.jsx(Lt,{children:"Follow-up Details"}),e.jsx(Ut,{children:"View detailed information about this follow-up including lead information, follow-up details, and notes."})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Lead Information"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(U,{className:"text-sm font-medium text-muted-foreground",children:"Customer Name"}),e.jsx("p",{className:"text-sm font-medium",children:a?.customer_name||"Unknown Lead"})]}),e.jsxs("div",{children:[e.jsx(U,{className:"text-sm font-medium text-muted-foreground",children:"Company"}),e.jsx("p",{className:"text-sm",children:a?.company_name||"-"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Follow-up Information"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(U,{className:"text-sm font-medium text-muted-foreground",children:"Follow-up Date"}),e.jsx("p",{className:"text-sm",children:jt(n.follow_up_date)})]}),e.jsxs("div",{children:[e.jsx(U,{className:"text-sm font-medium text-muted-foreground",children:"Type"}),e.jsx("p",{className:"text-sm",children:n.follow_up_type||"-"})]}),e.jsxs("div",{children:[e.jsx(U,{className:"text-sm font-medium text-muted-foreground",children:"Status"}),e.jsx(Oe,{variant:n.completed?"default":"secondary",children:n.completed?"Completed":"Pending"})]}),e.jsxs("div",{children:[e.jsx(U,{className:"text-sm font-medium text-muted-foreground",children:"Created By"}),e.jsx("p",{className:"text-sm",children:n.created_by_name})]}),e.jsxs("div",{children:[e.jsx(U,{className:"text-sm font-medium text-muted-foreground",children:"Created Date"}),e.jsx("p",{className:"text-sm",children:jt(n.created_at)})]})]})]}),n.notes&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{className:"text-sm font-medium text-muted-foreground",children:"Notes"}),e.jsx("p",{className:"text-sm bg-muted p-3 rounded-md",children:n.notes})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(q,{variant:"outline",onClick:r,children:"Close"})})]})})}const ki=f.forwardRef(({className:t,value:r=0,max:n=100,...s},a)=>{const l=Math.min(Math.max(r/n*100,0),100);return e.jsx("div",{ref:a,className:ze("relative h-4 w-full overflow-hidden rounded-full bg-secondary",t),...s,children:e.jsx("div",{className:"h-full bg-primary transition-all duration-300 ease-in-out",style:{width:`${l}%`}})})});ki.displayName="Progress";const sx=[{value:"draft",label:"Draft",color:"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-300",icon:Qt},{value:"sent",label:"Sent",color:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300",icon:Zt},{value:"viewed",label:"Viewed",color:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300",icon:mr},{value:"accepted",label:"Accepted",color:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300",icon:Ar},{value:"declined",label:"Declined",color:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300",icon:hn},{value:"expired",label:"Expired",color:"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-300",icon:fs}],_j=[{value:"machine_sale",label:"Machine Sale",icon:Ct,color:"text-blue-600"},{value:"parts_package",label:"Parts Package",icon:Jt,color:"text-green-600"},{value:"service",label:"Service & Maintenance",icon:lN,color:"text-purple-600"},{value:"custom",label:"Custom Quote",icon:N0,color:"text-gray-600"}],pE=[{key:"quote_number",label:"Quote #"},{key:"customer",label:"Customer"},{key:"type",label:"Type"},{key:"total_amount",label:"Total Amount"},{key:"status",label:"Status"},{key:"valid_until",label:"Valid Until"},{key:"created_by",label:"Created By"},{key:"created_at",label:"Created"}];function cte(){const{user:t}=hr();er();const[r,n]=f.useState([]),[s,a]=f.useState([]),[l,c]=f.useState([]),[u,d]=f.useState(null),[h,x]=f.useState(!1),[p,y]=f.useState(""),[v,w]=f.useState("all"),[b,N]=f.useState("quotes"),[_,S]=f.useState(1),[k,E]=f.useState(1),[A,O]=f.useState(0),[z]=f.useState(25),[R,G]=f.useState(!1),[J,ie]=f.useState(!1),[V,xe]=f.useState(!1),[pe,re]=f.useState(!1),[M,B]=f.useState(null),[L,T]=f.useState([]),[F,I]=f.useState(null),[Q,W]=f.useState(0),[ee,ye]=f.useState({customer_name:"",title:"",valid_until:"",discount_percentage:0,tax_rate:0,quote_type:"custom"}),[he,te]=f.useState([]),[De,ne]=f.useState("machines"),[$e,ge]=f.useState([]),[we,_e]=f.useState([]),[Ye,ht]=f.useState([]),[Ve,lt]=f.useState(""),yt=ps("quotes_enhanced",gs(pE));f.useEffect(()=>{Re()},[]),f.useEffect(()=>{H()},[_]);const Re=async()=>{x(!0);try{await Promise.all([H(),Be(),st(),K()])}catch(ce){console.error("Error fetching data:",ce)}finally{x(!1)}},H=async()=>{try{const ce=await de.getQuotes({page:_,limit:z});n(ce.data||[]),ce.pagination&&(E(ce.pagination.pages||1),O(ce.pagination.total||0))}catch(ce){console.error("Error fetching quotes:",ce)}},Be=async()=>{try{const ce=await de.getQuoteTemplates({is_active:!0});a(ce.data||[])}catch(ce){console.error("Error fetching templates:",ce)}},st=async()=>{try{const ce=await de.getCustomers({limit:1e3});c(ce.data||[])}catch(ce){console.error("Error fetching customers:",ce)}},K=async()=>{try{const Ze=(await de.getQuoteStats()).data;d(Ze)}catch(ce){console.error("Error fetching quote stats:",ce)}};f.useEffect(()=>{if(r.length>0&&u){const ce=r.filter(pr=>pr.status==="draft").length,Ze=r.filter(pr=>pr.status==="sent").length,pt=r.filter(pr=>pr.status==="accepted").length,Dt=r.filter(pr=>pr.status==="expired").length,Nr=r.length>0?r.reduce((pr,In)=>pr+In.total_amount,0)/r.length:0;d({...u,draft_quotes:ce,sent_quotes:Ze,accepted_quotes:pt,expired_quotes:Dt,avg_quote_value:Nr})}},[r]);const Z=async()=>{try{const ce=await de.getQuoteCatalogMachines({search:Ve});ge(ce.data||[])}catch(ce){console.error("Error fetching catalog machines:",ce)}},ke=async()=>{try{const ce=await de.getQuoteCatalogParts({search:Ve,in_stock_only:!0});_e(ce.data||[])}catch(ce){console.error("Error fetching catalog parts:",ce)}},Ae=async()=>{try{const ce=await de.getQuoteCatalogServices();ht(ce.data||[])}catch(ce){console.error("Error fetching catalog services:",ce)}},je=()=>{It(),G(!0)},He=async ce=>{try{const pt=(await de.getQuoteTemplate(ce.id.toString())).data,Dt=new Date;Dt.setDate(Dt.getDate()+(pt.default_valid_days||30)),ye({customer_name:"",title:pt.template_name,valid_until:Dt.toISOString().split("T")[0],notes:"",terms_conditions:pt.default_terms_conditions||"",payment_terms:pt.default_payment_terms||"",delivery_terms:pt.default_delivery_terms||"",discount_percentage:pt.default_discount_percentage||0,tax_rate:0,quote_type:pt.template_type,template_id:ce.id}),pt.items&&pt.items.length>0&&te(pt.items.map(Nr=>({item_type:Nr.item_type,item_reference_id:Nr.item_reference_id,item_name:Nr.item_name,description:Nr.description,quantity:Nr.quantity||1,unit_price:Nr.unit_price||0,category:Nr.category}))),G(!0)}catch(Ze){console.error("Error loading template:",Ze)}},Se=async ce=>{B(ce);try{const Ze=await de.getQuoteItems(ce.id.toString());T(Ze.data||[])}catch(Ze){console.error("Error fetching quote items:",Ze)}ie(!0)},it=async ce=>{try{await de.duplicateQuote(ce.id.toString()),await H()}catch(Ze){console.error("Error duplicating quote:",Ze)}},Me=async ce=>{if(window.confirm("Are you sure you want to delete this quote?"))try{await de.deleteQuote(ce.toString()),await H()}catch(Ze){console.error("Error deleting quote:",Ze)}},Tt=async ce=>{try{await de.downloadQuotePDF(ce.toString())}catch(Ze){console.error("Error downloading PDF:",Ze)}},Pe=async(ce,Ze)=>{try{await de.updateQuoteStatus(ce.toString(),Ze),await H()}catch(pt){console.error("Error updating status:",pt)}},Ee=async ce=>{ye({customer_id:ce.customer_id,customer_name:ce.customer_name,customer_email:ce.email||"",customer_phone:ce.phone||"",title:ce.title||"",description:ce.description||"",valid_until:ce.valid_until,notes:ce.notes||"",terms_conditions:ce.terms_conditions||"",payment_terms:ce.payment_terms||"",delivery_terms:ce.delivery_terms||"",discount_percentage:ce.discount_percentage||0,tax_rate:ce.tax_rate||0,quote_type:ce.quote_type||"custom",template_id:ce.template_id});try{const pt=((await de.getQuoteItems(ce.id.toString())).data||[]).map(Dt=>{const Nr=Number(Dt.quantity),pr=Number(Dt.unit_price);return{item_type:Dt.item_type,item_reference_id:Dt.item_reference_id,item_name:Dt.item_name,description:Dt.description||"",quantity:isNaN(Nr)?1:Nr,unit_price:isNaN(pr)?0:pr,total_price:(isNaN(Nr)?1:Nr)*(isNaN(pr)?0:pr),category:Dt.category||""}});te(pt)}catch(Ze){console.error("Error fetching quote items:",Ze),te([])}I(ce.id),W(0),G(!0)},xt=async()=>{if(F){x(!0);try{const{subtotal:ce,discount_amount:Ze,tax_amount:pt,total_amount:Dt}=P(),Nr={customer_id:ee.customer_id||null,customer_name:ee.customer_name,customer_email:ee.customer_email||null,customer_phone:ee.customer_phone||null,title:ee.title,description:ee.description||null,subtotal:Number(ce),discount_percentage:Number(ee.discount_percentage),discount_amount:Number(Ze),tax_rate:Number(ee.tax_rate),tax_amount:Number(pt),total_amount:Number(Dt),valid_until:ee.valid_until,notes:ee.notes||null,terms_conditions:ee.terms_conditions||null,payment_terms:ee.payment_terms||null,delivery_terms:ee.delivery_terms||null,quote_type:ee.quote_type,template_id:ee.template_id||null,items:he.map(pr=>({item_type:pr.item_type,item_reference_id:pr.item_reference_id||null,item_name:pr.item_name,description:pr.description||null,quantity:pr.quantity,unit_price:pr.unit_price,category:pr.category||null}))};await de.updateQuote(F.toString(),Nr),await H(),It(),G(!1),I(null)}catch(ce){console.error("Error updating quote:",ce),alert("Failed to update quote. Please try again.")}finally{x(!1)}}},wt=()=>{Q<3&&W(Q+1)},Le=()=>{Q>0&&W(Q-1)},ot=async()=>{if(F){await xt();return}try{x(!0);const ce=he.reduce((In,ui)=>In+(ui.quantity||0)*(ui.unit_price||0),0),Ze=ce*(ee.discount_percentage||0)/100,pt=ce-Ze,Dt=pt*(ee.tax_rate||0)/100,Nr=pt+Dt,pr={...ee,subtotal:ce,discount_percentage:Number(ee.discount_percentage)||0,discount_amount:Ze,tax_rate:Number(ee.tax_rate)||0,tax_amount:Dt,total_amount:Nr,items:he.map((In,ui)=>({...In,position:ui,total_price:(In.quantity||0)*(In.unit_price||0)}))};await de.createQuote(pr),await H(),G(!1),It()}catch(ce){console.error("Error creating quote:",ce)}finally{x(!1)}},It=()=>{W(0),ye({customer_name:"",title:"",valid_until:"",discount_percentage:0,tax_rate:0,quote_type:"custom"}),te([]),I(null)},Er=()=>{ne("machines"),Z(),xe(!0)},Yr=(ce,Ze)=>{const pt={item_type:Ze,item_reference_id:typeof ce.id=="number"?ce.id:void 0,item_name:ce.name,description:ce.description||"",quantity:1,unit_price:0,category:""};if(Ze==="machine"){const Dt=ce;pt.unit_price=Dt.avg_sale_price||0,pt.category=Dt.category_name||"Machines",pt.description=`${Dt.manufacturer} - ${Dt.name}${Dt.catalogue_number?` (${Dt.catalogue_number})`:""}`}else if(Ze==="part"){const Dt=ce;pt.unit_price=Dt.unit_price,pt.category=Dt.category||"Parts",pt.description=Dt.description||""}else if(Ze==="service"){const Dt=ce;pt.unit_price=Dt.default_price,pt.category=Dt.category,pt.description=Dt.description}te([...he,pt])},Gn=ce=>{te(he.filter((Ze,pt)=>pt!==ce))},Qn=(ce,Ze,pt)=>{const Dt=[...he];if(Dt[ce]={...Dt[ce],[Ze]:pt},Ze==="quantity"||Ze==="unit_price"){const Nr=Dt[ce],pr=Number(Ze==="quantity"?pt:Nr.quantity||0),In=Number(Ze==="unit_price"?pt:Nr.unit_price||0);Dt[ce].total_price=pr*In}te(Dt)},$t=r.filter(ce=>{const Ze=ce.formatted_number?.toLowerCase().includes(p.toLowerCase())||!1||ce.quote_number?.toString().toLowerCase().includes(p.toLowerCase())||!1||ce.customer_name.toLowerCase().includes(p.toLowerCase())||ce.company_name?.toLowerCase().includes(p.toLowerCase())||!1,pt=v==="all"||ce.status===v;return Ze&&pt}),sr=ce=>{const Ze=sx.find(Dt=>Dt.value===ce);if(!Ze)return null;const pt=Ze.icon;return e.jsxs(Oe,{className:Ze.color,children:[e.jsx(pt,{className:"h-3 w-3 mr-1"}),Ze.label]})},le=ce=>{const Ze=_j.find(pt=>pt.value===ce);return Ze?Ze.icon:Qt},Qe=ce=>{const Ze=_j.find(pt=>pt.value===ce);return Ze?Ze.color:"text-gray-600"},P=()=>{const ce=he.reduce((pr,In)=>pr+(In.quantity||0)*(In.unit_price||0),0),Ze=ce*(ee.discount_percentage||0)/100,pt=ce-Ze,Dt=pt*(ee.tax_rate||0)/100,Nr=pt+Dt;return{subtotal:ce,discountAmount:Ze,taxAmount:Dt,totalAmount:Nr}},$=ce=>{switch(ce){case 0:return!!ee.customer_name;case 1:return he.length>0&&he.every(Ze=>Ze.item_name&&Ze.quantity!==void 0&&Ze.quantity!==null&&Ze.quantity>0&&Ze.unit_price!==void 0&&Ze.unit_price!==null&&Ze.unit_price>=0);case 2:return!!ee.title&&!!ee.valid_until;case 3:return!0;default:return!1}},We=()=>{switch(Q){case 0:return vt();case 1:return dt();case 2:return zt();case 3:return kn();default:return null}},vt=()=>e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{children:"Select Customer *"}),e.jsxs(tt,{value:ee.customer_id?.toString()||"",onValueChange:ce=>{const Ze=l.find(pt=>pt.id===ce);Ze&&ye({...ee,customer_id:parseInt(ce),customer_name:Ze.name,customer_email:Ze.email,customer_phone:Ze.phone})},children:[e.jsx(Je,{children:e.jsx(rt,{placeholder:"Select a customer"})}),e.jsx(et,{children:l.map(ce=>e.jsx(Y,{value:ce.id,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ot,{className:"h-4 w-4"}),e.jsx("span",{children:ce.name}),ce.company_name&&e.jsxs("span",{className:"text-muted-foreground text-xs",children:["(",ce.company_name,")"]})]})},ce.id))})]})]}),ee.customer_id&&e.jsx(se,{className:"bg-blue-50 dark:bg-blue-950",children:e.jsx(ae,{className:"pt-4",children:e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsx("div",{className:"font-medium",children:ee.customer_name}),ee.customer_email&&e.jsxs("div",{children:["Email: ",ee.customer_email]}),ee.customer_phone&&e.jsxs("div",{children:["Phone: ",ee.customer_phone]})]})})}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(fs,{className:"h-4 w-4"}),e.jsx("span",{children:"Customer not in the list? Add them from the Customers page first."})]})]}),dt=()=>e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(U,{children:"Quote Items *"}),e.jsxs(q,{size:"sm",onClick:Er,children:[e.jsx(Vt,{className:"h-4 w-4 mr-2"}),"Add from Catalog"]})]}),he.length===0?e.jsx(se,{className:"border-dashed",children:e.jsxs(ae,{className:"flex flex-col items-center justify-center py-12",children:[e.jsx(Jt,{className:"h-12 w-12 text-muted-foreground mb-4"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"No items added yet"}),e.jsxs(q,{size:"sm",onClick:Er,children:[e.jsx(Vt,{className:"h-4 w-4 mr-2"}),"Add Items from Catalog"]})]})}):e.jsx(se,{children:e.jsx(ae,{className:"p-0",children:e.jsxs(ir,{children:[e.jsx(lr,{children:e.jsxs(ft,{children:[e.jsx(me,{children:"Item"}),e.jsx(me,{children:"Category"}),e.jsx(me,{className:"w-24",children:"Qty"}),e.jsx(me,{className:"w-32",children:"Unit Price"}),e.jsx(me,{className:"w-32",children:"Total"}),e.jsx(me,{className:"w-16"})]})}),e.jsx(or,{children:he.map((ce,Ze)=>e.jsxs(ft,{children:[e.jsx(oe,{children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:ce.item_name}),ce.description&&e.jsx("div",{className:"text-sm text-muted-foreground",children:ce.description})]})}),e.jsx(oe,{children:e.jsx(Oe,{variant:"outline",children:ce.category||"Custom"})}),e.jsx(oe,{children:e.jsx(be,{type:"number",value:ce.quantity,onChange:pt=>Qn(Ze,"quantity",parseInt(pt.target.value)||0),className:"w-20",min:"1"})}),e.jsx(oe,{children:e.jsx(be,{type:"number",value:ce.unit_price,onChange:pt=>Qn(Ze,"unit_price",parseFloat(pt.target.value)||0),className:"w-28",min:"0",step:"0.01"})}),e.jsx(oe,{className:"font-medium",children:at((ce.quantity||0)*(ce.unit_price||0))}),e.jsx(oe,{children:e.jsx(q,{variant:"ghost",size:"sm",onClick:()=>Gn(Ze),children:e.jsx(br,{className:"h-4 w-4 text-red-600"})})})]},Ze))})]})})}),e.jsx(se,{className:"bg-blue-50 dark:bg-blue-950",children:e.jsx(ae,{className:"pt-4",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-medium",children:"Subtotal:"}),e.jsx("span",{className:"text-lg font-bold",children:at(P().subtotal)})]})})})]}),zt=()=>e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"title",children:"Quote Title *"}),e.jsx(be,{id:"title",value:ee.title,onChange:ce=>ye({...ee,title:ce.target.value}),placeholder:"e.g., High Pressure Cleaner Package"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"valid_until",children:"Valid Until *"}),e.jsx(Rn,{value:ee.valid_until,onChange:ce=>ye({...ee,valid_until:ce}),placeholder:"Select date"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"description",children:"Description"}),e.jsx(ar,{id:"description",value:ee.description||"",onChange:ce=>ye({...ee,description:ce.target.value}),placeholder:"Brief description of this quote",rows:2})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"discount",children:"Discount (%)"}),e.jsx(be,{id:"discount",type:"number",value:ee.discount_percentage,onChange:ce=>ye({...ee,discount_percentage:ce.target.value===""?0:parseFloat(ce.target.value)||0}),min:"0",max:"100",step:"0.1"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"tax",children:"Tax Rate (%)"}),e.jsx(be,{id:"tax",type:"number",value:ee.tax_rate,onChange:ce=>ye({...ee,tax_rate:ce.target.value===""?0:parseFloat(ce.target.value)||0}),min:"0",max:"100",step:"0.1"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"payment_terms",children:"Payment Terms"}),e.jsx(ar,{id:"payment_terms",value:ee.payment_terms||"",onChange:ce=>ye({...ee,payment_terms:ce.target.value}),placeholder:"e.g., 50% deposit, 50% on delivery",rows:2})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"delivery_terms",children:"Delivery Terms"}),e.jsx(ar,{id:"delivery_terms",value:ee.delivery_terms||"",onChange:ce=>ye({...ee,delivery_terms:ce.target.value}),placeholder:"e.g., Delivery within 2-4 weeks",rows:2})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"notes",children:"Notes"}),e.jsx(ar,{id:"notes",value:ee.notes||"",onChange:ce=>ye({...ee,notes:ce.target.value}),placeholder:"Any additional notes for the customer",rows:3})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"terms",children:"Terms & Conditions"}),e.jsx(ar,{id:"terms",value:ee.terms_conditions||"",onChange:ce=>ye({...ee,terms_conditions:ce.target.value}),placeholder:"Standard terms and conditions",rows:4})]})]}),kn=()=>{const ce=P(),Ze=l.find(pt=>pt.id===ee.customer_id?.toString());return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(se,{children:[e.jsx(ue,{children:e.jsx(fe,{className:"text-lg",children:"Customer Information"})}),e.jsx(ae,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ot,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"font-medium",children:ee.customer_name})]}),ee.customer_email&&e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Email: ",ee.customer_email]}),ee.customer_phone&&e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Phone: ",ee.customer_phone]}),Ze?.company_name&&e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Company: ",Ze.company_name]})]})})]}),e.jsxs(se,{children:[e.jsx(ue,{children:e.jsx(fe,{className:"text-lg",children:"Quote Details"})}),e.jsxs(ae,{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Title:"}),e.jsx("span",{className:"font-medium",children:ee.title})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Valid Until:"}),e.jsx("span",{className:"font-medium",children:jt(ee.valid_until)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Type:"}),e.jsx(Oe,{variant:"outline",children:ee.quote_type})]})]})]}),e.jsxs(se,{children:[e.jsx(ue,{children:e.jsxs(fe,{className:"text-lg",children:["Items (",he.length,")"]})}),e.jsx(ae,{children:e.jsxs(ir,{children:[e.jsx(lr,{children:e.jsxs(ft,{children:[e.jsx(me,{children:"Item"}),e.jsx(me,{className:"text-center",children:"Qty"}),e.jsx(me,{className:"text-right",children:"Unit Price"}),e.jsx(me,{className:"text-right",children:"Total"})]})}),e.jsx(or,{children:he.map((pt,Dt)=>e.jsxs(ft,{children:[e.jsx(oe,{children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:pt.item_name}),pt.category&&e.jsx(Oe,{variant:"outline",className:"mt-1",children:pt.category})]})}),e.jsx(oe,{className:"text-center",children:pt.quantity}),e.jsx(oe,{className:"text-right",children:at(pt.unit_price||0)}),e.jsx(oe,{className:"text-right font-medium",children:at((pt.quantity||0)*(pt.unit_price||0))})]},Dt))})]})})]}),e.jsx(se,{className:"bg-blue-50 dark:bg-blue-950",children:e.jsxs(ae,{className:"pt-6 space-y-3",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Subtotal:"}),e.jsx("span",{className:"font-medium",children:at(ce.subtotal)})]}),ee.discount_percentage>0&&e.jsxs("div",{className:"flex justify-between text-sm text-green-600",children:[e.jsxs("span",{children:["Discount (",Number(ee.discount_percentage).toFixed(2),"%):"]}),e.jsxs("span",{className:"font-medium",children:["-",at(ce.discountAmount)]})]}),ee.tax_rate>0&&e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("span",{children:["Tax (",Number(ee.tax_rate).toFixed(2),"%):"]}),e.jsx("span",{className:"font-medium",children:at(ce.taxAmount)})]}),e.jsxs("div",{className:"flex justify-between text-lg font-bold border-t pt-3",children:[e.jsx("span",{children:"Total Amount:"}),e.jsx("span",{className:"text-blue-600",children:at(ce.totalAmount)})]})]})})]})};return e.jsxs(e.Fragment,{children:[e.jsx(gt,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Quote Management"}),e.jsx("p",{className:"text-muted-foreground",children:"Create and manage sales quotes for machines, parts, and services"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(q,{variant:"outline",size:"sm",onClick:Re,children:[e.jsx(Ws,{className:`h-4 w-4 mr-2 ${h?"animate-spin":""}`}),"Refresh"]}),e.jsxs(q,{size:"sm",onClick:je,children:[e.jsx(Vt,{className:"h-4 w-4 mr-2"}),"Create Quote"]})]})]}),u&&e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsxs(se,{children:[e.jsxs(ue,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(fe,{className:"text-sm font-medium",children:"Total Quotes"}),e.jsx(Qt,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(ae,{children:[e.jsx("div",{className:"text-2xl font-bold",children:u.total_quotes||0}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[u.draft_quotes||0," drafts, ",u.sent_quotes||0," sent"]})]})]}),e.jsxs(se,{children:[e.jsxs(ue,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(fe,{className:"text-sm font-medium",children:"Total Value"}),e.jsx(Tn,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(ae,{children:[e.jsx("div",{className:"text-2xl font-bold",children:at(u.total_value||0)}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Avg: ",at(u.avg_quote_value||0)]})]})]}),e.jsxs(se,{children:[e.jsxs(ue,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(fe,{className:"text-sm font-medium",children:"Acceptance Rate"}),e.jsx(Os,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(ae,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:[(u.acceptance_rate||0).toFixed(1),"%"]}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[u.accepted_quotes||0," accepted"]})]})]}),e.jsxs(se,{children:[e.jsxs(ue,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(fe,{className:"text-sm font-medium",children:"Templates"}),e.jsx(N0,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(ae,{children:[e.jsx("div",{className:"text-2xl font-bold",children:s.length}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Active templates"})]})]})]}),e.jsxs(Ys,{value:b,onValueChange:N,children:[e.jsxs(Ps,{children:[e.jsxs(Kt,{value:"quotes",children:[e.jsx(Qt,{className:"h-4 w-4 mr-2"}),"Quotes (",$t.length,")"]}),e.jsxs(Kt,{value:"templates",children:[e.jsx(N0,{className:"h-4 w-4 mr-2"}),"Templates (",s.length,")"]}),e.jsxs(Kt,{value:"analytics",children:[e.jsx(sl,{className:"h-4 w-4 mr-2"}),"Analytics"]})]}),e.jsxs(Gt,{value:"quotes",className:"space-y-4",children:[e.jsx(se,{children:e.jsx(ae,{className:"p-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(nr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),e.jsx(be,{placeholder:"Search quotes...",value:p,onChange:ce=>y(ce.target.value),className:"pl-10"})]})}),e.jsxs(tt,{value:v,onValueChange:w,children:[e.jsx(Je,{className:"w-[160px]",children:e.jsx(rt,{placeholder:"Status"})}),e.jsxs(et,{children:[e.jsx(Y,{value:"all",children:"All Status"}),sx.map(ce=>e.jsx(Y,{value:ce.value,children:ce.label},ce.value))]})]})]})})}),e.jsxs(se,{children:[e.jsx(ue,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(fe,{children:"Quotes"}),e.jsx(Xt,{children:"Manage your sales quotes and track their status"})]}),e.jsx(ys,{columns:pE,visibleColumns:yt.visibleColumns,onToggleColumn:yt.toggleColumn,onShowAll:yt.showAllColumns,onHideAll:yt.hideAllColumns,onReset:yt.resetColumns,isSyncing:yt.isSyncing})]})}),e.jsxs(ae,{children:[e.jsxs(ir,{children:[e.jsx(lr,{children:e.jsxs(ft,{children:[yt.isColumnVisible("quote_number")&&e.jsx(me,{children:"Quote #"}),yt.isColumnVisible("customer")&&e.jsx(me,{children:"Customer"}),yt.isColumnVisible("type")&&e.jsx(me,{children:"Type"}),yt.isColumnVisible("total_amount")&&e.jsx(me,{children:"Amount"}),yt.isColumnVisible("status")&&e.jsx(me,{children:"Status"}),yt.isColumnVisible("valid_until")&&e.jsx(me,{children:"Valid Until"}),yt.isColumnVisible("created_by")&&e.jsx(me,{children:"Created By"}),e.jsx(me,{children:"Actions"})]})}),e.jsx(or,{children:$t.length>0?$t.map(ce=>e.jsxs(ft,{className:"cursor-pointer hover:bg-muted/50",onClick:()=>Se(ce),children:[yt.isColumnVisible("quote_number")&&e.jsx(oe,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Qt,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"font-medium",children:ce.formatted_number||ce.quote_number||`Q-${ce.id}`})]})}),yt.isColumnVisible("customer")&&e.jsx(oe,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(oo,{className:"h-8 w-8",children:e.jsx(co,{className:"text-xs",children:ce.customer_name.charAt(0)})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:ce.customer_name}),ce.company_name&&e.jsx("div",{className:"text-sm text-muted-foreground",children:ce.company_name})]})]})}),yt.isColumnVisible("type")&&e.jsx(oe,{children:(()=>{const Ze=le(ce.quote_type||"custom");return e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ze,{className:`h-4 w-4 ${Qe(ce.quote_type||"custom")}`}),e.jsx("span",{className:"text-sm",children:ce.quote_type||"custom"})]})})()}),yt.isColumnVisible("total_amount")&&e.jsx(oe,{className:"font-medium",children:at(ce.total_amount)}),yt.isColumnVisible("status")&&e.jsx(oe,{onClick:Ze=>Ze.stopPropagation(),children:e.jsxs(tt,{value:ce.status,onValueChange:Ze=>Pe(ce.id,Ze),children:[e.jsx(Je,{className:"w-[140px]",children:e.jsx(rt,{})}),e.jsx(et,{children:sx.map(Ze=>e.jsx(Y,{value:Ze.value,children:Ze.label},Ze.value))})]})}),yt.isColumnVisible("valid_until")&&e.jsx(oe,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(is,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:tx(ce.valid_until)?"text-red-600":"",children:jt(ce.valid_until)}),tx(ce.valid_until)&&e.jsx(fs,{className:"h-4 w-4 text-red-600"})]})}),yt.isColumnVisible("created_by")&&e.jsx(oe,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ot,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm",children:ce.created_by_name})]})}),e.jsx(oe,{className:"text-right",children:e.jsxs(Cr,{children:[e.jsx(Sr,{asChild:!0,children:e.jsx(q,{variant:"ghost",className:"h-8 w-8 p-0",onClick:Ze=>Ze.stopPropagation(),children:e.jsx(ss,{className:"h-4 w-4"})})}),e.jsxs(wr,{align:"end",children:[e.jsx(Tr,{children:"Actions"}),e.jsxs(ct,{onClick:Ze=>{Ze.stopPropagation(),Ee(ce)},children:[e.jsx(xr,{className:"mr-2 h-4 w-4"}),"Edit Quote"]}),e.jsxs(ct,{onClick:Ze=>{Ze.stopPropagation(),Tt(ce.id)},children:[e.jsx(oa,{className:"mr-2 h-4 w-4"}),"Download PDF"]}),e.jsxs(ct,{onClick:Ze=>{Ze.stopPropagation(),it(ce)},children:[e.jsx(iA,{className:"mr-2 h-4 w-4"}),"Duplicate"]}),e.jsxs(ct,{onClick:Ze=>{Ze.stopPropagation(),Me(ce.id)},className:"text-red-600",children:[e.jsx(br,{className:"mr-2 h-4 w-4"}),"Delete"]})]})]})})]},ce.id)):e.jsx(ft,{children:e.jsx(oe,{colSpan:8,className:"text-center py-12",children:e.jsxs("div",{className:"flex flex-col items-center justify-center space-y-3",children:[e.jsx(Qt,{className:"h-12 w-12 text-muted-foreground"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"No quotes found"}),e.jsxs(q,{variant:"outline",size:"sm",onClick:je,children:[e.jsx(Vt,{className:"h-4 w-4 mr-2"}),"Create First Quote"]})]})})})})]}),e.jsx(r_,{currentPage:_,totalPages:k,totalCount:A,pageSize:z,onPageChange:S,itemName:"quotes"})]})]})]}),e.jsx(Gt,{value:"templates",className:"space-y-4",children:e.jsxs(se,{children:[e.jsx(ue,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(fe,{children:"Quote Templates"}),e.jsx(Xt,{children:"Use templates to quickly create quotes for common scenarios"})]}),e.jsxs(q,{size:"sm",onClick:()=>re(!0),children:[e.jsx(Vt,{className:"h-4 w-4 mr-2"}),"Create Template"]})]})}),e.jsx(ae,{children:e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:s.map(ce=>{const Ze=le(ce.template_type);return e.jsxs(se,{className:"hover:shadow-md transition-shadow cursor-pointer",children:[e.jsx(ue,{children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-blue-50 dark:bg-blue-950",children:e.jsx(Ze,{className:`h-5 w-5 ${Qe(ce.template_type)}`})}),e.jsxs("div",{children:[e.jsx(fe,{className:"text-base",children:ce.template_name}),e.jsxs(Xt,{className:"text-xs mt-1",children:[ce.items_count||0," items"]})]})]})})}),e.jsxs(ae,{children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:ce.description||"No description"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(q,{size:"sm",className:"flex-1",onClick:()=>He(ce),children:[e.jsx(Q9,{className:"h-4 w-4 mr-2"}),"Use Template"]}),e.jsx(q,{variant:"outline",size:"sm",onClick:()=>{},children:e.jsx(xr,{className:"h-4 w-4"})})]})]})]},ce.id)})})})]})}),e.jsx(Gt,{value:"analytics",className:"space-y-4",children:e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs(se,{children:[e.jsx(ue,{children:e.jsx(fe,{children:"Quote Status Distribution"})}),e.jsx(ae,{children:e.jsx("div",{className:"space-y-4",children:sx.map(ce=>{const Ze=r.filter(Nr=>Nr.status===ce.value).length,pt=r.length>0?Ze/r.length*100:0,Dt=ce.icon;return e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Dt,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm font-medium",children:ce.label})]}),e.jsx("span",{className:"text-sm font-bold",children:Ze})]}),e.jsx(ki,{value:pt,className:"h-2"})]},ce.value)})})})]}),e.jsxs(se,{children:[e.jsx(ue,{children:e.jsx(fe,{children:"Quote Types"})}),e.jsx(ae,{children:e.jsx("div",{className:"space-y-4",children:_j.map(ce=>{const Ze=r.filter(Nr=>Nr.quote_type===ce.value).length,pt=r.filter(Nr=>Nr.quote_type===ce.value).reduce((Nr,pr)=>Nr+pr.total_amount,0),Dt=ce.icon;return e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Dt,{className:`h-5 w-5 ${ce.color}`}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:ce.label}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[Ze," quotes"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"font-bold",children:at(pt)}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Total value"})]})]},ce.value)})})})]})]})})]})]})}),e.jsx(Ft,{open:R,onOpenChange:ce=>{G(ce),ce||It()},children:e.jsxs(Rt,{className:"max-w-4xl max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs(qt,{children:[e.jsx(Lt,{children:F?"Edit Quote":"Create New Quote"}),e.jsxs(Ut,{children:["Step ",Q+1," of 4: ",["Customer","Items","Details","Review"][Q]]})]}),e.jsx("div",{className:"flex items-center justify-between mb-6",children:["Customer","Items","Details","Review"].map((ce,Ze)=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`flex items-center justify-center w-8 h-8 rounded-full border-2 ${Ze===Q?"border-blue-600 bg-blue-600 text-white":Ze<Q?"border-green-600 bg-green-600 text-white":"border-gray-300 text-gray-400"}`,children:Ze<Q?e.jsx(Gr,{className:"h-4 w-4"}):Ze+1}),e.jsx("span",{className:`ml-2 text-sm ${Ze===Q?"font-medium":"text-muted-foreground"}`,children:ce}),Ze<3&&e.jsx(ri,{className:"h-4 w-4 mx-2 text-muted-foreground"})]},ce))}),e.jsx("div",{className:"flex-1 min-h-[500px] overflow-y-auto",children:We()}),e.jsxs("div",{className:"flex items-center justify-between pt-6 border-t mt-6",children:[e.jsxs(q,{variant:"outline",onClick:Le,disabled:Q===0,children:[e.jsx(_c,{className:"h-4 w-4 mr-2"}),"Previous"]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Step ",Q+1," of 4"]}),Q<3?e.jsxs(q,{onClick:wt,disabled:!$(Q),children:["Next",e.jsx(ri,{className:"h-4 w-4 ml-2"})]}):e.jsxs(q,{onClick:ot,disabled:h,children:[h?F?"Updating...":"Creating...":F?"Update Quote":"Create Quote",e.jsx(Ar,{className:"h-4 w-4 ml-2"})]})]})]})}),e.jsx(Ft,{open:V,onOpenChange:xe,children:e.jsxs(Rt,{className:"max-w-5xl max-h-[90vh]",children:[e.jsxs(qt,{children:[e.jsx(Lt,{children:"Add Items from Catalog"}),e.jsx(Ut,{children:"Browse and add machines, parts, or services to your quote"})]}),e.jsxs(Ys,{value:De,onValueChange:ce=>{ne(ce),ce==="machines"?Z():ce==="parts"?ke():ce==="services"&&Ae()},children:[e.jsxs(Ps,{className:"grid w-full grid-cols-3",children:[e.jsxs(Kt,{value:"machines",children:[e.jsx(Ct,{className:"h-4 w-4 mr-2"}),"Machines"]}),e.jsxs(Kt,{value:"parts",children:[e.jsx(Jt,{className:"h-4 w-4 mr-2"}),"Parts"]}),e.jsxs(Kt,{value:"services",children:[e.jsx(lN,{className:"h-4 w-4 mr-2"}),"Services"]})]}),e.jsx("div",{className:"mt-4",children:e.jsxs("div",{className:"relative",children:[e.jsx(nr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground h-4 w-4"}),e.jsx(be,{placeholder:"Search catalog...",value:Ve,onChange:ce=>lt(ce.target.value),className:"pl-10"})]})}),e.jsx(Gt,{value:"machines",className:"max-h-[500px] overflow-y-auto",children:e.jsx("div",{className:"space-y-2",children:$e.map(ce=>e.jsx(se,{className:"hover:bg-muted/50 transition-colors",children:e.jsx(ae,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium",children:ce.name}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[ce.manufacturer," ",ce.catalogue_number&&`• ${ce.catalogue_number}`]}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[ce.category_name&&e.jsx(Oe,{variant:"outline",className:"text-xs",children:ce.category_name}),e.jsxs(Oe,{variant:"secondary",className:"text-xs",children:[ce.available_serials," available"]})]})]}),e.jsxs("div",{className:"text-right",children:[ce.avg_sale_price&&e.jsxs("div",{className:"text-sm font-medium mb-2",children:["Avg: ",at(ce.avg_sale_price)]}),e.jsxs(q,{size:"sm",onClick:()=>{Yr(ce,"machine"),xe(!1)},children:[e.jsx(Vt,{className:"h-4 w-4 mr-1"}),"Add"]})]})]})})},ce.id))})}),e.jsx(Gt,{value:"parts",className:"max-h-[500px] overflow-y-auto",children:e.jsx("div",{className:"space-y-2",children:we.map(ce=>e.jsx(se,{className:"hover:bg-muted/50 transition-colors",children:e.jsx(ae,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium",children:ce.name}),ce.description&&e.jsx("div",{className:"text-sm text-muted-foreground",children:ce.description}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[ce.category&&e.jsx(Oe,{variant:"outline",className:"text-xs",children:ce.category}),e.jsxs(Oe,{variant:"secondary",className:`text-xs ${ce.stock_status==="in_stock"?"bg-green-100 text-green-800":ce.stock_status==="low_stock"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:[ce.quantity," in stock"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-sm font-medium mb-2",children:at(ce.unit_price)}),e.jsxs(q,{size:"sm",onClick:()=>{Yr(ce,"part"),xe(!1)},disabled:ce.stock_status==="out_of_stock",children:[e.jsx(Vt,{className:"h-4 w-4 mr-1"}),"Add"]})]})]})})},ce.id))})}),e.jsx(Gt,{value:"services",className:"max-h-[500px] overflow-y-auto",children:e.jsx("div",{className:"space-y-2",children:Ye.map(ce=>e.jsx(se,{className:"hover:bg-muted/50 transition-colors",children:e.jsx(ae,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium",children:ce.name}),e.jsx("div",{className:"text-sm text-muted-foreground",children:ce.description}),e.jsx(Oe,{variant:"outline",className:"text-xs mt-2",children:ce.category})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-sm font-medium mb-2",children:at(ce.default_price)}),e.jsxs(q,{size:"sm",onClick:()=>{Yr(ce,"service"),xe(!1)},children:[e.jsx(Vt,{className:"h-4 w-4 mr-1"}),"Add"]})]})]})})},ce.id))})})]})]})}),e.jsx(Ft,{open:J,onOpenChange:ie,children:e.jsxs(Rt,{className:"max-w-5xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(qt,{children:[e.jsxs(Lt,{children:["Quote #",M?.formatted_number||M?.quote_number||M?.id]}),e.jsx(Ut,{children:"View and manage quote details"})]}),M&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-muted rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[sr(M.status),tx(M.valid_until)&&e.jsxs(Oe,{variant:"destructive",children:[e.jsx(fs,{className:"h-3 w-3 mr-1"}),"Expired"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(q,{variant:"outline",size:"sm",onClick:()=>{ie(!1),Ee(M)},children:[e.jsx(xr,{className:"h-4 w-4 mr-2"}),"Edit"]}),e.jsxs(q,{variant:"outline",size:"sm",onClick:()=>Tt(M.id),children:[e.jsx(oa,{className:"h-4 w-4 mr-2"}),"PDF"]}),e.jsxs(q,{variant:"outline",size:"sm",onClick:()=>it(M),children:[e.jsx(iA,{className:"h-4 w-4 mr-2"}),"Duplicate"]})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs(se,{children:[e.jsx(ue,{children:e.jsx(fe,{className:"text-base",children:"Customer Information"})}),e.jsxs(ae,{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ot,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"font-medium",children:M.customer_name})]}),M.company_name&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Cs,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm",children:M.company_name})]}),M.email&&e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Email: ",M.email]}),M.phone&&e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Phone: ",M.phone]})]})]}),e.jsxs(se,{children:[e.jsx(ue,{children:e.jsx(fe,{className:"text-base",children:"Quote Information"})}),e.jsxs(ae,{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Quote #:"}),e.jsx("span",{className:"font-medium",children:M.formatted_number||M.quote_number||`Q-${M.id}`})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Created:"}),e.jsx("span",{children:jt(M.created_at)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Valid Until:"}),e.jsx("span",{className:tx(M.valid_until)?"text-red-600":"",children:jt(M.valid_until)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Created By:"}),e.jsx("span",{children:M.created_by_name})]})]})]})]}),e.jsxs(se,{children:[e.jsx(ue,{children:e.jsx(fe,{className:"text-base",children:"Quote Items"})}),e.jsx(ae,{children:e.jsxs(ir,{children:[e.jsx(lr,{children:e.jsxs(ft,{children:[e.jsx(me,{children:"Item"}),e.jsx(me,{children:"Category"}),e.jsx(me,{className:"text-center",children:"Qty"}),e.jsx(me,{className:"text-right",children:"Unit Price"}),e.jsx(me,{className:"text-right",children:"Total"})]})}),e.jsx(or,{children:L.map(ce=>e.jsxs(ft,{children:[e.jsx(oe,{children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:ce.item_name}),ce.description&&e.jsx("div",{className:"text-sm text-muted-foreground",children:ce.description})]})}),e.jsx(oe,{children:ce.category&&e.jsx(Oe,{variant:"outline",children:ce.category})}),e.jsx(oe,{className:"text-center",children:ce.quantity}),e.jsx(oe,{className:"text-right",children:at(ce.unit_price)}),e.jsx(oe,{className:"text-right font-medium",children:at(ce.total_price)})]},ce.id))})]})})]}),e.jsx(se,{className:"bg-blue-50 dark:bg-blue-950",children:e.jsxs(ae,{className:"pt-6 space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Subtotal:"}),e.jsx("span",{className:"font-medium",children:at(M.subtotal||0)})]}),M.discount_amount&&M.discount_amount>0&&e.jsxs("div",{className:"flex justify-between text-green-600",children:[e.jsxs("span",{children:["Discount (",Number(M.discount_percentage||0).toFixed(2),"%):"]}),e.jsxs("span",{className:"font-medium",children:["-",at(M.discount_amount)]})]}),M.tax_amount&&M.tax_amount>0&&e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{children:["Tax (",Number(M.tax_rate||0).toFixed(2),"%):"]}),e.jsx("span",{className:"font-medium",children:at(M.tax_amount)})]}),e.jsxs("div",{className:"flex justify-between text-xl font-bold border-t pt-3",children:[e.jsx("span",{children:"Total Amount:"}),e.jsx("span",{className:"text-blue-600",children:at(M.total_amount)})]})]})}),M.notes&&e.jsxs(se,{children:[e.jsx(ue,{children:e.jsx(fe,{className:"text-base",children:"Notes"})}),e.jsx(ae,{children:e.jsx("p",{className:"text-sm whitespace-pre-wrap",children:M.notes})})]}),M.terms_conditions&&e.jsxs(se,{children:[e.jsx(ue,{children:e.jsx(fe,{className:"text-base",children:"Terms & Conditions"})}),e.jsx(ae,{children:e.jsx("p",{className:"text-sm whitespace-pre-wrap",children:M.terms_conditions})})]})]})]})})]})}const dte=[{value:"7d",label:"Last 7 Days"},{value:"30d",label:"Last 30 Days"},{value:"90d",label:"Last 90 Days"},{value:"1y",label:"Last Year"},{value:"ytd",label:"Year to Date"}],gE=[{key:"name",label:"Sales Person"},{key:"revenue",label:"Revenue"},{key:"target",label:"Target"},{key:"achievement",label:"Achievement"},{key:"leads",label:"Leads"},{key:"quotes",label:"Quotes"},{key:"conversion",label:"Conversion"},{key:"performance",label:"Performance"}],yE=[{key:"period",label:"Period"},{key:"revenue",label:"Revenue"},{key:"leads",label:"Leads"},{key:"quotes",label:"Quotes"},{key:"deals",label:"Deals"}],vE=[{key:"month",label:"Month"},{key:"forecasted",label:"Forecasted"},{key:"actual",label:"Actual"},{key:"variance",label:"Variance"},{key:"confidence",label:"Confidence"}];function ute(){const{user:t}=hr(),[r,n]=f.useState("30d"),[s,a]=f.useState("overview"),l=ps("sales_performance",gs(gE)),c=ps("sales_trends",gs(yE)),u=ps("sales_forecast",gs(vE)),d=I=>{switch(I){case"7d":return"week";case"30d":return"month";case"90d":return"quarter";case"1y":return"year";case"ytd":return"year";default:return"month"}},h=I=>{switch(I){case"7d":case"30d":return"monthly";case"90d":return"quarterly";case"1y":case"ytd":return"yearly";default:return"monthly"}},{data:x,isLoading:p}=jr({queryKey:["sales-metrics",r],queryFn:()=>de.getSalesMetrics({time_period:d(r)}),staleTime:300*1e3}),{data:y,isLoading:v}=jr({queryKey:["sales-team",r],queryFn:()=>de.getSalesTeam(h(r)),staleTime:600*1e3}),{data:w,isLoading:b}=jr({queryKey:["sales-trends",r],queryFn:()=>de.getSalesTrends({time_period:d(r),group_by:"month"}),staleTime:600*1e3}),{data:N,isLoading:_}=jr({queryKey:["sales-forecast"],queryFn:()=>de.getSalesForecast({months:6}),staleTime:1800*1e3}),{data:S,isLoading:k}=jr({queryKey:["recent-sales",r],queryFn:()=>de.getRecentSales({limit:10,time_period:d(r)}),staleTime:300*1e3}),{data:E,isLoading:A}=jr({queryKey:["top-customers",r],queryFn:()=>de.getTopCustomers({limit:10,time_period:d(r)}),staleTime:600*1e3}),{data:O,isLoading:z}=jr({queryKey:["lead-sources",r],queryFn:()=>de.getLeadSources({time_period:d(r)}),staleTime:600*1e3}),R=p||v||k||A||z,G=x?.data?{totalRevenue:x.data.totalRevenue||0,totalLeads:x.data.totalSales||0,totalQuotes:0,conversionRate:x.data.totalSales>0?Math.round(x.data.customersServed/x.data.totalSales*100):0,averageDealSize:x.data.avgSalePrice||0,salesCycle:0,winRate:x.data.totalSales>0?Math.round(x.data.customersServed/x.data.totalSales*100):0,monthlyGrowth:x.data.revenueChange||0}:{totalRevenue:0,totalLeads:0,totalQuotes:0,conversionRate:0,averageDealSize:0,salesCycle:0,winRate:0,monthlyGrowth:0},J=y?.data?.team?y.data.team.map(I=>({id:I.id,name:I.name,email:I.email,avatar:I.avatar,totalRevenue:I.totalRevenue||0,totalLeads:I.totalSales||0,totalQuotes:0,conversionRate:I.totalSales>0?Math.round(I.customersServed/I.totalSales*100):0,averageDealSize:I.avgSalePrice||0,salesCycle:0,winRate:I.totalSales>0?Math.round(I.customersServed/I.totalSales*100):0,monthlyTarget:I.target||0,monthlyActual:I.totalRevenue||0,performance:I.completionRate>=100?"excellent":I.completionRate>=80?"good":I.completionRate>=60?"average":"needs_improvement"})):[];S?.data?.sales&&S.data.sales.map(I=>({id:I.id,customer_name:I.customer_name||"Unknown Customer",company_name:I.company_name,model_name:I.model_name||"Unknown Model",serial_number:I.serial_number||"N/A",sold_by_name:I.sold_by_name||"Unknown",sale_price:I.sale_price||0,sale_date:I.sale_date||new Date().toISOString()}));const ie=E?.data?.customers?E.data.customers.map(I=>({id:I.id,name:I.name||"Unknown Customer",company:I.company||I.name,totalRevenue:I.totalRevenue||0,totalDeals:I.totalDeals||0,lastDeal:I.lastDeal||new Date().toISOString(),status:I.status||"active"})):[],V=O?.data?.leadSources?O.data.leadSources.map(I=>({source:I.source,leads:I.leads||0,revenue:I.revenue||0,conversionRate:I.conversionRate||0,percentage:I.percentage||0})):[],xe=V.length>0,pe=w?.data?w.data.map(I=>({month:I.month||new Date(I.date).toLocaleDateString("en-US",{month:"short"}),revenue:I.revenue||0,leads:I.leads||0,quotes:I.quotes||0,deals:I.deals||I.sales||0})):[],re=N?.data?N.data.map(I=>({month:I.month,forecasted:I.forecasted||0,actual:I.actual||0,confidence:I.confidence||0})):[],M=I=>`${I.toFixed(1)}%`,B=I=>{switch(I){case"excellent":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300";case"good":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300";case"average":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300";case"needs_improvement":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-300"}},L=I=>{switch(I){case"active":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300";case"inactive":return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-300";case"prospect":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-300"}},T=()=>{window.location.reload()},F=()=>{};return e.jsx(gt,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Sales Reports"}),e.jsx("p",{className:"text-muted-foreground",children:"Comprehensive sales analytics and performance metrics"})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs(tt,{value:r,onValueChange:n,children:[e.jsx(Je,{className:"w-[160px]",children:e.jsx(rt,{})}),e.jsx(et,{children:dte.map(I=>e.jsx(Y,{value:I.value,children:I.label},I.value))})]}),e.jsxs(q,{variant:"outline",size:"sm",onClick:T,disabled:R,children:[e.jsx(Ws,{className:`h-4 w-4 mr-2 ${R?"animate-spin":""}`}),"Refresh"]}),e.jsxs(q,{size:"sm",onClick:F,children:[e.jsx(oa,{className:"h-4 w-4 mr-2"}),"Export"]})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsxs(se,{children:[e.jsxs(ue,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(fe,{className:"text-sm font-medium",children:"Total Revenue"}),e.jsx(Tn,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(ae,{children:[e.jsx("div",{className:"text-2xl font-bold",children:at(G.totalRevenue)}),e.jsxs("div",{className:"flex items-center text-xs text-muted-foreground",children:[e.jsx(Os,{className:"h-3 w-3 mr-1 text-green-600"}),e.jsxs("span",{className:"text-green-600",children:["+",M(G.monthlyGrowth)]}),e.jsx("span",{className:"ml-1",children:"from last month"})]})]})]}),e.jsxs(se,{children:[e.jsxs(ue,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(fe,{className:"text-sm font-medium",children:"Total Leads"}),e.jsx(xs,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(ae,{children:[e.jsx("div",{className:"text-2xl font-bold",children:G.totalLeads}),e.jsxs("div",{className:"flex items-center text-xs text-muted-foreground",children:[e.jsx(ti,{className:"h-3 w-3 mr-1"}),e.jsxs("span",{children:[G.totalQuotes," quotes generated"]})]})]})]}),e.jsxs(se,{children:[e.jsxs(ue,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(fe,{className:"text-sm font-medium",children:"Conversion Rate"}),e.jsx(ti,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(ae,{children:[e.jsx("div",{className:"text-2xl font-bold",children:M(G.conversionRate)}),e.jsxs("div",{className:"flex items-center text-xs text-muted-foreground",children:[e.jsx(Ar,{className:"h-3 w-3 mr-1"}),e.jsxs("span",{children:[M(G.winRate)," win rate"]})]})]})]}),e.jsxs(se,{children:[e.jsxs(ue,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(fe,{className:"text-sm font-medium",children:"Average Deal Size"}),e.jsx(sl,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(ae,{children:[e.jsx("div",{className:"text-2xl font-bold",children:at(G.averageDealSize)}),e.jsxs("div",{className:"flex items-center text-xs text-muted-foreground",children:[e.jsx(Zt,{className:"h-3 w-3 mr-1"}),e.jsxs("span",{children:[G.salesCycle," days avg cycle"]})]})]})]})]}),e.jsxs(Ys,{value:s,onValueChange:a,children:[e.jsxs(Ps,{children:[e.jsx(Kt,{value:"overview",children:"Overview"}),e.jsx(Kt,{value:"performance",children:"Performance"}),e.jsx(Kt,{value:"trends",children:"Trends"}),e.jsx(Kt,{value:"forecast",children:"Forecast"})]}),e.jsx(Gt,{value:"overview",className:"space-y-4",children:e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs(se,{children:[e.jsxs(ue,{children:[e.jsx(fe,{children:"Lead Sources"}),e.jsx(Xt,{children:"Revenue breakdown by lead source"})]}),e.jsx(ae,{children:xe?e.jsx("div",{className:"space-y-4",children:V.map((I,Q)=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:I.source}),e.jsx("span",{className:"text-sm text-muted-foreground",children:at(I.revenue)})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ki,{value:I.percentage,className:"flex-1"}),e.jsx("span",{className:"text-xs text-muted-foreground w-12",children:M(I.percentage)})]}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[e.jsxs("span",{children:[I.leads," leads"]}),e.jsxs("span",{children:[M(I.conversionRate)," conversion"]})]})]},I.source))}):e.jsx("div",{className:"flex items-center justify-center h-32",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-sm text-muted-foreground mb-2",children:"No lead sources data available"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Lead sources will appear here once leads are created in the system"})]})})})]}),e.jsxs(se,{children:[e.jsxs(ue,{children:[e.jsx(fe,{children:"Top Customers"}),e.jsx(Xt,{children:"Highest revenue generating customers"})]}),e.jsx(ae,{children:e.jsx("div",{className:"space-y-4",children:ie.map(I=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(oo,{className:"h-8 w-8",children:e.jsx(co,{className:"text-xs",children:I.name.charAt(0)})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-sm",children:I.name}),e.jsx("div",{className:"text-xs text-muted-foreground",children:I.company})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"font-medium text-sm",children:at(I.totalRevenue)}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Oe,{className:L(I.status),children:I.status}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:[I.totalDeals," deals"]})]})]})]},I.id))})})]})]})}),e.jsx(Gt,{value:"performance",className:"space-y-4",children:e.jsxs(se,{children:[e.jsx(ue,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(fe,{children:"Sales Team Performance"}),e.jsx(Xt,{children:"Individual performance metrics and targets"})]}),e.jsx(ys,{columns:gE,visibleColumns:l.visibleColumns,onToggleColumn:l.toggleColumn,onShowAll:l.showAllColumns,onHideAll:l.hideAllColumns,onReset:l.resetColumns,isSyncing:l.isSyncing})]})}),e.jsx(ae,{children:e.jsxs(ir,{children:[e.jsx(lr,{children:e.jsxs(ft,{children:[l.isColumnVisible("name")&&e.jsx(me,{children:"Salesperson"}),l.isColumnVisible("revenue")&&e.jsx(me,{children:"Revenue"}),l.isColumnVisible("target")&&e.jsx(me,{children:"Target"}),l.isColumnVisible("leads")&&e.jsx(me,{children:"Leads"}),l.isColumnVisible("conversion")&&e.jsx(me,{children:"Conversion"}),l.isColumnVisible("performance")&&e.jsx(me,{children:"Performance"})]})}),e.jsx(or,{children:J.map(I=>e.jsxs(ft,{children:[l.isColumnVisible("name")&&e.jsx(oe,{children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(oo,{className:"h-8 w-8",children:e.jsx(co,{className:"text-xs",children:I.name.charAt(0)})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:I.name}),e.jsx("div",{className:"text-sm text-muted-foreground",children:I.email})]})]})}),l.isColumnVisible("revenue")&&e.jsx(oe,{className:"font-medium",children:at(I.totalRevenue)}),l.isColumnVisible("target")&&e.jsx(oe,{children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ki,{value:I.monthlyTarget>0?I.monthlyActual/I.monthlyTarget*100:0,className:"w-16"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:I.monthlyTarget>0?M(I.monthlyActual/I.monthlyTarget*100):"0%"})]})}),l.isColumnVisible("leads")&&e.jsx(oe,{children:I.totalLeads}),l.isColumnVisible("conversion")&&e.jsx(oe,{children:M(I.conversionRate)}),l.isColumnVisible("performance")&&e.jsx(oe,{children:e.jsx(Oe,{className:B(I.performance),children:I.performance.replace("_"," ")})})]},I.id))})]})})]})}),e.jsx(Gt,{value:"trends",className:"space-y-4",children:e.jsxs(se,{children:[e.jsx(ue,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(fe,{children:"Sales Trends"}),e.jsx(Xt,{children:"Monthly revenue and activity trends"})]}),e.jsx(ys,{columns:yE,visibleColumns:c.visibleColumns,onToggleColumn:c.toggleColumn,onShowAll:c.showAllColumns,onHideAll:c.hideAllColumns,onReset:c.resetColumns,isSyncing:c.isSyncing})]})}),e.jsx(ae,{children:b?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx("div",{className:"text-muted-foreground",children:"Loading trends data..."})}):pe.length===0?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx("div",{className:"text-muted-foreground",children:"No trends data available for the selected period."})}):e.jsxs(ir,{children:[e.jsx(lr,{children:e.jsxs(ft,{children:[c.isColumnVisible("period")&&e.jsx(me,{children:"Month"}),c.isColumnVisible("revenue")&&e.jsx(me,{children:"Revenue"}),c.isColumnVisible("leads")&&e.jsx(me,{children:"Leads"}),c.isColumnVisible("quotes")&&e.jsx(me,{children:"Quotes"}),c.isColumnVisible("deals")&&e.jsx(me,{children:"Deals"})]})}),e.jsx(or,{children:pe.map((I,Q)=>{const W=Q>0?pe[Q-1].revenue:I.revenue;return W>0&&(I.revenue-W)/W*100,e.jsxs(ft,{children:[c.isColumnVisible("period")&&e.jsx(oe,{className:"font-medium",children:I.month}),c.isColumnVisible("revenue")&&e.jsx(oe,{children:at(I.revenue)}),c.isColumnVisible("leads")&&e.jsx(oe,{children:I.leads}),c.isColumnVisible("quotes")&&e.jsx(oe,{children:I.quotes}),c.isColumnVisible("deals")&&e.jsx(oe,{children:I.deals})]},I.month)})})]})})]})}),e.jsx(Gt,{value:"forecast",className:"space-y-4",children:e.jsxs(se,{children:[e.jsx(ue,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(fe,{children:"Sales Forecast"}),e.jsx(Xt,{children:"Revenue forecast and confidence levels based on historical data"})]}),e.jsx(ys,{columns:vE,visibleColumns:u.visibleColumns,onToggleColumn:u.toggleColumn,onShowAll:u.showAllColumns,onHideAll:u.hideAllColumns,onReset:u.resetColumns,isSyncing:u.isSyncing})]})}),e.jsx(ae,{children:_?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx("div",{className:"text-muted-foreground",children:"Loading forecast data..."})}):re.length===0?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx("div",{className:"text-muted-foreground",children:"No forecast data available. Need more historical data to generate forecasts."})}):e.jsxs(ir,{children:[e.jsx(lr,{children:e.jsxs(ft,{children:[u.isColumnVisible("month")&&e.jsx(me,{children:"Month"}),u.isColumnVisible("forecasted")&&e.jsx(me,{children:"Forecasted"}),u.isColumnVisible("actual")&&e.jsx(me,{children:"Actual"}),u.isColumnVisible("variance")&&e.jsx(me,{children:"Variance"}),u.isColumnVisible("confidence")&&e.jsx(me,{children:"Confidence"})]})}),e.jsx(or,{children:re.map(I=>{const Q=I.actual>0?(I.actual-I.forecasted)/I.forecasted*100:0;return e.jsxs(ft,{children:[u.isColumnVisible("month")&&e.jsx(oe,{className:"font-medium",children:I.month}),u.isColumnVisible("forecasted")&&e.jsx(oe,{children:at(I.forecasted)}),u.isColumnVisible("actual")&&e.jsx(oe,{children:I.actual>0?at(I.actual):"-"}),u.isColumnVisible("variance")&&e.jsx(oe,{children:I.actual>0&&e.jsxs("div",{className:"flex items-center space-x-1",children:[Q>=0?e.jsx(Os,{className:"h-4 w-4 text-green-600"}):e.jsx(Zm,{className:"h-4 w-4 text-red-600"}),e.jsx("span",{className:`text-sm ${Q>=0?"text-green-600":"text-red-600"}`,children:M(Math.abs(Q))})]})}),u.isColumnVisible("confidence")&&e.jsx(oe,{children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ki,{value:I.confidence,className:"w-16"}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[I.confidence,"%"]})]})})]},I.month)})})]})})]})})]})]})})}const Cj=[{value:"monthly",label:"Monthly"},{value:"quarterly",label:"Quarterly"},{value:"yearly",label:"Yearly"}],jE=[{key:"user",label:"Sales Person"},{key:"type",label:"Type"},{key:"amount",label:"Target Amount"},{key:"period",label:"Period"},{key:"description",label:"Description"},{key:"created_by",label:"Created By"}];function mte(){const{user:t,hasPermission:r}=hr(),n=r("sales_targets:write"),[s,a]=f.useState([]),[l,c]=f.useState([]),[u,d]=f.useState(!0),[h,x]=f.useState(!0),[p,y]=f.useState("all"),[v,w]=f.useState(!1),[b,N]=f.useState(null),[_,S]=f.useState({user_id:0,target_type:"monthly",target_amount:0,target_period_start:"",target_period_end:"",description:""}),{visibleColumns:k,toggleColumn:E,isColumnVisible:A,resetColumns:O,showAllColumns:z,hideAllColumns:R,isSyncing:G}=ps("sales_targets",gs(jE));f.useEffect(()=>{J(),ie()},[]),f.useEffect(()=>{J()},[p]);const J=async()=>{try{x(!0);const L={is_active:!0};p!=="all"&&(L.target_type=p);const T=await de.getSalesTargets(L);a(T.data.targets||[])}catch(L){console.error("Error loading targets:",L),a([])}finally{x(!1)}},ie=async()=>{try{d(!0);const L=await de.request("/users/sales");c(L.data||[])}catch(L){console.error("Error loading users:",L),c([])}finally{d(!1)}},V=()=>{N(null),S({user_id:0,target_type:"monthly",target_amount:0,target_period_start:"",target_period_end:"",description:""}),w(!0)},xe=L=>{N(L),S({user_id:L.user_id,target_type:L.target_type,target_amount:L.target_amount,target_period_start:L.target_period_start,target_period_end:L.target_period_end,description:L.description||""}),w(!0)},pe=async L=>{L.preventDefault();try{b?(await de.updateSalesTarget(b.id.toString(),_),Ne.success("Target updated successfully",{description:`Updated ${_.target_type} target for ${l.find(T=>T.id===_.user_id)?.name}`})):(await de.createSalesTarget(_),Ne.success("Target created successfully",{description:`Created ${_.target_type} target for ${l.find(T=>T.id===_.user_id)?.name}`})),w(!1),J()}catch(T){console.error("Error saving target:",T),Ne.error("Failed to save target",{description:T instanceof Error?T.message:"An error occurred"})}},re=async L=>{const T=s.find(F=>F.id===L);if(window.confirm("Are you sure you want to deactivate this target?"))try{await de.deleteSalesTarget(L.toString()),Ne.success("Target deleted successfully",{description:T?`Deleted ${T.target_type} target for ${T.user_name}`:"Target has been removed"}),J()}catch(F){console.error("Error deleting target:",F),Ne.error("Failed to delete target",{description:F instanceof Error?F.message:"An error occurred"})}},M=L=>{switch(L){case"monthly":return"bg-blue-100 text-blue-800";case"quarterly":return"bg-green-100 text-green-800";case"yearly":return"bg-purple-100 text-purple-800";default:return"bg-gray-100 text-gray-800"}},B=L=>{const T=new Date;let F,I;switch(L){case"monthly":F=new Date(T.getFullYear(),T.getMonth(),1),I=new Date(T.getFullYear(),T.getMonth()+1,0);break;case"quarterly":const Q=Math.floor(T.getMonth()/3);F=new Date(T.getFullYear(),Q*3,1),I=new Date(T.getFullYear(),Q*3+3,0);break;case"yearly":F=new Date(T.getFullYear(),0,1),I=new Date(T.getFullYear(),11,31);break}S(Q=>({...Q,target_period_start:F.toISOString().split("T")[0],target_period_end:I.toISOString().split("T")[0]}))};return e.jsx(gt,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Sales Targets"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage sales targets for your team members"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(U,{htmlFor:"target-type-filter",children:"Filter by type:"}),e.jsxs(tt,{value:p,onValueChange:L=>y(L),children:[e.jsx(Je,{className:"w-32",children:e.jsx(rt,{})}),e.jsxs(et,{children:[e.jsx(Y,{value:"all",children:"All Types"}),Cj.map(L=>e.jsx(Y,{value:L.value,children:L.label},L.value))]})]})]}),n&&e.jsxs(q,{onClick:V,className:"flex items-center gap-2",children:[e.jsx(Vt,{className:"h-4 w-4"}),"Create Target"]})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[e.jsxs(se,{children:[e.jsxs(ue,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(fe,{className:"text-sm font-medium",children:"Total Targets"}),e.jsx(ti,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(ae,{children:[e.jsx("div",{className:"text-2xl font-bold",children:s?.length||0}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Active ",p==="all"?"targets":`${p} targets`," across all sales users"]})]})]}),e.jsxs(se,{children:[e.jsxs(ue,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(fe,{className:"text-sm font-medium",children:"Sales Users"}),e.jsx(xs,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(ae,{children:[e.jsx("div",{className:"text-2xl font-bold",children:u?"...":l?.length||0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Active sales team members"})]})]}),e.jsxs(se,{children:[e.jsxs(ue,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(fe,{className:"text-sm font-medium",children:"Total Target Value"}),e.jsx(ti,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(ae,{children:[e.jsx("div",{className:"text-2xl font-bold",children:at(s?.reduce((L,T)=>L+T.target_amount,0)||0)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Combined target amount"})]})]})]}),e.jsxs(se,{children:[e.jsx(ue,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(fe,{children:p==="all"?"Current Targets":`${Cj.find(L=>L.value===p)?.label} Targets`}),e.jsx(Xt,{children:p==="all"?"View and manage all active sales targets":`View and manage all active ${p} sales targets`})]}),e.jsx(ys,{columns:jE,visibleColumns:k,onToggleColumn:E,onShowAll:z,onHideAll:R,onReset:O,isSyncing:G})]})}),e.jsx(ae,{children:h?e.jsx("div",{className:"text-center py-8",children:"Loading targets..."}):!s||s.length===0?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No targets found. Create your first target to get started."}):e.jsxs(ir,{children:[e.jsx(lr,{children:e.jsxs(ft,{children:[A("user")&&e.jsx(me,{children:"User"}),A("type")&&e.jsx(me,{children:"Type"}),A("amount")&&e.jsx(me,{children:"Target Amount"}),A("period")&&e.jsx(me,{children:"Period"}),A("created_by")&&e.jsx(me,{children:"Created By"}),n&&e.jsx(me,{children:"Actions"})]})}),e.jsx(or,{children:s?.map(L=>e.jsxs(ft,{children:[A("user")&&e.jsx(oe,{children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:L.user_name}),e.jsx("div",{className:"text-sm text-muted-foreground",children:L.user_email})]})}),A("type")&&e.jsx(oe,{children:e.jsx(Oe,{className:M(L.target_type),children:L.target_type})}),A("amount")&&e.jsx(oe,{className:"font-medium",children:at(L.target_amount)}),A("period")&&e.jsx(oe,{children:e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{children:Ed(new Date(L.target_period_start),"MMM dd, yyyy")}),e.jsxs("div",{className:"text-muted-foreground",children:["to ",Ed(new Date(L.target_period_end),"MMM dd, yyyy")]})]})}),A("created_by")&&e.jsx(oe,{children:e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{children:L.created_by_name}),e.jsx("div",{className:"text-muted-foreground",children:Ed(new Date(L.created_at),"MMM dd, yyyy")})]})}),n&&e.jsx(oe,{className:"text-right",children:e.jsxs(Cr,{children:[e.jsx(Sr,{asChild:!0,children:e.jsx(q,{variant:"ghost",className:"h-8 w-8 p-0",children:e.jsx(ss,{className:"h-4 w-4"})})}),e.jsxs(wr,{align:"end",children:[e.jsx(Tr,{children:"Actions"}),e.jsxs(ct,{onClick:()=>xe(L),children:[e.jsx(xr,{className:"mr-2 h-4 w-4"}),"Edit Target"]}),e.jsxs(ct,{onClick:()=>re(L.id),className:"text-red-600",children:[e.jsx(br,{className:"mr-2 h-4 w-4"}),"Delete"]})]})]})})]},L.id))})]})})]}),e.jsx(Ft,{open:v,onOpenChange:w,children:e.jsxs(Rt,{className:"sm:max-w-[500px]",children:[e.jsxs(qt,{children:[e.jsx(Lt,{children:b?"Edit Target":"Create New Target"}),e.jsx(Ut,{children:b?"Update the target details below.":"Set a new sales target for a team member."})]}),e.jsxs("form",{onSubmit:pe,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"user_id",children:"Sales User"}),e.jsxs(tt,{value:_.user_id.toString(),onValueChange:L=>S(T=>({...T,user_id:parseInt(L)})),children:[e.jsx(Je,{children:e.jsx(rt,{placeholder:"Select a sales user"})}),e.jsx(et,{children:l?.map(L=>e.jsxs(Y,{value:L.id.toString(),children:[L.name," (",L.email,")"]},L.id))||[]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"target_type",children:"Target Type"}),e.jsxs(tt,{value:_.target_type,onValueChange:L=>{S(T=>({...T,target_type:L})),B(L)},children:[e.jsx(Je,{children:e.jsx(rt,{placeholder:"Select target type"})}),e.jsx(et,{children:Cj.map(L=>e.jsx(Y,{value:L.value,children:L.label},L.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"target_amount",children:"Target Amount (KM)"}),e.jsx(be,{id:"target_amount",type:"number",step:"0.01",value:_.target_amount,onChange:L=>S(T=>({...T,target_amount:parseFloat(L.target.value)||0})),placeholder:"Enter target amount",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"target_period_start",children:"Start Date"}),e.jsx(Rn,{value:_.target_period_start,onChange:L=>S(T=>({...T,target_period_start:L})),placeholder:"Select start date"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"target_period_end",children:"End Date"}),e.jsx(Rn,{value:_.target_period_end,onChange:L=>S(T=>({...T,target_period_end:L})),placeholder:"Select end date"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"description",children:"Description (Optional)"}),e.jsx(be,{id:"description",value:_.description,onChange:L=>S(T=>({...T,description:L.target.value})),placeholder:"Enter description"})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx(q,{type:"button",variant:"outline",onClick:()=>w(!1),children:"Cancel"}),e.jsx(q,{type:"submit",children:b?"Update Target":"Create Target"})]})]})]})})]})})}const hte=()=>{const{user:t,isLoading:r}=hr(),n=er();return f.useEffect(()=>{!r&&t&&(t.role==="admin"?n("/dashboard/admin",{replace:!0}):t.role==="manager"?n("/dashboard/manager",{replace:!0}):n("/dashboard/my-work",{replace:!0}))},[t,r,n]),e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Nt,{className:"h-8 w-8 animate-spin mx-auto mb-4 text-muted-foreground"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading dashboard..."})]})})};var Sj={},kj={},bE;function fte(){return bE||(bE=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function r(n){return n==="__proto__"}t.isUnsafeProperty=r})(kj)),kj}var Aj={},wE;function g5(){return wE||(wE=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function r(n){switch(typeof n){case"number":case"symbol":return!1;case"string":return n.includes(".")||n.includes("[")||n.includes("]")}}t.isDeepKey=r})(Aj)),Aj}var Ej={},NE;function y5(){return NE||(NE=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function r(n){return typeof n=="string"||typeof n=="symbol"?n:Object.is(n?.valueOf?.(),-0)?"-0":String(n)}t.toKey=r})(Ej)),Ej}var Mj={},_E;function n_(){return _E||(_E=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function r(n){const s=[],a=n.length;if(a===0)return s;let l=0,c="",u="",d=!1;for(n.charCodeAt(0)===46&&(s.push(""),l++);l<a;){const h=n[l];u?h==="\\"&&l+1<a?(l++,c+=n[l]):h===u?u="":c+=h:d?h==='"'||h==="'"?u=h:h==="]"?(d=!1,s.push(c),c=""):c+=h:h==="["?(d=!0,c&&(s.push(c),c="")):h==="."?c&&(s.push(c),c=""):c+=h,l++}return c&&s.push(c),s}t.toPath=r})(Mj)),Mj}var CE;function s_(){return CE||(CE=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=fte(),n=g5(),s=y5(),a=n_();function l(u,d,h){if(u==null)return h;switch(typeof d){case"string":{if(r.isUnsafeProperty(d))return h;const x=u[d];return x===void 0?n.isDeepKey(d)?l(u,a.toPath(d),h):h:x}case"number":case"symbol":{typeof d=="number"&&(d=s.toKey(d));const x=u[d];return x===void 0?h:x}default:{if(Array.isArray(d))return c(u,d,h);if(Object.is(d?.valueOf(),-0)?d="-0":d=String(d),r.isUnsafeProperty(d))return h;const x=u[d];return x===void 0?h:x}}}function c(u,d,h){if(d.length===0)return h;let x=u;for(let p=0;p<d.length;p++){if(x==null||r.isUnsafeProperty(d[p]))return h;x=x[d[p]]}return x===void 0?h:x}t.get=l})(Sj)),Sj}var Tj,SE;function xte(){return SE||(SE=1,Tj=s_().get),Tj}var pte=xte();const vc=Di(pte);var Oj={exports:{}},Hr={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kE;function gte(){if(kE)return Hr;kE=1;var t=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),h=Symbol.for("react.suspense_list"),x=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),y=Symbol.for("react.view_transition"),v=Symbol.for("react.client.reference");function w(b){if(typeof b=="object"&&b!==null){var N=b.$$typeof;switch(N){case t:switch(b=b.type,b){case n:case a:case s:case d:case h:case y:return b;default:switch(b=b&&b.$$typeof,b){case c:case u:case p:case x:return b;case l:return b;default:return N}}case r:return N}}}return Hr.ContextConsumer=l,Hr.ContextProvider=c,Hr.Element=t,Hr.ForwardRef=u,Hr.Fragment=n,Hr.Lazy=p,Hr.Memo=x,Hr.Portal=r,Hr.Profiler=a,Hr.StrictMode=s,Hr.Suspense=d,Hr.SuspenseList=h,Hr.isContextConsumer=function(b){return w(b)===l},Hr.isContextProvider=function(b){return w(b)===c},Hr.isElement=function(b){return typeof b=="object"&&b!==null&&b.$$typeof===t},Hr.isForwardRef=function(b){return w(b)===u},Hr.isFragment=function(b){return w(b)===n},Hr.isLazy=function(b){return w(b)===p},Hr.isMemo=function(b){return w(b)===x},Hr.isPortal=function(b){return w(b)===r},Hr.isProfiler=function(b){return w(b)===a},Hr.isStrictMode=function(b){return w(b)===s},Hr.isSuspense=function(b){return w(b)===d},Hr.isSuspenseList=function(b){return w(b)===h},Hr.isValidElementType=function(b){return typeof b=="string"||typeof b=="function"||b===n||b===a||b===s||b===d||b===h||typeof b=="object"&&b!==null&&(b.$$typeof===p||b.$$typeof===x||b.$$typeof===c||b.$$typeof===l||b.$$typeof===u||b.$$typeof===v||b.getModuleId!==void 0)},Hr.typeOf=w,Hr}var AE;function yte(){return AE||(AE=1,Oj.exports=gte()),Oj.exports}var vte=yte(),Da=t=>t===0?0:t>0?1:-1,xa=t=>typeof t=="number"&&t!=+t,Jo=t=>typeof t=="string"&&t.indexOf("%")===t.length-1,Et=t=>(typeof t=="number"||t instanceof Number)&&!xa(t),Oi=t=>Et(t)||typeof t=="string",jte=0,$m=t=>{var r=++jte;return"".concat(t||"").concat(r)},yo=function(r,n){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Et(r)&&typeof r!="string")return s;var l;if(Jo(r)){if(n==null)return s;var c=r.indexOf("%");l=n*parseFloat(r.slice(0,c))/100}else l=+r;return xa(l)&&(l=s),a&&n!=null&&l>n&&(l=n),l},v5=t=>{if(!Array.isArray(t))return!1;for(var r=t.length,n={},s=0;s<r;s++)if(!n[t[s]])n[t[s]]=!0;else return!0;return!1};function jd(t,r,n){return Et(t)&&Et(r)?t+n*(r-t):r}function j5(t,r,n){if(!(!t||!t.length))return t.find(s=>s&&(typeof r=="function"?r(s):vc(s,r))===n)}var Wn=t=>t===null||typeof t>"u",ph=t=>Wn(t)?t:"".concat(t.charAt(0).toUpperCase()).concat(t.slice(1)),bte=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function a_(t){if(typeof t!="string")return!1;var r=bte;return r.includes(t)}var wte=["viewBox","children"],EE=["points","pathLength"],Pj={svg:wte,polygon:EE,polyline:EE},i_=(t,r)=>{if(!t||typeof t=="function"||typeof t=="boolean")return null;var n=t;if(f.isValidElement(t)&&(n=t.props),typeof n!="object"&&typeof n!="function")return null;var s={};return Object.keys(n).forEach(a=>{a_(a)&&(s[a]=(l=>n[a](n,l)))}),s},Nte=(t,r,n)=>s=>(t(r,n,s),null),b5=(t,r,n)=>{if(t===null||typeof t!="object"&&typeof t!="function")return null;var s=null;return Object.keys(t).forEach(a=>{var l=t[a];a_(a)&&typeof l=="function"&&(s||(s={}),s[a]=Nte(l,r,n))}),s},_te=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"];function w5(t){if(typeof t!="string")return!1;var r=_te;return r.includes(t)}function Ac(t){var r=Object.entries(t).filter(n=>{var[s]=n;return w5(s)});return Object.fromEntries(r)}var ME=t=>typeof t=="string"?t:t?t.displayName||t.name||"Component":"",TE=null,Dj=null,N5=t=>{if(t===TE&&Array.isArray(Dj))return Dj;var r=[];return f.Children.forEach(t,n=>{Wn(n)||(vte.isFragment(n)?r=r.concat(N5(n.props.children)):r.push(n))}),Dj=r,TE=t,r};function _5(t,r){var n=[],s=[];return Array.isArray(r)?s=r.map(a=>ME(a)):s=[ME(r)],N5(t).forEach(a=>{var l=vc(a,"type.displayName")||vc(a,"type.name");s.indexOf(l)!==-1&&n.push(a)}),n}var C5=t=>t&&typeof t=="object"&&"clipDot"in t?!!t.clipDot:!0,Cte=(t,r,n,s)=>{var a;if(typeof r=="symbol"||typeof r=="number")return!0;var l=(a=s&&Pj?.[s])!==null&&a!==void 0?a:[],c=r.startsWith("data-"),u=typeof t!="function"&&(!!s&&l.includes(r)||w5(r)),d=!!n&&a_(r);return c||u||d},ns=(t,r,n)=>{if(!t||typeof t=="function"||typeof t=="boolean")return null;var s=t;if(f.isValidElement(t)&&(s=t.props),typeof s!="object"&&typeof s!="function")return null;var a={};return Object.keys(s).forEach(l=>{var c;Cte((c=s)===null||c===void 0?void 0:c[l],l,r,n)&&(a[l]=s[l])}),a},Ste=["children","width","height","viewBox","className","style","title","desc"];function W0(){return W0=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var s in n)({}).hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},W0.apply(null,arguments)}function kte(t,r){if(t==null)return{};var n,s,a=Ate(t,r);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(s=0;s<l.length;s++)n=l[s],r.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function Ate(t,r){if(t==null)return{};var n={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(r.indexOf(s)!==-1)continue;n[s]=t[s]}return n}var l_=f.forwardRef((t,r)=>{var{children:n,width:s,height:a,viewBox:l,className:c,style:u,title:d,desc:h}=t,x=kte(t,Ste),p=l||{width:s,height:a,x:0,y:0},y=Ur("recharts-surface",c);return f.createElement("svg",W0({},ns(x,!0,"svg"),{className:y,width:s,height:a,style:u,viewBox:"".concat(p.x," ").concat(p.y," ").concat(p.width," ").concat(p.height),ref:r}),f.createElement("title",null,d),f.createElement("desc",null,h),n)}),Ete=["children","className"];function H0(){return H0=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var s in n)({}).hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},H0.apply(null,arguments)}function Mte(t,r){if(t==null)return{};var n,s,a=Tte(t,r);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(s=0;s<l.length;s++)n=l[s],r.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function Tte(t,r){if(t==null)return{};var n={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(r.indexOf(s)!==-1)continue;n[s]=t[s]}return n}var pl=f.forwardRef((t,r)=>{var{children:n,className:s}=t,a=Mte(t,Ete),l=Ur("recharts-layer",s);return f.createElement("g",H0({className:l},ns(a,!0),{ref:r}),n)}),S5=f.createContext(null),Ote=()=>f.useContext(S5);function Jr(t){return function(){return t}}const k5=Math.cos,Gx=Math.sin,di=Math.sqrt,Qx=Math.PI,ug=2*Qx,V0=Math.PI,Y0=2*V0,Go=1e-6,Pte=Y0-Go;function A5(t){this._+=t[0];for(let r=1,n=t.length;r<n;++r)this._+=arguments[r]+t[r]}function Dte(t){let r=Math.floor(t);if(!(r>=0))throw new Error(`invalid digits: ${t}`);if(r>15)return A5;const n=10**r;return function(s){this._+=s[0];for(let a=1,l=s.length;a<l;++a)this._+=Math.round(arguments[a]*n)/n+s[a]}}class Rte{constructor(r){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=r==null?A5:Dte(r)}moveTo(r,n){this._append`M${this._x0=this._x1=+r},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(r,n){this._append`L${this._x1=+r},${this._y1=+n}`}quadraticCurveTo(r,n,s,a){this._append`Q${+r},${+n},${this._x1=+s},${this._y1=+a}`}bezierCurveTo(r,n,s,a,l,c){this._append`C${+r},${+n},${+s},${+a},${this._x1=+l},${this._y1=+c}`}arcTo(r,n,s,a,l){if(r=+r,n=+n,s=+s,a=+a,l=+l,l<0)throw new Error(`negative radius: ${l}`);let c=this._x1,u=this._y1,d=s-r,h=a-n,x=c-r,p=u-n,y=x*x+p*p;if(this._x1===null)this._append`M${this._x1=r},${this._y1=n}`;else if(y>Go)if(!(Math.abs(p*d-h*x)>Go)||!l)this._append`L${this._x1=r},${this._y1=n}`;else{let v=s-c,w=a-u,b=d*d+h*h,N=v*v+w*w,_=Math.sqrt(b),S=Math.sqrt(y),k=l*Math.tan((V0-Math.acos((b+y-N)/(2*_*S)))/2),E=k/S,A=k/_;Math.abs(E-1)>Go&&this._append`L${r+E*x},${n+E*p}`,this._append`A${l},${l},0,0,${+(p*v>x*w)},${this._x1=r+A*d},${this._y1=n+A*h}`}}arc(r,n,s,a,l,c){if(r=+r,n=+n,s=+s,c=!!c,s<0)throw new Error(`negative radius: ${s}`);let u=s*Math.cos(a),d=s*Math.sin(a),h=r+u,x=n+d,p=1^c,y=c?a-l:l-a;this._x1===null?this._append`M${h},${x}`:(Math.abs(this._x1-h)>Go||Math.abs(this._y1-x)>Go)&&this._append`L${h},${x}`,s&&(y<0&&(y=y%Y0+Y0),y>Pte?this._append`A${s},${s},0,1,${p},${r-u},${n-d}A${s},${s},0,1,${p},${this._x1=h},${this._y1=x}`:y>Go&&this._append`A${s},${s},0,${+(y>=V0)},${p},${this._x1=r+s*Math.cos(l)},${this._y1=n+s*Math.sin(l)}`)}rect(r,n,s,a){this._append`M${this._x0=this._x1=+r},${this._y0=this._y1=+n}h${s=+s}v${+a}h${-s}Z`}toString(){return this._}}function o_(t){let r=3;return t.digits=function(n){if(!arguments.length)return r;if(n==null)r=null;else{const s=Math.floor(n);if(!(s>=0))throw new RangeError(`invalid digits: ${n}`);r=s}return t},()=>new Rte(r)}function c_(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function E5(t){this._context=t}E5.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,r){switch(t=+t,r=+r,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break;case 1:this._point=2;default:this._context.lineTo(t,r);break}}};function mg(t){return new E5(t)}function M5(t){return t[0]}function T5(t){return t[1]}function O5(t,r){var n=Jr(!0),s=null,a=mg,l=null,c=o_(u);t=typeof t=="function"?t:t===void 0?M5:Jr(t),r=typeof r=="function"?r:r===void 0?T5:Jr(r);function u(d){var h,x=(d=c_(d)).length,p,y=!1,v;for(s==null&&(l=a(v=c())),h=0;h<=x;++h)!(h<x&&n(p=d[h],h,d))===y&&((y=!y)?l.lineStart():l.lineEnd()),y&&l.point(+t(p,h,d),+r(p,h,d));if(v)return l=null,v+""||null}return u.x=function(d){return arguments.length?(t=typeof d=="function"?d:Jr(+d),u):t},u.y=function(d){return arguments.length?(r=typeof d=="function"?d:Jr(+d),u):r},u.defined=function(d){return arguments.length?(n=typeof d=="function"?d:Jr(!!d),u):n},u.curve=function(d){return arguments.length?(a=d,s!=null&&(l=a(s)),u):a},u.context=function(d){return arguments.length?(d==null?s=l=null:l=a(s=d),u):s},u}function ax(t,r,n){var s=null,a=Jr(!0),l=null,c=mg,u=null,d=o_(h);t=typeof t=="function"?t:t===void 0?M5:Jr(+t),r=typeof r=="function"?r:Jr(r===void 0?0:+r),n=typeof n=="function"?n:n===void 0?T5:Jr(+n);function h(p){var y,v,w,b=(p=c_(p)).length,N,_=!1,S,k=new Array(b),E=new Array(b);for(l==null&&(u=c(S=d())),y=0;y<=b;++y){if(!(y<b&&a(N=p[y],y,p))===_)if(_=!_)v=y,u.areaStart(),u.lineStart();else{for(u.lineEnd(),u.lineStart(),w=y-1;w>=v;--w)u.point(k[w],E[w]);u.lineEnd(),u.areaEnd()}_&&(k[y]=+t(N,y,p),E[y]=+r(N,y,p),u.point(s?+s(N,y,p):k[y],n?+n(N,y,p):E[y]))}if(S)return u=null,S+""||null}function x(){return O5().defined(a).curve(c).context(l)}return h.x=function(p){return arguments.length?(t=typeof p=="function"?p:Jr(+p),s=null,h):t},h.x0=function(p){return arguments.length?(t=typeof p=="function"?p:Jr(+p),h):t},h.x1=function(p){return arguments.length?(s=p==null?null:typeof p=="function"?p:Jr(+p),h):s},h.y=function(p){return arguments.length?(r=typeof p=="function"?p:Jr(+p),n=null,h):r},h.y0=function(p){return arguments.length?(r=typeof p=="function"?p:Jr(+p),h):r},h.y1=function(p){return arguments.length?(n=p==null?null:typeof p=="function"?p:Jr(+p),h):n},h.lineX0=h.lineY0=function(){return x().x(t).y(r)},h.lineY1=function(){return x().x(t).y(n)},h.lineX1=function(){return x().x(s).y(r)},h.defined=function(p){return arguments.length?(a=typeof p=="function"?p:Jr(!!p),h):a},h.curve=function(p){return arguments.length?(c=p,l!=null&&(u=c(l)),h):c},h.context=function(p){return arguments.length?(p==null?l=u=null:u=c(l=p),h):l},h}class P5{constructor(r,n){this._context=r,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(r,n){switch(r=+r,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+r)/2,this._y0,this._x0,n,r,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,r,this._y0,r,n);break}}this._x0=r,this._y0=n}}function Lte(t){return new P5(t,!0)}function Ite(t){return new P5(t,!1)}const d_={draw(t,r){const n=di(r/Qx);t.moveTo(n,0),t.arc(0,0,n,0,ug)}},$te={draw(t,r){const n=di(r/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}},D5=di(1/3),Fte=D5*2,qte={draw(t,r){const n=di(r/Fte),s=n*D5;t.moveTo(0,-n),t.lineTo(s,0),t.lineTo(0,n),t.lineTo(-s,0),t.closePath()}},Ute={draw(t,r){const n=di(r),s=-n/2;t.rect(s,s,n,n)}},zte=.8908130915292852,R5=Gx(Qx/10)/Gx(7*Qx/10),Bte=Gx(ug/10)*R5,Wte=-k5(ug/10)*R5,Hte={draw(t,r){const n=di(r*zte),s=Bte*n,a=Wte*n;t.moveTo(0,-n),t.lineTo(s,a);for(let l=1;l<5;++l){const c=ug*l/5,u=k5(c),d=Gx(c);t.lineTo(d*n,-u*n),t.lineTo(u*s-d*a,d*s+u*a)}t.closePath()}},Rj=di(3),Vte={draw(t,r){const n=-di(r/(Rj*3));t.moveTo(0,n*2),t.lineTo(-Rj*n,-n),t.lineTo(Rj*n,-n),t.closePath()}},ka=-.5,Aa=di(3)/2,K0=1/di(12),Yte=(K0/2+1)*3,Kte={draw(t,r){const n=di(r/Yte),s=n/2,a=n*K0,l=s,c=n*K0+n,u=-l,d=c;t.moveTo(s,a),t.lineTo(l,c),t.lineTo(u,d),t.lineTo(ka*s-Aa*a,Aa*s+ka*a),t.lineTo(ka*l-Aa*c,Aa*l+ka*c),t.lineTo(ka*u-Aa*d,Aa*u+ka*d),t.lineTo(ka*s+Aa*a,ka*a-Aa*s),t.lineTo(ka*l+Aa*c,ka*c-Aa*l),t.lineTo(ka*u+Aa*d,ka*d-Aa*u),t.closePath()}};function Gte(t,r){let n=null,s=o_(a);t=typeof t=="function"?t:Jr(t||d_),r=typeof r=="function"?r:Jr(r===void 0?64:+r);function a(){let l;if(n||(n=l=s()),t.apply(this,arguments).draw(n,+r.apply(this,arguments)),l)return n=null,l+""||null}return a.type=function(l){return arguments.length?(t=typeof l=="function"?l:Jr(l),a):t},a.size=function(l){return arguments.length?(r=typeof l=="function"?l:Jr(+l),a):r},a.context=function(l){return arguments.length?(n=l??null,a):n},a}function Xx(){}function Zx(t,r,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+r)/6,(t._y0+4*t._y1+n)/6)}function L5(t){this._context=t}L5.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Zx(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,r){switch(t=+t,r=+r,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Zx(this,t,r);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=r}};function Qte(t){return new L5(t)}function I5(t){this._context=t}I5.prototype={areaStart:Xx,areaEnd:Xx,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,r){switch(t=+t,r=+r,this._point){case 0:this._point=1,this._x2=t,this._y2=r;break;case 1:this._point=2,this._x3=t,this._y3=r;break;case 2:this._point=3,this._x4=t,this._y4=r,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+r)/6);break;default:Zx(this,t,r);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=r}};function Xte(t){return new I5(t)}function $5(t){this._context=t}$5.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,r){switch(t=+t,r=+r,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,s=(this._y0+4*this._y1+r)/6;this._line?this._context.lineTo(n,s):this._context.moveTo(n,s);break;case 3:this._point=4;default:Zx(this,t,r);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=r}};function Zte(t){return new $5(t)}function F5(t){this._context=t}F5.prototype={areaStart:Xx,areaEnd:Xx,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,r){t=+t,r=+r,this._point?this._context.lineTo(t,r):(this._point=1,this._context.moveTo(t,r))}};function Jte(t){return new F5(t)}function OE(t){return t<0?-1:1}function PE(t,r,n){var s=t._x1-t._x0,a=r-t._x1,l=(t._y1-t._y0)/(s||a<0&&-0),c=(n-t._y1)/(a||s<0&&-0),u=(l*a+c*s)/(s+a);return(OE(l)+OE(c))*Math.min(Math.abs(l),Math.abs(c),.5*Math.abs(u))||0}function DE(t,r){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-r)/2:r}function Lj(t,r,n){var s=t._x0,a=t._y0,l=t._x1,c=t._y1,u=(l-s)/3;t._context.bezierCurveTo(s+u,a+u*r,l-u,c-u*n,l,c)}function Jx(t){this._context=t}Jx.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Lj(this,this._t0,DE(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,r){var n=NaN;if(t=+t,r=+r,!(t===this._x1&&r===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break;case 1:this._point=2;break;case 2:this._point=3,Lj(this,DE(this,n=PE(this,t,r)),n);break;default:Lj(this,this._t0,n=PE(this,t,r));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=r,this._t0=n}}};function q5(t){this._context=new U5(t)}(q5.prototype=Object.create(Jx.prototype)).point=function(t,r){Jx.prototype.point.call(this,r,t)};function U5(t){this._context=t}U5.prototype={moveTo:function(t,r){this._context.moveTo(r,t)},closePath:function(){this._context.closePath()},lineTo:function(t,r){this._context.lineTo(r,t)},bezierCurveTo:function(t,r,n,s,a,l){this._context.bezierCurveTo(r,t,s,n,l,a)}};function ere(t){return new Jx(t)}function tre(t){return new q5(t)}function z5(t){this._context=t}z5.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,r=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],r[0]):this._context.moveTo(t[0],r[0]),n===2)this._context.lineTo(t[1],r[1]);else for(var s=RE(t),a=RE(r),l=0,c=1;c<n;++l,++c)this._context.bezierCurveTo(s[0][l],a[0][l],s[1][l],a[1][l],t[c],r[c]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,r){this._x.push(+t),this._y.push(+r)}};function RE(t){var r,n=t.length-1,s,a=new Array(n),l=new Array(n),c=new Array(n);for(a[0]=0,l[0]=2,c[0]=t[0]+2*t[1],r=1;r<n-1;++r)a[r]=1,l[r]=4,c[r]=4*t[r]+2*t[r+1];for(a[n-1]=2,l[n-1]=7,c[n-1]=8*t[n-1]+t[n],r=1;r<n;++r)s=a[r]/l[r-1],l[r]-=s,c[r]-=s*c[r-1];for(a[n-1]=c[n-1]/l[n-1],r=n-2;r>=0;--r)a[r]=(c[r]-a[r+1])/l[r];for(l[n-1]=(t[n]+a[n-1])/2,r=0;r<n-1;++r)l[r]=2*t[r+1]-a[r+1];return[a,l]}function rre(t){return new z5(t)}function hg(t,r){this._context=t,this._t=r}hg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,r){switch(t=+t,r=+r,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,r),this._context.lineTo(t,r);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,r)}break}}this._x=t,this._y=r}};function nre(t){return new hg(t,.5)}function sre(t){return new hg(t,0)}function are(t){return new hg(t,1)}function $d(t,r){if((c=t.length)>1)for(var n=1,s,a,l=t[r[0]],c,u=l.length;n<c;++n)for(a=l,l=t[r[n]],s=0;s<u;++s)l[s][1]+=l[s][0]=isNaN(a[s][1])?a[s][0]:a[s][1]}function G0(t){for(var r=t.length,n=new Array(r);--r>=0;)n[r]=r;return n}function ire(t,r){return t[r]}function lre(t){const r=[];return r.key=t,r}function ore(){var t=Jr([]),r=G0,n=$d,s=ire;function a(l){var c=Array.from(t.apply(this,arguments),lre),u,d=c.length,h=-1,x;for(const p of l)for(u=0,++h;u<d;++u)(c[u][h]=[0,+s(p,c[u].key,h,l)]).data=p;for(u=0,x=c_(r(c));u<d;++u)c[x[u]].index=u;return n(c,x),c}return a.keys=function(l){return arguments.length?(t=typeof l=="function"?l:Jr(Array.from(l)),a):t},a.value=function(l){return arguments.length?(s=typeof l=="function"?l:Jr(+l),a):s},a.order=function(l){return arguments.length?(r=l==null?G0:typeof l=="function"?l:Jr(Array.from(l)),a):r},a.offset=function(l){return arguments.length?(n=l??$d,a):n},a}function cre(t,r){if((s=t.length)>0){for(var n,s,a=0,l=t[0].length,c;a<l;++a){for(c=n=0;n<s;++n)c+=t[n][a][1]||0;if(c)for(n=0;n<s;++n)t[n][a][1]/=c}$d(t,r)}}function dre(t,r){if((a=t.length)>0){for(var n=0,s=t[r[0]],a,l=s.length;n<l;++n){for(var c=0,u=0;c<a;++c)u+=t[c][n][1]||0;s[n][1]+=s[n][0]=-u/2}$d(t,r)}}function ure(t,r){if(!(!((c=t.length)>0)||!((l=(a=t[r[0]]).length)>0))){for(var n=0,s=1,a,l,c;s<l;++s){for(var u=0,d=0,h=0;u<c;++u){for(var x=t[r[u]],p=x[s][1]||0,y=x[s-1][1]||0,v=(p-y)/2,w=0;w<u;++w){var b=t[r[w]],N=b[s][1]||0,_=b[s-1][1]||0;v+=N-_}d+=p,h+=v*p}a[s-1][1]+=a[s-1][0]=n,d&&(n-=h/d)}a[s-1][1]+=a[s-1][0]=n,$d(t,r)}}var mre=["type","size","sizeType"];function Q0(){return Q0=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var s in n)({}).hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Q0.apply(null,arguments)}function LE(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);r&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,s)}return n}function IE(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?LE(Object(n),!0).forEach(function(s){hre(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):LE(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}function hre(t,r,n){return(r=fre(r))in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function fre(t){var r=xre(t,"string");return typeof r=="symbol"?r:r+""}function xre(t,r){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var s=n.call(t,r);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}function pre(t,r){if(t==null)return{};var n,s,a=gre(t,r);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(s=0;s<l.length;s++)n=l[s],r.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function gre(t,r){if(t==null)return{};var n={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(r.indexOf(s)!==-1)continue;n[s]=t[s]}return n}var B5={symbolCircle:d_,symbolCross:$te,symbolDiamond:qte,symbolSquare:Ute,symbolStar:Hte,symbolTriangle:Vte,symbolWye:Kte},yre=Math.PI/180,vre=t=>{var r="symbol".concat(ph(t));return B5[r]||d_},jre=(t,r,n)=>{if(r==="area")return t;switch(n){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var s=18*yre;return 1.25*t*t*(Math.tan(s)-Math.tan(s*2)*Math.tan(s)**2)}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},bre=(t,r)=>{B5["symbol".concat(ph(t))]=r},W5=t=>{var{type:r="circle",size:n=64,sizeType:s="area"}=t,a=pre(t,mre),l=IE(IE({},a),{},{type:r,size:n,sizeType:s}),c=()=>{var p=vre(r),y=Gte().type(p).size(jre(n,s,r));return y()},{className:u,cx:d,cy:h}=l,x=ns(l,!0);return d===+d&&h===+h&&n===+n?f.createElement("path",Q0({},x,{className:Ur("recharts-symbols",u),transform:"translate(".concat(d,", ").concat(h,")"),d:c()})):null};W5.registerSymbol=bre;function X0(){return X0=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var s in n)({}).hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},X0.apply(null,arguments)}function $E(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);r&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,s)}return n}function wre(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?$E(Object(n),!0).forEach(function(s){u_(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$E(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}function u_(t,r,n){return(r=Nre(r))in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function Nre(t){var r=_re(t,"string");return typeof r=="symbol"?r:r+""}function _re(t,r){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var s=n.call(t,r);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}var Ea=32;class m_ extends f.PureComponent{renderIcon(r,n){var{inactiveColor:s}=this.props,a=Ea/2,l=Ea/6,c=Ea/3,u=r.inactive?s:r.color,d=n??r.type;if(d==="none")return null;if(d==="plainline")return f.createElement("line",{strokeWidth:4,fill:"none",stroke:u,strokeDasharray:r.payload.strokeDasharray,x1:0,y1:a,x2:Ea,y2:a,className:"recharts-legend-icon"});if(d==="line")return f.createElement("path",{strokeWidth:4,fill:"none",stroke:u,d:"M0,".concat(a,"h").concat(c,`
            A`).concat(l,",").concat(l,",0,1,1,").concat(2*c,",").concat(a,`
            H`).concat(Ea,"M").concat(2*c,",").concat(a,`
            A`).concat(l,",").concat(l,",0,1,1,").concat(c,",").concat(a),className:"recharts-legend-icon"});if(d==="rect")return f.createElement("path",{stroke:"none",fill:u,d:"M0,".concat(Ea/8,"h").concat(Ea,"v").concat(Ea*3/4,"h").concat(-Ea,"z"),className:"recharts-legend-icon"});if(f.isValidElement(r.legendIcon)){var h=wre({},r);return delete h.legendIcon,f.cloneElement(r.legendIcon,h)}return f.createElement(W5,{fill:u,cx:a,cy:a,size:Ea,sizeType:"diameter",type:d})}renderItems(){var{payload:r,iconSize:n,layout:s,formatter:a,inactiveColor:l,iconType:c}=this.props,u={x:0,y:0,width:Ea,height:Ea},d={display:s==="horizontal"?"inline-block":"block",marginRight:10},h={display:"inline-block",verticalAlign:"middle",marginRight:4};return r.map((x,p)=>{var y=x.formatter||a,v=Ur({"recharts-legend-item":!0,["legend-item-".concat(p)]:!0,inactive:x.inactive});if(x.type==="none")return null;var w=x.inactive?l:x.color,b=y?y(x.value,x,p):x.value;return f.createElement("li",X0({className:v,style:d,key:"legend-item-".concat(p)},b5(this.props,x,p)),f.createElement(l_,{width:n,height:n,viewBox:u,style:h,"aria-label":"".concat(b," legend icon")},this.renderIcon(x,c)),f.createElement("span",{className:"recharts-legend-item-text",style:{color:w}},b))})}render(){var{payload:r,layout:n,align:s}=this.props;if(!r||!r.length)return null;var a={padding:0,margin:0,textAlign:n==="horizontal"?s:"left"};return f.createElement("ul",{className:"recharts-default-legend",style:a},this.renderItems())}}u_(m_,"displayName","Legend");u_(m_,"defaultProps",{align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"});var Ij={},$j={},FE;function Cre(){return FE||(FE=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function r(n,s){const a=new Map;for(let l=0;l<n.length;l++){const c=n[l],u=s(c);a.has(u)||a.set(u,c)}return Array.from(a.values())}t.uniqBy=r})($j)),$j}var Fj={},qE;function H5(){return qE||(qE=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function r(n){return n}t.identity=r})(Fj)),Fj}var qj={},Uj={},zj={},UE;function Sre(){return UE||(UE=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function r(n){return Number.isSafeInteger(n)&&n>=0}t.isLength=r})(zj)),zj}var zE;function h_(){return zE||(zE=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=Sre();function n(s){return s!=null&&typeof s!="function"&&r.isLength(s.length)}t.isArrayLike=n})(Uj)),Uj}var Bj={},BE;function kre(){return BE||(BE=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function r(n){return typeof n=="object"&&n!==null}t.isObjectLike=r})(Bj)),Bj}var WE;function Are(){return WE||(WE=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=h_(),n=kre();function s(a){return n.isObjectLike(a)&&r.isArrayLike(a)}t.isArrayLikeObject=s})(qj)),qj}var Wj={},Hj={},HE;function Ere(){return HE||(HE=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=s_();function n(s){return function(a){return r.get(a,s)}}t.property=n})(Hj)),Hj}var Vj={},Yj={},Kj={},Gj={},VE;function V5(){return VE||(VE=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function r(n){return n!==null&&(typeof n=="object"||typeof n=="function")}t.isObject=r})(Gj)),Gj}var Qj={},YE;function Y5(){return YE||(YE=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function r(n){return n==null||typeof n!="object"&&typeof n!="function"}t.isPrimitive=r})(Qj)),Qj}var Xj={},KE;function f_(){return KE||(KE=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function r(n,s){return n===s||Number.isNaN(n)&&Number.isNaN(s)}t.eq=r})(Xj)),Xj}var GE;function Mre(){return GE||(GE=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=x_(),n=V5(),s=Y5(),a=f_();function l(p,y,v){return typeof v!="function"?r.isMatch(p,y):c(p,y,function w(b,N,_,S,k,E){const A=v(b,N,_,S,k,E);return A!==void 0?!!A:c(b,N,w,E)},new Map)}function c(p,y,v,w){if(y===p)return!0;switch(typeof y){case"object":return u(p,y,v,w);case"function":return Object.keys(y).length>0?c(p,{...y},v,w):a.eq(p,y);default:return n.isObject(p)?typeof y=="string"?y==="":!0:a.eq(p,y)}}function u(p,y,v,w){if(y==null)return!0;if(Array.isArray(y))return h(p,y,v,w);if(y instanceof Map)return d(p,y,v,w);if(y instanceof Set)return x(p,y,v,w);const b=Object.keys(y);if(p==null)return b.length===0;if(b.length===0)return!0;if(w&&w.has(y))return w.get(y)===p;w&&w.set(y,p);try{for(let N=0;N<b.length;N++){const _=b[N];if(!s.isPrimitive(p)&&!(_ in p)||y[_]===void 0&&p[_]!==void 0||y[_]===null&&p[_]!==null||!v(p[_],y[_],_,p,y,w))return!1}return!0}finally{w&&w.delete(y)}}function d(p,y,v,w){if(y.size===0)return!0;if(!(p instanceof Map))return!1;for(const[b,N]of y.entries()){const _=p.get(b);if(v(_,N,b,p,y,w)===!1)return!1}return!0}function h(p,y,v,w){if(y.length===0)return!0;if(!Array.isArray(p))return!1;const b=new Set;for(let N=0;N<y.length;N++){const _=y[N];let S=!1;for(let k=0;k<p.length;k++){if(b.has(k))continue;const E=p[k];let A=!1;if(v(E,_,N,p,y,w)&&(A=!0),A){b.add(k),S=!0;break}}if(!S)return!1}return!0}function x(p,y,v,w){return y.size===0?!0:p instanceof Set?h([...p],[...y],v,w):!1}t.isMatchWith=l,t.isSetMatch=x})(Kj)),Kj}var QE;function x_(){return QE||(QE=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=Mre();function n(s,a){return r.isMatchWith(s,a,()=>{})}t.isMatch=n})(Yj)),Yj}var Zj={},Jj={},eb={},XE;function K5(){return XE||(XE=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function r(n){return Object.getOwnPropertySymbols(n).filter(s=>Object.prototype.propertyIsEnumerable.call(n,s))}t.getSymbols=r})(eb)),eb}var tb={},ZE;function p_(){return ZE||(ZE=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function r(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}t.getTag=r})(tb)),tb}var rb={},JE;function g_(){return JE||(JE=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r="[object RegExp]",n="[object String]",s="[object Number]",a="[object Boolean]",l="[object Arguments]",c="[object Symbol]",u="[object Date]",d="[object Map]",h="[object Set]",x="[object Array]",p="[object Function]",y="[object ArrayBuffer]",v="[object Object]",w="[object Error]",b="[object DataView]",N="[object Uint8Array]",_="[object Uint8ClampedArray]",S="[object Uint16Array]",k="[object Uint32Array]",E="[object BigUint64Array]",A="[object Int8Array]",O="[object Int16Array]",z="[object Int32Array]",R="[object BigInt64Array]",G="[object Float32Array]",J="[object Float64Array]";t.argumentsTag=l,t.arrayBufferTag=y,t.arrayTag=x,t.bigInt64ArrayTag=R,t.bigUint64ArrayTag=E,t.booleanTag=a,t.dataViewTag=b,t.dateTag=u,t.errorTag=w,t.float32ArrayTag=G,t.float64ArrayTag=J,t.functionTag=p,t.int16ArrayTag=O,t.int32ArrayTag=z,t.int8ArrayTag=A,t.mapTag=d,t.numberTag=s,t.objectTag=v,t.regexpTag=r,t.setTag=h,t.stringTag=n,t.symbolTag=c,t.uint16ArrayTag=S,t.uint32ArrayTag=k,t.uint8ArrayTag=N,t.uint8ClampedArrayTag=_})(rb)),rb}var nb={},eM;function Tre(){return eM||(eM=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function r(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}t.isTypedArray=r})(nb)),nb}var tM;function G5(){return tM||(tM=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=K5(),n=p_(),s=g_(),a=Y5(),l=Tre();function c(x,p){return u(x,void 0,x,new Map,p)}function u(x,p,y,v=new Map,w=void 0){const b=w?.(x,p,y,v);if(b!==void 0)return b;if(a.isPrimitive(x))return x;if(v.has(x))return v.get(x);if(Array.isArray(x)){const N=new Array(x.length);v.set(x,N);for(let _=0;_<x.length;_++)N[_]=u(x[_],_,y,v,w);return Object.hasOwn(x,"index")&&(N.index=x.index),Object.hasOwn(x,"input")&&(N.input=x.input),N}if(x instanceof Date)return new Date(x.getTime());if(x instanceof RegExp){const N=new RegExp(x.source,x.flags);return N.lastIndex=x.lastIndex,N}if(x instanceof Map){const N=new Map;v.set(x,N);for(const[_,S]of x)N.set(_,u(S,_,y,v,w));return N}if(x instanceof Set){const N=new Set;v.set(x,N);for(const _ of x)N.add(u(_,void 0,y,v,w));return N}if(typeof Buffer<"u"&&Buffer.isBuffer(x))return x.subarray();if(l.isTypedArray(x)){const N=new(Object.getPrototypeOf(x)).constructor(x.length);v.set(x,N);for(let _=0;_<x.length;_++)N[_]=u(x[_],_,y,v,w);return N}if(x instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&x instanceof SharedArrayBuffer)return x.slice(0);if(x instanceof DataView){const N=new DataView(x.buffer.slice(0),x.byteOffset,x.byteLength);return v.set(x,N),d(N,x,y,v,w),N}if(typeof File<"u"&&x instanceof File){const N=new File([x],x.name,{type:x.type});return v.set(x,N),d(N,x,y,v,w),N}if(x instanceof Blob){const N=new Blob([x],{type:x.type});return v.set(x,N),d(N,x,y,v,w),N}if(x instanceof Error){const N=new x.constructor;return v.set(x,N),N.message=x.message,N.name=x.name,N.stack=x.stack,N.cause=x.cause,d(N,x,y,v,w),N}if(typeof x=="object"&&h(x)){const N=Object.create(Object.getPrototypeOf(x));return v.set(x,N),d(N,x,y,v,w),N}return x}function d(x,p,y=x,v,w){const b=[...Object.keys(p),...r.getSymbols(p)];for(let N=0;N<b.length;N++){const _=b[N],S=Object.getOwnPropertyDescriptor(x,_);(S==null||S.writable)&&(x[_]=u(p[_],_,y,v,w))}}function h(x){switch(n.getTag(x)){case s.argumentsTag:case s.arrayTag:case s.arrayBufferTag:case s.dataViewTag:case s.booleanTag:case s.dateTag:case s.float32ArrayTag:case s.float64ArrayTag:case s.int8ArrayTag:case s.int16ArrayTag:case s.int32ArrayTag:case s.mapTag:case s.numberTag:case s.objectTag:case s.regexpTag:case s.setTag:case s.stringTag:case s.symbolTag:case s.uint8ArrayTag:case s.uint8ClampedArrayTag:case s.uint16ArrayTag:case s.uint32ArrayTag:return!0;default:return!1}}t.cloneDeepWith=c,t.cloneDeepWithImpl=u,t.copyProperties=d})(Jj)),Jj}var rM;function Ore(){return rM||(rM=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=G5();function n(s){return r.cloneDeepWithImpl(s,void 0,s,new Map,void 0)}t.cloneDeep=n})(Zj)),Zj}var nM;function Pre(){return nM||(nM=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=x_(),n=Ore();function s(a){return a=n.cloneDeep(a),l=>r.isMatch(l,a)}t.matches=s})(Vj)),Vj}var sb={},ab={},ib={},sM;function Dre(){return sM||(sM=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=G5(),n=g_();function s(a,l){return r.cloneDeepWith(a,(c,u,d,h)=>{const x=l?.(c,u,d,h);if(x!==void 0)return x;if(typeof a=="object")switch(Object.prototype.toString.call(a)){case n.numberTag:case n.stringTag:case n.booleanTag:{const p=new a.constructor(a?.valueOf());return r.copyProperties(p,a),p}case n.argumentsTag:{const p={};return r.copyProperties(p,a),p.length=a.length,p[Symbol.iterator]=a[Symbol.iterator],p}default:return}})}t.cloneDeepWith=s})(ib)),ib}var aM;function Rre(){return aM||(aM=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=Dre();function n(s){return r.cloneDeepWith(s)}t.cloneDeep=n})(ab)),ab}var lb={},ob={},iM;function Q5(){return iM||(iM=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=/^(?:0|[1-9]\d*)$/;function n(s,a=Number.MAX_SAFE_INTEGER){switch(typeof s){case"number":return Number.isInteger(s)&&s>=0&&s<a;case"symbol":return!1;case"string":return r.test(s)}}t.isIndex=n})(ob)),ob}var cb={},lM;function Lre(){return lM||(lM=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=p_();function n(s){return s!==null&&typeof s=="object"&&r.getTag(s)==="[object Arguments]"}t.isArguments=n})(cb)),cb}var oM;function Ire(){return oM||(oM=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=g5(),n=Q5(),s=Lre(),a=n_();function l(c,u){let d;if(Array.isArray(u)?d=u:typeof u=="string"&&r.isDeepKey(u)&&c?.[u]==null?d=a.toPath(u):d=[u],d.length===0)return!1;let h=c;for(let x=0;x<d.length;x++){const p=d[x];if((h==null||!Object.hasOwn(h,p))&&!((Array.isArray(h)||s.isArguments(h))&&n.isIndex(p)&&p<h.length))return!1;h=h[p]}return!0}t.has=l})(lb)),lb}var cM;function $re(){return cM||(cM=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=x_(),n=y5(),s=Rre(),a=s_(),l=Ire();function c(u,d){switch(typeof u){case"object":{Object.is(u?.valueOf(),-0)&&(u="-0");break}case"number":{u=n.toKey(u);break}}return d=s.cloneDeep(d),function(h){const x=a.get(h,u);return x===void 0?l.has(h,u):d===void 0?x===void 0:r.isMatch(x,d)}}t.matchesProperty=c})(sb)),sb}var dM;function Fre(){return dM||(dM=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=H5(),n=Ere(),s=Pre(),a=$re();function l(c){if(c==null)return r.identity;switch(typeof c){case"function":return c;case"object":return Array.isArray(c)&&c.length===2?a.matchesProperty(c[0],c[1]):s.matches(c);case"string":case"symbol":case"number":return n.property(c)}}t.iteratee=l})(Wj)),Wj}var uM;function qre(){return uM||(uM=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=Cre(),n=H5(),s=Are(),a=Fre();function l(c,u=n.identity){return s.isArrayLikeObject(c)?r.uniqBy(Array.from(c),a.iteratee(u)):[]}t.uniqBy=l})(Ij)),Ij}var db,mM;function Ure(){return mM||(mM=1,db=qre().uniqBy),db}var zre=Ure();const hM=Di(zre);function X5(t,r,n){return r===!0?hM(t,n):typeof r=="function"?hM(t,r):t}var ub={exports:{}},mb={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fM;function Bre(){if(fM)return mb;fM=1;var t=Hd(),r=OP();function n(h,x){return h===x&&(h!==0||1/h===1/x)||h!==h&&x!==x}var s=typeof Object.is=="function"?Object.is:n,a=r.useSyncExternalStore,l=t.useRef,c=t.useEffect,u=t.useMemo,d=t.useDebugValue;return mb.useSyncExternalStoreWithSelector=function(h,x,p,y,v){var w=l(null);if(w.current===null){var b={hasValue:!1,value:null};w.current=b}else b=w.current;w=u(function(){function _(O){if(!S){if(S=!0,k=O,O=y(O),v!==void 0&&b.hasValue){var z=b.value;if(v(z,O))return E=z}return E=O}if(z=E,s(k,O))return z;var R=y(O);return v!==void 0&&v(z,R)?(k=O,z):(k=O,E=R)}var S=!1,k,E,A=p===void 0?null:p;return[function(){return _(x())},A===null?void 0:function(){return _(A())}]},[x,p,y,v]);var N=a(h,w[0],w[1]);return c(function(){b.hasValue=!0,b.value=N},[N]),d(N),N},mb}var xM;function Wre(){return xM||(xM=1,ub.exports=Bre()),ub.exports}var Hre=Wre(),y_=f.createContext(null),Vre=t=>t,js=()=>{var t=f.useContext(y_);return t?t.store.dispatch:Vre},Tx=()=>{},Yre=()=>Tx,Kre=(t,r)=>t===r;function Bt(t){var r=f.useContext(y_);return Hre.useSyncExternalStoreWithSelector(r?r.subscription.addNestedSub:Yre,r?r.store.getState:Tx,r?r.store.getState:Tx,r?t:Tx,Kre)}function Gre(t,r=`expected a function, instead received ${typeof t}`){if(typeof t!="function")throw new TypeError(r)}function Qre(t,r=`expected an object, instead received ${typeof t}`){if(typeof t!="object")throw new TypeError(r)}function Xre(t,r="expected all items to be functions, instead received the following types: "){if(!t.every(n=>typeof n=="function")){const n=t.map(s=>typeof s=="function"?`function ${s.name||"unnamed"}()`:typeof s).join(", ");throw new TypeError(`${r}[${n}]`)}}var pM=t=>Array.isArray(t)?t:[t];function Zre(t){const r=Array.isArray(t[0])?t[0]:t;return Xre(r,"createSelector expects all input-selectors to be functions, but received the following types: "),r}function Jre(t,r){const n=[],{length:s}=t;for(let a=0;a<s;a++)n.push(t[a].apply(null,r));return n}var ene=class{constructor(t){this.value=t}deref(){return this.value}},tne=typeof WeakRef<"u"?WeakRef:ene,rne=0,gM=1;function ix(){return{s:rne,v:void 0,o:null,p:null}}function Z5(t,r={}){let n=ix();const{resultEqualityCheck:s}=r;let a,l=0;function c(){let u=n;const{length:d}=arguments;for(let p=0,y=d;p<y;p++){const v=arguments[p];if(typeof v=="function"||typeof v=="object"&&v!==null){let w=u.o;w===null&&(u.o=w=new WeakMap);const b=w.get(v);b===void 0?(u=ix(),w.set(v,u)):u=b}else{let w=u.p;w===null&&(u.p=w=new Map);const b=w.get(v);b===void 0?(u=ix(),w.set(v,u)):u=b}}const h=u;let x;if(u.s===gM)x=u.v;else if(x=t.apply(null,arguments),l++,s){const p=a?.deref?.()??a;p!=null&&s(p,x)&&(x=p,l!==0&&l--),a=typeof x=="object"&&x!==null||typeof x=="function"?new tne(x):x}return h.s=gM,h.v=x,x}return c.clearCache=()=>{n=ix(),c.resetResultsCount()},c.resultsCount=()=>l,c.resetResultsCount=()=>{l=0},c}function nne(t,...r){const n=typeof t=="function"?{memoize:t,memoizeOptions:r}:t,s=(...a)=>{let l=0,c=0,u,d={},h=a.pop();typeof h=="object"&&(d=h,h=a.pop()),Gre(h,`createSelector expects an output function after the inputs, but received: [${typeof h}]`);const x={...n,...d},{memoize:p,memoizeOptions:y=[],argsMemoize:v=Z5,argsMemoizeOptions:w=[]}=x,b=pM(y),N=pM(w),_=Zre(a),S=p(function(){return l++,h.apply(null,arguments)},...b),k=v(function(){c++;const A=Jre(_,arguments);return u=S.apply(null,A),u},...N);return Object.assign(k,{resultFunc:h,memoizedResultFunc:S,dependencies:_,dependencyRecomputations:()=>c,resetDependencyRecomputations:()=>{c=0},lastResult:()=>u,recomputations:()=>l,resetRecomputations:()=>{l=0},memoize:p,argsMemoize:v})};return Object.assign(s,{withTypes:()=>s}),s}var Ke=nne(Z5),sne=Object.assign((t,r=Ke)=>{Qre(t,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof t}`);const n=Object.keys(t),s=n.map(l=>t[l]);return r(s,(...l)=>l.reduce((c,u,d)=>(c[n[d]]=u,c),{}))},{withTypes:()=>sne}),hb={},fb={},xb={},yM;function ane(){return yM||(yM=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function r(s){return typeof s=="symbol"?1:s===null?2:s===void 0?3:s!==s?4:0}const n=(s,a,l)=>{if(s!==a){const c=r(s),u=r(a);if(c===u&&c===0){if(s<a)return l==="desc"?1:-1;if(s>a)return l==="desc"?-1:1}return l==="desc"?u-c:c-u}return 0};t.compareValues=n})(xb)),xb}var pb={},gb={},vM;function J5(){return vM||(vM=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function r(n){return typeof n=="symbol"||n instanceof Symbol}t.isSymbol=r})(gb)),gb}var jM;function ine(){return jM||(jM=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=J5(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/;function a(l,c){return Array.isArray(l)?!1:typeof l=="number"||typeof l=="boolean"||l==null||r.isSymbol(l)?!0:typeof l=="string"&&(s.test(l)||!n.test(l))||c!=null&&Object.hasOwn(c,l)}t.isKey=a})(pb)),pb}var bM;function lne(){return bM||(bM=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=ane(),n=ine(),s=n_();function a(l,c,u,d){if(l==null)return[];u=d?void 0:u,Array.isArray(l)||(l=Object.values(l)),Array.isArray(c)||(c=c==null?[null]:[c]),c.length===0&&(c=[null]),Array.isArray(u)||(u=u==null?[]:[u]),u=u.map(v=>String(v));const h=(v,w)=>{let b=v;for(let N=0;N<w.length&&b!=null;++N)b=b[w[N]];return b},x=(v,w)=>w==null||v==null?w:typeof v=="object"&&"key"in v?Object.hasOwn(w,v.key)?w[v.key]:h(w,v.path):typeof v=="function"?v(w):Array.isArray(v)?h(w,v):typeof w=="object"?w[v]:w,p=c.map(v=>(Array.isArray(v)&&v.length===1&&(v=v[0]),v==null||typeof v=="function"||Array.isArray(v)||n.isKey(v)?v:{key:v,path:s.toPath(v)}));return l.map(v=>({original:v,criteria:p.map(w=>x(w,v))})).slice().sort((v,w)=>{for(let b=0;b<p.length;b++){const N=r.compareValues(v.criteria[b],w.criteria[b],u[b]);if(N!==0)return N}return 0}).map(v=>v.original)}t.orderBy=a})(fb)),fb}var yb={},wM;function one(){return wM||(wM=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function r(n,s=1){const a=[],l=Math.floor(s),c=(u,d)=>{for(let h=0;h<u.length;h++){const x=u[h];Array.isArray(x)&&d<l?c(x,d+1):a.push(x)}};return c(n,0),a}t.flatten=r})(yb)),yb}var vb={},NM;function eI(){return NM||(NM=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=Q5(),n=h_(),s=V5(),a=f_();function l(c,u,d){return s.isObject(d)&&(typeof u=="number"&&n.isArrayLike(d)&&r.isIndex(u)&&u<d.length||typeof u=="string"&&u in d)?a.eq(d[u],c):!1}t.isIterateeCall=l})(vb)),vb}var _M;function cne(){return _M||(_M=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=lne(),n=one(),s=eI();function a(l,...c){const u=c.length;return u>1&&s.isIterateeCall(l,c[0],c[1])?c=[]:u>2&&s.isIterateeCall(c[0],c[1],c[2])&&(c=[c[0]]),r.orderBy(l,n.flatten(c),["asc"])}t.sortBy=a})(hb)),hb}var jb,CM;function dne(){return CM||(CM=1,jb=cne().sortBy),jb}var une=dne();const fg=Di(une);var tI=t=>t.legend.settings,mne=t=>t.legend.size,hne=t=>t.legend.payload,fne=Ke([hne,tI],(t,r)=>{var{itemSorter:n}=r,s=t.flat(1);return n?fg(s,n):s});function xne(){return Bt(fne)}var lx=1;function rI(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[r,n]=f.useState({height:0,left:0,top:0,width:0}),s=f.useCallback(a=>{if(a!=null){var l=a.getBoundingClientRect(),c={height:l.height,left:l.left,top:l.top,width:l.width};(Math.abs(c.height-r.height)>lx||Math.abs(c.left-r.left)>lx||Math.abs(c.top-r.top)>lx||Math.abs(c.width-r.width)>lx)&&n({height:c.height,left:c.left,top:c.top,width:c.width})}},[r.width,r.height,r.top,r.left,...t]);return[r,s]}function us(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var pne=typeof Symbol=="function"&&Symbol.observable||"@@observable",SM=pne,bb=()=>Math.random().toString(36).substring(7).split("").join("."),gne={INIT:`@@redux/INIT${bb()}`,REPLACE:`@@redux/REPLACE${bb()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${bb()}`},ep=gne;function v_(t){if(typeof t!="object"||t===null)return!1;let r=t;for(;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(t)===r||Object.getPrototypeOf(t)===null}function nI(t,r,n){if(typeof t!="function")throw new Error(us(2));if(typeof r=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(us(0));if(typeof r=="function"&&typeof n>"u"&&(n=r,r=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(us(1));return n(nI)(t,r)}let s=t,a=r,l=new Map,c=l,u=0,d=!1;function h(){c===l&&(c=new Map,l.forEach((N,_)=>{c.set(_,N)}))}function x(){if(d)throw new Error(us(3));return a}function p(N){if(typeof N!="function")throw new Error(us(4));if(d)throw new Error(us(5));let _=!0;h();const S=u++;return c.set(S,N),function(){if(_){if(d)throw new Error(us(6));_=!1,h(),c.delete(S),l=null}}}function y(N){if(!v_(N))throw new Error(us(7));if(typeof N.type>"u")throw new Error(us(8));if(typeof N.type!="string")throw new Error(us(17));if(d)throw new Error(us(9));try{d=!0,a=s(a,N)}finally{d=!1}return(l=c).forEach(S=>{S()}),N}function v(N){if(typeof N!="function")throw new Error(us(10));s=N,y({type:ep.REPLACE})}function w(){const N=p;return{subscribe(_){if(typeof _!="object"||_===null)throw new Error(us(11));function S(){const E=_;E.next&&E.next(x())}return S(),{unsubscribe:N(S)}},[SM](){return this}}}return y({type:ep.INIT}),{dispatch:y,subscribe:p,getState:x,replaceReducer:v,[SM]:w}}function yne(t){Object.keys(t).forEach(r=>{const n=t[r];if(typeof n(void 0,{type:ep.INIT})>"u")throw new Error(us(12));if(typeof n(void 0,{type:ep.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(us(13))})}function sI(t){const r=Object.keys(t),n={};for(let l=0;l<r.length;l++){const c=r[l];typeof t[c]=="function"&&(n[c]=t[c])}const s=Object.keys(n);let a;try{yne(n)}catch(l){a=l}return function(c={},u){if(a)throw a;let d=!1;const h={};for(let x=0;x<s.length;x++){const p=s[x],y=n[p],v=c[p],w=y(v,u);if(typeof w>"u")throw u&&u.type,new Error(us(14));h[p]=w,d=d||w!==v}return d=d||s.length!==Object.keys(c).length,d?h:c}}function tp(...t){return t.length===0?r=>r:t.length===1?t[0]:t.reduce((r,n)=>(...s)=>r(n(...s)))}function vne(...t){return r=>(n,s)=>{const a=r(n,s);let l=()=>{throw new Error(us(15))};const c={getState:a.getState,dispatch:(d,...h)=>l(d,...h)},u=t.map(d=>d(c));return l=tp(...u)(a.dispatch),{...a,dispatch:l}}}function aI(t){return v_(t)&&"type"in t&&typeof t.type=="string"}var iI=Symbol.for("immer-nothing"),kM=Symbol.for("immer-draftable"),pa=Symbol.for("immer-state");function Xa(t,...r){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var Fd=Object.getPrototypeOf;function jc(t){return!!t&&!!t[pa]}function gl(t){return t?lI(t)||Array.isArray(t)||!!t[kM]||!!t.constructor?.[kM]||gh(t)||pg(t):!1}var jne=Object.prototype.constructor.toString();function lI(t){if(!t||typeof t!="object")return!1;const r=Fd(t);if(r===null)return!0;const n=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===jne}function rp(t,r){xg(t)===0?Reflect.ownKeys(t).forEach(n=>{r(n,t[n],t)}):t.forEach((n,s)=>r(s,n,t))}function xg(t){const r=t[pa];return r?r.type_:Array.isArray(t)?1:gh(t)?2:pg(t)?3:0}function Z0(t,r){return xg(t)===2?t.has(r):Object.prototype.hasOwnProperty.call(t,r)}function oI(t,r,n){const s=xg(t);s===2?t.set(r,n):s===3?t.add(n):t[r]=n}function bne(t,r){return t===r?t!==0||1/t===1/r:t!==t&&r!==r}function gh(t){return t instanceof Map}function pg(t){return t instanceof Set}function Qo(t){return t.copy_||t.base_}function J0(t,r){if(gh(t))return new Map(t);if(pg(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const n=lI(t);if(r===!0||r==="class_only"&&!n){const s=Object.getOwnPropertyDescriptors(t);delete s[pa];let a=Reflect.ownKeys(s);for(let l=0;l<a.length;l++){const c=a[l],u=s[c];u.writable===!1&&(u.writable=!0,u.configurable=!0),(u.get||u.set)&&(s[c]={configurable:!0,writable:!0,enumerable:u.enumerable,value:t[c]})}return Object.create(Fd(t),s)}else{const s=Fd(t);if(s!==null&&n)return{...t};const a=Object.create(s);return Object.assign(a,t)}}function j_(t,r=!1){return gg(t)||jc(t)||!gl(t)||(xg(t)>1&&Object.defineProperties(t,{set:{value:ox},add:{value:ox},clear:{value:ox},delete:{value:ox}}),Object.freeze(t),r&&Object.values(t).forEach(n=>j_(n,!0))),t}function ox(){Xa(2)}function gg(t){return Object.isFrozen(t)}var wne={};function bc(t){const r=wne[t];return r||Xa(0,t),r}var Fm;function cI(){return Fm}function Nne(t,r){return{drafts_:[],parent_:t,immer_:r,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function AM(t,r){r&&(bc("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=r)}function ew(t){tw(t),t.drafts_.forEach(_ne),t.drafts_=null}function tw(t){t===Fm&&(Fm=t.parent_)}function EM(t){return Fm=Nne(Fm,t)}function _ne(t){const r=t[pa];r.type_===0||r.type_===1?r.revoke_():r.revoked_=!0}function MM(t,r){r.unfinalizedDrafts_=r.drafts_.length;const n=r.drafts_[0];return t!==void 0&&t!==n?(n[pa].modified_&&(ew(r),Xa(4)),gl(t)&&(t=np(r,t),r.parent_||sp(r,t)),r.patches_&&bc("Patches").generateReplacementPatches_(n[pa].base_,t,r.patches_,r.inversePatches_)):t=np(r,n,[]),ew(r),r.patches_&&r.patchListener_(r.patches_,r.inversePatches_),t!==iI?t:void 0}function np(t,r,n){if(gg(r))return r;const s=r[pa];if(!s)return rp(r,(a,l)=>TM(t,s,r,a,l,n)),r;if(s.scope_!==t)return r;if(!s.modified_)return sp(t,s.base_,!0),s.base_;if(!s.finalized_){s.finalized_=!0,s.scope_.unfinalizedDrafts_--;const a=s.copy_;let l=a,c=!1;s.type_===3&&(l=new Set(a),a.clear(),c=!0),rp(l,(u,d)=>TM(t,s,a,u,d,n,c)),sp(t,a,!1),n&&t.patches_&&bc("Patches").generatePatches_(s,n,t.patches_,t.inversePatches_)}return s.copy_}function TM(t,r,n,s,a,l,c){if(jc(a)){const u=l&&r&&r.type_!==3&&!Z0(r.assigned_,s)?l.concat(s):void 0,d=np(t,a,u);if(oI(n,s,d),jc(d))t.canAutoFreeze_=!1;else return}else c&&n.add(a);if(gl(a)&&!gg(a)){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1)return;np(t,a),(!r||!r.scope_.parent_)&&typeof s!="symbol"&&(gh(n)?n.has(s):Object.prototype.propertyIsEnumerable.call(n,s))&&sp(t,a)}}function sp(t,r,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&j_(r,n)}function Cne(t,r){const n=Array.isArray(t),s={type_:n?1:0,scope_:r?r.scope_:cI(),modified_:!1,finalized_:!1,assigned_:{},parent_:r,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let a=s,l=b_;n&&(a=[s],l=qm);const{revoke:c,proxy:u}=Proxy.revocable(a,l);return s.draft_=u,s.revoke_=c,u}var b_={get(t,r){if(r===pa)return t;const n=Qo(t);if(!Z0(n,r))return Sne(t,n,r);const s=n[r];return t.finalized_||!gl(s)?s:s===wb(t.base_,r)?(Nb(t),t.copy_[r]=nw(s,t)):s},has(t,r){return r in Qo(t)},ownKeys(t){return Reflect.ownKeys(Qo(t))},set(t,r,n){const s=dI(Qo(t),r);if(s?.set)return s.set.call(t.draft_,n),!0;if(!t.modified_){const a=wb(Qo(t),r),l=a?.[pa];if(l&&l.base_===n)return t.copy_[r]=n,t.assigned_[r]=!1,!0;if(bne(n,a)&&(n!==void 0||Z0(t.base_,r)))return!0;Nb(t),rw(t)}return t.copy_[r]===n&&(n!==void 0||r in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[r])||(t.copy_[r]=n,t.assigned_[r]=!0),!0},deleteProperty(t,r){return wb(t.base_,r)!==void 0||r in t.base_?(t.assigned_[r]=!1,Nb(t),rw(t)):delete t.assigned_[r],t.copy_&&delete t.copy_[r],!0},getOwnPropertyDescriptor(t,r){const n=Qo(t),s=Reflect.getOwnPropertyDescriptor(n,r);return s&&{writable:!0,configurable:t.type_!==1||r!=="length",enumerable:s.enumerable,value:n[r]}},defineProperty(){Xa(11)},getPrototypeOf(t){return Fd(t.base_)},setPrototypeOf(){Xa(12)}},qm={};rp(b_,(t,r)=>{qm[t]=function(){return arguments[0]=arguments[0][0],r.apply(this,arguments)}});qm.deleteProperty=function(t,r){return qm.set.call(this,t,r,void 0)};qm.set=function(t,r,n){return b_.set.call(this,t[0],r,n,t[0])};function wb(t,r){const n=t[pa];return(n?Qo(n):t)[r]}function Sne(t,r,n){const s=dI(r,n);return s?"value"in s?s.value:s.get?.call(t.draft_):void 0}function dI(t,r){if(!(r in t))return;let n=Fd(t);for(;n;){const s=Object.getOwnPropertyDescriptor(n,r);if(s)return s;n=Fd(n)}}function rw(t){t.modified_||(t.modified_=!0,t.parent_&&rw(t.parent_))}function Nb(t){t.copy_||(t.copy_=J0(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var kne=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(r,n,s)=>{if(typeof r=="function"&&typeof n!="function"){const l=n;n=r;const c=this;return function(d=l,...h){return c.produce(d,x=>n.call(this,x,...h))}}typeof n!="function"&&Xa(6),s!==void 0&&typeof s!="function"&&Xa(7);let a;if(gl(r)){const l=EM(this),c=nw(r,void 0);let u=!0;try{a=n(c),u=!1}finally{u?ew(l):tw(l)}return AM(l,s),MM(a,l)}else if(!r||typeof r!="object"){if(a=n(r),a===void 0&&(a=r),a===iI&&(a=void 0),this.autoFreeze_&&j_(a,!0),s){const l=[],c=[];bc("Patches").generateReplacementPatches_(r,a,l,c),s(l,c)}return a}else Xa(1,r)},this.produceWithPatches=(r,n)=>{if(typeof r=="function")return(c,...u)=>this.produceWithPatches(c,d=>r(d,...u));let s,a;return[this.produce(r,n,(c,u)=>{s=c,a=u}),s,a]},typeof t?.autoFreeze=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof t?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy)}createDraft(t){gl(t)||Xa(8),jc(t)&&(t=al(t));const r=EM(this),n=nw(t,void 0);return n[pa].isManual_=!0,tw(r),n}finishDraft(t,r){const n=t&&t[pa];(!n||!n.isManual_)&&Xa(9);const{scope_:s}=n;return AM(s,r),MM(void 0,s)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}applyPatches(t,r){let n;for(n=r.length-1;n>=0;n--){const a=r[n];if(a.path.length===0&&a.op==="replace"){t=a.value;break}}n>-1&&(r=r.slice(n+1));const s=bc("Patches").applyPatches_;return jc(t)?s(t,r):this.produce(t,a=>s(a,r))}};function nw(t,r){const n=gh(t)?bc("MapSet").proxyMap_(t,r):pg(t)?bc("MapSet").proxySet_(t,r):Cne(t,r);return(r?r.scope_:cI()).drafts_.push(n),n}function al(t){return jc(t)||Xa(10,t),uI(t)}function uI(t){if(!gl(t)||gg(t))return t;const r=t[pa];let n;if(r){if(!r.modified_)return r.base_;r.finalized_=!0,n=J0(t,r.scope_.immer_.useStrictShallowCopy_)}else n=J0(t,!0);return rp(n,(s,a)=>{oI(n,s,uI(a))}),r&&(r.finalized_=!1),n}var Ane=new kne,mI=Ane.produce;function hI(t){return({dispatch:n,getState:s})=>a=>l=>typeof l=="function"?l(n,s,t):a(l)}var Ene=hI(),Mne=hI,Tne=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?tp:tp.apply(null,arguments)};function Fa(t,r){function n(...s){if(r){let a=r(...s);if(!a)throw new Error(fa(0));return{type:t,payload:a.payload,..."meta"in a&&{meta:a.meta},..."error"in a&&{error:a.error}}}return{type:t,payload:s[0]}}return n.toString=()=>`${t}`,n.type=t,n.match=s=>aI(s)&&s.type===t,n}var fI=class Sm extends Array{constructor(...r){super(...r),Object.setPrototypeOf(this,Sm.prototype)}static get[Symbol.species](){return Sm}concat(...r){return super.concat.apply(this,r)}prepend(...r){return r.length===1&&Array.isArray(r[0])?new Sm(...r[0].concat(this)):new Sm(...r.concat(this))}};function OM(t){return gl(t)?mI(t,()=>{}):t}function cx(t,r,n){return t.has(r)?t.get(r):t.set(r,n(r)).get(r)}function One(t){return typeof t=="boolean"}var Pne=()=>function(r){const{thunk:n=!0,immutableCheck:s=!0,serializableCheck:a=!0,actionCreatorCheck:l=!0}=r??{};let c=new fI;return n&&(One(n)?c.push(Ene):c.push(Mne(n.extraArgument))),c},Dne="RTK_autoBatch",PM=t=>r=>{setTimeout(r,t)},Rne=(t={type:"raf"})=>r=>(...n)=>{const s=r(...n);let a=!0,l=!1,c=!1;const u=new Set,d=t.type==="tick"?queueMicrotask:t.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:PM(10):t.type==="callback"?t.queueNotification:PM(t.timeout),h=()=>{c=!1,l&&(l=!1,u.forEach(x=>x()))};return Object.assign({},s,{subscribe(x){const p=()=>a&&x(),y=s.subscribe(p);return u.add(x),()=>{y(),u.delete(x)}},dispatch(x){try{return a=!x?.meta?.[Dne],l=!a,l&&(c||(c=!0,d(h))),s.dispatch(x)}finally{a=!0}}})},Lne=t=>function(n){const{autoBatch:s=!0}=n??{};let a=new fI(t);return s&&a.push(Rne(typeof s=="object"?s:void 0)),a};function Ine(t){const r=Pne(),{reducer:n=void 0,middleware:s,devTools:a=!0,preloadedState:l=void 0,enhancers:c=void 0}=t||{};let u;if(typeof n=="function")u=n;else if(v_(n))u=sI(n);else throw new Error(fa(1));let d;typeof s=="function"?d=s(r):d=r();let h=tp;a&&(h=Tne({trace:!1,...typeof a=="object"&&a}));const x=vne(...d),p=Lne(x);let y=typeof c=="function"?c(p):p();const v=h(...y);return nI(u,l,v)}function xI(t){const r={},n=[];let s;const a={addCase(l,c){const u=typeof l=="string"?l:l.type;if(!u)throw new Error(fa(28));if(u in r)throw new Error(fa(29));return r[u]=c,a},addAsyncThunk(l,c){return c.pending&&(r[l.pending.type]=c.pending),c.rejected&&(r[l.rejected.type]=c.rejected),c.fulfilled&&(r[l.fulfilled.type]=c.fulfilled),c.settled&&n.push({matcher:l.settled,reducer:c.settled}),a},addMatcher(l,c){return n.push({matcher:l,reducer:c}),a},addDefaultCase(l){return s=l,a}};return t(a),[r,n,s]}function $ne(t){return typeof t=="function"}function Fne(t,r){let[n,s,a]=xI(r),l;if($ne(t))l=()=>OM(t());else{const u=OM(t);l=()=>u}function c(u=l(),d){let h=[n[d.type],...s.filter(({matcher:x})=>x(d)).map(({reducer:x})=>x)];return h.filter(x=>!!x).length===0&&(h=[a]),h.reduce((x,p)=>{if(p)if(jc(x)){const v=p(x,d);return v===void 0?x:v}else{if(gl(x))return mI(x,y=>p(y,d));{const y=p(x,d);if(y===void 0){if(x===null)return x;throw Error("A case reducer on a non-draftable value must not return undefined")}return y}}return x},u)}return c.getInitialState=l,c}var qne="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",Une=(t=21)=>{let r="",n=t;for(;n--;)r+=qne[Math.random()*64|0];return r},zne=Symbol.for("rtk-slice-createasyncthunk");function Bne(t,r){return`${t}/${r}`}function Wne({creators:t}={}){const r=t?.asyncThunk?.[zne];return function(s){const{name:a,reducerPath:l=a}=s;if(!a)throw new Error(fa(11));const c=(typeof s.reducers=="function"?s.reducers(Vne()):s.reducers)||{},u=Object.keys(c),d={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},h={addCase(k,E){const A=typeof k=="string"?k:k.type;if(!A)throw new Error(fa(12));if(A in d.sliceCaseReducersByType)throw new Error(fa(13));return d.sliceCaseReducersByType[A]=E,h},addMatcher(k,E){return d.sliceMatchers.push({matcher:k,reducer:E}),h},exposeAction(k,E){return d.actionCreators[k]=E,h},exposeCaseReducer(k,E){return d.sliceCaseReducersByName[k]=E,h}};u.forEach(k=>{const E=c[k],A={reducerName:k,type:Bne(a,k),createNotation:typeof s.reducers=="function"};Kne(E)?Qne(A,E,h,r):Yne(A,E,h)});function x(){const[k={},E=[],A=void 0]=typeof s.extraReducers=="function"?xI(s.extraReducers):[s.extraReducers],O={...k,...d.sliceCaseReducersByType};return Fne(s.initialState,z=>{for(let R in O)z.addCase(R,O[R]);for(let R of d.sliceMatchers)z.addMatcher(R.matcher,R.reducer);for(let R of E)z.addMatcher(R.matcher,R.reducer);A&&z.addDefaultCase(A)})}const p=k=>k,y=new Map,v=new WeakMap;let w;function b(k,E){return w||(w=x()),w(k,E)}function N(){return w||(w=x()),w.getInitialState()}function _(k,E=!1){function A(z){let R=z[k];return typeof R>"u"&&E&&(R=cx(v,A,N)),R}function O(z=p){const R=cx(y,E,()=>new WeakMap);return cx(R,z,()=>{const G={};for(const[J,ie]of Object.entries(s.selectors??{}))G[J]=Hne(ie,z,()=>cx(v,z,N),E);return G})}return{reducerPath:k,getSelectors:O,get selectors(){return O(A)},selectSlice:A}}const S={name:a,reducer:b,actions:d.actionCreators,caseReducers:d.sliceCaseReducersByName,getInitialState:N,..._(l),injectInto(k,{reducerPath:E,...A}={}){const O=E??l;return k.inject({reducerPath:O,reducer:b},A),{...S,..._(O,!0)}}};return S}}function Hne(t,r,n,s){function a(l,...c){let u=r(l);return typeof u>"u"&&s&&(u=n()),t(u,...c)}return a.unwrapped=t,a}var ga=Wne();function Vne(){function t(r,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:r,...n}}return t.withTypes=()=>t,{reducer(r){return Object.assign({[r.name](...n){return r(...n)}}[r.name],{_reducerDefinitionType:"reducer"})},preparedReducer(r,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:r,reducer:n}},asyncThunk:t}}function Yne({type:t,reducerName:r,createNotation:n},s,a){let l,c;if("reducer"in s){if(n&&!Gne(s))throw new Error(fa(17));l=s.reducer,c=s.prepare}else l=s;a.addCase(t,l).exposeCaseReducer(r,l).exposeAction(r,c?Fa(t,c):Fa(t))}function Kne(t){return t._reducerDefinitionType==="asyncThunk"}function Gne(t){return t._reducerDefinitionType==="reducerWithPrepare"}function Qne({type:t,reducerName:r},n,s,a){if(!a)throw new Error(fa(18));const{payloadCreator:l,fulfilled:c,pending:u,rejected:d,settled:h,options:x}=n,p=a(t,l,x);s.exposeAction(r,p),c&&s.addCase(p.fulfilled,c),u&&s.addCase(p.pending,u),d&&s.addCase(p.rejected,d),h&&s.addMatcher(p.settled,h),s.exposeCaseReducer(r,{fulfilled:c||dx,pending:u||dx,rejected:d||dx,settled:h||dx})}function dx(){}var Xne="task",pI="listener",gI="completed",w_="cancelled",Zne=`task-${w_}`,Jne=`task-${gI}`,sw=`${pI}-${w_}`,ese=`${pI}-${gI}`,yg=class{constructor(t){this.code=t,this.message=`${Xne} ${w_} (reason: ${t})`}name="TaskAbortError";message},N_=(t,r)=>{if(typeof t!="function")throw new TypeError(fa(32))},ap=()=>{},yI=(t,r=ap)=>(t.catch(r),t),vI=(t,r)=>(t.addEventListener("abort",r,{once:!0}),()=>t.removeEventListener("abort",r)),ac=(t,r)=>{const n=t.signal;n.aborted||("reason"in n||Object.defineProperty(n,"reason",{enumerable:!0,value:r,configurable:!0,writable:!0}),t.abort(r))},ic=t=>{if(t.aborted){const{reason:r}=t;throw new yg(r)}};function jI(t,r){let n=ap;return new Promise((s,a)=>{const l=()=>a(new yg(t.reason));if(t.aborted){l();return}n=vI(t,l),r.finally(()=>n()).then(s,a)}).finally(()=>{n=ap})}var tse=async(t,r)=>{try{return await Promise.resolve(),{status:"ok",value:await t()}}catch(n){return{status:n instanceof yg?"cancelled":"rejected",error:n}}finally{r?.()}},ip=t=>r=>yI(jI(t,r).then(n=>(ic(t),n))),bI=t=>{const r=ip(t);return n=>r(new Promise(s=>setTimeout(s,n)))},{assign:Md}=Object,DM={},vg="listenerMiddleware",rse=(t,r)=>{const n=s=>vI(t,()=>ac(s,t.reason));return(s,a)=>{N_(s);const l=new AbortController;n(l);const c=tse(async()=>{ic(t),ic(l.signal);const u=await s({pause:ip(l.signal),delay:bI(l.signal),signal:l.signal});return ic(l.signal),u},()=>ac(l,Jne));return a?.autoJoin&&r.push(c.catch(ap)),{result:ip(t)(c),cancel(){ac(l,Zne)}}}},nse=(t,r)=>{const n=async(s,a)=>{ic(r);let l=()=>{};const u=[new Promise((d,h)=>{let x=t({predicate:s,effect:(p,y)=>{y.unsubscribe(),d([p,y.getState(),y.getOriginalState()])}});l=()=>{x(),h()}})];a!=null&&u.push(new Promise(d=>setTimeout(d,a,null)));try{const d=await jI(r,Promise.race(u));return ic(r),d}finally{l()}};return(s,a)=>yI(n(s,a))},wI=t=>{let{type:r,actionCreator:n,matcher:s,predicate:a,effect:l}=t;if(r)a=Fa(r).match;else if(n)r=n.type,a=n.match;else if(s)a=s;else if(!a)throw new Error(fa(21));return N_(l),{predicate:a,type:r,effect:l}},NI=Md(t=>{const{type:r,predicate:n,effect:s}=wI(t);return{id:Une(),effect:s,type:r,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(fa(22))}}},{withTypes:()=>NI}),RM=(t,r)=>{const{type:n,effect:s,predicate:a}=wI(r);return Array.from(t.values()).find(l=>(typeof n=="string"?l.type===n:l.predicate===a)&&l.effect===s)},aw=t=>{t.pending.forEach(r=>{ac(r,sw)})},sse=t=>()=>{t.forEach(aw),t.clear()},LM=(t,r,n)=>{try{t(r,n)}catch(s){setTimeout(()=>{throw s},0)}},_I=Md(Fa(`${vg}/add`),{withTypes:()=>_I}),ase=Fa(`${vg}/removeAll`),CI=Md(Fa(`${vg}/remove`),{withTypes:()=>CI}),ise=(...t)=>{console.error(`${vg}/error`,...t)},yh=(t={})=>{const r=new Map,{extra:n,onError:s=ise}=t;N_(s);const a=x=>(x.unsubscribe=()=>r.delete(x.id),r.set(x.id,x),p=>{x.unsubscribe(),p?.cancelActive&&aw(x)}),l=x=>{const p=RM(r,x)??NI(x);return a(p)};Md(l,{withTypes:()=>l});const c=x=>{const p=RM(r,x);return p&&(p.unsubscribe(),x.cancelActive&&aw(p)),!!p};Md(c,{withTypes:()=>c});const u=async(x,p,y,v)=>{const w=new AbortController,b=nse(l,w.signal),N=[];try{x.pending.add(w),await Promise.resolve(x.effect(p,Md({},y,{getOriginalState:v,condition:(_,S)=>b(_,S).then(Boolean),take:b,delay:bI(w.signal),pause:ip(w.signal),extra:n,signal:w.signal,fork:rse(w.signal,N),unsubscribe:x.unsubscribe,subscribe:()=>{r.set(x.id,x)},cancelActiveListeners:()=>{x.pending.forEach((_,S,k)=>{_!==w&&(ac(_,sw),k.delete(_))})},cancel:()=>{ac(w,sw),x.pending.delete(w)},throwIfCancelled:()=>{ic(w.signal)}})))}catch(_){_ instanceof yg||LM(s,_,{raisedBy:"effect"})}finally{await Promise.all(N),ac(w,ese),x.pending.delete(w)}},d=sse(r);return{middleware:x=>p=>y=>{if(!aI(y))return p(y);if(_I.match(y))return l(y.payload);if(ase.match(y)){d();return}if(CI.match(y))return c(y.payload);let v=x.getState();const w=()=>{if(v===DM)throw new Error(fa(23));return v};let b;try{if(b=p(y),r.size>0){const N=x.getState(),_=Array.from(r.values());for(const S of _){let k=!1;try{k=S.predicate(y,N,v)}catch(E){k=!1,LM(s,E,{raisedBy:"predicate"})}k&&u(S,y,x,w)}}}finally{v=DM}return b},startListening:l,stopListening:c,clearListeners:d}};function fa(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var lse={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},SI=ga({name:"chartLayout",initialState:lse,reducers:{setLayout(t,r){t.layoutType=r.payload},setChartSize(t,r){t.width=r.payload.width,t.height=r.payload.height},setMargin(t,r){t.margin.top=r.payload.top,t.margin.right=r.payload.right,t.margin.bottom=r.payload.bottom,t.margin.left=r.payload.left},setScale(t,r){t.scale=r.payload}}}),{setMargin:ose,setLayout:cse,setChartSize:dse,setScale:use}=SI.actions,mse=SI.reducer;function IM(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);r&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,s)}return n}function $M(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?IM(Object(n),!0).forEach(function(s){hse(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):IM(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}function hse(t,r,n){return(r=fse(r))in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function fse(t){var r=xse(t,"string");return typeof r=="symbol"?r:r+""}function xse(t,r){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var s=n.call(t,r);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}var lp=Math.PI/180,pse=t=>t*180/Math.PI,hs=(t,r,n,s)=>({x:t+Math.cos(-lp*s)*n,y:r+Math.sin(-lp*s)*n}),gse=function(r,n){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(r-(s.left||0)-(s.right||0)),Math.abs(n-(s.top||0)-(s.bottom||0)))/2},yse=(t,r)=>{var{x:n,y:s}=t,{x:a,y:l}=r;return Math.sqrt((n-a)**2+(s-l)**2)},vse=(t,r)=>{var{x:n,y:s}=t,{cx:a,cy:l}=r,c=yse({x:n,y:s},{x:a,y:l});if(c<=0)return{radius:c,angle:0};var u=(n-a)/c,d=Math.acos(u);return s>l&&(d=2*Math.PI-d),{radius:c,angle:pse(d),angleInRadian:d}},jse=t=>{var{startAngle:r,endAngle:n}=t,s=Math.floor(r/360),a=Math.floor(n/360),l=Math.min(s,a);return{startAngle:r-l*360,endAngle:n-l*360}},bse=(t,r)=>{var{startAngle:n,endAngle:s}=r,a=Math.floor(n/360),l=Math.floor(s/360),c=Math.min(a,l);return t+c*360},wse=(t,r)=>{var{x:n,y:s}=t,{radius:a,angle:l}=vse({x:n,y:s},r),{innerRadius:c,outerRadius:u}=r;if(a<c||a>u||a===0)return null;var{startAngle:d,endAngle:h}=jse(r),x=l,p;if(d<=h){for(;x>h;)x-=360;for(;x<d;)x+=360;p=x>=d&&x<=h}else{for(;x>d;)x-=360;for(;x<h;)x+=360;p=x>=h&&x<=d}return p?$M($M({},r),{},{radius:a,angle:bse(x,r)}):null};function kI(t,r,n){return Array.isArray(t)&&t&&r+n!==0?t.slice(r,n+1):t}function FM(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);r&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,s)}return n}function Pa(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?FM(Object(n),!0).forEach(function(s){Nse(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):FM(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}function Nse(t,r,n){return(r=_se(r))in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function _se(t){var r=Cse(t,"string");return typeof r=="symbol"?r:r+""}function Cse(t,r){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var s=n.call(t,r);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}function Ts(t,r,n){return Wn(t)||Wn(r)?n:Oi(r)?vc(t,r,n):typeof r=="function"?r(t):n}var Sse=(t,r,n,s,a)=>{var l,c=-1,u=(l=r?.length)!==null&&l!==void 0?l:0;if(u<=1||t==null)return 0;if(s==="angleAxis"&&a!=null&&Math.abs(Math.abs(a[1]-a[0])-360)<=1e-6)for(var d=0;d<u;d++){var h=d>0?n[d-1].coordinate:n[u-1].coordinate,x=n[d].coordinate,p=d>=u-1?n[0].coordinate:n[d+1].coordinate,y=void 0;if(Da(x-h)!==Da(p-x)){var v=[];if(Da(p-x)===Da(a[1]-a[0])){y=p;var w=x+a[1]-a[0];v[0]=Math.min(w,(w+h)/2),v[1]=Math.max(w,(w+h)/2)}else{y=h;var b=p+a[1]-a[0];v[0]=Math.min(x,(b+x)/2),v[1]=Math.max(x,(b+x)/2)}var N=[Math.min(x,(y+x)/2),Math.max(x,(y+x)/2)];if(t>N[0]&&t<=N[1]||t>=v[0]&&t<=v[1]){({index:c}=n[d]);break}}else{var _=Math.min(h,p),S=Math.max(h,p);if(t>(_+x)/2&&t<=(S+x)/2){({index:c}=n[d]);break}}}else if(r){for(var k=0;k<u;k++)if(k===0&&t<=(r[k].coordinate+r[k+1].coordinate)/2||k>0&&k<u-1&&t>(r[k].coordinate+r[k-1].coordinate)/2&&t<=(r[k].coordinate+r[k+1].coordinate)/2||k===u-1&&t>(r[k].coordinate+r[k-1].coordinate)/2){({index:c}=r[k]);break}}return c},kse=(t,r,n)=>{if(r&&n){var{width:s,height:a}=n,{align:l,verticalAlign:c,layout:u}=r;if((u==="vertical"||u==="horizontal"&&c==="middle")&&l!=="center"&&Et(t[l]))return Pa(Pa({},t),{},{[l]:t[l]+(s||0)});if((u==="horizontal"||u==="vertical"&&l==="center")&&c!=="middle"&&Et(t[c]))return Pa(Pa({},t),{},{[c]:t[c]+(a||0)})}return t},Nl=(t,r)=>t==="horizontal"&&r==="xAxis"||t==="vertical"&&r==="yAxis"||t==="centric"&&r==="angleAxis"||t==="radial"&&r==="radiusAxis",AI=(t,r,n,s)=>{if(s)return t.map(u=>u.coordinate);var a,l,c=t.map(u=>(u.coordinate===r&&(a=!0),u.coordinate===n&&(l=!0),u.coordinate));return a||c.push(r),l||c.push(n),c},EI=(t,r,n)=>{if(!t)return null;var{duplicateDomain:s,type:a,range:l,scale:c,realScaleType:u,isCategorical:d,categoricalDomain:h,tickCount:x,ticks:p,niceTicks:y,axisType:v}=t;if(!c)return null;var w=u==="scaleBand"&&c.bandwidth?c.bandwidth()/2:2,b=a==="category"&&c.bandwidth?c.bandwidth()/w:0;if(b=v==="angleAxis"&&l&&l.length>=2?Da(l[0]-l[1])*2*b:b,p||y){var N=(p||y||[]).map((_,S)=>{var k=s?s.indexOf(_):_;return{coordinate:c(k)+b,value:_,offset:b,index:S}});return N.filter(_=>!xa(_.coordinate))}return d&&h?h.map((_,S)=>({coordinate:c(_)+b,value:_,index:S,offset:b})):c.ticks&&x!=null?c.ticks(x).map((_,S)=>({coordinate:c(_)+b,value:_,offset:b,index:S})):c.domain().map((_,S)=>({coordinate:c(_)+b,value:s?s[_]:_,index:S,offset:b}))},qM=1e-4,Ase=t=>{var r=t.domain();if(!(!r||r.length<=2)){var n=r.length,s=t.range(),a=Math.min(s[0],s[1])-qM,l=Math.max(s[0],s[1])+qM,c=t(r[0]),u=t(r[n-1]);(c<a||c>l||u<a||u>l)&&t.domain([r[0],r[n-1]])}},Ese=t=>{var r=t.length;if(!(r<=0))for(var n=0,s=t[0].length;n<s;++n)for(var a=0,l=0,c=0;c<r;++c){var u=xa(t[c][n][1])?t[c][n][0]:t[c][n][1];u>=0?(t[c][n][0]=a,t[c][n][1]=a+u,a=t[c][n][1]):(t[c][n][0]=l,t[c][n][1]=l+u,l=t[c][n][1])}},Mse=t=>{var r=t.length;if(!(r<=0))for(var n=0,s=t[0].length;n<s;++n)for(var a=0,l=0;l<r;++l){var c=xa(t[l][n][1])?t[l][n][0]:t[l][n][1];c>=0?(t[l][n][0]=a,t[l][n][1]=a+c,a=t[l][n][1]):(t[l][n][0]=0,t[l][n][1]=0)}},Tse={sign:Ese,expand:cre,none:$d,silhouette:dre,wiggle:ure,positive:Mse},Ose=(t,r,n)=>{var s=Tse[n],a=ore().keys(r).value((l,c)=>+Ts(l,c,0)).order(G0).offset(s);return a(t)};function Pse(t){return t==null?void 0:String(t)}function UM(t){var{axis:r,ticks:n,bandSize:s,entry:a,index:l,dataKey:c}=t;if(r.type==="category"){if(!r.allowDuplicatedCategory&&r.dataKey&&!Wn(a[r.dataKey])){var u=j5(n,"value",a[r.dataKey]);if(u)return u.coordinate+s/2}return n[l]?n[l].coordinate+s/2:null}var d=Ts(a,Wn(c)?r.dataKey:c);return Wn(d)?null:r.scale(d)}var Dse=t=>{var r=t.flat(2).filter(Et);return[Math.min(...r),Math.max(...r)]},Rse=t=>[t[0]===1/0?0:t[0],t[1]===-1/0?0:t[1]],Lse=(t,r,n)=>{if(t!=null)return Rse(Object.keys(t).reduce((s,a)=>{var l=t[a],{stackedData:c}=l,u=c.reduce((d,h)=>{var x=kI(h,r,n),p=Dse(x);return[Math.min(d[0],p[0]),Math.max(d[1],p[1])]},[1/0,-1/0]);return[Math.min(u[0],s[0]),Math.max(u[1],s[1])]},[1/0,-1/0]))},zM=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,BM=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,iw=(t,r,n)=>{if(t&&t.scale&&t.scale.bandwidth){var s=t.scale.bandwidth();if(!n||s>0)return s}if(t&&r&&r.length>=2){for(var a=fg(r,x=>x.coordinate),l=1/0,c=1,u=a.length;c<u;c++){var d=a[c],h=a[c-1];l=Math.min((d.coordinate||0)-(h.coordinate||0),l)}return l===1/0?0:l}return n?void 0:0};function WM(t){var{tooltipEntrySettings:r,dataKey:n,payload:s,value:a,name:l}=t;return Pa(Pa({},r),{},{dataKey:n,payload:s,value:a,name:l})}function MI(t,r){if(t)return String(t);if(typeof r=="string")return r}function Ise(t,r,n,s,a){if(n==="horizontal"||n==="vertical"){var l=t>=a.left&&t<=a.left+a.width&&r>=a.top&&r<=a.top+a.height;return l?{x:t,y:r}:null}return s?wse({x:t,y:r},s):null}var $se=(t,r,n,s)=>{var a=r.find(h=>h&&h.index===n);if(a){if(t==="horizontal")return{x:a.coordinate,y:s.y};if(t==="vertical")return{x:s.x,y:a.coordinate};if(t==="centric"){var l=a.coordinate,{radius:c}=s;return Pa(Pa(Pa({},s),hs(s.cx,s.cy,c,l)),{},{angle:l,radius:c})}var u=a.coordinate,{angle:d}=s;return Pa(Pa(Pa({},s),hs(s.cx,s.cy,u,d)),{},{angle:d,radius:u})}return{x:0,y:0}},Fse=(t,r)=>r==="horizontal"?t.x:r==="vertical"?t.y:r==="centric"?t.angle:t.radius,_l=t=>t.layout.width,Cl=t=>t.layout.height,qse=t=>t.layout.scale,TI=t=>t.layout.margin,__=Ke(t=>t.cartesianAxis.xAxis,t=>Object.values(t)),C_=Ke(t=>t.cartesianAxis.yAxis,t=>Object.values(t)),Use="data-recharts-item-index",zse="data-recharts-item-data-key",jg=60;function HM(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);r&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,s)}return n}function eo(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?HM(Object(n),!0).forEach(function(s){Bse(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):HM(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}function Bse(t,r,n){return(r=Wse(r))in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function Wse(t){var r=Hse(t,"string");return typeof r=="symbol"?r:r+""}function Hse(t,r){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var s=n.call(t,r);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}var Vse=t=>t.brush.height,bs=Ke([_l,Cl,TI,Vse,__,C_,tI,mne],(t,r,n,s,a,l,c,u)=>{var d=l.reduce((w,b)=>{var{orientation:N}=b;if(!b.mirror&&!b.hide){var _=typeof b.width=="number"?b.width:jg;return eo(eo({},w),{},{[N]:w[N]+_})}return w},{left:n.left||0,right:n.right||0}),h=a.reduce((w,b)=>{var{orientation:N}=b;return!b.mirror&&!b.hide?eo(eo({},w),{},{[N]:vc(w,"".concat(N))+b.height}):w},{top:n.top||0,bottom:n.bottom||0}),x=eo(eo({},h),d),p=x.bottom;x.bottom+=s,x=kse(x,c,u);var y=t-x.left-x.right,v=r-x.top-x.bottom;return eo(eo({brushBottom:p},x),{},{width:Math.max(y,0),height:Math.max(v,0)})}),Yse=Ke(bs,t=>({x:t.left,y:t.top,width:t.width,height:t.height})),OI=Ke(_l,Cl,(t,r)=>({x:0,y:0,width:t,height:r})),Kse=f.createContext(null),Ba=()=>f.useContext(Kse)!=null,bg=t=>t.brush,wg=Ke([bg,bs,TI],(t,r,n)=>({height:t.height,x:Et(t.x)?t.x:r.left,y:Et(t.y)?t.y:r.top+r.height+r.brushBottom-(n?.bottom||0),width:Et(t.width)?t.width:r.width})),S_=()=>{var t,r=Ba(),n=Bt(Yse),s=Bt(wg),a=(t=Bt(bg))===null||t===void 0?void 0:t.padding;return!r||!s||!a?n:{width:s.width-a.left-a.right,height:s.height-a.top-a.bottom,x:a.left,y:a.top}},Gse={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},PI=()=>{var t;return(t=Bt(bs))!==null&&t!==void 0?t:Gse},k_=()=>Bt(_l),A_=()=>Bt(Cl),Qse={top:0,right:0,bottom:0,left:0},Xse=()=>{var t;return(t=Bt(r=>r.layout.margin))!==null&&t!==void 0?t:Qse},en=t=>t.layout.layoutType,E_=()=>Bt(en),Zse={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},DI=ga({name:"legend",initialState:Zse,reducers:{setLegendSize(t,r){t.size.width=r.payload.width,t.size.height=r.payload.height},setLegendSettings(t,r){t.settings.align=r.payload.align,t.settings.layout=r.payload.layout,t.settings.verticalAlign=r.payload.verticalAlign,t.settings.itemSorter=r.payload.itemSorter},addLegendPayload(t,r){t.payload.push(r.payload)},removeLegendPayload(t,r){var n=al(t).payload.indexOf(r.payload);n>-1&&t.payload.splice(n,1)}}}),{setLegendSize:VM,setLegendSettings:Jse,addLegendPayload:eae,removeLegendPayload:tae}=DI.actions,rae=DI.reducer,nae=["contextPayload"];function lw(){return lw=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var s in n)({}).hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},lw.apply(null,arguments)}function YM(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);r&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,s)}return n}function qd(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?YM(Object(n),!0).forEach(function(s){M_(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):YM(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}function M_(t,r,n){return(r=sae(r))in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function sae(t){var r=aae(t,"string");return typeof r=="symbol"?r:r+""}function aae(t,r){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var s=n.call(t,r);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}function iae(t,r){if(t==null)return{};var n,s,a=lae(t,r);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(s=0;s<l.length;s++)n=l[s],r.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function lae(t,r){if(t==null)return{};var n={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(r.indexOf(s)!==-1)continue;n[s]=t[s]}return n}function oae(t){return t.value}function cae(t){var{contextPayload:r}=t,n=iae(t,nae),s=X5(r,t.payloadUniqBy,oae),a=qd(qd({},n),{},{payload:s});return f.isValidElement(t.content)?f.cloneElement(t.content,a):typeof t.content=="function"?f.createElement(t.content,a):f.createElement(m_,a)}function dae(t,r,n,s,a,l){var{layout:c,align:u,verticalAlign:d}=r,h,x;return(!t||(t.left===void 0||t.left===null)&&(t.right===void 0||t.right===null))&&(u==="center"&&c==="vertical"?h={left:((s||0)-l.width)/2}:h=u==="right"?{right:n&&n.right||0}:{left:n&&n.left||0}),(!t||(t.top===void 0||t.top===null)&&(t.bottom===void 0||t.bottom===null))&&(d==="middle"?x={top:((a||0)-l.height)/2}:x=d==="bottom"?{bottom:n&&n.bottom||0}:{top:n&&n.top||0}),qd(qd({},h),x)}function uae(t){var r=js();return f.useEffect(()=>{r(Jse(t))},[r,t]),null}function mae(t){var r=js();return f.useEffect(()=>(r(VM(t)),()=>{r(VM({width:0,height:0}))}),[r,t]),null}function hae(t){var r=xne(),n=Ote(),s=Xse(),{width:a,height:l,wrapperStyle:c,portal:u}=t,[d,h]=rI([r]),x=k_(),p=A_(),y=x-(s.left||0)-(s.right||0),v=Ng.getWidthOrHeight(t.layout,l,a,y),w=u?c:qd(qd({position:"absolute",width:v?.width||a||"auto",height:v?.height||l||"auto"},dae(c,t,s,x,p,d)),c),b=u??n;if(b==null)return null;var N=f.createElement("div",{className:"recharts-legend-wrapper",style:w,ref:h},f.createElement(uae,{layout:t.layout,align:t.align,verticalAlign:t.verticalAlign,itemSorter:t.itemSorter}),f.createElement(mae,{width:d.width,height:d.height}),f.createElement(cae,lw({},t,v,{margin:s,chartWidth:x,chartHeight:p,contextPayload:r})));return Nc.createPortal(N,b)}class Ng extends f.PureComponent{static getWidthOrHeight(r,n,s,a){return r==="vertical"&&Et(n)?{height:n}:r==="horizontal"?{width:s||a}:null}render(){return f.createElement(hae,this.props)}}M_(Ng,"displayName","Legend");M_(Ng,"defaultProps",{align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"});function ow(){return ow=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var s in n)({}).hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},ow.apply(null,arguments)}function KM(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);r&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,s)}return n}function _b(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?KM(Object(n),!0).forEach(function(s){fae(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):KM(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}function fae(t,r,n){return(r=xae(r))in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function xae(t){var r=pae(t,"string");return typeof r=="symbol"?r:r+""}function pae(t,r){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var s=n.call(t,r);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}function gae(t){return Array.isArray(t)&&Oi(t[0])&&Oi(t[1])?t.join(" ~ "):t}var yae=t=>{var{separator:r=" : ",contentStyle:n={},itemStyle:s={},labelStyle:a={},payload:l,formatter:c,itemSorter:u,wrapperClassName:d,labelClassName:h,label:x,labelFormatter:p,accessibilityLayer:y=!1}=t,v=()=>{if(l&&l.length){var A={padding:0,margin:0},O=(u?fg(l,u):l).map((z,R)=>{if(z.type==="none")return null;var G=z.formatter||c||gae,{value:J,name:ie}=z,V=J,xe=ie;if(G){var pe=G(J,ie,z,R,l);if(Array.isArray(pe))[V,xe]=pe;else if(pe!=null)V=pe;else return null}var re=_b({display:"block",paddingTop:4,paddingBottom:4,color:z.color||"#000"},s);return f.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(R),style:re},Oi(xe)?f.createElement("span",{className:"recharts-tooltip-item-name"},xe):null,Oi(xe)?f.createElement("span",{className:"recharts-tooltip-item-separator"},r):null,f.createElement("span",{className:"recharts-tooltip-item-value"},V),f.createElement("span",{className:"recharts-tooltip-item-unit"},z.unit||""))});return f.createElement("ul",{className:"recharts-tooltip-item-list",style:A},O)}return null},w=_b({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},n),b=_b({margin:0},a),N=!Wn(x),_=N?x:"",S=Ur("recharts-default-tooltip",d),k=Ur("recharts-tooltip-label",h);N&&p&&l!==void 0&&l!==null&&(_=p(x,l));var E=y?{role:"status","aria-live":"assertive"}:{};return f.createElement("div",ow({className:S,style:w},E),f.createElement("p",{className:k,style:b},f.isValidElement(_)?_:"".concat(_)),v())},fm="recharts-tooltip-wrapper",vae={visibility:"hidden"};function jae(t){var{coordinate:r,translateX:n,translateY:s}=t;return Ur(fm,{["".concat(fm,"-right")]:Et(n)&&r&&Et(r.x)&&n>=r.x,["".concat(fm,"-left")]:Et(n)&&r&&Et(r.x)&&n<r.x,["".concat(fm,"-bottom")]:Et(s)&&r&&Et(r.y)&&s>=r.y,["".concat(fm,"-top")]:Et(s)&&r&&Et(r.y)&&s<r.y})}function GM(t){var{allowEscapeViewBox:r,coordinate:n,key:s,offsetTopLeft:a,position:l,reverseDirection:c,tooltipDimension:u,viewBox:d,viewBoxDimension:h}=t;if(l&&Et(l[s]))return l[s];var x=n[s]-u-(a>0?a:0),p=n[s]+a;if(r[s])return c[s]?x:p;var y=d[s];if(y==null)return 0;if(c[s]){var v=x,w=y;return v<w?Math.max(p,y):Math.max(x,y)}if(h==null)return 0;var b=p+u,N=y+h;return b>N?Math.max(x,y):Math.max(p,y)}function bae(t){var{translateX:r,translateY:n,useTranslate3d:s}=t;return{transform:s?"translate3d(".concat(r,"px, ").concat(n,"px, 0)"):"translate(".concat(r,"px, ").concat(n,"px)")}}function wae(t){var{allowEscapeViewBox:r,coordinate:n,offsetTopLeft:s,position:a,reverseDirection:l,tooltipBox:c,useTranslate3d:u,viewBox:d}=t,h,x,p;return c.height>0&&c.width>0&&n?(x=GM({allowEscapeViewBox:r,coordinate:n,key:"x",offsetTopLeft:s,position:a,reverseDirection:l,tooltipDimension:c.width,viewBox:d,viewBoxDimension:d.width}),p=GM({allowEscapeViewBox:r,coordinate:n,key:"y",offsetTopLeft:s,position:a,reverseDirection:l,tooltipDimension:c.height,viewBox:d,viewBoxDimension:d.height}),h=bae({translateX:x,translateY:p,useTranslate3d:u})):h=vae,{cssProperties:h,cssClasses:jae({translateX:x,translateY:p,coordinate:n})}}function QM(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);r&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,s)}return n}function ux(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?QM(Object(n),!0).forEach(function(s){cw(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):QM(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}function cw(t,r,n){return(r=Nae(r))in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function Nae(t){var r=_ae(t,"string");return typeof r=="symbol"?r:r+""}function _ae(t,r){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var s=n.call(t,r);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}class Cae extends f.PureComponent{constructor(){super(...arguments),cw(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),cw(this,"handleKeyDown",r=>{if(r.key==="Escape"){var n,s,a,l;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(n=(s=this.props.coordinate)===null||s===void 0?void 0:s.x)!==null&&n!==void 0?n:0,y:(a=(l=this.props.coordinate)===null||l===void 0?void 0:l.y)!==null&&a!==void 0?a:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var r,n;this.state.dismissed&&(((r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==this.state.dismissedAtCoordinate.x||((n=this.props.coordinate)===null||n===void 0?void 0:n.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:r,allowEscapeViewBox:n,animationDuration:s,animationEasing:a,children:l,coordinate:c,hasPayload:u,isAnimationActive:d,offset:h,position:x,reverseDirection:p,useTranslate3d:y,viewBox:v,wrapperStyle:w,lastBoundingBox:b,innerRef:N,hasPortalFromProps:_}=this.props,{cssClasses:S,cssProperties:k}=wae({allowEscapeViewBox:n,coordinate:c,offsetTopLeft:h,position:x,reverseDirection:p,tooltipBox:{height:b.height,width:b.width},useTranslate3d:y,viewBox:v}),E=_?{}:ux(ux({transition:d&&r?"transform ".concat(s,"ms ").concat(a):void 0},k),{},{pointerEvents:"none",visibility:!this.state.dismissed&&r&&u?"visible":"hidden",position:"absolute",top:0,left:0}),A=ux(ux({},E),{},{visibility:!this.state.dismissed&&r&&u?"visible":"hidden"},w);return f.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:S,style:A,ref:N},l)}}var Sae=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),vh={isSsr:Sae()},RI=()=>Bt(t=>t.rootProps.accessibilityLayer);function Ds(t){return Number.isFinite(t)}function op(t){return typeof t=="number"&&t>0&&Number.isFinite(t)}function dw(){return dw=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var s in n)({}).hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},dw.apply(null,arguments)}function XM(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);r&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,s)}return n}function ZM(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?XM(Object(n),!0).forEach(function(s){kae(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):XM(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}function kae(t,r,n){return(r=Aae(r))in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function Aae(t){var r=Eae(t,"string");return typeof r=="symbol"?r:r+""}function Eae(t,r){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var s=n.call(t,r);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}var JM={curveBasisClosed:Xte,curveBasisOpen:Zte,curveBasis:Qte,curveBumpX:Lte,curveBumpY:Ite,curveLinearClosed:Jte,curveLinear:mg,curveMonotoneX:ere,curveMonotoneY:tre,curveNatural:rre,curveStep:nre,curveStepAfter:are,curveStepBefore:sre},mx=t=>Ds(t.x)&&Ds(t.y),xm=t=>t.x,pm=t=>t.y,Mae=(t,r)=>{if(typeof t=="function")return t;var n="curve".concat(ph(t));return(n==="curveMonotone"||n==="curveBump")&&r?JM["".concat(n).concat(r==="vertical"?"Y":"X")]:JM[n]||mg},Tae=t=>{var{type:r="linear",points:n=[],baseLine:s,layout:a,connectNulls:l=!1}=t,c=Mae(r,a),u=l?n.filter(mx):n,d;if(Array.isArray(s)){var h=l?s.filter(p=>mx(p)):s,x=u.map((p,y)=>ZM(ZM({},p),{},{base:h[y]}));return a==="vertical"?d=ax().y(pm).x1(xm).x0(p=>p.base.x):d=ax().x(xm).y1(pm).y0(p=>p.base.y),d.defined(mx).curve(c),d(x)}return a==="vertical"&&Et(s)?d=ax().y(pm).x1(xm).x0(s):Et(s)?d=ax().x(xm).y1(pm).y0(s):d=O5().x(xm).y(pm),d.defined(mx).curve(c),d(u)},Ox=t=>{var{className:r,points:n,path:s,pathRef:a}=t;if((!n||!n.length)&&!s)return null;var l=n&&n.length?Tae(t):s;return f.createElement("path",dw({},Ac(t),i_(t),{className:Ur("recharts-curve",r),d:l===null?void 0:l,ref:a}))},Oae=["x","y","top","left","width","height","className"];function uw(){return uw=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var s in n)({}).hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},uw.apply(null,arguments)}function eT(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);r&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,s)}return n}function Pae(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?eT(Object(n),!0).forEach(function(s){Dae(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):eT(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}function Dae(t,r,n){return(r=Rae(r))in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function Rae(t){var r=Lae(t,"string");return typeof r=="symbol"?r:r+""}function Lae(t,r){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var s=n.call(t,r);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}function Iae(t,r){if(t==null)return{};var n,s,a=$ae(t,r);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(s=0;s<l.length;s++)n=l[s],r.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function $ae(t,r){if(t==null)return{};var n={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(r.indexOf(s)!==-1)continue;n[s]=t[s]}return n}var Fae=(t,r,n,s,a,l)=>"M".concat(t,",").concat(a,"v").concat(s,"M").concat(l,",").concat(r,"h").concat(n),qae=t=>{var{x:r=0,y:n=0,top:s=0,left:a=0,width:l=0,height:c=0,className:u}=t,d=Iae(t,Oae),h=Pae({x:r,y:n,top:s,left:a,width:l,height:c},d);return!Et(r)||!Et(n)||!Et(l)||!Et(c)||!Et(s)||!Et(a)?null:f.createElement("path",uw({},ns(h,!0),{className:Ur("recharts-cross",u),d:Fae(r,n,l,c,s,a)}))};function Uae(t,r,n,s){var a=s/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?r.x-a:n.left+.5,y:t==="horizontal"?n.top+.5:r.y-a,width:t==="horizontal"?s:n.width-1,height:t==="horizontal"?n.height-1:s}}function tT(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);r&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,s)}return n}function zae(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?tT(Object(n),!0).forEach(function(s){Bae(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):tT(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}function Bae(t,r,n){return(r=Wae(r))in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function Wae(t){var r=Hae(t,"string");return typeof r=="symbol"?r:r+""}function Hae(t,r){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var s=n.call(t,r);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}function No(t,r){var n=zae({},t),s=r,a=Object.keys(r),l=a.reduce((c,u)=>(c[u]===void 0&&s[u]!==void 0&&(c[u]=s[u]),c),n);return l}var Cb={},Sb={},kb={},rT;function Vae(){return rT||(rT=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function r(n){if(!n||typeof n!="object")return!1;const s=Object.getPrototypeOf(n);return s===null||s===Object.prototype||Object.getPrototypeOf(s)===null?Object.prototype.toString.call(n)==="[object Object]":!1}t.isPlainObject=r})(kb)),kb}var nT;function Yae(){return nT||(nT=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=Vae(),n=K5(),s=p_(),a=g_(),l=f_();function c(h,x,p){return u(h,x,void 0,void 0,void 0,void 0,p)}function u(h,x,p,y,v,w,b){const N=b(h,x,p,y,v,w);if(N!==void 0)return N;if(typeof h==typeof x)switch(typeof h){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return h===x;case"number":return h===x||Object.is(h,x);case"function":return h===x;case"object":return d(h,x,w,b)}return d(h,x,w,b)}function d(h,x,p,y){if(Object.is(h,x))return!0;let v=s.getTag(h),w=s.getTag(x);if(v===a.argumentsTag&&(v=a.objectTag),w===a.argumentsTag&&(w=a.objectTag),v!==w)return!1;switch(v){case a.stringTag:return h.toString()===x.toString();case a.numberTag:{const _=h.valueOf(),S=x.valueOf();return l.eq(_,S)}case a.booleanTag:case a.dateTag:case a.symbolTag:return Object.is(h.valueOf(),x.valueOf());case a.regexpTag:return h.source===x.source&&h.flags===x.flags;case a.functionTag:return h===x}p=p??new Map;const b=p.get(h),N=p.get(x);if(b!=null&&N!=null)return b===x;p.set(h,x),p.set(x,h);try{switch(v){case a.mapTag:{if(h.size!==x.size)return!1;for(const[_,S]of h.entries())if(!x.has(_)||!u(S,x.get(_),_,h,x,p,y))return!1;return!0}case a.setTag:{if(h.size!==x.size)return!1;const _=Array.from(h.values()),S=Array.from(x.values());for(let k=0;k<_.length;k++){const E=_[k],A=S.findIndex(O=>u(E,O,void 0,h,x,p,y));if(A===-1)return!1;S.splice(A,1)}return!0}case a.arrayTag:case a.uint8ArrayTag:case a.uint8ClampedArrayTag:case a.uint16ArrayTag:case a.uint32ArrayTag:case a.bigUint64ArrayTag:case a.int8ArrayTag:case a.int16ArrayTag:case a.int32ArrayTag:case a.bigInt64ArrayTag:case a.float32ArrayTag:case a.float64ArrayTag:{if(typeof Buffer<"u"&&Buffer.isBuffer(h)!==Buffer.isBuffer(x)||h.length!==x.length)return!1;for(let _=0;_<h.length;_++)if(!u(h[_],x[_],_,h,x,p,y))return!1;return!0}case a.arrayBufferTag:return h.byteLength!==x.byteLength?!1:d(new Uint8Array(h),new Uint8Array(x),p,y);case a.dataViewTag:return h.byteLength!==x.byteLength||h.byteOffset!==x.byteOffset?!1:d(new Uint8Array(h),new Uint8Array(x),p,y);case a.errorTag:return h.name===x.name&&h.message===x.message;case a.objectTag:{if(!(d(h.constructor,x.constructor,p,y)||r.isPlainObject(h)&&r.isPlainObject(x)))return!1;const S=[...Object.keys(h),...n.getSymbols(h)],k=[...Object.keys(x),...n.getSymbols(x)];if(S.length!==k.length)return!1;for(let E=0;E<S.length;E++){const A=S[E],O=h[A];if(!Object.hasOwn(x,A))return!1;const z=x[A];if(!u(O,z,A,h,x,p,y))return!1}return!0}default:return!1}}finally{p.delete(h),p.delete(x)}}t.isEqualWith=c})(Sb)),Sb}var Ab={},sT;function Kae(){return sT||(sT=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function r(){}t.noop=r})(Ab)),Ab}var aT;function Gae(){return aT||(aT=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=Yae(),n=Kae();function s(a,l){return r.isEqualWith(a,l,n.noop)}t.isEqual=s})(Cb)),Cb}var Eb,iT;function Qae(){return iT||(iT=1,Eb=Gae().isEqual),Eb}var Xae=Qae();const Zae=Di(Xae);var cp=1e-4,LI=(t,r)=>[0,3*t,3*r-6*t,3*t-3*r+1],II=(t,r)=>t.map((n,s)=>n*r**s).reduce((n,s)=>n+s),lT=(t,r)=>n=>{var s=LI(t,r);return II(s,n)},Jae=(t,r)=>n=>{var s=LI(t,r),a=[...s.map((l,c)=>l*c).slice(1),0];return II(a,n)},oT=function(){for(var r,n,s,a,l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];if(c.length===1)switch(c[0]){case"linear":[r,s,n,a]=[0,0,1,1];break;case"ease":[r,s,n,a]=[.25,.1,.25,1];break;case"ease-in":[r,s,n,a]=[.42,0,1,1];break;case"ease-out":[r,s,n,a]=[.42,0,.58,1];break;case"ease-in-out":[r,s,n,a]=[0,0,.58,1];break;default:{var d=c[0].split("(");d[0]==="cubic-bezier"&&d[1].split(")")[0].split(",").length===4&&([r,s,n,a]=d[1].split(")")[0].split(",").map(w=>parseFloat(w)))}}else c.length===4&&([r,s,n,a]=c);var h=lT(r,n),x=lT(s,a),p=Jae(r,n),y=w=>w>1?1:w<0?0:w,v=w=>{for(var b=w>1?1:w,N=b,_=0;_<8;++_){var S=h(N)-b,k=p(N);if(Math.abs(S-b)<cp||k<cp)return x(N);N=y(N-S/k)}return x(N)};return v.isStepper=!1,v},eie=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:n=100,damping:s=8,dt:a=17}=r,l=(c,u,d)=>{var h=-(c-u)*n,x=d*s,p=d+(h-x)*a/1e3,y=d*a/1e3+c;return Math.abs(y-u)<cp&&Math.abs(p)<cp?[u,0]:[y,p]};return l.isStepper=!0,l.dt=a,l},$I=t=>{if(typeof t=="string")switch(t){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return oT(t);case"spring":return eie();default:if(t.split("(")[0]==="cubic-bezier")return oT(t)}return typeof t=="function"?t:null};function cT(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);r&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,s)}return n}function dT(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?cT(Object(n),!0).forEach(function(s){tie(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):cT(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}function tie(t,r,n){return(r=rie(r))in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function rie(t){var r=nie(t,"string");return typeof r=="symbol"?r:r+""}function nie(t,r){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var s=n.call(t,r);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}var sie=t=>t.replace(/([A-Z])/g,r=>"-".concat(r.toLowerCase())),aie=(t,r,n)=>t.map(s=>"".concat(sie(s)," ").concat(r,"ms ").concat(n)).join(","),iie=(t,r)=>[Object.keys(t),Object.keys(r)].reduce((n,s)=>n.filter(a=>s.includes(a))),Um=(t,r)=>Object.keys(r).reduce((n,s)=>dT(dT({},n),{},{[s]:t(s,r[s])}),{});function uT(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);r&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,s)}return n}function ms(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?uT(Object(n),!0).forEach(function(s){lie(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):uT(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}function lie(t,r,n){return(r=oie(r))in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function oie(t){var r=cie(t,"string");return typeof r=="symbol"?r:r+""}function cie(t,r){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var s=n.call(t,r);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}var dp=(t,r,n)=>t+(r-t)*n,mw=t=>{var{from:r,to:n}=t;return r!==n},FI=(t,r,n)=>{var s=Um((a,l)=>{if(mw(l)){var[c,u]=t(l.from,l.to,l.velocity);return ms(ms({},l),{},{from:c,velocity:u})}return l},r);return n<1?Um((a,l)=>mw(l)?ms(ms({},l),{},{velocity:dp(l.velocity,s[a].velocity,n),from:dp(l.from,s[a].from,n)}):l,r):FI(t,s,n-1)};function die(t,r,n,s,a,l){var c,u=s.reduce((y,v)=>ms(ms({},y),{},{[v]:{from:t[v],velocity:0,to:r[v]}}),{}),d=()=>Um((y,v)=>v.from,u),h=()=>!Object.values(u).filter(mw).length,x=null,p=y=>{c||(c=y);var v=y-c,w=v/n.dt;u=FI(n,u,w),a(ms(ms(ms({},t),r),d())),c=y,h()||(x=l.setTimeout(p))};return()=>(x=l.setTimeout(p),()=>{x()})}function uie(t,r,n,s,a,l,c){var u=null,d=a.reduce((p,y)=>ms(ms({},p),{},{[y]:[t[y],r[y]]}),{}),h,x=p=>{h||(h=p);var y=(p-h)/s,v=Um((b,N)=>dp(...N,n(y)),d);if(l(ms(ms(ms({},t),r),v)),y<1)u=c.setTimeout(x);else{var w=Um((b,N)=>dp(...N,n(1)),d);l(ms(ms(ms({},t),r),w))}};return()=>(u=c.setTimeout(x),()=>{u()})}const qI=(t,r,n,s,a,l)=>{var c=iie(t,r);return n.isStepper===!0?die(t,r,n,c,a,l):uie(t,r,n,s,c,a,l)};function mie(t){var r,n=()=>null,s=!1,a=null,l=c=>{if(!s){if(Array.isArray(c)){if(!c.length)return;var u=c,[d,...h]=u;if(typeof d=="number"){a=t.setTimeout(l.bind(null,h),d);return}l(d),a=t.setTimeout(l.bind(null,h));return}typeof c=="string"&&(r=c,n(r)),typeof c=="object"&&(r=c,n(r)),typeof c=="function"&&c()}};return{stop:()=>{s=!0},start:c=>{s=!1,a&&(a(),a=null),l(c)},subscribe:c=>(n=c,()=>{n=()=>null}),getTimeoutController:()=>t}}class hie{setTimeout(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=performance.now(),a=null,l=c=>{c-s>=n?r(c):typeof requestAnimationFrame=="function"&&(a=requestAnimationFrame(l))};return a=requestAnimationFrame(l),()=>{cancelAnimationFrame(a)}}}function fie(){return mie(new hie)}var xie=f.createContext(fie);function UI(t,r){var n=f.useContext(xie);return f.useMemo(()=>r??n(t),[t,r,n])}var pie=["children","begin","duration","attributeName","easing","isActive","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart","animationManager"];function hw(){return hw=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var s in n)({}).hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},hw.apply(null,arguments)}function gie(t,r){if(t==null)return{};var n,s,a=yie(t,r);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(s=0;s<l.length;s++)n=l[s],r.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function yie(t,r){if(t==null)return{};var n={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(r.indexOf(s)!==-1)continue;n[s]=t[s]}return n}function mT(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);r&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,s)}return n}function to(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?mT(Object(n),!0).forEach(function(s){ec(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):mT(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}function ec(t,r,n){return(r=vie(r))in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function vie(t){var r=jie(t,"string");return typeof r=="symbol"?r:r+""}function jie(t,r){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var s=n.call(t,r);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}class T_ extends f.PureComponent{constructor(r,n){super(r,n),ec(this,"mounted",!1),ec(this,"manager",void 0),ec(this,"stopJSAnimation",null),ec(this,"unSubscribe",null);var{isActive:s,attributeName:a,from:l,to:c,children:u,duration:d,animationManager:h}=this.props;if(this.manager=h,this.handleStyleChange=this.handleStyleChange.bind(this),this.changeStyle=this.changeStyle.bind(this),!s||d<=0){this.state={style:{}},typeof u=="function"&&(this.state={style:c});return}if(l){if(typeof u=="function"){this.state={style:l};return}this.state={style:a?{[a]:l}:l}}else this.state={style:{}}}componentDidMount(){var{isActive:r,canBegin:n}=this.props;this.mounted=!0,!(!r||!n)&&this.runAnimation(this.props)}componentDidUpdate(r){var{isActive:n,canBegin:s,attributeName:a,shouldReAnimate:l,to:c,from:u}=this.props,{style:d}=this.state;if(s){if(!n){var h={style:a?{[a]:c}:c};this.state&&d&&(a&&d[a]!==c||!a&&d!==c)&&this.setState(h);return}if(!(Zae(r.to,c)&&r.canBegin&&r.isActive)){var x=!r.canBegin||!r.isActive;this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var p=x||l?u:r.to;if(this.state&&d){var y={style:a?{[a]:p}:p};(a&&d[a]!==p||!a&&d!==p)&&this.setState(y)}this.runAnimation(to(to({},this.props),{},{from:p,begin:0}))}}}componentWillUnmount(){this.mounted=!1;var{onAnimationEnd:r}=this.props;this.unSubscribe&&this.unSubscribe(),this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation(),r&&r()}handleStyleChange(r){this.changeStyle(r)}changeStyle(r){this.mounted&&this.setState({style:r})}runJSAnimation(r){var{from:n,to:s,duration:a,easing:l,begin:c,onAnimationEnd:u,onAnimationStart:d}=r,h=qI(n,s,$I(l),a,this.changeStyle,this.manager.getTimeoutController()),x=()=>{this.stopJSAnimation=h()};this.manager.start([d,c,x,a,u])}runAnimation(r){var{begin:n,duration:s,attributeName:a,to:l,easing:c,onAnimationStart:u,onAnimationEnd:d,children:h}=r;if(this.unSubscribe=this.manager.subscribe(this.handleStyleChange),typeof c=="function"||typeof h=="function"||c==="spring"){this.runJSAnimation(r);return}var x=a?{[a]:l}:l,p=aie(Object.keys(x),s,c);this.manager.start([u,n,to(to({},x),{},{transition:p}),s,d])}render(){var r=this.props,{children:n,begin:s,duration:a,attributeName:l,easing:c,isActive:u,from:d,to:h,canBegin:x,onAnimationEnd:p,shouldReAnimate:y,onAnimationReStart:v,animationManager:w}=r,b=gie(r,pie),N=f.Children.count(n),_=this.state.style;if(typeof n=="function")return n(_);if(!u||N===0||a<=0)return n;var S=k=>{var{style:E={},className:A}=k.props,O=f.cloneElement(k,to(to({},b),{},{style:to(to({},E),_),className:A}));return O};return N===1?S(f.Children.only(n)):f.createElement("div",null,f.Children.map(n,k=>S(k)))}}ec(T_,"displayName","Animate");ec(T_,"defaultProps",{begin:0,duration:1e3,attributeName:"",easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}});function hT(t){var r,n=UI((r=t.attributeName)!==null&&r!==void 0?r:Object.keys(t.to).join(","),t.animationManager);return f.createElement(T_,hw({},t,{animationManager:n}))}function up(){return up=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var s in n)({}).hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},up.apply(null,arguments)}var fT=(t,r,n,s,a)=>{var l=Math.min(Math.abs(n)/2,Math.abs(s)/2),c=s>=0?1:-1,u=n>=0?1:-1,d=s>=0&&n>=0||s<0&&n<0?1:0,h;if(l>0&&a instanceof Array){for(var x=[0,0,0,0],p=0,y=4;p<y;p++)x[p]=a[p]>l?l:a[p];h="M".concat(t,",").concat(r+c*x[0]),x[0]>0&&(h+="A ".concat(x[0],",").concat(x[0],",0,0,").concat(d,",").concat(t+u*x[0],",").concat(r)),h+="L ".concat(t+n-u*x[1],",").concat(r),x[1]>0&&(h+="A ".concat(x[1],",").concat(x[1],",0,0,").concat(d,`,
        `).concat(t+n,",").concat(r+c*x[1])),h+="L ".concat(t+n,",").concat(r+s-c*x[2]),x[2]>0&&(h+="A ".concat(x[2],",").concat(x[2],",0,0,").concat(d,`,
        `).concat(t+n-u*x[2],",").concat(r+s)),h+="L ".concat(t+u*x[3],",").concat(r+s),x[3]>0&&(h+="A ".concat(x[3],",").concat(x[3],",0,0,").concat(d,`,
        `).concat(t,",").concat(r+s-c*x[3])),h+="Z"}else if(l>0&&a===+a&&a>0){var v=Math.min(l,a);h="M ".concat(t,",").concat(r+c*v,`
            A `).concat(v,",").concat(v,",0,0,").concat(d,",").concat(t+u*v,",").concat(r,`
            L `).concat(t+n-u*v,",").concat(r,`
            A `).concat(v,",").concat(v,",0,0,").concat(d,",").concat(t+n,",").concat(r+c*v,`
            L `).concat(t+n,",").concat(r+s-c*v,`
            A `).concat(v,",").concat(v,",0,0,").concat(d,",").concat(t+n-u*v,",").concat(r+s,`
            L `).concat(t+u*v,",").concat(r+s,`
            A `).concat(v,",").concat(v,",0,0,").concat(d,",").concat(t,",").concat(r+s-c*v," Z")}else h="M ".concat(t,",").concat(r," h ").concat(n," v ").concat(s," h ").concat(-n," Z");return h},bie={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},wie=t=>{var r=No(t,bie),n=f.useRef(null),[s,a]=f.useState(-1);f.useEffect(()=>{if(n.current&&n.current.getTotalLength)try{var _=n.current.getTotalLength();_&&a(_)}catch{}},[]);var{x:l,y:c,width:u,height:d,radius:h,className:x}=r,{animationEasing:p,animationDuration:y,animationBegin:v,isAnimationActive:w,isUpdateAnimationActive:b}=r;if(l!==+l||c!==+c||u!==+u||d!==+d||u===0||d===0)return null;var N=Ur("recharts-rectangle",x);return b?f.createElement(hT,{canBegin:s>0,from:{width:u,height:d,x:l,y:c},to:{width:u,height:d,x:l,y:c},duration:y,animationEasing:p,isActive:b},_=>{var{width:S,height:k,x:E,y:A}=_;return f.createElement(hT,{canBegin:s>0,from:"0px ".concat(s===-1?1:s,"px"),to:"".concat(s,"px 0px"),attributeName:"strokeDasharray",begin:v,duration:y,isActive:w,easing:p},f.createElement("path",up({},ns(r,!0),{className:N,d:fT(E,A,S,k,h),ref:n})))}):f.createElement("path",up({},ns(r,!0),{className:N,d:fT(l,c,u,d,h)}))};function zI(t){var{cx:r,cy:n,radius:s,startAngle:a,endAngle:l}=t,c=hs(r,n,s,a),u=hs(r,n,s,l);return{points:[c,u],cx:r,cy:n,radius:s,startAngle:a,endAngle:l}}function fw(){return fw=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var s in n)({}).hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},fw.apply(null,arguments)}var Nie=(t,r)=>{var n=Da(r-t),s=Math.min(Math.abs(r-t),359.999);return n*s},hx=t=>{var{cx:r,cy:n,radius:s,angle:a,sign:l,isExternal:c,cornerRadius:u,cornerIsExternal:d}=t,h=u*(c?1:-1)+s,x=Math.asin(u/h)/lp,p=d?a:a+l*x,y=hs(r,n,h,p),v=hs(r,n,s,p),w=d?a-l*x:a,b=hs(r,n,h*Math.cos(x*lp),w);return{center:y,circleTangency:v,lineTangency:b,theta:x}},BI=t=>{var{cx:r,cy:n,innerRadius:s,outerRadius:a,startAngle:l,endAngle:c}=t,u=Nie(l,c),d=l+u,h=hs(r,n,a,l),x=hs(r,n,a,d),p="M ".concat(h.x,",").concat(h.y,`
    A `).concat(a,",").concat(a,`,0,
    `).concat(+(Math.abs(u)>180),",").concat(+(l>d),`,
    `).concat(x.x,",").concat(x.y,`
  `);if(s>0){var y=hs(r,n,s,l),v=hs(r,n,s,d);p+="L ".concat(v.x,",").concat(v.y,`
            A `).concat(s,",").concat(s,`,0,
            `).concat(+(Math.abs(u)>180),",").concat(+(l<=d),`,
            `).concat(y.x,",").concat(y.y," Z")}else p+="L ".concat(r,",").concat(n," Z");return p},_ie=t=>{var{cx:r,cy:n,innerRadius:s,outerRadius:a,cornerRadius:l,forceCornerRadius:c,cornerIsExternal:u,startAngle:d,endAngle:h}=t,x=Da(h-d),{circleTangency:p,lineTangency:y,theta:v}=hx({cx:r,cy:n,radius:a,angle:d,sign:x,cornerRadius:l,cornerIsExternal:u}),{circleTangency:w,lineTangency:b,theta:N}=hx({cx:r,cy:n,radius:a,angle:h,sign:-x,cornerRadius:l,cornerIsExternal:u}),_=u?Math.abs(d-h):Math.abs(d-h)-v-N;if(_<0)return c?"M ".concat(y.x,",").concat(y.y,`
        a`).concat(l,",").concat(l,",0,0,1,").concat(l*2,`,0
        a`).concat(l,",").concat(l,",0,0,1,").concat(-l*2,`,0
      `):BI({cx:r,cy:n,innerRadius:s,outerRadius:a,startAngle:d,endAngle:h});var S="M ".concat(y.x,",").concat(y.y,`
    A`).concat(l,",").concat(l,",0,0,").concat(+(x<0),",").concat(p.x,",").concat(p.y,`
    A`).concat(a,",").concat(a,",0,").concat(+(_>180),",").concat(+(x<0),",").concat(w.x,",").concat(w.y,`
    A`).concat(l,",").concat(l,",0,0,").concat(+(x<0),",").concat(b.x,",").concat(b.y,`
  `);if(s>0){var{circleTangency:k,lineTangency:E,theta:A}=hx({cx:r,cy:n,radius:s,angle:d,sign:x,isExternal:!0,cornerRadius:l,cornerIsExternal:u}),{circleTangency:O,lineTangency:z,theta:R}=hx({cx:r,cy:n,radius:s,angle:h,sign:-x,isExternal:!0,cornerRadius:l,cornerIsExternal:u}),G=u?Math.abs(d-h):Math.abs(d-h)-A-R;if(G<0&&l===0)return"".concat(S,"L").concat(r,",").concat(n,"Z");S+="L".concat(z.x,",").concat(z.y,`
      A`).concat(l,",").concat(l,",0,0,").concat(+(x<0),",").concat(O.x,",").concat(O.y,`
      A`).concat(s,",").concat(s,",0,").concat(+(G>180),",").concat(+(x>0),",").concat(k.x,",").concat(k.y,`
      A`).concat(l,",").concat(l,",0,0,").concat(+(x<0),",").concat(E.x,",").concat(E.y,"Z")}else S+="L".concat(r,",").concat(n,"Z");return S},Cie={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},Sie=t=>{var r=No(t,Cie),{cx:n,cy:s,innerRadius:a,outerRadius:l,cornerRadius:c,forceCornerRadius:u,cornerIsExternal:d,startAngle:h,endAngle:x,className:p}=r;if(l<a||h===x)return null;var y=Ur("recharts-sector",p),v=l-a,w=yo(c,v,0,!0),b;return w>0&&Math.abs(h-x)<360?b=_ie({cx:n,cy:s,innerRadius:a,outerRadius:l,cornerRadius:Math.min(w,v/2),forceCornerRadius:u,cornerIsExternal:d,startAngle:h,endAngle:x}):b=BI({cx:n,cy:s,innerRadius:a,outerRadius:l,startAngle:h,endAngle:x}),f.createElement("path",fw({},ns(r,!0),{className:y,d:b}))};function kie(t,r,n){var s,a,l,c;if(t==="horizontal")s=r.x,l=s,a=n.top,c=n.top+n.height;else if(t==="vertical")a=r.y,c=a,s=n.left,l=n.left+n.width;else if(r.cx!=null&&r.cy!=null)if(t==="centric"){var{cx:u,cy:d,innerRadius:h,outerRadius:x,angle:p}=r,y=hs(u,d,h,p),v=hs(u,d,x,p);s=y.x,a=y.y,l=v.x,c=v.y}else return zI(r);return[{x:s,y:a},{x:l,y:c}]}var Mb={},Tb={},Ob={},xT;function Aie(){return xT||(xT=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=J5();function n(s){return r.isSymbol(s)?NaN:Number(s)}t.toNumber=n})(Ob)),Ob}var pT;function Eie(){return pT||(pT=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=Aie();function n(s){return s?(s=r.toNumber(s),s===1/0||s===-1/0?(s<0?-1:1)*Number.MAX_VALUE:s===s?s:0):s===0?s:0}t.toFinite=n})(Tb)),Tb}var gT;function Mie(){return gT||(gT=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=eI(),n=Eie();function s(a,l,c){c&&typeof c!="number"&&r.isIterateeCall(a,l,c)&&(l=c=void 0),a=n.toFinite(a),l===void 0?(l=a,a=0):l=n.toFinite(l),c=c===void 0?a<l?1:-1:n.toFinite(c);const u=Math.max(Math.ceil((l-a)/(c||1)),0),d=new Array(u);for(let h=0;h<u;h++)d[h]=a,a+=c;return d}t.range=s})(Mb)),Mb}var Pb,yT;function Tie(){return yT||(yT=1,Pb=Mie().range),Pb}var Oie=Tie();const WI=Di(Oie);function mo(t,r){return t==null||r==null?NaN:t<r?-1:t>r?1:t>=r?0:NaN}function Pie(t,r){return t==null||r==null?NaN:r<t?-1:r>t?1:r>=t?0:NaN}function O_(t){let r,n,s;t.length!==2?(r=mo,n=(u,d)=>mo(t(u),d),s=(u,d)=>t(u)-d):(r=t===mo||t===Pie?t:Die,n=t,s=t);function a(u,d,h=0,x=u.length){if(h<x){if(r(d,d)!==0)return x;do{const p=h+x>>>1;n(u[p],d)<0?h=p+1:x=p}while(h<x)}return h}function l(u,d,h=0,x=u.length){if(h<x){if(r(d,d)!==0)return x;do{const p=h+x>>>1;n(u[p],d)<=0?h=p+1:x=p}while(h<x)}return h}function c(u,d,h=0,x=u.length){const p=a(u,d,h,x-1);return p>h&&s(u[p-1],d)>-s(u[p],d)?p-1:p}return{left:a,center:c,right:l}}function Die(){return 0}function HI(t){return t===null?NaN:+t}function*Rie(t,r){for(let n of t)n!=null&&(n=+n)>=n&&(yield n)}const Lie=O_(mo),jh=Lie.right;O_(HI).center;class vT extends Map{constructor(r,n=Fie){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),r!=null)for(const[s,a]of r)this.set(s,a)}get(r){return super.get(jT(this,r))}has(r){return super.has(jT(this,r))}set(r,n){return super.set(Iie(this,r),n)}delete(r){return super.delete($ie(this,r))}}function jT({_intern:t,_key:r},n){const s=r(n);return t.has(s)?t.get(s):n}function Iie({_intern:t,_key:r},n){const s=r(n);return t.has(s)?t.get(s):(t.set(s,n),n)}function $ie({_intern:t,_key:r},n){const s=r(n);return t.has(s)&&(n=t.get(s),t.delete(s)),n}function Fie(t){return t!==null&&typeof t=="object"?t.valueOf():t}function qie(t=mo){if(t===mo)return VI;if(typeof t!="function")throw new TypeError("compare is not a function");return(r,n)=>{const s=t(r,n);return s||s===0?s:(t(n,n)===0)-(t(r,r)===0)}}function VI(t,r){return(t==null||!(t>=t))-(r==null||!(r>=r))||(t<r?-1:t>r?1:0)}const Uie=Math.sqrt(50),zie=Math.sqrt(10),Bie=Math.sqrt(2);function mp(t,r,n){const s=(r-t)/Math.max(0,n),a=Math.floor(Math.log10(s)),l=s/Math.pow(10,a),c=l>=Uie?10:l>=zie?5:l>=Bie?2:1;let u,d,h;return a<0?(h=Math.pow(10,-a)/c,u=Math.round(t*h),d=Math.round(r*h),u/h<t&&++u,d/h>r&&--d,h=-h):(h=Math.pow(10,a)*c,u=Math.round(t/h),d=Math.round(r/h),u*h<t&&++u,d*h>r&&--d),d<u&&.5<=n&&n<2?mp(t,r,n*2):[u,d,h]}function xw(t,r,n){if(r=+r,t=+t,n=+n,!(n>0))return[];if(t===r)return[t];const s=r<t,[a,l,c]=s?mp(r,t,n):mp(t,r,n);if(!(l>=a))return[];const u=l-a+1,d=new Array(u);if(s)if(c<0)for(let h=0;h<u;++h)d[h]=(l-h)/-c;else for(let h=0;h<u;++h)d[h]=(l-h)*c;else if(c<0)for(let h=0;h<u;++h)d[h]=(a+h)/-c;else for(let h=0;h<u;++h)d[h]=(a+h)*c;return d}function pw(t,r,n){return r=+r,t=+t,n=+n,mp(t,r,n)[2]}function gw(t,r,n){r=+r,t=+t,n=+n;const s=r<t,a=s?pw(r,t,n):pw(t,r,n);return(s?-1:1)*(a<0?1/-a:a)}function bT(t,r){let n;for(const s of t)s!=null&&(n<s||n===void 0&&s>=s)&&(n=s);return n}function wT(t,r){let n;for(const s of t)s!=null&&(n>s||n===void 0&&s>=s)&&(n=s);return n}function YI(t,r,n=0,s=1/0,a){if(r=Math.floor(r),n=Math.floor(Math.max(0,n)),s=Math.floor(Math.min(t.length-1,s)),!(n<=r&&r<=s))return t;for(a=a===void 0?VI:qie(a);s>n;){if(s-n>600){const d=s-n+1,h=r-n+1,x=Math.log(d),p=.5*Math.exp(2*x/3),y=.5*Math.sqrt(x*p*(d-p)/d)*(h-d/2<0?-1:1),v=Math.max(n,Math.floor(r-h*p/d+y)),w=Math.min(s,Math.floor(r+(d-h)*p/d+y));YI(t,r,v,w,a)}const l=t[r];let c=n,u=s;for(gm(t,n,r),a(t[s],l)>0&&gm(t,n,s);c<u;){for(gm(t,c,u),++c,--u;a(t[c],l)<0;)++c;for(;a(t[u],l)>0;)--u}a(t[n],l)===0?gm(t,n,u):(++u,gm(t,u,s)),u<=r&&(n=u+1),r<=u&&(s=u-1)}return t}function gm(t,r,n){const s=t[r];t[r]=t[n],t[n]=s}function Wie(t,r,n){if(t=Float64Array.from(Rie(t)),!(!(s=t.length)||isNaN(r=+r))){if(r<=0||s<2)return wT(t);if(r>=1)return bT(t);var s,a=(s-1)*r,l=Math.floor(a),c=bT(YI(t,l).subarray(0,l+1)),u=wT(t.subarray(l+1));return c+(u-c)*(a-l)}}function Hie(t,r,n=HI){if(!(!(s=t.length)||isNaN(r=+r))){if(r<=0||s<2)return+n(t[0],0,t);if(r>=1)return+n(t[s-1],s-1,t);var s,a=(s-1)*r,l=Math.floor(a),c=+n(t[l],l,t),u=+n(t[l+1],l+1,t);return c+(u-c)*(a-l)}}function Vie(t,r,n){t=+t,r=+r,n=(a=arguments.length)<2?(r=t,t=0,1):a<3?1:+n;for(var s=-1,a=Math.max(0,Math.ceil((r-t)/n))|0,l=new Array(a);++s<a;)l[s]=t+s*n;return l}function Wa(t,r){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(r).domain(t);break}return this}function Sl(t,r){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof r=="function"?this.interpolator(r):this.range(r);break}}return this}const yw=Symbol("implicit");function P_(){var t=new vT,r=[],n=[],s=yw;function a(l){let c=t.get(l);if(c===void 0){if(s!==yw)return s;t.set(l,c=r.push(l)-1)}return n[c%n.length]}return a.domain=function(l){if(!arguments.length)return r.slice();r=[],t=new vT;for(const c of l)t.has(c)||t.set(c,r.push(c)-1);return a},a.range=function(l){return arguments.length?(n=Array.from(l),a):n.slice()},a.unknown=function(l){return arguments.length?(s=l,a):s},a.copy=function(){return P_(r,n).unknown(s)},Wa.apply(a,arguments),a}function D_(){var t=P_().unknown(void 0),r=t.domain,n=t.range,s=0,a=1,l,c,u=!1,d=0,h=0,x=.5;delete t.unknown;function p(){var y=r().length,v=a<s,w=v?a:s,b=v?s:a;l=(b-w)/Math.max(1,y-d+h*2),u&&(l=Math.floor(l)),w+=(b-w-l*(y-d))*x,c=l*(1-d),u&&(w=Math.round(w),c=Math.round(c));var N=Vie(y).map(function(_){return w+l*_});return n(v?N.reverse():N)}return t.domain=function(y){return arguments.length?(r(y),p()):r()},t.range=function(y){return arguments.length?([s,a]=y,s=+s,a=+a,p()):[s,a]},t.rangeRound=function(y){return[s,a]=y,s=+s,a=+a,u=!0,p()},t.bandwidth=function(){return c},t.step=function(){return l},t.round=function(y){return arguments.length?(u=!!y,p()):u},t.padding=function(y){return arguments.length?(d=Math.min(1,h=+y),p()):d},t.paddingInner=function(y){return arguments.length?(d=Math.min(1,y),p()):d},t.paddingOuter=function(y){return arguments.length?(h=+y,p()):h},t.align=function(y){return arguments.length?(x=Math.max(0,Math.min(1,y)),p()):x},t.copy=function(){return D_(r(),[s,a]).round(u).paddingInner(d).paddingOuter(h).align(x)},Wa.apply(p(),arguments)}function KI(t){var r=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return KI(r())},t}function Yie(){return KI(D_.apply(null,arguments).paddingInner(1))}function R_(t,r,n){t.prototype=r.prototype=n,n.constructor=t}function GI(t,r){var n=Object.create(t.prototype);for(var s in r)n[s]=r[s];return n}function bh(){}var zm=.7,hp=1/zm,Td="\\s*([+-]?\\d+)\\s*",Bm="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ai="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Kie=/^#([0-9a-f]{3,8})$/,Gie=new RegExp(`^rgb\\(${Td},${Td},${Td}\\)$`),Qie=new RegExp(`^rgb\\(${Ai},${Ai},${Ai}\\)$`),Xie=new RegExp(`^rgba\\(${Td},${Td},${Td},${Bm}\\)$`),Zie=new RegExp(`^rgba\\(${Ai},${Ai},${Ai},${Bm}\\)$`),Jie=new RegExp(`^hsl\\(${Bm},${Ai},${Ai}\\)$`),ele=new RegExp(`^hsla\\(${Bm},${Ai},${Ai},${Bm}\\)$`),NT={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};R_(bh,Wm,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:_T,formatHex:_T,formatHex8:tle,formatHsl:rle,formatRgb:CT,toString:CT});function _T(){return this.rgb().formatHex()}function tle(){return this.rgb().formatHex8()}function rle(){return QI(this).formatHsl()}function CT(){return this.rgb().formatRgb()}function Wm(t){var r,n;return t=(t+"").trim().toLowerCase(),(r=Kie.exec(t))?(n=r[1].length,r=parseInt(r[1],16),n===6?ST(r):n===3?new Bs(r>>8&15|r>>4&240,r>>4&15|r&240,(r&15)<<4|r&15,1):n===8?fx(r>>24&255,r>>16&255,r>>8&255,(r&255)/255):n===4?fx(r>>12&15|r>>8&240,r>>8&15|r>>4&240,r>>4&15|r&240,((r&15)<<4|r&15)/255):null):(r=Gie.exec(t))?new Bs(r[1],r[2],r[3],1):(r=Qie.exec(t))?new Bs(r[1]*255/100,r[2]*255/100,r[3]*255/100,1):(r=Xie.exec(t))?fx(r[1],r[2],r[3],r[4]):(r=Zie.exec(t))?fx(r[1]*255/100,r[2]*255/100,r[3]*255/100,r[4]):(r=Jie.exec(t))?ET(r[1],r[2]/100,r[3]/100,1):(r=ele.exec(t))?ET(r[1],r[2]/100,r[3]/100,r[4]):NT.hasOwnProperty(t)?ST(NT[t]):t==="transparent"?new Bs(NaN,NaN,NaN,0):null}function ST(t){return new Bs(t>>16&255,t>>8&255,t&255,1)}function fx(t,r,n,s){return s<=0&&(t=r=n=NaN),new Bs(t,r,n,s)}function nle(t){return t instanceof bh||(t=Wm(t)),t?(t=t.rgb(),new Bs(t.r,t.g,t.b,t.opacity)):new Bs}function vw(t,r,n,s){return arguments.length===1?nle(t):new Bs(t,r,n,s??1)}function Bs(t,r,n,s){this.r=+t,this.g=+r,this.b=+n,this.opacity=+s}R_(Bs,vw,GI(bh,{brighter(t){return t=t==null?hp:Math.pow(hp,t),new Bs(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?zm:Math.pow(zm,t),new Bs(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Bs(lc(this.r),lc(this.g),lc(this.b),fp(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:kT,formatHex:kT,formatHex8:sle,formatRgb:AT,toString:AT}));function kT(){return`#${tc(this.r)}${tc(this.g)}${tc(this.b)}`}function sle(){return`#${tc(this.r)}${tc(this.g)}${tc(this.b)}${tc((isNaN(this.opacity)?1:this.opacity)*255)}`}function AT(){const t=fp(this.opacity);return`${t===1?"rgb(":"rgba("}${lc(this.r)}, ${lc(this.g)}, ${lc(this.b)}${t===1?")":`, ${t})`}`}function fp(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function lc(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function tc(t){return t=lc(t),(t<16?"0":"")+t.toString(16)}function ET(t,r,n,s){return s<=0?t=r=n=NaN:n<=0||n>=1?t=r=NaN:r<=0&&(t=NaN),new Za(t,r,n,s)}function QI(t){if(t instanceof Za)return new Za(t.h,t.s,t.l,t.opacity);if(t instanceof bh||(t=Wm(t)),!t)return new Za;if(t instanceof Za)return t;t=t.rgb();var r=t.r/255,n=t.g/255,s=t.b/255,a=Math.min(r,n,s),l=Math.max(r,n,s),c=NaN,u=l-a,d=(l+a)/2;return u?(r===l?c=(n-s)/u+(n<s)*6:n===l?c=(s-r)/u+2:c=(r-n)/u+4,u/=d<.5?l+a:2-l-a,c*=60):u=d>0&&d<1?0:c,new Za(c,u,d,t.opacity)}function ale(t,r,n,s){return arguments.length===1?QI(t):new Za(t,r,n,s??1)}function Za(t,r,n,s){this.h=+t,this.s=+r,this.l=+n,this.opacity=+s}R_(Za,ale,GI(bh,{brighter(t){return t=t==null?hp:Math.pow(hp,t),new Za(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?zm:Math.pow(zm,t),new Za(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,r=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,s=n+(n<.5?n:1-n)*r,a=2*n-s;return new Bs(Db(t>=240?t-240:t+120,a,s),Db(t,a,s),Db(t<120?t+240:t-120,a,s),this.opacity)},clamp(){return new Za(MT(this.h),xx(this.s),xx(this.l),fp(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=fp(this.opacity);return`${t===1?"hsl(":"hsla("}${MT(this.h)}, ${xx(this.s)*100}%, ${xx(this.l)*100}%${t===1?")":`, ${t})`}`}}));function MT(t){return t=(t||0)%360,t<0?t+360:t}function xx(t){return Math.max(0,Math.min(1,t||0))}function Db(t,r,n){return(t<60?r+(n-r)*t/60:t<180?n:t<240?r+(n-r)*(240-t)/60:r)*255}const L_=t=>()=>t;function ile(t,r){return function(n){return t+n*r}}function lle(t,r,n){return t=Math.pow(t,n),r=Math.pow(r,n)-t,n=1/n,function(s){return Math.pow(t+s*r,n)}}function ole(t){return(t=+t)==1?XI:function(r,n){return n-r?lle(r,n,t):L_(isNaN(r)?n:r)}}function XI(t,r){var n=r-t;return n?ile(t,n):L_(isNaN(t)?r:t)}const TT=(function t(r){var n=ole(r);function s(a,l){var c=n((a=vw(a)).r,(l=vw(l)).r),u=n(a.g,l.g),d=n(a.b,l.b),h=XI(a.opacity,l.opacity);return function(x){return a.r=c(x),a.g=u(x),a.b=d(x),a.opacity=h(x),a+""}}return s.gamma=t,s})(1);function cle(t,r){r||(r=[]);var n=t?Math.min(r.length,t.length):0,s=r.slice(),a;return function(l){for(a=0;a<n;++a)s[a]=t[a]*(1-l)+r[a]*l;return s}}function dle(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function ule(t,r){var n=r?r.length:0,s=t?Math.min(n,t.length):0,a=new Array(s),l=new Array(n),c;for(c=0;c<s;++c)a[c]=nu(t[c],r[c]);for(;c<n;++c)l[c]=r[c];return function(u){for(c=0;c<s;++c)l[c]=a[c](u);return l}}function mle(t,r){var n=new Date;return t=+t,r=+r,function(s){return n.setTime(t*(1-s)+r*s),n}}function xp(t,r){return t=+t,r=+r,function(n){return t*(1-n)+r*n}}function hle(t,r){var n={},s={},a;(t===null||typeof t!="object")&&(t={}),(r===null||typeof r!="object")&&(r={});for(a in r)a in t?n[a]=nu(t[a],r[a]):s[a]=r[a];return function(l){for(a in n)s[a]=n[a](l);return s}}var jw=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Rb=new RegExp(jw.source,"g");function fle(t){return function(){return t}}function xle(t){return function(r){return t(r)+""}}function ple(t,r){var n=jw.lastIndex=Rb.lastIndex=0,s,a,l,c=-1,u=[],d=[];for(t=t+"",r=r+"";(s=jw.exec(t))&&(a=Rb.exec(r));)(l=a.index)>n&&(l=r.slice(n,l),u[c]?u[c]+=l:u[++c]=l),(s=s[0])===(a=a[0])?u[c]?u[c]+=a:u[++c]=a:(u[++c]=null,d.push({i:c,x:xp(s,a)})),n=Rb.lastIndex;return n<r.length&&(l=r.slice(n),u[c]?u[c]+=l:u[++c]=l),u.length<2?d[0]?xle(d[0].x):fle(r):(r=d.length,function(h){for(var x=0,p;x<r;++x)u[(p=d[x]).i]=p.x(h);return u.join("")})}function nu(t,r){var n=typeof r,s;return r==null||n==="boolean"?L_(r):(n==="number"?xp:n==="string"?(s=Wm(r))?(r=s,TT):ple:r instanceof Wm?TT:r instanceof Date?mle:dle(r)?cle:Array.isArray(r)?ule:typeof r.valueOf!="function"&&typeof r.toString!="function"||isNaN(r)?hle:xp)(t,r)}function I_(t,r){return t=+t,r=+r,function(n){return Math.round(t*(1-n)+r*n)}}function gle(t,r){r===void 0&&(r=t,t=nu);for(var n=0,s=r.length-1,a=r[0],l=new Array(s<0?0:s);n<s;)l[n]=t(a,a=r[++n]);return function(c){var u=Math.max(0,Math.min(s-1,Math.floor(c*=s)));return l[u](c-u)}}function yle(t){return function(){return t}}function pp(t){return+t}var OT=[0,1];function Ms(t){return t}function bw(t,r){return(r-=t=+t)?function(n){return(n-t)/r}:yle(isNaN(r)?NaN:.5)}function vle(t,r){var n;return t>r&&(n=t,t=r,r=n),function(s){return Math.max(t,Math.min(r,s))}}function jle(t,r,n){var s=t[0],a=t[1],l=r[0],c=r[1];return a<s?(s=bw(a,s),l=n(c,l)):(s=bw(s,a),l=n(l,c)),function(u){return l(s(u))}}function ble(t,r,n){var s=Math.min(t.length,r.length)-1,a=new Array(s),l=new Array(s),c=-1;for(t[s]<t[0]&&(t=t.slice().reverse(),r=r.slice().reverse());++c<s;)a[c]=bw(t[c],t[c+1]),l[c]=n(r[c],r[c+1]);return function(u){var d=jh(t,u,1,s)-1;return l[d](a[d](u))}}function wh(t,r){return r.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function _g(){var t=OT,r=OT,n=nu,s,a,l,c=Ms,u,d,h;function x(){var y=Math.min(t.length,r.length);return c!==Ms&&(c=vle(t[0],t[y-1])),u=y>2?ble:jle,d=h=null,p}function p(y){return y==null||isNaN(y=+y)?l:(d||(d=u(t.map(s),r,n)))(s(c(y)))}return p.invert=function(y){return c(a((h||(h=u(r,t.map(s),xp)))(y)))},p.domain=function(y){return arguments.length?(t=Array.from(y,pp),x()):t.slice()},p.range=function(y){return arguments.length?(r=Array.from(y),x()):r.slice()},p.rangeRound=function(y){return r=Array.from(y),n=I_,x()},p.clamp=function(y){return arguments.length?(c=y?!0:Ms,x()):c!==Ms},p.interpolate=function(y){return arguments.length?(n=y,x()):n},p.unknown=function(y){return arguments.length?(l=y,p):l},function(y,v){return s=y,a=v,x()}}function $_(){return _g()(Ms,Ms)}function wle(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function gp(t,r){if((n=(t=r?t.toExponential(r-1):t.toExponential()).indexOf("e"))<0)return null;var n,s=t.slice(0,n);return[s.length>1?s[0]+s.slice(2):s,+t.slice(n+1)]}function Ud(t){return t=gp(Math.abs(t)),t?t[1]:NaN}function Nle(t,r){return function(n,s){for(var a=n.length,l=[],c=0,u=t[0],d=0;a>0&&u>0&&(d+u+1>s&&(u=Math.max(1,s-d)),l.push(n.substring(a-=u,a+u)),!((d+=u+1)>s));)u=t[c=(c+1)%t.length];return l.reverse().join(r)}}function _le(t){return function(r){return r.replace(/[0-9]/g,function(n){return t[+n]})}}var Cle=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Hm(t){if(!(r=Cle.exec(t)))throw new Error("invalid format: "+t);var r;return new F_({fill:r[1],align:r[2],sign:r[3],symbol:r[4],zero:r[5],width:r[6],comma:r[7],precision:r[8]&&r[8].slice(1),trim:r[9],type:r[10]})}Hm.prototype=F_.prototype;function F_(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}F_.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Sle(t){e:for(var r=t.length,n=1,s=-1,a;n<r;++n)switch(t[n]){case".":s=a=n;break;case"0":s===0&&(s=n),a=n;break;default:if(!+t[n])break e;s>0&&(s=0);break}return s>0?t.slice(0,s)+t.slice(a+1):t}var ZI;function kle(t,r){var n=gp(t,r);if(!n)return t+"";var s=n[0],a=n[1],l=a-(ZI=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,c=s.length;return l===c?s:l>c?s+new Array(l-c+1).join("0"):l>0?s.slice(0,l)+"."+s.slice(l):"0."+new Array(1-l).join("0")+gp(t,Math.max(0,r+l-1))[0]}function PT(t,r){var n=gp(t,r);if(!n)return t+"";var s=n[0],a=n[1];return a<0?"0."+new Array(-a).join("0")+s:s.length>a+1?s.slice(0,a+1)+"."+s.slice(a+1):s+new Array(a-s.length+2).join("0")}const DT={"%":(t,r)=>(t*100).toFixed(r),b:t=>Math.round(t).toString(2),c:t=>t+"",d:wle,e:(t,r)=>t.toExponential(r),f:(t,r)=>t.toFixed(r),g:(t,r)=>t.toPrecision(r),o:t=>Math.round(t).toString(8),p:(t,r)=>PT(t*100,r),r:PT,s:kle,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function RT(t){return t}var LT=Array.prototype.map,IT=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Ale(t){var r=t.grouping===void 0||t.thousands===void 0?RT:Nle(LT.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",s=t.currency===void 0?"":t.currency[1]+"",a=t.decimal===void 0?".":t.decimal+"",l=t.numerals===void 0?RT:_le(LT.call(t.numerals,String)),c=t.percent===void 0?"%":t.percent+"",u=t.minus===void 0?"−":t.minus+"",d=t.nan===void 0?"NaN":t.nan+"";function h(p){p=Hm(p);var y=p.fill,v=p.align,w=p.sign,b=p.symbol,N=p.zero,_=p.width,S=p.comma,k=p.precision,E=p.trim,A=p.type;A==="n"?(S=!0,A="g"):DT[A]||(k===void 0&&(k=12),E=!0,A="g"),(N||y==="0"&&v==="=")&&(N=!0,y="0",v="=");var O=b==="$"?n:b==="#"&&/[boxX]/.test(A)?"0"+A.toLowerCase():"",z=b==="$"?s:/[%p]/.test(A)?c:"",R=DT[A],G=/[defgprs%]/.test(A);k=k===void 0?6:/[gprs]/.test(A)?Math.max(1,Math.min(21,k)):Math.max(0,Math.min(20,k));function J(ie){var V=O,xe=z,pe,re,M;if(A==="c")xe=R(ie)+xe,ie="";else{ie=+ie;var B=ie<0||1/ie<0;if(ie=isNaN(ie)?d:R(Math.abs(ie),k),E&&(ie=Sle(ie)),B&&+ie==0&&w!=="+"&&(B=!1),V=(B?w==="("?w:u:w==="-"||w==="("?"":w)+V,xe=(A==="s"?IT[8+ZI/3]:"")+xe+(B&&w==="("?")":""),G){for(pe=-1,re=ie.length;++pe<re;)if(M=ie.charCodeAt(pe),48>M||M>57){xe=(M===46?a+ie.slice(pe+1):ie.slice(pe))+xe,ie=ie.slice(0,pe);break}}}S&&!N&&(ie=r(ie,1/0));var L=V.length+ie.length+xe.length,T=L<_?new Array(_-L+1).join(y):"";switch(S&&N&&(ie=r(T+ie,T.length?_-xe.length:1/0),T=""),v){case"<":ie=V+ie+xe+T;break;case"=":ie=V+T+ie+xe;break;case"^":ie=T.slice(0,L=T.length>>1)+V+ie+xe+T.slice(L);break;default:ie=T+V+ie+xe;break}return l(ie)}return J.toString=function(){return p+""},J}function x(p,y){var v=h((p=Hm(p),p.type="f",p)),w=Math.max(-8,Math.min(8,Math.floor(Ud(y)/3)))*3,b=Math.pow(10,-w),N=IT[8+w/3];return function(_){return v(b*_)+N}}return{format:h,formatPrefix:x}}var px,q_,JI;Ele({thousands:",",grouping:[3],currency:["$",""]});function Ele(t){return px=Ale(t),q_=px.format,JI=px.formatPrefix,px}function Mle(t){return Math.max(0,-Ud(Math.abs(t)))}function Tle(t,r){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Ud(r)/3)))*3-Ud(Math.abs(t)))}function Ole(t,r){return t=Math.abs(t),r=Math.abs(r)-t,Math.max(0,Ud(r)-Ud(t))+1}function e$(t,r,n,s){var a=gw(t,r,n),l;switch(s=Hm(s??",f"),s.type){case"s":{var c=Math.max(Math.abs(t),Math.abs(r));return s.precision==null&&!isNaN(l=Tle(a,c))&&(s.precision=l),JI(s,c)}case"":case"e":case"g":case"p":case"r":{s.precision==null&&!isNaN(l=Ole(a,Math.max(Math.abs(t),Math.abs(r))))&&(s.precision=l-(s.type==="e"));break}case"f":case"%":{s.precision==null&&!isNaN(l=Mle(a))&&(s.precision=l-(s.type==="%")*2);break}}return q_(s)}function _o(t){var r=t.domain;return t.ticks=function(n){var s=r();return xw(s[0],s[s.length-1],n??10)},t.tickFormat=function(n,s){var a=r();return e$(a[0],a[a.length-1],n??10,s)},t.nice=function(n){n==null&&(n=10);var s=r(),a=0,l=s.length-1,c=s[a],u=s[l],d,h,x=10;for(u<c&&(h=c,c=u,u=h,h=a,a=l,l=h);x-- >0;){if(h=pw(c,u,n),h===d)return s[a]=c,s[l]=u,r(s);if(h>0)c=Math.floor(c/h)*h,u=Math.ceil(u/h)*h;else if(h<0)c=Math.ceil(c*h)/h,u=Math.floor(u*h)/h;else break;d=h}return t},t}function t$(){var t=$_();return t.copy=function(){return wh(t,t$())},Wa.apply(t,arguments),_o(t)}function r$(t){var r;function n(s){return s==null||isNaN(s=+s)?r:s}return n.invert=n,n.domain=n.range=function(s){return arguments.length?(t=Array.from(s,pp),n):t.slice()},n.unknown=function(s){return arguments.length?(r=s,n):r},n.copy=function(){return r$(t).unknown(r)},t=arguments.length?Array.from(t,pp):[0,1],_o(n)}function n$(t,r){t=t.slice();var n=0,s=t.length-1,a=t[n],l=t[s],c;return l<a&&(c=n,n=s,s=c,c=a,a=l,l=c),t[n]=r.floor(a),t[s]=r.ceil(l),t}function $T(t){return Math.log(t)}function FT(t){return Math.exp(t)}function Ple(t){return-Math.log(-t)}function Dle(t){return-Math.exp(-t)}function Rle(t){return isFinite(t)?+("1e"+t):t<0?0:t}function Lle(t){return t===10?Rle:t===Math.E?Math.exp:r=>Math.pow(t,r)}function Ile(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),r=>Math.log(r)/t)}function qT(t){return(r,n)=>-t(-r,n)}function U_(t){const r=t($T,FT),n=r.domain;let s=10,a,l;function c(){return a=Ile(s),l=Lle(s),n()[0]<0?(a=qT(a),l=qT(l),t(Ple,Dle)):t($T,FT),r}return r.base=function(u){return arguments.length?(s=+u,c()):s},r.domain=function(u){return arguments.length?(n(u),c()):n()},r.ticks=u=>{const d=n();let h=d[0],x=d[d.length-1];const p=x<h;p&&([h,x]=[x,h]);let y=a(h),v=a(x),w,b;const N=u==null?10:+u;let _=[];if(!(s%1)&&v-y<N){if(y=Math.floor(y),v=Math.ceil(v),h>0){for(;y<=v;++y)for(w=1;w<s;++w)if(b=y<0?w/l(-y):w*l(y),!(b<h)){if(b>x)break;_.push(b)}}else for(;y<=v;++y)for(w=s-1;w>=1;--w)if(b=y>0?w/l(-y):w*l(y),!(b<h)){if(b>x)break;_.push(b)}_.length*2<N&&(_=xw(h,x,N))}else _=xw(y,v,Math.min(v-y,N)).map(l);return p?_.reverse():_},r.tickFormat=(u,d)=>{if(u==null&&(u=10),d==null&&(d=s===10?"s":","),typeof d!="function"&&(!(s%1)&&(d=Hm(d)).precision==null&&(d.trim=!0),d=q_(d)),u===1/0)return d;const h=Math.max(1,s*u/r.ticks().length);return x=>{let p=x/l(Math.round(a(x)));return p*s<s-.5&&(p*=s),p<=h?d(x):""}},r.nice=()=>n(n$(n(),{floor:u=>l(Math.floor(a(u))),ceil:u=>l(Math.ceil(a(u)))})),r}function s$(){const t=U_(_g()).domain([1,10]);return t.copy=()=>wh(t,s$()).base(t.base()),Wa.apply(t,arguments),t}function UT(t){return function(r){return Math.sign(r)*Math.log1p(Math.abs(r/t))}}function zT(t){return function(r){return Math.sign(r)*Math.expm1(Math.abs(r))*t}}function z_(t){var r=1,n=t(UT(r),zT(r));return n.constant=function(s){return arguments.length?t(UT(r=+s),zT(r)):r},_o(n)}function a$(){var t=z_(_g());return t.copy=function(){return wh(t,a$()).constant(t.constant())},Wa.apply(t,arguments)}function BT(t){return function(r){return r<0?-Math.pow(-r,t):Math.pow(r,t)}}function $le(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function Fle(t){return t<0?-t*t:t*t}function B_(t){var r=t(Ms,Ms),n=1;function s(){return n===1?t(Ms,Ms):n===.5?t($le,Fle):t(BT(n),BT(1/n))}return r.exponent=function(a){return arguments.length?(n=+a,s()):n},_o(r)}function W_(){var t=B_(_g());return t.copy=function(){return wh(t,W_()).exponent(t.exponent())},Wa.apply(t,arguments),t}function qle(){return W_.apply(null,arguments).exponent(.5)}function WT(t){return Math.sign(t)*t*t}function Ule(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function i$(){var t=$_(),r=[0,1],n=!1,s;function a(l){var c=Ule(t(l));return isNaN(c)?s:n?Math.round(c):c}return a.invert=function(l){return t.invert(WT(l))},a.domain=function(l){return arguments.length?(t.domain(l),a):t.domain()},a.range=function(l){return arguments.length?(t.range((r=Array.from(l,pp)).map(WT)),a):r.slice()},a.rangeRound=function(l){return a.range(l).round(!0)},a.round=function(l){return arguments.length?(n=!!l,a):n},a.clamp=function(l){return arguments.length?(t.clamp(l),a):t.clamp()},a.unknown=function(l){return arguments.length?(s=l,a):s},a.copy=function(){return i$(t.domain(),r).round(n).clamp(t.clamp()).unknown(s)},Wa.apply(a,arguments),_o(a)}function l$(){var t=[],r=[],n=[],s;function a(){var c=0,u=Math.max(1,r.length);for(n=new Array(u-1);++c<u;)n[c-1]=Hie(t,c/u);return l}function l(c){return c==null||isNaN(c=+c)?s:r[jh(n,c)]}return l.invertExtent=function(c){var u=r.indexOf(c);return u<0?[NaN,NaN]:[u>0?n[u-1]:t[0],u<n.length?n[u]:t[t.length-1]]},l.domain=function(c){if(!arguments.length)return t.slice();t=[];for(let u of c)u!=null&&!isNaN(u=+u)&&t.push(u);return t.sort(mo),a()},l.range=function(c){return arguments.length?(r=Array.from(c),a()):r.slice()},l.unknown=function(c){return arguments.length?(s=c,l):s},l.quantiles=function(){return n.slice()},l.copy=function(){return l$().domain(t).range(r).unknown(s)},Wa.apply(l,arguments)}function o$(){var t=0,r=1,n=1,s=[.5],a=[0,1],l;function c(d){return d!=null&&d<=d?a[jh(s,d,0,n)]:l}function u(){var d=-1;for(s=new Array(n);++d<n;)s[d]=((d+1)*r-(d-n)*t)/(n+1);return c}return c.domain=function(d){return arguments.length?([t,r]=d,t=+t,r=+r,u()):[t,r]},c.range=function(d){return arguments.length?(n=(a=Array.from(d)).length-1,u()):a.slice()},c.invertExtent=function(d){var h=a.indexOf(d);return h<0?[NaN,NaN]:h<1?[t,s[0]]:h>=n?[s[n-1],r]:[s[h-1],s[h]]},c.unknown=function(d){return arguments.length&&(l=d),c},c.thresholds=function(){return s.slice()},c.copy=function(){return o$().domain([t,r]).range(a).unknown(l)},Wa.apply(_o(c),arguments)}function c$(){var t=[.5],r=[0,1],n,s=1;function a(l){return l!=null&&l<=l?r[jh(t,l,0,s)]:n}return a.domain=function(l){return arguments.length?(t=Array.from(l),s=Math.min(t.length,r.length-1),a):t.slice()},a.range=function(l){return arguments.length?(r=Array.from(l),s=Math.min(t.length,r.length-1),a):r.slice()},a.invertExtent=function(l){var c=r.indexOf(l);return[t[c-1],t[c]]},a.unknown=function(l){return arguments.length?(n=l,a):n},a.copy=function(){return c$().domain(t).range(r).unknown(n)},Wa.apply(a,arguments)}const Lb=new Date,Ib=new Date;function Vn(t,r,n,s){function a(l){return t(l=arguments.length===0?new Date:new Date(+l)),l}return a.floor=l=>(t(l=new Date(+l)),l),a.ceil=l=>(t(l=new Date(l-1)),r(l,1),t(l),l),a.round=l=>{const c=a(l),u=a.ceil(l);return l-c<u-l?c:u},a.offset=(l,c)=>(r(l=new Date(+l),c==null?1:Math.floor(c)),l),a.range=(l,c,u)=>{const d=[];if(l=a.ceil(l),u=u==null?1:Math.floor(u),!(l<c)||!(u>0))return d;let h;do d.push(h=new Date(+l)),r(l,u),t(l);while(h<l&&l<c);return d},a.filter=l=>Vn(c=>{if(c>=c)for(;t(c),!l(c);)c.setTime(c-1)},(c,u)=>{if(c>=c)if(u<0)for(;++u<=0;)for(;r(c,-1),!l(c););else for(;--u>=0;)for(;r(c,1),!l(c););}),n&&(a.count=(l,c)=>(Lb.setTime(+l),Ib.setTime(+c),t(Lb),t(Ib),Math.floor(n(Lb,Ib))),a.every=l=>(l=Math.floor(l),!isFinite(l)||!(l>0)?null:l>1?a.filter(s?c=>s(c)%l===0:c=>a.count(0,c)%l===0):a)),a}const yp=Vn(()=>{},(t,r)=>{t.setTime(+t+r)},(t,r)=>r-t);yp.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Vn(r=>{r.setTime(Math.floor(r/t)*t)},(r,n)=>{r.setTime(+r+n*t)},(r,n)=>(n-r)/t):yp);yp.range;const tl=1e3,Ra=tl*60,rl=Ra*60,yl=rl*24,H_=yl*7,HT=yl*30,$b=yl*365,rc=Vn(t=>{t.setTime(t-t.getMilliseconds())},(t,r)=>{t.setTime(+t+r*tl)},(t,r)=>(r-t)/tl,t=>t.getUTCSeconds());rc.range;const V_=Vn(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*tl)},(t,r)=>{t.setTime(+t+r*Ra)},(t,r)=>(r-t)/Ra,t=>t.getMinutes());V_.range;const Y_=Vn(t=>{t.setUTCSeconds(0,0)},(t,r)=>{t.setTime(+t+r*Ra)},(t,r)=>(r-t)/Ra,t=>t.getUTCMinutes());Y_.range;const K_=Vn(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*tl-t.getMinutes()*Ra)},(t,r)=>{t.setTime(+t+r*rl)},(t,r)=>(r-t)/rl,t=>t.getHours());K_.range;const G_=Vn(t=>{t.setUTCMinutes(0,0,0)},(t,r)=>{t.setTime(+t+r*rl)},(t,r)=>(r-t)/rl,t=>t.getUTCHours());G_.range;const Nh=Vn(t=>t.setHours(0,0,0,0),(t,r)=>t.setDate(t.getDate()+r),(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*Ra)/yl,t=>t.getDate()-1);Nh.range;const Cg=Vn(t=>{t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r)},(t,r)=>(r-t)/yl,t=>t.getUTCDate()-1);Cg.range;const d$=Vn(t=>{t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r)},(t,r)=>(r-t)/yl,t=>Math.floor(t/yl));d$.range;function Ec(t){return Vn(r=>{r.setDate(r.getDate()-(r.getDay()+7-t)%7),r.setHours(0,0,0,0)},(r,n)=>{r.setDate(r.getDate()+n*7)},(r,n)=>(n-r-(n.getTimezoneOffset()-r.getTimezoneOffset())*Ra)/H_)}const Sg=Ec(0),vp=Ec(1),zle=Ec(2),Ble=Ec(3),zd=Ec(4),Wle=Ec(5),Hle=Ec(6);Sg.range;vp.range;zle.range;Ble.range;zd.range;Wle.range;Hle.range;function Mc(t){return Vn(r=>{r.setUTCDate(r.getUTCDate()-(r.getUTCDay()+7-t)%7),r.setUTCHours(0,0,0,0)},(r,n)=>{r.setUTCDate(r.getUTCDate()+n*7)},(r,n)=>(n-r)/H_)}const kg=Mc(0),jp=Mc(1),Vle=Mc(2),Yle=Mc(3),Bd=Mc(4),Kle=Mc(5),Gle=Mc(6);kg.range;jp.range;Vle.range;Yle.range;Bd.range;Kle.range;Gle.range;const Q_=Vn(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,r)=>{t.setMonth(t.getMonth()+r)},(t,r)=>r.getMonth()-t.getMonth()+(r.getFullYear()-t.getFullYear())*12,t=>t.getMonth());Q_.range;const X_=Vn(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCMonth(t.getUTCMonth()+r)},(t,r)=>r.getUTCMonth()-t.getUTCMonth()+(r.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());X_.range;const vl=Vn(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r)},(t,r)=>r.getFullYear()-t.getFullYear(),t=>t.getFullYear());vl.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Vn(r=>{r.setFullYear(Math.floor(r.getFullYear()/t)*t),r.setMonth(0,1),r.setHours(0,0,0,0)},(r,n)=>{r.setFullYear(r.getFullYear()+n*t)});vl.range;const jl=Vn(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r)},(t,r)=>r.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());jl.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Vn(r=>{r.setUTCFullYear(Math.floor(r.getUTCFullYear()/t)*t),r.setUTCMonth(0,1),r.setUTCHours(0,0,0,0)},(r,n)=>{r.setUTCFullYear(r.getUTCFullYear()+n*t)});jl.range;function u$(t,r,n,s,a,l){const c=[[rc,1,tl],[rc,5,5*tl],[rc,15,15*tl],[rc,30,30*tl],[l,1,Ra],[l,5,5*Ra],[l,15,15*Ra],[l,30,30*Ra],[a,1,rl],[a,3,3*rl],[a,6,6*rl],[a,12,12*rl],[s,1,yl],[s,2,2*yl],[n,1,H_],[r,1,HT],[r,3,3*HT],[t,1,$b]];function u(h,x,p){const y=x<h;y&&([h,x]=[x,h]);const v=p&&typeof p.range=="function"?p:d(h,x,p),w=v?v.range(h,+x+1):[];return y?w.reverse():w}function d(h,x,p){const y=Math.abs(x-h)/p,v=O_(([,,N])=>N).right(c,y);if(v===c.length)return t.every(gw(h/$b,x/$b,p));if(v===0)return yp.every(Math.max(gw(h,x,p),1));const[w,b]=c[y/c[v-1][2]<c[v][2]/y?v-1:v];return w.every(b)}return[u,d]}const[Qle,Xle]=u$(jl,X_,kg,d$,G_,Y_),[Zle,Jle]=u$(vl,Q_,Sg,Nh,K_,V_);function Fb(t){if(0<=t.y&&t.y<100){var r=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return r.setFullYear(t.y),r}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function qb(t){if(0<=t.y&&t.y<100){var r=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return r.setUTCFullYear(t.y),r}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function ym(t,r,n){return{y:t,m:r,d:n,H:0,M:0,S:0,L:0}}function eoe(t){var r=t.dateTime,n=t.date,s=t.time,a=t.periods,l=t.days,c=t.shortDays,u=t.months,d=t.shortMonths,h=vm(a),x=jm(a),p=vm(l),y=jm(l),v=vm(c),w=jm(c),b=vm(u),N=jm(u),_=vm(d),S=jm(d),k={a:B,A:L,b:T,B:F,c:null,d:XT,e:XT,f:Noe,g:Poe,G:Roe,H:joe,I:boe,j:woe,L:m$,m:_oe,M:Coe,p:I,q:Q,Q:e4,s:t4,S:Soe,u:koe,U:Aoe,V:Eoe,w:Moe,W:Toe,x:null,X:null,y:Ooe,Y:Doe,Z:Loe,"%":JT},E={a:W,A:ee,b:ye,B:he,c:null,d:ZT,e:ZT,f:qoe,g:Qoe,G:Zoe,H:Ioe,I:$oe,j:Foe,L:f$,m:Uoe,M:zoe,p:te,q:De,Q:e4,s:t4,S:Boe,u:Woe,U:Hoe,V:Voe,w:Yoe,W:Koe,x:null,X:null,y:Goe,Y:Xoe,Z:Joe,"%":JT},A={a:J,A:ie,b:V,B:xe,c:pe,d:GT,e:GT,f:poe,g:KT,G:YT,H:QT,I:QT,j:moe,L:xoe,m:uoe,M:hoe,p:G,q:doe,Q:yoe,s:voe,S:foe,u:aoe,U:ioe,V:loe,w:soe,W:ooe,x:re,X:M,y:KT,Y:YT,Z:coe,"%":goe};k.x=O(n,k),k.X=O(s,k),k.c=O(r,k),E.x=O(n,E),E.X=O(s,E),E.c=O(r,E);function O(ne,$e){return function(ge){var we=[],_e=-1,Ye=0,ht=ne.length,Ve,lt,yt;for(ge instanceof Date||(ge=new Date(+ge));++_e<ht;)ne.charCodeAt(_e)===37&&(we.push(ne.slice(Ye,_e)),(lt=VT[Ve=ne.charAt(++_e)])!=null?Ve=ne.charAt(++_e):lt=Ve==="e"?" ":"0",(yt=$e[Ve])&&(Ve=yt(ge,lt)),we.push(Ve),Ye=_e+1);return we.push(ne.slice(Ye,_e)),we.join("")}}function z(ne,$e){return function(ge){var we=ym(1900,void 0,1),_e=R(we,ne,ge+="",0),Ye,ht;if(_e!=ge.length)return null;if("Q"in we)return new Date(we.Q);if("s"in we)return new Date(we.s*1e3+("L"in we?we.L:0));if($e&&!("Z"in we)&&(we.Z=0),"p"in we&&(we.H=we.H%12+we.p*12),we.m===void 0&&(we.m="q"in we?we.q:0),"V"in we){if(we.V<1||we.V>53)return null;"w"in we||(we.w=1),"Z"in we?(Ye=qb(ym(we.y,0,1)),ht=Ye.getUTCDay(),Ye=ht>4||ht===0?jp.ceil(Ye):jp(Ye),Ye=Cg.offset(Ye,(we.V-1)*7),we.y=Ye.getUTCFullYear(),we.m=Ye.getUTCMonth(),we.d=Ye.getUTCDate()+(we.w+6)%7):(Ye=Fb(ym(we.y,0,1)),ht=Ye.getDay(),Ye=ht>4||ht===0?vp.ceil(Ye):vp(Ye),Ye=Nh.offset(Ye,(we.V-1)*7),we.y=Ye.getFullYear(),we.m=Ye.getMonth(),we.d=Ye.getDate()+(we.w+6)%7)}else("W"in we||"U"in we)&&("w"in we||(we.w="u"in we?we.u%7:"W"in we?1:0),ht="Z"in we?qb(ym(we.y,0,1)).getUTCDay():Fb(ym(we.y,0,1)).getDay(),we.m=0,we.d="W"in we?(we.w+6)%7+we.W*7-(ht+5)%7:we.w+we.U*7-(ht+6)%7);return"Z"in we?(we.H+=we.Z/100|0,we.M+=we.Z%100,qb(we)):Fb(we)}}function R(ne,$e,ge,we){for(var _e=0,Ye=$e.length,ht=ge.length,Ve,lt;_e<Ye;){if(we>=ht)return-1;if(Ve=$e.charCodeAt(_e++),Ve===37){if(Ve=$e.charAt(_e++),lt=A[Ve in VT?$e.charAt(_e++):Ve],!lt||(we=lt(ne,ge,we))<0)return-1}else if(Ve!=ge.charCodeAt(we++))return-1}return we}function G(ne,$e,ge){var we=h.exec($e.slice(ge));return we?(ne.p=x.get(we[0].toLowerCase()),ge+we[0].length):-1}function J(ne,$e,ge){var we=v.exec($e.slice(ge));return we?(ne.w=w.get(we[0].toLowerCase()),ge+we[0].length):-1}function ie(ne,$e,ge){var we=p.exec($e.slice(ge));return we?(ne.w=y.get(we[0].toLowerCase()),ge+we[0].length):-1}function V(ne,$e,ge){var we=_.exec($e.slice(ge));return we?(ne.m=S.get(we[0].toLowerCase()),ge+we[0].length):-1}function xe(ne,$e,ge){var we=b.exec($e.slice(ge));return we?(ne.m=N.get(we[0].toLowerCase()),ge+we[0].length):-1}function pe(ne,$e,ge){return R(ne,r,$e,ge)}function re(ne,$e,ge){return R(ne,n,$e,ge)}function M(ne,$e,ge){return R(ne,s,$e,ge)}function B(ne){return c[ne.getDay()]}function L(ne){return l[ne.getDay()]}function T(ne){return d[ne.getMonth()]}function F(ne){return u[ne.getMonth()]}function I(ne){return a[+(ne.getHours()>=12)]}function Q(ne){return 1+~~(ne.getMonth()/3)}function W(ne){return c[ne.getUTCDay()]}function ee(ne){return l[ne.getUTCDay()]}function ye(ne){return d[ne.getUTCMonth()]}function he(ne){return u[ne.getUTCMonth()]}function te(ne){return a[+(ne.getUTCHours()>=12)]}function De(ne){return 1+~~(ne.getUTCMonth()/3)}return{format:function(ne){var $e=O(ne+="",k);return $e.toString=function(){return ne},$e},parse:function(ne){var $e=z(ne+="",!1);return $e.toString=function(){return ne},$e},utcFormat:function(ne){var $e=O(ne+="",E);return $e.toString=function(){return ne},$e},utcParse:function(ne){var $e=z(ne+="",!0);return $e.toString=function(){return ne},$e}}}var VT={"-":"",_:" ",0:"0"},ls=/^\s*\d+/,toe=/^%/,roe=/[\\^$*+?|[\]().{}]/g;function Or(t,r,n){var s=t<0?"-":"",a=(s?-t:t)+"",l=a.length;return s+(l<n?new Array(n-l+1).join(r)+a:a)}function noe(t){return t.replace(roe,"\\$&")}function vm(t){return new RegExp("^(?:"+t.map(noe).join("|")+")","i")}function jm(t){return new Map(t.map((r,n)=>[r.toLowerCase(),n]))}function soe(t,r,n){var s=ls.exec(r.slice(n,n+1));return s?(t.w=+s[0],n+s[0].length):-1}function aoe(t,r,n){var s=ls.exec(r.slice(n,n+1));return s?(t.u=+s[0],n+s[0].length):-1}function ioe(t,r,n){var s=ls.exec(r.slice(n,n+2));return s?(t.U=+s[0],n+s[0].length):-1}function loe(t,r,n){var s=ls.exec(r.slice(n,n+2));return s?(t.V=+s[0],n+s[0].length):-1}function ooe(t,r,n){var s=ls.exec(r.slice(n,n+2));return s?(t.W=+s[0],n+s[0].length):-1}function YT(t,r,n){var s=ls.exec(r.slice(n,n+4));return s?(t.y=+s[0],n+s[0].length):-1}function KT(t,r,n){var s=ls.exec(r.slice(n,n+2));return s?(t.y=+s[0]+(+s[0]>68?1900:2e3),n+s[0].length):-1}function coe(t,r,n){var s=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(r.slice(n,n+6));return s?(t.Z=s[1]?0:-(s[2]+(s[3]||"00")),n+s[0].length):-1}function doe(t,r,n){var s=ls.exec(r.slice(n,n+1));return s?(t.q=s[0]*3-3,n+s[0].length):-1}function uoe(t,r,n){var s=ls.exec(r.slice(n,n+2));return s?(t.m=s[0]-1,n+s[0].length):-1}function GT(t,r,n){var s=ls.exec(r.slice(n,n+2));return s?(t.d=+s[0],n+s[0].length):-1}function moe(t,r,n){var s=ls.exec(r.slice(n,n+3));return s?(t.m=0,t.d=+s[0],n+s[0].length):-1}function QT(t,r,n){var s=ls.exec(r.slice(n,n+2));return s?(t.H=+s[0],n+s[0].length):-1}function hoe(t,r,n){var s=ls.exec(r.slice(n,n+2));return s?(t.M=+s[0],n+s[0].length):-1}function foe(t,r,n){var s=ls.exec(r.slice(n,n+2));return s?(t.S=+s[0],n+s[0].length):-1}function xoe(t,r,n){var s=ls.exec(r.slice(n,n+3));return s?(t.L=+s[0],n+s[0].length):-1}function poe(t,r,n){var s=ls.exec(r.slice(n,n+6));return s?(t.L=Math.floor(s[0]/1e3),n+s[0].length):-1}function goe(t,r,n){var s=toe.exec(r.slice(n,n+1));return s?n+s[0].length:-1}function yoe(t,r,n){var s=ls.exec(r.slice(n));return s?(t.Q=+s[0],n+s[0].length):-1}function voe(t,r,n){var s=ls.exec(r.slice(n));return s?(t.s=+s[0],n+s[0].length):-1}function XT(t,r){return Or(t.getDate(),r,2)}function joe(t,r){return Or(t.getHours(),r,2)}function boe(t,r){return Or(t.getHours()%12||12,r,2)}function woe(t,r){return Or(1+Nh.count(vl(t),t),r,3)}function m$(t,r){return Or(t.getMilliseconds(),r,3)}function Noe(t,r){return m$(t,r)+"000"}function _oe(t,r){return Or(t.getMonth()+1,r,2)}function Coe(t,r){return Or(t.getMinutes(),r,2)}function Soe(t,r){return Or(t.getSeconds(),r,2)}function koe(t){var r=t.getDay();return r===0?7:r}function Aoe(t,r){return Or(Sg.count(vl(t)-1,t),r,2)}function h$(t){var r=t.getDay();return r>=4||r===0?zd(t):zd.ceil(t)}function Eoe(t,r){return t=h$(t),Or(zd.count(vl(t),t)+(vl(t).getDay()===4),r,2)}function Moe(t){return t.getDay()}function Toe(t,r){return Or(vp.count(vl(t)-1,t),r,2)}function Ooe(t,r){return Or(t.getFullYear()%100,r,2)}function Poe(t,r){return t=h$(t),Or(t.getFullYear()%100,r,2)}function Doe(t,r){return Or(t.getFullYear()%1e4,r,4)}function Roe(t,r){var n=t.getDay();return t=n>=4||n===0?zd(t):zd.ceil(t),Or(t.getFullYear()%1e4,r,4)}function Loe(t){var r=t.getTimezoneOffset();return(r>0?"-":(r*=-1,"+"))+Or(r/60|0,"0",2)+Or(r%60,"0",2)}function ZT(t,r){return Or(t.getUTCDate(),r,2)}function Ioe(t,r){return Or(t.getUTCHours(),r,2)}function $oe(t,r){return Or(t.getUTCHours()%12||12,r,2)}function Foe(t,r){return Or(1+Cg.count(jl(t),t),r,3)}function f$(t,r){return Or(t.getUTCMilliseconds(),r,3)}function qoe(t,r){return f$(t,r)+"000"}function Uoe(t,r){return Or(t.getUTCMonth()+1,r,2)}function zoe(t,r){return Or(t.getUTCMinutes(),r,2)}function Boe(t,r){return Or(t.getUTCSeconds(),r,2)}function Woe(t){var r=t.getUTCDay();return r===0?7:r}function Hoe(t,r){return Or(kg.count(jl(t)-1,t),r,2)}function x$(t){var r=t.getUTCDay();return r>=4||r===0?Bd(t):Bd.ceil(t)}function Voe(t,r){return t=x$(t),Or(Bd.count(jl(t),t)+(jl(t).getUTCDay()===4),r,2)}function Yoe(t){return t.getUTCDay()}function Koe(t,r){return Or(jp.count(jl(t)-1,t),r,2)}function Goe(t,r){return Or(t.getUTCFullYear()%100,r,2)}function Qoe(t,r){return t=x$(t),Or(t.getUTCFullYear()%100,r,2)}function Xoe(t,r){return Or(t.getUTCFullYear()%1e4,r,4)}function Zoe(t,r){var n=t.getUTCDay();return t=n>=4||n===0?Bd(t):Bd.ceil(t),Or(t.getUTCFullYear()%1e4,r,4)}function Joe(){return"+0000"}function JT(){return"%"}function e4(t){return+t}function t4(t){return Math.floor(+t/1e3)}var bd,p$,g$;ece({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function ece(t){return bd=eoe(t),p$=bd.format,bd.parse,g$=bd.utcFormat,bd.utcParse,bd}function tce(t){return new Date(t)}function rce(t){return t instanceof Date?+t:+new Date(+t)}function Z_(t,r,n,s,a,l,c,u,d,h){var x=$_(),p=x.invert,y=x.domain,v=h(".%L"),w=h(":%S"),b=h("%I:%M"),N=h("%I %p"),_=h("%a %d"),S=h("%b %d"),k=h("%B"),E=h("%Y");function A(O){return(d(O)<O?v:u(O)<O?w:c(O)<O?b:l(O)<O?N:s(O)<O?a(O)<O?_:S:n(O)<O?k:E)(O)}return x.invert=function(O){return new Date(p(O))},x.domain=function(O){return arguments.length?y(Array.from(O,rce)):y().map(tce)},x.ticks=function(O){var z=y();return t(z[0],z[z.length-1],O??10)},x.tickFormat=function(O,z){return z==null?A:h(z)},x.nice=function(O){var z=y();return(!O||typeof O.range!="function")&&(O=r(z[0],z[z.length-1],O??10)),O?y(n$(z,O)):x},x.copy=function(){return wh(x,Z_(t,r,n,s,a,l,c,u,d,h))},x}function nce(){return Wa.apply(Z_(Zle,Jle,vl,Q_,Sg,Nh,K_,V_,rc,p$).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function sce(){return Wa.apply(Z_(Qle,Xle,jl,X_,kg,Cg,G_,Y_,rc,g$).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Ag(){var t=0,r=1,n,s,a,l,c=Ms,u=!1,d;function h(p){return p==null||isNaN(p=+p)?d:c(a===0?.5:(p=(l(p)-n)*a,u?Math.max(0,Math.min(1,p)):p))}h.domain=function(p){return arguments.length?([t,r]=p,n=l(t=+t),s=l(r=+r),a=n===s?0:1/(s-n),h):[t,r]},h.clamp=function(p){return arguments.length?(u=!!p,h):u},h.interpolator=function(p){return arguments.length?(c=p,h):c};function x(p){return function(y){var v,w;return arguments.length?([v,w]=y,c=p(v,w),h):[c(0),c(1)]}}return h.range=x(nu),h.rangeRound=x(I_),h.unknown=function(p){return arguments.length?(d=p,h):d},function(p){return l=p,n=p(t),s=p(r),a=n===s?0:1/(s-n),h}}function Co(t,r){return r.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function y$(){var t=_o(Ag()(Ms));return t.copy=function(){return Co(t,y$())},Sl.apply(t,arguments)}function v$(){var t=U_(Ag()).domain([1,10]);return t.copy=function(){return Co(t,v$()).base(t.base())},Sl.apply(t,arguments)}function j$(){var t=z_(Ag());return t.copy=function(){return Co(t,j$()).constant(t.constant())},Sl.apply(t,arguments)}function J_(){var t=B_(Ag());return t.copy=function(){return Co(t,J_()).exponent(t.exponent())},Sl.apply(t,arguments)}function ace(){return J_.apply(null,arguments).exponent(.5)}function b$(){var t=[],r=Ms;function n(s){if(s!=null&&!isNaN(s=+s))return r((jh(t,s,1)-1)/(t.length-1))}return n.domain=function(s){if(!arguments.length)return t.slice();t=[];for(let a of s)a!=null&&!isNaN(a=+a)&&t.push(a);return t.sort(mo),n},n.interpolator=function(s){return arguments.length?(r=s,n):r},n.range=function(){return t.map((s,a)=>r(a/(t.length-1)))},n.quantiles=function(s){return Array.from({length:s+1},(a,l)=>Wie(t,l/s))},n.copy=function(){return b$(r).domain(t)},Sl.apply(n,arguments)}function Eg(){var t=0,r=.5,n=1,s=1,a,l,c,u,d,h=Ms,x,p=!1,y;function v(b){return isNaN(b=+b)?y:(b=.5+((b=+x(b))-l)*(s*b<s*l?u:d),h(p?Math.max(0,Math.min(1,b)):b))}v.domain=function(b){return arguments.length?([t,r,n]=b,a=x(t=+t),l=x(r=+r),c=x(n=+n),u=a===l?0:.5/(l-a),d=l===c?0:.5/(c-l),s=l<a?-1:1,v):[t,r,n]},v.clamp=function(b){return arguments.length?(p=!!b,v):p},v.interpolator=function(b){return arguments.length?(h=b,v):h};function w(b){return function(N){var _,S,k;return arguments.length?([_,S,k]=N,h=gle(b,[_,S,k]),v):[h(0),h(.5),h(1)]}}return v.range=w(nu),v.rangeRound=w(I_),v.unknown=function(b){return arguments.length?(y=b,v):y},function(b){return x=b,a=b(t),l=b(r),c=b(n),u=a===l?0:.5/(l-a),d=l===c?0:.5/(c-l),s=l<a?-1:1,v}}function w$(){var t=_o(Eg()(Ms));return t.copy=function(){return Co(t,w$())},Sl.apply(t,arguments)}function N$(){var t=U_(Eg()).domain([.1,1,10]);return t.copy=function(){return Co(t,N$()).base(t.base())},Sl.apply(t,arguments)}function _$(){var t=z_(Eg());return t.copy=function(){return Co(t,_$()).constant(t.constant())},Sl.apply(t,arguments)}function e1(){var t=B_(Eg());return t.copy=function(){return Co(t,e1()).exponent(t.exponent())},Sl.apply(t,arguments)}function ice(){return e1.apply(null,arguments).exponent(.5)}const km=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:D_,scaleDiverging:w$,scaleDivergingLog:N$,scaleDivergingPow:e1,scaleDivergingSqrt:ice,scaleDivergingSymlog:_$,scaleIdentity:r$,scaleImplicit:yw,scaleLinear:t$,scaleLog:s$,scaleOrdinal:P_,scalePoint:Yie,scalePow:W_,scaleQuantile:l$,scaleQuantize:o$,scaleRadial:i$,scaleSequential:y$,scaleSequentialLog:v$,scaleSequentialPow:J_,scaleSequentialQuantile:b$,scaleSequentialSqrt:ace,scaleSequentialSymlog:j$,scaleSqrt:qle,scaleSymlog:a$,scaleThreshold:c$,scaleTime:nce,scaleUtc:sce,tickFormat:e$},Symbol.toStringTag,{value:"Module"}));var So=t=>t.chartData,lce=Ke([So],t=>{var r=t.chartData!=null?t.chartData.length-1:0;return{chartData:t.chartData,computedData:t.computedData,dataEndIndex:r,dataStartIndex:0}}),t1=(t,r,n,s)=>s?lce(t):So(t);function Wd(t){if(Array.isArray(t)&&t.length===2){var[r,n]=t;if(Ds(r)&&Ds(n))return!0}return!1}function r4(t,r,n){return n?t:[Math.min(t[0],r[0]),Math.max(t[1],r[1])]}function oce(t,r){if(r&&typeof t!="function"&&Array.isArray(t)&&t.length===2){var[n,s]=t,a,l;if(Ds(n))a=n;else if(typeof n=="function")return;if(Ds(s))l=s;else if(typeof s=="function")return;var c=[a,l];if(Wd(c))return c}}function cce(t,r,n){if(!(!n&&r==null)){if(typeof t=="function"&&r!=null)try{var s=t(r,n);if(Wd(s))return r4(s,r,n)}catch{}if(Array.isArray(t)&&t.length===2){var[a,l]=t,c,u;if(a==="auto")r!=null&&(c=Math.min(...r));else if(Et(a))c=a;else if(typeof a=="function")try{r!=null&&(c=a(r?.[0]))}catch{}else if(typeof a=="string"&&zM.test(a)){var d=zM.exec(a);if(d==null||r==null)c=void 0;else{var h=+d[1];c=r[0]-h}}else c=r?.[0];if(l==="auto")r!=null&&(u=Math.max(...r));else if(Et(l))u=l;else if(typeof l=="function")try{r!=null&&(u=l(r?.[1]))}catch{}else if(typeof l=="string"&&BM.test(l)){var x=BM.exec(l);if(x==null||r==null)u=void 0;else{var p=+x[1];u=r[1]+p}}else u=r?.[1];var y=[c,u];if(Wd(y))return r==null?y:r4(y,r,n)}}}var su=1e9,dce={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},n1,an=!0,qa="[DecimalError] ",oc=qa+"Invalid argument: ",r1=qa+"Exponent out of range: ",au=Math.floor,Xo=Math.pow,uce=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,ma,ts=1e7,tn=7,C$=9007199254740991,bp=au(C$/tn),_t={};_t.absoluteValue=_t.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};_t.comparedTo=_t.cmp=function(t){var r,n,s,a,l=this;if(t=new l.constructor(t),l.s!==t.s)return l.s||-t.s;if(l.e!==t.e)return l.e>t.e^l.s<0?1:-1;for(s=l.d.length,a=t.d.length,r=0,n=s<a?s:a;r<n;++r)if(l.d[r]!==t.d[r])return l.d[r]>t.d[r]^l.s<0?1:-1;return s===a?0:s>a^l.s<0?1:-1};_t.decimalPlaces=_t.dp=function(){var t=this,r=t.d.length-1,n=(r-t.e)*tn;if(r=t.d[r],r)for(;r%10==0;r/=10)n--;return n<0?0:n};_t.dividedBy=_t.div=function(t){return il(this,new this.constructor(t))};_t.dividedToIntegerBy=_t.idiv=function(t){var r=this,n=r.constructor;return Qr(il(r,new n(t),0,1),n.precision)};_t.equals=_t.eq=function(t){return!this.cmp(t)};_t.exponent=function(){return Dn(this)};_t.greaterThan=_t.gt=function(t){return this.cmp(t)>0};_t.greaterThanOrEqualTo=_t.gte=function(t){return this.cmp(t)>=0};_t.isInteger=_t.isint=function(){return this.e>this.d.length-2};_t.isNegative=_t.isneg=function(){return this.s<0};_t.isPositive=_t.ispos=function(){return this.s>0};_t.isZero=function(){return this.s===0};_t.lessThan=_t.lt=function(t){return this.cmp(t)<0};_t.lessThanOrEqualTo=_t.lte=function(t){return this.cmp(t)<1};_t.logarithm=_t.log=function(t){var r,n=this,s=n.constructor,a=s.precision,l=a+5;if(t===void 0)t=new s(10);else if(t=new s(t),t.s<1||t.eq(ma))throw Error(qa+"NaN");if(n.s<1)throw Error(qa+(n.s?"NaN":"-Infinity"));return n.eq(ma)?new s(0):(an=!1,r=il(Vm(n,l),Vm(t,l),l),an=!0,Qr(r,a))};_t.minus=_t.sub=function(t){var r=this;return t=new r.constructor(t),r.s==t.s?A$(r,t):S$(r,(t.s=-t.s,t))};_t.modulo=_t.mod=function(t){var r,n=this,s=n.constructor,a=s.precision;if(t=new s(t),!t.s)throw Error(qa+"NaN");return n.s?(an=!1,r=il(n,t,0,1).times(t),an=!0,n.minus(r)):Qr(new s(n),a)};_t.naturalExponential=_t.exp=function(){return k$(this)};_t.naturalLogarithm=_t.ln=function(){return Vm(this)};_t.negated=_t.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};_t.plus=_t.add=function(t){var r=this;return t=new r.constructor(t),r.s==t.s?S$(r,t):A$(r,(t.s=-t.s,t))};_t.precision=_t.sd=function(t){var r,n,s,a=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(oc+t);if(r=Dn(a)+1,s=a.d.length-1,n=s*tn+1,s=a.d[s],s){for(;s%10==0;s/=10)n--;for(s=a.d[0];s>=10;s/=10)n++}return t&&r>n?r:n};_t.squareRoot=_t.sqrt=function(){var t,r,n,s,a,l,c,u=this,d=u.constructor;if(u.s<1){if(!u.s)return new d(0);throw Error(qa+"NaN")}for(t=Dn(u),an=!1,a=Math.sqrt(+u),a==0||a==1/0?(r=wi(u.d),(r.length+t)%2==0&&(r+="0"),a=Math.sqrt(r),t=au((t+1)/2)-(t<0||t%2),a==1/0?r="5e"+t:(r=a.toExponential(),r=r.slice(0,r.indexOf("e")+1)+t),s=new d(r)):s=new d(a.toString()),n=d.precision,a=c=n+3;;)if(l=s,s=l.plus(il(u,l,c+2)).times(.5),wi(l.d).slice(0,c)===(r=wi(s.d)).slice(0,c)){if(r=r.slice(c-3,c+1),a==c&&r=="4999"){if(Qr(l,n+1,0),l.times(l).eq(u)){s=l;break}}else if(r!="9999")break;c+=4}return an=!0,Qr(s,n)};_t.times=_t.mul=function(t){var r,n,s,a,l,c,u,d,h,x=this,p=x.constructor,y=x.d,v=(t=new p(t)).d;if(!x.s||!t.s)return new p(0);for(t.s*=x.s,n=x.e+t.e,d=y.length,h=v.length,d<h&&(l=y,y=v,v=l,c=d,d=h,h=c),l=[],c=d+h,s=c;s--;)l.push(0);for(s=h;--s>=0;){for(r=0,a=d+s;a>s;)u=l[a]+v[s]*y[a-s-1]+r,l[a--]=u%ts|0,r=u/ts|0;l[a]=(l[a]+r)%ts|0}for(;!l[--c];)l.pop();return r?++n:l.shift(),t.d=l,t.e=n,an?Qr(t,p.precision):t};_t.toDecimalPlaces=_t.todp=function(t,r){var n=this,s=n.constructor;return n=new s(n),t===void 0?n:(Pi(t,0,su),r===void 0?r=s.rounding:Pi(r,0,8),Qr(n,t+Dn(n)+1,r))};_t.toExponential=function(t,r){var n,s=this,a=s.constructor;return t===void 0?n=wc(s,!0):(Pi(t,0,su),r===void 0?r=a.rounding:Pi(r,0,8),s=Qr(new a(s),t+1,r),n=wc(s,!0,t+1)),n};_t.toFixed=function(t,r){var n,s,a=this,l=a.constructor;return t===void 0?wc(a):(Pi(t,0,su),r===void 0?r=l.rounding:Pi(r,0,8),s=Qr(new l(a),t+Dn(a)+1,r),n=wc(s.abs(),!1,t+Dn(s)+1),a.isneg()&&!a.isZero()?"-"+n:n)};_t.toInteger=_t.toint=function(){var t=this,r=t.constructor;return Qr(new r(t),Dn(t)+1,r.rounding)};_t.toNumber=function(){return+this};_t.toPower=_t.pow=function(t){var r,n,s,a,l,c,u=this,d=u.constructor,h=12,x=+(t=new d(t));if(!t.s)return new d(ma);if(u=new d(u),!u.s){if(t.s<1)throw Error(qa+"Infinity");return u}if(u.eq(ma))return u;if(s=d.precision,t.eq(ma))return Qr(u,s);if(r=t.e,n=t.d.length-1,c=r>=n,l=u.s,c){if((n=x<0?-x:x)<=C$){for(a=new d(ma),r=Math.ceil(s/tn+4),an=!1;n%2&&(a=a.times(u),s4(a.d,r)),n=au(n/2),n!==0;)u=u.times(u),s4(u.d,r);return an=!0,t.s<0?new d(ma).div(a):Qr(a,s)}}else if(l<0)throw Error(qa+"NaN");return l=l<0&&t.d[Math.max(r,n)]&1?-1:1,u.s=1,an=!1,a=t.times(Vm(u,s+h)),an=!0,a=k$(a),a.s=l,a};_t.toPrecision=function(t,r){var n,s,a=this,l=a.constructor;return t===void 0?(n=Dn(a),s=wc(a,n<=l.toExpNeg||n>=l.toExpPos)):(Pi(t,1,su),r===void 0?r=l.rounding:Pi(r,0,8),a=Qr(new l(a),t,r),n=Dn(a),s=wc(a,t<=n||n<=l.toExpNeg,t)),s};_t.toSignificantDigits=_t.tosd=function(t,r){var n=this,s=n.constructor;return t===void 0?(t=s.precision,r=s.rounding):(Pi(t,1,su),r===void 0?r=s.rounding:Pi(r,0,8)),Qr(new s(n),t,r)};_t.toString=_t.valueOf=_t.val=_t.toJSON=_t[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,r=Dn(t),n=t.constructor;return wc(t,r<=n.toExpNeg||r>=n.toExpPos)};function S$(t,r){var n,s,a,l,c,u,d,h,x=t.constructor,p=x.precision;if(!t.s||!r.s)return r.s||(r=new x(t)),an?Qr(r,p):r;if(d=t.d,h=r.d,c=t.e,a=r.e,d=d.slice(),l=c-a,l){for(l<0?(s=d,l=-l,u=h.length):(s=h,a=c,u=d.length),c=Math.ceil(p/tn),u=c>u?c+1:u+1,l>u&&(l=u,s.length=1),s.reverse();l--;)s.push(0);s.reverse()}for(u=d.length,l=h.length,u-l<0&&(l=u,s=h,h=d,d=s),n=0;l;)n=(d[--l]=d[l]+h[l]+n)/ts|0,d[l]%=ts;for(n&&(d.unshift(n),++a),u=d.length;d[--u]==0;)d.pop();return r.d=d,r.e=a,an?Qr(r,p):r}function Pi(t,r,n){if(t!==~~t||t<r||t>n)throw Error(oc+t)}function wi(t){var r,n,s,a=t.length-1,l="",c=t[0];if(a>0){for(l+=c,r=1;r<a;r++)s=t[r]+"",n=tn-s.length,n&&(l+=so(n)),l+=s;c=t[r],s=c+"",n=tn-s.length,n&&(l+=so(n))}else if(c===0)return"0";for(;c%10===0;)c/=10;return l+c}var il=(function(){function t(s,a){var l,c=0,u=s.length;for(s=s.slice();u--;)l=s[u]*a+c,s[u]=l%ts|0,c=l/ts|0;return c&&s.unshift(c),s}function r(s,a,l,c){var u,d;if(l!=c)d=l>c?1:-1;else for(u=d=0;u<l;u++)if(s[u]!=a[u]){d=s[u]>a[u]?1:-1;break}return d}function n(s,a,l){for(var c=0;l--;)s[l]-=c,c=s[l]<a[l]?1:0,s[l]=c*ts+s[l]-a[l];for(;!s[0]&&s.length>1;)s.shift()}return function(s,a,l,c){var u,d,h,x,p,y,v,w,b,N,_,S,k,E,A,O,z,R,G=s.constructor,J=s.s==a.s?1:-1,ie=s.d,V=a.d;if(!s.s)return new G(s);if(!a.s)throw Error(qa+"Division by zero");for(d=s.e-a.e,z=V.length,A=ie.length,v=new G(J),w=v.d=[],h=0;V[h]==(ie[h]||0);)++h;if(V[h]>(ie[h]||0)&&--d,l==null?S=l=G.precision:c?S=l+(Dn(s)-Dn(a))+1:S=l,S<0)return new G(0);if(S=S/tn+2|0,h=0,z==1)for(x=0,V=V[0],S++;(h<A||x)&&S--;h++)k=x*ts+(ie[h]||0),w[h]=k/V|0,x=k%V|0;else{for(x=ts/(V[0]+1)|0,x>1&&(V=t(V,x),ie=t(ie,x),z=V.length,A=ie.length),E=z,b=ie.slice(0,z),N=b.length;N<z;)b[N++]=0;R=V.slice(),R.unshift(0),O=V[0],V[1]>=ts/2&&++O;do x=0,u=r(V,b,z,N),u<0?(_=b[0],z!=N&&(_=_*ts+(b[1]||0)),x=_/O|0,x>1?(x>=ts&&(x=ts-1),p=t(V,x),y=p.length,N=b.length,u=r(p,b,y,N),u==1&&(x--,n(p,z<y?R:V,y))):(x==0&&(u=x=1),p=V.slice()),y=p.length,y<N&&p.unshift(0),n(b,p,N),u==-1&&(N=b.length,u=r(V,b,z,N),u<1&&(x++,n(b,z<N?R:V,N))),N=b.length):u===0&&(x++,b=[0]),w[h++]=x,u&&b[0]?b[N++]=ie[E]||0:(b=[ie[E]],N=1);while((E++<A||b[0]!==void 0)&&S--)}return w[0]||w.shift(),v.e=d,Qr(v,c?l+Dn(v)+1:l)}})();function k$(t,r){var n,s,a,l,c,u,d=0,h=0,x=t.constructor,p=x.precision;if(Dn(t)>16)throw Error(r1+Dn(t));if(!t.s)return new x(ma);for(an=!1,u=p,c=new x(.03125);t.abs().gte(.1);)t=t.times(c),h+=5;for(s=Math.log(Xo(2,h))/Math.LN10*2+5|0,u+=s,n=a=l=new x(ma),x.precision=u;;){if(a=Qr(a.times(t),u),n=n.times(++d),c=l.plus(il(a,n,u)),wi(c.d).slice(0,u)===wi(l.d).slice(0,u)){for(;h--;)l=Qr(l.times(l),u);return x.precision=p,r==null?(an=!0,Qr(l,p)):l}l=c}}function Dn(t){for(var r=t.e*tn,n=t.d[0];n>=10;n/=10)r++;return r}function Ub(t,r,n){if(r>t.LN10.sd())throw an=!0,n&&(t.precision=n),Error(qa+"LN10 precision limit exceeded");return Qr(new t(t.LN10),r)}function so(t){for(var r="";t--;)r+="0";return r}function Vm(t,r){var n,s,a,l,c,u,d,h,x,p=1,y=10,v=t,w=v.d,b=v.constructor,N=b.precision;if(v.s<1)throw Error(qa+(v.s?"NaN":"-Infinity"));if(v.eq(ma))return new b(0);if(r==null?(an=!1,h=N):h=r,v.eq(10))return r==null&&(an=!0),Ub(b,h);if(h+=y,b.precision=h,n=wi(w),s=n.charAt(0),l=Dn(v),Math.abs(l)<15e14){for(;s<7&&s!=1||s==1&&n.charAt(1)>3;)v=v.times(t),n=wi(v.d),s=n.charAt(0),p++;l=Dn(v),s>1?(v=new b("0."+n),l++):v=new b(s+"."+n.slice(1))}else return d=Ub(b,h+2,N).times(l+""),v=Vm(new b(s+"."+n.slice(1)),h-y).plus(d),b.precision=N,r==null?(an=!0,Qr(v,N)):v;for(u=c=v=il(v.minus(ma),v.plus(ma),h),x=Qr(v.times(v),h),a=3;;){if(c=Qr(c.times(x),h),d=u.plus(il(c,new b(a),h)),wi(d.d).slice(0,h)===wi(u.d).slice(0,h))return u=u.times(2),l!==0&&(u=u.plus(Ub(b,h+2,N).times(l+""))),u=il(u,new b(p),h),b.precision=N,r==null?(an=!0,Qr(u,N)):u;u=d,a+=2}}function n4(t,r){var n,s,a;for((n=r.indexOf("."))>-1&&(r=r.replace(".","")),(s=r.search(/e/i))>0?(n<0&&(n=s),n+=+r.slice(s+1),r=r.substring(0,s)):n<0&&(n=r.length),s=0;r.charCodeAt(s)===48;)++s;for(a=r.length;r.charCodeAt(a-1)===48;)--a;if(r=r.slice(s,a),r){if(a-=s,n=n-s-1,t.e=au(n/tn),t.d=[],s=(n+1)%tn,n<0&&(s+=tn),s<a){for(s&&t.d.push(+r.slice(0,s)),a-=tn;s<a;)t.d.push(+r.slice(s,s+=tn));r=r.slice(s),s=tn-r.length}else s-=a;for(;s--;)r+="0";if(t.d.push(+r),an&&(t.e>bp||t.e<-bp))throw Error(r1+n)}else t.s=0,t.e=0,t.d=[0];return t}function Qr(t,r,n){var s,a,l,c,u,d,h,x,p=t.d;for(c=1,l=p[0];l>=10;l/=10)c++;if(s=r-c,s<0)s+=tn,a=r,h=p[x=0];else{if(x=Math.ceil((s+1)/tn),l=p.length,x>=l)return t;for(h=l=p[x],c=1;l>=10;l/=10)c++;s%=tn,a=s-tn+c}if(n!==void 0&&(l=Xo(10,c-a-1),u=h/l%10|0,d=r<0||p[x+1]!==void 0||h%l,d=n<4?(u||d)&&(n==0||n==(t.s<0?3:2)):u>5||u==5&&(n==4||d||n==6&&(s>0?a>0?h/Xo(10,c-a):0:p[x-1])%10&1||n==(t.s<0?8:7))),r<1||!p[0])return d?(l=Dn(t),p.length=1,r=r-l-1,p[0]=Xo(10,(tn-r%tn)%tn),t.e=au(-r/tn)||0):(p.length=1,p[0]=t.e=t.s=0),t;if(s==0?(p.length=x,l=1,x--):(p.length=x+1,l=Xo(10,tn-s),p[x]=a>0?(h/Xo(10,c-a)%Xo(10,a)|0)*l:0),d)for(;;)if(x==0){(p[0]+=l)==ts&&(p[0]=1,++t.e);break}else{if(p[x]+=l,p[x]!=ts)break;p[x--]=0,l=1}for(s=p.length;p[--s]===0;)p.pop();if(an&&(t.e>bp||t.e<-bp))throw Error(r1+Dn(t));return t}function A$(t,r){var n,s,a,l,c,u,d,h,x,p,y=t.constructor,v=y.precision;if(!t.s||!r.s)return r.s?r.s=-r.s:r=new y(t),an?Qr(r,v):r;if(d=t.d,p=r.d,s=r.e,h=t.e,d=d.slice(),c=h-s,c){for(x=c<0,x?(n=d,c=-c,u=p.length):(n=p,s=h,u=d.length),a=Math.max(Math.ceil(v/tn),u)+2,c>a&&(c=a,n.length=1),n.reverse(),a=c;a--;)n.push(0);n.reverse()}else{for(a=d.length,u=p.length,x=a<u,x&&(u=a),a=0;a<u;a++)if(d[a]!=p[a]){x=d[a]<p[a];break}c=0}for(x&&(n=d,d=p,p=n,r.s=-r.s),u=d.length,a=p.length-u;a>0;--a)d[u++]=0;for(a=p.length;a>c;){if(d[--a]<p[a]){for(l=a;l&&d[--l]===0;)d[l]=ts-1;--d[l],d[a]+=ts}d[a]-=p[a]}for(;d[--u]===0;)d.pop();for(;d[0]===0;d.shift())--s;return d[0]?(r.d=d,r.e=s,an?Qr(r,v):r):new y(0)}function wc(t,r,n){var s,a=Dn(t),l=wi(t.d),c=l.length;return r?(n&&(s=n-c)>0?l=l.charAt(0)+"."+l.slice(1)+so(s):c>1&&(l=l.charAt(0)+"."+l.slice(1)),l=l+(a<0?"e":"e+")+a):a<0?(l="0."+so(-a-1)+l,n&&(s=n-c)>0&&(l+=so(s))):a>=c?(l+=so(a+1-c),n&&(s=n-a-1)>0&&(l=l+"."+so(s))):((s=a+1)<c&&(l=l.slice(0,s)+"."+l.slice(s)),n&&(s=n-c)>0&&(a+1===c&&(l+="."),l+=so(s))),t.s<0?"-"+l:l}function s4(t,r){if(t.length>r)return t.length=r,!0}function E$(t){var r,n,s;function a(l){var c=this;if(!(c instanceof a))return new a(l);if(c.constructor=a,l instanceof a){c.s=l.s,c.e=l.e,c.d=(l=l.d)?l.slice():l;return}if(typeof l=="number"){if(l*0!==0)throw Error(oc+l);if(l>0)c.s=1;else if(l<0)l=-l,c.s=-1;else{c.s=0,c.e=0,c.d=[0];return}if(l===~~l&&l<1e7){c.e=0,c.d=[l];return}return n4(c,l.toString())}else if(typeof l!="string")throw Error(oc+l);if(l.charCodeAt(0)===45?(l=l.slice(1),c.s=-1):c.s=1,uce.test(l))n4(c,l);else throw Error(oc+l)}if(a.prototype=_t,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=E$,a.config=a.set=mce,t===void 0&&(t={}),t)for(s=["precision","rounding","toExpNeg","toExpPos","LN10"],r=0;r<s.length;)t.hasOwnProperty(n=s[r++])||(t[n]=this[n]);return a.config(t),a}function mce(t){if(!t||typeof t!="object")throw Error(qa+"Object expected");var r,n,s,a=["precision",1,su,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(r=0;r<a.length;r+=3)if((s=t[n=a[r]])!==void 0)if(au(s)===s&&s>=a[r+1]&&s<=a[r+2])this[n]=s;else throw Error(oc+n+": "+s);if((s=t[n="LN10"])!==void 0)if(s==Math.LN10)this[n]=new this(s);else throw Error(oc+n+": "+s);return this}var n1=E$(dce);ma=new n1(1);const qr=n1;var hce=t=>t,M$={},T$=t=>t===M$,a4=t=>function r(){return arguments.length===0||arguments.length===1&&T$(arguments.length<=0?void 0:arguments[0])?r:t(...arguments)},O$=(t,r)=>t===1?r:a4(function(){for(var n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];var l=s.filter(c=>c!==M$).length;return l>=t?r(...s):O$(t-l,a4(function(){for(var c=arguments.length,u=new Array(c),d=0;d<c;d++)u[d]=arguments[d];var h=s.map(x=>T$(x)?u.shift():x);return r(...h,...u)}))}),Mg=t=>O$(t.length,t),ww=(t,r)=>{for(var n=[],s=t;s<r;++s)n[s-t]=s;return n},fce=Mg((t,r)=>Array.isArray(r)?r.map(t):Object.keys(r).map(n=>r[n]).map(t)),xce=function(){for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];if(!n.length)return hce;var a=n.reverse(),l=a[0],c=a.slice(1);return function(){return c.reduce((u,d)=>d(u),l(...arguments))}},Nw=t=>Array.isArray(t)?t.reverse():t.split("").reverse().join(""),P$=t=>{var r=null,n=null;return function(){for(var s=arguments.length,a=new Array(s),l=0;l<s;l++)a[l]=arguments[l];return r&&a.every((c,u)=>{var d;return c===((d=r)===null||d===void 0?void 0:d[u])})||(r=a,n=t(...a)),n}};function D$(t){var r;return t===0?r=1:r=Math.floor(new qr(t).abs().log(10).toNumber())+1,r}function R$(t,r,n){for(var s=new qr(t),a=0,l=[];s.lt(r)&&a<1e5;)l.push(s.toNumber()),s=s.add(n),a++;return l}Mg((t,r,n)=>{var s=+t,a=+r;return s+n*(a-s)});Mg((t,r,n)=>{var s=r-+t;return s=s||1/0,(n-t)/s});Mg((t,r,n)=>{var s=r-+t;return s=s||1/0,Math.max(0,Math.min(1,(n-t)/s))});var L$=t=>{var[r,n]=t,[s,a]=[r,n];return r>n&&([s,a]=[n,r]),[s,a]},I$=(t,r,n)=>{if(t.lte(0))return new qr(0);var s=D$(t.toNumber()),a=new qr(10).pow(s),l=t.div(a),c=s!==1?.05:.1,u=new qr(Math.ceil(l.div(c).toNumber())).add(n).mul(c),d=u.mul(a);return r?new qr(d.toNumber()):new qr(Math.ceil(d.toNumber()))},pce=(t,r,n)=>{var s=new qr(1),a=new qr(t);if(!a.isint()&&n){var l=Math.abs(t);l<1?(s=new qr(10).pow(D$(t)-1),a=new qr(Math.floor(a.div(s).toNumber())).mul(s)):l>1&&(a=new qr(Math.floor(t)))}else t===0?a=new qr(Math.floor((r-1)/2)):n||(a=new qr(Math.floor(t)));var c=Math.floor((r-1)/2),u=xce(fce(d=>a.add(new qr(d-c).mul(s)).toNumber()),ww);return u(0,r)},$$=function(r,n,s,a){var l=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((n-r)/(s-1)))return{step:new qr(0),tickMin:new qr(0),tickMax:new qr(0)};var c=I$(new qr(n).sub(r).div(s-1),a,l),u;r<=0&&n>=0?u=new qr(0):(u=new qr(r).add(n).div(2),u=u.sub(new qr(u).mod(c)));var d=Math.ceil(u.sub(r).div(c).toNumber()),h=Math.ceil(new qr(n).sub(u).div(c).toNumber()),x=d+h+1;return x>s?$$(r,n,s,a,l+1):(x<s&&(h=n>0?h+(s-x):h,d=n>0?d:d+(s-x)),{step:c,tickMin:u.sub(new qr(d).mul(c)),tickMax:u.add(new qr(h).mul(c))})};function gce(t){var[r,n]=t,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,l=Math.max(s,2),[c,u]=L$([r,n]);if(c===-1/0||u===1/0){var d=u===1/0?[c,...ww(0,s-1).map(()=>1/0)]:[...ww(0,s-1).map(()=>-1/0),u];return r>n?Nw(d):d}if(c===u)return pce(c,s,a);var{step:h,tickMin:x,tickMax:p}=$$(c,u,l,a,0),y=R$(x,p.add(new qr(.1).mul(h)),h);return r>n?Nw(y):y}function yce(t,r){var[n,s]=t,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[l,c]=L$([n,s]);if(l===-1/0||c===1/0)return[n,s];if(l===c)return[l];var u=Math.max(r,2),d=I$(new qr(c).sub(l).div(u-1),a,0),h=[...R$(new qr(l),new qr(c),d),c];return a===!1&&(h=h.map(x=>Math.round(x))),n>s?Nw(h):h}var vce=P$(gce),jce=P$(yce),bce=t=>t.rootProps.barCategoryGap,Tg=t=>t.rootProps.stackOffset,s1=t=>t.options.chartName,a1=t=>t.rootProps.syncId,F$=t=>t.rootProps.syncMethod,i1=t=>t.options.eventEmitter,Ji={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},ca={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},Og=(t,r)=>{if(!(!t||!r))return t!=null&&t.reversed?[r[1],r[0]]:r},wce={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:Ji.angleAxisId,includeHidden:!1,name:void 0,reversed:Ji.reversed,scale:Ji.scale,tick:Ji.tick,tickCount:void 0,ticks:void 0,type:Ji.type,unit:void 0},Nce={allowDataOverflow:ca.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:ca.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:ca.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:ca.scale,tick:ca.tick,tickCount:ca.tickCount,ticks:void 0,type:ca.type,unit:void 0},_ce={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:Ji.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Ji.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Ji.scale,tick:Ji.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},Cce={allowDataOverflow:ca.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:ca.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:ca.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:ca.scale,tick:ca.tick,tickCount:ca.tickCount,ticks:void 0,type:"category",unit:void 0},l1=(t,r)=>t.polarAxis.angleAxis[r]!=null?t.polarAxis.angleAxis[r]:t.layout.layoutType==="radial"?_ce:wce,o1=(t,r)=>t.polarAxis.radiusAxis[r]!=null?t.polarAxis.radiusAxis[r]:t.layout.layoutType==="radial"?Cce:Nce,Pg=t=>t.polarOptions,c1=Ke([_l,Cl,bs],gse),q$=Ke([Pg,c1],(t,r)=>{if(t!=null)return yo(t.innerRadius,r,0)}),U$=Ke([Pg,c1],(t,r)=>{if(t!=null)return yo(t.outerRadius,r,r*.8)}),Sce=t=>{if(t==null)return[0,0];var{startAngle:r,endAngle:n}=t;return[r,n]},z$=Ke([Pg],Sce);Ke([l1,z$],Og);var B$=Ke([c1,q$,U$],(t,r,n)=>{if(!(t==null||r==null||n==null))return[r,n]});Ke([o1,B$],Og);var W$=Ke([en,Pg,q$,U$,_l,Cl],(t,r,n,s,a,l)=>{if(!(t!=="centric"&&t!=="radial"||r==null||n==null||s==null)){var{cx:c,cy:u,startAngle:d,endAngle:h}=r;return{cx:yo(c,a,a/2),cy:yo(u,l,l/2),innerRadius:n,outerRadius:s,startAngle:d,endAngle:h,clockWise:!1}}}),Ln=(t,r)=>r,Dg=(t,r,n)=>n;function d1(t){return t?.id}var Yn=t=>{var r=en(t);return r==="horizontal"?"xAxis":r==="vertical"?"yAxis":r==="centric"?"angleAxis":"radiusAxis"},iu=t=>t.tooltip.settings.axisId,Kn=t=>{var r=Yn(t),n=iu(t);return _h(t,r,n)};function H$(t,r,n){var{chartData:s=[]}=r,a=n?.dataKey,l=new Map;return t.forEach(c=>{var u,d=(u=c.data)!==null&&u!==void 0?u:s;if(!(d==null||d.length===0)){var h=d1(c);d.forEach((x,p)=>{var y=a==null?p:String(Ts(x,a,null)),v=Ts(x,c.dataKey,0),w;l.has(y)?w=l.get(y):w={},Object.assign(w,{[h]:v}),l.set(y,w)})}}),Array.from(l.values())}function u1(t){return t.stackId!=null&&t.dataKey!=null}function i4(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);r&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,s)}return n}function wp(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?i4(Object(n),!0).forEach(function(s){kce(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i4(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}function kce(t,r,n){return(r=Ace(r))in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function Ace(t){var r=Ece(t,"string");return typeof r=="symbol"?r:r+""}function Ece(t,r){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var s=n.call(t,r);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}var _w=[0,"auto"],ia={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},kl=(t,r)=>{var n=t.cartesianAxis.xAxis[r];return n??ia},la={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:_w,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:jg},ko=(t,r)=>{var n=t.cartesianAxis.yAxis[r];return n??la},Mce={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},m1=(t,r)=>{var n=t.cartesianAxis.zAxis[r];return n??Mce},Zs=(t,r,n)=>{switch(r){case"xAxis":return kl(t,n);case"yAxis":return ko(t,n);case"zAxis":return m1(t,n);case"angleAxis":return l1(t,n);case"radiusAxis":return o1(t,n);default:throw new Error("Unexpected axis type: ".concat(r))}},Tce=(t,r,n)=>{switch(r){case"xAxis":return kl(t,n);case"yAxis":return ko(t,n);default:throw new Error("Unexpected axis type: ".concat(r))}},_h=(t,r,n)=>{switch(r){case"xAxis":return kl(t,n);case"yAxis":return ko(t,n);case"angleAxis":return l1(t,n);case"radiusAxis":return o1(t,n);default:throw new Error("Unexpected axis type: ".concat(r))}},V$=t=>t.graphicalItems.cartesianItems.some(r=>r.type==="bar")||t.graphicalItems.polarItems.some(r=>r.type==="radialBar");function Y$(t,r){return n=>{switch(t){case"xAxis":return"xAxisId"in n&&n.xAxisId===r;case"yAxis":return"yAxisId"in n&&n.yAxisId===r;case"zAxis":return"zAxisId"in n&&n.zAxisId===r;case"angleAxis":return"angleAxisId"in n&&n.angleAxisId===r;case"radiusAxis":return"radiusAxisId"in n&&n.radiusAxisId===r;default:return!1}}}var K$=t=>t.graphicalItems.cartesianItems,Oce=Ke([Ln,Dg],Y$),G$=(t,r,n)=>t.filter(n).filter(s=>r?.includeHidden===!0?!0:!s.hide),Ch=Ke([K$,Zs,Oce],G$),Q$=Ke([Ch],t=>t.filter(r=>r.type==="area"||r.type==="bar").filter(u1)),X$=t=>t.filter(r=>!("stackId"in r)||r.stackId===void 0),Z$=Ke([Ch],X$),J$=t=>t.map(r=>r.data).filter(Boolean).flat(1),Pce=Ke([Ch],J$),eF=(t,r)=>{var{chartData:n=[],dataStartIndex:s,dataEndIndex:a}=r;return t.length>0?t:n.slice(s,a+1)},h1=Ke([Pce,t1],eF),tF=(t,r,n)=>r?.dataKey!=null?t.map(s=>({value:Ts(s,r.dataKey)})):n.length>0?n.map(s=>s.dataKey).flatMap(s=>t.map(a=>({value:Ts(a,s)}))):t.map(s=>({value:s})),Rg=Ke([h1,Zs,Ch],tF);function rF(t,r){switch(t){case"xAxis":return r.direction==="x";case"yAxis":return r.direction==="y";default:return!1}}function Tc(t){return t.filter(r=>Oi(r)||r instanceof Date).map(Number).filter(r=>xa(r)===!1)}function Dce(t,r,n){return!n||typeof r!="number"||xa(r)?[]:n.length?Tc(n.flatMap(s=>{var a=Ts(t,s.dataKey),l,c;if(Array.isArray(a)?[l,c]=a:l=c=a,!(!Ds(l)||!Ds(c)))return[r-l,r+c]})):[]}var Rce=Ke([Q$,t1,Kn],H$),nF=(t,r,n)=>{var s={},a=r.reduce((l,c)=>(c.stackId==null||(l[c.stackId]==null&&(l[c.stackId]=[]),l[c.stackId].push(c)),l),s);return Object.fromEntries(Object.entries(a).map(l=>{var[c,u]=l,d=u.map(d1);return[c,{stackedData:Ose(t,d,n),graphicalItems:u}]}))},Cw=Ke([Rce,Q$,Tg],nF),sF=(t,r,n)=>{var{dataStartIndex:s,dataEndIndex:a}=r;if(n!=="zAxis"){var l=Lse(t,s,a);if(!(l!=null&&l[0]===0&&l[1]===0))return l}},Lce=Ke([Cw,So,Ln],sF),aF=(t,r,n,s,a)=>n.length>0?t.flatMap(l=>n.flatMap(c=>{var u,d,h=(u=s[c.id])===null||u===void 0?void 0:u.filter(p=>rF(a,p)),x=Ts(l,(d=r.dataKey)!==null&&d!==void 0?d:c.dataKey);return{value:x,errorDomain:Dce(l,x,h)}})).filter(Boolean):r?.dataKey!=null?t.map(l=>({value:Ts(l,r.dataKey),errorDomain:[]})):t.map(l=>({value:l,errorDomain:[]})),Lg=t=>t.errorBars,iF=(t,r,n)=>t.flatMap(s=>r[s.id]).filter(Boolean).filter(s=>rF(n,s));Ke([Z$,Lg,Ln],iF);var Ice=Ke([h1,Zs,Z$,Lg,Ln],aF);function $ce(t){var{value:r}=t;if(Oi(r)||r instanceof Date)return r}var l4=t=>{var r=t.flatMap(s=>[s.value,s.errorDomain]).flat(1),n=Tc(r);if(n.length!==0)return[Math.min(...n),Math.max(...n)]},Fce=(t,r,n)=>{var s=t.map($ce).filter(a=>a!=null);return n&&(r.dataKey==null||r.allowDuplicatedCategory&&v5(s))?WI(0,t.length):r.allowDuplicatedCategory?s:Array.from(new Set(s))},f1=t=>{var r;if(t==null||!("domain"in t))return _w;if(t.domain!=null)return t.domain;if(t.ticks!=null){if(t.type==="number"){var n=Tc(t.ticks);return[Math.min(...n),Math.max(...n)]}if(t.type==="category")return t.ticks.map(String)}return(r=t?.domain)!==null&&r!==void 0?r:_w},Np=function(){for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];var a=n.filter(Boolean);if(a.length!==0){var l=a.flat(),c=Math.min(...l),u=Math.max(...l);return[c,u]}},lF=t=>t.referenceElements.dots,lu=(t,r,n)=>t.filter(s=>s.ifOverflow==="extendDomain").filter(s=>r==="xAxis"?s.xAxisId===n:s.yAxisId===n),qce=Ke([lF,Ln,Dg],lu),oF=t=>t.referenceElements.areas,Uce=Ke([oF,Ln,Dg],lu),cF=t=>t.referenceElements.lines,zce=Ke([cF,Ln,Dg],lu),dF=(t,r)=>{var n=Tc(t.map(s=>r==="xAxis"?s.x:s.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},Bce=Ke(qce,Ln,dF),uF=(t,r)=>{var n=Tc(t.flatMap(s=>[r==="xAxis"?s.x1:s.y1,r==="xAxis"?s.x2:s.y2]));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},Wce=Ke([Uce,Ln],uF),mF=(t,r)=>{var n=Tc(t.map(s=>r==="xAxis"?s.x:s.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]},Hce=Ke(zce,Ln,mF),Vce=Ke(Bce,Hce,Wce,(t,r,n)=>Np(t,n,r)),Yce=Ke([Zs],f1),hF=(t,r,n,s,a,l,c)=>{var u=oce(r,t.allowDataOverflow);if(u!=null)return u;var d=l==="vertical"&&c==="xAxis"||l==="horizontal"&&c==="yAxis",h=d?Np(n,a,l4(s)):Np(a,l4(s));return cce(r,h,t.allowDataOverflow)},Kce=Ke([Zs,Yce,Lce,Ice,Vce,en,Ln],hF),Gce=[0,1],fF=(t,r,n,s,a,l,c)=>{if(!((t==null||n==null||n.length===0)&&c===void 0)){var{dataKey:u,type:d}=t,h=Nl(r,l);return h&&u==null?WI(0,n.length):d==="category"?Fce(s,t,h):a==="expand"?Gce:c}},x1=Ke([Zs,en,h1,Rg,Tg,Ln,Kce],fF),xF=(t,r,n,s,a)=>{if(t!=null){var{scale:l,type:c}=t;if(l==="auto")return r==="radial"&&a==="radiusAxis"?"band":r==="radial"&&a==="angleAxis"?"linear":c==="category"&&s&&(s.indexOf("LineChart")>=0||s.indexOf("AreaChart")>=0||s.indexOf("ComposedChart")>=0&&!n)?"point":c==="category"?"band":"linear";if(typeof l=="string"){var u="scale".concat(ph(l));return u in km?u:"point"}}},Sh=Ke([Zs,en,V$,s1,Ln],xF);function Qce(t){if(t!=null){if(t in km)return km[t]();var r="scale".concat(ph(t));if(r in km)return km[r]()}}function p1(t,r,n,s){if(!(n==null||s==null)){if(typeof t.scale=="function")return t.scale.copy().domain(n).range(s);var a=Qce(r);if(a!=null){var l=a.domain(n).range(s);return Ase(l),l}}}var pF=(t,r,n)=>{var s=f1(r);if(!(n!=="auto"&&n!=="linear")){if(r!=null&&r.tickCount&&Array.isArray(s)&&(s[0]==="auto"||s[1]==="auto")&&Wd(t))return vce(t,r.tickCount,r.allowDecimals);if(r!=null&&r.tickCount&&r.type==="number"&&Wd(t))return jce(t,r.tickCount,r.allowDecimals)}},g1=Ke([x1,_h,Sh],pF),gF=(t,r,n,s)=>{if(s!=="angleAxis"&&t?.type==="number"&&Wd(r)&&Array.isArray(n)&&n.length>0){var a=r[0],l=n[0],c=r[1],u=n[n.length-1];return[Math.min(a,l),Math.max(c,u)]}return r},Xce=Ke([Zs,x1,g1,Ln],gF),Zce=Ke(Rg,Zs,(t,r)=>{if(!(!r||r.type!=="number")){var n=1/0,s=Array.from(Tc(t.map(u=>u.value))).sort((u,d)=>u-d);if(s.length<2)return 1/0;var a=s[s.length-1]-s[0];if(a===0)return 1/0;for(var l=0;l<s.length-1;l++){var c=s[l+1]-s[l];n=Math.min(n,c)}return n/a}}),yF=Ke(Zce,en,bce,bs,(t,r,n,s)=>s,(t,r,n,s,a)=>{if(!Ds(t))return 0;var l=r==="vertical"?s.height:s.width;if(a==="gap")return t*l/2;if(a==="no-gap"){var c=yo(n,t*l),u=t*l/2;return u-c-(u-c)/l*c}return 0}),Jce=(t,r)=>{var n=kl(t,r);return n==null||typeof n.padding!="string"?0:yF(t,"xAxis",r,n.padding)},ede=(t,r)=>{var n=ko(t,r);return n==null||typeof n.padding!="string"?0:yF(t,"yAxis",r,n.padding)},tde=Ke(kl,Jce,(t,r)=>{var n,s;if(t==null)return{left:0,right:0};var{padding:a}=t;return typeof a=="string"?{left:r,right:r}:{left:((n=a.left)!==null&&n!==void 0?n:0)+r,right:((s=a.right)!==null&&s!==void 0?s:0)+r}}),rde=Ke(ko,ede,(t,r)=>{var n,s;if(t==null)return{top:0,bottom:0};var{padding:a}=t;return typeof a=="string"?{top:r,bottom:r}:{top:((n=a.top)!==null&&n!==void 0?n:0)+r,bottom:((s=a.bottom)!==null&&s!==void 0?s:0)+r}}),nde=Ke([bs,tde,wg,bg,(t,r,n)=>n],(t,r,n,s,a)=>{var{padding:l}=s;return a?[l.left,n.width-l.right]:[t.left+r.left,t.left+t.width-r.right]}),sde=Ke([bs,en,rde,wg,bg,(t,r,n)=>n],(t,r,n,s,a,l)=>{var{padding:c}=a;return l?[s.height-c.bottom,c.top]:r==="horizontal"?[t.top+t.height-n.bottom,t.top+n.top]:[t.top+n.top,t.top+t.height-n.bottom]}),kh=(t,r,n,s)=>{var a;switch(r){case"xAxis":return nde(t,n,s);case"yAxis":return sde(t,n,s);case"zAxis":return(a=m1(t,n))===null||a===void 0?void 0:a.range;case"angleAxis":return z$(t);case"radiusAxis":return B$(t,n);default:return}},vF=Ke([Zs,kh],Og),ou=Ke([Zs,Sh,Xce,vF],p1);Ke([Ch,Lg,Ln],iF);function jF(t,r){return t.id<r.id?-1:t.id>r.id?1:0}var Ig=(t,r)=>r,$g=(t,r,n)=>n,ade=Ke(__,Ig,$g,(t,r,n)=>t.filter(s=>s.orientation===r).filter(s=>s.mirror===n).sort(jF)),ide=Ke(C_,Ig,$g,(t,r,n)=>t.filter(s=>s.orientation===r).filter(s=>s.mirror===n).sort(jF)),bF=(t,r)=>({width:t.width,height:r.height}),lde=(t,r)=>{var n=typeof r.width=="number"?r.width:jg;return{width:n,height:t.height}},ode=Ke(bs,kl,bF),cde=(t,r,n)=>{switch(r){case"top":return t.top;case"bottom":return n-t.bottom;default:return 0}},dde=(t,r,n)=>{switch(r){case"left":return t.left;case"right":return n-t.right;default:return 0}},ude=Ke(Cl,bs,ade,Ig,$g,(t,r,n,s,a)=>{var l={},c;return n.forEach(u=>{var d=bF(r,u);c==null&&(c=cde(r,s,t));var h=s==="top"&&!a||s==="bottom"&&a;l[u.id]=c-Number(h)*d.height,c+=(h?-1:1)*d.height}),l}),mde=Ke(_l,bs,ide,Ig,$g,(t,r,n,s,a)=>{var l={},c;return n.forEach(u=>{var d=lde(r,u);c==null&&(c=dde(r,s,t));var h=s==="left"&&!a||s==="right"&&a;l[u.id]=c-Number(h)*d.width,c+=(h?-1:1)*d.width}),l}),hde=(t,r)=>{var n=bs(t),s=kl(t,r);if(s!=null){var a=ude(t,s.orientation,s.mirror),l=a[r];return l==null?{x:n.left,y:0}:{x:n.left,y:l}}},fde=(t,r)=>{var n=bs(t),s=ko(t,r);if(s!=null){var a=mde(t,s.orientation,s.mirror),l=a[r];return l==null?{x:0,y:n.top}:{x:l,y:n.top}}},xde=Ke(bs,ko,(t,r)=>{var n=typeof r.width=="number"?r.width:jg;return{width:n,height:t.height}}),wF=(t,r,n,s)=>{if(n!=null){var{allowDuplicatedCategory:a,type:l,dataKey:c}=n,u=Nl(t,s),d=r.map(h=>h.value);if(c&&u&&l==="category"&&a&&v5(d))return d}},y1=Ke([en,Rg,Zs,Ln],wF),NF=(t,r,n,s)=>{if(!(n==null||n.dataKey==null)){var{type:a,scale:l}=n,c=Nl(t,s);if(c&&(a==="number"||l!=="auto"))return r.map(u=>u.value)}},v1=Ke([en,Rg,_h,Ln],NF),o4=Ke([en,Tce,Sh,ou,y1,v1,kh,g1,Ln],(t,r,n,s,a,l,c,u,d)=>{if(r==null)return null;var h=Nl(t,d);return{angle:r.angle,interval:r.interval,minTickGap:r.minTickGap,orientation:r.orientation,tick:r.tick,tickCount:r.tickCount,tickFormatter:r.tickFormatter,ticks:r.ticks,type:r.type,unit:r.unit,axisType:d,categoricalDomain:l,duplicateDomain:a,isCategorical:h,niceTicks:u,range:c,realScaleType:n,scale:s}}),pde=(t,r,n,s,a,l,c,u,d)=>{if(!(r==null||s==null)){var h=Nl(t,d),{type:x,ticks:p,tickCount:y}=r,v=n==="scaleBand"&&typeof s.bandwidth=="function"?s.bandwidth()/2:2,w=x==="category"&&s.bandwidth?s.bandwidth()/v:0;w=d==="angleAxis"&&l!=null&&l.length>=2?Da(l[0]-l[1])*2*w:w;var b=p||a;if(b){var N=b.map((_,S)=>{var k=c?c.indexOf(_):_;return{index:S,coordinate:s(k)+w,value:_,offset:w}});return N.filter(_=>!xa(_.coordinate))}return h&&u?u.map((_,S)=>({coordinate:s(_)+w,value:_,index:S,offset:w})):s.ticks?s.ticks(y).map(_=>({coordinate:s(_)+w,value:_,offset:w})):s.domain().map((_,S)=>({coordinate:s(_)+w,value:c?c[_]:_,index:S,offset:w}))}},_F=Ke([en,_h,Sh,ou,g1,kh,y1,v1,Ln],pde),gde=(t,r,n,s,a,l,c)=>{if(!(r==null||n==null||s==null||s[0]===s[1])){var u=Nl(t,c),{tickCount:d}=r,h=0;return h=c==="angleAxis"&&s?.length>=2?Da(s[0]-s[1])*2*h:h,u&&l?l.map((x,p)=>({coordinate:n(x)+h,value:x,index:p,offset:h})):n.ticks?n.ticks(d).map(x=>({coordinate:n(x)+h,value:x,offset:h})):n.domain().map((x,p)=>({coordinate:n(x)+h,value:a?a[x]:x,index:p,offset:h}))}},CF=Ke([en,_h,ou,kh,y1,v1,Ln],gde),SF=Ke(Zs,ou,(t,r)=>{if(!(t==null||r==null))return wp(wp({},t),{},{scale:r})}),yde=Ke([Zs,Sh,x1,vF],p1);Ke((t,r,n)=>m1(t,n),yde,(t,r)=>{if(!(t==null||r==null))return wp(wp({},t),{},{scale:r})});var vde=Ke([en,__,C_],(t,r,n)=>{switch(t){case"horizontal":return r.some(s=>s.reversed)?"right-to-left":"left-to-right";case"vertical":return n.some(s=>s.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),kF=t=>t.options.defaultTooltipEventType,AF=t=>t.options.validateTooltipEventTypes;function EF(t,r,n){if(t==null)return r;var s=t?"axis":"item";return n==null?r:n.includes(s)?s:r}function j1(t,r){var n=kF(t),s=AF(t);return EF(r,n,s)}function jde(t){return Bt(r=>j1(r,t))}var MF=(t,r)=>{var n,s=Number(r);if(!(xa(s)||r==null))return s>=0?t==null||(n=t[s])===null||n===void 0?void 0:n.value:void 0},bde=t=>t.tooltip.settings,ao={active:!1,index:null,dataKey:void 0,coordinate:void 0},wde={itemInteraction:{click:ao,hover:ao},axisInteraction:{click:ao,hover:ao},keyboardInteraction:ao,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},TF=ga({name:"tooltip",initialState:wde,reducers:{addTooltipEntrySettings(t,r){t.tooltipItemPayloads.push(r.payload)},removeTooltipEntrySettings(t,r){var n=al(t).tooltipItemPayloads.indexOf(r.payload);n>-1&&t.tooltipItemPayloads.splice(n,1)},setTooltipSettingsState(t,r){t.settings=r.payload},setActiveMouseOverItemIndex(t,r){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.itemInteraction.hover.active=!0,t.itemInteraction.hover.index=r.payload.activeIndex,t.itemInteraction.hover.dataKey=r.payload.activeDataKey,t.itemInteraction.hover.coordinate=r.payload.activeCoordinate},mouseLeaveChart(t){t.itemInteraction.hover.active=!1,t.axisInteraction.hover.active=!1},mouseLeaveItem(t){t.itemInteraction.hover.active=!1},setActiveClickItemIndex(t,r){t.syncInteraction.active=!1,t.itemInteraction.click.active=!0,t.keyboardInteraction.active=!1,t.itemInteraction.click.index=r.payload.activeIndex,t.itemInteraction.click.dataKey=r.payload.activeDataKey,t.itemInteraction.click.coordinate=r.payload.activeCoordinate},setMouseOverAxisIndex(t,r){t.syncInteraction.active=!1,t.axisInteraction.hover.active=!0,t.keyboardInteraction.active=!1,t.axisInteraction.hover.index=r.payload.activeIndex,t.axisInteraction.hover.dataKey=r.payload.activeDataKey,t.axisInteraction.hover.coordinate=r.payload.activeCoordinate},setMouseClickAxisIndex(t,r){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.axisInteraction.click.active=!0,t.axisInteraction.click.index=r.payload.activeIndex,t.axisInteraction.click.dataKey=r.payload.activeDataKey,t.axisInteraction.click.coordinate=r.payload.activeCoordinate},setSyncInteraction(t,r){t.syncInteraction=r.payload},setKeyboardInteraction(t,r){t.keyboardInteraction.active=r.payload.active,t.keyboardInteraction.index=r.payload.activeIndex,t.keyboardInteraction.coordinate=r.payload.activeCoordinate,t.keyboardInteraction.dataKey=r.payload.activeDataKey}}}),{addTooltipEntrySettings:Nde,removeTooltipEntrySettings:_de,setTooltipSettingsState:Cde,setActiveMouseOverItemIndex:Sde,mouseLeaveItem:nge,mouseLeaveChart:OF,setActiveClickItemIndex:sge,setMouseOverAxisIndex:PF,setMouseClickAxisIndex:kde,setSyncInteraction:Sw,setKeyboardInteraction:kw}=TF.actions,Ade=TF.reducer;function c4(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);r&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,s)}return n}function gx(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?c4(Object(n),!0).forEach(function(s){Ede(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):c4(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}function Ede(t,r,n){return(r=Mde(r))in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function Mde(t){var r=Tde(t,"string");return typeof r=="symbol"?r:r+""}function Tde(t,r){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var s=n.call(t,r);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}function Ode(t,r,n){return r==="axis"?n==="click"?t.axisInteraction.click:t.axisInteraction.hover:n==="click"?t.itemInteraction.click:t.itemInteraction.hover}function Pde(t){return t.index!=null}var DF=(t,r,n,s)=>{if(r==null)return ao;var a=Ode(t,r,n);if(a==null)return ao;if(a.active)return a;if(t.keyboardInteraction.active)return t.keyboardInteraction;if(t.syncInteraction.active&&t.syncInteraction.index!=null)return t.syncInteraction;var l=t.settings.active===!0;if(Pde(a)){if(l)return gx(gx({},a),{},{active:!0})}else if(s!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:s};return gx(gx({},ao),{},{coordinate:a.coordinate})},b1=(t,r)=>{var n=t?.index;if(n==null)return null;var s=Number(n);if(!Ds(s))return n;var a=0,l=1/0;return r.length>0&&(l=r.length-1),String(Math.max(a,Math.min(s,l)))},RF=(t,r,n,s,a,l,c,u)=>{if(!(l==null||u==null)){var d=c[0],h=d==null?void 0:u(d.positions,l);if(h!=null)return h;var x=a?.[Number(l)];if(x)switch(n){case"horizontal":return{x:x.coordinate,y:(s.top+r)/2};default:return{x:(s.left+t)/2,y:x.coordinate}}}},LF=(t,r,n,s)=>{if(r==="axis")return t.tooltipItemPayloads;if(t.tooltipItemPayloads.length===0)return[];var a;return n==="hover"?a=t.itemInteraction.hover.dataKey:a=t.itemInteraction.click.dataKey,a==null&&s!=null?[t.tooltipItemPayloads[0]]:t.tooltipItemPayloads.filter(l=>{var c;return((c=l.settings)===null||c===void 0?void 0:c.dataKey)===a})},Ah=t=>t.options.tooltipPayloadSearcher,cu=t=>t.tooltip;function d4(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);r&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,s)}return n}function u4(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?d4(Object(n),!0).forEach(function(s){Dde(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):d4(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}function Dde(t,r,n){return(r=Rde(r))in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function Rde(t){var r=Lde(t,"string");return typeof r=="symbol"?r:r+""}function Lde(t,r){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var s=n.call(t,r);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}function Ide(t,r){return t??r}var IF=(t,r,n,s,a,l,c)=>{if(!(r==null||l==null)){var{chartData:u,computedData:d,dataStartIndex:h,dataEndIndex:x}=n,p=[];return t.reduce((y,v)=>{var w,{dataDefinedOnItem:b,settings:N}=v,_=Ide(b,u),S=Array.isArray(_)?kI(_,h,x):_,k=(w=N?.dataKey)!==null&&w!==void 0?w:s?.dataKey,E=N?.nameKey,A;if(s!=null&&s.dataKey&&Array.isArray(S)&&!Array.isArray(S[0])&&c==="axis"?A=j5(S,s.dataKey,a):A=l(S,r,d,E),Array.isArray(A))A.forEach(z=>{var R=u4(u4({},N),{},{name:z.name,unit:z.unit,color:void 0,fill:void 0});y.push(WM({tooltipEntrySettings:R,dataKey:z.dataKey,payload:z.payload,value:Ts(z.payload,z.dataKey),name:z.name}))});else{var O;y.push(WM({tooltipEntrySettings:N,dataKey:k,payload:A,value:Ts(A,k),name:(O=Ts(A,E))!==null&&O!==void 0?O:N?.name}))}return y},p)}},w1=Ke([Kn,en,V$,s1,Yn],xF),$de=Ke([t=>t.graphicalItems.cartesianItems,t=>t.graphicalItems.polarItems],(t,r)=>[...t,...r]),Fde=Ke([Yn,iu],Y$),Eh=Ke([$de,Kn,Fde],G$),qde=Ke([Eh],t=>t.filter(u1)),Ude=Ke([Eh],J$),du=Ke([Ude,So],eF),zde=Ke([qde,So,Kn],H$),N1=Ke([du,Kn,Eh],tF),Bde=Ke([Kn],f1),Wde=Ke([Eh],t=>t.filter(u1)),Hde=Ke([zde,Wde,Tg],nF),Vde=Ke([Hde,So,Yn],sF),Yde=Ke([Eh],X$),Kde=Ke([du,Kn,Yde,Lg,Yn],aF),Gde=Ke([lF,Yn,iu],lu),Qde=Ke([Gde,Yn],dF),Xde=Ke([oF,Yn,iu],lu),Zde=Ke([Xde,Yn],uF),Jde=Ke([cF,Yn,iu],lu),eue=Ke([Jde,Yn],mF),tue=Ke([Qde,eue,Zde],Np),rue=Ke([Kn,Bde,Vde,Kde,tue,en,Yn],hF),$F=Ke([Kn,en,du,N1,Tg,Yn,rue],fF),nue=Ke([$F,Kn,w1],pF),sue=Ke([Kn,$F,nue,Yn],gF),FF=t=>{var r=Yn(t),n=iu(t),s=!1;return kh(t,r,n,s)},qF=Ke([Kn,FF],Og),UF=Ke([Kn,w1,sue,qF],p1),aue=Ke([en,N1,Kn,Yn],wF),iue=Ke([en,N1,Kn,Yn],NF),lue=(t,r,n,s,a,l,c,u)=>{if(r){var{type:d}=r,h=Nl(t,u);if(s){var x=n==="scaleBand"&&s.bandwidth?s.bandwidth()/2:2,p=d==="category"&&s.bandwidth?s.bandwidth()/x:0;return p=u==="angleAxis"&&a!=null&&a?.length>=2?Da(a[0]-a[1])*2*p:p,h&&c?c.map((y,v)=>({coordinate:s(y)+p,value:y,index:v,offset:p})):s.domain().map((y,v)=>({coordinate:s(y)+p,value:l?l[y]:y,index:v,offset:p}))}}},Al=Ke([en,Kn,w1,UF,FF,aue,iue,Yn],lue),_1=Ke([kF,AF,bde],(t,r,n)=>EF(n.shared,t,r)),zF=t=>t.tooltip.settings.trigger,C1=t=>t.tooltip.settings.defaultIndex,Fg=Ke([cu,_1,zF,C1],DF),Ym=Ke([Fg,du],b1),BF=Ke([Al,Ym],MF),oue=Ke([Fg],t=>{if(t)return t.dataKey}),WF=Ke([cu,_1,zF,C1],LF),cue=Ke([_l,Cl,en,bs,Al,C1,WF,Ah],RF),due=Ke([Fg,cue],(t,r)=>t!=null&&t.coordinate?t.coordinate:r),uue=Ke([Fg],t=>t.active),mue=Ke([WF,Ym,So,Kn,BF,Ah,_1],IF),hue=Ke([mue],t=>{if(t!=null){var r=t.map(n=>n.payload).filter(n=>n!=null);return Array.from(new Set(r))}});function m4(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);r&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,s)}return n}function h4(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?m4(Object(n),!0).forEach(function(s){fue(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):m4(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}function fue(t,r,n){return(r=xue(r))in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function xue(t){var r=pue(t,"string");return typeof r=="symbol"?r:r+""}function pue(t,r){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var s=n.call(t,r);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}var gue=()=>Bt(Kn),yue=()=>{var t=gue(),r=Bt(Al),n=Bt(UF);return iw(h4(h4({},t),{},{scale:n}),r)},HF=()=>Bt(s1),S1=(t,r)=>r,VF=(t,r,n)=>n,k1=(t,r,n,s)=>s,vue=Ke(Al,t=>fg(t,r=>r.coordinate)),A1=Ke([cu,S1,VF,k1],DF),YF=Ke([A1,du],b1),jue=(t,r,n)=>{if(r!=null){var s=cu(t);return r==="axis"?n==="hover"?s.axisInteraction.hover.dataKey:s.axisInteraction.click.dataKey:n==="hover"?s.itemInteraction.hover.dataKey:s.itemInteraction.click.dataKey}},KF=Ke([cu,S1,VF,k1],LF),_p=Ke([_l,Cl,en,bs,Al,k1,KF,Ah],RF),bue=Ke([A1,_p],(t,r)=>{var n;return(n=t.coordinate)!==null&&n!==void 0?n:r}),GF=Ke(Al,YF,MF),wue=Ke([KF,YF,So,Kn,GF,Ah,S1],IF),Nue=Ke([A1],t=>({isActive:t.active,activeIndex:t.index})),_ue=(t,r,n,s,a,l,c,u)=>{if(!(!t||!r||!s||!a||!l)){var d=Ise(t.chartX,t.chartY,r,n,u);if(d){var h=Fse(d,r),x=Sse(h,c,l,s,a),p=$se(r,l,x,d);return{activeIndex:String(x),activeCoordinate:p}}}};function Aw(){return Aw=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var s in n)({}).hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Aw.apply(null,arguments)}function f4(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);r&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,s)}return n}function yx(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?f4(Object(n),!0).forEach(function(s){Cue(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):f4(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}function Cue(t,r,n){return(r=Sue(r))in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function Sue(t){var r=kue(t,"string");return typeof r=="symbol"?r:r+""}function kue(t,r){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var s=n.call(t,r);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}function Aue(t){var{coordinate:r,payload:n,index:s,offset:a,tooltipAxisBandSize:l,layout:c,cursor:u,tooltipEventType:d,chartName:h}=t,x=r,p=n,y=s;if(!u||!x||h!=="ScatterChart"&&d!=="axis")return null;var v,w;if(h==="ScatterChart")v=x,w=qae;else if(h==="BarChart")v=Uae(c,x,a,l),w=wie;else if(c==="radial"){var{cx:b,cy:N,radius:_,startAngle:S,endAngle:k}=zI(x);v={cx:b,cy:N,startAngle:S,endAngle:k,innerRadius:_,outerRadius:_},w=Sie}else v={points:kie(c,x,a)},w=Ox;var E=typeof u=="object"&&"className"in u?u.className:void 0,A=yx(yx(yx(yx({stroke:"#ccc",pointerEvents:"none"},a),v),ns(u,!1)),{},{payload:p,payloadIndex:y,className:Ur("recharts-tooltip-cursor",E)});return f.isValidElement(u)?f.cloneElement(u,A):f.createElement(w,A)}function Eue(t){var r=yue(),n=PI(),s=E_(),a=HF();return f.createElement(Aue,Aw({},t,{coordinate:t.coordinate,index:t.index,payload:t.payload,offset:n,layout:s,tooltipAxisBandSize:r,chartName:a}))}var QF=f.createContext(null),Mue=()=>f.useContext(QF),zb={exports:{}},x4;function Tue(){return x4||(x4=1,(function(t){var r=Object.prototype.hasOwnProperty,n="~";function s(){}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(n=!1));function a(d,h,x){this.fn=d,this.context=h,this.once=x||!1}function l(d,h,x,p,y){if(typeof x!="function")throw new TypeError("The listener must be a function");var v=new a(x,p||d,y),w=n?n+h:h;return d._events[w]?d._events[w].fn?d._events[w]=[d._events[w],v]:d._events[w].push(v):(d._events[w]=v,d._eventsCount++),d}function c(d,h){--d._eventsCount===0?d._events=new s:delete d._events[h]}function u(){this._events=new s,this._eventsCount=0}u.prototype.eventNames=function(){var h=[],x,p;if(this._eventsCount===0)return h;for(p in x=this._events)r.call(x,p)&&h.push(n?p.slice(1):p);return Object.getOwnPropertySymbols?h.concat(Object.getOwnPropertySymbols(x)):h},u.prototype.listeners=function(h){var x=n?n+h:h,p=this._events[x];if(!p)return[];if(p.fn)return[p.fn];for(var y=0,v=p.length,w=new Array(v);y<v;y++)w[y]=p[y].fn;return w},u.prototype.listenerCount=function(h){var x=n?n+h:h,p=this._events[x];return p?p.fn?1:p.length:0},u.prototype.emit=function(h,x,p,y,v,w){var b=n?n+h:h;if(!this._events[b])return!1;var N=this._events[b],_=arguments.length,S,k;if(N.fn){switch(N.once&&this.removeListener(h,N.fn,void 0,!0),_){case 1:return N.fn.call(N.context),!0;case 2:return N.fn.call(N.context,x),!0;case 3:return N.fn.call(N.context,x,p),!0;case 4:return N.fn.call(N.context,x,p,y),!0;case 5:return N.fn.call(N.context,x,p,y,v),!0;case 6:return N.fn.call(N.context,x,p,y,v,w),!0}for(k=1,S=new Array(_-1);k<_;k++)S[k-1]=arguments[k];N.fn.apply(N.context,S)}else{var E=N.length,A;for(k=0;k<E;k++)switch(N[k].once&&this.removeListener(h,N[k].fn,void 0,!0),_){case 1:N[k].fn.call(N[k].context);break;case 2:N[k].fn.call(N[k].context,x);break;case 3:N[k].fn.call(N[k].context,x,p);break;case 4:N[k].fn.call(N[k].context,x,p,y);break;default:if(!S)for(A=1,S=new Array(_-1);A<_;A++)S[A-1]=arguments[A];N[k].fn.apply(N[k].context,S)}}return!0},u.prototype.on=function(h,x,p){return l(this,h,x,p,!1)},u.prototype.once=function(h,x,p){return l(this,h,x,p,!0)},u.prototype.removeListener=function(h,x,p,y){var v=n?n+h:h;if(!this._events[v])return this;if(!x)return c(this,v),this;var w=this._events[v];if(w.fn)w.fn===x&&(!y||w.once)&&(!p||w.context===p)&&c(this,v);else{for(var b=0,N=[],_=w.length;b<_;b++)(w[b].fn!==x||y&&!w[b].once||p&&w[b].context!==p)&&N.push(w[b]);N.length?this._events[v]=N.length===1?N[0]:N:c(this,v)}return this},u.prototype.removeAllListeners=function(h){var x;return h?(x=n?n+h:h,this._events[x]&&c(this,x)):(this._events=new s,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=n,u.EventEmitter=u,t.exports=u})(zb)),zb.exports}var Oue=Tue();const Pue=Di(Oue);var Km=new Pue,Ew="recharts.syncEvent.tooltip",p4="recharts.syncEvent.brush";function Due(t,r){if(r){var n=Number.parseInt(r,10);if(!xa(n))return t?.[n]}}var Rue={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},XF=ga({name:"options",initialState:Rue,reducers:{createEventEmitter:t=>{t.eventEmitter==null&&(t.eventEmitter=Symbol("rechartsEventEmitter"))}}}),Lue=XF.reducer,{createEventEmitter:Iue}=XF.actions;function $ue(t){return t.tooltip.syncInteraction}var Fue={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},ZF=ga({name:"chartData",initialState:Fue,reducers:{setChartData(t,r){if(t.chartData=r.payload,r.payload==null){t.dataStartIndex=0,t.dataEndIndex=0;return}r.payload.length>0&&t.dataEndIndex!==r.payload.length-1&&(t.dataEndIndex=r.payload.length-1)},setComputedData(t,r){t.computedData=r.payload},setDataStartEndIndexes(t,r){var{startIndex:n,endIndex:s}=r.payload;n!=null&&(t.dataStartIndex=n),s!=null&&(t.dataEndIndex=s)}}}),{setChartData:g4,setDataStartEndIndexes:que,setComputedData:age}=ZF.actions,Uue=ZF.reducer,JF=()=>{};function zue(){var t=Bt(a1),r=Bt(i1),n=js(),s=Bt(F$),a=Bt(Al),l=E_(),c=S_(),u=Bt(d=>d.rootProps.className);f.useEffect(()=>{if(t==null)return JF;var d=(h,x,p)=>{if(r!==p&&t===h){if(s==="index"){n(x);return}if(a!=null){var y;if(typeof s=="function"){var v={activeTooltipIndex:x.payload.index==null?void 0:Number(x.payload.index),isTooltipActive:x.payload.active,activeIndex:x.payload.index==null?void 0:Number(x.payload.index),activeLabel:x.payload.label,activeDataKey:x.payload.dataKey,activeCoordinate:x.payload.coordinate},w=s(a,v);y=a[w]}else s==="value"&&(y=a.find(O=>String(O.value)===x.payload.label));var{coordinate:b}=x.payload;if(y==null||x.payload.active===!1||b==null||c==null){n(Sw({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0}));return}var{x:N,y:_}=b,S=Math.min(N,c.x+c.width),k=Math.min(_,c.y+c.height),E={x:l==="horizontal"?y.coordinate:S,y:l==="horizontal"?k:y.coordinate},A=Sw({active:x.payload.active,coordinate:E,dataKey:x.payload.dataKey,index:String(y.index),label:x.payload.label});n(A)}}};return Km.on(Ew,d),()=>{Km.off(Ew,d)}},[u,n,r,t,s,a,l,c])}function Bue(){var t=Bt(a1),r=Bt(i1),n=js();f.useEffect(()=>{if(t==null)return JF;var s=(a,l,c)=>{r!==c&&t===a&&n(que(l))};return Km.on(p4,s),()=>{Km.off(p4,s)}},[n,r,t])}function Wue(){var t=js();f.useEffect(()=>{t(Iue())},[t]),zue(),Bue()}function Hue(t,r,n,s,a,l){var c=Bt(y=>jue(y,t,r)),u=Bt(i1),d=Bt(a1),h=Bt(F$),x=Bt($ue),p=x?.active;f.useEffect(()=>{if(!p&&d!=null&&u!=null){var y=Sw({active:l,coordinate:n,dataKey:c,index:a,label:typeof s=="number"?String(s):s});Km.emit(Ew,d,y,u)}},[p,n,c,a,s,u,d,h,l])}function y4(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);r&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,s)}return n}function v4(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?y4(Object(n),!0).forEach(function(s){Vue(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):y4(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}function Vue(t,r,n){return(r=Yue(r))in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function Yue(t){var r=Kue(t,"string");return typeof r=="symbol"?r:r+""}function Kue(t,r){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var s=n.call(t,r);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}function Gue(t){return t.dataKey}function Que(t,r){return f.isValidElement(t)?f.cloneElement(t,r):typeof t=="function"?f.createElement(t,r):f.createElement(yae,r)}var j4=[],Xue={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!vh.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function Zue(t){var r=No(t,Xue),{active:n,allowEscapeViewBox:s,animationDuration:a,animationEasing:l,content:c,filterNull:u,isAnimationActive:d,offset:h,payloadUniqBy:x,position:p,reverseDirection:y,useTranslate3d:v,wrapperStyle:w,cursor:b,shared:N,trigger:_,defaultIndex:S,portal:k,axisId:E}=r,A=js(),O=typeof S=="number"?String(S):S;f.useEffect(()=>{A(Cde({shared:N,trigger:_,axisId:E,active:n,defaultIndex:O}))},[A,N,_,E,n,O]);var z=S_(),R=RI(),G=jde(N),{activeIndex:J,isActive:ie}=Bt(ye=>Nue(ye,G,_,O)),V=Bt(ye=>wue(ye,G,_,O)),xe=Bt(ye=>GF(ye,G,_,O)),pe=Bt(ye=>bue(ye,G,_,O)),re=V,M=Mue(),B=n??ie,[L,T]=rI([re,B]),F=G==="axis"?xe:void 0;Hue(G,_,pe,F,J,B);var I=k??M;if(I==null)return null;var Q=re??j4;B||(Q=j4),u&&Q.length&&(Q=X5(re.filter(ye=>ye.value!=null&&(ye.hide!==!0||r.includeHidden)),x,Gue));var W=Q.length>0,ee=f.createElement(Cae,{allowEscapeViewBox:s,animationDuration:a,animationEasing:l,isAnimationActive:d,active:B,coordinate:pe,hasPayload:W,offset:h,position:p,reverseDirection:y,useTranslate3d:v,viewBox:z,wrapperStyle:w,lastBoundingBox:L,innerRef:T,hasPortalFromProps:!!k},Que(c,v4(v4({},r),{},{payload:Q,label:F,active:B,coordinate:pe,accessibilityLayer:R})));return f.createElement(f.Fragment,null,Nc.createPortal(ee,I),B&&f.createElement(Eue,{cursor:b,tooltipEventType:G,coordinate:pe,payload:re,index:J}))}var Bb={},Wb={},Hb={},b4;function Jue(){return b4||(b4=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function r(n,s,{signal:a,edges:l}={}){let c,u=null;const d=l!=null&&l.includes("leading"),h=l==null||l.includes("trailing"),x=()=>{u!==null&&(n.apply(c,u),c=void 0,u=null)},p=()=>{h&&x(),b()};let y=null;const v=()=>{y!=null&&clearTimeout(y),y=setTimeout(()=>{y=null,p()},s)},w=()=>{y!==null&&(clearTimeout(y),y=null)},b=()=>{w(),c=void 0,u=null},N=()=>{x()},_=function(...S){if(a?.aborted)return;c=this,u=S;const k=y==null;v(),d&&k&&x()};return _.schedule=v,_.cancel=b,_.flush=N,a?.addEventListener("abort",b,{once:!0}),_}t.debounce=r})(Hb)),Hb}var w4;function eme(){return w4||(w4=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=Jue();function n(s,a=0,l={}){typeof l!="object"&&(l={});const{leading:c=!1,trailing:u=!0,maxWait:d}=l,h=Array(2);c&&(h[0]="leading"),u&&(h[1]="trailing");let x,p=null;const y=r.debounce(function(...b){x=s.apply(this,b),p=null},a,{edges:h}),v=function(...b){return d!=null&&(p===null&&(p=Date.now()),Date.now()-p>=d)?(x=s.apply(this,b),p=Date.now(),y.cancel(),y.schedule(),x):(y.apply(this,b),x)},w=()=>(y.flush(),x);return v.cancel=y.cancel,v.flush=w,v}t.debounce=n})(Wb)),Wb}var N4;function tme(){return N4||(N4=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=eme();function n(s,a=0,l={}){const{leading:c=!0,trailing:u=!0}=l;return r.debounce(s,a,{leading:c,maxWait:a,trailing:u})}t.throttle=n})(Bb)),Bb}var Vb,_4;function rme(){return _4||(_4=1,Vb=tme().throttle),Vb}var nme=rme();const sme=Di(nme);var Em=function(r,n){for(var s=arguments.length,a=new Array(s>2?s-2:0),l=2;l<s;l++)a[l-2]=arguments[l]};function C4(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);r&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,s)}return n}function Yb(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?C4(Object(n),!0).forEach(function(s){ame(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):C4(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}function ame(t,r,n){return(r=ime(r))in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function ime(t){var r=lme(t,"string");return typeof r=="symbol"?r:r+""}function lme(t,r){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var s=n.call(t,r);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}var ome=f.forwardRef((t,r)=>{var{aspect:n,initialDimension:s={width:-1,height:-1},width:a="100%",height:l="100%",minWidth:c=0,minHeight:u,maxHeight:d,children:h,debounce:x=0,id:p,className:y,onResize:v,style:w={}}=t,b=f.useRef(null),N=f.useRef();N.current=v,f.useImperativeHandle(r,()=>b.current);var[_,S]=f.useState({containerWidth:s.width,containerHeight:s.height}),k=f.useCallback((A,O)=>{S(z=>{var R=Math.round(A),G=Math.round(O);return z.containerWidth===R&&z.containerHeight===G?z:{containerWidth:R,containerHeight:G}})},[]);f.useEffect(()=>{var A=G=>{var J,{width:ie,height:V}=G[0].contentRect;k(ie,V),(J=N.current)===null||J===void 0||J.call(N,ie,V)};x>0&&(A=sme(A,x,{trailing:!0,leading:!1}));var O=new ResizeObserver(A),{width:z,height:R}=b.current.getBoundingClientRect();return k(z,R),O.observe(b.current),()=>{O.disconnect()}},[k,x]);var E=f.useMemo(()=>{var{containerWidth:A,containerHeight:O}=_;if(A<0||O<0)return null;Em(Jo(a)||Jo(l),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,a,l),Em(!n||n>0,"The aspect(%s) must be greater than zero.",n);var z=Jo(a)?A:a,R=Jo(l)?O:l;return n&&n>0&&(z?R=z/n:R&&(z=R*n),d&&R>d&&(R=d)),Em(z>0||R>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,z,R,a,l,c,u,n),f.Children.map(h,G=>f.cloneElement(G,{width:z,height:R,style:Yb({width:z,height:R},G.props.style)}))},[n,h,l,d,u,c,_,a]);return f.createElement("div",{id:p?"".concat(p):void 0,className:Ur("recharts-responsive-container",y),style:Yb(Yb({},w),{},{width:a,height:l,minWidth:c,minHeight:u,maxHeight:d}),ref:b},f.createElement("div",{style:{width:0,height:0,overflow:"visible"}},E))});function cme(t,r,n){return(r=dme(r))in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function dme(t){var r=ume(t,"string");return typeof r=="symbol"?r:r+""}function ume(t,r){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var s=n.call(t,r);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}class mme{constructor(r){cme(this,"cache",new Map),this.maxSize=r}get(r){var n=this.cache.get(r);return n!==void 0&&(this.cache.delete(r),this.cache.set(r,n)),n}set(r,n){if(this.cache.has(r))this.cache.delete(r);else if(this.cache.size>=this.maxSize){var s=this.cache.keys().next().value;this.cache.delete(s)}this.cache.set(r,n)}clear(){this.cache.clear()}size(){return this.cache.size}}function S4(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);r&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,s)}return n}function hme(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?S4(Object(n),!0).forEach(function(s){fme(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):S4(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}function fme(t,r,n){return(r=xme(r))in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function xme(t){var r=pme(t,"string");return typeof r=="symbol"?r:r+""}function pme(t,r){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var s=n.call(t,r);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}var gme={cacheSize:2e3,enableCache:!0},e6=hme({},gme),k4=new mme(e6.cacheSize),yme={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},A4="recharts_measurement_span";function vme(t,r){var n=r.fontSize||"",s=r.fontFamily||"",a=r.fontWeight||"",l=r.fontStyle||"",c=r.letterSpacing||"",u=r.textTransform||"";return"".concat(t,"|").concat(n,"|").concat(s,"|").concat(a,"|").concat(l,"|").concat(c,"|").concat(u)}var E4=(t,r)=>{try{var n=document.getElementById(A4);n||(n=document.createElement("span"),n.setAttribute("id",A4),n.setAttribute("aria-hidden","true"),document.body.appendChild(n)),Object.assign(n.style,yme,r),n.textContent="".concat(t);var s=n.getBoundingClientRect();return{width:s.width,height:s.height}}catch{return{width:0,height:0}}},Mm=function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(r==null||vh.isSsr)return{width:0,height:0};if(!e6.enableCache)return E4(r,n);var s=vme(r,n),a=k4.get(s);if(a)return a;var l=E4(r,n);return k4.set(s,l),l},M4=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,T4=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,jme=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,bme=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,t6={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},wme=Object.keys(t6),_d="NaN";function Nme(t,r){return t*t6[r]}class zs{static parse(r){var n,[,s,a]=(n=bme.exec(r))!==null&&n!==void 0?n:[];return new zs(parseFloat(s),a??"")}constructor(r,n){this.num=r,this.unit=n,this.num=r,this.unit=n,xa(r)&&(this.unit=""),n!==""&&!jme.test(n)&&(this.num=NaN,this.unit=""),wme.includes(n)&&(this.num=Nme(r,n),this.unit="px")}add(r){return this.unit!==r.unit?new zs(NaN,""):new zs(this.num+r.num,this.unit)}subtract(r){return this.unit!==r.unit?new zs(NaN,""):new zs(this.num-r.num,this.unit)}multiply(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new zs(NaN,""):new zs(this.num*r.num,this.unit||r.unit)}divide(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new zs(NaN,""):new zs(this.num/r.num,this.unit||r.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return xa(this.num)}}function r6(t){if(t.includes(_d))return _d;for(var r=t;r.includes("*")||r.includes("/");){var n,[,s,a,l]=(n=M4.exec(r))!==null&&n!==void 0?n:[],c=zs.parse(s??""),u=zs.parse(l??""),d=a==="*"?c.multiply(u):c.divide(u);if(d.isNaN())return _d;r=r.replace(M4,d.toString())}for(;r.includes("+")||/.-\d+(?:\.\d+)?/.test(r);){var h,[,x,p,y]=(h=T4.exec(r))!==null&&h!==void 0?h:[],v=zs.parse(x??""),w=zs.parse(y??""),b=p==="+"?v.add(w):v.subtract(w);if(b.isNaN())return _d;r=r.replace(T4,b.toString())}return r}var O4=/\(([^()]*)\)/;function _me(t){for(var r=t,n;(n=O4.exec(r))!=null;){var[,s]=n;r=r.replace(O4,r6(s))}return r}function Cme(t){var r=t.replace(/\s+/g,"");return r=_me(r),r=r6(r),r}function Sme(t){try{return Cme(t)}catch{return _d}}function Kb(t){var r=Sme(t.slice(5,-1));return r===_d?"":r}var kme=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],Ame=["dx","dy","angle","className","breakAll"];function Mw(){return Mw=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var s in n)({}).hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Mw.apply(null,arguments)}function P4(t,r){if(t==null)return{};var n,s,a=Eme(t,r);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(s=0;s<l.length;s++)n=l[s],r.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function Eme(t,r){if(t==null)return{};var n={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(r.indexOf(s)!==-1)continue;n[s]=t[s]}return n}var n6=/[ \f\n\r\t\v\u2028\u2029]+/,s6=t=>{var{children:r,breakAll:n,style:s}=t;try{var a=[];Wn(r)||(n?a=r.toString().split(""):a=r.toString().split(n6));var l=a.map(u=>({word:u,width:Mm(u,s).width})),c=n?0:Mm(" ",s).width;return{wordsWithComputedWidth:l,spaceWidth:c}}catch{return null}},Mme=(t,r,n,s,a)=>{var{maxLines:l,children:c,style:u,breakAll:d}=t,h=Et(l),x=c,p=function(){var ie=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return ie.reduce((V,xe)=>{var{word:pe,width:re}=xe,M=V[V.length-1];if(M&&(s==null||a||M.width+re+n<Number(s)))M.words.push(pe),M.width+=re+n;else{var B={words:[pe],width:re};V.push(B)}return V},[])},y=p(r),v=J=>J.reduce((ie,V)=>ie.width>V.width?ie:V);if(!h||a)return y;var w=y.length>l||v(y).width>Number(s);if(!w)return y;for(var b="…",N=J=>{var ie=x.slice(0,J),V=s6({breakAll:d,style:u,children:ie+b}).wordsWithComputedWidth,xe=p(V),pe=xe.length>l||v(xe).width>Number(s);return[pe,xe]},_=0,S=x.length-1,k=0,E;_<=S&&k<=x.length-1;){var A=Math.floor((_+S)/2),O=A-1,[z,R]=N(O),[G]=N(A);if(!z&&!G&&(_=A+1),z&&G&&(S=A-1),!z&&G){E=R;break}k++}return E||y},D4=t=>{var r=Wn(t)?[]:t.toString().split(n6);return[{words:r}]},Tme=t=>{var{width:r,scaleToFit:n,children:s,style:a,breakAll:l,maxLines:c}=t;if((r||n)&&!vh.isSsr){var u,d,h=s6({breakAll:l,children:s,style:a});if(h){var{wordsWithComputedWidth:x,spaceWidth:p}=h;u=x,d=p}else return D4(s);return Mme({breakAll:l,children:s,maxLines:c,style:a},u,d,r,n)}return D4(s)},R4="#808080",E1=f.forwardRef((t,r)=>{var{x:n=0,y:s=0,lineHeight:a="1em",capHeight:l="0.71em",scaleToFit:c=!1,textAnchor:u="start",verticalAnchor:d="end",fill:h=R4}=t,x=P4(t,kme),p=f.useMemo(()=>Tme({breakAll:x.breakAll,children:x.children,maxLines:x.maxLines,scaleToFit:c,style:x.style,width:x.width}),[x.breakAll,x.children,x.maxLines,c,x.style,x.width]),{dx:y,dy:v,angle:w,className:b,breakAll:N}=x,_=P4(x,Ame);if(!Oi(n)||!Oi(s))return null;var S=n+(Et(y)?y:0),k=s+(Et(v)?v:0),E;switch(d){case"start":E=Kb("calc(".concat(l,")"));break;case"middle":E=Kb("calc(".concat((p.length-1)/2," * -").concat(a," + (").concat(l," / 2))"));break;default:E=Kb("calc(".concat(p.length-1," * -").concat(a,")"));break}var A=[];if(c){var O=p[0].width,{width:z}=x;A.push("scale(".concat(Et(z)?z/O:1,")"))}return w&&A.push("rotate(".concat(w,", ").concat(S,", ").concat(k,")")),A.length&&(_.transform=A.join(" ")),f.createElement("text",Mw({},ns(_,!0),{ref:r,x:S,y:k,className:Ur("recharts-text",b),textAnchor:u,fill:h.includes("url")?R4:h}),p.map((R,G)=>{var J=R.words.join(N?"":" ");return f.createElement("tspan",{x:S,dy:G===0?E:a,key:"".concat(J,"-").concat(G)},J)}))});E1.displayName="Text";var Ome=["offset"],Pme=["labelRef"];function L4(t,r){if(t==null)return{};var n,s,a=Dme(t,r);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(s=0;s<l.length;s++)n=l[s],r.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function Dme(t,r){if(t==null)return{};var n={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(r.indexOf(s)!==-1)continue;n[s]=t[s]}return n}function I4(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);r&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,s)}return n}function pn(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?I4(Object(n),!0).forEach(function(s){Rme(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):I4(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}function Rme(t,r,n){return(r=Lme(r))in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function Lme(t){var r=Ime(t,"string");return typeof r=="symbol"?r:r+""}function Ime(t,r){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var s=n.call(t,r);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}function el(){return el=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var s in n)({}).hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},el.apply(null,arguments)}var $me=t=>{var{value:r,formatter:n}=t,s=Wn(t.children)?r:t.children;return typeof n=="function"?n(s):s},M1=t=>t!=null&&typeof t=="function",Fme=(t,r)=>{var n=Da(r-t),s=Math.min(Math.abs(r-t),360);return n*s},qme=(t,r,n,s)=>{var{position:a,offset:l,className:c}=t,{cx:u,cy:d,innerRadius:h,outerRadius:x,startAngle:p,endAngle:y,clockWise:v}=s,w=(h+x)/2,b=Fme(p,y),N=b>=0?1:-1,_,S;a==="insideStart"?(_=p+N*l,S=v):a==="insideEnd"?(_=y-N*l,S=!v):a==="end"&&(_=y+N*l,S=v),S=b<=0?S:!S;var k=hs(u,d,w,_),E=hs(u,d,w,_+(S?1:-1)*359),A="M".concat(k.x,",").concat(k.y,`
    A`).concat(w,",").concat(w,",0,1,").concat(S?0:1,`,
    `).concat(E.x,",").concat(E.y),O=Wn(t.id)?$m("recharts-radial-line-"):t.id;return f.createElement("text",el({},n,{dominantBaseline:"central",className:Ur("recharts-radial-bar-label",c)}),f.createElement("defs",null,f.createElement("path",{id:O,d:A})),f.createElement("textPath",{xlinkHref:"#".concat(O)},r))},Ume=(t,r,n)=>{var{cx:s,cy:a,innerRadius:l,outerRadius:c,startAngle:u,endAngle:d}=t,h=(u+d)/2;if(n==="outside"){var{x,y:p}=hs(s,a,c+r,h);return{x,y:p,textAnchor:x>=s?"start":"end",verticalAnchor:"middle"}}if(n==="center")return{x:s,y:a,textAnchor:"middle",verticalAnchor:"middle"};if(n==="centerTop")return{x:s,y:a,textAnchor:"middle",verticalAnchor:"start"};if(n==="centerBottom")return{x:s,y:a,textAnchor:"middle",verticalAnchor:"end"};var y=(l+c)/2,{x:v,y:w}=hs(s,a,y,h);return{x:v,y:w,textAnchor:"middle",verticalAnchor:"middle"}},zme=(t,r)=>{var{parentViewBox:n,offset:s,position:a}=t,{x:l,y:c,width:u,height:d}=r,h=d>=0?1:-1,x=h*s,p=h>0?"end":"start",y=h>0?"start":"end",v=u>=0?1:-1,w=v*s,b=v>0?"end":"start",N=v>0?"start":"end";if(a==="top"){var _={x:l+u/2,y:c-h*s,textAnchor:"middle",verticalAnchor:p};return pn(pn({},_),n?{height:Math.max(c-n.y,0),width:u}:{})}if(a==="bottom"){var S={x:l+u/2,y:c+d+x,textAnchor:"middle",verticalAnchor:y};return pn(pn({},S),n?{height:Math.max(n.y+n.height-(c+d),0),width:u}:{})}if(a==="left"){var k={x:l-w,y:c+d/2,textAnchor:b,verticalAnchor:"middle"};return pn(pn({},k),n?{width:Math.max(k.x-n.x,0),height:d}:{})}if(a==="right"){var E={x:l+u+w,y:c+d/2,textAnchor:N,verticalAnchor:"middle"};return pn(pn({},E),n?{width:Math.max(n.x+n.width-E.x,0),height:d}:{})}var A=n?{width:u,height:d}:{};return a==="insideLeft"?pn({x:l+w,y:c+d/2,textAnchor:N,verticalAnchor:"middle"},A):a==="insideRight"?pn({x:l+u-w,y:c+d/2,textAnchor:b,verticalAnchor:"middle"},A):a==="insideTop"?pn({x:l+u/2,y:c+x,textAnchor:"middle",verticalAnchor:y},A):a==="insideBottom"?pn({x:l+u/2,y:c+d-x,textAnchor:"middle",verticalAnchor:p},A):a==="insideTopLeft"?pn({x:l+w,y:c+x,textAnchor:N,verticalAnchor:y},A):a==="insideTopRight"?pn({x:l+u-w,y:c+x,textAnchor:b,verticalAnchor:y},A):a==="insideBottomLeft"?pn({x:l+w,y:c+d-x,textAnchor:N,verticalAnchor:p},A):a==="insideBottomRight"?pn({x:l+u-w,y:c+d-x,textAnchor:b,verticalAnchor:p},A):a&&typeof a=="object"&&(Et(a.x)||Jo(a.x))&&(Et(a.y)||Jo(a.y))?pn({x:l+yo(a.x,u),y:c+yo(a.y,d),textAnchor:"end",verticalAnchor:"end"},A):pn({x:l+u/2,y:c+d/2,textAnchor:"middle",verticalAnchor:"middle"},A)},Bme=t=>"cx"in t&&Et(t.cx);function ua(t){var{offset:r=5}=t,n=L4(t,Ome),s=pn({offset:r},n),{viewBox:a,position:l,value:c,children:u,content:d,className:h="",textBreakAll:x,labelRef:p}=s,y=Bt(W$),v=S_(),w=l==="center"?v:y??v,b=a||w;if(!b||Wn(c)&&Wn(u)&&!f.isValidElement(d)&&typeof d!="function")return null;var N=pn(pn({},s),{},{viewBox:b});if(f.isValidElement(d)){var{labelRef:_}=N,S=L4(N,Pme);return f.cloneElement(d,S)}var k;if(typeof d=="function"){if(k=f.createElement(d,N),f.isValidElement(k))return k}else k=$me(s);var E=Bme(b),A=ns(s,!0);if(E&&(l==="insideStart"||l==="insideEnd"||l==="end"))return qme(s,k,A,b);var O=E?Ume(b,s.offset,s.position):zme(s,b);return f.createElement(E1,el({ref:p,className:Ur("recharts-label",h)},A,O,{breakAll:x}),k)}ua.displayName="Label";var a6=t=>{var{cx:r,cy:n,angle:s,startAngle:a,endAngle:l,r:c,radius:u,innerRadius:d,outerRadius:h,x,y:p,top:y,left:v,width:w,height:b,clockWise:N,labelViewBox:_}=t;if(_)return _;if(Et(w)&&Et(b)){if(Et(x)&&Et(p))return{x,y:p,width:w,height:b};if(Et(y)&&Et(v))return{x:y,y:v,width:w,height:b}}if(Et(x)&&Et(p))return{x,y:p,width:0,height:0};if(Et(r)&&Et(n))return{cx:r,cy:n,startAngle:a||s||0,endAngle:l||s||0,innerRadius:d||0,outerRadius:h||u||c||0,clockWise:N};if(t.viewBox)return t.viewBox},Wme=(t,r,n)=>{if(!t)return null;var s={viewBox:r,labelRef:n};return t===!0?f.createElement(ua,el({key:"label-implicit"},s)):Oi(t)?f.createElement(ua,el({key:"label-implicit",value:t},s)):f.isValidElement(t)?t.type===ua?f.cloneElement(t,pn({key:"label-implicit"},s)):f.createElement(ua,el({key:"label-implicit",content:t},s)):M1(t)?f.createElement(ua,el({key:"label-implicit",content:t},s)):t&&typeof t=="object"?f.createElement(ua,el({},t,{key:"label-implicit"},s)):null},Hme=function(r,n){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!r||!r.children&&s&&!r.label)return null;var{children:a,labelRef:l}=r,c=a6(r),u=_5(a,ua).map((h,x)=>f.cloneElement(h,{viewBox:n||c,key:"label-".concat(x)}));if(!s)return u;var d=Wme(r.label,n||c,l);return[d,...u]};ua.parseViewBox=a6;ua.renderCallByParent=Hme;var Gb={},Qb={},$4;function Vme(){return $4||($4=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function r(n){return n[n.length-1]}t.last=r})(Qb)),Qb}var Xb={},F4;function Yme(){return F4||(F4=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function r(n){return Array.isArray(n)?n:Array.from(n)}t.toArray=r})(Xb)),Xb}var q4;function Kme(){return q4||(q4=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=Vme(),n=Yme(),s=h_();function a(l){if(s.isArrayLike(l))return r.last(n.toArray(l))}t.last=a})(Gb)),Gb}var Zb,U4;function Gme(){return U4||(U4=1,Zb=Kme().last),Zb}var Qme=Gme();const Xme=Di(Qme);var Zme=["valueAccessor"],Jme=["data","dataKey","clockWise","id","textBreakAll"];function Cp(){return Cp=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var s in n)({}).hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Cp.apply(null,arguments)}function z4(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);r&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,s)}return n}function B4(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?z4(Object(n),!0).forEach(function(s){ehe(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):z4(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}function ehe(t,r,n){return(r=the(r))in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function the(t){var r=rhe(t,"string");return typeof r=="symbol"?r:r+""}function rhe(t,r){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var s=n.call(t,r);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}function W4(t,r){if(t==null)return{};var n,s,a=nhe(t,r);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(s=0;s<l.length;s++)n=l[s],r.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function nhe(t,r){if(t==null)return{};var n={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(r.indexOf(s)!==-1)continue;n[s]=t[s]}return n}var she=t=>Array.isArray(t.value)?Xme(t.value):t.value;function cc(t){var{valueAccessor:r=she}=t,n=W4(t,Zme),{data:s,dataKey:a,clockWise:l,id:c,textBreakAll:u}=n,d=W4(n,Jme);return!s||!s.length?null:f.createElement(pl,{className:"recharts-label-list"},s.map((h,x)=>{var p=Wn(a)?r(h,x):Ts(h&&h.payload,a),y=Wn(c)?{}:{id:"".concat(c,"-").concat(x)};return f.createElement(ua,Cp({},ns(h,!0),d,y,{parentViewBox:h.parentViewBox,value:p,textBreakAll:u,viewBox:ua.parseViewBox(Wn(l)?h:B4(B4({},h),{},{clockWise:l})),key:"label-".concat(x),index:x}))}))}cc.displayName="LabelList";function ahe(t,r){return t?t===!0?f.createElement(cc,{key:"labelList-implicit",data:r}):f.isValidElement(t)||M1(t)?f.createElement(cc,{key:"labelList-implicit",data:r,content:t}):typeof t=="object"?f.createElement(cc,Cp({data:r},t,{key:"labelList-implicit"})):null:null}function ihe(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var{children:s}=t,a=_5(s,cc).map((c,u)=>f.cloneElement(c,{data:r,key:"labelList-".concat(u)}));if(!n)return a;var l=ahe(t.label,r);return[l,...a]}cc.renderCallByParent=ihe;function Tw(){return Tw=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var s in n)({}).hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Tw.apply(null,arguments)}var i6=t=>{var{cx:r,cy:n,r:s,className:a}=t,l=Ur("recharts-dot",a);return r===+r&&n===+n&&s===+s?f.createElement("circle",Tw({},Ac(t),i_(t),{className:l,cx:r,cy:n,r:s})):null},lhe={radiusAxis:{},angleAxis:{}},l6=ga({name:"polarAxis",initialState:lhe,reducers:{addRadiusAxis(t,r){t.radiusAxis[r.payload.id]=r.payload},removeRadiusAxis(t,r){delete t.radiusAxis[r.payload.id]},addAngleAxis(t,r){t.angleAxis[r.payload.id]=r.payload},removeAngleAxis(t,r){delete t.angleAxis[r.payload.id]}}}),{addRadiusAxis:ige,removeRadiusAxis:lge,addAngleAxis:oge,removeAngleAxis:cge}=l6.actions,ohe=l6.reducer;function che(t){var{fn:r,args:n}=t,s=js(),a=Ba();return f.useEffect(()=>{if(!a){var l=r(n);return s(Nde(l)),()=>{s(_de(l))}}},[r,n,s,a]),null}var dhe=()=>{};function uhe(t){var{legendPayload:r}=t,n=js(),s=Ba();return f.useEffect(()=>s?dhe:(n(eae(r)),()=>{n(tae(r))}),[n,s,r]),null}function mhe(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",n=f.useRef($m(r)),s=f.useRef(t);return s.current!==t&&(n.current=$m(r),s.current=t),n.current}var Jb,hhe=()=>{var[t]=f.useState(()=>$m("uid-"));return t},fhe=(Jb=$w.useId)!==null&&Jb!==void 0?Jb:hhe;function xhe(t,r){var n=fhe();return r||(t?"".concat(t,"-").concat(n):n)}var phe=f.createContext(void 0),ghe=t=>{var{id:r,type:n,children:s}=t,a=xhe("recharts-".concat(n),r);return f.createElement(phe.Provider,{value:a},s(a))},yhe={cartesianItems:[],polarItems:[]},o6=ga({name:"graphicalItems",initialState:yhe,reducers:{addCartesianGraphicalItem(t,r){t.cartesianItems.push(r.payload)},replaceCartesianGraphicalItem(t,r){var{prev:n,next:s}=r.payload,a=al(t).cartesianItems.indexOf(n);a>-1&&(t.cartesianItems[a]=s)},removeCartesianGraphicalItem(t,r){var n=al(t).cartesianItems.indexOf(r.payload);n>-1&&t.cartesianItems.splice(n,1)},addPolarGraphicalItem(t,r){t.polarItems.push(r.payload)},removePolarGraphicalItem(t,r){var n=al(t).polarItems.indexOf(r.payload);n>-1&&t.polarItems.splice(n,1)}}}),{addCartesianGraphicalItem:vhe,replaceCartesianGraphicalItem:jhe,removeCartesianGraphicalItem:bhe,addPolarGraphicalItem:dge,removePolarGraphicalItem:uge}=o6.actions,whe=o6.reducer;function Nhe(t){var r=js(),n=f.useRef(null);return f.useEffect(()=>{n.current===null?r(vhe(t)):n.current!==t&&r(jhe({prev:n.current,next:t})),n.current=t},[r,t]),f.useEffect(()=>()=>{n.current&&(r(bhe(n.current)),n.current=null)},[r]),null}function _he(){}var Che={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},H4={t:0},e0={t:1};function She(t){var r=No(t,Che),{isActive:n,canBegin:s,duration:a,easing:l,begin:c,onAnimationEnd:u,onAnimationStart:d,children:h}=r,x=UI("JavascriptAnimate",r.animationManager),[p,y]=f.useState(n?H4:e0),v=f.useRef(null);return f.useEffect(()=>{n||y(e0)},[n]),f.useEffect(()=>{if(!n||!s)return _he;var w=qI(H4,e0,$I(l),a,y,x.getTimeoutController()),b=()=>{v.current=w()};return x.start([d,c,b,a,u]),()=>{x.stop(),v.current&&v.current(),u()}},[n,s,a,l,c,d,u,x]),h(p.t)}var khe=Ke([bs],t=>{if(t)return{top:t.top,bottom:t.bottom,left:t.left,right:t.right}}),Ahe=Ke([khe,_l,Cl],(t,r,n)=>{if(!(!t||r==null||n==null))return{x:t.left,y:t.top,width:Math.max(0,r-t.left-t.right),height:Math.max(0,n-t.top-t.bottom)}}),T1=()=>Bt(Ahe),Ehe=()=>Bt(hue);function V4(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);r&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,s)}return n}function Y4(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?V4(Object(n),!0).forEach(function(s){Mhe(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):V4(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}function Mhe(t,r,n){return(r=The(r))in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function The(t){var r=Ohe(t,"string");return typeof r=="symbol"?r:r+""}function Ohe(t,r){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var s=n.call(t,r);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}var Phe=t=>{var{point:r,childIndex:n,mainColor:s,activeDot:a,dataKey:l}=t;if(a===!1||r.x==null||r.y==null)return null;var c=Y4(Y4({index:n,dataKey:l,cx:r.x,cy:r.y,r:4,fill:s??"none",strokeWidth:2,stroke:"#fff",payload:r.payload,value:r.value},ns(a,!1)),i_(a)),u;return f.isValidElement(a)?u=f.cloneElement(a,c):typeof a=="function"?u=a(c):u=f.createElement(i6,c),f.createElement(pl,{className:"recharts-active-dot"},u)};function K4(t){var{points:r,mainColor:n,activeDot:s,itemDataKey:a}=t,l=Bt(Ym),c=Ehe();if(r==null||c==null)return null;var u=r.find(d=>c.includes(d.payload));return Wn(u)?null:Phe({point:u,childIndex:Number(l),mainColor:n,dataKey:a,activeDot:s})}var Dhe={},c6=ga({name:"errorBars",initialState:Dhe,reducers:{addErrorBar:(t,r)=>{var{itemId:n,errorBar:s}=r.payload;t[n]||(t[n]=[]),t[n].push(s)},removeErrorBar:(t,r)=>{var{itemId:n,errorBar:s}=r.payload;t[n]&&(t[n]=t[n].filter(a=>a.dataKey!==s.dataKey||a.direction!==s.direction))}}}),{addErrorBar:mge,removeErrorBar:hge}=c6.actions,Rhe=c6.reducer;function d6(t,r){var n,s,a=Bt(h=>kl(h,t)),l=Bt(h=>ko(h,r)),c=(n=a?.allowDataOverflow)!==null&&n!==void 0?n:ia.allowDataOverflow,u=(s=l?.allowDataOverflow)!==null&&s!==void 0?s:la.allowDataOverflow,d=c||u;return{needClip:d,needClipX:c,needClipY:u}}function Lhe(t){var{xAxisId:r,yAxisId:n,clipPathId:s}=t,a=T1(),{needClipX:l,needClipY:c,needClip:u}=d6(r,n);if(!u)return null;var{x:d,y:h,width:x,height:p}=a;return f.createElement("clipPath",{id:"clipPath-".concat(s)},f.createElement("rect",{x:l?d:d-x/2,y:c?h:h-p/2,width:l?x:x*2,height:c?p:p*2}))}var Ihe=t=>{var{chartData:r}=t,n=js(),s=Ba();return f.useEffect(()=>s?()=>{}:(n(g4(r)),()=>{n(g4(void 0))}),[r,n,s]),null},G4={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},u6=ga({name:"brush",initialState:G4,reducers:{setBrushSettings(t,r){return r.payload==null?G4:r.payload}}}),{setBrushSettings:fge}=u6.actions,$he=u6.reducer;function Fhe(t,r,n){return(r=qhe(r))in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function qhe(t){var r=Uhe(t,"string");return typeof r=="symbol"?r:r+""}function Uhe(t,r){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var s=n.call(t,r);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}class O1{static create(r){return new O1(r)}constructor(r){this.scale=r}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(r){var{bandAware:n,position:s}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(r!==void 0){if(s)switch(s){case"start":return this.scale(r);case"middle":{var a=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+a}case"end":{var l=this.bandwidth?this.bandwidth():0;return this.scale(r)+l}default:return this.scale(r)}if(n){var c=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+c}return this.scale(r)}}isInRange(r){var n=this.range(),s=n[0],a=n[n.length-1];return s<=a?r>=s&&r<=a:r>=a&&r<=s}}Fhe(O1,"EPS",1e-4);function zhe(t){return(t%180+180)%180}var Bhe=function(r){var{width:n,height:s}=r,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,l=zhe(a),c=l*Math.PI/180,u=Math.atan(s/n),d=c>u&&c<Math.PI-u?s/Math.sin(c):n/Math.cos(c);return Math.abs(d)},Whe={dots:[],areas:[],lines:[]},m6=ga({name:"referenceElements",initialState:Whe,reducers:{addDot:(t,r)=>{t.dots.push(r.payload)},removeDot:(t,r)=>{var n=al(t).dots.findIndex(s=>s===r.payload);n!==-1&&t.dots.splice(n,1)},addArea:(t,r)=>{t.areas.push(r.payload)},removeArea:(t,r)=>{var n=al(t).areas.findIndex(s=>s===r.payload);n!==-1&&t.areas.splice(n,1)},addLine:(t,r)=>{t.lines.push(r.payload)},removeLine:(t,r)=>{var n=al(t).lines.findIndex(s=>s===r.payload);n!==-1&&t.lines.splice(n,1)}}}),{addDot:xge,removeDot:pge,addArea:gge,removeArea:yge,addLine:vge,removeLine:jge}=m6.actions,Hhe=m6.reducer,Vhe=f.createContext(void 0),Yhe=t=>{var{children:r}=t,[n]=f.useState("".concat($m("recharts"),"-clip")),s=T1();if(s==null)return null;var{x:a,y:l,width:c,height:u}=s;return f.createElement(Vhe.Provider,{value:n},f.createElement("defs",null,f.createElement("clipPath",{id:n},f.createElement("rect",{x:a,y:l,height:u,width:c}))),r)};function t0(t,r){for(var n in t)if({}.hasOwnProperty.call(t,n)&&(!{}.hasOwnProperty.call(r,n)||t[n]!==r[n]))return!1;for(var s in r)if({}.hasOwnProperty.call(r,s)&&!{}.hasOwnProperty.call(t,s))return!1;return!0}function h6(t,r,n){if(r<1)return[];if(r===1&&n===void 0)return t;for(var s=[],a=0;a<t.length;a+=r)s.push(t[a]);return s}function Khe(t,r,n){var s={width:t.width+r.width,height:t.height+r.height};return Bhe(s,n)}function Ghe(t,r,n){var s=n==="width",{x:a,y:l,width:c,height:u}=t;return r===1?{start:s?a:l,end:s?a+c:l+u}:{start:s?a+c:l+u,end:s?a:l}}function Sp(t,r,n,s,a){if(t*r<t*s||t*r>t*a)return!1;var l=n();return t*(r-t*l/2-s)>=0&&t*(r+t*l/2-a)<=0}function Qhe(t,r){return h6(t,r+1)}function Xhe(t,r,n,s,a){for(var l=(s||[]).slice(),{start:c,end:u}=r,d=0,h=1,x=c,p=function(){var w=s?.[d];if(w===void 0)return{v:h6(s,h)};var b=d,N,_=()=>(N===void 0&&(N=n(w,b)),N),S=w.coordinate,k=d===0||Sp(t,S,_,x,u);k||(d=0,x=c,h+=1),k&&(x=S+t*(_()/2+a),d+=h)},y;h<=l.length;)if(y=p(),y)return y.v;return[]}function Q4(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);r&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,s)}return n}function _s(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?Q4(Object(n),!0).forEach(function(s){Zhe(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Q4(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}function Zhe(t,r,n){return(r=Jhe(r))in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function Jhe(t){var r=efe(t,"string");return typeof r=="symbol"?r:r+""}function efe(t,r){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var s=n.call(t,r);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}function tfe(t,r,n,s,a){for(var l=(s||[]).slice(),c=l.length,{start:u}=r,{end:d}=r,h=function(y){var v=l[y],w,b=()=>(w===void 0&&(w=n(v,y)),w);if(y===c-1){var N=t*(v.coordinate+t*b()/2-d);l[y]=v=_s(_s({},v),{},{tickCoord:N>0?v.coordinate-N*t:v.coordinate})}else l[y]=v=_s(_s({},v),{},{tickCoord:v.coordinate});var _=Sp(t,v.tickCoord,b,u,d);_&&(d=v.tickCoord-t*(b()/2+a),l[y]=_s(_s({},v),{},{isShow:!0}))},x=c-1;x>=0;x--)h(x);return l}function rfe(t,r,n,s,a,l){var c=(s||[]).slice(),u=c.length,{start:d,end:h}=r;if(l){var x=s[u-1],p=n(x,u-1),y=t*(x.coordinate+t*p/2-h);c[u-1]=x=_s(_s({},x),{},{tickCoord:y>0?x.coordinate-y*t:x.coordinate});var v=Sp(t,x.tickCoord,()=>p,d,h);v&&(h=x.tickCoord-t*(p/2+a),c[u-1]=_s(_s({},x),{},{isShow:!0}))}for(var w=l?u-1:u,b=function(S){var k=c[S],E,A=()=>(E===void 0&&(E=n(k,S)),E);if(S===0){var O=t*(k.coordinate-t*A()/2-d);c[S]=k=_s(_s({},k),{},{tickCoord:O<0?k.coordinate-O*t:k.coordinate})}else c[S]=k=_s(_s({},k),{},{tickCoord:k.coordinate});var z=Sp(t,k.tickCoord,A,d,h);z&&(d=k.tickCoord+t*(A()/2+a),c[S]=_s(_s({},k),{},{isShow:!0}))},N=0;N<w;N++)b(N);return c}function P1(t,r,n){var{tick:s,ticks:a,viewBox:l,minTickGap:c,orientation:u,interval:d,tickFormatter:h,unit:x,angle:p}=t;if(!a||!a.length||!s)return[];if(Et(d)||vh.isSsr){var y;return(y=Qhe(a,Et(d)?d:0))!==null&&y!==void 0?y:[]}var v=[],w=u==="top"||u==="bottom"?"width":"height",b=x&&w==="width"?Mm(x,{fontSize:r,letterSpacing:n}):{width:0,height:0},N=(k,E)=>{var A=typeof h=="function"?h(k.value,E):k.value;return w==="width"?Khe(Mm(A,{fontSize:r,letterSpacing:n}),b,p):Mm(A,{fontSize:r,letterSpacing:n})[w]},_=a.length>=2?Da(a[1].coordinate-a[0].coordinate):1,S=Ghe(l,_,w);return d==="equidistantPreserveStart"?Xhe(_,S,N,a,c):(d==="preserveStart"||d==="preserveStartEnd"?v=rfe(_,S,N,a,c,d==="preserveStartEnd"):v=tfe(_,S,N,a,c),v.filter(k=>k.isShow))}var nfe=["viewBox"],sfe=["viewBox"];function Cd(){return Cd=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var s in n)({}).hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Cd.apply(null,arguments)}function X4(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);r&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,s)}return n}function Un(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?X4(Object(n),!0).forEach(function(s){D1(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):X4(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}function Z4(t,r){if(t==null)return{};var n,s,a=afe(t,r);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(s=0;s<l.length;s++)n=l[s],r.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function afe(t,r){if(t==null)return{};var n={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(r.indexOf(s)!==-1)continue;n[s]=t[s]}return n}function D1(t,r,n){return(r=ife(r))in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function ife(t){var r=lfe(t,"string");return typeof r=="symbol"?r:r+""}function lfe(t,r){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var s=n.call(t,r);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}class Ao extends f.Component{constructor(r){super(r),this.tickRefs=f.createRef(),this.tickRefs.current=[],this.state={fontSize:"",letterSpacing:""}}shouldComponentUpdate(r,n){var{viewBox:s}=r,a=Z4(r,nfe),l=this.props,{viewBox:c}=l,u=Z4(l,sfe);return!t0(s,c)||!t0(a,u)||!t0(n,this.state)}getTickLineCoord(r){var{x:n,y:s,width:a,height:l,orientation:c,tickSize:u,mirror:d,tickMargin:h}=this.props,x,p,y,v,w,b,N=d?-1:1,_=r.tickSize||u,S=Et(r.tickCoord)?r.tickCoord:r.coordinate;switch(c){case"top":x=p=r.coordinate,v=s+ +!d*l,y=v-N*_,b=y-N*h,w=S;break;case"left":y=v=r.coordinate,p=n+ +!d*a,x=p-N*_,w=x-N*h,b=S;break;case"right":y=v=r.coordinate,p=n+ +d*a,x=p+N*_,w=x+N*h,b=S;break;default:x=p=r.coordinate,v=s+ +d*l,y=v+N*_,b=y+N*h,w=S;break}return{line:{x1:x,y1:y,x2:p,y2:v},tick:{x:w,y:b}}}getTickTextAnchor(){var{orientation:r,mirror:n}=this.props,s;switch(r){case"left":s=n?"start":"end";break;case"right":s=n?"end":"start";break;default:s="middle";break}return s}getTickVerticalAnchor(){var{orientation:r,mirror:n}=this.props;switch(r){case"left":case"right":return"middle";case"top":return n?"start":"end";default:return n?"end":"start"}}renderAxisLine(){var{x:r,y:n,width:s,height:a,orientation:l,mirror:c,axisLine:u}=this.props,d=Un(Un(Un({},ns(this.props,!1)),ns(u,!1)),{},{fill:"none"});if(l==="top"||l==="bottom"){var h=+(l==="top"&&!c||l==="bottom"&&c);d=Un(Un({},d),{},{x1:r,y1:n+h*a,x2:r+s,y2:n+h*a})}else{var x=+(l==="left"&&!c||l==="right"&&c);d=Un(Un({},d),{},{x1:r+x*s,y1:n,x2:r+x*s,y2:n+a})}return f.createElement("line",Cd({},d,{className:Ur("recharts-cartesian-axis-line",vc(u,"className"))}))}static renderTickItem(r,n,s){var a,l=Ur(n.className,"recharts-cartesian-axis-tick-value");if(f.isValidElement(r))a=f.cloneElement(r,Un(Un({},n),{},{className:l}));else if(typeof r=="function")a=r(Un(Un({},n),{},{className:l}));else{var c="recharts-cartesian-axis-tick-value";typeof r!="boolean"&&(c=Ur(c,r.className)),a=f.createElement(E1,Cd({},n,{className:c}),s)}return a}renderTicks(r,n){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],{tickLine:a,stroke:l,tick:c,tickFormatter:u,unit:d,padding:h}=this.props,x=P1(Un(Un({},this.props),{},{ticks:s}),r,n),p=this.getTickTextAnchor(),y=this.getTickVerticalAnchor(),v=Ac(this.props),w=ns(c,!1),b=Un(Un({},v),{},{fill:"none"},ns(a,!1)),N=x.map((_,S)=>{var{line:k,tick:E}=this.getTickLineCoord(_),A=Un(Un(Un(Un({textAnchor:p,verticalAnchor:y},v),{},{stroke:"none",fill:l},w),E),{},{index:S,payload:_,visibleTicksCount:x.length,tickFormatter:u,padding:h});return f.createElement(pl,Cd({className:"recharts-cartesian-axis-tick",key:"tick-".concat(_.value,"-").concat(_.coordinate,"-").concat(_.tickCoord)},b5(this.props,_,S)),a&&f.createElement("line",Cd({},b,k,{className:Ur("recharts-cartesian-axis-tick-line",vc(a,"className"))})),c&&Ao.renderTickItem(c,A,"".concat(typeof u=="function"?u(_.value,S):_.value).concat(d||"")))});return N.length>0?f.createElement("g",{className:"recharts-cartesian-axis-ticks"},N):null}render(){var{axisLine:r,width:n,height:s,className:a,hide:l}=this.props;if(l)return null;var{ticks:c}=this.props;return n!=null&&n<=0||s!=null&&s<=0?null:f.createElement(pl,{className:Ur("recharts-cartesian-axis",a),ref:u=>{if(u){var d=u.getElementsByClassName("recharts-cartesian-axis-tick-value");this.tickRefs.current=Array.from(d);var h=d[0];if(h){var x=window.getComputedStyle(h).fontSize,p=window.getComputedStyle(h).letterSpacing;(x!==this.state.fontSize||p!==this.state.letterSpacing)&&this.setState({fontSize:window.getComputedStyle(h).fontSize,letterSpacing:window.getComputedStyle(h).letterSpacing})}}}},r&&this.renderAxisLine(),this.renderTicks(this.state.fontSize,this.state.letterSpacing,c),ua.renderCallByParent(this.props))}}D1(Ao,"displayName","CartesianAxis");D1(Ao,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var ofe=["x1","y1","x2","y2","key"],cfe=["offset"],dfe=["xAxisId","yAxisId"],ufe=["xAxisId","yAxisId"];function J4(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);r&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,s)}return n}function Ss(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?J4(Object(n),!0).forEach(function(s){mfe(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):J4(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}function mfe(t,r,n){return(r=hfe(r))in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function hfe(t){var r=ffe(t,"string");return typeof r=="symbol"?r:r+""}function ffe(t,r){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var s=n.call(t,r);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}function nc(){return nc=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var s in n)({}).hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},nc.apply(null,arguments)}function kp(t,r){if(t==null)return{};var n,s,a=xfe(t,r);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(s=0;s<l.length;s++)n=l[s],r.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function xfe(t,r){if(t==null)return{};var n={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(r.indexOf(s)!==-1)continue;n[s]=t[s]}return n}var pfe=t=>{var{fill:r}=t;if(!r||r==="none")return null;var{fillOpacity:n,x:s,y:a,width:l,height:c,ry:u}=t;return f.createElement("rect",{x:s,y:a,ry:u,width:l,height:c,stroke:"none",fill:r,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function f6(t,r){var n;if(f.isValidElement(t))n=f.cloneElement(t,r);else if(typeof t=="function")n=t(r);else{var{x1:s,y1:a,x2:l,y2:c,key:u}=r,d=kp(r,ofe),h=Ac(d),{offset:x}=h,p=kp(h,cfe);n=f.createElement("line",nc({},p,{x1:s,y1:a,x2:l,y2:c,fill:"none",key:u}))}return n}function gfe(t){var{x:r,width:n,horizontal:s=!0,horizontalPoints:a}=t;if(!s||!a||!a.length)return null;var{xAxisId:l,yAxisId:c}=t,u=kp(t,dfe),d=a.map((h,x)=>{var p=Ss(Ss({},u),{},{x1:r,y1:h,x2:r+n,y2:h,key:"line-".concat(x),index:x});return f6(s,p)});return f.createElement("g",{className:"recharts-cartesian-grid-horizontal"},d)}function yfe(t){var{y:r,height:n,vertical:s=!0,verticalPoints:a}=t;if(!s||!a||!a.length)return null;var{xAxisId:l,yAxisId:c}=t,u=kp(t,ufe),d=a.map((h,x)=>{var p=Ss(Ss({},u),{},{x1:h,y1:r,x2:h,y2:r+n,key:"line-".concat(x),index:x});return f6(s,p)});return f.createElement("g",{className:"recharts-cartesian-grid-vertical"},d)}function vfe(t){var{horizontalFill:r,fillOpacity:n,x:s,y:a,width:l,height:c,horizontalPoints:u,horizontal:d=!0}=t;if(!d||!r||!r.length)return null;var h=u.map(p=>Math.round(p+a-a)).sort((p,y)=>p-y);a!==h[0]&&h.unshift(0);var x=h.map((p,y)=>{var v=!h[y+1],w=v?a+c-p:h[y+1]-p;if(w<=0)return null;var b=y%r.length;return f.createElement("rect",{key:"react-".concat(y),y:p,x:s,height:w,width:l,stroke:"none",fill:r[b],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return f.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},x)}function jfe(t){var{vertical:r=!0,verticalFill:n,fillOpacity:s,x:a,y:l,width:c,height:u,verticalPoints:d}=t;if(!r||!n||!n.length)return null;var h=d.map(p=>Math.round(p+a-a)).sort((p,y)=>p-y);a!==h[0]&&h.unshift(0);var x=h.map((p,y)=>{var v=!h[y+1],w=v?a+c-p:h[y+1]-p;if(w<=0)return null;var b=y%n.length;return f.createElement("rect",{key:"react-".concat(y),x:p,y:l,width:w,height:u,stroke:"none",fill:n[b],fillOpacity:s,className:"recharts-cartesian-grid-bg"})});return f.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},x)}var bfe=(t,r)=>{var{xAxis:n,width:s,height:a,offset:l}=t;return AI(P1(Ss(Ss(Ss({},Ao.defaultProps),n),{},{ticks:EI(n),viewBox:{x:0,y:0,width:s,height:a}})),l.left,l.left+l.width,r)},wfe=(t,r)=>{var{yAxis:n,width:s,height:a,offset:l}=t;return AI(P1(Ss(Ss(Ss({},Ao.defaultProps),n),{},{ticks:EI(n),viewBox:{x:0,y:0,width:s,height:a}})),l.top,l.top+l.height,r)},Nfe={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0};function R1(t){var r=k_(),n=A_(),s=PI(),a=Ss(Ss({},No(t,Nfe)),{},{x:Et(t.x)?t.x:s.left,y:Et(t.y)?t.y:s.top,width:Et(t.width)?t.width:s.width,height:Et(t.height)?t.height:s.height}),{xAxisId:l,yAxisId:c,x:u,y:d,width:h,height:x,syncWithTicks:p,horizontalValues:y,verticalValues:v}=a,w=Ba(),b=Bt(G=>o4(G,"xAxis",l,w)),N=Bt(G=>o4(G,"yAxis",c,w));if(!Et(h)||h<=0||!Et(x)||x<=0||!Et(u)||u!==+u||!Et(d)||d!==+d)return null;var _=a.verticalCoordinatesGenerator||bfe,S=a.horizontalCoordinatesGenerator||wfe,{horizontalPoints:k,verticalPoints:E}=a;if((!k||!k.length)&&typeof S=="function"){var A=y&&y.length,O=S({yAxis:N?Ss(Ss({},N),{},{ticks:A?y:N.ticks}):void 0,width:r,height:n,offset:s},A?!0:p);Em(Array.isArray(O),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof O,"]")),Array.isArray(O)&&(k=O)}if((!E||!E.length)&&typeof _=="function"){var z=v&&v.length,R=_({xAxis:b?Ss(Ss({},b),{},{ticks:z?v:b.ticks}):void 0,width:r,height:n,offset:s},z?!0:p);Em(Array.isArray(R),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof R,"]")),Array.isArray(R)&&(E=R)}return f.createElement("g",{className:"recharts-cartesian-grid"},f.createElement(pfe,{fill:a.fill,fillOpacity:a.fillOpacity,x:a.x,y:a.y,width:a.width,height:a.height,ry:a.ry}),f.createElement(vfe,nc({},a,{horizontalPoints:k})),f.createElement(jfe,nc({},a,{verticalPoints:E})),f.createElement(gfe,nc({},a,{offset:s,horizontalPoints:k,xAxis:b,yAxis:N})),f.createElement(yfe,nc({},a,{offset:s,verticalPoints:E,xAxis:b,yAxis:N})))}R1.displayName="CartesianGrid";var x6=(t,r,n,s)=>SF(t,"xAxis",r,s),p6=(t,r,n,s)=>CF(t,"xAxis",r,s),g6=(t,r,n,s)=>SF(t,"yAxis",n,s),y6=(t,r,n,s)=>CF(t,"yAxis",n,s),_fe=Ke([en,x6,g6,p6,y6],(t,r,n,s,a)=>Nl(t,"xAxis")?iw(r,s,!1):iw(n,a,!1)),Cfe=(t,r,n,s,a)=>a,v6=Ke([K$,Cfe],(t,r)=>t.filter(n=>n.type==="area").find(n=>n.id===r)),Sfe=(t,r,n,s,a)=>{var l,c=v6(t,r,n,s,a);if(c!=null){var u=en(t),d=Nl(u,"xAxis"),h;if(d?h=Cw(t,"yAxis",n,s):h=Cw(t,"xAxis",r,s),h!=null){var{stackId:x}=c,p=d1(c);if(!(x==null||p==null)){var y=(l=h[x])===null||l===void 0?void 0:l.stackedData;return y?.find(v=>v.key===p)}}}},kfe=Ke([en,x6,g6,p6,y6,Sfe,t1,_fe,v6],(t,r,n,s,a,l,c,u,d)=>{var{chartData:h,dataStartIndex:x,dataEndIndex:p}=c;if(!(d==null||t!=="horizontal"&&t!=="vertical"||r==null||n==null||s==null||a==null||s.length===0||a.length===0||u==null)){var{data:y}=d,v;if(y&&y.length>0?v=y:v=h?.slice(x,p+1),v!=null){var w=void 0;return Yfe({layout:t,xAxis:r,yAxis:n,xAxisTicks:s,yAxisTicks:a,dataStartIndex:x,areaSettings:d,stackedData:l,displayedData:v,chartBaseValue:w,bandSize:u})}}}),Afe=["id"],Efe=["activeDot","animationBegin","animationDuration","animationEasing","connectNulls","dot","fill","fillOpacity","hide","isAnimationActive","legendType","stroke","xAxisId","yAxisId"];function j6(t,r){if(t==null)return{};var n,s,a=Mfe(t,r);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(s=0;s<l.length;s++)n=l[s],r.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function Mfe(t,r){if(t==null)return{};var n={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(r.indexOf(s)!==-1)continue;n[s]=t[s]}return n}function eO(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);r&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,s)}return n}function sc(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?eO(Object(n),!0).forEach(function(s){Tfe(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):eO(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}function Tfe(t,r,n){return(r=Ofe(r))in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function Ofe(t){var r=Pfe(t,"string");return typeof r=="symbol"?r:r+""}function Pfe(t,r){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var s=n.call(t,r);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}function ll(){return ll=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var s in n)({}).hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},ll.apply(null,arguments)}function Ap(t,r){return t&&t!=="none"?t:r}var Dfe=t=>{var{dataKey:r,name:n,stroke:s,fill:a,legendType:l,hide:c}=t;return[{inactive:c,dataKey:r,type:l,color:Ap(s,a),value:MI(n,r),payload:t}]};function Rfe(t){var{dataKey:r,data:n,stroke:s,strokeWidth:a,fill:l,name:c,hide:u,unit:d}=t;return{dataDefinedOnItem:n,positions:void 0,settings:{stroke:s,strokeWidth:a,fill:l,dataKey:r,nameKey:void 0,name:MI(c,r),hide:u,type:t.tooltipType,color:Ap(s,l),unit:d}}}var Lfe=(t,r)=>{var n;if(f.isValidElement(t))n=f.cloneElement(t,r);else if(typeof t=="function")n=t(r);else{var s=Ur("recharts-area-dot",typeof t!="boolean"?t.className:"");n=f.createElement(i6,ll({},r,{className:s}))}return n};function Ife(t,r){return t==null?!1:r?!0:t.length===1}function $fe(t){var{clipPathId:r,points:n,props:s}=t,{needClip:a,dot:l,dataKey:c}=s;if(!Ife(n,l))return null;var u=C5(l),d=Ac(s),h=ns(l,!0),x=n.map((y,v)=>{var w=sc(sc(sc({key:"dot-".concat(v),r:3},d),h),{},{index:v,cx:y.x,cy:y.y,dataKey:c,value:y.value,payload:y.payload,points:n});return Lfe(l,w)}),p={clipPath:a?"url(#clipPath-".concat(u?"":"dots-").concat(r,")"):void 0};return f.createElement(pl,ll({className:"recharts-area-dots"},p),x)}function Ow(t){var{points:r,baseLine:n,needClip:s,clipPathId:a,props:l,showLabels:c}=t,{layout:u,type:d,stroke:h,connectNulls:x,isRange:p}=l,{id:y}=l,v=j6(l,Afe),w=Ac(v);return f.createElement(f.Fragment,null,r?.length>1&&f.createElement(pl,{clipPath:s?"url(#clipPath-".concat(a,")"):void 0},f.createElement(Ox,ll({},w,{id:y,points:r,connectNulls:x,type:d,baseLine:n,layout:u,stroke:"none",className:"recharts-area-area"})),h!=="none"&&f.createElement(Ox,ll({},w,{className:"recharts-area-curve",layout:u,type:d,connectNulls:x,fill:"none",points:r})),h!=="none"&&p&&f.createElement(Ox,ll({},w,{className:"recharts-area-curve",layout:u,type:d,connectNulls:x,fill:"none",points:n}))),f.createElement($fe,{points:r,props:v,clipPathId:a}),c&&cc.renderCallByParent(v,r))}function Ffe(t){var{alpha:r,baseLine:n,points:s,strokeWidth:a}=t,l=s[0].y,c=s[s.length-1].y;if(!Ds(l)||!Ds(c))return null;var u=r*Math.abs(l-c),d=Math.max(...s.map(h=>h.x||0));return Et(n)?d=Math.max(n,d):n&&Array.isArray(n)&&n.length&&(d=Math.max(...n.map(h=>h.x||0),d)),Et(d)?f.createElement("rect",{x:0,y:l<c?l:l-u,width:d+(a?parseInt("".concat(a),10):1),height:Math.floor(u)}):null}function qfe(t){var{alpha:r,baseLine:n,points:s,strokeWidth:a}=t,l=s[0].x,c=s[s.length-1].x;if(!Ds(l)||!Ds(c))return null;var u=r*Math.abs(l-c),d=Math.max(...s.map(h=>h.y||0));return Et(n)?d=Math.max(n,d):n&&Array.isArray(n)&&n.length&&(d=Math.max(...n.map(h=>h.y||0),d)),Et(d)?f.createElement("rect",{x:l<c?l:l-u,y:0,width:u,height:Math.floor(d+(a?parseInt("".concat(a),10):1))}):null}function Ufe(t){var{alpha:r,layout:n,points:s,baseLine:a,strokeWidth:l}=t;return n==="vertical"?f.createElement(Ffe,{alpha:r,points:s,baseLine:a,strokeWidth:l}):f.createElement(qfe,{alpha:r,points:s,baseLine:a,strokeWidth:l})}function zfe(t){var{needClip:r,clipPathId:n,props:s,previousPointsRef:a,previousBaselineRef:l}=t,{points:c,baseLine:u,isAnimationActive:d,animationBegin:h,animationDuration:x,animationEasing:p,onAnimationStart:y,onAnimationEnd:v}=s,w=mhe(s,"recharts-area-"),[b,N]=f.useState(!0),_=f.useCallback(()=>{typeof v=="function"&&v(),N(!1)},[v]),S=f.useCallback(()=>{typeof y=="function"&&y(),N(!0)},[y]),k=a.current,E=l.current;return f.createElement(She,{begin:h,duration:x,isActive:d,easing:p,onAnimationEnd:_,onAnimationStart:S,key:w},A=>{if(k){var O=k.length/c.length,z=A===1?c:c.map((G,J)=>{var ie=Math.floor(J*O);if(k[ie]){var V=k[ie];return sc(sc({},G),{},{x:jd(V.x,G.x,A),y:jd(V.y,G.y,A)})}return G}),R;return Et(u)?R=jd(E,u,A):Wn(u)||xa(u)?R=jd(E,0,A):R=u.map((G,J)=>{var ie=Math.floor(J*O);if(Array.isArray(E)&&E[ie]){var V=E[ie];return sc(sc({},G),{},{x:jd(V.x,G.x,A),y:jd(V.y,G.y,A)})}return G}),A>0&&(a.current=z,l.current=R),f.createElement(Ow,{points:z,baseLine:R,needClip:r,clipPathId:n,props:s,showLabels:!b})}return A>0&&(a.current=c,l.current=u),f.createElement(pl,null,f.createElement("defs",null,f.createElement("clipPath",{id:"animationClipPath-".concat(n)},f.createElement(Ufe,{alpha:A,points:c,baseLine:u,layout:s.layout,strokeWidth:s.strokeWidth}))),f.createElement(pl,{clipPath:"url(#animationClipPath-".concat(n,")")},f.createElement(Ow,{points:c,baseLine:u,needClip:r,clipPathId:n,props:s,showLabels:!0})))})}function Bfe(t){var{needClip:r,clipPathId:n,props:s}=t,{points:a,baseLine:l,isAnimationActive:c}=s,u=f.useRef(null),d=f.useRef(),h=u.current,x=d.current;return c&&a&&a.length&&(h!==a||x!==l)?f.createElement(zfe,{needClip:r,clipPathId:n,props:s,previousPointsRef:u,previousBaselineRef:d}):f.createElement(Ow,{points:a,baseLine:l,needClip:r,clipPathId:n,props:s,showLabels:!0})}class Wfe extends f.PureComponent{render(){var r,{hide:n,dot:s,points:a,className:l,top:c,left:u,needClip:d,xAxisId:h,yAxisId:x,width:p,height:y,id:v,baseLine:w}=this.props;if(n)return null;var b=Ur("recharts-area",l),N=v,{r:_=3,strokeWidth:S=2}=(r=ns(s,!1))!==null&&r!==void 0?r:{r:3,strokeWidth:2},k=C5(s),E=_*2+S;return f.createElement(f.Fragment,null,f.createElement(pl,{className:b},d&&f.createElement("defs",null,f.createElement(Lhe,{clipPathId:N,xAxisId:h,yAxisId:x}),!k&&f.createElement("clipPath",{id:"clipPath-dots-".concat(N)},f.createElement("rect",{x:u-E/2,y:c-E/2,width:p+E,height:y+E}))),f.createElement(Bfe,{needClip:d,clipPathId:N,props:this.props})),f.createElement(K4,{points:a,mainColor:Ap(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot}),this.props.isRange&&Array.isArray(w)&&f.createElement(K4,{points:w,mainColor:Ap(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot}))}}var b6={activeDot:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!1,fill:"#3182bd",fillOpacity:.6,hide:!1,isAnimationActive:!vh.isSsr,legendType:"line",stroke:"#3182bd",xAxisId:0,yAxisId:0};function Hfe(t){var r,n=No(t,b6),{activeDot:s,animationBegin:a,animationDuration:l,animationEasing:c,connectNulls:u,dot:d,fill:h,fillOpacity:x,hide:p,isAnimationActive:y,legendType:v,stroke:w,xAxisId:b,yAxisId:N}=n,_=j6(n,Efe),S=E_(),k=HF(),{needClip:E}=d6(b,N),A=Ba(),{points:O,isRange:z,baseLine:R}=(r=Bt(pe=>kfe(pe,b,N,A,t.id)))!==null&&r!==void 0?r:{},G=T1();if(S!=="horizontal"&&S!=="vertical"||G==null||k!=="AreaChart"&&k!=="ComposedChart")return null;var{height:J,width:ie,x:V,y:xe}=G;return!O||!O.length?null:f.createElement(Wfe,ll({},_,{activeDot:s,animationBegin:a,animationDuration:l,animationEasing:c,baseLine:R,connectNulls:u,dot:d,fill:h,fillOpacity:x,height:J,hide:p,layout:S,isAnimationActive:y,isRange:z,legendType:v,needClip:E,points:O,stroke:w,width:ie,left:V,top:xe,xAxisId:b,yAxisId:N}))}var Vfe=(t,r,n,s,a)=>{var l=n??r;if(Et(l))return l;var c=t==="horizontal"?a:s,u=c.scale.domain();if(c.type==="number"){var d=Math.max(u[0],u[1]),h=Math.min(u[0],u[1]);return l==="dataMin"?h:l==="dataMax"||d<0?d:Math.max(Math.min(u[0],u[1]),0)}return l==="dataMin"?u[0]:l==="dataMax"?u[1]:u[0]};function Yfe(t){var{areaSettings:{connectNulls:r,baseValue:n,dataKey:s},stackedData:a,layout:l,chartBaseValue:c,xAxis:u,yAxis:d,displayedData:h,dataStartIndex:x,xAxisTicks:p,yAxisTicks:y,bandSize:v}=t,w=a&&a.length,b=Vfe(l,c,n,u,d),N=l==="horizontal",_=!1,S=h.map((E,A)=>{var O;w?O=a[x+A]:(O=Ts(E,s),Array.isArray(O)?_=!0:O=[b,O]);var z=O[1]==null||w&&!r&&Ts(E,s)==null;return N?{x:UM({axis:u,ticks:p,bandSize:v,entry:E,index:A}),y:z?null:d.scale(O[1]),value:O,payload:E}:{x:z?null:u.scale(O[1]),y:UM({axis:d,ticks:y,bandSize:v,entry:E,index:A}),value:O,payload:E}}),k;return w||_?k=S.map(E=>{var A=Array.isArray(E.value)?E.value[0]:null;return N?{x:E.x,y:A!=null&&E.y!=null?d.scale(A):null,payload:E.payload}:{x:A!=null?u.scale(A):null,y:E.y,payload:E.payload}}):k=N?d.scale(b):u.scale(b),{points:S,baseLine:k,isRange:_}}function dc(t){var r=No(t,b6),n=Ba();return f.createElement(ghe,{id:r.id,type:"area"},s=>f.createElement(f.Fragment,null,f.createElement(uhe,{legendPayload:Dfe(r)}),f.createElement(che,{fn:Rfe,args:r}),f.createElement(Nhe,{type:"area",id:s,data:r.data,dataKey:r.dataKey,xAxisId:r.xAxisId,yAxisId:r.yAxisId,zAxisId:0,stackId:Pse(r.stackId),hide:r.hide,barSize:void 0,baseValue:r.baseValue,isPanorama:n,connectNulls:r.connectNulls}),f.createElement(Hfe,ll({},r,{id:s}))))}dc.displayName="Area";function tO(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);r&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,s)}return n}function rO(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?tO(Object(n),!0).forEach(function(s){Kfe(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):tO(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}function Kfe(t,r,n){return(r=Gfe(r))in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function Gfe(t){var r=Qfe(t,"string");return typeof r=="symbol"?r:r+""}function Qfe(t,r){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var s=n.call(t,r);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}var Xfe={xAxis:{},yAxis:{},zAxis:{}},w6=ga({name:"cartesianAxis",initialState:Xfe,reducers:{addXAxis(t,r){t.xAxis[r.payload.id]=r.payload},removeXAxis(t,r){delete t.xAxis[r.payload.id]},addYAxis(t,r){t.yAxis[r.payload.id]=r.payload},removeYAxis(t,r){delete t.yAxis[r.payload.id]},addZAxis(t,r){t.zAxis[r.payload.id]=r.payload},removeZAxis(t,r){delete t.zAxis[r.payload.id]},updateYAxisWidth(t,r){var{id:n,width:s}=r.payload;t.yAxis[n]&&(t.yAxis[n]=rO(rO({},t.yAxis[n]),{},{width:s}))}}}),{addXAxis:Zfe,removeXAxis:Jfe,addYAxis:exe,removeYAxis:txe,addZAxis:bge,removeZAxis:wge,updateYAxisWidth:rxe}=w6.actions,nxe=w6.reducer,sxe=["children"],axe=["dangerouslySetInnerHTML","ticks"];function N6(t,r,n){return(r=ixe(r))in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function ixe(t){var r=lxe(t,"string");return typeof r=="symbol"?r:r+""}function lxe(t,r){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var s=n.call(t,r);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}function Pw(){return Pw=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var s in n)({}).hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Pw.apply(null,arguments)}function _6(t,r){if(t==null)return{};var n,s,a=oxe(t,r);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(s=0;s<l.length;s++)n=l[s],r.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function oxe(t,r){if(t==null)return{};var n={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(r.indexOf(s)!==-1)continue;n[s]=t[s]}return n}function cxe(t){var r=js(),n=f.useMemo(()=>{var{children:l}=t,c=_6(t,sxe);return c},[t]),s=Bt(l=>kl(l,n.id)),a=n===s;return f.useEffect(()=>(r(Zfe(n)),()=>{r(Jfe(n))}),[n,r]),a?t.children:null}var dxe=t=>{var{xAxisId:r,className:n}=t,s=Bt(OI),a=Ba(),l="xAxis",c=Bt(v=>ou(v,l,r,a)),u=Bt(v=>_F(v,l,r,a)),d=Bt(v=>ode(v,r)),h=Bt(v=>hde(v,r));if(d==null||h==null)return null;var{dangerouslySetInnerHTML:x,ticks:p}=t,y=_6(t,axe);return f.createElement(Ao,Pw({},y,{scale:c,x:h.x,y:h.y,width:d.width,height:d.height,className:Ur("recharts-".concat(l," ").concat(l),n),viewBox:s,ticks:u}))},uxe=t=>{var r,n,s,a,l;return f.createElement(cxe,{interval:(r=t.interval)!==null&&r!==void 0?r:"preserveEnd",id:t.xAxisId,scale:t.scale,type:t.type,padding:t.padding,allowDataOverflow:t.allowDataOverflow,domain:t.domain,dataKey:t.dataKey,allowDuplicatedCategory:t.allowDuplicatedCategory,allowDecimals:t.allowDecimals,tickCount:t.tickCount,includeHidden:(n=t.includeHidden)!==null&&n!==void 0?n:!1,reversed:t.reversed,ticks:t.ticks,height:t.height,orientation:t.orientation,mirror:t.mirror,hide:t.hide,unit:t.unit,name:t.name,angle:(s=t.angle)!==null&&s!==void 0?s:0,minTickGap:(a=t.minTickGap)!==null&&a!==void 0?a:5,tick:(l=t.tick)!==null&&l!==void 0?l:!0,tickFormatter:t.tickFormatter},f.createElement(dxe,t))};class qg extends f.Component{render(){return f.createElement(uxe,this.props)}}N6(qg,"displayName","XAxis");N6(qg,"defaultProps",{allowDataOverflow:ia.allowDataOverflow,allowDecimals:ia.allowDecimals,allowDuplicatedCategory:ia.allowDuplicatedCategory,height:ia.height,hide:!1,mirror:ia.mirror,orientation:ia.orientation,padding:ia.padding,reversed:ia.reversed,scale:ia.scale,tickCount:ia.tickCount,type:ia.type,xAxisId:0});var mxe=t=>{var{ticks:r,label:n,labelGapWithTick:s=5,tickSize:a=0,tickMargin:l=0}=t,c=0;if(r){r.forEach(x=>{if(x){var p=x.getBoundingClientRect();p.width>c&&(c=p.width)}});var u=n?n.getBoundingClientRect().width:0,d=a+l,h=c+d+u+(n?s:0);return Math.round(h)}return 0},hxe=["dangerouslySetInnerHTML","ticks"];function C6(t,r,n){return(r=fxe(r))in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function fxe(t){var r=xxe(t,"string");return typeof r=="symbol"?r:r+""}function xxe(t,r){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var s=n.call(t,r);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}function Dw(){return Dw=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var s in n)({}).hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Dw.apply(null,arguments)}function pxe(t,r){if(t==null)return{};var n,s,a=gxe(t,r);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(s=0;s<l.length;s++)n=l[s],r.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function gxe(t,r){if(t==null)return{};var n={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(r.indexOf(s)!==-1)continue;n[s]=t[s]}return n}function yxe(t){var r=js();return f.useEffect(()=>(r(exe(t)),()=>{r(txe(t))}),[t,r]),null}var vxe=t=>{var r,{yAxisId:n,className:s,width:a,label:l}=t,c=f.useRef(null),u=f.useRef(null),d=Bt(OI),h=Ba(),x=js(),p="yAxis",y=Bt(k=>ou(k,p,n,h)),v=Bt(k=>xde(k,n)),w=Bt(k=>fde(k,n)),b=Bt(k=>_F(k,p,n,h));if(f.useLayoutEffect(()=>{var k;if(!(a!=="auto"||!v||M1(l)||f.isValidElement(l))){var E=c.current,A=E==null||(k=E.tickRefs)===null||k===void 0?void 0:k.current,{tickSize:O,tickMargin:z}=E.props,R=mxe({ticks:A,label:u.current,labelGapWithTick:5,tickSize:O,tickMargin:z});Math.round(v.width)!==Math.round(R)&&x(rxe({id:n,width:R}))}},[c,c==null||(r=c.current)===null||r===void 0||(r=r.tickRefs)===null||r===void 0?void 0:r.current,v?.width,v,x,l,n,a]),v==null||w==null)return null;var{dangerouslySetInnerHTML:N,ticks:_}=t,S=pxe(t,hxe);return f.createElement(Ao,Dw({},S,{ref:c,labelRef:u,scale:y,x:w.x,y:w.y,width:v.width,height:v.height,className:Ur("recharts-".concat(p," ").concat(p),s),viewBox:d,ticks:b}))},jxe=t=>{var r,n,s,a,l;return f.createElement(f.Fragment,null,f.createElement(yxe,{interval:(r=t.interval)!==null&&r!==void 0?r:"preserveEnd",id:t.yAxisId,scale:t.scale,type:t.type,domain:t.domain,allowDataOverflow:t.allowDataOverflow,dataKey:t.dataKey,allowDuplicatedCategory:t.allowDuplicatedCategory,allowDecimals:t.allowDecimals,tickCount:t.tickCount,padding:t.padding,includeHidden:(n=t.includeHidden)!==null&&n!==void 0?n:!1,reversed:t.reversed,ticks:t.ticks,width:t.width,orientation:t.orientation,mirror:t.mirror,hide:t.hide,unit:t.unit,name:t.name,angle:(s=t.angle)!==null&&s!==void 0?s:0,minTickGap:(a=t.minTickGap)!==null&&a!==void 0?a:5,tick:(l=t.tick)!==null&&l!==void 0?l:!0,tickFormatter:t.tickFormatter}),f.createElement(vxe,t))},bxe={allowDataOverflow:la.allowDataOverflow,allowDecimals:la.allowDecimals,allowDuplicatedCategory:la.allowDuplicatedCategory,hide:!1,mirror:la.mirror,orientation:la.orientation,padding:la.padding,reversed:la.reversed,scale:la.scale,tickCount:la.tickCount,type:la.type,width:la.width,yAxisId:0};class Ug extends f.Component{render(){return f.createElement(jxe,this.props)}}C6(Ug,"displayName","YAxis");C6(Ug,"defaultProps",bxe);var r0={exports:{}},n0={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nO;function wxe(){if(nO)return n0;nO=1;var t=Hd();function r(d,h){return d===h&&(d!==0||1/d===1/h)||d!==d&&h!==h}var n=typeof Object.is=="function"?Object.is:r,s=t.useSyncExternalStore,a=t.useRef,l=t.useEffect,c=t.useMemo,u=t.useDebugValue;return n0.useSyncExternalStoreWithSelector=function(d,h,x,p,y){var v=a(null);if(v.current===null){var w={hasValue:!1,value:null};v.current=w}else w=v.current;v=c(function(){function N(A){if(!_){if(_=!0,S=A,A=p(A),y!==void 0&&w.hasValue){var O=w.value;if(y(O,A))return k=O}return k=A}if(O=k,n(S,A))return O;var z=p(A);return y!==void 0&&y(O,z)?(S=A,O):(S=A,k=z)}var _=!1,S,k,E=x===void 0?null:x;return[function(){return N(h())},E===null?void 0:function(){return N(E())}]},[h,x,p,y]);var b=s(d,v[0],v[1]);return l(function(){w.hasValue=!0,w.value=b},[b]),u(b),b},n0}var sO;function Nxe(){return sO||(sO=1,r0.exports=wxe()),r0.exports}Nxe();function _xe(t){t()}function Cxe(){let t=null,r=null;return{clear(){t=null,r=null},notify(){_xe(()=>{let n=t;for(;n;)n.callback(),n=n.next})},get(){const n=[];let s=t;for(;s;)n.push(s),s=s.next;return n},subscribe(n){let s=!0;const a=r={callback:n,next:null,prev:r};return a.prev?a.prev.next=a:t=a,function(){!s||t===null||(s=!1,a.next?a.next.prev=a.prev:r=a.prev,a.prev?a.prev.next=a.next:t=a.next)}}}}var aO={notify(){},get:()=>[]};function Sxe(t,r){let n,s=aO,a=0,l=!1;function c(b){x();const N=s.subscribe(b);let _=!1;return()=>{_||(_=!0,N(),p())}}function u(){s.notify()}function d(){w.onStateChange&&w.onStateChange()}function h(){return l}function x(){a++,n||(n=t.subscribe(d),s=Cxe())}function p(){a--,n&&a===0&&(n(),n=void 0,s.clear(),s=aO)}function y(){l||(l=!0,x())}function v(){l&&(l=!1,p())}const w={addNestedSub:c,notifyNestedSubs:u,handleChangeWrapper:d,isSubscribed:h,trySubscribe:y,tryUnsubscribe:v,getListeners:()=>s};return w}var kxe=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Axe=kxe(),Exe=()=>typeof navigator<"u"&&navigator.product==="ReactNative",Mxe=Exe(),Txe=()=>Axe||Mxe?f.useLayoutEffect:f.useEffect,Oxe=Txe(),Pxe=Symbol.for("react-redux-context"),Dxe=typeof globalThis<"u"?globalThis:{};function Rxe(){if(!f.createContext)return{};const t=Dxe[Pxe]??=new Map;let r=t.get(f.createContext);return r||(r=f.createContext(null),t.set(f.createContext,r)),r}var Lxe=Rxe();function Ixe(t){const{children:r,context:n,serverState:s,store:a}=t,l=f.useMemo(()=>{const d=Sxe(a);return{store:a,subscription:d,getServerState:s?()=>s:void 0}},[a,s]),c=f.useMemo(()=>a.getState(),[a]);Oxe(()=>{const{subscription:d}=l;return d.onStateChange=d.notifyNestedSubs,d.trySubscribe(),c!==a.getState()&&d.notifyNestedSubs(),()=>{d.tryUnsubscribe(),d.onStateChange=void 0}},[l,c]);const u=n||Lxe;return f.createElement(u.Provider,{value:l},r)}var $xe=Ixe,Fxe=(t,r)=>r,L1=Ke([Fxe,en,W$,Yn,qF,Al,vue,bs],_ue),I1=t=>{var r=t.currentTarget.getBoundingClientRect(),n=r.width/t.currentTarget.offsetWidth,s=r.height/t.currentTarget.offsetHeight;return{chartX:Math.round((t.clientX-r.left)/n),chartY:Math.round((t.clientY-r.top)/s)}},S6=Fa("mouseClick"),k6=yh();k6.startListening({actionCreator:S6,effect:(t,r)=>{var n=t.payload,s=L1(r.getState(),I1(n));s?.activeIndex!=null&&r.dispatch(kde({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate}))}});var Rw=Fa("mouseMove"),A6=yh();A6.startListening({actionCreator:Rw,effect:(t,r)=>{var n=t.payload,s=r.getState(),a=j1(s,s.tooltip.settings.shared),l=L1(s,I1(n));a==="axis"&&(l?.activeIndex!=null?r.dispatch(PF({activeIndex:l.activeIndex,activeDataKey:void 0,activeCoordinate:l.activeCoordinate})):r.dispatch(OF()))}});function qxe(t,r){return r instanceof HTMLElement?"HTMLElement <".concat(r.tagName,' class="').concat(r.className,'">'):r===window?"global.window":r}var iO={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index"},E6=ga({name:"rootProps",initialState:iO,reducers:{updateOptions:(t,r)=>{var n;t.accessibilityLayer=r.payload.accessibilityLayer,t.barCategoryGap=r.payload.barCategoryGap,t.barGap=(n=r.payload.barGap)!==null&&n!==void 0?n:iO.barGap,t.barSize=r.payload.barSize,t.maxBarSize=r.payload.maxBarSize,t.stackOffset=r.payload.stackOffset,t.syncId=r.payload.syncId,t.syncMethod=r.payload.syncMethod,t.className=r.payload.className}}}),Uxe=E6.reducer,{updateOptions:zxe}=E6.actions,M6=ga({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(t,r)=>r.payload}}),{updatePolarOptions:Nge}=M6.actions,Bxe=M6.reducer,T6=Fa("keyDown"),O6=Fa("focus"),$1=yh();$1.startListening({actionCreator:T6,effect:(t,r)=>{var n=r.getState(),s=n.rootProps.accessibilityLayer!==!1;if(s){var{keyboardInteraction:a}=n.tooltip,l=t.payload;if(!(l!=="ArrowRight"&&l!=="ArrowLeft"&&l!=="Enter")){var c=Number(b1(a,du(n))),u=Al(n);if(l==="Enter"){var d=_p(n,"axis","hover",String(a.index));r.dispatch(kw({active:!a.active,activeIndex:a.index,activeDataKey:a.dataKey,activeCoordinate:d}));return}var h=vde(n),x=h==="left-to-right"?1:-1,p=l==="ArrowRight"?1:-1,y=c+p*x;if(!(u==null||y>=u.length||y<0)){var v=_p(n,"axis","hover",String(y));r.dispatch(kw({active:!0,activeIndex:y.toString(),activeDataKey:void 0,activeCoordinate:v}))}}}}});$1.startListening({actionCreator:O6,effect:(t,r)=>{var n=r.getState(),s=n.rootProps.accessibilityLayer!==!1;if(s){var{keyboardInteraction:a}=n.tooltip;if(!a.active&&a.index==null){var l="0",c=_p(n,"axis","hover",String(l));r.dispatch(kw({activeDataKey:void 0,active:!0,activeIndex:l,activeCoordinate:c}))}}}});var Ma=Fa("externalEvent"),P6=yh();P6.startListening({actionCreator:Ma,effect:(t,r)=>{if(t.payload.handler!=null){var n=r.getState(),s={activeCoordinate:due(n),activeDataKey:oue(n),activeIndex:Ym(n),activeLabel:BF(n),activeTooltipIndex:Ym(n),isTooltipActive:uue(n)};t.payload.handler(s,t.payload.reactEvent)}}});var Wxe=Ke([cu],t=>t.tooltipItemPayloads),Hxe=Ke([Wxe,Ah,(t,r,n)=>r,(t,r,n)=>n],(t,r,n,s)=>{var a=t.find(u=>u.settings.dataKey===s);if(a!=null){var{positions:l}=a;if(l!=null){var c=r(l,n);return c}}}),D6=Fa("touchMove"),R6=yh();R6.startListening({actionCreator:D6,effect:(t,r)=>{var n=t.payload,s=r.getState(),a=j1(s,s.tooltip.settings.shared);if(a==="axis"){var l=L1(s,I1({clientX:n.touches[0].clientX,clientY:n.touches[0].clientY,currentTarget:n.currentTarget}));l?.activeIndex!=null&&r.dispatch(PF({activeIndex:l.activeIndex,activeDataKey:void 0,activeCoordinate:l.activeCoordinate}))}else if(a==="item"){var c,u=n.touches[0],d=document.elementFromPoint(u.clientX,u.clientY);if(!d||!d.getAttribute)return;var h=d.getAttribute(Use),x=(c=d.getAttribute(zse))!==null&&c!==void 0?c:void 0,p=Hxe(r.getState(),h,x);r.dispatch(Sde({activeDataKey:x,activeIndex:h,activeCoordinate:p}))}}});var Vxe=sI({brush:$he,cartesianAxis:nxe,chartData:Uue,errorBars:Rhe,graphicalItems:whe,layout:mse,legend:rae,options:Lue,polarAxis:ohe,polarOptions:Bxe,referenceElements:Hhe,rootProps:Uxe,tooltip:Ade}),Yxe=function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return Ine({reducer:Vxe,preloadedState:r,middleware:s=>s({serializableCheck:!1}).concat([k6.middleware,A6.middleware,$1.middleware,P6.middleware,R6.middleware]),devTools:{serialize:{replacer:qxe},name:"recharts-".concat(n)}})};function Kxe(t){var{preloadedState:r,children:n,reduxStoreName:s}=t,a=Ba(),l=f.useRef(null);if(a)return n;l.current==null&&(l.current=Yxe(r,s));var c=y_;return f.createElement($xe,{context:c,store:l.current},n)}function Gxe(t){var{layout:r,width:n,height:s,margin:a}=t,l=js(),c=Ba();return f.useEffect(()=>{c||(l(cse(r)),l(dse({width:n,height:s})),l(ose(a)))},[l,c,r,n,s,a]),null}function Qxe(t){var r=js();return f.useEffect(()=>{r(zxe(t))},[r,t]),null}var Xxe=["children"];function Zxe(t,r){if(t==null)return{};var n,s,a=Jxe(t,r);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(s=0;s<l.length;s++)n=l[s],r.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function Jxe(t,r){if(t==null)return{};var n={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(r.indexOf(s)!==-1)continue;n[s]=t[s]}return n}function Ep(){return Ep=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var s in n)({}).hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Ep.apply(null,arguments)}var epe={width:"100%",height:"100%"},tpe=f.forwardRef((t,r)=>{var n=k_(),s=A_(),a=RI();if(!op(n)||!op(s))return null;var{children:l,otherAttributes:c,title:u,desc:d}=t,h,x;return typeof c.tabIndex=="number"?h=c.tabIndex:h=a?0:void 0,typeof c.role=="string"?x=c.role:x=a?"application":void 0,f.createElement(l_,Ep({},c,{title:u,desc:d,role:x,tabIndex:h,width:n,height:s,style:epe,ref:r}),l)}),rpe=t=>{var{children:r}=t,n=Bt(wg);if(!n)return null;var{width:s,height:a,y:l,x:c}=n;return f.createElement(l_,{width:s,height:a,x:c,y:l},r)},lO=f.forwardRef((t,r)=>{var{children:n}=t,s=Zxe(t,Xxe),a=Ba();return a?f.createElement(rpe,null,n):f.createElement(tpe,Ep({ref:r},s),n)});function npe(){var t=js(),[r,n]=f.useState(null),s=Bt(qse);return f.useEffect(()=>{if(r!=null){var a=r.getBoundingClientRect(),l=a.width/r.offsetWidth;Ds(l)&&l!==s&&t(use(l))}},[r,t,s]),n}function oO(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);r&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),n.push.apply(n,s)}return n}function spe(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?oO(Object(n),!0).forEach(function(s){ape(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):oO(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}function ape(t,r,n){return(r=ipe(r))in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function ipe(t){var r=lpe(t,"string");return typeof r=="symbol"?r:r+""}function lpe(t,r){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var s=n.call(t,r);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(t)}var ope=f.forwardRef((t,r)=>{var{children:n,className:s,height:a,onClick:l,onContextMenu:c,onDoubleClick:u,onMouseDown:d,onMouseEnter:h,onMouseLeave:x,onMouseMove:p,onMouseUp:y,onTouchEnd:v,onTouchMove:w,onTouchStart:b,style:N,width:_}=t,S=js(),[k,E]=f.useState(null),[A,O]=f.useState(null);Wue();var z=npe(),R=f.useCallback(Q=>{z(Q),typeof r=="function"&&r(Q),E(Q),O(Q)},[z,r,E,O]),G=f.useCallback(Q=>{S(S6(Q)),S(Ma({handler:l,reactEvent:Q}))},[S,l]),J=f.useCallback(Q=>{S(Rw(Q)),S(Ma({handler:h,reactEvent:Q}))},[S,h]),ie=f.useCallback(Q=>{S(OF()),S(Ma({handler:x,reactEvent:Q}))},[S,x]),V=f.useCallback(Q=>{S(Rw(Q)),S(Ma({handler:p,reactEvent:Q}))},[S,p]),xe=f.useCallback(()=>{S(O6())},[S]),pe=f.useCallback(Q=>{S(T6(Q.key))},[S]),re=f.useCallback(Q=>{S(Ma({handler:c,reactEvent:Q}))},[S,c]),M=f.useCallback(Q=>{S(Ma({handler:u,reactEvent:Q}))},[S,u]),B=f.useCallback(Q=>{S(Ma({handler:d,reactEvent:Q}))},[S,d]),L=f.useCallback(Q=>{S(Ma({handler:y,reactEvent:Q}))},[S,y]),T=f.useCallback(Q=>{S(Ma({handler:b,reactEvent:Q}))},[S,b]),F=f.useCallback(Q=>{S(D6(Q)),S(Ma({handler:w,reactEvent:Q}))},[S,w]),I=f.useCallback(Q=>{S(Ma({handler:v,reactEvent:Q}))},[S,v]);return f.createElement(QF.Provider,{value:k},f.createElement(S5.Provider,{value:A},f.createElement("div",{className:Ur("recharts-wrapper",s),style:spe({position:"relative",cursor:"default",width:_,height:a},N),onClick:G,onContextMenu:re,onDoubleClick:M,onFocus:xe,onKeyDown:pe,onMouseDown:B,onMouseEnter:J,onMouseLeave:ie,onMouseMove:V,onMouseUp:L,onTouchEnd:I,onTouchMove:F,onTouchStart:T,ref:R},n)))}),cpe=["children","className","width","height","style","compact","title","desc"];function dpe(t,r){if(t==null)return{};var n,s,a=upe(t,r);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(s=0;s<l.length;s++)n=l[s],r.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function upe(t,r){if(t==null)return{};var n={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(r.indexOf(s)!==-1)continue;n[s]=t[s]}return n}var mpe=f.forwardRef((t,r)=>{var{children:n,className:s,width:a,height:l,style:c,compact:u,title:d,desc:h}=t,x=dpe(t,cpe),p=Ac(x);return u?f.createElement(lO,{otherAttributes:p,title:d,desc:h},n):f.createElement(ope,{className:s,style:c,width:a,height:l,onClick:t.onClick,onMouseLeave:t.onMouseLeave,onMouseEnter:t.onMouseEnter,onMouseMove:t.onMouseMove,onMouseDown:t.onMouseDown,onMouseUp:t.onMouseUp,onContextMenu:t.onContextMenu,onDoubleClick:t.onDoubleClick,onTouchStart:t.onTouchStart,onTouchMove:t.onTouchMove,onTouchEnd:t.onTouchEnd},f.createElement(lO,{otherAttributes:p,title:d,desc:h,ref:r},f.createElement(Yhe,null,n)))}),hpe=["width","height"];function Lw(){return Lw=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var s in n)({}).hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Lw.apply(null,arguments)}function fpe(t,r){if(t==null)return{};var n,s,a=xpe(t,r);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(s=0;s<l.length;s++)n=l[s],r.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(a[n]=t[n])}return a}function xpe(t,r){if(t==null)return{};var n={};for(var s in t)if({}.hasOwnProperty.call(t,s)){if(r.indexOf(s)!==-1)continue;n[s]=t[s]}return n}var ppe={top:5,right:5,bottom:5,left:5},gpe={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:ppe,reverseStackOrder:!1,syncMethod:"index"},ype=f.forwardRef(function(r,n){var s,a=No(r.categoricalChartProps,gpe),{width:l,height:c}=a,u=fpe(a,hpe);if(!op(l)||!op(c))return null;var{chartName:d,defaultTooltipEventType:h,validateTooltipEventTypes:x,tooltipPayloadSearcher:p,categoricalChartProps:y}=r,v={chartName:d,defaultTooltipEventType:h,validateTooltipEventTypes:x,tooltipPayloadSearcher:p,eventEmitter:void 0};return f.createElement(Kxe,{preloadedState:{options:v},reduxStoreName:(s=y.id)!==null&&s!==void 0?s:d},f.createElement(Ihe,{chartData:y.data}),f.createElement(Gxe,{width:l,height:c,layout:a.layout,margin:a.margin}),f.createElement(Qxe,{accessibilityLayer:a.accessibilityLayer,barCategoryGap:a.barCategoryGap,maxBarSize:a.maxBarSize,stackOffset:a.stackOffset,barGap:a.barGap,barSize:a.barSize,syncId:a.syncId,syncMethod:a.syncMethod,className:a.className}),f.createElement(mpe,Lw({},u,{width:l,height:c,ref:n})))}),vpe=["axis"],L6=f.forwardRef((t,r)=>f.createElement(ype,{chartName:"AreaChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:vpe,tooltipPayloadSearcher:Due,categoricalChartProps:t,ref:r}));const I6=f.createContext(null);function $6(){const t=f.useContext(I6);if(!t)throw new Error("useChart must be used within a <ChartContainer />");return t}const F1=f.forwardRef(({id:t,className:r,children:n,config:s,...a},l)=>{const c=f.useId(),u=`chart-${t||c.replace(/:/g,"")}`;return e.jsx(I6.Provider,{value:{config:s},children:e.jsxs("div",{"data-chart":u,ref:l,className:ze("flex aspect-video justify-center text-xs [&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-none [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-sector]:outline-none [&_.recharts-surface]:outline-none",r),...a,children:[e.jsx(jpe,{id:u,config:s}),e.jsx(ome,{children:n})]})})});F1.displayName="Chart";const jpe=({id:t,config:r})=>Object.entries(r).filter(([s,a])=>a.theme).length?e.jsx("style",{dangerouslySetInnerHTML:{__html:Object.entries(r).filter(([s,a])=>a.theme).map(([s,a])=>{const l=a.theme?.color||"hsl(var(--chart-1))";return[`.recharts-${t} .recharts-${s} { color: ${l}; }`,`.recharts-${t} .recharts-${s} .recharts-${s}-${s} { color: ${l}; }`].join(`
`)}).join(`
`)}}):null,F6=Zue,q1=f.forwardRef(({active:t,payload:r,className:n,indicator:s="dot",hideLabel:a=!1,hideIndicator:l=!1,label:c,labelFormatter:u,labelClassName:d,formatter:h,color:x,nameKey:p,labelKey:y},v)=>{const{config:w}=$6(),b=f.useMemo(()=>{if(a||!r?.length)return null;const[_]=r,S=`${y||_.dataKey||_.name||"value"}`,k=Iw(w,_,S),E=!y&&typeof c=="string"?w[c]?.label||c:k?.label||S;return u&&typeof c<"u"?u(c,r):E},[c,u,r,a,y,w]);if(!t||!r?.length)return null;const N=r.length===1&&s!=="dot";return e.jsxs("div",{ref:v,className:ze("grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl",n),children:[N?null:e.jsx("div",{className:ze("font-medium",d),children:b}),e.jsx("div",{className:"grid gap-1.5",children:r.map((_,S)=>{const k=`${p||_.name||_.dataKey||"value"}`,E=Iw(w,_,k),A=x||_.payload?.fill||_.color;return e.jsx("div",{className:ze("flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-muted-foreground",s==="dot"&&"items-center"),children:h&&_?.value!==void 0&&_.name?h(_.value,_.name,_,S,_.payload):e.jsxs(e.Fragment,{children:[E?.icon?e.jsx(E.icon,{}):!l&&e.jsx("div",{className:ze("shrink-0 rounded-[2px] border-[--color-border] bg-[--color-bg]",{"h-2.5 w-2.5":s==="dot","w-1":s==="line","w-0 border-[1.5px] border-dashed bg-transparent":s==="dashed"}),style:{"--color-bg":A,"--color-border":A}}),e.jsxs("div",{className:ze("flex flex-1 justify-between leading-none",N?"items-end":"items-center"),children:[e.jsxs("div",{className:"grid gap-1.5",children:[N?e.jsx("div",{className:ze("font-medium",d),children:b}):null,e.jsx("div",{className:"text-muted-foreground",children:E?.label||_.name})]}),_.value&&e.jsx("div",{className:"font-mono font-medium tabular-nums text-foreground",children:_.value})]})]})},_.dataKey)})})]})});q1.displayName="ChartTooltipContent";const q6=Ng,U1=f.forwardRef(({className:t,hideIcon:r=!1,payload:n,verticalAlign:s="bottom",nameKey:a},l)=>{const{config:c}=$6();return n?.length?e.jsx("div",{ref:l,className:ze("flex items-center justify-center gap-4",s==="top"?"pb-3":"pt-3",t),children:n.map(u=>{const d=`${a||u.dataKey||"value"}`,h=Iw(c,u,d);return e.jsxs("div",{className:ze("flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-muted-foreground"),children:[h?.icon&&!r?e.jsx(h.icon,{}):!r&&e.jsx("div",{className:"h-2 w-2 shrink-0 rounded-[2px]",style:{backgroundColor:u.color}}),h?.label]},u.value)})}):null});U1.displayName="ChartLegendContent";function Iw(t,r,n){if(typeof r!="object"||r===null)return;const s="payload"in r&&typeof r.payload=="object"&&r.payload!==null?r.payload:void 0;let a=n;return n in t||s&&a in s?a=n:"dataKey"in r&&typeof r.dataKey=="string"?a=r.dataKey:"name"in r&&typeof r.name=="string"&&(a=r.name),a in t?t[a]:void 0}const bpe=()=>{er();const[t,r]=f.useState("month"),[n,s]=f.useState("overview"),[a,l]=f.useState("month"),[c,u]=f.useState({from:"",to:""}),[d,h]=f.useState(!1),[x,p]=f.useState("revenue"),{data:y,isLoading:v,refetch:w}=jr({queryKey:["dashboard-stats"],queryFn:()=>de.getDashboardStats()}),{data:b,isLoading:N,refetch:_}=jr({queryKey:["sales-metrics",t],queryFn:()=>de.getSalesMetrics({time_period:t})}),{data:S,isLoading:k}=jr({queryKey:["sales-team"],queryFn:()=>de.getSalesTeam()}),{data:E,isLoading:A}=jr({queryKey:["sales-opportunities"],queryFn:()=>de.getSalesOpportunities({limit:20})}),{data:O,isLoading:z}=jr({queryKey:["recent-sales"],queryFn:()=>de.getRecentSales({limit:20})}),{data:R,isLoading:G}=jr({queryKey:["sales-trends",a,c,d],queryFn:()=>d&&c.from&&c.to?de.getSalesTrends({time_period:"custom",start_date:c.from,end_date:c.to}):de.getSalesTrends({time_period:a})}),{data:J,isLoading:ie}=jr({queryKey:["top-customers"],queryFn:()=>de.getTopCustomers({limit:20})}),{data:V,isLoading:xe}=jr({queryKey:["sales-forecast"],queryFn:()=>de.getSalesForecast({months:6})}),{data:pe,isLoading:re}=jr({queryKey:["leads"],queryFn:()=>de.getLeads({limit:20})}),{data:M,isLoading:B}=jr({queryKey:["quotes"],queryFn:()=>de.getQuotes({limit:20})}),{data:L,isLoading:T}=jr({queryKey:["most-used-parts"],queryFn:()=>de.getMostUsedParts({limit:5})}),{data:F,isLoading:I}=jr({queryKey:["repair-tickets"],queryFn:()=>de.getRepairTickets({limit:20})}),{data:Q,isLoading:W}=jr({queryKey:["warranty-repair-tickets"],queryFn:()=>de.getWarrantyRepairTickets({limit:20})}),{data:ee,isLoading:ye}=jr({queryKey:["work-orders"],queryFn:()=>de.getWorkOrders({limit:20})}),{data:he,isLoading:te}=jr({queryKey:["warranty-work-orders"],queryFn:()=>de.getWarrantyWorkOrders({limit:20})}),{data:De,isLoading:ne}=jr({queryKey:["customers"],queryFn:()=>de.getCustomers({limit:20})}),{data:$e,isLoading:ge}=jr({queryKey:["inventory"],queryFn:()=>de.getInventory({limit:20})});if(v||N||k||A||z||G||ie||xe||re||B||I||W||ye||te||ne||ge)return e.jsx(gt,{children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Ws,{className:"h-8 w-8 animate-spin mx-auto mb-4 text-muted-foreground"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading comprehensive analytics dashboard..."})]})})});const _e=y?.data||{},Ye=b?.data||{},ht=S?.data?.team||[],Ve=E?.data?.opportunities||[],lt=O?.data?.sales||[],yt=R?.data||[],Re=J?.data?.customers||[];V?.data?.forecast;const H=pe?.data||[],Be=M?.data||[],st=F?.data||[],K=Q?.data||[],Z=ee?.data||[],ke=he?.data||[],Ae=De?.data||[],je=$e?.data||[],He=L?.data||[];_e.work_orders;const Se=["pending","in_progress","testing","parts_ordered","waiting_approval","waiting_supplier"],it=Z.filter(le=>Se.includes(le.status?.toLowerCase())).length,Me=ke.filter(le=>Se.includes(le.status?.toLowerCase())).length,Tt=it+Me,Pe=Z.length,Ee=ke.length,xt=Pe+Ee,wt=Ye.totalRevenue||0;Ye.totalSales,Ye.avgSalePrice,Ye.conversionRate,Ye.winRate,H.length,Be.length;const Le=Ae.length||0;je.length,je.filter(le=>le.quantity<=(le.min_stock_level||0)).length;const ot=le=>le>0?e.jsx(Os,{className:"h-4 w-4 text-green-500"}):le<0?e.jsx(Zm,{className:"h-4 w-4 text-red-500"}):e.jsx(ks,{className:"h-4 w-4 text-gray-500"}),It=le=>e.jsx(Oe,{variant:Vr(le),className:Vr(le)==="outline"?Xs(le):void 0,children:Qs(le)}),Er=le=>{switch(le?.toLowerCase()){case"high":case"urgent":return"bg-red-100 text-red-800 border-red-200";case"medium":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"low":return"bg-green-100 text-green-800 border-green-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},Yr={pending:{color:"bg-yellow-500",displayName:"Pending"},in_progress:{color:"bg-blue-500",displayName:"In Progress"},completed:{color:"bg-green-500",displayName:"Completed"},cancelled:{color:"bg-red-500",displayName:"Cancelled"},testing:{color:"bg-purple-500",displayName:"Testing"},parts_ordered:{color:"bg-orange-500",displayName:"Parts Ordered"},waiting_approval:{color:"bg-indigo-500",displayName:"Waiting Approval"},waiting_supplier:{color:"bg-pink-500",displayName:"Waiting Supplier"},service_cancelled:{color:"bg-red-600",displayName:"Service Cancelled"},warranty_declined:{color:"bg-red-700",displayName:"Warranty Declined"}},Gn=[...Z,...ke],Qn={};Object.keys(Yr).forEach(le=>{Qn[le]=0}),Gn.forEach(le=>{const Qe=le.status?.toLowerCase();Qe&&Qn.hasOwnProperty(Qe)&&Qn[Qe]++});const $t=Object.entries(Yr).map(([le,Qe])=>({status:Qe.displayName,count:Qn[le]||0,color:Qe.color})).sort((le,Qe)=>Qe.count-le.count),sr=(le,Qe)=>{const P=[Object.keys(le[0]).join(","),...le.map(dt=>Object.values(dt).join(","))].join(`
`),$=new Blob([P],{type:"text/csv"}),We=window.URL.createObjectURL($),vt=document.createElement("a");vt.href=We,vt.download=Qe,vt.click(),window.URL.revokeObjectURL(We)};return e.jsx(gt,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Analytics Command Center"}),e.jsx("p",{className:"text-muted-foreground",children:"Comprehensive business intelligence and performance analytics"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(U,{className:"text-sm text-muted-foreground",children:"Metrics Period:"}),e.jsxs(tt,{value:t,onValueChange:r,children:[e.jsx(Je,{className:"w-40",children:e.jsx(rt,{placeholder:"Time period"})}),e.jsxs(et,{children:[e.jsx(Y,{value:"7d",children:"Last 7 Days"}),e.jsx(Y,{value:"30d",children:"Last 30 Days"}),e.jsx(Y,{value:"month",children:"This Month"}),e.jsx(Y,{value:"quarter",children:"This Quarter"}),e.jsx(Y,{value:"year",children:"This Year"})]})]})]}),e.jsxs(q,{variant:"outline",size:"sm",onClick:()=>{w(),_()},children:[e.jsx(Ws,{className:"h-4 w-4 mr-2"}),"Refresh"]})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsxs(se,{children:[e.jsxs(ue,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(fe,{className:"text-sm font-medium",children:"Total Revenue"}),e.jsx(Tn,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(ae,{children:[e.jsx("div",{className:"text-2xl font-bold",children:at(wt)}),e.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[ot(Ye.revenueChange||0),e.jsxs("span",{children:[Ye.revenueChange||0,"% from last period"]})]})]})]}),e.jsxs(se,{children:[e.jsxs(ue,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(fe,{className:"text-sm font-medium",children:"Active Repairs"}),e.jsx(Ct,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(ae,{children:[e.jsx("div",{className:"text-2xl font-bold",children:Tt}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[it," regular, ",Me," warranties"]})]})]}),e.jsxs(se,{children:[e.jsxs(ue,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(fe,{className:"text-sm font-medium",children:"Sales Pipeline"}),e.jsx(ti,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(ae,{children:[e.jsx("div",{className:"text-2xl font-bold",children:Ve.length}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[at(Ve.reduce((le,Qe)=>le+(Qe.potential_value||0),0))," potential value"]})]})]}),e.jsxs(se,{children:[e.jsxs(ue,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(fe,{className:"text-sm font-medium",children:"Customer Base"}),e.jsx(xs,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(ae,{children:[e.jsx("div",{className:"text-2xl font-bold",children:Le}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Active customers"})]})]})]}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:[e.jsxs(se,{className:"md:col-span-2",children:[e.jsx(ue,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(fe,{className:"flex items-center gap-2",children:[e.jsx(i7,{className:"h-5 w-5"}),"Sales Performance Trend"]}),e.jsx(Xt,{children:"Revenue and sales metrics over time"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(tt,{value:d?"custom":a,onValueChange:le=>{le==="custom"?h(!0):(h(!1),l(le))},children:[e.jsx(Je,{className:"w-32",children:e.jsx(rt,{})}),e.jsxs(et,{children:[e.jsx(Y,{value:"week",children:"Last 7 days"}),e.jsx(Y,{value:"month",children:"Last 30 days"}),e.jsx(Y,{value:"quarter",children:"Last 3 months"}),e.jsx(Y,{value:"year",children:"Last year"}),e.jsx(Y,{value:"custom",children:"Custom Range"})]})]}),d&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Rn,{value:c.from,onChange:le=>u(Qe=>({...Qe,from:le})),placeholder:"From date"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"to"}),e.jsx(Rn,{value:c.to,onChange:le=>u(Qe=>({...Qe,to:le})),placeholder:"To date"})]}),e.jsx(q,{variant:"outline",size:"sm",onClick:()=>{u({from:"",to:""}),h(!1),l("month")},children:"Clear"})]})]})]})}),e.jsx(ae,{children:yt.length>0?e.jsxs("div",{className:"space-y-4",children:[e.jsx(F1,{config:{revenue:{label:"Revenue",color:"hsl(var(--chart-1))"},sales:{label:"Sales",color:"hsl(var(--chart-2))"},customers:{label:"Customers",color:"hsl(var(--chart-3))"}},className:"h-[300px] w-full",children:e.jsxs(L6,{data:yt,children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"fillRevenue",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"hsl(var(--chart-1))",stopOpacity:.8}),e.jsx("stop",{offset:"95%",stopColor:"hsl(var(--chart-1))",stopOpacity:.1})]}),e.jsxs("linearGradient",{id:"fillSales",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"hsl(var(--chart-2))",stopOpacity:.8}),e.jsx("stop",{offset:"95%",stopColor:"hsl(var(--chart-2))",stopOpacity:.1})]}),e.jsxs("linearGradient",{id:"fillCustomers",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"hsl(var(--chart-3))",stopOpacity:.8}),e.jsx("stop",{offset:"95%",stopColor:"hsl(var(--chart-3))",stopOpacity:.1})]})]}),e.jsx(R1,{strokeDasharray:"3 3"}),e.jsx(qg,{dataKey:"date",tickFormatter:jt,tickLine:!1,axisLine:!1}),e.jsx(Ug,{tickLine:!1,axisLine:!1,tickFormatter:le=>`${le} KM`}),e.jsx(F6,{content:e.jsx(q1,{labelFormatter:le=>jt(le),formatter:(le,Qe)=>[Qe==="revenue"?`${at(Number(le))} Revenue`:`${le} ${Qe==="sales"?"Sales":"Customers"}`,""]})}),e.jsx(dc,{type:"monotone",dataKey:"revenue",stroke:"hsl(var(--chart-1))",fill:"url(#fillRevenue)",stackId:"a"}),e.jsx(dc,{type:"monotone",dataKey:"sales",stroke:"hsl(var(--chart-2))",fill:"url(#fillSales)",stackId:"b"}),e.jsx(dc,{type:"monotone",dataKey:"customers",stroke:"hsl(var(--chart-3))",fill:"url(#fillCustomers)",stackId:"c"}),e.jsx(q6,{content:e.jsx(U1,{})})]})}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 pt-4 border-t",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:at(yt.reduce((le,Qe)=>le+(Qe.revenue||0),0))}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Revenue"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:yt.reduce((le,Qe)=>le+(Qe.sales||0),0)}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Sales"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:yt.reduce((le,Qe)=>le+(Qe.customers||0),0)}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Customers"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:yt.length>0?(()=>{const le=yt.reduce((P,$)=>P+($.revenue||0),0),Qe=yt.reduce((P,$)=>P+($.sales||0),0);return at(Qe>0?le/Qe:0)})():"0.00 KM"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Avg Sale Value"})]})]})]}):e.jsx("div",{className:"text-center text-muted-foreground py-8",children:"No sales trend data available"})})]}),e.jsxs(se,{children:[e.jsxs(ue,{children:[e.jsxs(fe,{className:"flex items-center gap-2",children:[e.jsx(o7,{className:"h-5 w-5"}),"Repair Status"]}),e.jsx(Xt,{children:"Current repair distribution"})]}),e.jsx(ae,{children:e.jsxs("div",{className:"space-y-4",children:[$t.map((le,Qe)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${le.color}`}),e.jsx("span",{className:"text-sm",children:le.status})]}),e.jsx("div",{className:"text-sm font-medium",children:le.count>0?le.count:""})]},le.status)),e.jsx("div",{className:"pt-2 border-t",children:e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Total Repairs"}),e.jsx("span",{className:"font-medium",children:xt})]})})]})})]})]}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs(se,{children:[e.jsx(ue,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(fe,{className:"flex items-center gap-2",children:[e.jsx(Os,{className:"h-5 w-5"}),"Recent Sales"]}),e.jsx(Xt,{children:"Latest sales transactions"})]}),e.jsxs(q,{variant:"outline",size:"sm",onClick:()=>sr(lt,"recent-sales.csv"),children:[e.jsx(oa,{className:"h-4 w-4 mr-2"}),"Export"]})]})}),e.jsx(ae,{children:e.jsx("div",{className:"space-y-3 max-h-80 overflow-y-auto",children:lt.slice(0,5).map(le=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg hover:bg-muted/50 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(oo,{className:"h-8 w-8",children:e.jsx(co,{children:le.customer_name?.charAt(0)||"C"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:le.customer_name}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[le.model_name," • ",le.serial_number]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm font-medium",children:at(le.sale_price||0)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:jt(le.sale_date)})]})]},le.id))})})]}),e.jsxs(se,{children:[e.jsx(ue,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(fe,{className:"flex items-center gap-2",children:[e.jsx(O9,{className:"h-5 w-5"}),"Top Customers"]}),e.jsx(Xt,{children:"Highest value customers"})]}),e.jsxs(q,{variant:"outline",size:"sm",onClick:()=>sr(Re,"top-customers.csv"),children:[e.jsx(oa,{className:"h-4 w-4 mr-2"}),"Export"]})]})}),e.jsx(ae,{children:e.jsx("div",{className:"space-y-3 max-h-80 overflow-y-auto",children:Re.slice(0,5).map(le=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg hover:bg-muted/50 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(oo,{className:"h-8 w-8",children:e.jsx(co,{children:le.name?.charAt(0)||"C"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:le.name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:le.company})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm font-medium",children:at(le.totalRevenue||0)}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[le.totalDeals," deals"]})]})]},le.id))})})]})]}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs(se,{children:[e.jsx(ue,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(fe,{className:"flex items-center gap-2",children:[e.jsx(Rp,{className:"h-5 w-5"}),"Technician Workload"]}),e.jsx(Xt,{children:"Current technician assignments and workload"})]}),e.jsxs(q,{variant:"outline",size:"sm",onClick:()=>sr([...Z,...ke],"technician-workload.csv"),children:[e.jsx(oa,{className:"h-4 w-4 mr-2"}),"Export"]})]})}),e.jsx(ae,{children:e.jsx("div",{className:"space-y-3 max-h-80 overflow-y-auto",children:(()=>{const le={},Qe=[...Z,...ke];for(const $ of Qe){const We=$.technician_id||$.owner_technician_id,vt=$.technician_name||$.owner_technician_name||"Unassigned";le[We]||(le[We]={id:We,name:vt,regularWorkOrders:{low:0,med:0,high:0,total:0},warrantyWorkOrders:{low:0,med:0,high:0,total:0},totalWorkload:0});const dt=$.priority?.toLowerCase()==="medium"?"med":$.priority?.toLowerCase()||"med";$.is_warranty||$.id&&String($.id).includes("warranty")?(le[We].warrantyWorkOrders[dt]++,le[We].warrantyWorkOrders.total++):(le[We].regularWorkOrders[dt]++,le[We].regularWorkOrders.total++),le[We].totalWorkload++}return Object.values(le).sort(($,We)=>We.totalWorkload-$.totalWorkload).slice(0,5).map($=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg hover:bg-muted/50 transition-colors",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium",children:$.name}),e.jsx("div",{className:"flex items-center gap-2 mt-1",children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:["Regular: ",$.regularWorkOrders.total,"(",$.regularWorkOrders.high,"H, ",$.regularWorkOrders.med,"M, ",$.regularWorkOrders.low,"L)"]})]})}),e.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[e.jsx("div",{className:"w-2 h-2 bg-orange-500 rounded-full"}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:["Warranty: ",$.warrantyWorkOrders.total,"(",$.warrantyWorkOrders.high,"H, ",$.warrantyWorkOrders.med,"M, ",$.warrantyWorkOrders.low,"L)"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm font-medium",children:[$.totalWorkload," total"]}),e.jsx("div",{className:"w-16 h-2 bg-gray-200 rounded-full mt-1",children:e.jsx("div",{className:"h-2 bg-blue-500 rounded-full",style:{width:`${Math.min($.totalWorkload/10*100,100)}%`}})}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[Math.min($.totalWorkload/10*100,100).toFixed(0),"% capacity"]})]})]},$.id))})()})})]}),e.jsxs(se,{children:[e.jsx(ue,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(fe,{className:"flex items-center gap-2",children:[e.jsx(xs,{className:"h-5 w-5"}),"Team Performance"]}),e.jsx(Xt,{children:"Sales team metrics"})]}),e.jsxs(q,{variant:"outline",size:"sm",onClick:()=>sr(ht,"team-performance.csv"),children:[e.jsx(oa,{className:"h-4 w-4 mr-2"}),"Export"]})]})}),e.jsx(ae,{children:e.jsx("div",{className:"space-y-3",children:ht.slice(0,8).map(le=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg hover:bg-muted/50 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(oo,{className:"h-8 w-8",children:e.jsx(co,{children:le.name?.charAt(0)||"U"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:le.name}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[le.totalSales," sales"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm font-medium",children:at(le.totalRevenue||0)}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ki,{value:le.completionRate||0,className:"w-16 h-2"}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:[le.completionRate||0,"%"]})]})]})]},le.id))})})]})]}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs(se,{children:[e.jsx(ue,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(fe,{className:"flex items-center gap-2",children:[e.jsx(Ct,{className:"h-5 w-5"}),"Recent Repair Tickets"]}),e.jsx(Xt,{children:"Latest repair ticket submissions"})]}),e.jsxs(q,{variant:"outline",size:"sm",onClick:()=>sr([...st,...K],"repair-tickets.csv"),children:[e.jsx(oa,{className:"h-4 w-4 mr-2"}),"Export"]})]})}),e.jsx(ae,{children:e.jsx("div",{className:"space-y-3 max-h-80 overflow-y-auto",children:[...st,...K].slice(0,5).map((le,Qe)=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg hover:bg-muted/50 transition-colors",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium",children:le.formatted_number||le.ticket_number}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[It(le.status),le.priority&&e.jsx(Oe,{className:Er(le.priority),children:le.priority})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm font-medium",children:le.customer_name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:jt(le.created_at)})]})]},`ticket-${le.id}-${Qe}`))})})]}),e.jsxs(se,{children:[e.jsx(ue,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(fe,{className:"flex items-center gap-2",children:[e.jsx(Ar,{className:"h-5 w-5"}),"Active Work Orders"]}),e.jsx(Xt,{children:"Current work orders in progress"})]}),e.jsxs(q,{variant:"outline",size:"sm",onClick:()=>sr([...Z,...ke],"work-orders.csv"),children:[e.jsx(oa,{className:"h-4 w-4 mr-2"}),"Export"]})]})}),e.jsx(ae,{children:e.jsx("div",{className:"space-y-3 max-h-80 overflow-y-auto",children:[...Z,...ke].slice(0,5).map((le,Qe)=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg hover:bg-muted/50 transition-colors",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium",children:le.formatted_number||le.work_order_number}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[It(le.status),le.priority&&e.jsx(Oe,{className:Er(le.priority),children:le.priority})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm font-medium",children:le.customer_name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:jt(le.created_at)})]})]},`order-${le.id}-${Qe}`))})})]})]}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-3",children:[e.jsxs(se,{children:[e.jsx(ue,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(fe,{className:"flex items-center gap-2",children:[e.jsx(Ct,{className:"h-5 w-5"}),"Most Repaired Machines"]}),e.jsx(Xt,{children:"Machine models with most paid repairs"})]}),e.jsxs(q,{variant:"outline",size:"sm",onClick:()=>sr(Z,"most-repaired-machines.csv"),children:[e.jsx(oa,{className:"h-4 w-4 mr-2"}),"Export"]})]})}),e.jsx(ae,{children:e.jsx("div",{className:"space-y-3 max-h-80 overflow-y-auto",children:(()=>{const le={};for(const P of Z){const $=P.machine_name||"Unknown Model",We=P.catalogue_number||"",vt=We?`${$} (${We})`:$,dt=vt;le[dt]||(le[dt]={model:$,catalogueNumber:We,displayName:vt,count:0}),le[dt].count++}const Qe=Object.values(le).sort((P,$)=>$.count-P.count).slice(0,5);return Qe.length>0?Qe.map((P,$)=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg hover:bg-muted/50 transition-colors",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium",children:P.displayName}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[P.count," paid repairs"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm font-medium",children:[P.count," repairs"]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["#",$+1," most repaired"]})]})]},`machine-${P.displayName}-${$}`)):e.jsx("div",{className:"flex items-center justify-center h-32",children:e.jsx("div",{className:"text-sm text-muted-foreground",children:"No repair data available"})})})()})})]}),e.jsxs(se,{children:[e.jsx(ue,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(fe,{className:"flex items-center gap-2",children:[e.jsx(Jt,{className:"h-5 w-5"}),"Most Used Parts"]}),e.jsx(Xt,{children:"Inventory items used most frequently"})]}),e.jsxs(q,{variant:"outline",size:"sm",onClick:()=>sr(He,"most-used-parts.csv"),children:[e.jsx(oa,{className:"h-4 w-4 mr-2"}),"Export"]})]})}),e.jsx(ae,{children:T?e.jsx("div",{className:"flex items-center justify-center h-32",children:e.jsx("div",{className:"text-sm text-muted-foreground",children:"Loading most used parts..."})}):He.length>0?e.jsx("div",{className:"space-y-3 max-h-80 overflow-y-auto",children:He.map((le,Qe)=>{const P=He[0]?.total_quantity_used||1,$=le.total_quantity_used/P*100;return e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg hover:bg-muted/50 transition-colors",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium",children:le.name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:le.category}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Used in ",le.work_orders_count," work orders"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm font-medium",children:[le.total_quantity_used," units"]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["#",Qe+1," most used"]}),e.jsx("div",{className:"w-16 h-2 bg-gray-200 rounded-full mt-1",children:e.jsx("div",{className:"h-2 bg-green-500 rounded-full",style:{width:`${$}%`}})})]})]},`part-${le.id}-${Qe}`)})}):e.jsx("div",{className:"flex items-center justify-center h-32",children:e.jsx("div",{className:"text-sm text-muted-foreground",children:"No parts usage data available"})})})]}),e.jsxs(se,{children:[e.jsx(ue,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(fe,{className:"flex items-center gap-2",children:[e.jsx(Hs,{className:"h-5 w-5"}),"Most Warranty Machines"]}),e.jsx(Xt,{children:"Machine models with most warranty repairs"})]}),e.jsxs(q,{variant:"outline",size:"sm",onClick:()=>sr(ke,"most-warranty-machines.csv"),children:[e.jsx(oa,{className:"h-4 w-4 mr-2"}),"Export"]})]})}),e.jsx(ae,{children:e.jsx("div",{className:"space-y-3 max-h-80 overflow-y-auto",children:(()=>{const le={};for(const P of ke){const $=P.machine_name||"Unknown Model",We=P.catalogue_number||"",vt=We?`${$} (${We})`:$,dt=vt;le[dt]||(le[dt]={model:$,catalogueNumber:We,displayName:vt,count:0}),le[dt].count++}const Qe=Object.values(le).sort((P,$)=>$.count-P.count).slice(0,5);return Qe.length>0?Qe.map((P,$)=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg hover:bg-muted/50 transition-colors",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium",children:P.displayName}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[P.count," warranty repairs"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm font-medium",children:[P.count," repairs"]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["#",$+1," most warranty"]})]})]},`warranty-machine-${P.displayName}-${$}`)):e.jsx("div",{className:"flex items-center justify-center h-32",children:e.jsx("div",{className:"text-sm text-muted-foreground",children:"No warranty repair data available"})})})()})})]})]})]})})},wpe=[{title:"New Customer",description:"Add a new customer to the system",icon:Ot,href:"/add-customer",color:"text-orange-600",permission:"customers:write"},{title:"Create Repair Ticket",description:"Create a new repair ticket",icon:Qt,href:"/create-repair-ticket",color:"text-green-600",permission:"repair_tickets:write"},{title:"Create Warranty Ticket",description:"Create a new warranty repair ticket",icon:Pm,href:"/create-warranty-repair-ticket",color:"text-purple-600",permission:"repair_tickets:write"},{title:"Add Inventory Item",description:"Add new inventory items",icon:Jt,href:"/add-inventory-item",color:"text-indigo-600",permission:"inventory:write"},{title:"View Quotes",description:"View and manage quotes",icon:Ja,href:"/quote-management",color:"text-pink-600",permission:"quotes:read"},{title:"Add Machine Model",description:"Add a new machine model",icon:is,href:"/add-machine-model",color:"text-orange-600",permission:"machines:write"},{title:"Assign Machine",description:"Assign a machine to a customer",icon:Ct,href:"/machines",color:"text-blue-600",permission:"machines:assign"},{title:"Create Lead",description:"Create a new sales lead",icon:Os,href:"/pipeline-leads",color:"text-green-600",permission:"pipeline:write"}];function Npe(){const t=er(),{hasPermission:r}=hr(),[n,s]=f.useState(!1),a=c=>{t(c),s(!1)},l=wpe.filter(c=>!c.permission||r(c.permission));return e.jsxs(Cr,{open:n,onOpenChange:s,children:[e.jsx(Sr,{asChild:!0,children:e.jsxs(q,{variant:"outline",size:"sm",className:"w-full justify-start",children:[e.jsx(Vt,{className:"h-4 w-4"}),e.jsx("span",{className:"ml-2",children:"Click to create"})]})}),e.jsx(wr,{align:"end",className:"w-64",children:l.length===0?e.jsx("div",{className:"p-3 text-center text-sm text-muted-foreground",children:"No actions available for your role"}):l.map((c,u)=>{const d=c.icon;return e.jsxs(ct,{onClick:()=>a(c.href),className:"flex items-center space-x-3 p-3 cursor-pointer",children:[e.jsx(d,{className:`h-4 w-4 ${c.color}`}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium",children:c.title}),e.jsx("p",{className:"text-xs text-muted-foreground",children:c.description})]})]},u)})})]})}const _pe=()=>{const{user:t}=hr(),r=er(),[n,s]=f.useState("month"),[a,l]=f.useState(!1),[c,u]=f.useState(null),{data:d,isLoading:h,error:x}=jr({queryKey:["my-repairs",t?.id],queryFn:()=>de.getMyRepairs(t?.id),enabled:!!t?.id&&(t?.role==="technician"||t?.role==="manager"||t?.role==="admin")}),{data:p,isLoading:y,error:v}=jr({queryKey:["my-warranty-repairs",t?.id],queryFn:()=>de.getWarrantyRepairTickets({technician_id:t?.id}),enabled:!!t?.id&&(t?.role==="technician"||t?.role==="manager"||t?.role==="admin")}),{data:w,isLoading:b,error:N}=jr({queryKey:["my-work-orders",t?.id],queryFn:()=>de.getWorkOrders({technician_id:t?.id}),enabled:!!t?.id&&(t?.role==="technician"||t?.role==="manager"||t?.role==="admin")}),{data:_,isLoading:S,error:k}=jr({queryKey:["my-warranty-work-orders",t?.id],queryFn:()=>de.getWarrantyWorkOrders({technician_id:t?.id}),enabled:!!t?.id&&(t?.role==="technician"||t?.role==="manager"||t?.role==="admin")}),{data:E,isLoading:A,error:O}=jr({queryKey:["my-sales",t?.id],queryFn:()=>de.getMySales(t?.id),enabled:!!t?.id&&(t?.role==="sales"||t?.role==="manager"||t?.role==="admin")}),{data:z,isLoading:R,error:G}=jr({queryKey:["my-leads",t?.id],queryFn:()=>de.getMyLeads(t?.id),enabled:!!t?.id&&(t?.role==="sales"||t?.role==="manager"||t?.role==="admin")}),{data:J,isLoading:ie,error:V}=jr({queryKey:["my-sales-trends",t?.id,n],queryFn:()=>de.getSalesTrends({time_period:n,sales_person:t?.id}),enabled:!!t?.id&&(t?.role==="sales"||t?.role==="manager"||t?.role==="admin")}),{data:xe,isLoading:pe,error:re}=jr({queryKey:["my-performance",t?.id],queryFn:()=>de.getDashboardStats(),enabled:!!t?.id&&t?.role==="technician"}),{data:M,isLoading:B,error:L}=jr({queryKey:["my-performance",t?.id],queryFn:()=>de.getMyPerformance(),enabled:!!t?.id&&t?.role==="sales",retry:!1,refetchOnWindowFocus:!1}),T=t?.role==="technician"&&(h||y||b||S||pe)||t?.role==="sales"&&(A||R||ie)||(t?.role==="manager"||t?.role==="admin")&&(h||y||b||S||A||R||ie),F=t?.role==="technician"&&(x||v||N||k||re)||t?.role==="sales"&&(O||G||V)||(t?.role==="manager"||t?.role==="admin")&&(x||v||N||k||O||G||V);if(T)return e.jsx(gt,{children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Ws,{className:"h-8 w-8 animate-spin mx-auto mb-4 text-muted-foreground"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading your work dashboard..."})]})})});if(F)return e.jsx(gt,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"My Work"}),e.jsxs("p",{className:"text-muted-foreground",children:["Welcome back, ",t?.name,"! Here's your personal dashboard."]})]}),e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-red-800",children:[e.jsx(vr,{className:"h-5 w-5"}),e.jsx("h3",{className:"font-medium",children:"Error loading data"})]}),e.jsx("p",{className:"text-red-700 mt-2",children:"There was an error loading your work data. Please try refreshing the page."})]})]})});const I=Array.isArray(d?.data)?d.data:[],Q=Array.isArray(p?.data)?p.data:[],W=Array.isArray(w?.data)?w.data:[],ee=Array.isArray(_?.data)?_.data:[],ye=Array.isArray(E?.data?.sales)?E.data.sales:[],he=Array.isArray(z?.data)?z.data:[],te=Array.isArray(J?.data)?J.data:[],De=xe?.data||{},ne=M?.data||{},$e=[...I,...Q];I.filter(Me=>Me.status==="completed").length;const ge=W.filter(Me=>Me.status==="completed"),we=ee.filter(Me=>Me.status==="completed"),_e=[...ge,...we].reduce((Me,Tt)=>Me+(parseFloat(Tt.total_cost)||0),0),Ye=W.length,ht=ee.length,Ve=W.filter(Me=>["pending","in_progress"].includes(Me.status)),lt=ee.filter(Me=>["pending","in_progress"].includes(Me.status)),yt=Me=>{r(`/work-orders/${Me}`)},Re=Me=>{r(`/warranty-work-orders/${Me}`)},H=(Me,Tt)=>{r(Tt?`/warranty-repair-tickets/${Me}`:`/repair-tickets/${Me}`)},Be=Me=>{u(Me),l(!0)},st=()=>{l(!1),u(null)},K=Me=>e.jsx(Oe,{variant:Vr(Me),className:Vr(Me)==="outline"?Xs(Me):"",children:Qs(Me)}),Z=ye.length,ke=ye.reduce((Me,Tt)=>Me+(Tt.sale_price||0),0),Ae=he.filter(Me=>!["won","lost"].includes(Me.sales_stage)).length,je=ne.achievement_percentage||0,He=t?.role==="technician",Se=t?.role==="sales",it=t?.role==="manager"||t?.role==="admin";return e.jsxs(gt,{children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"My Work"}),e.jsxs("p",{className:"text-muted-foreground",children:["Welcome back, ",t?.name,"! Here's your personal dashboard."]})]}),e.jsx("div",{className:"flex gap-2",children:e.jsx(Npe,{})})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[He&&e.jsxs(e.Fragment,{children:[e.jsxs(se,{children:[e.jsxs(ue,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(fe,{className:"text-sm font-medium",children:"My Regular Repairs"}),e.jsx(Ct,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(ae,{children:[e.jsx("div",{className:"text-2xl font-bold",children:Ye}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Regular work orders assigned to you"})]})]}),e.jsxs(se,{children:[e.jsxs(ue,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(fe,{className:"text-sm font-medium",children:"My Warranty Repairs"}),e.jsx(Zt,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(ae,{children:[e.jsx("div",{className:"text-2xl font-bold",children:ht}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Warranty work orders assigned to you"})]})]}),e.jsxs(se,{children:[e.jsxs(ue,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(fe,{className:"text-sm font-medium",children:"Total Revenue"}),e.jsx(Tn,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(ae,{children:[e.jsx("div",{className:"text-2xl font-bold",children:at(_e)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"From completed work orders"})]})]}),e.jsxs(se,{children:[e.jsxs(ue,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(fe,{className:"text-sm font-medium",children:"Performance"}),e.jsx(Ot,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(ae,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:[De.my_work_order_completion_rate||0,"%"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Completion rate"})]})]})]}),Se&&e.jsxs(e.Fragment,{children:[e.jsxs(se,{children:[e.jsxs(ue,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(fe,{className:"text-sm font-medium",children:"My Sales"}),e.jsx(Tn,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(ae,{children:[e.jsx("div",{className:"text-2xl font-bold",children:at(ke)}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[Z," sales this period"]})]})]}),e.jsxs(se,{children:[e.jsxs(ue,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(fe,{className:"text-sm font-medium",children:"Active Leads"}),e.jsx(ti,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(ae,{children:[e.jsx("div",{className:"text-2xl font-bold",children:Ae}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Sales opportunities"})]})]}),e.jsxs(se,{children:[e.jsxs(ue,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(fe,{className:"text-sm font-medium",children:"Quotes Sent"}),e.jsx(is,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(ae,{children:[e.jsx("div",{className:"text-2xl font-bold",children:"0"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"This month"})]})]}),e.jsxs(se,{children:[e.jsxs(ue,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(fe,{className:"text-sm font-medium",children:"Performance"}),e.jsx(Ot,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(ae,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:[je,"%"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Target achievement"})]})]})]}),it&&e.jsxs(e.Fragment,{children:[e.jsxs(se,{children:[e.jsxs(ue,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(fe,{className:"text-sm font-medium",children:"My Regular Repairs"}),e.jsx(Ct,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(ae,{children:[e.jsx("div",{className:"text-2xl font-bold",children:Ye}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Regular work orders assigned to you"})]})]}),e.jsxs(se,{children:[e.jsxs(ue,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(fe,{className:"text-sm font-medium",children:"My Warranty Repairs"}),e.jsx(Zt,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(ae,{children:[e.jsx("div",{className:"text-2xl font-bold",children:ht}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Warranty work orders assigned to you"})]})]}),e.jsxs(se,{children:[e.jsxs(ue,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(fe,{className:"text-sm font-medium",children:"My Sales"}),e.jsx(Tn,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(ae,{children:[e.jsx("div",{className:"text-2xl font-bold",children:at(ke)}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[Z," sales this period"]})]})]}),e.jsxs(se,{children:[e.jsxs(ue,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(fe,{className:"text-sm font-medium",children:"My Leads"}),e.jsx(ti,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(ae,{children:[e.jsx("div",{className:"text-2xl font-bold",children:Ae}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Active opportunities"})]})]})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[He&&e.jsxs(e.Fragment,{children:[e.jsxs(se,{children:[e.jsxs(ue,{children:[e.jsxs(fe,{className:"flex items-center gap-2",children:[e.jsx(Ct,{className:"h-5 w-5"}),"My Open Work"]}),e.jsx(Xt,{children:"Your pending and in progress repairs"})]}),e.jsxs(ae,{className:"space-y-4",children:[Ve.slice(0,3).map(Me=>e.jsxs("div",{className:"group flex items-center justify-between p-3 border rounded-lg cursor-pointer hover:bg-muted/50 transition-colors",onClick:()=>yt(Me.id),children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("p",{className:"text-sm font-medium",children:["#",Me.formatted_number||Me.work_order_number]}),e.jsxs("p",{className:"text-xs text-muted-foreground ",children:[Me.customer_name," - ",Me.machine_name]}),e.jsxs("p",{className:"text-xs text-muted-foreground ",children:["SN: ",Me.serial_number," | Cat: ",Me.catalogue_number||"N/A"]})]}),K(Me.status)]},Me.id)),lt.slice(0,2).map(Me=>e.jsxs("div",{className:"group flex items-center justify-between p-3 border rounded-lg cursor-pointer hover:bg-muted/50 transition-colors",onClick:()=>Re(Me.id),children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("p",{className:"text-sm font-medium",children:["#",Me.formatted_number||Me.work_order_number,e.jsx("span",{className:"text-blue-600 ml-1",children:"(Warranty)"})]}),e.jsxs("p",{className:"text-xs text-muted-foreground ",children:[Me.customer_name," - ",Me.machine_name]}),e.jsxs("p",{className:"text-xs text-muted-foreground ",children:["SN: ",Me.serial_number," | Cat: ",Me.catalogue_number||"N/A"]})]}),K(Me.status)]},`warranty-${Me.id}`)),Ve.length===0&&lt.length===0&&e.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No active work orders assigned to you"})]})]}),e.jsxs(se,{children:[e.jsxs(ue,{children:[e.jsxs(fe,{className:"flex items-center gap-2",children:[e.jsx(Zt,{className:"h-5 w-5"}),"My Repair Tickets"]}),e.jsx(Xt,{children:"Your assigned repair tickets"})]}),e.jsxs(ae,{className:"space-y-4",children:[$e.slice(0,5).map(Me=>{const Tt=Q.some(Pe=>Pe.id===Me.id);return e.jsxs("div",{className:"group flex items-center justify-between p-3 border rounded-lg cursor-pointer hover:bg-muted/50 transition-colors",onClick:()=>H(Me.id,Tt),children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("p",{className:"text-sm font-medium",children:["#",Me.formatted_number||Me.ticket_number,Tt&&e.jsx("span",{className:"text-blue-600 ml-1",children:"(Warranty)"})]}),e.jsxs("p",{className:"text-xs text-muted-foreground ",children:[Me.customer_name," - ",Me.model_name]}),e.jsxs("p",{className:"text-xs text-muted-foreground ",children:["SN: ",Me.serial_number," | Cat: ",Me.catalogue_number||"N/A"]})]}),K(Me.status)]},Me.id)}),$e.length===0&&e.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No repair tickets assigned to you"})]})]})]}),Se&&e.jsxs(e.Fragment,{children:[e.jsxs(se,{children:[e.jsxs(ue,{children:[e.jsxs(fe,{className:"flex items-center gap-2",children:[e.jsx(ti,{className:"h-5 w-5"}),"My Active Leads"]}),e.jsx(Xt,{children:"Your sales opportunities"})]}),e.jsxs(ae,{className:"space-y-4",children:[he.slice(0,5).map(Me=>e.jsxs("div",{className:"group flex items-center justify-between p-3 border rounded-lg cursor-pointer hover:bg-muted/50 transition-colors",onClick:()=>Be(Me),children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium",children:Me.customer_name}),e.jsxs("p",{className:"text-xs text-muted-foreground ",children:[Me.company_name," - ",Me.lead_quality]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Oe,{variant:"outline",className:"",children:Me.sales_stage}),e.jsx("span",{className:"text-sm font-medium",children:at(Me.potential_value||0)})]})]},Me.id)),he.length===0&&e.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No active leads assigned to you"})]})]}),e.jsxs(se,{children:[e.jsxs(ue,{children:[e.jsxs(fe,{className:"flex items-center gap-2",children:[e.jsx(is,{className:"h-5 w-5"}),"Follow-ups Due"]}),e.jsx(Xt,{children:"Leads requiring follow-up"})]}),e.jsxs(ae,{className:"space-y-4",children:[he.filter(Me=>Me.next_follow_up&&new Date(Me.next_follow_up)<=new Date).slice(0,5).map(Me=>e.jsxs("div",{className:"group flex items-center justify-between p-3 border rounded-lg cursor-pointer hover:bg-muted/50 transition-colors",onClick:()=>Be(Me),children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium",children:Me.customer_name}),e.jsxs("p",{className:"text-xs text-muted-foreground ",children:["Due: ",new Date(Me.next_follow_up).toLocaleDateString()]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(Oe,{variant:"destructive",children:"Overdue"})})]},Me.id)),he.filter(Me=>Me.next_follow_up&&new Date(Me.next_follow_up)<=new Date).length===0&&e.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No follow-ups due"})]})]})]}),it&&e.jsxs(e.Fragment,{children:[e.jsxs(se,{children:[e.jsxs(ue,{children:[e.jsxs(fe,{className:"flex items-center gap-2",children:[e.jsx(Ct,{className:"h-5 w-5"}),"My Open Work"]}),e.jsx(Xt,{children:"Your pending and in progress repairs"})]}),e.jsxs(ae,{className:"space-y-4",children:[Ve.slice(0,3).map(Me=>e.jsxs("div",{className:"group flex items-center justify-between p-3 border rounded-lg cursor-pointer hover:bg-muted/50 transition-colors",onClick:()=>yt(Me.id),children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("p",{className:"text-sm font-medium",children:["#",Me.formatted_number||Me.work_order_number]}),e.jsxs("p",{className:"text-xs text-muted-foreground ",children:[Me.customer_name," - ",Me.machine_name]}),e.jsxs("p",{className:"text-xs text-muted-foreground ",children:["SN: ",Me.serial_number," | Cat: ",Me.catalogue_number||"N/A"]})]}),K(Me.status)]},Me.id)),lt.slice(0,2).map(Me=>e.jsxs("div",{className:"group flex items-center justify-between p-3 border rounded-lg cursor-pointer hover:bg-muted/50 transition-colors",onClick:()=>Re(Me.id),children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("p",{className:"text-sm font-medium",children:["#",Me.formatted_number||Me.work_order_number,e.jsx("span",{className:"text-blue-600 ml-1",children:"(Warranty)"})]}),e.jsxs("p",{className:"text-xs text-muted-foreground ",children:[Me.customer_name," - ",Me.machine_name]}),e.jsxs("p",{className:"text-xs text-muted-foreground ",children:["SN: ",Me.serial_number," | Cat: ",Me.catalogue_number||"N/A"]})]}),K(Me.status)]},`warranty-${Me.id}`)),Ve.length===0&&lt.length===0&&e.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No active work orders assigned to you"})]})]}),e.jsxs(se,{children:[e.jsxs(ue,{children:[e.jsxs(fe,{className:"flex items-center gap-2",children:[e.jsx(Tn,{className:"h-5 w-5"}),"My Sales"]}),e.jsx(Xt,{children:"Your recent sales"})]}),e.jsxs(ae,{className:"space-y-4",children:[ye.slice(0,5).map(Me=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:Me.customer_name}),e.jsxs("p",{className:"text-xs text-muted-foreground ",children:[Me.model_name," - ",Me.sale_date]})]}),e.jsx("div",{className:"text-right",children:e.jsx("p",{className:"text-sm font-medium",children:at(Me.sale_price||0)})})]},Me.id)),ye.length===0&&e.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No sales recorded yet"})]})]})]})]}),(Se||it)&&e.jsxs(se,{children:[e.jsx(ue,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(fe,{className:"flex items-center gap-2",children:[e.jsx(Os,{className:"h-5 w-5"}),"My Sales Performance"]}),e.jsx(Xt,{children:"Your sales trends and performance over time"})]}),e.jsxs(tt,{value:n,onValueChange:s,children:[e.jsx(Je,{className:"w-32",children:e.jsx(rt,{})}),e.jsxs(et,{children:[e.jsx(Y,{value:"week",children:"Last 7 days"}),e.jsx(Y,{value:"month",children:"Last 30 days"}),e.jsx(Y,{value:"quarter",children:"Last 90 days"}),e.jsx(Y,{value:"year",children:"Last year"})]})]})]})}),e.jsx(ae,{children:ie?e.jsx("div",{className:"flex items-center justify-center h-[300px]",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Ws,{className:"h-8 w-8 animate-spin mx-auto mb-4 text-muted-foreground"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading sales trends..."})]})}):te.length>0?e.jsxs(e.Fragment,{children:[e.jsx(F1,{config:{revenue:{label:"Revenue",color:"hsl(var(--chart-1))"},sales:{label:"Sales",color:"hsl(var(--chart-2))"},customers:{label:"Customers",color:"hsl(var(--chart-3))"}},className:"h-[300px] w-full",children:e.jsxs(L6,{data:te,children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"fillRevenue",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"hsl(var(--chart-1))",stopOpacity:.8}),e.jsx("stop",{offset:"95%",stopColor:"hsl(var(--chart-1))",stopOpacity:.1})]}),e.jsxs("linearGradient",{id:"fillSales",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"hsl(var(--chart-2))",stopOpacity:.8}),e.jsx("stop",{offset:"95%",stopColor:"hsl(var(--chart-2))",stopOpacity:.1})]}),e.jsxs("linearGradient",{id:"fillCustomers",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"hsl(var(--chart-3))",stopOpacity:.8}),e.jsx("stop",{offset:"95%",stopColor:"hsl(var(--chart-3))",stopOpacity:.1})]})]}),e.jsx(R1,{strokeDasharray:"3 3"}),e.jsx(qg,{dataKey:"date",tickFormatter:jt,tickLine:!1,axisLine:!1}),e.jsx(Ug,{tickLine:!1,axisLine:!1,tickFormatter:Me=>`${Me} KM`}),e.jsx(F6,{content:e.jsx(q1,{labelFormatter:Me=>jt(Me),formatter:(Me,Tt)=>[Tt==="revenue"?`${at(Number(Me))} Revenue`:`${Me} ${Tt==="sales"?"Sales":"Customers"}`,""]})}),e.jsx(dc,{type:"monotone",dataKey:"revenue",stroke:"hsl(var(--chart-1))",fill:"url(#fillRevenue)",stackId:"a"}),e.jsx(dc,{type:"monotone",dataKey:"sales",stroke:"hsl(var(--chart-2))",fill:"url(#fillSales)",stackId:"b"}),e.jsx(dc,{type:"monotone",dataKey:"customers",stroke:"hsl(var(--chart-3))",fill:"url(#fillCustomers)",stackId:"c"}),e.jsx(q6,{content:e.jsx(U1,{})})]})}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 pt-4 border-t",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:at(te.reduce((Me,Tt)=>Me+(Tt.revenue||0),0))}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Revenue"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:te.reduce((Me,Tt)=>Me+(Tt.sales||0),0)}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Sales"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:te.reduce((Me,Tt)=>Me+(Tt.customers||0),0)}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Customers"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:te.reduce((Me,Tt)=>Me+(Tt.sales||0),0)>0?at(te.reduce((Me,Tt)=>Me+(Tt.revenue||0),0)/te.reduce((Me,Tt)=>Me+(Tt.sales||0),0)):"0.00 KM"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Avg Sale Value"})]})]})]}):e.jsx("div",{className:"text-center text-muted-foreground py-8",children:"No sales data available for the selected period"})})]})]}),e.jsx(Ape,{isOpen:a,onClose:st,lead:c,users:[]})]})},Cpe=t=>{switch(t){case"high":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300";case"medium":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300";case"low":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-300"}},Spe=t=>{switch(t){case"new":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300";case"contacted":return"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-300";case"qualified":return"bg-indigo-100 text-indigo-800 dark:bg-indigo-900 dark:text-indigo-300";case"proposal":return"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-300";case"negotiation":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300";case"won":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300";case"lost":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-300"}},kpe=[{value:"new",label:"New"},{value:"contacted",label:"Contacted"},{value:"qualified",label:"Qualified"},{value:"proposal",label:"Proposal"},{value:"negotiation",label:"Negotiation"},{value:"won",label:"Won"},{value:"lost",label:"Lost"}];function Ape({isOpen:t,onClose:r,lead:n,users:s}){if(!n)return null;const a=s.find(c=>c.id===n.assigned_to),l=s.find(c=>c.name===n.created_by_name);return e.jsx(Ft,{open:t,onOpenChange:r,children:e.jsxs(Rt,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(qt,{children:[e.jsx(Lt,{children:"Lead Details"}),e.jsx(Ut,{children:"View detailed information about this lead including customer details, lead information, and sales notes."})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Customer Information"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(U,{className:"text-sm font-medium text-muted-foreground",children:"Customer Name"}),e.jsx("p",{className:"text-sm",children:n.customer_name})]}),e.jsxs("div",{children:[e.jsx(U,{className:"text-sm font-medium text-muted-foreground",children:"Company"}),e.jsx("p",{className:"text-sm",children:n.company_name||"-"})]}),e.jsxs("div",{children:[e.jsx(U,{className:"text-sm font-medium text-muted-foreground",children:"Email"}),e.jsx("p",{className:"text-sm",children:n.email||"-"})]}),e.jsxs("div",{children:[e.jsx(U,{className:"text-sm font-medium text-muted-foreground",children:"Phone"}),e.jsx("p",{className:"text-sm",children:n.phone||"-"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Lead Information"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(U,{className:"text-sm font-medium text-muted-foreground",children:"Potential Value"}),e.jsx("p",{className:"text-sm font-medium",children:at(n.potential_value||0)})]}),e.jsxs("div",{children:[e.jsx(U,{className:"text-sm font-medium text-muted-foreground",children:"Lead Quality"}),e.jsx(Oe,{className:Cpe(n.lead_quality),children:n.lead_quality})]}),e.jsxs("div",{children:[e.jsx(U,{className:"text-sm font-medium text-muted-foreground",children:"Sales Stage"}),e.jsx(Oe,{className:Spe(n.sales_stage),children:kpe.find(c=>c.value===n.sales_stage)?.label||n.sales_stage})]}),e.jsxs("div",{children:[e.jsx(U,{className:"text-sm font-medium text-muted-foreground",children:"Source"}),e.jsx("p",{className:"text-sm",children:n.source||"-"})]}),e.jsxs("div",{children:[e.jsx(U,{className:"text-sm font-medium text-muted-foreground",children:"Assigned To"}),e.jsx("p",{className:"text-sm",children:a?.name||"Unassigned"})]}),e.jsxs("div",{children:[e.jsx(U,{className:"text-sm font-medium text-muted-foreground",children:"Created By"}),e.jsx("p",{className:"text-sm",children:l?.name||n.created_by_name||"-"})]}),e.jsxs("div",{children:[e.jsx(U,{className:"text-sm font-medium text-muted-foreground",children:"Next Follow-up"}),e.jsx("p",{className:"text-sm",children:n.next_follow_up?jt(n.next_follow_up):"-"})]}),e.jsxs("div",{children:[e.jsx(U,{className:"text-sm font-medium text-muted-foreground",children:"Created Date"}),e.jsx("p",{className:"text-sm",children:jt(n.created_at)})]})]})]}),n.sales_notes&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{className:"text-sm font-medium text-muted-foreground",children:"Sales Notes"}),e.jsx("p",{className:"text-sm bg-muted p-3 rounded-md",children:n.sales_notes})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(q,{variant:"outline",onClick:r,children:"Close"})})]})})}const cO=[{key:"user",label:"User"},{key:"role",label:"Role"},{key:"status",label:"Status"},{key:"session",label:"Session"},{key:"actions",label:"Actions"},{key:"last_login",label:"Last Login"}];function Epe(){const t=er(),{user:r}=hr(),{socket:n,isConnected:s}=nN(),[a,l]=f.useState(null),[c,u]=f.useState([]),[d,h]=f.useState([]),[x,p]=f.useState([]),[y,v]=f.useState(!0),[w,b]=f.useState(new Date),[N,_]=f.useState(!1),[S,k]=f.useState(null),[E,A]=f.useState({name:"",email:"",role:"",status:"",password:"",confirmPassword:""}),[O,z]=f.useState(!1),{visibleColumns:R,toggleColumn:G,isColumnVisible:J,resetColumns:ie,showAllColumns:V,hideAllColumns:xe,isSyncing:pe}=ps("admin_user_management",gs(cO));f.useEffect(()=>{re();const W=setInterval(M,3e5);return()=>clearInterval(W)},[]),f.useEffect(()=>{if(!n||!s)return;const W=ee=>{u(ye=>{const he=[...ye],te=he.findIndex(De=>De.id===ee.userId);return te>=0?he[te]={...he[te],status:ee.status,session_duration:ee.status==="offline"?"N/A":he[te].session_duration}:ee.status==="online"&&he.unshift({id:ee.userId,name:ee.userName,email:"",role:ee.userRole,last_login:new Date().toISOString(),status:"online",session_duration:"0m",actions_count:0,login_attempts:0}),he})};return n.on("user_activity_update",W),re(),()=>{n.off("user_activity_update",W)}},[n,s]);const re=async()=>{try{v(!0);try{const te=await de.request("/admin/test")}catch(te){console.error("Admin test endpoint failed:",te)}const[W,ee,ye,he]=await Promise.all([de.request("/admin/system-health"),de.request("/admin/user-activity"),de.request("/admin/system-alerts"),de.request("/admin/recent-activity")]);l(W.data),u(ee.data),h(ye.data),p(he.data),b(new Date)}catch(W){console.error("Error fetching admin data:",W)}finally{v(!1)}},M=async()=>{try{const[W,ee,ye]=await Promise.all([de.request("/admin/system-health"),de.request("/admin/system-alerts"),de.request("/admin/recent-activity")]);l(W.data),h(ee.data),p(ye.data),b(new Date)}catch(W){console.error("Error fetching non-user data:",W)}},B=W=>{switch(W){case"online":case"connected":case"success":return"text-green-600";case"warning":case"slow":return"text-yellow-600";case"offline":case"disconnected":case"error":return"text-red-600";default:return"text-gray-600"}},L=W=>{switch(W){case"online":case"connected":case"success":return e.jsx(Ar,{className:"h-4 w-4 text-green-600"});case"warning":case"slow":return e.jsx(vr,{className:"h-4 w-4 text-yellow-600"});case"offline":case"disconnected":case"error":return e.jsx(wn,{className:"h-4 w-4 text-red-600"});default:return e.jsx(Zt,{className:"h-4 w-4 text-gray-600"})}},T=W=>{switch(W){case"error":return e.jsx(wn,{className:"h-4 w-4 text-red-600"});case"warning":return e.jsx(vr,{className:"h-4 w-4 text-yellow-600"});case"info":return e.jsx(mr,{className:"h-4 w-4 text-blue-600"});case"success":return e.jsx(Ar,{className:"h-4 w-4 text-green-600"});default:return e.jsx(_i,{className:"h-4 w-4 text-gray-600"})}},F=W=>{switch(W){case"critical":return"bg-red-100 text-red-800 border-red-200";case"high":return"bg-orange-100 text-orange-800 border-orange-200";case"medium":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"low":return"bg-blue-100 text-blue-800 border-blue-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},I=W=>{k(W),A({name:W.name,email:W.email,role:W.role,status:W.account_status||"active",password:"",confirmPassword:""}),_(!0)},Q=async()=>{if(S){if(E.password&&E.password!==E.confirmPassword){Ne.error("Passwords do not match");return}if(E.password&&E.password.length<8){Ne.error("Password must be at least 8 characters");return}try{z(!0);const W={name:E.name,email:E.email,role:E.role,status:E.status};E.password&&(W.password=E.password),await de.request(`/users/${S.id}`,{method:"PATCH",body:JSON.stringify(W)}),Ne.success("User updated successfully"),_(!1),re()}catch(W){console.error("Error updating user:",W),Ne.error(W.message||"Failed to update user")}finally{z(!1)}}};return e.jsx(gt,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Admin Dashboard"}),e.jsx("p",{className:"text-muted-foreground",children:"System overview and administrative controls"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${s?"bg-green-500":"bg-red-500"}`}),e.jsx("span",{className:"text-muted-foreground",children:s?"Real-time Connected":"Disconnected"})]}),e.jsxs(q,{variant:"outline",size:"sm",onClick:M,disabled:y,children:[e.jsx(Ws,{className:`h-4 w-4 mr-2 ${y?"animate-spin":""}`}),"Refresh"]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Last updated: ",gn(w.toISOString())]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs(se,{children:[e.jsxs(ue,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(fe,{className:"text-sm font-medium",children:"Server Status"}),e.jsx(C9,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(ae,{children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[a&&L(a.server_status),e.jsx("span",{className:`text-sm font-medium ${B(a?.server_status||"offline")}`,children:a?.server_status||"Loading..."})]}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Uptime: ",a?.uptime||"N/A"]})]})]}),e.jsxs(se,{children:[e.jsxs(ue,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(fe,{className:"text-sm font-medium",children:"Database"}),e.jsx(O7,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(ae,{children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[a&&L(a.database_status),e.jsx("span",{className:`text-sm font-medium ${B(a?.database_status||"disconnected")}`,children:a?.database_status||"Loading..."})]}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Response: ",a?.api_response_time||0,"ms"]})]})]}),e.jsxs(se,{children:[e.jsxs(ue,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(fe,{className:"text-sm font-medium",children:"Active Users"}),e.jsx(xs,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(ae,{children:[e.jsx("div",{className:"text-2xl font-bold",children:c.filter(W=>W.status==="online").length}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["of ",c.length," total users"]})]})]}),e.jsxs(se,{children:[e.jsxs(ue,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(fe,{className:"text-sm font-medium",children:"System Alerts"}),e.jsx(fs,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(ae,{children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:d.filter(W=>!W.resolved&&W.severity==="critical").length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"critical alerts"})]})]})]}),e.jsxs(Ys,{defaultValue:"overview",className:"space-y-4",children:[e.jsxs(Ps,{children:[e.jsx(Kt,{value:"overview",children:"Overview"}),e.jsx(Kt,{value:"users",children:"User Management"})]}),e.jsx(Gt,{value:"overview",className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(se,{children:[e.jsxs(ue,{children:[e.jsxs(fe,{className:"flex items-center",children:[e.jsx(ks,{className:"h-5 w-5 mr-2"}),"Recent System Activity"]}),e.jsx(Xt,{children:"Latest user actions and system events"})]}),e.jsx(ae,{children:e.jsx("div",{className:"space-y-3",children:x.slice(0,5).map(W=>e.jsxs("div",{className:"flex items-center space-x-3 p-2 rounded-lg bg-muted/50",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"h-8 w-8 rounded-full bg-primary/10 flex items-center justify-center",children:e.jsx(Rp,{className:"h-4 w-4 text-primary"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("p",{className:"text-sm font-medium truncate",children:[W.user_name," ",W.action," ",W.entity_name]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[gn(W.timestamp)," • ",W.ip_address]})]})]},W.id))})})]}),e.jsxs(se,{children:[e.jsx(ue,{children:e.jsxs(fe,{className:"flex items-center",children:[e.jsx(M7,{className:"h-5 w-5 mr-2"}),"Performance Metrics"]})}),e.jsx(ae,{children:a&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsx("span",{children:"Memory Usage (Heap)"}),e.jsxs("span",{children:[a.memory_usage,"%"]})]}),e.jsx(ki,{value:a.memory_usage})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsx("span",{children:"Active DB Connections"}),e.jsx("span",{children:a.active_connections})]}),e.jsx(ki,{value:Math.min(a.active_connections/20*100,100)}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Max pool size: 20"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsx("span",{children:"API Response Time"}),e.jsxs("span",{children:[a.api_response_time,"ms"]})]}),e.jsx(ki,{value:Math.min(a.api_response_time/1e3*100,100)}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Target: < 1000ms"})]})]})})]}),e.jsxs(se,{children:[e.jsx(ue,{children:e.jsxs(fe,{className:"flex items-center",children:[e.jsx(V9,{className:"h-5 w-5 mr-2"}),"Network & Connections"]})}),e.jsx(ae,{children:a&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Active Connections"}),e.jsx("span",{className:"text-sm font-bold",children:a.active_connections})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"API Response Time"}),e.jsxs("span",{className:"text-sm font-bold",children:[a.api_response_time,"ms"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Server Uptime"}),e.jsx("span",{className:"text-sm font-bold",children:a.uptime})]})]})})]}),e.jsxs(se,{children:[e.jsxs(ue,{children:[e.jsxs(fe,{className:"flex items-center",children:[e.jsx(_i,{className:"h-5 w-5 mr-2"}),"System Alerts & Notifications"]}),e.jsx(Xt,{children:"Monitor system alerts and critical events"})]}),e.jsx(ae,{children:e.jsx("div",{className:"space-y-3",children:d.map(W=>e.jsxs("div",{className:`flex items-start space-x-3 p-4 rounded-lg border ${W.resolved?"bg-muted/50":"bg-background"}`,children:[e.jsx("div",{className:"flex-shrink-0 mt-1",children:T(W.type)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx("h4",{className:"text-sm font-medium",children:W.title}),e.jsx(Oe,{className:F(W.severity),children:W.severity}),W.resolved&&e.jsx(Oe,{variant:"outline",children:"Resolved"})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:W.message}),e.jsx("p",{className:"text-xs text-muted-foreground",children:gn(W.timestamp)})]}),!W.resolved&&e.jsx(q,{variant:"outline",size:"sm",children:"Resolve"})]},W.id))})})]})]})}),e.jsx(Gt,{value:"users",className:"space-y-4",children:e.jsxs(se,{children:[e.jsx(ue,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(fe,{className:"flex items-center",children:[e.jsx(xs,{className:"h-5 w-5 mr-2"}),"User Activity & Management"]}),e.jsx(Xt,{children:"Monitor user sessions and manage accounts"})]}),e.jsx(ys,{columns:cO,visibleColumns:R,onToggleColumn:G,onShowAll:V,onHideAll:xe,onReset:ie,isSyncing:pe})]})}),e.jsxs(ae,{children:[e.jsxs(ir,{children:[e.jsx(lr,{children:e.jsxs(ft,{children:[J("user")&&e.jsx(me,{children:"User"}),J("role")&&e.jsx(me,{children:"Role"}),J("status")&&e.jsx(me,{children:"Status"}),J("session")&&e.jsx(me,{children:"Session"}),J("actions")&&e.jsx(me,{children:"Actions"}),J("last_login")&&e.jsx(me,{children:"Last Login"}),e.jsx(me,{children:"Manage"})]})}),e.jsx(or,{children:c.map(W=>e.jsxs(ft,{className:"cursor-pointer hover:bg-muted/50",onClick:()=>t(`/admin/user-activity/${W.id}`),children:[J("user")&&e.jsx(oe,{children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`h-8 w-8 rounded-full flex items-center justify-center ${W.status==="online"?"bg-green-100":"bg-gray-100"}`,children:e.jsx(xs,{className:`h-4 w-4 ${W.status==="online"?"text-green-600":"text-gray-600"}`})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:W.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:W.email})]})]})}),J("role")&&e.jsx(oe,{children:e.jsx(Oe,{variant:"outline",children:W.role})}),J("status")&&e.jsx(oe,{children:e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx(Oe,{variant:W.status==="online"?"default":"secondary",children:W.status}),W.account_status&&e.jsx(Oe,{variant:W.account_status==="active"?"outline":"destructive",className:"text-xs",children:W.account_status})]})}),J("session")&&e.jsx(oe,{children:e.jsx("p",{className:"text-sm",children:W.session_duration})}),J("actions")&&e.jsx(oe,{children:e.jsx("p",{className:"text-sm font-medium",children:W.actions_count})}),J("last_login")&&e.jsx(oe,{children:e.jsx("p",{className:"text-sm",children:gn(W.last_login)})}),e.jsx(oe,{children:e.jsx(q,{variant:"outline",size:"sm",onClick:ee=>{ee.stopPropagation(),I(W)},children:e.jsx(bl,{className:"h-4 w-4"})})})]},W.id))})]}),e.jsx("p",{className:"text-sm text-muted-foreground mt-4",children:"💡 Click on any user row to view their detailed activity history"})]})]})})]}),e.jsx(Ft,{open:N,onOpenChange:_,children:e.jsxs(Rt,{className:"max-w-md",children:[e.jsxs(qt,{children:[e.jsx(Lt,{children:"Edit User"}),e.jsx(Ut,{children:"Update user information, role, and password"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"name",children:"Name"}),e.jsx(be,{id:"name",value:E.name,onChange:W=>A(ee=>({...ee,name:W.target.value})),placeholder:"Enter name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"email",children:"Email"}),e.jsx(be,{id:"email",type:"email",value:E.email,onChange:W=>A(ee=>({...ee,email:W.target.value})),placeholder:"Enter email"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"role",children:"Role"}),e.jsxs(tt,{value:E.role,onValueChange:W=>A(ee=>({...ee,role:W})),children:[e.jsx(Je,{children:e.jsx(rt,{placeholder:"Select role"})}),e.jsxs(et,{children:[e.jsx(Y,{value:"admin",children:"Admin"}),e.jsx(Y,{value:"manager",children:"Manager"}),e.jsx(Y,{value:"technician",children:"Technician"}),e.jsx(Y,{value:"sales",children:"Sales"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"status",children:"Status"}),e.jsxs(tt,{value:E.status,onValueChange:W=>A(ee=>({...ee,status:W})),children:[e.jsx(Je,{children:e.jsx(rt,{placeholder:"Select status"})}),e.jsxs(et,{children:[e.jsx(Y,{value:"active",children:"Active"}),e.jsx(Y,{value:"inactive",children:"Inactive"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"password",children:"New Password (Optional)"}),e.jsx(be,{id:"password",type:"password",value:E.password,onChange:W=>A(ee=>({...ee,password:W.target.value})),placeholder:"Leave blank to keep current password"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Minimum 8 characters required"})]}),E.password&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{htmlFor:"confirmPassword",children:"Confirm Password"}),e.jsx(be,{id:"confirmPassword",type:"password",value:E.confirmPassword,onChange:W=>A(ee=>({...ee,confirmPassword:W.target.value})),placeholder:"Confirm new password"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-2 mt-6",children:[e.jsx(q,{variant:"outline",onClick:()=>_(!1),disabled:O,children:"Cancel"}),e.jsx(q,{onClick:Q,disabled:O,children:O?"Saving...":"Save Changes"})]})]})})]})})}function Mpe(){const t=er(),[r,n]=f.useState("team"),[s,a]=f.useState(new Date),[l,c]=f.useState("month"),[u,d]=f.useState({from:"",to:""}),[h,x]=f.useState(!1),[p,y]=f.useState(null),[v,w]=f.useState([]),[b,N]=f.useState([]),[_,S]=f.useState([]),[k,E]=f.useState(null),[A,O]=f.useState([]),[z,R]=f.useState([]);f.useEffect(()=>{G()},[l,u,h]);const G=async()=>{try{await Promise.all([J(),ie(),V()]),a(new Date)}catch(T){console.error("Error fetching manager dashboard data:",T)}},J=async()=>{try{const T=h&&u.from&&u.to?{time_period:"custom",start_date:u.from,end_date:u.to}:{time_period:l},F=await de.getManagerOverview(T);y(F.data)}catch(T){console.error("Error fetching overview data:",T)}},ie=async()=>{try{const T=h&&u.from&&u.to?{time_period:"custom",start_date:u.from,end_date:u.to}:{time_period:l},[F,I,Q]=await Promise.all([de.getManagerTeamWorkload(T),de.getManagerPriorityWorkOrders(),de.getManagerRecentActivity()]);w(F.data),N(I.data),S(Q.data)}catch(T){console.error("Error fetching team data:",T)}},V=async()=>{try{const T=h&&u.from&&u.to?{time_period:"custom",start_date:u.from,end_date:u.to}:{time_period:l},[F,I,Q]=await Promise.all([de.getManagerSalesOverview(T),de.getManagerSalesTeam(T),de.getManagerInventoryAlerts()]);E(F.data),O(I.data),R(Q.data)}catch(T){console.error("Error fetching sales data:",T)}},xe=()=>{G()},pe=T=>{n(T),T==="team"&&v.length===0?ie():T==="sales"&&k===null&&V()},re=()=>{if(h&&u.from&&u.to)return"Selected Period";switch(l){case"week":return"This Week";case"month":return"This Month";case"quarter":return"This Quarter";case"year":return"This Year";default:return"This Month"}},M=T=>{switch(T){case"high":return"bg-red-100 text-red-800 dark:bg-red-950 dark:text-red-400";case"medium":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-950 dark:text-yellow-400";case"low":return"bg-green-100 text-green-800 dark:bg-green-950 dark:text-green-400";default:return"bg-gray-100 text-gray-800 dark:bg-gray-950 dark:text-gray-400"}},B=T=>{const I={pending:{variant:"secondary",text:"Pending"},in_progress:{variant:"default",text:"In Progress"},completed:{variant:"outline",text:"Completed"},on_hold:{variant:"secondary",text:"On Hold"},cancelled:{variant:"destructive",text:"Cancelled"}}[T]||{variant:"secondary",text:T};return e.jsx(Oe,{variant:I.variant,children:I.text})},L=T=>{const I={low:{className:"bg-green-100 text-green-800 dark:bg-green-950 dark:text-green-400",text:"Low"},medium:{className:"bg-yellow-100 text-yellow-800 dark:bg-yellow-950 dark:text-yellow-400",text:"Medium"},high:{className:"bg-orange-100 text-orange-800 dark:bg-orange-950 dark:text-orange-400",text:"High"},urgent:{className:"bg-red-100 text-red-800 dark:bg-red-950 dark:text-red-400",text:"Urgent"}}[T]||{className:"bg-gray-100 text-gray-800 dark:bg-gray-950 dark:text-gray-400",text:T};return e.jsx(Oe,{className:I.className,children:I.text})};return e.jsx(gt,{children:e.jsxs("div",{className:"flex-1 space-y-4 p-4 pt-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:"Manager Dashboard"}),e.jsx("p",{className:"text-muted-foreground",children:"Overview of team performance, operations, and sales metrics"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Metrics Period:"}),e.jsxs(tt,{value:h?"custom":l,onValueChange:T=>{T==="custom"?x(!0):(x(!1),c(T))},children:[e.jsx(Je,{className:"w-[180px]",children:e.jsx(rt,{placeholder:"Select period"})}),e.jsxs(et,{children:[e.jsx(Y,{value:"week",children:"This Week"}),e.jsx(Y,{value:"month",children:"This Month"}),e.jsx(Y,{value:"quarter",children:"This Quarter"}),e.jsx(Y,{value:"year",children:"This Year"}),e.jsx(Y,{value:"custom",children:"Custom Range"})]})]})]}),e.jsxs(q,{onClick:xe,variant:"outline",size:"sm",children:[e.jsx(Ws,{className:"h-4 w-4 mr-2"}),"Refresh"]})]})]}),h&&e.jsxs("div",{className:"flex items-center gap-2 justify-end",children:[e.jsx(Rn,{value:u.from,onChange:T=>d(F=>({...F,from:T})),placeholder:"From date"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"to"}),e.jsx(Rn,{value:u.to,onChange:T=>d(F=>({...F,to:T})),placeholder:"To date"}),e.jsx(q,{variant:"outline",size:"sm",onClick:()=>{d({from:"",to:""}),x(!1),c("month")},children:"Clear"})]}),e.jsxs(Ys,{value:r,onValueChange:pe,className:"space-y-6",children:[e.jsxs(Ps,{className:"grid w-full grid-cols-2 lg:w-[400px]",children:[e.jsxs(Kt,{value:"team",className:"flex items-center gap-2",children:[e.jsx(xs,{className:"h-4 w-4"}),"Team Overview"]}),e.jsxs(Kt,{value:"sales",className:"flex items-center gap-2",children:[e.jsx(oP,{className:"h-4 w-4"}),"Sales & Revenue"]})]}),e.jsxs(Gt,{value:"team",className:"space-y-6",children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsxs(se,{children:[e.jsxs(ue,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(fe,{className:"text-sm font-medium",children:"Active Work Orders"}),e.jsx(Ct,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(ae,{children:[e.jsx("div",{className:"text-2xl font-bold",children:p?.active_work_orders||0}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[p?.pending_work_orders||0," pending (includes warranty)"]})]})]}),e.jsxs(se,{children:[e.jsxs(ue,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(fe,{className:"text-sm font-medium",children:"Pending Tickets"}),e.jsx(Zt,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(ae,{children:[e.jsx("div",{className:"text-2xl font-bold",children:p?.pending_tickets||0}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Awaiting conversion"})]})]}),e.jsxs(se,{children:[e.jsxs(ue,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsxs(fe,{className:"text-sm font-medium",children:["Completed ",re()]}),e.jsx(Ar,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(ae,{children:[e.jsx("div",{className:"text-2xl font-bold",children:p?.completed_this_month||0}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Work orders & tickets"})]})]}),e.jsxs(se,{children:[e.jsxs(ue,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(fe,{className:"text-sm font-medium",children:"Team Utilization"}),e.jsx(xs,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(ae,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:[p?.team_utilization||0,"%"]}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[p?.active_technicians||0," of ",p?.total_technicians||0," active"]})]})]})]}),e.jsxs(se,{children:[e.jsxs(ue,{children:[e.jsx(fe,{children:"Team Workload Distribution"}),e.jsx(Xt,{children:"Current workload and performance for each technician"})]}),e.jsx(ae,{children:e.jsxs(ir,{children:[e.jsx(lr,{children:e.jsxs(ft,{children:[e.jsx(me,{children:"Technician"}),e.jsx(me,{className:"text-center",children:"Active"}),e.jsx(me,{className:"text-center",children:"Pending"}),e.jsxs(me,{className:"text-center",children:["Completed (",l==="week"?"Week":l==="quarter"?"Quarter":l==="year"?"Year":h?"Period":"Month",")"]}),e.jsx(me,{className:"text-right",children:"Avg Time"}),e.jsx(me,{className:"text-center",children:"Workload"})]})}),e.jsx(or,{children:v.length===0?e.jsx(ft,{children:e.jsx(oe,{colSpan:6,className:"text-center text-muted-foreground py-8",children:"No technicians found"})}):v.map(T=>e.jsxs(ft,{children:[e.jsx(oe,{children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:T.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:T.email})]})}),e.jsx(oe,{className:"text-center",children:e.jsx(Oe,{variant:"default",className:"bg-blue-100 text-blue-800 dark:bg-blue-950 dark:text-blue-400",children:T.active_work_orders})}),e.jsx(oe,{className:"text-center",children:T.pending_work_orders}),e.jsx(oe,{className:"text-center",children:T.completed_this_month}),e.jsxs(oe,{className:"text-right",children:[T.avg_completion_hours,"h"]}),e.jsx(oe,{className:"text-center",children:e.jsx(Oe,{className:M(T.workload_status),children:T.workload_status})})]},T.id))})]})})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs(se,{children:[e.jsxs(ue,{children:[e.jsxs(fe,{className:"flex items-center gap-2",children:[e.jsx(vr,{className:"h-5 w-5 text-orange-500"}),"Priority Work Orders"]}),e.jsx(Xt,{children:"High priority items requiring attention"})]}),e.jsx(ae,{children:e.jsxs("div",{className:"space-y-4",children:[b.length===0?e.jsx("div",{className:"text-center text-muted-foreground py-8",children:"No priority work orders"}):b.slice(0,5).map(T=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium",children:T.formatted_number}),e.jsx("p",{className:"text-sm text-muted-foreground truncate",children:T.description||"No description"}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[T.customer_name," • ",T.technician_name||"Unassigned"]})]}),e.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[L(T.priority),B(T.status)]})]},T.id)),b.length>5&&e.jsxs(q,{variant:"outline",className:"w-full",onClick:()=>t("/work-orders?priority=high"),children:["View All Priority Orders",e.jsx(Am,{className:"h-4 w-4 ml-2"})]})]})})]}),e.jsxs(se,{children:[e.jsxs(ue,{children:[e.jsxs(fe,{className:"flex items-center gap-2",children:[e.jsx(ks,{className:"h-5 w-5 text-blue-500"}),"Recent Activity"]}),e.jsx(Xt,{children:"Latest updates across the system"})]}),e.jsx(ae,{children:e.jsxs("div",{className:"space-y-4",children:[_.length===0?e.jsx("div",{className:"text-center text-muted-foreground py-8",children:"No recent activity"}):_.slice(0,5).map((T,F)=>e.jsxs("div",{className:"flex items-start gap-3 p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("p",{className:"text-sm font-medium",children:[T.user_name," ",T.action," ",T.entity_name]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:gn(T.timestamp)})]}),e.jsx(Oe,{variant:"outline",className:"text-xs",children:T.entity_type})]},F)),e.jsxs(q,{variant:"outline",className:"w-full",onClick:()=>t("/admin/action-logs"),children:["View All Activity",e.jsx(Am,{className:"h-4 w-4 ml-2"})]})]})})]})]})]}),e.jsxs(Gt,{value:"sales",className:"space-y-6",children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsxs(se,{children:[e.jsxs(ue,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsxs(fe,{className:"text-sm font-medium",children:["Revenue (",re(),")"]}),e.jsx(Tn,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(ae,{children:[e.jsx("div",{className:"text-2xl font-bold",children:at(k?.monthly_sales_revenue||0)}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[k?.monthly_sales_count||0," sales"]})]})]}),e.jsxs(se,{children:[e.jsxs(ue,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(fe,{className:"text-sm font-medium",children:"Active Leads"}),e.jsx(Os,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(ae,{children:[e.jsx("div",{className:"text-2xl font-bold",children:k?.active_leads||0}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[k?.new_leads_month||0," new this month"]})]})]}),e.jsxs(se,{children:[e.jsxs(ue,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(fe,{className:"text-sm font-medium",children:"Conversion Rate"}),e.jsx(ti,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(ae,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:[(k?.conversion_rate||0).toFixed(1),"%"]}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[k?.won_leads_month||0," won ",l==="week"?"this week":l==="quarter"?"this quarter":l==="year"?"this year":h?"in period":"this month"]})]})]}),e.jsxs(se,{children:[e.jsxs(ue,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(fe,{className:"text-sm font-medium",children:"Pending Quotes"}),e.jsx(Qt,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(ae,{children:[e.jsx("div",{className:"text-2xl font-bold",children:k?.pending_quotes||0}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[k?.accepted_quotes_month||0," accepted this month"]})]})]})]}),e.jsxs(se,{children:[e.jsxs(ue,{children:[e.jsx(fe,{children:"Sales Team Performance"}),e.jsx(Xt,{children:"Individual performance and target progress"})]}),e.jsx(ae,{children:e.jsxs(ir,{children:[e.jsx(lr,{children:e.jsxs(ft,{children:[e.jsx(me,{children:"Sales Person"}),e.jsx(me,{className:"text-center",children:"Leads"}),e.jsx(me,{className:"text-center",children:"Quotes"}),e.jsx(me,{className:"text-center",children:"Deals"}),e.jsx(me,{className:"text-right",children:"Revenue"}),e.jsx(me,{className:"text-right",children:"Target"}),e.jsx(me,{children:"Progress"}),e.jsx(me,{className:"text-center",children:"Conv. Rate"})]})}),e.jsx(or,{children:A.length===0?e.jsx(ft,{children:e.jsx(oe,{colSpan:8,className:"text-center text-muted-foreground py-8",children:"No sales team data available"})}):A.map(T=>e.jsxs(ft,{children:[e.jsx(oe,{children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:T.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:T.email})]})}),e.jsx(oe,{className:"text-center",children:T.total_leads}),e.jsx(oe,{className:"text-center",children:T.total_quotes}),e.jsx(oe,{className:"text-center",children:T.deals_closed}),e.jsx(oe,{className:"text-right",children:at(T.revenue)}),e.jsx(oe,{className:"text-right",children:at(T.target)}),e.jsx(oe,{children:e.jsxs("div",{className:"space-y-1",children:[e.jsx(ki,{value:T.target_progress,className:"h-2"}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[T.target_progress.toFixed(1),"%"]})]})}),e.jsxs(oe,{className:"text-center",children:[T.conversion_rate.toFixed(1),"%"]})]},T.id))})]})})]}),e.jsxs(se,{children:[e.jsxs(ue,{children:[e.jsxs(fe,{className:"flex items-center gap-2",children:[e.jsx(Jt,{className:"h-5 w-5 text-orange-500"}),"Inventory Alerts"]}),e.jsx(Xt,{children:"Items requiring immediate attention"})]}),e.jsx(ae,{children:e.jsxs("div",{className:"space-y-4",children:[z.length===0?e.jsx("div",{className:"text-center text-muted-foreground py-8",children:"No inventory alerts"}):z.map(T=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium",children:T.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[T.category," • ",T.quantity," in stock • Min: ",T.min_stock_level]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Need ",T.quantity_needed," units • Reorder value: ",at(T.reorder_value)]})]}),e.jsx(Oe,{variant:"destructive",className:"bg-red-100 text-red-800 dark:bg-red-950 dark:text-red-400",children:T.quantity<T.min_stock_level?"Low Stock":"Out of Stock"})]},T.id)),e.jsxs(q,{variant:"outline",className:"w-full",onClick:()=>t("/inventory?stock_status=low"),children:["View All Inventory Alerts",e.jsx(Am,{className:"h-4 w-4 ml-2"})]})]})})]})]})]})]})})}function Tpe(){const{userId:t}=oi(),r=er(),[n,s]=f.useState([]),[a,l]=f.useState(null),[c,u]=f.useState(null),[d,h]=f.useState([]),[x,p]=f.useState(!0),[y,v]=f.useState(1),[w,b]=f.useState(1),[N,_]=f.useState({action_type:"",entity_type:"",start_date:"",end_date:""});f.useEffect(()=>{t&&S()},[t,y,N]);const S=async()=>{try{p(!0);const V=await de.getUserActionLogs(t,{...N,page:y,limit:50});s(V.data.logs),l(V.data.user),u(V.data.statistics),h(V.data.breakdown),b(V.pagination.pages)}catch(V){console.error("Error fetching action logs:",V),Ne.error("Failed to load action logs")}finally{p(!1)}},k=(V,xe)=>{_(pe=>({...pe,[V]:xe})),v(1)},E=()=>{_({action_type:"",entity_type:"",start_date:"",end_date:""}),v(1)},A=()=>{const V=["Date","Action","Entity Type","Entity Name","Details","IP Address"],xe=n.map(L=>[gn(L.created_at),z(L.action_type),G(L.entity_type),L.entity_name||"-",JSON.stringify(L.action_details),L.ip_address||"-"]),pe=[V.join(","),...xe.map(L=>L.map(T=>`"${T}"`).join(","))].join(`
`),re=new Blob([pe],{type:"text/csv"}),M=window.URL.createObjectURL(re),B=document.createElement("a");B.href=M,B.download=`user-${t}-activity-${new Date().toISOString().split("T")[0]}.csv`,B.click(),window.URL.revokeObjectURL(M),Ne.success("Activity log exported successfully")},O=V=>{switch(V){case"create":return e.jsx(Vt,{className:"h-4 w-4 text-green-600"});case"update":case"edit":return e.jsx(xr,{className:"h-4 w-4 text-blue-600"});case"delete":return e.jsx(br,{className:"h-4 w-4 text-red-600"});case"convert":return e.jsx(ri,{className:"h-4 w-4 text-purple-600"});case"assign":return e.jsx(Ot,{className:"h-4 w-4 text-indigo-600"});case"sell":return e.jsx(lN,{className:"h-4 w-4 text-emerald-600"});default:return e.jsx(ks,{className:"h-4 w-4 text-gray-600"})}},z=V=>V.charAt(0).toUpperCase()+V.slice(1),R=V=>{switch(V){case"customer":return e.jsx(xs,{className:"h-4 w-4"});case"work_order":case"warranty_work_order":return e.jsx(Ct,{className:"h-4 w-4"});case"machine":return e.jsx(bl,{className:"h-4 w-4"});case"inventory":return e.jsx(Jt,{className:"h-4 w-4"});case"repair_ticket":case"warranty_repair_ticket":return e.jsx(Qt,{className:"h-4 w-4"});default:return e.jsx(ks,{className:"h-4 w-4"})}},G=V=>V.split("_").map(xe=>xe.charAt(0).toUpperCase()+xe.slice(1)).join(" "),J=V=>{switch(V){case"create":return"bg-green-100 text-green-800";case"update":case"edit":return"bg-blue-100 text-blue-800";case"delete":return"bg-red-100 text-red-800";case"convert":return"bg-purple-100 text-purple-800";case"assign":return"bg-indigo-100 text-indigo-800";case"sell":return"bg-emerald-100 text-emerald-800";default:return"bg-gray-100 text-gray-800"}},ie=()=>Object.values(N).filter(V=>V!=="").length;return e.jsx(gt,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs(q,{variant:"outline",size:"sm",onClick:()=>r("/dashboard/admin"),children:[e.jsx(Cn,{className:"h-4 w-4 mr-2"}),"Back to Admin Dashboard"]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"User Activity History"}),a&&e.jsxs("p",{className:"text-muted-foreground",children:[a.name," (",a.email,") • ",a.role]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(q,{variant:"outline",size:"sm",onClick:S,children:[e.jsx(Ws,{className:"h-4 w-4 mr-2"}),"Refresh"]}),e.jsxs(q,{variant:"outline",size:"sm",onClick:A,children:[e.jsx(oa,{className:"h-4 w-4 mr-2"}),"Export CSV"]})]})]}),c&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs(se,{children:[e.jsxs(ue,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(fe,{className:"text-sm font-medium",children:"Total Actions"}),e.jsx(ks,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(ae,{children:[e.jsx("div",{className:"text-2xl font-bold",children:c.total_actions}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[c.today_actions," today"]})]})]}),e.jsxs(se,{children:[e.jsxs(ue,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(fe,{className:"text-sm font-medium",children:"Creates"}),e.jsx(Vt,{className:"h-4 w-4 text-green-600"})]}),e.jsxs(ae,{children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:c.creates}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"New items created"})]})]}),e.jsxs(se,{children:[e.jsxs(ue,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(fe,{className:"text-sm font-medium",children:"Updates"}),e.jsx(xr,{className:"h-4 w-4 text-blue-600"})]}),e.jsxs(ae,{children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:c.updates}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Items modified"})]})]}),e.jsxs(se,{children:[e.jsxs(ue,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(fe,{className:"text-sm font-medium",children:"Deletes"}),e.jsx(br,{className:"h-4 w-4 text-red-600"})]}),e.jsxs(ae,{children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:c.deletes}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Items removed"})]})]})]}),d.length>0&&e.jsxs(se,{children:[e.jsxs(ue,{children:[e.jsx(fe,{children:"Activity Breakdown by Entity Type"}),e.jsx(Xt,{children:"Distribution of actions across different entity types"})]}),e.jsx(ae,{children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:d.map(V=>e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[R(V.entity_type),e.jsx("span",{className:"font-medium",children:G(V.entity_type)})]}),e.jsx(Oe,{variant:"outline",children:V.count})]}),e.jsxs("div",{className:"text-xs text-muted-foreground space-y-1",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Creates:"}),e.jsx("span",{className:"text-green-600",children:V.creates})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Updates:"}),e.jsx("span",{className:"text-blue-600",children:V.updates})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Deletes:"}),e.jsx("span",{className:"text-red-600",children:V.deletes})]})]})]},V.entity_type))})})]}),e.jsxs(se,{children:[e.jsx(ue,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(fe,{className:"flex items-center",children:[e.jsx(Ua,{className:"h-5 w-5 mr-2"}),"Filters"]}),e.jsx(Xt,{children:"Filter activity logs by action type, entity, and date range"})]}),ie()>0&&e.jsxs(q,{variant:"outline",size:"sm",onClick:E,children:["Clear Filters (",ie(),")"]})]})}),e.jsx(ae,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Action Type"}),e.jsxs(tt,{value:N.action_type||"all",onValueChange:V=>k("action_type",V==="all"?"":V),children:[e.jsx(Je,{children:e.jsx(rt,{placeholder:"All actions"})}),e.jsxs(et,{children:[e.jsx(Y,{value:"all",children:"All actions"}),e.jsx(Y,{value:"create",children:"Create"}),e.jsx(Y,{value:"update",children:"Update"}),e.jsx(Y,{value:"delete",children:"Delete"}),e.jsx(Y,{value:"convert",children:"Convert"}),e.jsx(Y,{value:"assign",children:"Assign"}),e.jsx(Y,{value:"sell",children:"Sell"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Entity Type"}),e.jsxs(tt,{value:N.entity_type||"all",onValueChange:V=>k("entity_type",V==="all"?"":V),children:[e.jsx(Je,{children:e.jsx(rt,{placeholder:"All entities"})}),e.jsxs(et,{children:[e.jsx(Y,{value:"all",children:"All entities"}),e.jsx(Y,{value:"customer",children:"Customer"}),e.jsx(Y,{value:"machine",children:"Machine"}),e.jsx(Y,{value:"work_order",children:"Work Order"}),e.jsx(Y,{value:"warranty_work_order",children:"Warranty Work Order"}),e.jsx(Y,{value:"repair_ticket",children:"Repair Ticket"}),e.jsx(Y,{value:"warranty_repair_ticket",children:"Warranty Repair Ticket"}),e.jsx(Y,{value:"inventory",children:"Inventory"}),e.jsx(Y,{value:"lead",children:"Lead"}),e.jsx(Y,{value:"quote",children:"Quote"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Start Date"}),e.jsx(Rn,{value:N.start_date,onChange:V=>k("start_date",V),placeholder:"Select start date"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"End Date"}),e.jsx(Rn,{value:N.end_date,onChange:V=>k("end_date",V),placeholder:"Select end date"})]})]})})]}),e.jsxs(se,{children:[e.jsxs(ue,{children:[e.jsx(fe,{children:"Activity Timeline"}),e.jsx(Xt,{children:"Detailed log of all user actions"})]}),e.jsx(ae,{children:x?e.jsx("div",{className:"text-center py-8",children:"Loading activity logs..."}):n.length===0?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No activity logs found for this user with the selected filters."}):e.jsxs(e.Fragment,{children:[e.jsxs(ir,{children:[e.jsx(lr,{children:e.jsxs(ft,{children:[e.jsx(me,{children:"Date & Time"}),e.jsx(me,{children:"Action"}),e.jsx(me,{children:"Entity"}),e.jsx(me,{children:"Details"}),e.jsx(me,{children:"IP Address"})]})}),e.jsx(or,{children:n.map(V=>e.jsxs(ft,{children:[e.jsx(oe,{className:"font-medium",children:gn(V.created_at)}),e.jsx(oe,{children:e.jsxs("div",{className:"flex items-center space-x-2",children:[O(V.action_type),e.jsx(Oe,{className:J(V.action_type),children:z(V.action_type)})]})}),e.jsx(oe,{children:e.jsxs("div",{className:"flex items-center space-x-2",children:[R(V.entity_type),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:G(V.entity_type)}),V.entity_name&&e.jsx("div",{className:"text-sm text-muted-foreground",children:V.entity_name})]})]})}),e.jsx(oe,{children:V.action_details&&e.jsxs("div",{className:"text-sm",children:[V.action_details.updated_fields&&e.jsxs("div",{className:"text-muted-foreground",children:["Updated: ",V.action_details.updated_fields.join(", ")]}),V.action_details.status_change&&e.jsxs("div",{className:"text-muted-foreground",children:["Status: ",V.action_details.status_change.from," → ",V.action_details.status_change.to]}),V.action_details.converted_to&&e.jsxs("div",{className:"text-muted-foreground",children:["Converted to ",V.action_details.converted_to]}),V.action_details.sale_price&&e.jsxs("div",{className:"text-muted-foreground",children:["Sale Price: $",V.action_details.sale_price]})]})}),e.jsx(oe,{className:"text-sm text-muted-foreground",children:V.ip_address||"-"})]},V.id))})]}),w>1&&e.jsxs("div",{className:"flex items-center justify-between mt-4",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Page ",y," of ",w]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(q,{variant:"outline",size:"sm",onClick:()=>v(V=>Math.max(1,V-1)),disabled:y===1,children:"Previous"}),e.jsx(q,{variant:"outline",size:"sm",onClick:()=>v(V=>Math.min(w,V+1)),disabled:y===w,children:"Next"})]})]})]})})]})]})})}function Ope(){const{feedbackItems:t,isLoading:r,error:n,refreshFeedback:s,updateFeedbackStatus:a}=aN(),{user:l}=hr(),[c,u]=f.useState(null),[d,h]=f.useState(""),[x,p]=f.useState("all"),[y,v]=f.useState("all"),[w,b]=f.useState("all"),[N,_]=f.useState(""),S=[{value:"bug",label:"Bug Report",icon:b0,color:"bg-red-100 text-red-800"},{value:"feature",label:"Feature Request",icon:uP,color:"bg-blue-100 text-blue-800"},{value:"improvement",label:"Improvement",icon:fP,color:"bg-green-100 text-green-800"},{value:"complaint",label:"Complaint",icon:vr,color:"bg-yellow-100 text-yellow-800"},{value:"other",label:"Other",icon:Ja,color:"bg-gray-100 text-gray-800"}],k=[{value:"open",label:"Open",color:"bg-blue-100 text-blue-800"},{value:"in_progress",label:"In Progress",color:"bg-yellow-100 text-yellow-800"},{value:"resolved",label:"Resolved",color:"bg-green-100 text-green-800"},{value:"closed",label:"Closed",color:"bg-gray-100 text-gray-800"}],E=[{value:"urgent",label:"Urgent",color:"bg-red-100 text-red-800"},{value:"high",label:"High",color:"bg-orange-100 text-orange-800"},{value:"medium",label:"Medium",color:"bg-yellow-100 text-yellow-800"},{value:"low",label:"Low",color:"bg-green-100 text-green-800"}],A=t.filter(G=>{const J=x==="all"||G.status===x,ie=y==="all"||G.type===y,V=w==="all"||G.priority===w,xe=N===""||G.message.toLowerCase().includes(N.toLowerCase())||G.user.name.toLowerCase().includes(N.toLowerCase())||G.page_url.toLowerCase().includes(N.toLowerCase());return J&&ie&&V&&xe}),O=async(G,J)=>{try{await a(G,J,d),h(""),u(null)}catch(ie){console.error("Error updating feedback:",ie),alert("Failed to update feedback status")}},z=G=>{switch(G){case"open":return e.jsx(Zt,{className:"h-4 w-4"});case"in_progress":return e.jsx(Ws,{className:"h-4 w-4"});case"resolved":return e.jsx(Ar,{className:"h-4 w-4"});case"closed":return e.jsx(wn,{className:"h-4 w-4"});default:return e.jsx(Zt,{className:"h-4 w-4"})}},R=G=>{const J=S.find(ie=>ie.value===G);return J?e.jsx(J.icon,{className:"h-4 w-4"}):e.jsx(Ja,{className:"h-4 w-4"})};return l?.role!=="admin"?e.jsx(gt,{children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx(wn,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Access Denied"}),e.jsx("p",{className:"text-muted-foreground",children:"Only administrators can view feedback."})]})})}):e.jsx(gt,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"User Feedback"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage user feedback, bug reports, and feature requests"})]}),e.jsxs(q,{onClick:s,disabled:r,children:[e.jsx(Ws,{className:`h-4 w-4 mr-2 ${r?"animate-spin":""}`}),"Refresh"]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsxs(se,{children:[e.jsxs(ue,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(fe,{className:"text-sm font-medium",children:"Total Feedback"}),e.jsx(Ja,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(ae,{children:e.jsx("div",{className:"text-2xl font-bold",children:t.length})})]}),e.jsxs(se,{children:[e.jsxs(ue,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(fe,{className:"text-sm font-medium",children:"Open Issues"}),e.jsx(Zt,{className:"h-4 w-4 text-blue-500"})]}),e.jsx(ae,{children:e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:t.filter(G=>G.status==="open").length})})]}),e.jsxs(se,{children:[e.jsxs(ue,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(fe,{className:"text-sm font-medium",children:"Bug Reports"}),e.jsx(b0,{className:"h-4 w-4 text-red-500"})]}),e.jsx(ae,{children:e.jsx("div",{className:"text-2xl font-bold text-red-600",children:t.filter(G=>G.type==="bug").length})})]}),e.jsxs(se,{children:[e.jsxs(ue,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(fe,{className:"text-sm font-medium",children:"Urgent Issues"}),e.jsx(vr,{className:"h-4 w-4 text-orange-500"})]}),e.jsx(ae,{children:e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:t.filter(G=>G.priority==="urgent").length})})]})]}),e.jsxs(se,{children:[e.jsx(ue,{children:e.jsxs(fe,{className:"flex items-center gap-2",children:[e.jsx(Ua,{className:"h-5 w-5"}),"Filters"]})}),e.jsx(ae,{children:e.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Status"}),e.jsxs(tt,{value:x,onValueChange:p,children:[e.jsx(Je,{children:e.jsx(rt,{})}),e.jsxs(et,{children:[e.jsx(Y,{value:"all",children:"All Statuses"}),k.map(G=>e.jsx(Y,{value:G.value,children:G.label},G.value))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Type"}),e.jsxs(tt,{value:y,onValueChange:v,children:[e.jsx(Je,{children:e.jsx(rt,{})}),e.jsxs(et,{children:[e.jsx(Y,{value:"all",children:"All Types"}),S.map(G=>e.jsx(Y,{value:G.value,children:G.label},G.value))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Priority"}),e.jsxs(tt,{value:w,onValueChange:b,children:[e.jsx(Je,{children:e.jsx(rt,{})}),e.jsxs(et,{children:[e.jsx(Y,{value:"all",children:"All Priorities"}),E.map(G=>e.jsx(Y,{value:G.value,children:G.label},G.value))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Search"}),e.jsxs("div",{className:"relative",children:[e.jsx(nr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx("input",{type:"text",placeholder:"Search feedback...",value:N,onChange:G=>_(G.target.value),className:"pl-10 pr-4 py-2 w-full border border-input rounded-md focus:outline-none focus:ring-2 focus:ring-ring"})]})]})]})})]}),e.jsx("div",{className:"space-y-4",children:r?e.jsx("div",{className:"flex items-center justify-center h-32",children:e.jsx(Ws,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):n?e.jsx(se,{children:e.jsx(ae,{className:"pt-6",children:e.jsxs("div",{className:"text-center text-red-600",children:[e.jsxs("p",{children:["Error loading feedback: ",n]}),e.jsx(q,{onClick:s,className:"mt-4",children:"Try Again"})]})})}):A.length===0?e.jsx(se,{children:e.jsx(ae,{className:"pt-6",children:e.jsxs("div",{className:"text-center text-muted-foreground",children:[e.jsx(Ja,{className:"h-12 w-12 mx-auto mb-4"}),e.jsx("p",{children:"No feedback found matching your filters."})]})})}):A.map(G=>{const J=S.find(xe=>xe.value===G.type),ie=k.find(xe=>xe.value===G.status),V=E.find(xe=>xe.value===G.priority);return e.jsxs(se,{className:"hover:shadow-md transition-shadow",children:[e.jsx(ue,{children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[R(G.type),e.jsx(fe,{className:"text-lg",children:J?.label||G.type}),e.jsx(Oe,{className:J?.color,children:J?.label}),e.jsxs(Oe,{className:ie?.color,children:[z(G.status),e.jsx("span",{className:"ml-1",children:ie?.label})]}),e.jsx(Oe,{className:V?.color,children:V?.label})]}),e.jsxs(Xt,{children:["From ",e.jsx("strong",{children:G.user.name})," (",G.user.role,") •",gn(G.created_at)]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(Ft,{children:[e.jsx(yc,{asChild:!0,children:e.jsxs(q,{variant:"outline",size:"sm",children:[e.jsx(mr,{className:"h-4 w-4 mr-2"}),"View"]})}),e.jsxs(Rt,{className:"max-w-2xl",children:[e.jsxs(qt,{children:[e.jsxs(Lt,{className:"flex items-center gap-2",children:[R(G.type),J?.label||G.type]}),e.jsxs(Ut,{children:["Feedback from ",G.user.name," • ",gn(G.created_at)]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Oe,{className:J?.color,children:J?.label}),e.jsx(Oe,{className:ie?.color,children:ie?.label}),e.jsx(Oe,{className:V?.color,children:V?.label})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"Message:"}),e.jsx("p",{className:"text-sm bg-muted p-3 rounded-md",children:G.message})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Page:"})," ",G.page_url]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Updated:"})," ",gn(G.updated_at)]})]}),G.admin_notes&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"Admin Notes:"}),e.jsx("p",{className:"text-sm bg-blue-50 p-3 rounded-md",children:G.admin_notes})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Admin Notes:"}),e.jsx(ar,{placeholder:"Add notes about this feedback...",value:d,onChange:xe=>h(xe.target.value),className:"min-h-[100px]"})]}),e.jsx("div",{className:"flex gap-2",children:k.map(xe=>e.jsxs(q,{variant:G.status===xe.value?"default":"outline",size:"sm",onClick:()=>{u(G),O(G.id,xe.value)},children:[z(xe.value),e.jsx("span",{className:"ml-1",children:xe.label})]},xe.value))})]})]})]})})]})}),e.jsxs(ae,{children:[e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-3",children:G.message}),G.admin_notes&&e.jsxs("div",{className:"mt-3 p-2 bg-blue-50 rounded-md",children:[e.jsx("p",{className:"text-xs font-medium text-blue-800 mb-1",children:"Admin Notes:"}),e.jsx("p",{className:"text-xs text-blue-700",children:G.admin_notes})]})]})]},G.id)})})]})})}function Ppe(){const{user:t,refreshPermissions:r}=hr(),[n,s]=f.useState("users"),[a,l]=f.useState([]),[c,u]=f.useState(!0),[d,h]=f.useState(null),[x,p]=f.useState([]),[y,v]=f.useState({}),[w,b]=f.useState(!1),[N,_]=f.useState(!1),[S,k]=f.useState(!1),[E,A]=f.useState(!1),[O,z]=f.useState(null),[R,G]=f.useState({permission_key:"",expires_at:"",reason:""}),[J,ie]=f.useState({name:"",email:"",password:"",role:"technician",phone:"",department:""}),[V,xe]=f.useState({name:"",email:"",role:"",phone:"",department:"",status:""}),[pe,re]=f.useState({newPassword:"",confirmPassword:""}),[M,B]=f.useState(!1);f.useEffect(()=>{L(),T()},[]);const L=async()=>{try{u(!0);const _e=await de.getUsers();l(_e.data||[])}catch(_e){console.error("Error loading users:",_e),alert("Failed to load users")}finally{u(!1)}},T=async()=>{try{const _e=await de.getAvailablePermissions();v(_e.data||{})}catch(_e){console.error("Error loading permissions:",_e)}},F=async()=>{if(!J.name||!J.email||!J.password){Ne.error("Please fill in all required fields");return}if(J.password.length<8){Ne.error("Password must be at least 8 characters");return}B(!0);try{const _e={name:J.name,email:J.email,password:J.password,role:J.role,department:J.department||void 0};J.phone&&J.phone.trim()&&(_e.phone=J.phone),await de.request("/users/register",{method:"POST",body:JSON.stringify(_e)}),Ne.success("User created successfully"),_(!1),ie({name:"",email:"",password:"",role:"technician",phone:"",department:""}),L()}catch(_e){Ne.error(_e.message||"Failed to create user")}finally{B(!1)}},I=async _e=>{try{const Ye=await de.getUserPermissions(_e.toString());p(Ye.data?.overrides||[])}catch(Ye){console.error("Error loading user permissions:",Ye),alert("Failed to load user permissions")}},Q=async _e=>{h(_e),await I(_e.id)},W=_e=>{z(_e),xe({name:_e.name,email:_e.email,role:_e.role,phone:_e.phone||"",department:_e.department||"",status:_e.status}),k(!0)},ee=async()=>{if(!O||!V.name||!V.email){Ne.error("Please fill in required fields");return}B(!0);try{if(await de.updateUser(O.id.toString(),V),Ne.success("User updated successfully"),k(!1),z(null),await L(),d?.id===O.id){const _e=a.find(Ye=>Ye.id===O.id);_e&&h(_e)}}catch(_e){Ne.error(_e.message||"Failed to update user")}finally{B(!1)}},ye=_e=>{z(_e),re({newPassword:"",confirmPassword:""}),A(!0)},he=async()=>{if(O){if(!pe.newPassword||pe.newPassword.length<8){Ne.error("Password must be at least 8 characters");return}if(pe.newPassword!==pe.confirmPassword){Ne.error("Passwords do not match");return}B(!0);try{await de.updateUser(O.id.toString(),{password:pe.newPassword}),Ne.success("Password changed successfully"),A(!1),z(null),re({newPassword:"",confirmPassword:""})}catch(_e){Ne.error(_e.message||"Failed to change password")}finally{B(!1)}}},te=()=>{b(!0)},De=async()=>{if(!d||!R.permission_key){alert("Please select a permission");return}try{await de.grantPermission({user_id:d.id,permission_key:R.permission_key,expires_at:R.expires_at||void 0,reason:R.reason||void 0}),Ne.success("Permission granted successfully",{description:`${d.name} can now access ${R.permission_key}`}),b(!1),G({permission_key:"",expires_at:"",reason:""}),await I(d.id),t&&d.id===parseInt(t.id)&&await r()}catch(_e){console.error("Error granting permission:",_e),Ne.error("Failed to grant permission",{description:_e instanceof Error?_e.message:"An error occurred"})}},ne=async _e=>{if(d&&confirm("Are you sure you want to revoke this permission?"))try{await de.revokePermission({user_id:d.id,permission_key:_e,reason:"Revoked by admin"}),Ne.success("Permission revoked successfully",{description:`${d.name} no longer has access to ${_e}`}),await I(d.id),t&&d.id===parseInt(t.id)&&await r()}catch(Ye){console.error("Error revoking permission:",Ye),Ne.error("Failed to revoke permission",{description:Ye instanceof Error?Ye.message:"An error occurred"})}},$e=_e=>{switch(_e){case"admin":return"destructive";case"manager":return"default";case"technician":return"secondary";case"sales":return"outline";default:return"secondary"}},ge=_e=>{switch(_e){case"active":return"default";case"inactive":return"secondary";default:return"outline"}};return t?.role==="admin"?e.jsx(gt,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight text-foreground",children:"Settings"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage users, permissions, and system configuration"})]}),e.jsxs(q,{onClick:()=>_(!0),className:"flex items-center gap-2",children:[e.jsx(Vt,{className:"h-4 w-4"}),"Add User"]})]}),e.jsxs(Ys,{value:n,onValueChange:s,className:"space-y-6",children:[e.jsxs(Ps,{className:"grid w-full grid-cols-2 bg-muted",children:[e.jsxs(Kt,{value:"users",className:"flex items-center gap-2",children:[e.jsx(xs,{className:"h-4 w-4"}),"Users"]}),e.jsxs(Kt,{value:"permissions",className:"flex items-center gap-2",children:[e.jsx(Hs,{className:"h-4 w-4"}),"Permissions"]})]}),e.jsx(Gt,{value:"users",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs(se,{className:"lg:col-span-1",children:[e.jsxs(ue,{children:[e.jsx(fe,{className:"text-foreground",children:"All Users"}),e.jsx(Xt,{children:"Select a user to manage their permissions"})]}),e.jsx(ae,{children:c?e.jsx("div",{className:"text-center py-4 text-muted-foreground",children:"Loading users..."}):e.jsx("div",{className:"space-y-2",children:a.map(_e=>e.jsx("div",{className:`p-3 rounded-lg border transition-colors ${d?.id===_e.id?"bg-primary/10 border-primary":"bg-card border-border hover:bg-muted"}`,children:e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("div",{className:"flex-1 cursor-pointer",onClick:()=>Q(_e),children:[e.jsx("p",{className:"font-medium text-foreground",children:_e.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:_e.email})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex flex-col items-end gap-1",children:[e.jsx(Oe,{variant:$e(_e.role),children:_e.role}),e.jsx(Oe,{variant:ge(_e.status),className:"text-xs",children:_e.status})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsxs(q,{size:"sm",variant:"outline",onClick:Ye=>{Ye.stopPropagation(),W(_e)},className:"h-7 text-xs",children:[e.jsx(d9,{className:"h-3 w-3 mr-1"}),"Edit"]}),e.jsxs(q,{size:"sm",variant:"outline",onClick:Ye=>{Ye.stopPropagation(),ye(_e)},className:"h-7 text-xs",children:[e.jsx(oA,{className:"h-3 w-3 mr-1"}),"Password"]})]})]})]})},_e.id))})})]}),e.jsxs(se,{className:"lg:col-span-2",children:[e.jsx(ue,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(fe,{className:"text-foreground",children:d?`${d.name}'s Permissions`:"Permission Overrides"}),e.jsx(Xt,{children:d?`Manage custom permissions for ${d.name} (${d.role})`:"Select a user to view and manage their permissions"})]}),d&&e.jsxs(q,{onClick:te,size:"sm",children:[e.jsx(Vt,{className:"h-4 w-4 mr-2"}),"Grant Permission"]})]})}),e.jsx(ae,{children:d?x.length===0?e.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[e.jsx(oA,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),e.jsx("p",{className:"mb-2",children:"No custom permissions"}),e.jsx("p",{className:"text-sm",children:"This user has default role-based permissions only"})]}):e.jsxs(ir,{children:[e.jsx(lr,{children:e.jsxs(ft,{children:[e.jsx(me,{className:"text-foreground",children:"Permission"}),e.jsx(me,{className:"text-foreground",children:"Status"}),e.jsx(me,{className:"text-foreground",children:"Granted"}),e.jsx(me,{className:"text-foreground",children:"Expires"}),e.jsx(me,{className:"text-foreground",children:"Actions"})]})}),e.jsx(or,{children:x.map(_e=>e.jsxs(ft,{children:[e.jsx(oe,{children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-foreground",children:_e.permission_key}),_e.reason&&e.jsx("p",{className:"text-sm text-muted-foreground",children:_e.reason})]})}),e.jsx(oe,{children:_e.granted?e.jsxs(Oe,{variant:"default",className:"flex items-center gap-1 w-fit",children:[e.jsx(Ar,{className:"h-3 w-3"}),"Granted"]}):e.jsxs(Oe,{variant:"destructive",className:"flex items-center gap-1 w-fit",children:[e.jsx(wn,{className:"h-3 w-3"}),"Denied"]})}),e.jsx(oe,{children:e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"text-foreground",children:gn(_e.granted_at)}),_e.granted_by_name&&e.jsxs("p",{className:"text-muted-foreground",children:["by ",_e.granted_by_name]})]})}),e.jsx(oe,{children:_e.expires_at?e.jsxs("div",{className:"flex items-center gap-1 text-sm",children:[e.jsx(Zt,{className:"h-3 w-3 text-muted-foreground"}),e.jsx("span",{className:"text-foreground",children:gn(_e.expires_at)})]}):e.jsx("span",{className:"text-muted-foreground",children:"Never"})}),e.jsx(oe,{children:e.jsx(q,{variant:"ghost",size:"sm",onClick:()=>ne(_e.permission_key),children:e.jsx(br,{className:"h-4 w-4 text-destructive"})})})]},_e.id))})]}):e.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[e.jsx(Hs,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),e.jsx("p",{children:"Select a user from the list to view their permissions"})]})})]})]})}),e.jsx(Gt,{value:"permissions",className:"space-y-6",children:e.jsxs(se,{children:[e.jsxs(ue,{children:[e.jsx(fe,{className:"text-foreground",children:"Available Permissions"}),e.jsx(Xt,{children:"View all available permissions and their default role assignments"})]}),e.jsx(ae,{children:e.jsx("div",{className:"space-y-6",children:Object.entries(y).map(([_e,Ye])=>e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"text-lg font-semibold capitalize text-foreground",children:_e.replace(/_/g," ")}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Object.entries(Ye).map(([ht,Ve])=>e.jsx(se,{className:"bg-card border-border",children:e.jsx(ae,{className:"pt-6",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-sm text-foreground",children:ht}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:Ve.description})]})}),e.jsx("div",{className:"flex flex-wrap gap-1 pt-2",children:Ve.defaultRoles.map(lt=>e.jsx(Oe,{variant:$e(lt),className:"text-xs",children:lt},lt))})]})})},ht))})]},_e))})})]})})]}),e.jsx(Ft,{open:w,onOpenChange:b,children:e.jsxs(Rt,{className:"bg-background border-border",children:[e.jsxs(qt,{children:[e.jsx(Lt,{className:"text-foreground",children:"Grant Permission"}),e.jsxs(Ut,{children:["Grant a custom permission to ",d?.name]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(U,{htmlFor:"permission",className:"text-foreground",children:"Permission"}),e.jsxs(tt,{value:R.permission_key,onValueChange:_e=>G({...R,permission_key:_e}),children:[e.jsx(Je,{className:"bg-background border-border text-foreground",children:e.jsx(rt,{placeholder:"Select permission"})}),e.jsx(et,{className:"bg-background border-border",children:Object.entries(y).map(([_e,Ye])=>Object.keys(Ye).map(ht=>e.jsx(Y,{value:ht,className:"text-foreground",children:ht},ht)))})]})]}),e.jsxs("div",{children:[e.jsx(U,{htmlFor:"expires_at",className:"text-foreground",children:"Expires At (Optional)"}),e.jsx(be,{id:"expires_at",type:"datetime-local",value:R.expires_at,onChange:_e=>G({...R,expires_at:_e.target.value}),className:"bg-background border-border text-foreground"})]}),e.jsxs("div",{children:[e.jsx(U,{htmlFor:"reason",className:"text-foreground",children:"Reason (Optional)"}),e.jsx(be,{id:"reason",placeholder:"Why is this permission being granted?",value:R.reason,onChange:_e=>G({...R,reason:_e.target.value}),className:"bg-background border-border text-foreground"})]})]}),e.jsxs(Dr,{children:[e.jsx(q,{variant:"outline",onClick:()=>b(!1),children:"Cancel"}),e.jsx(q,{onClick:De,children:"Grant Permission"})]})]})}),e.jsx(Ft,{open:N,onOpenChange:_,children:e.jsxs(Rt,{className:"bg-background border-border max-w-md",children:[e.jsxs(qt,{children:[e.jsx(Lt,{className:"text-foreground",children:"Add New User"}),e.jsx(Ut,{children:"Create a new user account for the system"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(U,{htmlFor:"name",className:"text-foreground",children:"Full Name *"}),e.jsx(be,{id:"name",value:J.name,onChange:_e=>ie({...J,name:_e.target.value}),placeholder:"Enter full name",className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(U,{htmlFor:"email",className:"text-foreground",children:"Email *"}),e.jsx(be,{id:"email",type:"email",value:J.email,onChange:_e=>ie({...J,email:_e.target.value}),placeholder:"user@example.com",className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(U,{htmlFor:"password",className:"text-foreground",children:"Password *"}),e.jsx(be,{id:"password",type:"password",value:J.password,onChange:_e=>ie({...J,password:_e.target.value}),placeholder:"Enter password",className:"mt-1"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Password will be hashed automatically"})]}),e.jsxs("div",{children:[e.jsx(U,{htmlFor:"role",className:"text-foreground",children:"Role *"}),e.jsxs(tt,{value:J.role,onValueChange:_e=>ie({...J,role:_e}),children:[e.jsx(Je,{className:"mt-1",children:e.jsx(rt,{})}),e.jsxs(et,{children:[e.jsx(Y,{value:"admin",children:"Admin"}),e.jsx(Y,{value:"manager",children:"Manager"}),e.jsx(Y,{value:"technician",children:"Technician"}),e.jsx(Y,{value:"sales",children:"Sales"})]})]})]}),e.jsxs("div",{children:[e.jsx(U,{htmlFor:"phone",className:"text-foreground",children:"Phone (Optional)"}),e.jsx(be,{id:"phone",value:J.phone,onChange:_e=>ie({...J,phone:_e.target.value}),placeholder:"+387 XX XXX XXX",className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(U,{htmlFor:"department",className:"text-foreground",children:"Department (Optional)"}),e.jsx(be,{id:"department",value:J.department,onChange:_e=>ie({...J,department:_e.target.value}),placeholder:"e.g. Technical Support",className:"mt-1"})]})]}),e.jsxs(Dr,{children:[e.jsx(q,{variant:"outline",onClick:()=>{_(!1),ie({name:"",email:"",password:"",role:"technician",phone:"",department:""})},disabled:M,children:"Cancel"}),e.jsx(q,{onClick:F,disabled:M,children:M?"Creating...":"Create User"})]})]})}),e.jsx(Ft,{open:S,onOpenChange:k,children:e.jsxs(Rt,{className:"bg-background border-border max-w-md",children:[e.jsxs(qt,{children:[e.jsx(Lt,{className:"text-foreground",children:"Edit User"}),e.jsxs(Ut,{children:["Update user information for ",O?.name]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(U,{htmlFor:"edit-name",className:"text-foreground",children:"Full Name *"}),e.jsx(be,{id:"edit-name",value:V.name,onChange:_e=>xe({...V,name:_e.target.value}),placeholder:"Enter full name",className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(U,{htmlFor:"edit-email",className:"text-foreground",children:"Email *"}),e.jsx(be,{id:"edit-email",type:"email",value:V.email,onChange:_e=>xe({...V,email:_e.target.value}),placeholder:"user@example.com",className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(U,{htmlFor:"edit-role",className:"text-foreground",children:"Role *"}),e.jsxs(tt,{value:V.role,onValueChange:_e=>xe({...V,role:_e}),children:[e.jsx(Je,{className:"mt-1",children:e.jsx(rt,{})}),e.jsxs(et,{children:[e.jsx(Y,{value:"admin",children:"Admin"}),e.jsx(Y,{value:"manager",children:"Manager"}),e.jsx(Y,{value:"technician",children:"Technician"}),e.jsx(Y,{value:"sales",children:"Sales"})]})]})]}),e.jsxs("div",{children:[e.jsx(U,{htmlFor:"edit-status",className:"text-foreground",children:"Status *"}),e.jsxs(tt,{value:V.status,onValueChange:_e=>xe({...V,status:_e}),children:[e.jsx(Je,{className:"mt-1",children:e.jsx(rt,{})}),e.jsxs(et,{children:[e.jsx(Y,{value:"active",children:"Active"}),e.jsx(Y,{value:"inactive",children:"Inactive"})]})]})]}),e.jsxs("div",{children:[e.jsx(U,{htmlFor:"edit-phone",className:"text-foreground",children:"Phone (Optional)"}),e.jsx(be,{id:"edit-phone",value:V.phone,onChange:_e=>xe({...V,phone:_e.target.value}),placeholder:"+387 XX XXX XXX",className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(U,{htmlFor:"edit-department",className:"text-foreground",children:"Department (Optional)"}),e.jsx(be,{id:"edit-department",value:V.department,onChange:_e=>xe({...V,department:_e.target.value}),placeholder:"e.g. Technical Support",className:"mt-1"})]})]}),e.jsxs(Dr,{children:[e.jsx(q,{variant:"outline",onClick:()=>{k(!1),z(null)},disabled:M,children:"Cancel"}),e.jsx(q,{onClick:ee,disabled:M,children:M?"Saving...":"Save Changes"})]})]})}),e.jsx(Ft,{open:E,onOpenChange:A,children:e.jsxs(Rt,{className:"bg-background border-border max-w-md",children:[e.jsxs(qt,{children:[e.jsx(Lt,{className:"text-foreground",children:"Change Password"}),e.jsxs(Ut,{children:["Set a new password for ",O?.name]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(U,{htmlFor:"new-password",className:"text-foreground",children:"New Password *"}),e.jsx(be,{id:"new-password",type:"password",value:pe.newPassword,onChange:_e=>re({...pe,newPassword:_e.target.value}),placeholder:"Enter new password",className:"mt-1"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Password must be at least 8 characters"})]}),e.jsxs("div",{children:[e.jsx(U,{htmlFor:"confirm-password",className:"text-foreground",children:"Confirm Password *"}),e.jsx(be,{id:"confirm-password",type:"password",value:pe.confirmPassword,onChange:_e=>re({...pe,confirmPassword:_e.target.value}),placeholder:"Confirm new password",className:"mt-1"}),pe.confirmPassword&&pe.newPassword!==pe.confirmPassword&&e.jsx("p",{className:"text-xs text-red-500 mt-1",children:"Passwords do not match"})]})]}),e.jsxs(Dr,{children:[e.jsx(q,{variant:"outline",onClick:()=>{A(!1),z(null),re({newPassword:"",confirmPassword:""})},disabled:M,children:"Cancel"}),e.jsx(q,{onClick:he,disabled:M,children:M?"Changing...":"Change Password"})]})]})})]})}):e.jsx(gt,{children:e.jsx("div",{className:"flex items-center justify-center h-96",children:e.jsxs("div",{className:"text-center",children:[e.jsx(vr,{className:"h-12 w-12 text-yellow-500 mx-auto mb-4"}),e.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Access Denied"}),e.jsx("p",{className:"text-muted-foreground",children:"You don't have permission to access settings."})]})})})}const Dpe=t=>{switch(t){case"work_order":case"warranty_work_order":return"🔧";case"repair_ticket":case"warranty_repair_ticket":return"🎫";case"customer":return"👤";case"machine":return"⚙️";case"inventory":return"📦";case"system":return"⚙️";case"feedback":return"💬";case"success":return"✅";case"warning":return"⚠️";case"error":return"❌";default:return"ℹ️"}},dO=t=>{switch(t){case"success":return"bg-green-100 text-green-800 border-green-200";case"warning":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"error":return"bg-red-100 text-red-800 border-red-200";case"work_order":case"warranty_work_order":return"bg-blue-100 text-blue-800 border-blue-200";case"repair_ticket":case"warranty_repair_ticket":return"bg-purple-100 text-purple-800 border-purple-200";case"customer":return"bg-indigo-100 text-indigo-800 border-indigo-200";case"machine":return"bg-gray-100 text-gray-800 border-gray-200 dark:bg-gray-800 dark:text-gray-200 dark:border-gray-700";case"inventory":return"bg-orange-100 text-orange-800 border-orange-200 dark:bg-orange-900 dark:text-orange-200 dark:border-orange-800";default:return"bg-gray-100 text-gray-800 border-gray-200 dark:bg-gray-800 dark:text-gray-200 dark:border-gray-700"}};function Rpe({notification:t,isSelected:r,onSelect:n,onMarkAsRead:s,onDelete:a,onNavigate:l}){const c=()=>{t.is_read||s(t.id),l(t)},u=h=>{n(t.id,h)},d=()=>{a(t.id)};return e.jsxs("div",{className:ze("flex items-start gap-3 p-4 border rounded-xl transition-all duration-200","hover:shadow-md cursor-pointer group",!t.is_read&&"bg-blue-50/50 border-blue-200 shadow-sm",r&&"bg-blue-100 border-blue-300 shadow-md"),onClick:c,children:[e.jsx(ag,{checked:r,onCheckedChange:u,onClick:h=>h.stopPropagation(),className:"mt-1"}),e.jsx("div",{className:"flex-shrink-0 mt-1",children:e.jsx("div",{className:ze("w-10 h-10 rounded-full flex items-center justify-center",dO(t.type)),children:Dpe(t.type)})}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("p",{className:ze("text-sm font-semibold",t.is_read?"text-muted-foreground":"text-foreground"),children:t.title}),!t.is_read&&e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse"})]}),e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2 mb-2",children:t.message}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Zt,{className:"h-3 w-3"}),e.jsx("span",{children:DJ(new Date(t.created_at),{addSuffix:!0})})]}),e.jsx(Oe,{variant:"outline",className:ze("text-xs",dO(t.type)),children:t.type.replace("_"," ")})]})]}),e.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[!t.is_read&&e.jsx(q,{variant:"ghost",size:"sm",onClick:h=>{h.stopPropagation(),s(t.id)},className:"h-8 w-8 p-0 hover:bg-blue-100",title:"Mark as read",children:e.jsx(Gr,{className:"h-4 w-4 text-blue-600"})}),e.jsxs(Cr,{children:[e.jsx(Sr,{asChild:!0,children:e.jsx(q,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",onClick:h=>h.stopPropagation(),children:e.jsx(ss,{className:"h-4 w-4"})})}),e.jsx(wr,{align:"end",children:e.jsxs(ct,{onClick:h=>{h.stopPropagation(),d()},className:"text-red-600",children:[e.jsx(br,{className:"h-4 w-4 mr-2"}),"Delete"]})})]})]})]})})]})}function Lpe(){const t=er(),{notifications:r,unreadCount:n,isLoading:s,fetchNotifications:a,markAsRead:l,markAllAsRead:c,deleteNotification:u,deleteAllRead:d,deleteMultiple:h}=sN(),[x,p]=f.useState(""),[y,v]=f.useState("all"),[w,b]=f.useState("all"),[N,_]=f.useState(new Set),[S,k]=f.useState(1),[E,A]=f.useState(!0),O=r.filter(B=>{const L=!x||B.title.toLowerCase().includes(x.toLowerCase())||B.message.toLowerCase().includes(x.toLowerCase()),T=y==="all"||B.type===y,F=w==="all"||w==="unread"&&!B.is_read||w==="read"&&B.is_read;return L&&T&&F}),z=B=>{_(B?new Set(O.map(L=>L.id)):new Set)},R=(B,L)=>{const T=new Set(N);L?T.add(B):T.delete(B),_(T)},G=()=>{N.size>0&&(h(Array.from(N)),_(new Set))},J=()=>{Array.from(N).filter(L=>{const T=r.find(F=>F.id===L);return T&&!T.is_read}).forEach(L=>l(L)),_(new Set)},ie=B=>{try{if(B.related_entity_type&&B.related_entity_id)switch(B.related_entity_type){case"work_order":t(`/work-orders/${B.related_entity_id}`);break;case"warranty_work_order":t(`/warranty-work-orders/${B.related_entity_id}`);break;case"repair_ticket":t(`/repair-tickets/${B.related_entity_id}`);break;case"warranty_repair_ticket":t(`/warranty-repair-tickets/${B.related_entity_id}`);break;case"customer":t(`/customers/${B.related_entity_id}`);break;case"machine":t(`/machines/${B.related_entity_id}`);break;case"inventory":t(`/inventory/${B.related_entity_id}`);break;case"feedback":t("/admin-feedback");break;default:}}catch(L){console.error("Navigation error:",L),t("/notifications")}},V=()=>{a(1,20),k(1)},xe=()=>{const B=S+1;a(B,20),k(B)},pe=O.length>0&&O.every(B=>N.has(B.id)),re=O.some(B=>N.has(B.id)),M=Array.from(new Set(r.map(B=>B.type)));return e.jsx(gt,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Notifications"}),e.jsx("p",{className:"text-muted-foreground",children:"Stay updated with your latest activities and system alerts"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(q,{variant:"outline",size:"sm",onClick:V,disabled:s,children:[e.jsx(Ws,{className:ze("h-4 w-4 mr-2",s&&"animate-spin")}),"Refresh"]}),n>0&&e.jsxs(q,{variant:"outline",size:"sm",onClick:c,children:[e.jsx(sA,{className:"h-4 w-4 mr-2"}),"Mark all read"]})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-4",children:[e.jsxs(se,{children:[e.jsxs(ue,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(fe,{className:"text-sm font-medium",children:"Total"}),e.jsx(_i,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(ae,{children:e.jsx("div",{className:"text-2xl font-bold",children:r.length})})]}),e.jsxs(se,{children:[e.jsxs(ue,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(fe,{className:"text-sm font-medium",children:"Unread"}),e.jsx(fs,{className:"h-4 w-4 text-blue-600"})]}),e.jsx(ae,{children:e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:n})})]}),e.jsxs(se,{children:[e.jsxs(ue,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(fe,{className:"text-sm font-medium",children:"Read"}),e.jsx(Ar,{className:"h-4 w-4 text-green-600"})]}),e.jsx(ae,{children:e.jsx("div",{className:"text-2xl font-bold text-green-600",children:r.length-n})})]}),e.jsxs(se,{children:[e.jsxs(ue,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(fe,{className:"text-sm font-medium",children:"Selected"}),e.jsx(sA,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(ae,{children:e.jsx("div",{className:"text-2xl font-bold",children:N.size})})]})]}),e.jsxs(se,{children:[e.jsx(ue,{children:e.jsx(fe,{className:"text-lg",children:"Filters & Actions"})}),e.jsxs(ae,{children:[e.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-center",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(nr,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),e.jsx(be,{placeholder:"Search notifications...",value:x,onChange:B=>p(B.target.value),className:"pl-10"})]}),e.jsxs(tt,{value:y,onValueChange:v,children:[e.jsx(Je,{className:"w-[180px]",children:e.jsx(rt,{placeholder:"Filter by type"})}),e.jsxs(et,{children:[e.jsx(Y,{value:"all",children:"All Types"}),M.map(B=>e.jsx(Y,{value:B,children:B.replace("_"," ")},B))]})]}),e.jsxs(tt,{value:w,onValueChange:b,children:[e.jsx(Je,{className:"w-[180px]",children:e.jsx(rt,{placeholder:"Filter by status"})}),e.jsxs(et,{children:[e.jsx(Y,{value:"all",children:"All Status"}),e.jsx(Y,{value:"unread",children:"Unread"}),e.jsx(Y,{value:"read",children:"Read"})]})]})]}),re&&e.jsxs("div",{className:"flex items-center gap-2 mt-4 p-3 bg-muted/50 rounded-lg",children:[e.jsx(ag,{checked:pe,ref:B=>{B&&(B.indeterminate=re&&!pe)},onCheckedChange:z}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[N.size," selected"]}),e.jsxs("div",{className:"flex items-center gap-2 ml-auto",children:[e.jsxs(q,{variant:"outline",size:"sm",onClick:J,children:[e.jsx(Ar,{className:"h-4 w-4 mr-2"}),"Mark as read"]}),e.jsxs(q,{variant:"outline",size:"sm",onClick:G,children:[e.jsx(br,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]})]})]}),e.jsxs(se,{children:[e.jsxs(ue,{children:[e.jsx(fe,{className:"text-lg",children:"Notifications"}),e.jsxs(Xt,{children:[O.length," of ",r.length," notifications"]})]}),e.jsx(ae,{children:s&&r.length===0?e.jsx("div",{className:"flex items-center justify-center p-8",children:e.jsx(Nt,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):O.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center p-8 text-center",children:[e.jsx(_i,{className:"h-12 w-12 text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No notifications found"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:x||y!=="all"||w!=="all"?"Try adjusting your filters to see more notifications.":"You'll see updates about your work here when they arrive."})]}):e.jsxs("div",{className:"space-y-3",children:[O.map(B=>e.jsx(Rpe,{notification:B,isSelected:N.has(B.id),onSelect:R,onMarkAsRead:l,onDelete:u,onNavigate:ie},B.id)),E&&e.jsx("div",{className:"flex justify-center pt-4",children:e.jsxs(q,{variant:"outline",onClick:xe,disabled:s,children:[s?e.jsx(Nt,{className:"h-4 w-4 mr-2 animate-spin"}):e.jsx(cP,{className:"h-4 w-4 mr-2"}),"Load More"]})})]})})]})]})})}const uO=[{key:"serial_number",label:"Serial Number"},{key:"model",label:"Model"},{key:"manufacturer",label:"Manufacturer"},{key:"status",label:"Status"},{key:"condition",label:"Condition"},{key:"location",label:"Location"},{key:"rental_count",label:"Rental Count"}];function Ipe(){const t=er(),{user:r}=hr(),[n,s]=f.useState([]),[a,l]=f.useState([]),[c,u]=f.useState(!0),[d,h]=f.useState(""),[x,p]=f.useState({status:"all",condition:"all",model_id:"all",manufacturer:"all"}),[y,v]=f.useState({page:1,limit:20,total:0,pages:0}),[w,b]=f.useState(!1),[N,_]=f.useState(!1),[S,k]=f.useState(null),[E,A]=f.useState(!1),[O,z]=f.useState(null),{visibleColumns:R,toggleColumn:G,isColumnVisible:J,resetColumns:ie,showAllColumns:V,hideAllColumns:xe,isSyncing:pe}=ps("rental_fleet",gs(uO)),[re,M]=f.useState({model_id:"",serial_number:"",rental_status:"available",condition:"good",location:"",notes:""});f.useEffect(()=>{B(),L()},[y.page,d,x]),f.useEffect(()=>{w&&ye()},[w]);const B=async()=>{try{u(!0);const ge=await de.getRentalMachines({page:y.page,limit:y.limit,search:d,...x});s(ge.machines||[]),v(ge.pagination||{page:1,limit:20,total:0,totalPages:0})}catch(ge){console.error("Error fetching rental machines:",ge),s([]),v({page:1,limit:20,total:0,totalPages:0})}finally{u(!1)}},L=async()=>{try{const ge=await de.getMachineModels();Array.isArray(ge)?l(ge):ge&&Array.isArray(ge.models)?l(ge.models):ge&&Array.isArray(ge.data)?l(ge.data):l([])}catch(ge){console.error("Error fetching machine models:",ge),l([])}},T=()=>{v(ge=>({...ge,page:1})),B()},F=(ge,we)=>{const _e=we==="all"?"":we;p(Ye=>({...Ye,[ge]:_e})),v(Ye=>({...Ye,page:1}))},I=()=>{p({status:"all",condition:"all",model_id:"all",manufacturer:"all"}),h(""),v(ge=>({...ge,page:1}))},Q=async()=>{try{await de.createRentalMachine(re),b(!1),ye(),B()}catch(ge){console.error("Error creating rental machine:",ge)}},W=async()=>{if(S)try{await de.updateRentalMachine(S.id,re),_(!1),k(null),ye(),B()}catch(ge){console.error("Error updating rental machine:",ge)}},ee=async()=>{if(O)try{await de.deleteRentalMachine(O.id),A(!1),z(null),B()}catch(ge){console.error("Error deleting rental machine:",ge)}},ye=()=>{M({model_id:"",serial_number:"",rental_status:"available",condition:"good",location:"",notes:""})},he=ge=>{k(ge),M({model_id:ge.id,serial_number:ge.serial_number,rental_status:ge.rental_status,condition:ge.condition,location:ge.location||"",notes:ge.notes||""}),_(!0)},te=ge=>{const we={available:{variant:"default",label:"Available"},rented:{variant:"secondary",label:"Rented"},reserved:{variant:"secondary",label:"Reserved"},cleaning:{variant:"outline",label:"Cleaning"},inspection:{variant:"outline",label:"Inspection"},maintenance:{variant:"destructive",label:"Maintenance"},repair:{variant:"destructive",label:"Repair"},quarantine:{variant:"destructive",label:"Quarantine"},retired:{variant:"outline",label:"Retired"}},_e=we[ge]||we.available;return e.jsx(Oe,{variant:_e.variant,children:_e.label})},De=ge=>{const we={excellent:{variant:"default",label:"Excellent"},good:{variant:"secondary",label:"Good"},fair:{variant:"outline",label:"Fair"},poor:{variant:"destructive",label:"Poor"}},_e=we[ge]||we.good;return e.jsx(Oe,{variant:_e.variant,children:_e.label})},ne=()=>Array.isArray(a)?[...new Set(a.map(ge=>ge.manufacturer))].sort():[],$e=()=>Object.values(x).filter(ge=>ge!=="").length;return e.jsx(gt,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Rental Fleet"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage your rental machine fleet"})]}),e.jsxs(Ft,{open:w,onOpenChange:b,children:[e.jsx(yc,{asChild:!0,children:e.jsxs(q,{children:[e.jsx(Vt,{className:"mr-2 h-4 w-4"}),"Add Machine"]})}),e.jsxs(Rt,{className:"max-w-md",children:[e.jsxs(qt,{children:[e.jsx(Lt,{children:"Add Rental Machine"}),e.jsx(Ut,{children:"Add a new machine to your rental fleet."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(U,{htmlFor:"model_id",children:"Machine Model"}),e.jsxs(tt,{value:re.model_id,onValueChange:ge=>M(we=>({...we,model_id:ge})),children:[e.jsx(Je,{children:e.jsx(rt,{placeholder:"Select model"})}),e.jsx(et,{children:Array.isArray(a)&&a.map(ge=>e.jsxs(Y,{value:ge.id.toString(),children:[ge.manufacturer," - ",ge.name]},ge.id))})]})]}),e.jsxs("div",{children:[e.jsx(U,{htmlFor:"serial_number",children:"Serial Number"}),e.jsx(be,{id:"serial_number",value:re.serial_number,onChange:ge=>M(we=>({...we,serial_number:ge.target.value})),placeholder:"Enter serial number"})]}),e.jsxs("div",{children:[e.jsx(U,{htmlFor:"condition",children:"Condition"}),e.jsxs(tt,{value:re.condition,onValueChange:ge=>M(we=>({...we,condition:ge})),children:[e.jsx(Je,{children:e.jsx(rt,{})}),e.jsxs(et,{children:[e.jsx(Y,{value:"excellent",children:"Excellent"}),e.jsx(Y,{value:"good",children:"Good"}),e.jsx(Y,{value:"fair",children:"Fair"}),e.jsx(Y,{value:"poor",children:"Poor"})]})]})]}),e.jsxs("div",{children:[e.jsx(U,{htmlFor:"location",children:"Location"}),e.jsx(be,{id:"location",value:re.location,onChange:ge=>M(we=>({...we,location:ge.target.value})),placeholder:"Enter location"})]}),e.jsxs("div",{children:[e.jsx(U,{htmlFor:"notes",children:"Notes"}),e.jsx(ar,{id:"notes",value:re.notes,onChange:ge=>M(we=>({...we,notes:ge.target.value})),placeholder:"Enter notes"})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(q,{variant:"outline",onClick:()=>b(!1),children:"Cancel"}),e.jsx(q,{onClick:Q,children:"Add Machine"})]})]})]})]})]}),e.jsxs(se,{children:[e.jsx(ue,{children:e.jsxs(fe,{className:"flex items-center gap-2",children:[e.jsx(Ua,{className:"h-5 w-5"}),"Filters",$e()>0&&e.jsx(Oe,{variant:"secondary",children:$e()})]})}),e.jsx(ae,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[e.jsxs("div",{children:[e.jsx(U,{children:"Search"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(be,{placeholder:"Search machines...",value:d,onChange:ge=>h(ge.target.value),onKeyPress:ge=>ge.key==="Enter"&&T()}),e.jsx(q,{onClick:T,size:"sm",children:e.jsx(nr,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{children:[e.jsx(U,{children:"Status"}),e.jsxs(tt,{value:x.status,onValueChange:ge=>F("status",ge),children:[e.jsx(Je,{children:e.jsx(rt,{placeholder:"All statuses"})}),e.jsxs(et,{children:[e.jsx(Y,{value:"all",children:"All statuses"}),e.jsx(Y,{value:"available",children:"Available"}),e.jsx(Y,{value:"rented",children:"Rented"}),e.jsx(Y,{value:"reserved",children:"Reserved"}),e.jsx(Y,{value:"cleaning",children:"Cleaning"}),e.jsx(Y,{value:"inspection",children:"Inspection"}),e.jsx(Y,{value:"maintenance",children:"Maintenance"}),e.jsx(Y,{value:"repair",children:"Repair"}),e.jsx(Y,{value:"quarantine",children:"Quarantine"}),e.jsx(Y,{value:"retired",children:"Retired"})]})]})]}),e.jsxs("div",{children:[e.jsx(U,{children:"Condition"}),e.jsxs(tt,{value:x.condition,onValueChange:ge=>F("condition",ge),children:[e.jsx(Je,{children:e.jsx(rt,{placeholder:"All conditions"})}),e.jsxs(et,{children:[e.jsx(Y,{value:"all",children:"All conditions"}),e.jsx(Y,{value:"excellent",children:"Excellent"}),e.jsx(Y,{value:"good",children:"Good"}),e.jsx(Y,{value:"fair",children:"Fair"}),e.jsx(Y,{value:"poor",children:"Poor"})]})]})]}),e.jsxs("div",{children:[e.jsx(U,{children:"Manufacturer"}),e.jsxs(tt,{value:x.manufacturer,onValueChange:ge=>F("manufacturer",ge),children:[e.jsx(Je,{children:e.jsx(rt,{placeholder:"All manufacturers"})}),e.jsxs(et,{children:[e.jsx(Y,{value:"all",children:"All manufacturers"}),ne().map(ge=>e.jsx(Y,{value:ge,children:ge},ge))]})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsx(q,{variant:"outline",onClick:I,className:"w-full",children:"Clear Filters"})})]})})]}),e.jsxs(se,{children:[e.jsx(ue,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(fe,{children:["Rental Machines (",y.total,")"]}),e.jsx(ys,{columns:uO,visibleColumns:R,onToggleColumn:G,onShowAll:V,onHideAll:xe,onReset:ie,isSyncing:pe})]})}),e.jsx(ae,{children:c?e.jsx("div",{className:"text-center py-8",children:"Loading..."}):e.jsxs(ir,{children:[e.jsx(lr,{children:e.jsxs(ft,{children:[J("serial_number")&&e.jsx(me,{children:"Serial Number"}),J("model")&&e.jsx(me,{children:"Model"}),J("manufacturer")&&e.jsx(me,{children:"Manufacturer"}),J("status")&&e.jsx(me,{children:"Status"}),J("condition")&&e.jsx(me,{children:"Condition"}),J("location")&&e.jsx(me,{children:"Location"}),J("rental_count")&&e.jsx(me,{children:"Rental Count"}),e.jsx(me,{children:"Actions"})]})}),e.jsx(or,{children:n.map(ge=>e.jsxs(ft,{className:"cursor-pointer hover:bg-muted/50",onClick:()=>t(`/rental-machines/${ge.id}`),children:[J("serial_number")&&e.jsx(oe,{className:"font-medium",children:ge.serial_number}),J("model")&&e.jsx(oe,{children:ge.model_name}),J("manufacturer")&&e.jsx(oe,{children:ge.manufacturer}),J("status")&&e.jsx(oe,{children:te(ge.rental_status)}),J("condition")&&e.jsx(oe,{children:De(ge.condition)}),J("location")&&e.jsx(oe,{children:ge.location||"-"}),J("rental_count")&&e.jsx(oe,{children:ge.rental_count}),e.jsx(oe,{className:"text-right",children:e.jsxs(Cr,{children:[e.jsx(Sr,{asChild:!0,children:e.jsx(q,{variant:"ghost",className:"h-8 w-8 p-0",onClick:we=>we.stopPropagation(),children:e.jsx(ss,{className:"h-4 w-4"})})}),e.jsxs(wr,{align:"end",children:[e.jsx(Tr,{children:"Actions"}),e.jsxs(ct,{onClick:we=>{we.stopPropagation(),t(`/rental-machines/${ge.id}`)},children:[e.jsx(mr,{className:"mr-2 h-4 w-4"}),"View Details"]}),r?.role!=="sales"&&e.jsxs(e.Fragment,{children:[e.jsxs(ct,{onClick:we=>{we.stopPropagation(),he(ge)},children:[e.jsx(xr,{className:"mr-2 h-4 w-4"}),"Edit Machine"]}),e.jsxs(ct,{onClick:we=>{we.stopPropagation(),z(ge),A(!0)},className:"text-red-600",children:[e.jsx(br,{className:"mr-2 h-4 w-4"}),"Delete"]})]})]})]})})]},ge.id))})]})})]}),e.jsx(Ft,{open:N,onOpenChange:_,children:e.jsxs(Rt,{className:"max-w-md",children:[e.jsxs(qt,{children:[e.jsx(Lt,{children:"Edit Rental Machine"}),e.jsx(Ut,{children:"Update the details of this rental machine."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(U,{htmlFor:"edit_serial_number",children:"Serial Number"}),e.jsx(be,{id:"edit_serial_number",value:re.serial_number,onChange:ge=>M(we=>({...we,serial_number:ge.target.value}))})]}),e.jsxs("div",{children:[e.jsx(U,{htmlFor:"edit_rental_status",children:"Status"}),e.jsxs(tt,{value:re.rental_status,onValueChange:ge=>M(we=>({...we,rental_status:ge})),children:[e.jsx(Je,{children:e.jsx(rt,{})}),e.jsxs(et,{children:[e.jsx(Y,{value:"available",children:"Available"}),e.jsx(Y,{value:"rented",children:"Rented"}),e.jsx(Y,{value:"reserved",children:"Reserved"}),e.jsx(Y,{value:"cleaning",children:"Cleaning"}),e.jsx(Y,{value:"inspection",children:"Inspection"}),e.jsx(Y,{value:"maintenance",children:"Maintenance"}),e.jsx(Y,{value:"repair",children:"Repair"}),e.jsx(Y,{value:"quarantine",children:"Quarantine"}),e.jsx(Y,{value:"retired",children:"Retired"})]})]})]}),e.jsxs("div",{children:[e.jsx(U,{htmlFor:"edit_condition",children:"Condition"}),e.jsxs(tt,{value:re.condition,onValueChange:ge=>M(we=>({...we,condition:ge})),children:[e.jsx(Je,{children:e.jsx(rt,{})}),e.jsxs(et,{children:[e.jsx(Y,{value:"excellent",children:"Excellent"}),e.jsx(Y,{value:"good",children:"Good"}),e.jsx(Y,{value:"fair",children:"Fair"}),e.jsx(Y,{value:"poor",children:"Poor"})]})]})]}),e.jsxs("div",{children:[e.jsx(U,{htmlFor:"edit_location",children:"Location"}),e.jsx(be,{id:"edit_location",value:re.location,onChange:ge=>M(we=>({...we,location:ge.target.value}))})]}),e.jsxs("div",{children:[e.jsx(U,{htmlFor:"edit_notes",children:"Notes"}),e.jsx(ar,{id:"edit_notes",value:re.notes,onChange:ge=>M(we=>({...we,notes:ge.target.value}))})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(q,{variant:"outline",onClick:()=>_(!1),children:"Cancel"}),e.jsx(q,{onClick:W,children:"Save Changes"})]})]})]})}),e.jsx(Ft,{open:E,onOpenChange:A,children:e.jsxs(Rt,{children:[e.jsxs(qt,{children:[e.jsx(Lt,{children:"Delete Rental Machine"}),e.jsx(Ut,{children:"This action cannot be undone. The machine will be permanently removed from your rental fleet."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{children:"Are you sure you want to delete this rental machine? This action cannot be undone."}),O&&e.jsxs("div",{className:"bg-muted p-4 rounded-lg",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Serial Number:"})," ",O.serial_number]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Model:"})," ",O.model_name]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Manufacturer:"})," ",O.manufacturer]})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(q,{variant:"outline",onClick:()=>A(!1),children:"Cancel"}),e.jsx(q,{variant:"destructive",onClick:ee,children:"Delete"})]})]})]})})]})})}function $pe(){const{id:t}=oi(),r=er(),{user:n}=hr(),[s,a]=f.useState(null),[l,c]=f.useState(!0),[u,d]=f.useState(null),[h,x]=f.useState(!1),[p,y]=f.useState(!1),[v,w]=f.useState({serial_number:"",rental_status:"available",condition:"good",location:"",notes:""});f.useEffect(()=>{t&&b()},[t]);const b=async()=>{try{c(!0);const J=await de.getRentalMachine(t);a(J)}catch(J){console.error("Error fetching rental machine details:",J),d(J.message||"Failed to fetch machine details")}finally{c(!1)}},N=J=>{const ie={available:{color:"bg-green-100 text-green-800 border-green-200",label:"Available"},rented:{color:"bg-blue-100 text-blue-800 border-blue-200",label:"Rented"},maintenance:{color:"bg-yellow-100 text-yellow-800 border-yellow-200",label:"Maintenance"},retired:{color:"bg-gray-100 text-gray-800 border-gray-200",label:"Retired"}},V=ie[J]||ie.available;return e.jsx(Oe,{variant:"outline",className:`${V.color} border`,children:V.label})},_=J=>{const ie={excellent:{color:"bg-green-100 text-green-800 border-green-200",label:"Excellent"},good:{color:"bg-blue-100 text-blue-800 border-blue-200",label:"Good"},fair:{color:"bg-yellow-100 text-yellow-800 border-yellow-200",label:"Fair"},poor:{color:"bg-red-100 text-red-800 border-red-200",label:"Poor"}},V=ie[J]||ie.good;return e.jsx(Oe,{variant:"outline",className:`${V.color} border`,children:V.label})},S=J=>{const ie={active:{color:"bg-green-100 text-green-800 border-green-200",label:"Active"},reserved:{color:"bg-blue-100 text-blue-800 border-blue-200",label:"Reserved"},returned:{color:"bg-gray-100 text-gray-800 border-gray-200",label:"Returned"},overdue:{color:"bg-red-100 text-red-800 border-red-200",label:"Overdue"},cancelled:{color:"bg-gray-100 text-gray-800 border-gray-200",label:"Cancelled"}},V=ie[J]||ie.active;return e.jsx(Oe,{variant:"outline",className:`${V.color} border`,children:V.label})},k=()=>s?.rental_history?s.rental_history.reduce((J,ie)=>J+(ie.total_amount||0),0):0,E=()=>s?.rental_history?s.rental_history.find(J=>J.rental_status==="active"||J.rental_status==="reserved"):null,A=async()=>{if(s)try{await de.updateRentalMachine(s.id,v),x(!1),b()}catch(J){console.error("Error updating rental machine:",J)}},O=async()=>{if(s)try{await de.deleteRentalMachine(s.id),y(!1),r("/rental-machines")}catch(J){console.error("Error deleting rental machine:",J)}},z=()=>{s&&(w({serial_number:s.serial_number,rental_status:s.rental_status,condition:s.condition,location:s.location||"",notes:s.notes||""}),x(!0))};if(l)return e.jsx(gt,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"h-8 bg-muted rounded w-48"}),e.jsx("div",{className:"h-10 bg-muted rounded w-32"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsx("div",{className:"h-64 bg-muted rounded"}),e.jsx("div",{className:"h-64 bg-muted rounded"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"h-32 bg-muted rounded"}),e.jsx("div",{className:"h-64 bg-muted rounded"})]})]})]})});if(u||!s)return e.jsx(gt,{children:e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-red-600 mb-4",children:"Error"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:u||"Rental machine not found"}),e.jsxs(q,{onClick:()=>r("/rental-machines"),children:[e.jsx(Cn,{className:"mr-2 h-4 w-4"}),"Back to Rental Fleet"]})]})})});const R=E(),G=k();return e.jsx(gt,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs(q,{variant:"outline",onClick:()=>r("/rental-machines"),children:[e.jsx(Cn,{className:"mr-2 h-4 w-4"}),"Back to Fleet"]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Rental Machine Details"}),e.jsxs("p",{className:"text-muted-foreground",children:["Serial: ",s.serial_number]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[N(s.rental_status),n?.role!=="sales"&&e.jsxs(e.Fragment,{children:[e.jsxs(q,{variant:"outline",onClick:z,children:[e.jsx(xr,{className:"mr-2 h-4 w-4"}),"Edit"]}),e.jsxs(q,{variant:"outline",onClick:()=>y(!0),children:[e.jsx(br,{className:"mr-2 h-4 w-4"}),"Delete"]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs(se,{children:[e.jsx(ue,{children:e.jsxs(fe,{className:"flex items-center",children:[e.jsx(Jt,{className:"mr-2 h-5 w-5"}),"Machine Information"]})}),e.jsxs(ae,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Serial Number"}),e.jsx("p",{className:"text-lg font-medium",children:s.serial_number})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Model"}),e.jsxs("p",{className:"text-lg font-medium",children:[s.manufacturer," ",s.model_name]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Condition"}),e.jsx("div",{className:"mt-1",children:_(s.condition)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Location"}),e.jsx("p",{className:"text-lg",children:s.location||"Not specified"})]}),s.catalogue_number&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Catalogue Number"}),e.jsx("p",{className:"text-lg",children:s.catalogue_number})]}),s.warranty_months&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Warranty"}),e.jsxs("p",{className:"text-lg",children:[s.warranty_months," months"]})]})]}),s.model_description&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Description"}),e.jsx("p",{className:"text-sm bg-muted p-3 rounded-md",children:s.model_description})]}),s.notes&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Notes"}),e.jsx("p",{className:"text-sm bg-muted p-3 rounded-md",children:s.notes})]})]})]}),R&&e.jsxs(se,{children:[e.jsx(ue,{children:e.jsxs(fe,{className:"flex items-center",children:[e.jsx(is,{className:"mr-2 h-5 w-5"}),"Current Rental"]})}),e.jsxs(ae,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Customer"}),e.jsx("p",{className:"text-lg font-medium",children:R.customer_name}),R.customer_company&&e.jsx("p",{className:"text-sm text-muted-foreground",children:R.customer_company})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Status"}),e.jsx("div",{className:"mt-1",children:S(R.rental_status)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Start Date"}),e.jsx("p",{className:"text-lg",children:jt(R.rental_start_date)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"End Date"}),e.jsx("p",{className:"text-lg",children:R.rental_end_date?jt(R.rental_end_date):"Not specified"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Billing Period"}),e.jsx("p",{className:"text-lg capitalize",children:R.billing_period})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Total Amount"}),e.jsx("p",{className:"text-lg font-medium",children:R.total_amount?at(R.total_amount):"Not specified"})]})]}),R.rental_notes&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Rental Notes"}),e.jsx("p",{className:"text-sm bg-muted p-3 rounded-md",children:R.rental_notes})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(q,{variant:"outline",onClick:()=>r(`/machine-rentals/${R.id}`),children:"View Rental Details"})})]})]}),e.jsxs(se,{children:[e.jsx(ue,{children:e.jsxs(fe,{className:"flex items-center",children:[e.jsx(H7,{className:"mr-2 h-5 w-5"}),"Rental History (",s.rental_history?.length||0,")"]})}),e.jsx(ae,{children:s.rental_history&&s.rental_history.length>0?e.jsx("div",{className:"space-y-4",children:s.rental_history.map(J=>e.jsxs("div",{className:"border rounded-lg p-4 hover:bg-muted/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[S(J.rental_status),e.jsx("span",{className:"font-medium",children:J.customer_name}),J.customer_company&&e.jsxs("span",{className:"text-sm text-muted-foreground",children:["(",J.customer_company,")"]})]}),e.jsx(q,{variant:"ghost",size:"sm",onClick:()=>r(`/machine-rentals/${J.id}`),children:"View Details"})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-muted-foreground",children:"Start Date"}),e.jsx("p",{children:jt(J.rental_start_date)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-muted-foreground",children:"End Date"}),e.jsx("p",{children:J.rental_end_date?jt(J.rental_end_date):"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-muted-foreground",children:"Billing"}),e.jsx("p",{className:"capitalize",children:J.billing_period})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-muted-foreground",children:"Amount"}),e.jsx("p",{className:"font-medium",children:J.total_amount?at(J.total_amount):"-"})]})]}),J.rental_notes&&e.jsxs("div",{className:"mt-2",children:[e.jsx("label",{className:"text-xs text-muted-foreground",children:"Notes"}),e.jsx("p",{className:"text-xs bg-muted p-2 rounded mt-1",children:J.rental_notes})]})]},J.id))}):e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No rental history found for this machine."})})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(se,{children:[e.jsx(ue,{children:e.jsx(fe,{children:"Statistics"})}),e.jsxs(ae,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Total Rentals"}),e.jsx("p",{className:"text-2xl font-bold",children:s.rental_count})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Total Revenue"}),e.jsx("p",{className:"text-2xl font-bold text-primary",children:at(G)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Average Revenue"}),e.jsx("p",{className:"text-lg",children:s.rental_count>0?at(G/s.rental_count):at(0)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Category"}),e.jsx("p",{className:"text-lg",children:s.category_name||"Not specified"})]})]})]}),e.jsxs(se,{children:[e.jsx(ue,{children:e.jsx(fe,{children:"System Information"})}),e.jsxs(ae,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Created"}),e.jsx("p",{className:"text-sm",children:gn(s.created_at)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Last Updated"}),e.jsx("p",{className:"text-sm",children:gn(s.updated_at)})]}),s.created_by_name&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Created By"}),e.jsx("p",{className:"text-sm",children:s.created_by_name})]})]})]})]})]}),e.jsx(Ft,{open:h,onOpenChange:x,children:e.jsxs(Rt,{className:"max-w-md",children:[e.jsxs(qt,{children:[e.jsx(Lt,{children:"Edit Rental Machine"}),e.jsx(Ut,{children:"Update the details of this rental machine."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(U,{htmlFor:"edit_serial_number",children:"Serial Number"}),e.jsx(be,{id:"edit_serial_number",value:v.serial_number,onChange:J=>w(ie=>({...ie,serial_number:J.target.value}))})]}),e.jsxs("div",{children:[e.jsx(U,{htmlFor:"edit_rental_status",children:"Status"}),e.jsxs(tt,{value:v.rental_status,onValueChange:J=>w(ie=>({...ie,rental_status:J})),children:[e.jsx(Je,{children:e.jsx(rt,{})}),e.jsxs(et,{children:[e.jsx(Y,{value:"available",children:"Available"}),e.jsx(Y,{value:"rented",children:"Rented"}),e.jsx(Y,{value:"reserved",children:"Reserved"}),e.jsx(Y,{value:"cleaning",children:"Cleaning"}),e.jsx(Y,{value:"inspection",children:"Inspection"}),e.jsx(Y,{value:"maintenance",children:"Maintenance"}),e.jsx(Y,{value:"repair",children:"Repair"}),e.jsx(Y,{value:"quarantine",children:"Quarantine"}),e.jsx(Y,{value:"retired",children:"Retired"})]})]})]}),e.jsxs("div",{children:[e.jsx(U,{htmlFor:"edit_condition",children:"Condition"}),e.jsxs(tt,{value:v.condition,onValueChange:J=>w(ie=>({...ie,condition:J})),children:[e.jsx(Je,{children:e.jsx(rt,{})}),e.jsxs(et,{children:[e.jsx(Y,{value:"excellent",children:"Excellent"}),e.jsx(Y,{value:"good",children:"Good"}),e.jsx(Y,{value:"fair",children:"Fair"}),e.jsx(Y,{value:"poor",children:"Poor"})]})]})]}),e.jsxs("div",{children:[e.jsx(U,{htmlFor:"edit_location",children:"Location"}),e.jsx(be,{id:"edit_location",value:v.location,onChange:J=>w(ie=>({...ie,location:J.target.value}))})]}),e.jsxs("div",{children:[e.jsx(U,{htmlFor:"edit_notes",children:"Notes"}),e.jsx(ar,{id:"edit_notes",value:v.notes,onChange:J=>w(ie=>({...ie,notes:J.target.value}))})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(q,{variant:"outline",onClick:()=>x(!1),children:"Cancel"}),e.jsx(q,{onClick:A,children:"Save Changes"})]})]})]})}),e.jsx(Ft,{open:p,onOpenChange:y,children:e.jsxs(Rt,{children:[e.jsxs(qt,{children:[e.jsx(Lt,{children:"Delete Rental Machine"}),e.jsx(Ut,{children:"This action cannot be undone. The machine will be permanently removed from your rental fleet."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{children:"Are you sure you want to delete this rental machine? This action cannot be undone."}),s&&e.jsxs("div",{className:"bg-muted p-4 rounded-lg",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Serial Number:"})," ",s.serial_number]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Model:"})," ",s.manufacturer," ",s.model_name]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Status:"})," ",s.rental_status]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Condition:"})," ",s.condition]})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(q,{variant:"outline",onClick:()=>y(!1),children:"Cancel"}),e.jsx(q,{variant:"destructive",onClick:O,children:"Delete Machine"})]})]})]})})]})})}const mO=[{key:"customer",label:"Customer"},{key:"machine",label:"Machine"},{key:"start_date",label:"Start Date"},{key:"end_date",label:"End Date"},{key:"status",label:"Status"},{key:"billing_period",label:"Billing Period"},{key:"total_amount",label:"Total Amount"}];function Fpe(){const t=er(),{user:r}=hr(),[n,s]=f.useState([]),[a,l]=f.useState([]),[c,u]=f.useState([]),[d,h]=f.useState(!0),[x,p]=f.useState(""),[y,v]=f.useState({status:"all",customer_id:"all",rental_machine_id:"all",start_date:"",end_date:""}),[w,b]=f.useState(1),[N,_]=f.useState(1),[S,k]=f.useState(0),[E]=f.useState(25),[A,O]=f.useState(!1),[z,R]=f.useState(!1),[G,J]=f.useState(null),[ie,V]=f.useState(!1),[xe,pe]=f.useState(null),[re,M]=f.useState(!1),[B,L]=f.useState(null),{visibleColumns:T,toggleColumn:F,isColumnVisible:I,resetColumns:Q,showAllColumns:W,hideAllColumns:ee,isSyncing:ye}=ps("active_rentals",gs(mO)),[he,te]=f.useState({rental_machine_id:"",customer_id:"",rental_start_date:"",rental_end_date:"",planned_return_date:"",rental_status:"active",price_per_day:"",price_per_week:"",price_per_month:"",billing_period:"monthly",total_amount:"",maintenance_reminder_date:"",rental_notes:""});f.useEffect(()=>{De(),ne(),$e()},[w,x,y]),f.useEffect(()=>{A&&yt()},[A]),f.useEffect(()=>{if(he.rental_start_date&&he.rental_end_date&&he.price_per_day){const K=new Date(he.rental_start_date),Z=new Date(he.rental_end_date),ke=Math.ceil((Z.getTime()-K.getTime())/(1e3*60*60*24))+1,Ae=parseFloat(he.price_per_day)||0,je=parseFloat(he.price_per_week)||0,He=parseFloat(he.price_per_month)||0;let Se=0;if(ke>=30&&He>0){const it=Math.ceil(ke/30);Se=He*it}else if(ke>=7&&je>0){const it=Math.ceil(ke/7);Se=je*it}else Ae>0&&(Se=Ae*ke);Se>0&&Se.toFixed(2)!==he.total_amount&&te(it=>({...it,total_amount:Se.toFixed(2)}))}},[he.rental_start_date,he.rental_end_date,he.price_per_day,he.price_per_week,he.price_per_month]);const De=async()=>{try{h(!0);const K=await de.getMachineRentals({page:w,limit:E,search:x,...y});s(K.rentals||[]),K.pagination&&(_(K.pagination.pages||1),k(K.pagination.total||0))}catch(K){console.error("Error fetching machine rentals:",K),s([]),_(1),k(0)}finally{h(!1)}},ne=async()=>{try{const K=await de.getCustomers();Array.isArray(K)?l(K):K&&Array.isArray(K.customers)?l(K.customers):K&&Array.isArray(K.data)?l(K.data):l([])}catch(K){console.error("Error fetching customers:",K),l([])}},$e=async()=>{try{const K=await de.getAvailableRentalMachines();Array.isArray(K)?u(K):K&&Array.isArray(K.data)?u(K.data):u([])}catch(K){console.error("Error fetching available machines:",K),u([])}},ge=()=>{setPagination(K=>({...K,page:1})),De()},we=(K,Z)=>{let ke=Z==="all"?"":Z;if((K==="start_date"||K==="end_date")&&ke&&ke.includes(".")){const Ae=Yo(ke);Ae&&(ke=no(Ae))}v(Ae=>({...Ae,[K]:ke})),setPagination(Ae=>({...Ae,page:1}))},_e=()=>{v({status:"all",customer_id:"all",rental_machine_id:"all",start_date:"",end_date:""}),p(""),setPagination(K=>({...K,page:1}))},Ye=K=>{const Z={...K};if(Z.rental_start_date&&Z.rental_start_date.includes(".")){const ke=Yo(Z.rental_start_date);ke&&(Z.rental_start_date=no(ke))}if(Z.rental_end_date&&Z.rental_end_date.includes(".")){const ke=Yo(Z.rental_end_date);ke&&(Z.rental_end_date=no(ke))}if(Z.planned_return_date&&Z.planned_return_date.includes(".")){const ke=Yo(Z.planned_return_date);ke&&(Z.planned_return_date=no(ke))}if(Z.maintenance_reminder_date&&Z.maintenance_reminder_date.includes(".")){const ke=Yo(Z.maintenance_reminder_date);ke&&(Z.maintenance_reminder_date=no(ke))}return Z.rental_end_date===""&&(Z.rental_end_date=null),Z.planned_return_date===""&&(Z.planned_return_date=null),Z.maintenance_reminder_date===""&&(Z.maintenance_reminder_date=null),Z.rental_notes===""&&(Z.rental_notes=null),Z},ht=async()=>{try{const K=Ye({...he,price_per_day:he.price_per_day?parseFloat(he.price_per_day):void 0,price_per_week:he.price_per_week?parseFloat(he.price_per_week):void 0,price_per_month:he.price_per_month?parseFloat(he.price_per_month):void 0,total_amount:he.total_amount?parseFloat(he.total_amount):void 0});await de.createMachineRental(K),O(!1),yt(),De(),$e()}catch(K){console.error("Error creating machine rental:",K)}},Ve=async()=>{if(G)try{const K=Ye({...he,price_per_day:he.price_per_day?parseFloat(he.price_per_day):void 0,price_per_week:he.price_per_week?parseFloat(he.price_per_week):void 0,price_per_month:he.price_per_month?parseFloat(he.price_per_month):void 0,total_amount:he.total_amount?parseFloat(he.total_amount):void 0});await de.updateMachineRental(G.id,K),R(!1),J(null),yt(),De(),$e()}catch(K){console.error("Error updating machine rental:",K)}},lt=async()=>{if(xe)try{await de.deleteMachineRental(xe.id),V(!1),pe(null),De(),$e()}catch(K){console.error("Error deleting machine rental:",K)}},yt=()=>{te({rental_machine_id:"",customer_id:"",rental_start_date:"",rental_end_date:"",planned_return_date:"",rental_status:"active",price_per_day:"",price_per_week:"",price_per_month:"",billing_period:"monthly",total_amount:"",maintenance_reminder_date:"",rental_notes:""}),L(null)},Re=K=>{J(K),te({rental_machine_id:K.rental_machine_id,customer_id:K.customer_id,rental_start_date:K.rental_start_date?jt(K.rental_start_date):"",rental_end_date:K.rental_end_date?jt(K.rental_end_date):"",planned_return_date:K.planned_return_date?jt(K.planned_return_date):"",rental_status:K.rental_status,price_per_day:K.price_per_day?.toString()||"",price_per_week:K.price_per_week?.toString()||"",price_per_month:K.price_per_month?.toString()||"",billing_period:K.billing_period,total_amount:K.total_amount?.toString()||"",maintenance_reminder_date:K.maintenance_reminder_date?jt(K.maintenance_reminder_date):"",rental_notes:K.rental_notes||""}),L(null),R(!0)},H=K=>{const Z={active:{variant:"default",label:"Active"},reserved:{variant:"secondary",label:"Reserved"},returned:{variant:"secondary",label:"Returned"},overdue:{variant:"destructive",label:"Overdue"},cancelled:{variant:"outline",label:"Cancelled"}},ke=Z[K]||Z.active;return e.jsx(Oe,{variant:ke.variant,children:ke.label})},Be=()=>Object.values(y).filter(K=>K!=="").length,st=async()=>{if(!he.rental_machine_id||!he.customer_id||!he.rental_start_date){L("Please select machine, customer, and start date first");return}M(!0);try{const K=he.rental_start_date.includes(".")?no(Yo(he.rental_start_date)):he.rental_start_date,Z=he.rental_end_date&&he.rental_end_date.includes(".")?no(Yo(he.rental_end_date)):he.rental_end_date,ke={rental_machine_id:parseInt(he.rental_machine_id),start_date:K,end_date:Z||null,customer_id:parseInt(he.customer_id)},Ae=await de.calculateDynamicPricing(ke.rental_machine_id.toString(),ke.start_date,ke.end_date||"",ke.customer_id.toString());let je=0;const He=new Date(ke.start_date),Se=ke.end_date?new Date(ke.end_date):null;if(Se){const it=Math.ceil((Se.getTime()-He.getTime())/864e5)+1;if(it>=30&&Ae.monthly_price){const Me=Math.ceil(it/30);je=Ae.monthly_price*Me}else if(it>=7&&Ae.weekly_price){const Me=Math.ceil(it/7);je=Ae.weekly_price*Me}else Ae.daily_price&&(je=Ae.daily_price*it)}te(it=>({...it,price_per_day:Ae.daily_price?.toString()||"",price_per_week:Ae.weekly_price?.toString()||"",price_per_month:Ae.monthly_price?.toString()||"",total_amount:je.toFixed(2)})),L(null)}catch(K){console.error("Error calculating dynamic pricing:",K),L("Failed to calculate dynamic pricing. Using manual pricing.")}finally{M(!1)}};return e.jsx(gt,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Active Rentals"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage machine rentals and track rental status"})]}),e.jsxs(Ft,{open:A,onOpenChange:O,children:[e.jsx(yc,{asChild:!0,children:e.jsxs(q,{children:[e.jsx(Vt,{className:"mr-2 h-4 w-4"}),"Create Rental"]})}),e.jsxs(Rt,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[e.jsxs(qt,{children:[e.jsx(Lt,{children:"Create Machine Rental"}),e.jsx(Ut,{children:"Create a new rental agreement for a customer."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(U,{htmlFor:"customer_id",children:"Customer"}),e.jsxs(tt,{value:he.customer_id,onValueChange:K=>te(Z=>({...Z,customer_id:K})),children:[e.jsx(Je,{children:e.jsx(rt,{placeholder:"Select customer"})}),e.jsx(et,{children:Array.isArray(a)&&a.map(K=>e.jsxs(Y,{value:K.id.toString(),children:[K.name," ",K.company_name&&`(${K.company_name})`]},K.id))})]})]}),e.jsxs("div",{children:[e.jsx(U,{htmlFor:"rental_machine_id",children:"Rental Machine"}),e.jsxs(tt,{value:he.rental_machine_id,onValueChange:K=>{const Z=c.find(Ae=>Ae.id.toString()===K),ke=Z?.current_rental_status==="active"||Z?.current_rental_status==="reserved";te(Ae=>({...Ae,rental_machine_id:K,rental_status:ke?"reserved":"active"}))},children:[e.jsx(Je,{children:e.jsx(rt,{placeholder:"Select machine"})}),e.jsx(et,{children:Array.isArray(c)&&c.map(K=>{const Z=K.current_rental_status==="active"||K.current_rental_status==="reserved",ke=K.rental_end_date||K.planned_return_date,Ae=ke?` (returns ${jt(ke)})`:"";return e.jsxs(Y,{value:K.id.toString(),children:[K.manufacturer," ",K.model_name," - ",K.serial_number,Z&&` (rented${Ae})`]},K.id)})})]})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(U,{htmlFor:"rental_start_date",children:"Start Date"}),e.jsx(Jl,{name:"rental_start_date",value:he.rental_start_date,onChange:K=>te(Z=>({...Z,rental_start_date:K})),placeholder:"Select start date"}),(()=>{const K=c.find(Ae=>Ae.id.toString()===he.rental_machine_id),Z=K?.current_rental_status==="active"||K?.current_rental_status==="reserved",ke=K?.rental_end_date||K?.planned_return_date;return Z&&ke?e.jsxs("p",{className:"text-sm text-amber-600 mt-1",children:["⚠️ This machine is currently rented. Start date must be on or after ",jt(ke)]}):null})()]}),e.jsxs("div",{children:[e.jsx(U,{htmlFor:"rental_end_date",children:"End Date"}),e.jsx(Jl,{name:"rental_end_date",value:he.rental_end_date,onChange:K=>te(Z=>({...Z,rental_end_date:K})),placeholder:"Select end date"})]}),e.jsxs("div",{children:[e.jsx(U,{htmlFor:"planned_return_date",children:"Planned Return"}),e.jsx(Jl,{name:"planned_return_date",value:he.planned_return_date,onChange:K=>te(Z=>({...Z,planned_return_date:K})),placeholder:"Select planned return date"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Pricing"}),e.jsxs(q,{type:"button",variant:"outline",size:"sm",onClick:st,disabled:re,children:[e.jsx(w0,{className:"mr-2 h-4 w-4"}),re?"Calculating...":"Calculate Dynamic Pricing"]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(U,{htmlFor:"price_per_day",children:"Price per Day"}),e.jsx(be,{id:"price_per_day",type:"number",step:"0.01",value:he.price_per_day,onChange:K=>te(Z=>({...Z,price_per_day:K.target.value})),placeholder:"0.00"})]}),e.jsxs("div",{children:[e.jsx(U,{htmlFor:"price_per_week",children:"Price per Week"}),e.jsx(be,{id:"price_per_week",type:"number",step:"0.01",value:he.price_per_week,onChange:K=>te(Z=>({...Z,price_per_week:K.target.value})),placeholder:"0.00"})]}),e.jsxs("div",{children:[e.jsx(U,{htmlFor:"price_per_month",children:"Price per Month"}),e.jsx(be,{id:"price_per_month",type:"number",step:"0.01",value:he.price_per_month,onChange:K=>te(Z=>({...Z,price_per_month:K.target.value})),placeholder:"0.00"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(U,{htmlFor:"billing_period",children:"Billing Period"}),e.jsxs(tt,{value:he.billing_period,onValueChange:K=>te(Z=>({...Z,billing_period:K})),children:[e.jsx(Je,{children:e.jsx(rt,{})}),e.jsxs(et,{children:[e.jsx(Y,{value:"daily",children:"Daily"}),e.jsx(Y,{value:"weekly",children:"Weekly"}),e.jsx(Y,{value:"monthly",children:"Monthly"})]})]})]}),e.jsxs("div",{children:[e.jsx(U,{htmlFor:"total_amount",children:"Total Amount"}),e.jsx(be,{id:"total_amount",type:"number",step:"0.01",value:he.total_amount,onChange:K=>te(Z=>({...Z,total_amount:K.target.value})),placeholder:"0.00"})]})]}),e.jsxs("div",{children:[e.jsx(U,{htmlFor:"rental_notes",children:"Notes"}),e.jsx(ar,{id:"rental_notes",value:he.rental_notes,onChange:K=>te(Z=>({...Z,rental_notes:K.target.value})),placeholder:"Enter rental notes"})]}),B&&e.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-md",children:e.jsx("p",{className:"text-sm text-red-600",children:B})}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(q,{variant:"outline",onClick:()=>O(!1),children:"Cancel"}),e.jsx(q,{onClick:ht,children:"Create Rental"})]})]})]})]})]}),e.jsxs(se,{children:[e.jsx(ue,{children:e.jsxs(fe,{className:"flex items-center gap-2",children:[e.jsx(Ua,{className:"h-5 w-5"}),"Filters",Be()>0&&e.jsx(Oe,{variant:"secondary",children:Be()})]})}),e.jsx(ae,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-6 gap-4",children:[e.jsxs("div",{children:[e.jsx(U,{children:"Search"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(be,{placeholder:"Search rentals...",value:x,onChange:K=>p(K.target.value),onKeyPress:K=>K.key==="Enter"&&ge()}),e.jsx(q,{onClick:ge,size:"sm",children:e.jsx(nr,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{children:[e.jsx(U,{children:"Status"}),e.jsxs(tt,{value:y.status,onValueChange:K=>we("status",K),children:[e.jsx(Je,{children:e.jsx(rt,{placeholder:"All statuses"})}),e.jsxs(et,{children:[e.jsx(Y,{value:"all",children:"All statuses"}),e.jsx(Y,{value:"active",children:"Active"}),e.jsx(Y,{value:"reserved",children:"Reserved"}),e.jsx(Y,{value:"returned",children:"Returned"}),e.jsx(Y,{value:"overdue",children:"Overdue"}),e.jsx(Y,{value:"cancelled",children:"Cancelled"})]})]})]}),e.jsxs("div",{children:[e.jsx(U,{children:"Customer"}),e.jsxs(tt,{value:y.customer_id,onValueChange:K=>we("customer_id",K),children:[e.jsx(Je,{children:e.jsx(rt,{placeholder:"All customers"})}),e.jsxs(et,{children:[e.jsx(Y,{value:"all",children:"All customers"}),Array.isArray(a)&&a.map(K=>e.jsx(Y,{value:K.id.toString(),children:K.name},K.id))]})]})]}),e.jsxs("div",{children:[e.jsx(U,{children:"Start Date From"}),e.jsx(Jl,{name:"start_date_filter",value:y.start_date,onChange:K=>we("start_date",K),placeholder:"Select start date"})]}),e.jsxs("div",{children:[e.jsx(U,{children:"End Date To"}),e.jsx(Jl,{name:"end_date_filter",value:y.end_date,onChange:K=>we("end_date",K),placeholder:"Select end date"})]}),e.jsx("div",{className:"flex items-end",children:e.jsx(q,{variant:"outline",onClick:_e,className:"w-full",children:"Clear Filters"})})]})})]}),e.jsxs(se,{children:[e.jsx(ue,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(fe,{children:["Machine Rentals (",S,")"]}),e.jsx(ys,{columns:mO,visibleColumns:T,onToggleColumn:F,onShowAll:W,onHideAll:ee,onReset:Q,isSyncing:ye})]})}),e.jsx(ae,{children:d?e.jsx("div",{className:"text-center py-8",children:"Loading..."}):e.jsxs(e.Fragment,{children:[e.jsxs(ir,{children:[e.jsx(lr,{children:e.jsxs(ft,{children:[I("customer")&&e.jsx(me,{children:"Customer"}),I("machine")&&e.jsx(me,{children:"Machine"}),I("start_date")&&e.jsx(me,{children:"Start Date"}),I("end_date")&&e.jsx(me,{children:"End Date"}),I("status")&&e.jsx(me,{children:"Status"}),I("billing_period")&&e.jsx(me,{children:"Billing"}),I("total_amount")&&e.jsx(me,{children:"Total Amount"}),e.jsx(me,{children:"Actions"})]})}),e.jsx(or,{children:n.map(K=>e.jsxs(ft,{className:"cursor-pointer hover:bg-muted/50",onClick:()=>t(`/machine-rentals/${K.id}`),children:[I("customer")&&e.jsx(oe,{children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:K.customer_name}),K.customer_company&&e.jsx("div",{className:"text-sm text-muted-foreground",children:K.customer_company})]})}),I("machine")&&e.jsx(oe,{children:e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium",children:[K.machine_manufacturer," ",K.machine_model_name]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:["SN: ",K.machine_serial]})]})}),I("start_date")&&e.jsx(oe,{children:jt(K.rental_start_date)}),I("end_date")&&e.jsx(oe,{children:K.rental_end_date?jt(K.rental_end_date):"-"}),I("status")&&e.jsx(oe,{children:H(K.rental_status)}),I("billing_period")&&e.jsx(oe,{children:e.jsx("div",{className:"text-sm",children:e.jsx("div",{className:"capitalize",children:K.billing_period})})}),I("total_amount")&&e.jsx(oe,{children:K.total_amount?at(K.total_amount):"-"}),e.jsx(oe,{className:"text-right",children:e.jsxs(Cr,{children:[e.jsx(Sr,{asChild:!0,children:e.jsx(q,{variant:"ghost",className:"h-8 w-8 p-0",onClick:Z=>Z.stopPropagation(),children:e.jsx(ss,{className:"h-4 w-4"})})}),e.jsxs(wr,{align:"end",children:[e.jsx(Tr,{children:"Actions"}),e.jsxs(ct,{onClick:Z=>{Z.stopPropagation(),t(`/machine-rentals/${K.id}`)},children:[e.jsx(mr,{className:"mr-2 h-4 w-4"}),"View Details"]}),r?.role!=="sales"&&e.jsxs(e.Fragment,{children:[e.jsxs(ct,{onClick:Z=>{Z.stopPropagation(),Re(K)},children:[e.jsx(xr,{className:"mr-2 h-4 w-4"}),"Edit Rental"]}),e.jsxs(ct,{onClick:Z=>{Z.stopPropagation(),pe(K),V(!0)},className:"text-red-600",children:[e.jsx(br,{className:"mr-2 h-4 w-4"}),"Delete"]})]})]})]})})]},K.id))})]}),e.jsx(r_,{currentPage:w,totalPages:N,totalCount:S,pageSize:E,onPageChange:b,itemName:"rentals"})]})})]}),e.jsx(Ft,{open:z,onOpenChange:R,children:e.jsxs(Rt,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[e.jsxs(qt,{children:[e.jsx(Lt,{children:"Edit Machine Rental"}),e.jsx(Ut,{children:"Update the details of this rental agreement."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(U,{htmlFor:"edit_customer_id",children:"Customer"}),e.jsxs(tt,{value:he.customer_id,onValueChange:K=>te(Z=>({...Z,customer_id:K})),children:[e.jsx(Je,{children:e.jsx(rt,{})}),e.jsx(et,{children:Array.isArray(a)&&a.map(K=>e.jsxs(Y,{value:K.id.toString(),children:[K.name," ",K.company_name&&`(${K.company_name})`]},K.id))})]})]}),e.jsxs("div",{children:[e.jsx(U,{htmlFor:"edit_rental_status",children:"Status"}),e.jsxs(tt,{value:he.rental_status,onValueChange:K=>te(Z=>({...Z,rental_status:K})),children:[e.jsx(Je,{children:e.jsx(rt,{})}),e.jsxs(et,{children:[e.jsx(Y,{value:"active",children:"Active"}),e.jsx(Y,{value:"reserved",children:"Reserved"}),e.jsx(Y,{value:"returned",children:"Returned"}),e.jsx(Y,{value:"overdue",children:"Overdue"}),e.jsx(Y,{value:"cancelled",children:"Cancelled"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(U,{htmlFor:"edit_rental_start_date",children:"Start Date"}),e.jsx(Jl,{name:"edit_rental_start_date",value:he.rental_start_date,onChange:K=>te(Z=>({...Z,rental_start_date:K})),placeholder:"Select start date"})]}),e.jsxs("div",{children:[e.jsx(U,{htmlFor:"edit_rental_end_date",children:"End Date"}),e.jsx(Jl,{name:"edit_rental_end_date",value:he.rental_end_date,onChange:K=>te(Z=>({...Z,rental_end_date:K})),placeholder:"Select end date"})]}),e.jsxs("div",{children:[e.jsx(U,{htmlFor:"edit_planned_return_date",children:"Planned Return"}),e.jsx(Jl,{name:"edit_planned_return_date",value:he.planned_return_date,onChange:K=>te(Z=>({...Z,planned_return_date:K})),placeholder:"Select planned return date"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Pricing"}),e.jsxs(q,{type:"button",variant:"outline",size:"sm",onClick:st,disabled:re,children:[e.jsx(w0,{className:"mr-2 h-4 w-4"}),re?"Calculating...":"Recalculate Pricing"]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(U,{htmlFor:"edit_price_per_day",children:"Price per Day"}),e.jsx(be,{id:"edit_price_per_day",type:"number",step:"0.01",value:he.price_per_day,onChange:K=>te(Z=>({...Z,price_per_day:K.target.value})),placeholder:"0.00"})]}),e.jsxs("div",{children:[e.jsx(U,{htmlFor:"edit_price_per_week",children:"Price per Week"}),e.jsx(be,{id:"edit_price_per_week",type:"number",step:"0.01",value:he.price_per_week,onChange:K=>te(Z=>({...Z,price_per_week:K.target.value})),placeholder:"0.00"})]}),e.jsxs("div",{children:[e.jsx(U,{htmlFor:"edit_price_per_month",children:"Price per Month"}),e.jsx(be,{id:"edit_price_per_month",type:"number",step:"0.01",value:he.price_per_month,onChange:K=>te(Z=>({...Z,price_per_month:K.target.value})),placeholder:"0.00"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(U,{htmlFor:"edit_billing_period",children:"Billing Period"}),e.jsxs(tt,{value:he.billing_period,onValueChange:K=>te(Z=>({...Z,billing_period:K})),children:[e.jsx(Je,{children:e.jsx(rt,{})}),e.jsxs(et,{children:[e.jsx(Y,{value:"daily",children:"Daily"}),e.jsx(Y,{value:"weekly",children:"Weekly"}),e.jsx(Y,{value:"monthly",children:"Monthly"})]})]})]}),e.jsxs("div",{children:[e.jsx(U,{htmlFor:"edit_total_amount",children:"Total Amount"}),e.jsx(be,{id:"edit_total_amount",type:"number",step:"0.01",value:he.total_amount,onChange:K=>te(Z=>({...Z,total_amount:K.target.value}))})]})]}),e.jsxs("div",{children:[e.jsx(U,{htmlFor:"edit_rental_notes",children:"Notes"}),e.jsx(ar,{id:"edit_rental_notes",value:he.rental_notes,onChange:K=>te(Z=>({...Z,rental_notes:K.target.value}))})]}),B&&e.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-md",children:e.jsx("p",{className:"text-sm text-red-600",children:B})}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(q,{variant:"outline",onClick:()=>R(!1),children:"Cancel"}),e.jsx(q,{onClick:Ve,children:"Save Changes"})]})]})]})}),e.jsx(Ft,{open:ie,onOpenChange:V,children:e.jsxs(Rt,{children:[e.jsxs(qt,{children:[e.jsx(Lt,{children:"Delete Machine Rental"}),e.jsx(Ut,{children:"This action cannot be undone. The rental agreement will be permanently removed."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{children:"Are you sure you want to delete this machine rental? This action cannot be undone."}),xe&&e.jsxs("div",{className:"bg-muted p-4 rounded-lg",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Customer:"})," ",xe.customer_name]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Machine:"})," ",xe.machine_manufacturer," ",xe.machine_model_name]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Serial:"})," ",xe.machine_serial]})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(q,{variant:"outline",onClick:()=>V(!1),children:"Cancel"}),e.jsx(q,{variant:"destructive",onClick:lt,children:"Delete"})]})]})]})})]})})}function qpe(){const{id:t}=oi(),r=er(),{user:n}=hr(),[s,a]=f.useState(null),[l,c]=f.useState(!0),[u,d]=f.useState(null);f.useEffect(()=>{t&&h()},[t]);const h=async()=>{try{c(!0);const w=await de.getMachineRental(t);a(w)}catch(w){console.error("Error fetching rental detail:",w),d("Failed to load rental details")}finally{c(!1)}},x=w=>{const b={active:{variant:"default",label:"Active"},reserved:{variant:"secondary",label:"Reserved"},returned:{variant:"secondary",label:"Returned"},overdue:{variant:"destructive",label:"Overdue"},cancelled:{variant:"outline",label:"Cancelled"}},N=b[w]||b.active;return e.jsx(Oe,{variant:N.variant,children:N.label})},p=w=>{const b={excellent:{variant:"default",label:"Excellent"},good:{variant:"secondary",label:"Good"},fair:{variant:"outline",label:"Fair"},poor:{variant:"destructive",label:"Poor"}},N=b[w]||b.good;return e.jsx(Oe,{variant:N.variant,children:N.label})},y=()=>{if(!s)return null;const w=new Date(s.rental_start_date),b=s.rental_end_date?new Date(s.rental_end_date):new Date,N=Math.abs(b.getTime()-w.getTime());return Math.ceil(N/(1e3*60*60*24))},v=()=>{if(!s||s.rental_status==="returned"||s.rental_status==="cancelled")return!1;const w=new Date,b=s.rental_end_date?new Date(s.rental_end_date):s.planned_return_date?new Date(s.planned_return_date):null;return b&&w>b};return l?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),e.jsx("p",{children:"Loading rental details..."})]})}):u||!s?e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-red-600 mb-4",children:"Error"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:u||"Rental not found"}),e.jsxs(q,{onClick:()=>r("/machine-rentals"),children:[e.jsx(Cn,{className:"mr-2 h-4 w-4"}),"Back to Rentals"]})]})}):e.jsx(gt,{children:e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs(q,{variant:"outline",onClick:()=>r("/machine-rentals"),children:[e.jsx(Cn,{className:"mr-2 h-4 w-4"}),"Back to Rentals"]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Rental Details"}),e.jsxs("p",{className:"text-muted-foreground",children:["Rental ID: #",s.id]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[x(s.rental_status),v()&&e.jsxs(Oe,{variant:"destructive",children:[e.jsx(vr,{className:"mr-1 h-3 w-3"}),"Overdue"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs(se,{children:[e.jsx(ue,{children:e.jsxs(fe,{className:"flex items-center",children:[e.jsx(is,{className:"mr-2 h-5 w-5"}),"Rental Information"]})}),e.jsxs(ae,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Start Date"}),e.jsx("p",{className:"text-lg",children:jt(s.rental_start_date)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"End Date"}),e.jsx("p",{className:"text-lg",children:s.rental_end_date?jt(s.rental_end_date):"Not specified"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Planned Return"}),e.jsx("p",{className:"text-lg",children:s.planned_return_date?jt(s.planned_return_date):"Not specified"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Actual Return"}),e.jsx("p",{className:"text-lg",children:s.actual_return_date?jt(s.actual_return_date):"Not returned"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Duration"}),e.jsxs("p",{className:"text-lg",children:[y()," days"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Billing Period"}),e.jsx("p",{className:"text-lg capitalize",children:s.billing_period})]})]}),s.rental_notes&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Notes"}),e.jsx("p",{className:"text-sm bg-muted p-3 rounded-md",children:s.rental_notes})]})]})]}),e.jsxs(se,{children:[e.jsx(ue,{children:e.jsxs(fe,{className:"flex items-center",children:[e.jsx(Ct,{className:"mr-2 h-5 w-5"}),"Machine Information"]})}),e.jsxs(ae,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Machine"}),e.jsxs("p",{className:"text-lg font-medium",children:[s.machine_manufacturer," ",s.machine_model_name]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Serial Number"}),e.jsx("p",{className:"text-lg",children:s.machine_serial})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Condition"}),e.jsx("div",{className:"mt-1",children:p(s.machine_condition)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Location"}),e.jsx("p",{className:"text-lg",children:s.machine_location||"Not specified"})]}),s.machine_catalogue_number&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Catalogue Number"}),e.jsx("p",{className:"text-lg",children:s.machine_catalogue_number})]})]}),s.machine_model_description&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Description"}),e.jsx("p",{className:"text-sm bg-muted p-3 rounded-md",children:s.machine_model_description})]}),s.machine_notes&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Machine Notes"}),e.jsx("p",{className:"text-sm bg-muted p-3 rounded-md",children:s.machine_notes})]})]})]}),e.jsxs(se,{children:[e.jsx(ue,{children:e.jsxs(fe,{className:"flex items-center",children:[e.jsx(Ot,{className:"mr-2 h-5 w-5"}),"Customer Information"]})}),e.jsx(ae,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Name"}),e.jsx("p",{className:"text-lg font-medium",children:s.customer_name})]}),s.customer_company&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Company"}),e.jsx("p",{className:"text-lg",children:s.customer_company})]}),s.customer_email&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Email"}),e.jsx("p",{className:"text-lg",children:s.customer_email})]}),s.customer_phone&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Phone"}),e.jsx("p",{className:"text-lg",children:s.customer_phone})]}),s.customer_address&&e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Address"}),e.jsx("p",{className:"text-lg",children:s.customer_address}),s.customer_city&&e.jsxs("p",{className:"text-lg",children:[s.customer_city," ",s.customer_postal_code]})]})]})})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(se,{children:[e.jsx(ue,{children:e.jsxs(fe,{className:"flex items-center",children:[e.jsx(Tn,{className:"mr-2 h-5 w-5"}),"Pricing"]})}),e.jsxs(ae,{className:"space-y-4",children:[s.price_per_day&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Price per Day"}),e.jsx("p",{className:"text-lg font-medium",children:at(s.price_per_day)})]}),s.price_per_week&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Price per Week"}),e.jsx("p",{className:"text-lg font-medium",children:at(s.price_per_week)})]}),s.price_per_month&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Price per Month"}),e.jsx("p",{className:"text-lg font-medium",children:at(s.price_per_month)})]}),s.total_amount&&e.jsxs("div",{children:[e.jsx(Id,{}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Total Amount"}),e.jsx("p",{className:"text-xl font-bold text-primary",children:at(s.total_amount)})]})]})]})]}),s.maintenance_reminder_date&&e.jsxs(se,{children:[e.jsx(ue,{children:e.jsxs(fe,{className:"flex items-center",children:[e.jsx(Zt,{className:"mr-2 h-5 w-5"}),"Maintenance"]})}),e.jsx(ae,{children:e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Reminder Date"}),e.jsx("p",{className:"text-lg",children:jt(s.maintenance_reminder_date)})]})})]}),e.jsxs(se,{children:[e.jsx(ue,{children:e.jsx(fe,{children:"System Information"})}),e.jsxs(ae,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Created"}),e.jsx("p",{className:"text-sm",children:gn(s.created_at)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Last Updated"}),e.jsx("p",{className:"text-sm",children:gn(s.updated_at)})]}),s.created_by_name&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Created By"}),e.jsx("p",{className:"text-sm",children:s.created_by_name})]})]})]}),n?.role!=="sales"&&e.jsxs(se,{children:[e.jsx(ue,{children:e.jsx(fe,{children:"Actions"})}),e.jsxs(ae,{className:"space-y-2",children:[e.jsxs(q,{className:"w-full",variant:"outline",children:[e.jsx(xr,{className:"mr-2 h-4 w-4"}),"Edit Rental"]}),e.jsxs(q,{className:"w-full",variant:"destructive",children:[e.jsx(br,{className:"mr-2 h-4 w-4"}),"Delete Rental"]})]})]})]})]})]})})}function Upe(){const[t,r]=f.useState(null),[n,s]=f.useState(null),[a,l]=f.useState("30d"),[c,u]=f.useState(!0),[d,h]=f.useState(null);f.useEffect(()=>{x(),p()},[a]);const x=async()=>{try{u(!0);const w=await de.getRentalAnalyticsOverview(a);r(w)}catch(w){console.error("Error fetching analytics data:",w),h("Failed to load analytics data")}finally{u(!1)}},p=async()=>{try{const w=await de.getRentalRealTimeDashboard();s(w)}catch(w){console.error("Error fetching real-time data:",w)}},y=w=>({available:"bg-green-100 text-green-800",rented:"bg-blue-100 text-blue-800",reserved:"bg-yellow-100 text-yellow-800",cleaning:"bg-orange-100 text-orange-800",inspection:"bg-purple-100 text-purple-800",maintenance:"bg-red-100 text-red-800",repair:"bg-red-100 text-red-800",quarantine:"bg-gray-100 text-gray-800",retired:"bg-gray-100 text-gray-800"})[w]||"bg-gray-100 text-gray-800",v=w=>{switch(w){case"error":return e.jsx(wn,{className:"h-4 w-4 text-red-500"});case"warning":return e.jsx(vr,{className:"h-4 w-4 text-yellow-500"});case"info":return e.jsx(ks,{className:"h-4 w-4 text-blue-500"});default:return e.jsx(Ar,{className:"h-4 w-4 text-green-500"})}};return c?e.jsx(gt,{children:e.jsx("div",{className:"space-y-6",children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading analytics data..."})]})})})}):d?e.jsx(gt,{children:e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx(wn,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Error Loading Analytics"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:d}),e.jsx(q,{onClick:x,children:"Try Again"})]})})}):e.jsx(gt,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Rental Analytics"}),e.jsx("p",{className:"text-muted-foreground",children:"Comprehensive insights into your rental business"})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs(tt,{value:a,onValueChange:l,children:[e.jsx(Je,{className:"w-40",children:e.jsx(rt,{})}),e.jsxs(et,{children:[e.jsx(Y,{value:"7d",children:"Last 7 days"}),e.jsx(Y,{value:"30d",children:"Last 30 days"}),e.jsx(Y,{value:"90d",children:"Last 90 days"}),e.jsx(Y,{value:"1y",children:"Last year"})]})]}),e.jsxs(q,{onClick:x,variant:"outline",children:[e.jsx(ks,{className:"h-4 w-4 mr-2"}),"Refresh"]})]})]}),n?.alerts&&n.alerts.length>0&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-3",children:"System Alerts"}),e.jsx("div",{className:"grid gap-3",children:n.alerts.map((w,b)=>e.jsxs("div",{className:"flex items-center p-3 bg-white border rounded-lg",children:[v(w.type),e.jsxs("div",{className:"ml-3",children:[e.jsx("h4",{className:"font-medium",children:w.title}),e.jsx("p",{className:"text-sm text-muted-foreground",children:w.message})]})]},b))})]}),e.jsxs(Ys,{defaultValue:"overview",className:"space-y-6",children:[e.jsxs(Ps,{children:[e.jsx(Kt,{value:"overview",children:"Overview"}),e.jsx(Kt,{value:"fleet",children:"Fleet"}),e.jsx(Kt,{value:"revenue",children:"Revenue"}),e.jsx(Kt,{value:"customers",children:"Customers"}),e.jsx(Kt,{value:"realtime",children:"Real-time"})]}),e.jsxs(Gt,{value:"overview",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs(se,{children:[e.jsxs(ue,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(fe,{className:"text-sm font-medium",children:"Total Revenue"}),e.jsx(Tn,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(ae,{children:[e.jsx("div",{className:"text-2xl font-bold",children:at(t?.revenue?.total_revenue||0)}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[t?.revenue?.total_rentals||0," total rentals"]})]})]}),e.jsxs(se,{children:[e.jsxs(ue,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(fe,{className:"text-sm font-medium",children:"Fleet Utilization"}),e.jsx(Dp,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(ae,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:[Number(t?.fleet?.utilization_percentage||0).toFixed(1),"%"]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[t?.fleet?.rented_machines||0," of ",t?.fleet?.total_machines||0," machines"]})]})]}),e.jsxs(se,{children:[e.jsxs(ue,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(fe,{className:"text-sm font-medium",children:"Active Customers"}),e.jsx(xs,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(ae,{children:[e.jsx("div",{className:"text-2xl font-bold",children:t?.customers?.unique_customers||0}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[t?.customers?.total_rentals||0," total rentals"]})]})]}),e.jsxs(se,{children:[e.jsxs(ue,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(fe,{className:"text-sm font-medium",children:"Overdue Rentals"}),e.jsx(vr,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(ae,{children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:t?.overdue?.overdue_count||0}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[at(t?.overdue?.overdue_value||0)," at risk"]})]})]})]}),e.jsxs(se,{children:[e.jsx(ue,{children:e.jsx(fe,{children:"Fleet Status Distribution"})}),e.jsx(ae,{children:e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4",children:t?.status?.map(w=>e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold",children:w.count}),e.jsx("div",{className:"text-sm text-muted-foreground capitalize",children:w.rental_status}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[w.percentage,"%"]})]},w.rental_status))})})]}),e.jsxs(se,{children:[e.jsx(ue,{children:e.jsx(fe,{children:"Top Customers"})}),e.jsx(ae,{children:e.jsxs(ir,{children:[e.jsx(lr,{children:e.jsxs(ft,{children:[e.jsx(me,{children:"Customer"}),e.jsx(me,{children:"Rentals"}),e.jsx(me,{children:"Total Spent"})]})}),e.jsx(or,{children:t?.customers?.top_customers?.map(w=>e.jsxs(ft,{children:[e.jsx(oe,{children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:w.name}),w.company_name&&e.jsx("div",{className:"text-sm text-muted-foreground",children:w.company_name})]})}),e.jsx(oe,{children:w.rental_count}),e.jsx(oe,{children:at(w.total_spent)})]},w.id))})]})})]})]}),e.jsx(Gt,{value:"fleet",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsxs(se,{children:[e.jsx(ue,{children:e.jsx(fe,{children:"Fleet Overview"})}),e.jsxs(ae,{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Total Machines"}),e.jsx("span",{className:"font-semibold",children:t?.fleet?.total_machines||0})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Available"}),e.jsx("span",{className:"font-semibold text-green-600",children:t?.fleet?.available_machines||0})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Rented"}),e.jsx("span",{className:"font-semibold text-blue-600",children:t?.fleet?.rented_machines||0})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Reserved"}),e.jsx("span",{className:"font-semibold text-yellow-600",children:t?.fleet?.reserved_machines||0})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Maintenance"}),e.jsx("span",{className:"font-semibold text-red-600",children:t?.fleet?.maintenance_machines||0})]})]})]}),e.jsxs(se,{children:[e.jsx(ue,{children:e.jsx(fe,{children:"Status Breakdown"})}),e.jsx(ae,{children:e.jsx("div",{className:"space-y-3",children:t?.status?.map(w=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${y(w.rental_status).split(" ")[0]}`}),e.jsx("span",{className:"text-sm capitalize",children:w.rental_status})]}),e.jsx("div",{className:"text-sm font-medium",children:w.count})]},w.rental_status))})})]}),e.jsxs(se,{children:[e.jsx(ue,{children:e.jsx(fe,{children:"Utilization Metrics"})}),e.jsxs(ae,{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Utilization Rate"}),e.jsxs("span",{className:"font-semibold",children:[Number(t?.fleet?.utilization_percentage||0).toFixed(1),"%"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Avg Daily Rentals"}),e.jsx("span",{className:"font-semibold",children:Number(t?.utilization?.average_daily_rentals||0).toFixed(1)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Peak Daily Rentals"}),e.jsx("span",{className:"font-semibold",children:Number(t?.utilization?.peak_daily_rentals||0).toFixed(1)})]})]})]})]})}),e.jsx(Gt,{value:"revenue",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsxs(se,{children:[e.jsx(ue,{children:e.jsx(fe,{children:"Revenue Overview"})}),e.jsxs(ae,{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Total Revenue"}),e.jsx("span",{className:"font-semibold",children:at(t?.revenue?.total_revenue||0)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Active Revenue"}),e.jsx("span",{className:"font-semibold text-green-600",children:at(t?.revenue?.active_revenue||0)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Completed Revenue"}),e.jsx("span",{className:"font-semibold text-blue-600",children:at(t?.revenue?.completed_revenue||0)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Overdue Revenue"}),e.jsx("span",{className:"font-semibold text-red-600",children:at(t?.revenue?.overdue_revenue||0)})]})]})]}),e.jsxs(se,{children:[e.jsx(ue,{children:e.jsx(fe,{children:"Rental Metrics"})}),e.jsxs(ae,{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Total Rentals"}),e.jsx("span",{className:"font-semibold",children:t?.revenue?.total_rentals||0})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Average Rental Value"}),e.jsx("span",{className:"font-semibold",children:at(t?.revenue?.average_rental_value||0)})]})]})]})]})}),e.jsx(Gt,{value:"customers",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(se,{children:[e.jsx(ue,{children:e.jsx(fe,{children:"Customer Statistics"})}),e.jsxs(ae,{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Unique Customers"}),e.jsx("span",{className:"font-semibold",children:t?.customers?.unique_customers||0})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Total Rentals"}),e.jsx("span",{className:"font-semibold",children:t?.customers?.total_rentals||0})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Avg Rentals per Customer"}),e.jsx("span",{className:"font-semibold",children:Number(t?.customers?.average_rentals_per_customer||0).toFixed(1)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Max Rentals per Customer"}),e.jsx("span",{className:"font-semibold",children:Number(t?.customers?.max_rentals_per_customer||0).toFixed(1)})]})]})]}),e.jsxs(se,{children:[e.jsx(ue,{children:e.jsx(fe,{children:"Top Customers"})}),e.jsx(ae,{children:e.jsx("div",{className:"space-y-3",children:t?.customers?.top_customers?.slice(0,5).map(w=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-muted rounded",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-foreground",children:w.name}),w.company_name&&e.jsx("div",{className:"text-sm text-muted-foreground",children:w.company_name})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"font-semibold text-foreground",children:at(w.total_spent)}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[w.rental_count," rentals"]})]})]},w.id))})})]})]})}),e.jsxs(Gt,{value:"realtime",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs(se,{children:[e.jsxs(ue,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(fe,{className:"text-sm font-medium",children:"Today's Rentals"}),e.jsx(is,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(ae,{children:[e.jsx("div",{className:"text-2xl font-bold",children:n?.today_stats?.new_rentals_today||0}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[at(n?.today_stats?.revenue_today||0)," revenue"]})]})]}),e.jsxs(se,{children:[e.jsxs(ue,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(fe,{className:"text-sm font-medium",children:"Starting Today"}),e.jsx(Os,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(ae,{children:e.jsx("div",{className:"text-2xl font-bold",children:n?.today_stats?.rentals_starting_today||0})})]}),e.jsxs(se,{children:[e.jsxs(ue,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(fe,{className:"text-sm font-medium",children:"Ending Today"}),e.jsx(Zm,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(ae,{children:e.jsx("div",{className:"text-2xl font-bold",children:n?.today_stats?.rentals_ending_today||0})})]}),e.jsxs(se,{children:[e.jsxs(ue,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(fe,{className:"text-sm font-medium",children:"Last Updated"}),e.jsx(Zt,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(ae,{children:e.jsx("div",{className:"text-sm font-bold",children:n?.last_updated?jt(n.last_updated):"Never"})})]})]}),e.jsxs(se,{children:[e.jsx(ue,{children:e.jsx(fe,{children:"Current Active Rentals"})}),e.jsx(ae,{children:e.jsxs(ir,{children:[e.jsx(lr,{children:e.jsxs(ft,{children:[e.jsx(me,{children:"Customer"}),e.jsx(me,{children:"Machine"}),e.jsx(me,{children:"Start Date"}),e.jsx(me,{children:"Return Date"}),e.jsx(me,{children:"Amount"}),e.jsx(me,{children:"Status"})]})}),e.jsx(or,{children:n?.current_rentals?.map(w=>e.jsxs(ft,{children:[e.jsx(oe,{children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:w.customer_name}),w.company_name&&e.jsx("div",{className:"text-sm text-muted-foreground",children:w.company_name})]})}),e.jsx(oe,{children:e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium",children:[w.manufacturer," ",w.machine_name]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:w.serial_number})]})}),e.jsx(oe,{children:jt(w.rental_start_date)}),e.jsx(oe,{children:jt(w.planned_return_date)}),e.jsx(oe,{children:at(w.total_amount)}),e.jsx(oe,{children:e.jsx(Oe,{variant:w.status==="overdue"?"destructive":w.status==="ending_soon"?"secondary":"default",children:w.status==="overdue"?"Overdue":w.status==="ending_soon"?"Ending Soon":"Active"})})]},w.id))})]})})]})]})]})]})})}function zpe(){const{hasPermission:t}=hr(),r=t("dynamic_pricing:write"),[n,s]=f.useState([]),[a,l]=f.useState([]),[c,u]=f.useState([]),[d,h]=f.useState([]),[x,p]=f.useState(!0),[y,v]=f.useState(null),[w,b]=f.useState(!1),[N,_]=f.useState(!1),[S,k]=f.useState(!1),[E,A]=f.useState(!1),[O,z]=f.useState(null),[R,G]=f.useState(null),[J,ie]=f.useState(null),[V,xe]=f.useState({name:"",description:"",rule_type:"demand",is_active:!0,priority:1,conditions:{},adjustments:{}}),[pe,re]=f.useState({rental_machine_id:"",base_price_daily:"",base_price_weekly:"",base_price_monthly:"",minimum_rental_days:"1",maximum_rental_days:"",currency:"KM"}),[M,B]=f.useState({rental_machine_id:"",scenarios:[{name:"Standard",start_date:"",end_date:"",customer_id:""},{name:"High Demand",start_date:"",end_date:"",customer_id:""}]}),[L,T]=f.useState({name:"",description:"",discount_percentage:"",minimum_rentals:"0",minimum_total_spent:"0",is_active:!0});f.useEffect(()=>{F()},[]);const F=async()=>{try{p(!0);const[H,Be,st,K]=await Promise.all([de.getPricingRules(),de.getCustomerTiers(),I(),Q()]);s(H||[]),l(Be||[]),u(st||[]),h(Array.isArray(K)?K:[])}catch(H){console.error("Error fetching data:",H),v("Failed to load pricing data")}finally{p(!1)}},I=async()=>{try{return await de.getAllBasePricing()||[]}catch(H){return console.error("Error fetching base pricing:",H),[]}},Q=async()=>{try{const H=await de.getRentalMachines();return Array.isArray(H)?H:H&&Array.isArray(H.data)?H.data:H&&Array.isArray(H.rental_machines)?H.rental_machines:H&&Array.isArray(H.machines)?H.machines:[]}catch(H){return console.error("Error fetching rental machines:",H),[]}},W=async()=>{try{await de.createPricingRule(V),Ne.success("Pricing rule created",{description:`Created ${V.name} rule`}),b(!1),_e(),F()}catch(H){console.error("Error creating pricing rule:",H),Ne.error("Failed to create pricing rule",{description:H instanceof Error?H.message:"An error occurred"})}},ee=async()=>{if(O)try{await de.updatePricingRule(O.id.toString(),V),Ne.success("Pricing rule updated",{description:`Updated ${V.name} rule`}),b(!1),z(null),_e(),F()}catch(H){console.error("Error updating pricing rule:",H),Ne.error("Failed to update pricing rule",{description:H instanceof Error?H.message:"An error occurred"})}},ye=async H=>{const Be=n.find(st=>st.id===H);if(confirm("Are you sure you want to delete this pricing rule?"))try{await de.deletePricingRule(H.toString()),Ne.success("Pricing rule deleted",{description:Be?`Deleted ${Be.name} rule`:"Rule has been removed"}),F()}catch(st){console.error("Error deleting pricing rule:",st),Ne.error("Failed to delete pricing rule",{description:st instanceof Error?st.message:"An error occurred"})}},he=async()=>{if(!pe.rental_machine_id||!pe.base_price_daily){Ne.error("Validation Error",{description:"Please select a machine and enter a daily price"});return}try{const H={...pe,base_price_daily:parseFloat(pe.base_price_daily),base_price_weekly:pe.base_price_weekly?parseFloat(pe.base_price_weekly):null,base_price_monthly:pe.base_price_monthly?parseFloat(pe.base_price_monthly):null,minimum_rental_days:pe.minimum_rental_days?parseInt(pe.minimum_rental_days):null,maximum_rental_days:pe.maximum_rental_days?parseInt(pe.maximum_rental_days):null,currency:pe.currency||"KM"};await de.setBasePricing(H.rental_machine_id,H);const Be=d.find(st=>st.id===H.rental_machine_id);Ne.success("Base pricing created",{description:Be?`Set pricing for ${Be.model_name}`:"Pricing has been configured"}),_(!1),Ye(),F()}catch(H){console.error("Error creating base pricing:",H),Ne.error("Failed to create base pricing",{description:H instanceof Error?H.message:"An error occurred"})}},te=async()=>{if(R)try{const H={...pe,base_price_daily:parseFloat(pe.base_price_daily),base_price_weekly:pe.base_price_weekly?parseFloat(pe.base_price_weekly):null,base_price_monthly:pe.base_price_monthly?parseFloat(pe.base_price_monthly):null,minimum_rental_days:pe.minimum_rental_days?parseInt(pe.minimum_rental_days):null,maximum_rental_days:pe.maximum_rental_days?parseInt(pe.maximum_rental_days):null,currency:pe.currency||"KM"};await de.setBasePricing(R.rental_machine_id.toString(),H),Ne.success("Base pricing updated",{description:`Updated pricing for ${R.machine_name}`}),_(!1),G(null),Ye(),F()}catch(H){console.error("Error updating base pricing:",H),Ne.error("Failed to update base pricing",{description:H instanceof Error?H.message:"An error occurred"})}},De=async()=>{try{const H=await de.runPricingSimulation(M.rental_machine_id,M.scenarios)}catch(H){console.error("Error running simulation:",H),v("Failed to run pricing simulation")}},ne=async()=>{try{await de.createCustomerTier(L),Ne.success("Customer tier created",{description:`Created ${L.name} tier`}),A(!1),ht(),F()}catch(H){console.error("Error creating customer tier:",H),Ne.error("Failed to create customer tier",{description:H instanceof Error?H.message:"An error occurred"})}},$e=async()=>{if(J)try{await de.updateCustomerTier(J.id.toString(),L),Ne.success("Customer tier updated",{description:`Updated ${L.name} tier`}),A(!1),ie(null),ht(),F()}catch(H){console.error("Error updating customer tier:",H),Ne.error("Failed to update customer tier",{description:H instanceof Error?H.message:"An error occurred"})}},ge=async H=>{const Be=a.find(st=>st.id===H);if(confirm("Are you sure you want to delete this customer tier?"))try{await de.deleteCustomerTier(H.toString()),Ne.success("Customer tier deleted",{description:Be?`Deleted ${Be.name} tier`:"Tier has been removed"}),F()}catch(st){console.error("Error deleting customer tier:",st),Ne.error("Failed to delete customer tier",{description:st instanceof Error?st.message:"An error occurred"})}},we=async H=>{if(c.find(Be=>Be.id===H),!!confirm("Are you sure you want to delete this base pricing?"))try{Ne.warning("Feature Not Available",{description:"Delete functionality for base pricing not yet implemented"})}catch(Be){console.error("Error deleting base pricing:",Be),Ne.error("Failed to delete base pricing",{description:Be instanceof Error?Be.message:"An error occurred"})}},_e=()=>{xe({name:"",description:"",rule_type:"demand",is_active:!0,priority:1,conditions:{},adjustments:{}})},Ye=()=>{re({rental_machine_id:"",base_price_daily:"",base_price_weekly:"",base_price_monthly:"",minimum_rental_days:"1",maximum_rental_days:"",currency:"KM"})},ht=()=>{T({name:"",description:"",discount_percentage:"",minimum_rentals:"0",minimum_total_spent:"0",is_active:!0})},Ve=H=>{z(H),xe({name:H.name,description:H.description,rule_type:H.rule_type,is_active:H.is_active,priority:H.priority,conditions:H.conditions,adjustments:H.adjustments}),b(!0)},lt=H=>{G(H),re({rental_machine_id:H.rental_machine_id.toString(),base_price_daily:H.base_price_daily.toString(),base_price_weekly:H.base_price_weekly?.toString()||"",base_price_monthly:H.base_price_monthly?.toString()||"",minimum_rental_days:H.minimum_rental_days.toString(),maximum_rental_days:H.maximum_rental_days?.toString()||"",currency:H.currency}),_(!0)},yt=H=>{ie(H),T({name:H.name,description:H.description,discount_percentage:H.discount_percentage.toString(),minimum_rentals:H.minimum_rentals.toString(),minimum_total_spent:H.minimum_total_spent.toString(),is_active:H.is_active}),A(!0)},Re=H=>({demand:"bg-blue-100 text-blue-800",seasonal:"bg-green-100 text-green-800",availability:"bg-yellow-100 text-yellow-800",customer_tier:"bg-purple-100 text-purple-800",duration:"bg-orange-100 text-orange-800"})[H]||"bg-gray-100 text-gray-800";return x?e.jsx(gt,{children:e.jsx("div",{className:"space-y-6",children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading pricing data..."})]})})})}):e.jsx(gt,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Dynamic Pricing"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage pricing rules, customer tiers, and base pricing"})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs(q,{onClick:()=>k(!0),variant:"outline",children:[e.jsx(w0,{className:"h-4 w-4 mr-2"}),"Pricing Simulation"]}),e.jsxs(q,{onClick:F,variant:"outline",children:[e.jsx(Os,{className:"h-4 w-4 mr-2"}),"Refresh"]})]})]}),y&&e.jsx("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:e.jsx("p",{className:"text-red-800",children:y})}),e.jsxs(Ys,{defaultValue:"rules",className:"space-y-6",children:[e.jsxs(Ps,{children:[e.jsx(Kt,{value:"rules",children:"Pricing Rules"}),e.jsx(Kt,{value:"tiers",children:"Customer Tiers"}),e.jsx(Kt,{value:"pricing",children:"Base Pricing"}),e.jsx(Kt,{value:"analytics",children:"Analytics"})]}),e.jsx(Gt,{value:"rules",className:"space-y-6",children:e.jsxs(se,{children:[e.jsxs(ue,{className:"flex flex-row items-center justify-between",children:[e.jsx(fe,{children:"Pricing Rules"}),r&&e.jsxs(q,{onClick:()=>b(!0),children:[e.jsx(Vt,{className:"h-4 w-4 mr-2"}),"Add Rule"]})]}),e.jsx(ae,{children:e.jsxs(ir,{children:[e.jsx(lr,{children:e.jsxs(ft,{children:[e.jsx(me,{children:"Name"}),e.jsx(me,{children:"Type"}),e.jsx(me,{children:"Priority"}),e.jsx(me,{children:"Status"}),r&&e.jsx(me,{children:"Actions"})]})}),e.jsx(or,{children:n.map(H=>e.jsxs(ft,{children:[e.jsx(oe,{children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:H.name}),e.jsx("div",{className:"text-sm text-gray-500",children:H.description})]})}),e.jsx(oe,{children:e.jsx(Oe,{className:Re(H.rule_type),children:H.rule_type})}),e.jsx(oe,{children:H.priority}),e.jsx(oe,{children:e.jsx(Oe,{variant:H.is_active?"default":"secondary",children:H.is_active?"Active":"Inactive"})}),r&&e.jsx(oe,{className:"text-right",children:e.jsxs(Cr,{children:[e.jsx(Sr,{asChild:!0,children:e.jsx(q,{variant:"ghost",className:"h-8 w-8 p-0",children:e.jsx(ss,{className:"h-4 w-4"})})}),e.jsxs(wr,{align:"end",children:[e.jsx(Tr,{children:"Actions"}),e.jsxs(ct,{onClick:()=>Ve(H),children:[e.jsx(xr,{className:"mr-2 h-4 w-4"}),"Edit Rule"]}),e.jsxs(ct,{onClick:()=>ye(H.id),className:"text-red-600",children:[e.jsx(br,{className:"mr-2 h-4 w-4"}),"Delete"]})]})]})})]},H.id))})]})})]})}),e.jsx(Gt,{value:"tiers",className:"space-y-6",children:e.jsxs(se,{children:[e.jsxs(ue,{className:"flex flex-row items-center justify-between",children:[e.jsx(fe,{children:"Customer Pricing Tiers"}),r&&e.jsxs(q,{onClick:()=>A(!0),children:[e.jsx(Vt,{className:"h-4 w-4 mr-2"}),"Add Tier"]})]}),e.jsx(ae,{children:e.jsxs(ir,{children:[e.jsx(lr,{children:e.jsxs(ft,{children:[e.jsx(me,{children:"Tier Name"}),e.jsx(me,{children:"Discount"}),e.jsx(me,{children:"Min Rentals"}),e.jsx(me,{children:"Min Spent"}),e.jsx(me,{children:"Status"}),r&&e.jsx(me,{children:"Actions"})]})}),e.jsx(or,{children:a.map(H=>e.jsxs(ft,{children:[e.jsx(oe,{children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:H.name}),e.jsx("div",{className:"text-sm text-gray-500",children:H.description})]})}),e.jsx(oe,{children:e.jsxs("span",{className:"font-semibold text-green-600",children:[H.discount_percentage,"%"]})}),e.jsx(oe,{children:H.minimum_rentals}),e.jsx(oe,{children:at(H.minimum_total_spent)}),e.jsx(oe,{children:e.jsx(Oe,{variant:H.is_active?"default":"secondary",children:H.is_active?"Active":"Inactive"})}),r&&e.jsx(oe,{className:"text-right",children:e.jsxs(Cr,{children:[e.jsx(Sr,{asChild:!0,children:e.jsx(q,{variant:"ghost",className:"h-8 w-8 p-0",children:e.jsx(ss,{className:"h-4 w-4"})})}),e.jsxs(wr,{align:"end",children:[e.jsx(Tr,{children:"Actions"}),e.jsxs(ct,{onClick:()=>yt(H),children:[e.jsx(xr,{className:"mr-2 h-4 w-4"}),"Edit Tier"]}),e.jsxs(ct,{onClick:()=>ge(H.id),className:"text-red-600",children:[e.jsx(br,{className:"mr-2 h-4 w-4"}),"Delete"]})]})]})})]},H.id))})]})})]})}),e.jsx(Gt,{value:"pricing",className:"space-y-6",children:e.jsxs(se,{children:[e.jsxs(ue,{className:"flex flex-row items-center justify-between",children:[e.jsx(fe,{children:"Machine Base Pricing"}),r&&e.jsxs(q,{onClick:()=>_(!0),children:[e.jsx(Vt,{className:"h-4 w-4 mr-2"}),"Add Base Pricing"]})]}),e.jsx(ae,{children:c.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Tn,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Base Pricing Set"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Base pricing is the foundation of the dynamic pricing system. Set base prices for each rental machine."}),r&&e.jsxs(q,{onClick:()=>_(!0),children:[e.jsx(Vt,{className:"h-4 w-4 mr-2"}),"Add First Base Pricing"]})]}):e.jsxs(ir,{children:[e.jsx(lr,{children:e.jsxs(ft,{children:[e.jsx(me,{children:"Machine"}),e.jsx(me,{children:"Daily Price"}),e.jsx(me,{children:"Weekly Price"}),e.jsx(me,{children:"Monthly Price"}),e.jsx(me,{children:"Min Days"}),e.jsx(me,{children:"Max Days"}),r&&e.jsx(me,{children:"Actions"})]})}),e.jsx(or,{children:c.map(H=>e.jsxs(ft,{children:[e.jsx(oe,{children:e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium",children:[H.manufacturer," ",H.machine_name]}),e.jsx("div",{className:"text-sm text-gray-500",children:H.serial_number})]})}),e.jsx(oe,{children:e.jsx("span",{className:"font-semibold",children:at(H.base_price_daily)})}),e.jsx(oe,{children:H.base_price_weekly?at(H.base_price_weekly):"-"}),e.jsx(oe,{children:H.base_price_monthly?at(H.base_price_monthly):"-"}),e.jsx(oe,{children:H.minimum_rental_days}),e.jsx(oe,{children:H.maximum_rental_days||"∞"}),r&&e.jsx(oe,{className:"text-right",children:e.jsxs(Cr,{children:[e.jsx(Sr,{asChild:!0,children:e.jsx(q,{variant:"ghost",className:"h-8 w-8 p-0",children:e.jsx(ss,{className:"h-4 w-4"})})}),e.jsxs(wr,{align:"end",children:[e.jsx(Tr,{children:"Actions"}),e.jsxs(ct,{onClick:()=>lt(H),children:[e.jsx(xr,{className:"mr-2 h-4 w-4"}),"Edit Pricing"]}),e.jsxs(ct,{onClick:()=>we(H.id),className:"text-red-600",children:[e.jsx(br,{className:"mr-2 h-4 w-4"}),"Delete"]})]})]})})]},H.id))})]})})]})}),e.jsx(Gt,{value:"analytics",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs(se,{children:[e.jsxs(ue,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(fe,{className:"text-sm font-medium",children:"Active Rules"}),e.jsx(bl,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(ae,{children:[e.jsx("div",{className:"text-2xl font-bold",children:n.filter(H=>H.is_active).length}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[n.length," total rules"]})]})]}),e.jsxs(se,{children:[e.jsxs(ue,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(fe,{className:"text-sm font-medium",children:"Customer Tiers"}),e.jsx(xs,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(ae,{children:[e.jsx("div",{className:"text-2xl font-bold",children:a.filter(H=>H.is_active).length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Active pricing tiers"})]})]}),e.jsxs(se,{children:[e.jsxs(ue,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(fe,{className:"text-sm font-medium",children:"Priced Machines"}),e.jsx(Tn,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(ae,{children:[e.jsx("div",{className:"text-2xl font-bold",children:c.length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Machines with base pricing"})]})]})]})})]}),e.jsx(Ft,{open:w,onOpenChange:b,children:e.jsxs(Rt,{className:"max-w-2xl",children:[e.jsxs(qt,{children:[e.jsx(Lt,{children:O?"Edit Pricing Rule":"Create Pricing Rule"}),e.jsx(Ut,{children:"Configure pricing rules that automatically adjust rental prices based on conditions."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(U,{htmlFor:"name",children:"Rule Name"}),e.jsx(be,{id:"name",value:V.name,onChange:H=>xe(Be=>({...Be,name:H.target.value})),placeholder:"Enter rule name"})]}),e.jsxs("div",{children:[e.jsx(U,{htmlFor:"rule_type",children:"Rule Type"}),e.jsxs(tt,{value:V.rule_type,onValueChange:H=>xe(Be=>({...Be,rule_type:H})),children:[e.jsx(Je,{children:e.jsx(rt,{})}),e.jsxs(et,{children:[e.jsx(Y,{value:"demand",children:"Demand-based"}),e.jsx(Y,{value:"seasonal",children:"Seasonal"}),e.jsx(Y,{value:"availability",children:"Availability"}),e.jsx(Y,{value:"customer_tier",children:"Customer Tier"}),e.jsx(Y,{value:"duration",children:"Duration"})]})]})]})]}),e.jsxs("div",{children:[e.jsx(U,{htmlFor:"description",children:"Description"}),e.jsx(ar,{id:"description",value:V.description,onChange:H=>xe(Be=>({...Be,description:H.target.value})),placeholder:"Enter rule description"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(U,{htmlFor:"priority",children:"Priority"}),e.jsx(be,{id:"priority",type:"number",value:V.priority,onChange:H=>xe(Be=>({...Be,priority:parseInt(H.target.value)})),min:"1",max:"10"})]}),e.jsxs("div",{className:"flex items-center space-x-2 mt-6",children:[e.jsx("input",{type:"checkbox",id:"is_active",checked:V.is_active,onChange:H=>xe(Be=>({...Be,is_active:H.target.checked}))}),e.jsx(U,{htmlFor:"is_active",children:"Active"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(q,{variant:"outline",onClick:()=>b(!1),children:"Cancel"}),e.jsxs(q,{onClick:O?ee:W,children:[O?"Update":"Create"," Rule"]})]})]})]})}),e.jsx(Ft,{open:N,onOpenChange:_,children:e.jsxs(Rt,{className:"max-w-2xl",children:[e.jsxs(qt,{children:[e.jsx(Lt,{children:R?"Edit Base Pricing":"Add Base Pricing"}),e.jsx(Ut,{children:R?`Configure base pricing for ${R.manufacturer} ${R.machine_name}`:"Set base pricing for a rental machine. This is the foundation price before any dynamic adjustments."})]}),e.jsxs("div",{className:"space-y-4",children:[!R&&e.jsxs("div",{children:[e.jsx(U,{htmlFor:"rental_machine_id",children:"Rental Machine"}),e.jsxs(tt,{value:pe.rental_machine_id,onValueChange:H=>re(Be=>({...Be,rental_machine_id:H})),children:[e.jsx(Je,{children:e.jsx(rt,{placeholder:"Select a rental machine"})}),e.jsx(et,{children:Array.isArray(d)&&d.length>0?d.map(H=>e.jsxs(Y,{value:H.id.toString(),children:[H.manufacturer," ",H.model_name," - ",H.serial_number]},H.id)):e.jsx(Y,{value:"no-machines",disabled:!0,children:"No rental machines available"})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(U,{htmlFor:"base_price_daily",children:"Daily Price *"}),e.jsx(be,{id:"base_price_daily",type:"number",step:"0.01",min:"0",value:pe.base_price_daily,onChange:H=>re(Be=>({...Be,base_price_daily:H.target.value})),placeholder:"0.00",required:!0})]}),e.jsxs("div",{children:[e.jsx(U,{htmlFor:"base_price_weekly",children:"Weekly Price"}),e.jsx(be,{id:"base_price_weekly",type:"number",step:"0.01",min:"0",value:pe.base_price_weekly,onChange:H=>re(Be=>({...Be,base_price_weekly:H.target.value})),placeholder:"0.00"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(U,{htmlFor:"base_price_monthly",children:"Monthly Price"}),e.jsx(be,{id:"base_price_monthly",type:"number",step:"0.01",min:"0",value:pe.base_price_monthly,onChange:H=>re(Be=>({...Be,base_price_monthly:H.target.value})),placeholder:"0.00"})]}),e.jsxs("div",{children:[e.jsx(U,{htmlFor:"currency",children:"Currency"}),e.jsxs(tt,{value:pe.currency,onValueChange:H=>re(Be=>({...Be,currency:H})),children:[e.jsx(Je,{children:e.jsx(rt,{})}),e.jsxs(et,{children:[e.jsx(Y,{value:"KM",children:"KM"}),e.jsx(Y,{value:"EUR",children:"EUR"}),e.jsx(Y,{value:"USD",children:"USD"}),e.jsx(Y,{value:"GBP",children:"GBP"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(U,{htmlFor:"minimum_rental_days",children:"Minimum Rental Days"}),e.jsx(be,{id:"minimum_rental_days",type:"number",min:"1",value:pe.minimum_rental_days,onChange:H=>re(Be=>({...Be,minimum_rental_days:H.target.value})),placeholder:"1"})]}),e.jsxs("div",{children:[e.jsx(U,{htmlFor:"maximum_rental_days",children:"Maximum Rental Days"}),e.jsx(be,{id:"maximum_rental_days",type:"number",min:"1",value:pe.maximum_rental_days,onChange:H=>re(Be=>({...Be,maximum_rental_days:H.target.value})),placeholder:"Leave empty for no limit"})]})]}),e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"How Base Pricing Works:"}),e.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[e.jsx("li",{children:"• Base pricing is the foundation for all dynamic pricing calculations"}),e.jsx("li",{children:"• Pricing rules (demand, seasonal, etc.) are applied as multipliers to base prices"}),e.jsx("li",{children:"• Customer tier discounts are applied as percentage reductions"}),e.jsx("li",{children:"• Final price = Base Price × Rule Multipliers × (1 - Customer Discount)"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(q,{variant:"outline",onClick:()=>{_(!1),G(null),Ye()},children:"Cancel"}),e.jsxs(q,{onClick:R?te:he,children:[R?"Update":"Create"," Pricing"]})]})]})]})}),e.jsx(Ft,{open:S,onOpenChange:k,children:e.jsxs(Rt,{className:"max-w-4xl",children:[e.jsxs(qt,{children:[e.jsx(Lt,{children:"Pricing Simulation"}),e.jsx(Ut,{children:"Test different pricing scenarios to see how rules affect final prices."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(U,{htmlFor:"rental_machine_id",children:"Rental Machine ID"}),e.jsx(be,{id:"rental_machine_id",value:M.rental_machine_id,onChange:H=>B(Be=>({...Be,rental_machine_id:H.target.value})),placeholder:"Enter machine ID"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(U,{children:"Scenarios"}),M.scenarios.map((H,Be)=>e.jsxs("div",{className:"grid grid-cols-4 gap-2 p-3 border rounded",children:[e.jsx(be,{placeholder:"Scenario name",value:H.name,onChange:st=>{const K=[...M.scenarios];K[Be].name=st.target.value,B(Z=>({...Z,scenarios:K}))}}),e.jsx(Rn,{value:H.start_date,onChange:st=>{const K=[...M.scenarios];K[Be].start_date=st,B(Z=>({...Z,scenarios:K}))},placeholder:"Start date"}),e.jsx(Rn,{value:H.end_date,onChange:st=>{const K=[...M.scenarios];K[Be].end_date=st,B(Z=>({...Z,scenarios:K}))},placeholder:"End date"}),e.jsx(be,{placeholder:"Customer ID (optional)",value:H.customer_id,onChange:st=>{const K=[...M.scenarios];K[Be].customer_id=st.target.value,B(Z=>({...Z,scenarios:K}))}})]},Be))]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(q,{variant:"outline",onClick:()=>k(!1),children:"Cancel"}),e.jsx(q,{onClick:De,children:"Run Simulation"})]})]})]})}),e.jsx(Ft,{open:E,onOpenChange:A,children:e.jsxs(Rt,{className:"max-w-2xl",children:[e.jsxs(qt,{children:[e.jsx(Lt,{children:J?"Edit Customer Tier":"Create Customer Tier"}),e.jsx(Ut,{children:"Configure customer pricing tiers with discount levels and qualification requirements."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(U,{htmlFor:"tier_name",children:"Tier Name"}),e.jsx(be,{id:"tier_name",value:L.name,onChange:H=>T(Be=>({...Be,name:H.target.value})),placeholder:"Enter tier name"})]}),e.jsxs("div",{children:[e.jsx(U,{htmlFor:"discount_percentage",children:"Discount Percentage"}),e.jsx(be,{id:"discount_percentage",type:"number",step:"0.01",min:"0",max:"100",value:L.discount_percentage,onChange:H=>T(Be=>({...Be,discount_percentage:H.target.value})),placeholder:"0.00"})]})]}),e.jsxs("div",{children:[e.jsx(U,{htmlFor:"tier_description",children:"Description"}),e.jsx(ar,{id:"tier_description",value:L.description,onChange:H=>T(Be=>({...Be,description:H.target.value})),placeholder:"Enter tier description"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(U,{htmlFor:"minimum_rentals",children:"Minimum Rentals"}),e.jsx(be,{id:"minimum_rentals",type:"number",min:"0",value:L.minimum_rentals,onChange:H=>T(Be=>({...Be,minimum_rentals:H.target.value})),placeholder:"0"})]}),e.jsxs("div",{children:[e.jsx(U,{htmlFor:"minimum_total_spent",children:"Minimum Total Spent"}),e.jsx(be,{id:"minimum_total_spent",type:"number",step:"0.01",min:"0",value:L.minimum_total_spent,onChange:H=>T(Be=>({...Be,minimum_total_spent:H.target.value})),placeholder:"0.00"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"tier_is_active",checked:L.is_active,onChange:H=>T(Be=>({...Be,is_active:H.target.checked}))}),e.jsx(U,{htmlFor:"tier_is_active",children:"Active"})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(q,{variant:"outline",onClick:()=>A(!1),children:"Cancel"}),e.jsxs(q,{onClick:J?$e:ne,children:[J?"Update":"Create"," Tier"]})]})]})]})})]})})}function Bpe(){return e.jsx(LB,{children:e.jsx(HB,{children:e.jsx(FW,{children:e.jsx(qW,{children:e.jsxs(UW,{children:[e.jsx(RB,{position:"top-right",expand:!1,richColors:!0,closeButton:!0}),e.jsxs(Jz,{children:[e.jsx(QG,{}),e.jsxs(Ez,{children:[e.jsx(tr,{path:"/login",element:e.jsx(eQ,{})}),e.jsx(tr,{path:"/",element:e.jsx(qs,{children:e.jsx(hte,{})})}),e.jsx(tr,{path:"/dashboard/overview",element:e.jsx(qs,{children:e.jsx(bpe,{})})}),e.jsx(tr,{path:"/dashboard/my-work",element:e.jsx(qs,{children:e.jsx(_pe,{})})}),e.jsx(tr,{path:"/dashboard/admin",element:e.jsx(om,{allowedRoles:["admin"],children:e.jsx(Epe,{})})}),e.jsx(tr,{path:"/dashboard/manager",element:e.jsx(om,{allowedRoles:["manager","admin"],children:e.jsx(Mpe,{})})}),e.jsx(tr,{path:"/admin/user-activity/:userId",element:e.jsx(om,{allowedRoles:["admin"],children:e.jsx(Tpe,{})})}),e.jsx(tr,{path:"/admin-feedback",element:e.jsx(om,{allowedRoles:["admin"],children:e.jsx(Ope,{})})}),e.jsx(tr,{path:"/customers",element:e.jsx(bn,{requiredPermissions:["customers:read"],children:e.jsx(nZ,{})})}),e.jsx(tr,{path:"/customers/:id",element:e.jsx(bn,{requiredPermissions:["customers:read"],children:e.jsx(lZ,{})})}),e.jsx(tr,{path:"/add-customer",element:e.jsx(bn,{requiredPermissions:["customers:write"],children:e.jsx(oZ,{})})}),e.jsx(tr,{path:"/add-machine-model",element:e.jsx(qs,{children:e.jsx(wZ,{})})}),e.jsx(tr,{path:"/machines",element:e.jsx(qs,{children:e.jsx(Fee,{})})}),e.jsx(tr,{path:"/machines/model/:modelId",element:e.jsx(qs,{children:e.jsx(Dee,{})})}),e.jsx(tr,{path:"/machines/:id",element:e.jsx(qs,{children:e.jsx($ee,{})})}),e.jsx(tr,{path:"/inventory",element:e.jsx(bn,{requiredPermissions:["inventory:read"],children:e.jsx(qee,{})})}),e.jsx(tr,{path:"/inventory/:id",element:e.jsx(bn,{requiredPermissions:["inventory:read"],children:e.jsx(Uee,{})})}),e.jsx(tr,{path:"/add-inventory-item",element:e.jsx(bn,{requiredPermissions:["inventory:write"],children:e.jsx(Bee,{})})}),e.jsx(tr,{path:"/repair-tickets",element:e.jsx(bn,{requiredPermissions:["repair_tickets:read"],children:e.jsx(ete,{})})}),e.jsx(tr,{path:"/repair-tickets/:id",element:e.jsx(bn,{requiredPermissions:["repair_tickets:read"],children:e.jsx(Wee,{})})}),e.jsx(tr,{path:"/create-repair-ticket",element:e.jsx(bn,{requiredPermissions:["repair_tickets:write"],children:e.jsx(Qee,{})})}),e.jsx(tr,{path:"/create-warranty-repair-ticket",element:e.jsx(bn,{requiredPermissions:["repair_tickets:write"],children:e.jsx(Xee,{})})}),e.jsx(tr,{path:"/work-orders",element:e.jsx(bn,{requiredPermissions:["work_orders:read"],children:e.jsx(nte,{})})}),e.jsx(tr,{path:"/work-orders/:id",element:e.jsx(bn,{requiredPermissions:["work_orders:read"],children:e.jsx(Hee,{})})}),e.jsx(tr,{path:"/pipeline-leads",element:e.jsx(bn,{requiredPermissions:["pipeline:read"],children:e.jsx(ste,{})})}),e.jsx(tr,{path:"/quote-management",element:e.jsx(bn,{requiredPermissions:["quotes:read"],children:e.jsx(cte,{})})}),e.jsx(tr,{path:"/sales-reports",element:e.jsx(bn,{requiredPermissions:["sales_reports:read"],children:e.jsx(ute,{})})}),e.jsx(tr,{path:"/sales-targets",element:e.jsx(bn,{requiredPermissions:["sales_targets:read"],children:e.jsx(mte,{})})}),e.jsx(tr,{path:"/warranty-repair-tickets",element:e.jsx(bn,{requiredPermissions:["repair_tickets:read"],children:e.jsx(Kee,{})})}),e.jsx(tr,{path:"/warranty-repair-tickets/:id",element:e.jsx(bn,{requiredPermissions:["repair_tickets:read"],children:e.jsx(Vee,{})})}),e.jsx(tr,{path:"/warranty-work-orders",element:e.jsx(bn,{requiredPermissions:["work_orders:read"],children:e.jsx(Gee,{})})}),e.jsx(tr,{path:"/warranty-work-orders/:id",element:e.jsx(bn,{requiredPermissions:["work_orders:read"],children:e.jsx(Yee,{})})}),e.jsx(tr,{path:"/rental-machines",element:e.jsx(qs,{children:e.jsx(Ipe,{})})}),e.jsx(tr,{path:"/rental-machines/:id",element:e.jsx(qs,{children:e.jsx($pe,{})})}),e.jsx(tr,{path:"/machine-rentals",element:e.jsx(qs,{children:e.jsx(Fpe,{})})}),e.jsx(tr,{path:"/machine-rentals/:id",element:e.jsx(qs,{children:e.jsx(qpe,{})})}),e.jsx(tr,{path:"/rental-analytics",element:e.jsx(qs,{children:e.jsx(Upe,{})})}),e.jsx(tr,{path:"/dynamic-pricing",element:e.jsx(qs,{children:e.jsx(zpe,{})})}),e.jsx(tr,{path:"/notifications",element:e.jsx(qs,{children:e.jsx(Lpe,{})})}),e.jsx(tr,{path:"/settings",element:e.jsx(bn,{requiredPermissions:["settings:read"],children:e.jsx(Ppe,{})})}),e.jsx(tr,{path:"/admin-only-test",element:e.jsx(om,{allowedRoles:["admin"],children:e.jsxs("div",{className:"p-6",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Admin Only Page"}),e.jsx("p",{className:"text-muted-foreground",children:"This page is only accessible to admin users."})]})})})]})]})]})})})})})}const Wpe=new kU({defaultOptions:{queries:{staleTime:300*1e3,retry:1}}});sU.createRoot(document.getElementById("root")).render(e.jsx(f.StrictMode,{children:e.jsx(AU,{client:Wpe,children:e.jsx(Bpe,{})})}));
